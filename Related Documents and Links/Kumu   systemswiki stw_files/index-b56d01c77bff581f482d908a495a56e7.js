/**
 * @preserve FastClick: polyfill to remove click delays on browsers with touch UIs.
 *
 * @version 0.6.11
 * @codingstandard ftlabs-jsv2
 * @copyright The Financial Times Limited [All Rights Reserved]
 * @license MIT License (see LICENSE.txt)
 */
function FastClick(t){"use strict";var e,n=this;if(this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=10,this.layer=t,!t||!t.nodeType)throw new TypeError("Layer must be a document node");this.onClick=function(){return FastClick.prototype.onClick.apply(n,arguments)},this.onMouse=function(){return FastClick.prototype.onMouse.apply(n,arguments)},this.onTouchStart=function(){return FastClick.prototype.onTouchStart.apply(n,arguments)},this.onTouchMove=function(){return FastClick.prototype.onTouchMove.apply(n,arguments)},this.onTouchEnd=function(){return FastClick.prototype.onTouchEnd.apply(n,arguments)},this.onTouchCancel=function(){return FastClick.prototype.onTouchCancel.apply(n,arguments)},FastClick.notNeeded(t)||(this.deviceIsAndroid&&(t.addEventListener("mouseover",this.onMouse,!0),t.addEventListener("mousedown",this.onMouse,!0),t.addEventListener("mouseup",this.onMouse,!0)),t.addEventListener("click",this.onClick,!0),t.addEventListener("touchstart",this.onTouchStart,!1),t.addEventListener("touchmove",this.onTouchMove,!1),t.addEventListener("touchend",this.onTouchEnd,!1),t.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(t.removeEventListener=function(e,n,i){var r=Node.prototype.removeEventListener;"click"===e?r.call(t,e,n.hijacked||n,i):r.call(t,e,n,i)},t.addEventListener=function(e,n,i){var r=Node.prototype.addEventListener;"click"===e?r.call(t,e,n.hijacked||(n.hijacked=function(t){t.propagationStopped||n(t)}),i):r.call(t,e,n,i)}),"function"==typeof t.onclick&&(e=t.onclick,t.addEventListener("click",function(t){e(t)},!1),t.onclick=null))}function Rectangle(t,e,n,i){this.xmin=t,this.ymin=e,this.xmax=n,this.ymax=i}function Vector(t,e){this.x=t||0,this.y=e||0}!function(t,e){t.rails!==e&&t.error("jquery-ujs has already been loaded!");var n,i=t(document);t.rails=n={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with]",buttonClickSelector:"button[data-remote]",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]",linkDisableSelector:"a[data-disable-with]",CSRFProtection:function(e){var n=t('meta[name="csrf-token"]').attr("content");n&&e.setRequestHeader("X-CSRF-Token",n)},fire:function(e,n,i){var r=t.Event(n);return e.trigger(r,i),r.result!==!1},confirm:function(t){return confirm(t)},ajax:function(e){return t.ajax(e)},href:function(t){return t.attr("href")},handleRemote:function(i){var r,o,s,a,l,u,c,h;if(n.fire(i,"ajax:before")){if(a=i.data("cross-domain"),l=a===e?null:a,u=i.data("with-credentials")||null,c=i.data("type")||t.ajaxSettings&&t.ajaxSettings.dataType,i.is("form")){r=i.attr("method"),o=i.attr("action"),s=i.serializeArray();var p=i.data("ujs:submit-button");p&&(s.push(p),i.data("ujs:submit-button",null))}else i.is(n.inputChangeSelector)?(r=i.data("method"),o=i.data("url"),s=i.serialize(),i.data("params")&&(s=s+"&"+i.data("params"))):i.is(n.buttonClickSelector)?(r=i.data("method")||"get",o=i.data("url"),s=i.serialize(),i.data("params")&&(s=s+"&"+i.data("params"))):(r=i.data("method"),o=n.href(i),s=i.data("params")||null);h={type:r||"GET",data:s,dataType:c,beforeSend:function(t,r){return r.dataType===e&&t.setRequestHeader("accept","*/*;q=0.5, "+r.accepts.script),n.fire(i,"ajax:beforeSend",[t,r])},success:function(t,e,n){i.trigger("ajax:success",[t,e,n])},complete:function(t,e){i.trigger("ajax:complete",[t,e])},error:function(t,e,n){i.trigger("ajax:error",[t,e,n])},crossDomain:l},u&&(h.xhrFields={withCredentials:u}),o&&(h.url=o);var f=n.ajax(h);return i.trigger("ajax:send",f),f}return!1},handleMethod:function(i){var r=n.href(i),o=i.data("method"),s=i.attr("target"),a=t("meta[name=csrf-token]").attr("content"),l=t("meta[name=csrf-param]").attr("content"),u=t('<form method="post" action="'+r+'"></form>'),c='<input name="_method" value="'+o+'" type="hidden" />';l!==e&&a!==e&&(c+='<input name="'+l+'" value="'+a+'" type="hidden" />'),s&&u.attr("target",s),u.hide().append(c).appendTo("body"),u.submit()},disableFormElements:function(e){e.find(n.disableSelector).each(function(){var e=t(this),n=e.is("button")?"html":"val";e.data("ujs:enable-with",e[n]()),e[n](e.data("disable-with")),e.prop("disabled",!0)})},enableFormElements:function(e){e.find(n.enableSelector).each(function(){var e=t(this),n=e.is("button")?"html":"val";e.data("ujs:enable-with")&&e[n](e.data("ujs:enable-with")),e.prop("disabled",!1)})},allowAction:function(t){var e,i=t.data("confirm"),r=!1;return i?(n.fire(t,"confirm")&&(r=n.confirm(i),e=n.fire(t,"confirm:complete",[r])),r&&e):!0},blankInputs:function(e,n,i){var r,o,s=t(),a=n||"input,textarea",l=e.find(a);return l.each(function(){if(r=t(this),o=r.is("input[type=checkbox],input[type=radio]")?r.is(":checked"):r.val(),!o==!i){if(r.is("input[type=radio]")&&l.filter('input[type=radio]:checked[name="'+r.attr("name")+'"]').length)return!0;s=s.add(r)}}),s.length?s:!1},nonBlankInputs:function(t,e){return n.blankInputs(t,e,!0)},stopEverything:function(e){return t(e.target).trigger("ujs:everythingStopped"),e.stopImmediatePropagation(),!1},disableElement:function(t){t.data("ujs:enable-with",t.html()),t.html(t.data("disable-with")),t.bind("click.railsDisable",function(t){return n.stopEverything(t)})},enableElement:function(t){t.data("ujs:enable-with")!==e&&(t.html(t.data("ujs:enable-with")),t.removeData("ujs:enable-with")),t.unbind("click.railsDisable")}},n.fire(i,"rails:attachBindings")&&(t.ajaxPrefilter(function(t,e,i){t.crossDomain||n.CSRFProtection(i)}),i.delegate(n.linkDisableSelector,"ajax:complete",function(){n.enableElement(t(this))}),i.delegate(n.linkClickSelector,"click.rails",function(i){var r=t(this),o=r.data("method"),s=r.data("params");if(!n.allowAction(r))return n.stopEverything(i);if(r.is(n.linkDisableSelector)&&n.disableElement(r),r.data("remote")!==e){if(!(!i.metaKey&&!i.ctrlKey||o&&"GET"!==o||s))return!0;var a=n.handleRemote(r);return a===!1?n.enableElement(r):a.error(function(){n.enableElement(r)}),!1}return r.data("method")?(n.handleMethod(r),!1):void 0}),i.delegate(n.buttonClickSelector,"click.rails",function(e){var i=t(this);return n.allowAction(i)?(n.handleRemote(i),!1):n.stopEverything(e)}),i.delegate(n.inputChangeSelector,"change.rails",function(e){var i=t(this);return n.allowAction(i)?(n.handleRemote(i),!1):n.stopEverything(e)}),i.delegate(n.formSubmitSelector,"submit.rails",function(i){var r=t(this),o=r.data("remote")!==e,s=n.blankInputs(r,n.requiredInputSelector),a=n.nonBlankInputs(r,n.fileInputSelector);if(!n.allowAction(r))return n.stopEverything(i);if(s&&r.attr("novalidate")==e&&n.fire(r,"ajax:aborted:required",[s]))return n.stopEverything(i);if(o){if(a){setTimeout(function(){n.disableFormElements(r)},13);var l=n.fire(r,"ajax:aborted:file",[a]);return l||setTimeout(function(){n.enableFormElements(r)},13),l}return n.handleRemote(r),!1}setTimeout(function(){n.disableFormElements(r)},13)}),i.delegate(n.formInputClickSelector,"click.rails",function(e){var i=t(this);if(!n.allowAction(i))return n.stopEverything(e);var r=i.attr("name"),o=r?{name:r,value:i.val()}:null;i.closest("form").data("ujs:submit-button",o)}),i.delegate(n.formSubmitSelector,"ajax:beforeSend.rails",function(e){this==e.target&&n.disableFormElements(t(this))}),i.delegate(n.formSubmitSelector,"ajax:complete.rails",function(e){this==e.target&&n.enableFormElements(t(this))}),t(function(){var e=t("meta[name=csrf-token]").attr("content"),n=t("meta[name=csrf-param]").attr("content");t('form input[name="'+n+'"]').val(e)}))}(jQuery),/*
Copyright 2012 Igor Vaynberg

Version: 3.4.4 Timestamp: Thu Oct 24 13:23:11 PDT 2013

This software is licensed under the Apache License, Version 2.0 (the "Apache License") or the GNU
General Public License version 2 (the "GPL License"). You may choose either license to govern your
use of this software only upon the condition that you accept all of the terms of either the Apache
License or the GPL License.

You may obtain a copy of the Apache License and the GPL License at:

    http://www.apache.org/licenses/LICENSE-2.0
    http://www.gnu.org/licenses/gpl-2.0.html

Unless required by applicable law or agreed to in writing, software distributed under the
Apache License or the GPL Licesnse is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
CONDITIONS OF ANY KIND, either express or implied. See the Apache License and the GPL License for
the specific language governing permissions and limitations under the Apache License and the GPL License.
*/
function(t){"undefined"==typeof t.fn.each2&&t.extend(t.fn,{each2:function(e){for(var n=t([0]),i=-1,r=this.length;++i<r&&(n.context=n[0]=this[i])&&e.call(n[0],i,n)!==!1;);return this}})}(jQuery),function(t,e){"use strict";function n(t){var e,n,i,r;if(!t||t.length<1)return t;for(e="",n=0,i=t.length;i>n;n++)r=t.charAt(n),e+=B[r]||r;return e}function i(t,e){for(var n=0,i=e.length;i>n;n+=1)if(o(t,e[n]))return n;return-1}function r(){var e=t(R);e.appendTo("body");var n={width:e.width()-e[0].clientWidth,height:e.height()-e[0].clientHeight};return e.remove(),n}function o(t,n){return t===n?!0:t===e||n===e?!1:null===t||null===n?!1:t.constructor===String?t+""==n+"":n.constructor===String?n+""==t+"":!1}function s(e,n){var i,r,o;if(null===e||e.length<1)return[];for(i=e.split(n),r=0,o=i.length;o>r;r+=1)i[r]=t.trim(i[r]);return i}function a(t){return t.outerWidth(!1)-t.width()}function l(n){var i="keyup-change-value";n.on("keydown",function(){t.data(n,i)===e&&t.data(n,i,n.val())}),n.on("keyup",function(){var r=t.data(n,i);r!==e&&n.val()!==r&&(t.removeData(n,i),n.trigger("keyup-change"))})}function u(n){n.on("mousemove",function(n){var i=z;(i===e||i.x!==n.pageX||i.y!==n.pageY)&&t(n.target).trigger("mousemove-filtered",n)})}function c(t,n,i){i=i||e;var r;return function(){var e=arguments;window.clearTimeout(r),r=window.setTimeout(function(){n.apply(i,e)},t)}}function h(t){var e,n=!1;return function(){return n===!1&&(e=t(),n=!0),e}}function p(t,e){var n=c(t,function(t){e.trigger("scroll-debounced",t)});e.on("scroll",function(t){i(t.target,e.get())>=0&&n(t)})}function f(t){t[0]!==document.activeElement&&window.setTimeout(function(){var e,n=t[0],i=t.val().length;t.focus(),t.is(":visible")&&n===document.activeElement&&(n.setSelectionRange?n.setSelectionRange(i,i):n.createTextRange&&(e=n.createTextRange(),e.collapse(!1),e.select()))},0)}function d(e){e=t(e)[0];var n=0,i=0;if("selectionStart"in e)n=e.selectionStart,i=e.selectionEnd-n;else if("selection"in document){e.focus();var r=document.selection.createRange();i=document.selection.createRange().text.length,r.moveStart("character",-e.value.length),n=r.text.length-i}return{offset:n,length:i}}function m(t){t.preventDefault(),t.stopPropagation()}function g(t){t.preventDefault(),t.stopImmediatePropagation()}function v(e){if(!I){var n=e[0].currentStyle||window.getComputedStyle(e[0],null);I=t(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:n.fontSize,fontFamily:n.fontFamily,fontStyle:n.fontStyle,fontWeight:n.fontWeight,letterSpacing:n.letterSpacing,textTransform:n.textTransform,whiteSpace:"nowrap"}),I.attr("class","select2-sizer"),t("body").append(I)}return I.text(e.val()),I.width()}function y(e,n,i){var r,o,s=[];r=e.attr("class"),r&&(r=""+r,t(r.split(" ")).each2(function(){0===this.indexOf("select2-")&&s.push(this)})),r=n.attr("class"),r&&(r=""+r,t(r.split(" ")).each2(function(){0!==this.indexOf("select2-")&&(o=i(this),o&&s.push(o))})),e.attr("class",s.join(" "))}function b(t,e,i,r){var o=n(t.toUpperCase()).indexOf(n(e.toUpperCase())),s=e.length;return 0>o?(i.push(r(t)),void 0):(i.push(r(t.substring(0,o))),i.push("<span class='select2-match'>"),i.push(r(t.substring(o,o+s))),i.push("</span>"),i.push(r(t.substring(o+s,t.length))),void 0)}function w(t){var e={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(t).replace(/[&<>"'\/\\]/g,function(t){return e[t]})}function _(n){var i,r=null,o=n.quietMillis||100,s=n.url,a=this;return function(l){window.clearTimeout(i),i=window.setTimeout(function(){var i=n.data,o=s,u=n.transport||t.fn.select2.ajaxDefaults.transport,c={type:n.type||"GET",cache:n.cache||!1,jsonpCallback:n.jsonpCallback||e,dataType:n.dataType||"json"},h=t.extend({},t.fn.select2.ajaxDefaults.params,c);i=i?i.call(a,l.term,l.page,l.context):null,o="function"==typeof o?o.call(a,l.term,l.page,l.context):o,r&&r.abort(),n.params&&(t.isFunction(n.params)?t.extend(h,n.params.call(a)):t.extend(h,n.params)),t.extend(h,{url:o,dataType:n.dataType,data:i,success:function(t){var e=n.results(t,l.page);l.callback(e)}}),r=u.call(a,h)},o)}}function x(e){var n,i,r=e,o=function(t){return""+t.text};t.isArray(r)&&(i=r,r={results:i}),t.isFunction(r)===!1&&(i=r,r=function(){return i});var s=r();return s.text&&(o=s.text,t.isFunction(o)||(n=s.text,o=function(t){return t[n]})),function(e){var n,i=e.term,s={results:[]};return""===i?(e.callback(r()),void 0):(n=function(r,s){var a,l;if(r=r[0],r.children){a={};for(l in r)r.hasOwnProperty(l)&&(a[l]=r[l]);a.children=[],t(r.children).each2(function(t,e){n(e,a.children)}),(a.children.length||e.matcher(i,o(a),r))&&s.push(a)}else e.matcher(i,o(r),r)&&s.push(r)},t(r().results).each2(function(t,e){n(e,s.results)}),e.callback(s),void 0)}}function S(n){var i=t.isFunction(n);return function(r){var o=r.term,s={results:[]};t(i?n():n).each(function(){var t=this.text!==e,n=t?this.text:this;(""===o||r.matcher(o,n))&&s.results.push(t?this:{id:this,text:this})}),r.callback(s)}}function k(e,n){if(t.isFunction(e))return!0;if(!e)return!1;throw new Error(n+" must be a function or a falsy value")}function C(e){return t.isFunction(e)?e():e}function E(e){var n=0;return t.each(e,function(t,e){e.children?n+=E(e.children):n++}),n}function T(t,n,i,r){var s,a,l,u,c,h=t,p=!1;if(!r.createSearchChoice||!r.tokenSeparators||r.tokenSeparators.length<1)return e;for(;;){for(a=-1,l=0,u=r.tokenSeparators.length;u>l&&(c=r.tokenSeparators[l],a=t.indexOf(c),!(a>=0));l++);if(0>a)break;if(s=t.substring(0,a),t=t.substring(a+c.length),s.length>0&&(s=r.createSearchChoice.call(this,s,n),s!==e&&null!==s&&r.id(s)!==e&&null!==r.id(s))){for(p=!1,l=0,u=n.length;u>l;l++)if(o(r.id(s),r.id(n[l]))){p=!0;break}p||i(s)}}return h!==t?t:void 0}function M(e,n){var i=function(){};return i.prototype=new e,i.prototype.constructor=i,i.prototype.parent=e.prototype,i.prototype=t.extend(i.prototype,n),i}if(window.Select2===e){var P,A,O,N,D,I,L,$,z={x:0,y:0},P={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(t){switch(t=t.which?t.which:t){case P.LEFT:case P.RIGHT:case P.UP:case P.DOWN:return!0}return!1},isControl:function(t){var e=t.which;switch(e){case P.SHIFT:case P.CTRL:case P.ALT:return!0}return t.metaKey?!0:!1},isFunctionKey:function(t){return t=t.which?t.which:t,t>=112&&123>=t}},R="<div class='select2-measure-scrollbar'></div>",B={"Ⓐ":"A",Ａ:"A",À:"A",Á:"A",Â:"A",Ầ:"A",Ấ:"A",Ẫ:"A",Ẩ:"A",Ã:"A",Ā:"A",Ă:"A",Ằ:"A",Ắ:"A",Ẵ:"A",Ẳ:"A",Ȧ:"A",Ǡ:"A",Ä:"A",Ǟ:"A",Ả:"A",Å:"A",Ǻ:"A",Ǎ:"A",Ȁ:"A",Ȃ:"A",Ạ:"A",Ậ:"A",Ặ:"A",Ḁ:"A",Ą:"A",Ⱥ:"A",Ɐ:"A",Ꜳ:"AA",Æ:"AE",Ǽ:"AE",Ǣ:"AE",Ꜵ:"AO",Ꜷ:"AU",Ꜹ:"AV",Ꜻ:"AV",Ꜽ:"AY","Ⓑ":"B",Ｂ:"B",Ḃ:"B",Ḅ:"B",Ḇ:"B",Ƀ:"B",Ƃ:"B",Ɓ:"B","Ⓒ":"C",Ｃ:"C",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",Ç:"C",Ḉ:"C",Ƈ:"C",Ȼ:"C",Ꜿ:"C","Ⓓ":"D",Ｄ:"D",Ḋ:"D",Ď:"D",Ḍ:"D",Ḑ:"D",Ḓ:"D",Ḏ:"D",Đ:"D",Ƌ:"D",Ɗ:"D",Ɖ:"D",Ꝺ:"D",Ǳ:"DZ",Ǆ:"DZ",ǲ:"Dz",ǅ:"Dz","Ⓔ":"E",Ｅ:"E",È:"E",É:"E",Ê:"E",Ề:"E",Ế:"E",Ễ:"E",Ể:"E",Ẽ:"E",Ē:"E",Ḕ:"E",Ḗ:"E",Ĕ:"E",Ė:"E",Ë:"E",Ẻ:"E",Ě:"E",Ȅ:"E",Ȇ:"E",Ẹ:"E",Ệ:"E",Ȩ:"E",Ḝ:"E",Ę:"E",Ḙ:"E",Ḛ:"E",Ɛ:"E",Ǝ:"E","Ⓕ":"F",Ｆ:"F",Ḟ:"F",Ƒ:"F",Ꝼ:"F","Ⓖ":"G",Ｇ:"G",Ǵ:"G",Ĝ:"G",Ḡ:"G",Ğ:"G",Ġ:"G",Ǧ:"G",Ģ:"G",Ǥ:"G",Ɠ:"G","Ꞡ":"G",Ᵹ:"G",Ꝿ:"G","Ⓗ":"H",Ｈ:"H",Ĥ:"H",Ḣ:"H",Ḧ:"H",Ȟ:"H",Ḥ:"H",Ḩ:"H",Ḫ:"H",Ħ:"H",Ⱨ:"H",Ⱶ:"H","Ɥ":"H","Ⓘ":"I",Ｉ:"I",Ì:"I",Í:"I",Î:"I",Ĩ:"I",Ī:"I",Ĭ:"I",İ:"I",Ï:"I",Ḯ:"I",Ỉ:"I",Ǐ:"I",Ȉ:"I",Ȋ:"I",Ị:"I",Į:"I",Ḭ:"I",Ɨ:"I","Ⓙ":"J",Ｊ:"J",Ĵ:"J",Ɉ:"J","Ⓚ":"K",Ｋ:"K",Ḱ:"K",Ǩ:"K",Ḳ:"K",Ķ:"K",Ḵ:"K",Ƙ:"K",Ⱪ:"K",Ꝁ:"K",Ꝃ:"K",Ꝅ:"K","Ꞣ":"K","Ⓛ":"L",Ｌ:"L",Ŀ:"L",Ĺ:"L",Ľ:"L",Ḷ:"L",Ḹ:"L",Ļ:"L",Ḽ:"L",Ḻ:"L",Ł:"L",Ƚ:"L",Ɫ:"L",Ⱡ:"L",Ꝉ:"L",Ꝇ:"L",Ꞁ:"L",Ǉ:"LJ",ǈ:"Lj","Ⓜ":"M",Ｍ:"M",Ḿ:"M",Ṁ:"M",Ṃ:"M",Ɱ:"M",Ɯ:"M","Ⓝ":"N",Ｎ:"N",Ǹ:"N",Ń:"N",Ñ:"N",Ṅ:"N",Ň:"N",Ṇ:"N",Ņ:"N",Ṋ:"N",Ṉ:"N",Ƞ:"N",Ɲ:"N","Ꞑ":"N","Ꞥ":"N",Ǌ:"NJ",ǋ:"Nj","Ⓞ":"O",Ｏ:"O",Ò:"O",Ó:"O",Ô:"O",Ồ:"O",Ố:"O",Ỗ:"O",Ổ:"O",Õ:"O",Ṍ:"O",Ȭ:"O",Ṏ:"O",Ō:"O",Ṑ:"O",Ṓ:"O",Ŏ:"O",Ȯ:"O",Ȱ:"O",Ö:"O",Ȫ:"O",Ỏ:"O",Ő:"O",Ǒ:"O",Ȍ:"O",Ȏ:"O",Ơ:"O",Ờ:"O",Ớ:"O",Ỡ:"O",Ở:"O",Ợ:"O",Ọ:"O",Ộ:"O",Ǫ:"O",Ǭ:"O",Ø:"O",Ǿ:"O",Ɔ:"O",Ɵ:"O",Ꝋ:"O",Ꝍ:"O",Ƣ:"OI",Ꝏ:"OO",Ȣ:"OU","Ⓟ":"P",Ｐ:"P",Ṕ:"P",Ṗ:"P",Ƥ:"P",Ᵽ:"P",Ꝑ:"P",Ꝓ:"P",Ꝕ:"P","Ⓠ":"Q",Ｑ:"Q",Ꝗ:"Q",Ꝙ:"Q",Ɋ:"Q","Ⓡ":"R",Ｒ:"R",Ŕ:"R",Ṙ:"R",Ř:"R",Ȑ:"R",Ȓ:"R",Ṛ:"R",Ṝ:"R",Ŗ:"R",Ṟ:"R",Ɍ:"R",Ɽ:"R",Ꝛ:"R","Ꞧ":"R",Ꞃ:"R","Ⓢ":"S",Ｓ:"S",ẞ:"S",Ś:"S",Ṥ:"S",Ŝ:"S",Ṡ:"S",Š:"S",Ṧ:"S",Ṣ:"S",Ṩ:"S",Ș:"S",Ş:"S","Ȿ":"S","Ꞩ":"S",Ꞅ:"S","Ⓣ":"T",Ｔ:"T",Ṫ:"T",Ť:"T",Ṭ:"T",Ț:"T",Ţ:"T",Ṱ:"T",Ṯ:"T",Ŧ:"T",Ƭ:"T",Ʈ:"T",Ⱦ:"T",Ꞇ:"T",Ꜩ:"TZ","Ⓤ":"U",Ｕ:"U",Ù:"U",Ú:"U",Û:"U",Ũ:"U",Ṹ:"U",Ū:"U",Ṻ:"U",Ŭ:"U",Ü:"U",Ǜ:"U",Ǘ:"U",Ǖ:"U",Ǚ:"U",Ủ:"U",Ů:"U",Ű:"U",Ǔ:"U",Ȕ:"U",Ȗ:"U",Ư:"U",Ừ:"U",Ứ:"U",Ữ:"U",Ử:"U",Ự:"U",Ụ:"U",Ṳ:"U",Ų:"U",Ṷ:"U",Ṵ:"U",Ʉ:"U","Ⓥ":"V",Ｖ:"V",Ṽ:"V",Ṿ:"V",Ʋ:"V",Ꝟ:"V",Ʌ:"V",Ꝡ:"VY","Ⓦ":"W",Ｗ:"W",Ẁ:"W",Ẃ:"W",Ŵ:"W",Ẇ:"W",Ẅ:"W",Ẉ:"W",Ⱳ:"W","Ⓧ":"X",Ｘ:"X",Ẋ:"X",Ẍ:"X","Ⓨ":"Y",Ｙ:"Y",Ỳ:"Y",Ý:"Y",Ŷ:"Y",Ỹ:"Y",Ȳ:"Y",Ẏ:"Y",Ÿ:"Y",Ỷ:"Y",Ỵ:"Y",Ƴ:"Y",Ɏ:"Y",Ỿ:"Y","Ⓩ":"Z",Ｚ:"Z",Ź:"Z",Ẑ:"Z",Ż:"Z",Ž:"Z",Ẓ:"Z",Ẕ:"Z",Ƶ:"Z",Ȥ:"Z","Ɀ":"Z",Ⱬ:"Z",Ꝣ:"Z","ⓐ":"a",ａ:"a",ẚ:"a",à:"a",á:"a",â:"a",ầ:"a",ấ:"a",ẫ:"a",ẩ:"a",ã:"a",ā:"a",ă:"a",ằ:"a",ắ:"a",ẵ:"a",ẳ:"a",ȧ:"a",ǡ:"a",ä:"a",ǟ:"a",ả:"a",å:"a",ǻ:"a",ǎ:"a",ȁ:"a",ȃ:"a",ạ:"a",ậ:"a",ặ:"a",ḁ:"a",ą:"a",ⱥ:"a",ɐ:"a",ꜳ:"aa",æ:"ae",ǽ:"ae",ǣ:"ae",ꜵ:"ao",ꜷ:"au",ꜹ:"av",ꜻ:"av",ꜽ:"ay","ⓑ":"b",ｂ:"b",ḃ:"b",ḅ:"b",ḇ:"b",ƀ:"b",ƃ:"b",ɓ:"b","ⓒ":"c",ｃ:"c",ć:"c",ĉ:"c",ċ:"c",č:"c",ç:"c",ḉ:"c",ƈ:"c",ȼ:"c",ꜿ:"c",ↄ:"c","ⓓ":"d",ｄ:"d",ḋ:"d",ď:"d",ḍ:"d",ḑ:"d",ḓ:"d",ḏ:"d",đ:"d",ƌ:"d",ɖ:"d",ɗ:"d",ꝺ:"d",ǳ:"dz",ǆ:"dz","ⓔ":"e",ｅ:"e",è:"e",é:"e",ê:"e",ề:"e",ế:"e",ễ:"e",ể:"e",ẽ:"e",ē:"e",ḕ:"e",ḗ:"e",ĕ:"e",ė:"e",ë:"e",ẻ:"e",ě:"e",ȅ:"e",ȇ:"e",ẹ:"e",ệ:"e",ȩ:"e",ḝ:"e",ę:"e",ḙ:"e",ḛ:"e",ɇ:"e",ɛ:"e",ǝ:"e","ⓕ":"f",ｆ:"f",ḟ:"f",ƒ:"f",ꝼ:"f","ⓖ":"g",ｇ:"g",ǵ:"g",ĝ:"g",ḡ:"g",ğ:"g",ġ:"g",ǧ:"g",ģ:"g",ǥ:"g",ɠ:"g","ꞡ":"g",ᵹ:"g",ꝿ:"g","ⓗ":"h",ｈ:"h",ĥ:"h",ḣ:"h",ḧ:"h",ȟ:"h",ḥ:"h",ḩ:"h",ḫ:"h",ẖ:"h",ħ:"h",ⱨ:"h",ⱶ:"h",ɥ:"h",ƕ:"hv","ⓘ":"i",ｉ:"i",ì:"i",í:"i",î:"i",ĩ:"i",ī:"i",ĭ:"i",ï:"i",ḯ:"i",ỉ:"i",ǐ:"i",ȉ:"i",ȋ:"i",ị:"i",į:"i",ḭ:"i",ɨ:"i",ı:"i","ⓙ":"j",ｊ:"j",ĵ:"j",ǰ:"j",ɉ:"j","ⓚ":"k",ｋ:"k",ḱ:"k",ǩ:"k",ḳ:"k",ķ:"k",ḵ:"k",ƙ:"k",ⱪ:"k",ꝁ:"k",ꝃ:"k",ꝅ:"k","ꞣ":"k","ⓛ":"l",ｌ:"l",ŀ:"l",ĺ:"l",ľ:"l",ḷ:"l",ḹ:"l",ļ:"l",ḽ:"l",ḻ:"l",ſ:"l",ł:"l",ƚ:"l",ɫ:"l",ⱡ:"l",ꝉ:"l",ꞁ:"l",ꝇ:"l",ǉ:"lj","ⓜ":"m",ｍ:"m",ḿ:"m",ṁ:"m",ṃ:"m",ɱ:"m",ɯ:"m","ⓝ":"n",ｎ:"n",ǹ:"n",ń:"n",ñ:"n",ṅ:"n",ň:"n",ṇ:"n",ņ:"n",ṋ:"n",ṉ:"n",ƞ:"n",ɲ:"n",ŉ:"n","ꞑ":"n","ꞥ":"n",ǌ:"nj","ⓞ":"o",ｏ:"o",ò:"o",ó:"o",ô:"o",ồ:"o",ố:"o",ỗ:"o",ổ:"o",õ:"o",ṍ:"o",ȭ:"o",ṏ:"o",ō:"o",ṑ:"o",ṓ:"o",ŏ:"o",ȯ:"o",ȱ:"o",ö:"o",ȫ:"o",ỏ:"o",ő:"o",ǒ:"o",ȍ:"o",ȏ:"o",ơ:"o",ờ:"o",ớ:"o",ỡ:"o",ở:"o",ợ:"o",ọ:"o",ộ:"o",ǫ:"o",ǭ:"o",ø:"o",ǿ:"o",ɔ:"o",ꝋ:"o",ꝍ:"o",ɵ:"o",ƣ:"oi",ȣ:"ou",ꝏ:"oo","ⓟ":"p",ｐ:"p",ṕ:"p",ṗ:"p",ƥ:"p",ᵽ:"p",ꝑ:"p",ꝓ:"p",ꝕ:"p","ⓠ":"q",ｑ:"q",ɋ:"q",ꝗ:"q",ꝙ:"q","ⓡ":"r",ｒ:"r",ŕ:"r",ṙ:"r",ř:"r",ȑ:"r",ȓ:"r",ṛ:"r",ṝ:"r",ŗ:"r",ṟ:"r",ɍ:"r",ɽ:"r",ꝛ:"r","ꞧ":"r",ꞃ:"r","ⓢ":"s",ｓ:"s",ß:"s",ś:"s",ṥ:"s",ŝ:"s",ṡ:"s",š:"s",ṧ:"s",ṣ:"s",ṩ:"s",ș:"s",ş:"s",ȿ:"s","ꞩ":"s",ꞅ:"s",ẛ:"s","ⓣ":"t",ｔ:"t",ṫ:"t",ẗ:"t",ť:"t",ṭ:"t",ț:"t",ţ:"t",ṱ:"t",ṯ:"t",ŧ:"t",ƭ:"t",ʈ:"t",ⱦ:"t",ꞇ:"t",ꜩ:"tz","ⓤ":"u",ｕ:"u",ù:"u",ú:"u",û:"u",ũ:"u",ṹ:"u",ū:"u",ṻ:"u",ŭ:"u",ü:"u",ǜ:"u",ǘ:"u",ǖ:"u",ǚ:"u",ủ:"u",ů:"u",ű:"u",ǔ:"u",ȕ:"u",ȗ:"u",ư:"u",ừ:"u",ứ:"u",ữ:"u",ử:"u",ự:"u",ụ:"u",ṳ:"u",ų:"u",ṷ:"u",ṵ:"u",ʉ:"u","ⓥ":"v",ｖ:"v",ṽ:"v",ṿ:"v",ʋ:"v",ꝟ:"v",ʌ:"v",ꝡ:"vy","ⓦ":"w",ｗ:"w",ẁ:"w",ẃ:"w",ŵ:"w",ẇ:"w",ẅ:"w",ẘ:"w",ẉ:"w",ⱳ:"w","ⓧ":"x",ｘ:"x",ẋ:"x",ẍ:"x","ⓨ":"y",ｙ:"y",ỳ:"y",ý:"y",ŷ:"y",ỹ:"y",ȳ:"y",ẏ:"y",ÿ:"y",ỷ:"y",ẙ:"y",ỵ:"y",ƴ:"y",ɏ:"y",ỿ:"y","ⓩ":"z",ｚ:"z",ź:"z",ẑ:"z",ż:"z",ž:"z",ẓ:"z",ẕ:"z",ƶ:"z",ȥ:"z",ɀ:"z",ⱬ:"z",ꝣ:"z"};L=t(document),D=function(){var t=1;return function(){return t++}}(),L.on("mousemove",function(t){z.x=t.pageX,z.y=t.pageY}),A=M(Object,{bind:function(t){var e=this;return function(){t.apply(e,arguments)}},init:function(n){var i,o,s=".select2-results";this.opts=n=this.prepareOpts(n),this.id=n.id,n.element.data("select2")!==e&&null!==n.element.data("select2")&&n.element.data("select2").destroy(),this.container=this.createContainer(),this.containerId="s2id_"+(n.element.attr("id")||"autogen"+D()),this.containerSelector="#"+this.containerId.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.body=h(function(){return n.element.closest("body")}),y(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",n.element.attr("style")),this.container.css(C(n.containerCss)),this.container.addClass(C(n.containerCssClass)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",m),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),y(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(C(n.dropdownCssClass)),this.dropdown.data("select2",this),this.dropdown.on("click",m),this.results=i=this.container.find(s),this.search=o=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",m),u(this.results),this.dropdown.on("mousemove-filtered touchstart touchmove touchend",s,this.bind(this.highlightUnderEvent)),p(80,this.results),this.dropdown.on("scroll-debounced",s,this.bind(this.loadMoreIfNeeded)),t(this.container).on("change",".select2-input",function(t){t.stopPropagation()}),t(this.dropdown).on("change",".select2-input",function(t){t.stopPropagation()}),t.fn.mousewheel&&i.mousewheel(function(t,e,n,r){var o=i.scrollTop();r>0&&0>=o-r?(i.scrollTop(0),m(t)):0>r&&i.get(0).scrollHeight-i.scrollTop()+r<=i.height()&&(i.scrollTop(i.get(0).scrollHeight-i.height()),m(t))}),l(o),o.on("keyup-change input paste",this.bind(this.updateResults)),o.on("focus",function(){o.addClass("select2-focused")}),o.on("blur",function(){o.removeClass("select2-focused")}),this.dropdown.on("mouseup",s,this.bind(function(e){t(e.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(e),this.selectHighlighted(e))})),this.dropdown.on("click mouseup mousedown",function(t){t.stopPropagation()}),t.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==n.maximumInputLength&&this.search.attr("maxlength",n.maximumInputLength);var a=n.element.prop("disabled");a===e&&(a=!1),this.enable(!a);var c=n.element.prop("readonly");c===e&&(c=!1),this.readonly(c),$=$||r(),this.autofocus=n.element.prop("autofocus"),n.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.nextSearchTerm=e},destroy:function(){var t=this.opts.element,n=t.data("select2");this.close(),this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),n!==e&&(n.container.remove(),n.dropdown.remove(),t.removeClass("select2-offscreen").removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?t.attr({tabindex:this.elementTabIndex}):t.removeAttr("tabindex"),t.show())},optionToData:function(t){return t.is("option")?{id:t.prop("value"),text:t.text(),element:t.get(),css:t.attr("class"),disabled:t.prop("disabled"),locked:o(t.attr("locked"),"locked")||o(t.data("locked"),!0)}:t.is("optgroup")?{text:t.attr("label"),children:[],element:t.get(),css:t.attr("class")}:void 0},prepareOpts:function(n){var i,r,a,l,u=this;if(i=n.element,"select"===i.get(0).tagName.toLowerCase()&&(this.select=r=n.element),r&&t.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in n)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),n=t.extend({},{populateResults:function(i,r,o){var s,a=this.opts.id;s=function(i,r,l){var c,h,p,f,d,m,g,v,y,b;for(i=n.sortResults(i,r,o),c=0,h=i.length;h>c;c+=1)p=i[c],d=p.disabled===!0,f=!d&&a(p)!==e,m=p.children&&p.children.length>0,g=t("<li></li>"),g.addClass("select2-results-dept-"+l),g.addClass("select2-result"),g.addClass(f?"select2-result-selectable":"select2-result-unselectable"),d&&g.addClass("select2-disabled"),m&&g.addClass("select2-result-with-children"),g.addClass(u.opts.formatResultCssClass(p)),v=t(document.createElement("div")),v.addClass("select2-result-label"),b=n.formatResult(p,v,o,u.opts.escapeMarkup),b!==e&&v.html(b),g.append(v),m&&(y=t("<ul></ul>"),y.addClass("select2-result-sub"),s(p.children,y,l+1),g.append(y)),g.data("select2-data",p),r.append(g)},s(r,i,0)}},t.fn.select2.defaults,n),"function"!=typeof n.id&&(a=n.id,n.id=function(t){return t[a]}),t.isArray(n.element.data("select2Tags"))){if("tags"in n)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+n.element.attr("id");n.tags=n.element.data("select2Tags")}if(r?(n.query=this.bind(function(t){var n,r,o,s={results:[],more:!1},a=t.term;o=function(e,n){var i;e.is("option")?t.matcher(a,e.text(),e)&&n.push(u.optionToData(e)):e.is("optgroup")&&(i=u.optionToData(e),e.children().each2(function(t,e){o(e,i.children)}),i.children.length>0&&n.push(i))},n=i.children(),this.getPlaceholder()!==e&&n.length>0&&(r=this.getPlaceholderOption(),r&&(n=n.not(r))),n.each2(function(t,e){o(e,s.results)}),t.callback(s)}),n.id=function(t){return t.id},n.formatResultCssClass=function(t){return t.css}):"query"in n||("ajax"in n?(l=n.element.data("ajax-url"),l&&l.length>0&&(n.ajax.url=l),n.query=_.call(n.element,n.ajax)):"data"in n?n.query=x(n.data):"tags"in n&&(n.query=S(n.tags),n.createSearchChoice===e&&(n.createSearchChoice=function(e){return{id:t.trim(e),text:t.trim(e)}}),n.initSelection===e&&(n.initSelection=function(e,i){var r=[];t(s(e.val(),n.separator)).each(function(){var e={id:this,text:this},i=n.tags;t.isFunction(i)&&(i=i()),t(i).each(function(){return o(this.id,e.id)?(e=this,!1):void 0}),r.push(e)}),i(r)}))),"function"!=typeof n.query)throw"query function not defined for Select2 "+n.element.attr("id");return n},monitorSource:function(){var t,n,i=this.opts.element;i.on("change.select2",this.bind(function(){this.opts.element.data("select2-change-triggered")!==!0&&this.initSelection()})),t=this.bind(function(){var t=i.prop("disabled");t===e&&(t=!1),this.enable(!t);var n=i.prop("readonly");n===e&&(n=!1),this.readonly(n),y(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(C(this.opts.containerCssClass)),y(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(C(this.opts.dropdownCssClass))}),i.on("propertychange.select2",t),this.mutationCallback===e&&(this.mutationCallback=function(e){e.forEach(t)}),n=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,n!==e&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new n(this.mutationCallback),this.propertyObserver.observe(i.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(e){var n=t.Event("select2-selecting",{val:this.id(e),object:e});return this.opts.element.trigger(n),!n.isDefaultPrevented()},triggerChange:function(e){e=e||{},e=t.extend({},e,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(e),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return this.enabledInterface===!0},enableInterface:function(){var t=this._enabled&&!this._readonly,e=!t;return t===this.enabledInterface?!1:(this.container.toggleClass("select2-container-disabled",e),this.close(),this.enabledInterface=t,!0)},enable:function(t){t===e&&(t=!0),this._enabled!==t&&(this._enabled=t,this.opts.element.prop("disabled",!t),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(t){return t===e&&(t=!1),this._readonly===t?!1:(this._readonly=t,this.opts.element.prop("readonly",t),this.enableInterface(),!0)},opened:function(){return this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var e,n,i,r,o,s=this.dropdown,a=this.container.offset(),l=this.container.outerHeight(!1),u=this.container.outerWidth(!1),c=s.outerHeight(!1),h=t(window),p=h.width(),f=h.height(),d=h.scrollLeft()+p,m=h.scrollTop()+f,g=a.top+l,v=a.left,y=m>=g+c,b=a.top-c>=this.body().scrollTop(),w=s.outerWidth(!1),_=d>=v+w,x=s.hasClass("select2-drop-above");x?(n=!0,!b&&y&&(i=!0,n=!1)):(n=!1,!y&&b&&(i=!0,n=!0)),i&&(s.hide(),a=this.container.offset(),l=this.container.outerHeight(!1),u=this.container.outerWidth(!1),c=s.outerHeight(!1),d=h.scrollLeft()+p,m=h.scrollTop()+f,g=a.top+l,v=a.left,w=s.outerWidth(!1),_=d>=v+w,s.show()),this.opts.dropdownAutoWidth?(o=t(".select2-results",s)[0],s.addClass("select2-drop-auto-width"),s.css("width",""),w=s.outerWidth(!1)+(o.scrollHeight===o.clientHeight?0:$.width),w>u?u=w:w=u,_=d>=v+w):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body().css("position")&&(e=this.body().offset(),g-=e.top,v-=e.left),_||(v=a.left+u-w),r={left:v,width:u},n?(r.bottom=f-a.top,r.top="auto",this.container.addClass("select2-drop-above"),s.addClass("select2-drop-above")):(r.top=g,r.bottom="auto",this.container.removeClass("select2-drop-above"),s.removeClass("select2-drop-above")),r=t.extend(r,C(this.opts.dropdownCss)),s.css(r)},shouldOpen:function(){var e;return this.opened()?!1:this._enabled===!1||this._readonly===!0?!1:(e=t.Event("select2-opening"),this.opts.element.trigger(e),!e.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return this.shouldOpen()?(this.opening(),!0):!1},opening:function(){var e,n=this.containerId,i="scroll."+n,r="resize."+n,o="orientationchange."+n;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body().children().last()[0]&&this.dropdown.detach().appendTo(this.body()),e=t("#select2-drop-mask"),0==e.length&&(e=t(document.createElement("div")),e.attr("id","select2-drop-mask").attr("class","select2-drop-mask"),e.hide(),e.appendTo(this.body()),e.on("mousedown touchstart click",function(e){var n,i=t("#select2-drop");i.length>0&&(n=i.data("select2"),n.opts.selectOnBlur&&n.selectHighlighted({noFocus:!0}),n.close({focus:!0}),e.preventDefault(),e.stopPropagation())})),this.dropdown.prev()[0]!==e[0]&&this.dropdown.before(e),t("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),e.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");var s=this;this.container.parents().add(window).each(function(){t(this).on(r+" "+i+" "+o,function(){s.positionDropdown()})})},close:function(){if(this.opened()){var e=this.containerId,n="scroll."+e,i="resize."+e,r="orientationchange."+e;this.container.parents().add(window).each(function(){t(this).off(n).off(i).off(r)}),this.clearDropdownAlignmentPreference(),t("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(t.Event("select2-close"))}},externalSearch:function(t){this.open(),this.search.val(t),this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return C(this.opts.maximumSelectionSize)},ensureHighlightVisible:function(){var e,n,i,r,o,s,a,l=this.results;if(n=this.highlight(),!(0>n)){if(0==n)return l.scrollTop(0),void 0;e=this.findHighlightableChoices().find(".select2-result-label"),i=t(e[n]),r=i.offset().top+i.outerHeight(!0),n===e.length-1&&(a=l.find("li.select2-more-results"),a.length>0&&(r=a.offset().top+a.outerHeight(!0))),o=l.offset().top+l.outerHeight(!0),r>o&&l.scrollTop(l.scrollTop()+(r-o)),s=i.offset().top-l.offset().top,0>s&&"none"!=i.css("display")&&l.scrollTop(l.scrollTop()+s)}},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled, .select2-selected)")},moveHighlight:function(e){for(var n=this.findHighlightableChoices(),i=this.highlight();i>-1&&i<n.length;){i+=e;var r=t(n[i]);if(r.hasClass("select2-result-selectable")&&!r.hasClass("select2-disabled")&&!r.hasClass("select2-selected")){this.highlight(i);break}}},highlight:function(e){var n,r,o=this.findHighlightableChoices();return 0===arguments.length?i(o.filter(".select2-highlighted")[0],o.get()):(e>=o.length&&(e=o.length-1),0>e&&(e=0),this.removeHighlight(),n=t(o[e]),n.addClass("select2-highlighted"),this.ensureHighlightVisible(),r=n.data("select2-data"),r&&this.opts.element.trigger({type:"select2-highlight",val:this.id(r),choice:r}),void 0)},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(e){var n=t(e.target).closest(".select2-result-selectable");if(n.length>0&&!n.is(".select2-highlighted")){var i=this.findHighlightableChoices();this.highlight(i.index(n))}else 0==n.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var t,e=this.results,n=e.find("li.select2-more-results"),i=this.resultsPage+1,r=this,o=this.search.val(),s=this.context;0!==n.length&&(t=n.offset().top-e.offset().top-e.height(),t<=this.opts.loadMorePadding&&(n.addClass("select2-active"),this.opts.query({element:this.opts.element,term:o,page:i,context:s,matcher:this.opts.matcher,callback:this.bind(function(t){r.opened()&&(r.opts.populateResults.call(this,e,t.results,{term:o,page:i,context:s}),r.postprocessResults(t,!1,!1),t.more===!0?(n.detach().appendTo(e).text(r.opts.formatLoadMore(i+1)),window.setTimeout(function(){r.loadMoreIfNeeded()},10)):n.remove(),r.positionDropdown(),r.resultsPage=i,r.context=t.context,this.opts.element.trigger({type:"select2-loaded",items:t}))})})))},tokenize:function(){},updateResults:function(n){function i(){u.removeClass("select2-active"),p.positionDropdown()}function r(t){c.html(t),i()}var s,a,l,u=this.search,c=this.results,h=this.opts,p=this,f=u.val(),d=t.data(this.container,"select2-last-term");if((n===!0||!d||!o(f,d))&&(t.data(this.container,"select2-last-term",f),n===!0||this.showSearchInput!==!1&&this.opened())){l=++this.queryCount;var m=this.getMaximumSelectionSize();if(m>=1&&(s=this.data(),t.isArray(s)&&s.length>=m&&k(h.formatSelectionTooBig,"formatSelectionTooBig")))return r("<li class='select2-selection-limit'>"+h.formatSelectionTooBig(m)+"</li>"),void 0;if(u.val().length<h.minimumInputLength)return k(h.formatInputTooShort,"formatInputTooShort")?r("<li class='select2-no-results'>"+h.formatInputTooShort(u.val(),h.minimumInputLength)+"</li>"):r(""),n&&this.showSearch&&this.showSearch(!0),void 0;if(h.maximumInputLength&&u.val().length>h.maximumInputLength)return k(h.formatInputTooLong,"formatInputTooLong")?r("<li class='select2-no-results'>"+h.formatInputTooLong(u.val(),h.maximumInputLength)+"</li>"):r(""),void 0;h.formatSearching&&0===this.findHighlightableChoices().length&&r("<li class='select2-searching'>"+h.formatSearching()+"</li>"),u.addClass("select2-active"),this.removeHighlight(),a=this.tokenize(),a!=e&&null!=a&&u.val(a),this.resultsPage=1,h.query({element:h.element,term:u.val(),page:this.resultsPage,context:null,matcher:h.matcher,callback:this.bind(function(s){var a;if(l==this.queryCount){if(!this.opened())return this.search.removeClass("select2-active"),void 0;if(this.context=s.context===e?null:s.context,this.opts.createSearchChoice&&""!==u.val()&&(a=this.opts.createSearchChoice.call(p,u.val(),s.results),a!==e&&null!==a&&p.id(a)!==e&&null!==p.id(a)&&0===t(s.results).filter(function(){return o(p.id(this),p.id(a))}).length&&s.results.unshift(a)),0===s.results.length&&k(h.formatNoMatches,"formatNoMatches"))return r("<li class='select2-no-results'>"+h.formatNoMatches(u.val())+"</li>"),void 0;c.empty(),p.opts.populateResults.call(this,c,s.results,{term:u.val(),page:this.resultsPage,context:null}),s.more===!0&&k(h.formatLoadMore,"formatLoadMore")&&(c.append("<li class='select2-more-results'>"+p.opts.escapeMarkup(h.formatLoadMore(this.resultsPage))+"</li>"),window.setTimeout(function(){p.loadMoreIfNeeded()},10)),this.postprocessResults(s,n),i(),this.opts.element.trigger({type:"select2-loaded",items:s})}})})}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){f(this.search)},selectHighlighted:function(t){var e=this.highlight(),n=this.results.find(".select2-highlighted"),i=n.closest(".select2-result").data("select2-data");i?(this.highlight(e),this.onSelect(i,t)):t&&t.noFocus&&this.close()},getPlaceholder:function(){var t;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((t=this.getPlaceholderOption())!==e?t.text():e)},getPlaceholderOption:function(){if(this.select){var t=this.select.children("option").first();if(this.opts.placeholderOption!==e)return"first"===this.opts.placeholderOption&&t||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===t.text()&&""===t.val())return t}},initContainerWidth:function(){function n(){var n,i,r,o,s,a;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if(n=this.opts.element.attr("style"),n!==e)for(i=n.split(";"),o=0,s=i.length;s>o;o+=1)if(a=i[o].replace(/\s/g,""),r=a.match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i),null!==r&&r.length>=1)return r[1];return"resolve"===this.opts.width?(n=this.opts.element.css("width"),n.indexOf("%")>0?n:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px"):null}return t.isFunction(this.opts.width)?this.opts.width():this.opts.width}var i=n.call(this);null!==i&&this.container.css("width",i)}}),O=M(A,{createContainer:function(){var e=t(document.createElement("div")).attr({"class":"select2-container"}).html(["<a href='javascript:void(0)' onclick='return false;' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&nbsp;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow'><b></b></span>","</a>","<input class='select2-focusser select2-offscreen' type='text'/>","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'/>","   </div>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return e},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var n,i,r;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0),this.parent.opening.apply(this,arguments),this.showSearchInput!==!1&&this.search.val(this.focusser.val()),this.search.focus(),n=this.search.get(0),n.createTextRange?(i=n.createTextRange(),i.collapse(!1),i.select()):n.setSelectionRange&&(r=this.search.val().length,n.setSelectionRange(r,r)),""===this.search.val()&&this.nextSearchTerm!=e&&(this.search.val(this.nextSearchTerm),this.search.select()),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(t.Event("select2-open"))},close:function(t){this.opened()&&(this.parent.close.apply(this,arguments),t=t||{focus:!0},this.focusser.removeAttr("disabled"),t.focus&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.removeAttr("disabled"),this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.removeAttr("disabled"),this.focusser.focus()},destroy:function(){t("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments)},initContainer:function(){var e,n=this.container,i=this.dropdown;this.opts.minimumResultsForSearch<0?this.showSearch(!1):this.showSearch(!0),this.selection=e=n.find(".select2-choice"),this.focusser=n.find(".select2-focusser"),this.focusser.attr("id","s2id_autogen"+D()),t("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.focusser.attr("id")),this.focusser.attr("tabindex",this.elementTabIndex),this.search.on("keydown",this.bind(function(t){if(this.isInterfaceEnabled()){if(t.which===P.PAGE_UP||t.which===P.PAGE_DOWN)return m(t),void 0;
switch(t.which){case P.UP:case P.DOWN:return this.moveHighlight(t.which===P.UP?-1:1),m(t),void 0;case P.ENTER:return this.selectHighlighted(),m(t),void 0;case P.TAB:return this.selectHighlighted({noFocus:!0}),void 0;case P.ESC:return this.cancel(t),m(t),void 0}}})),this.search.on("blur",this.bind(function(){document.activeElement===this.body().get(0)&&window.setTimeout(this.bind(function(){this.search.focus()}),0)})),this.focusser.on("keydown",this.bind(function(t){if(this.isInterfaceEnabled()&&t.which!==P.TAB&&!P.isControl(t)&&!P.isFunctionKey(t)&&t.which!==P.ESC){if(this.opts.openOnEnter===!1&&t.which===P.ENTER)return m(t),void 0;if(t.which==P.DOWN||t.which==P.UP||t.which==P.ENTER&&this.opts.openOnEnter){if(t.altKey||t.ctrlKey||t.shiftKey||t.metaKey)return;return this.open(),m(t),void 0}return t.which==P.DELETE||t.which==P.BACKSPACE?(this.opts.allowClear&&this.clear(),m(t),void 0):void 0}})),l(this.focusser),this.focusser.on("keyup-change input",this.bind(function(t){if(this.opts.minimumResultsForSearch>=0){if(t.stopPropagation(),this.opened())return;this.open()}})),e.on("mousedown","abbr",this.bind(function(t){this.isInterfaceEnabled()&&(this.clear(),g(t),this.close(),this.selection.focus())})),e.on("mousedown",this.bind(function(e){this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),m(e)})),i.on("mousedown",this.bind(function(){this.search.focus()})),e.on("focus",this.bind(function(t){m(t)})),this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(t.Event("select2-blur")))})),this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.setPlaceholder()},clear:function(e){var n=this.selection.data("select2-data");if(n){var i=t.Event("select2-clearing");if(this.opts.element.trigger(i),i.isDefaultPrevented())return;var r=this.getPlaceholderOption();this.opts.element.val(r?r.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),e!==!1&&(this.opts.element.trigger({type:"select2-removed",val:this.id(n),choice:n}),this.triggerChange({removed:n}))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var t=this;this.opts.initSelection.call(null,this.opts.element,function(n){n!==e&&null!==n&&(t.updateSelection(n),t.close(),t.setPlaceholder())})}},isPlaceholderOptionSelected:function(){var t;return this.getPlaceholder()?(t=this.getPlaceholderOption())!==e&&t.prop("selected")||""===this.opts.element.val()||this.opts.element.val()===e||null===this.opts.element.val():!1},prepareOpts:function(){var e=this.parent.prepareOpts.apply(this,arguments),n=this;return"select"===e.element.get(0).tagName.toLowerCase()?e.initSelection=function(t,e){var i=t.find("option").filter(function(){return this.selected});e(n.optionToData(i))}:"data"in e&&(e.initSelection=e.initSelection||function(n,i){var r=n.val(),s=null;e.query({matcher:function(t,n,i){var a=o(r,e.id(i));return a&&(s=i),a},callback:t.isFunction(i)?function(){i(s)}:t.noop})}),e},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===e?e:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var t=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&t!==e){if(this.select&&this.getPlaceholderOption()===e)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(t)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(t,e,n){var i=0,r=this;if(this.findHighlightableChoices().each2(function(t,e){return o(r.id(e.data("select2-data")),r.opts.element.val())?(i=t,!1):void 0}),n!==!1&&(e===!0&&i>=0?this.highlight(i):this.highlight(0)),e===!0){var s=this.opts.minimumResultsForSearch;s>=0&&this.showSearch(E(t.results)>=s)}},showSearch:function(e){this.showSearchInput!==e&&(this.showSearchInput=e,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!e),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!e),t(this.dropdown,this.container).toggleClass("select2-with-searchbox",e))},onSelect:function(t,e){if(this.triggerSelect(t)){var n=this.opts.element.val(),i=this.data();this.opts.element.val(this.id(t)),this.updateSelection(t),this.opts.element.trigger({type:"select2-selected",val:this.id(t),choice:t}),this.nextSearchTerm=this.opts.nextSearchTerm(t,this.search.val()),this.close(),e&&e.noFocus||this.focusser.focus(),o(n,this.id(t))||this.triggerChange({added:t,removed:i})}},updateSelection:function(t){var n,i,r=this.selection.find(".select2-chosen");this.selection.data("select2-data",t),r.empty(),null!==t&&(n=this.opts.formatSelection(t,r,this.opts.escapeMarkup)),n!==e&&r.append(n),i=this.opts.formatSelectionCssClass(t,r),i!==e&&r.addClass(i),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==e&&this.container.addClass("select2-allowclear")},val:function(){var t,n=!1,i=null,r=this,o=this.data();if(0===arguments.length)return this.opts.element.val();if(t=arguments[0],arguments.length>1&&(n=arguments[1]),this.select)this.select.val(t).find("option").filter(function(){return this.selected}).each2(function(t,e){return i=r.optionToData(e),!1}),this.updateSelection(i),this.setPlaceholder(),n&&this.triggerChange({added:i,removed:o});else{if(!t&&0!==t)return this.clear(n),void 0;if(this.opts.initSelection===e)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(t),this.opts.initSelection(this.opts.element,function(t){r.opts.element.val(t?r.id(t):""),r.updateSelection(t),r.setPlaceholder(),n&&r.triggerChange({added:t,removed:o})})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(t){var n,i=!1;return 0===arguments.length?(n=this.selection.data("select2-data"),n==e&&(n=null),n):(arguments.length>1&&(i=arguments[1]),t?(n=this.data(),this.opts.element.val(t?this.id(t):""),this.updateSelection(t),i&&this.triggerChange({added:t,removed:n})):this.clear(i),void 0)}}),N=M(A,{createContainer:function(){var e=t(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return e},prepareOpts:function(){var e=this.parent.prepareOpts.apply(this,arguments),n=this;return"select"===e.element.get(0).tagName.toLowerCase()?e.initSelection=function(t,e){var i=[];t.find("option").filter(function(){return this.selected}).each2(function(t,e){i.push(n.optionToData(e))}),e(i)}:"data"in e&&(e.initSelection=e.initSelection||function(n,i){var r=s(n.val(),e.separator),a=[];e.query({matcher:function(n,i,s){var l=t.grep(r,function(t){return o(t,e.id(s))}).length;return l&&a.push(s),l},callback:t.isFunction(i)?function(){for(var t=[],n=0;n<r.length;n++)for(var s=r[n],l=0;l<a.length;l++){var u=a[l];if(o(s,e.id(u))){t.push(u),a.splice(l,1);break}}i(t)}:t.noop})}),e},selectChoice:function(t){var e=this.container.find(".select2-search-choice-focus");e.length&&t&&t[0]==e[0]||(e.length&&this.opts.element.trigger("choice-deselected",e),e.removeClass("select2-search-choice-focus"),t&&t.length&&(this.close(),t.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",t)))},destroy:function(){t("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments)},initContainer:function(){var e,n=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=e=this.container.find(n);var i=this;this.selection.on("click",".select2-search-choice:not(.select2-locked)",function(){i.search[0].focus(),i.selectChoice(t(this))}),this.search.attr("id","s2id_autogen"+D()),t("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.search.attr("id")),this.search.on("input paste",this.bind(function(){this.isInterfaceEnabled()&&(this.opened()||this.open())})),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(t){if(this.isInterfaceEnabled()){++this.keydowns;var n=e.find(".select2-search-choice-focus"),i=n.prev(".select2-search-choice:not(.select2-locked)"),r=n.next(".select2-search-choice:not(.select2-locked)"),o=d(this.search);if(n.length&&(t.which==P.LEFT||t.which==P.RIGHT||t.which==P.BACKSPACE||t.which==P.DELETE||t.which==P.ENTER)){var s=n;return t.which==P.LEFT&&i.length?s=i:t.which==P.RIGHT?s=r.length?r:null:t.which===P.BACKSPACE?(this.unselect(n.first()),this.search.width(10),s=i.length?i:r):t.which==P.DELETE?(this.unselect(n.first()),this.search.width(10),s=r.length?r:null):t.which==P.ENTER&&(s=null),this.selectChoice(s),m(t),s&&s.length||this.open(),void 0}if((t.which===P.BACKSPACE&&1==this.keydowns||t.which==P.LEFT)&&0==o.offset&&!o.length)return this.selectChoice(e.find(".select2-search-choice:not(.select2-locked)").last()),m(t),void 0;if(this.selectChoice(null),this.opened())switch(t.which){case P.UP:case P.DOWN:return this.moveHighlight(t.which===P.UP?-1:1),m(t),void 0;case P.ENTER:return this.selectHighlighted(),m(t),void 0;case P.TAB:return this.selectHighlighted({noFocus:!0}),this.close(),void 0;case P.ESC:return this.cancel(t),m(t),void 0}if(t.which!==P.TAB&&!P.isControl(t)&&!P.isFunctionKey(t)&&t.which!==P.BACKSPACE&&t.which!==P.ESC){if(t.which===P.ENTER){if(this.opts.openOnEnter===!1)return;if(t.altKey||t.ctrlKey||t.shiftKey||t.metaKey)return}this.open(),(t.which===P.PAGE_UP||t.which===P.PAGE_DOWN)&&m(t),t.which===P.ENTER&&m(t)}}})),this.search.on("keyup",this.bind(function(){this.keydowns=0,this.resizeSearch()})),this.search.on("blur",this.bind(function(e){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),e.stopImmediatePropagation(),this.opts.element.trigger(t.Event("select2-blur"))})),this.container.on("click",n,this.bind(function(e){this.isInterfaceEnabled()&&(t(e.target).closest(".select2-search-choice").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.open(),this.focusSearch(),e.preventDefault()))})),this.container.on("focus",n,this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var t=this;this.opts.initSelection.call(null,this.opts.element,function(n){n!==e&&null!==n&&(t.updateSelection(n),t.close(),t.clearSearch())})}},clearSearch:function(){var t=this.getPlaceholder(),n=this.getMaxSearchWidth();t!==e&&0===this.getVal().length&&this.search.hasClass("select2-focused")===!1?(this.search.val(t).addClass("select2-default"),this.search.width(n>0?n:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),this.updateResults(!0),this.search.focus(),this.opts.element.trigger(t.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(e){var n=[],r=[],o=this;t(e).each(function(){i(o.id(this),n)<0&&(n.push(o.id(this)),r.push(this))}),e=r,this.selection.find(".select2-search-choice").remove(),t(e).each(function(){o.addSelectedChoice(this)}),o.postprocessResults()},tokenize:function(){var t=this.search.val();t=this.opts.tokenizer.call(this,t,this.data(),this.bind(this.onSelect),this.opts),null!=t&&t!=e&&(this.search.val(t),t.length>0&&this.open())},onSelect:function(t,e){this.triggerSelect(t)&&(this.addSelectedChoice(t),this.opts.element.trigger({type:"selected",val:this.id(t),choice:t}),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(t,!1,this.opts.closeOnSelect===!0),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()&&this.updateResults(!0),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:t}),e&&e.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(n){var i,r,o=!n.locked,s=t("<li class='select2-search-choice'>    <div></div>    <a href='#' onclick='return false;' class='select2-search-choice-close' tabindex='-1'></a></li>"),a=t("<li class='select2-search-choice select2-locked'><div></div></li>"),l=o?s:a,u=this.id(n),c=this.getVal();i=this.opts.formatSelection(n,l.find("div"),this.opts.escapeMarkup),i!=e&&l.find("div").replaceWith("<div>"+i+"</div>"),r=this.opts.formatSelectionCssClass(n,l.find("div")),r!=e&&l.addClass(r),o&&l.find(".select2-search-choice-close").on("mousedown",m).on("click dblclick",this.bind(function(e){this.isInterfaceEnabled()&&(t(e.target).closest(".select2-search-choice").fadeOut("fast",this.bind(function(){this.unselect(t(e.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),this.close(),this.focusSearch()})).dequeue(),m(e))})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),l.data("select2-data",n),l.insertBefore(this.searchContainer),c.push(u),this.setVal(c)},unselect:function(e){var n,r,o=this.getVal();if(e=e.closest(".select2-search-choice"),0===e.length)throw"Invalid argument: "+e+". Must be .select2-search-choice";if(n=e.data("select2-data")){for(;(r=i(this.id(n),o))>=0;)o.splice(r,1),this.setVal(o),this.select&&this.postprocessResults();var s=t.Event("select2-removing");s.val=this.id(n),s.choice=n,this.opts.element.trigger(s),s.isDefaultPrevented()||(this.opts.element.trigger({type:"select2-removed",val:this.id(n),choice:n}),this.triggerChange({removed:n}))}},postprocessResults:function(t,e,n){var r=this.getVal(),o=this.results.find(".select2-result"),s=this.results.find(".select2-result-with-children"),a=this;o.each2(function(t,e){var n=a.id(e.data("select2-data"));i(n,r)>=0&&(e.addClass("select2-selected"),e.find(".select2-result-selectable").addClass("select2-selected"))}),s.each2(function(t,e){e.is(".select2-result-selectable")||0!==e.find(".select2-result-selectable:not(.select2-selected)").length||e.addClass("select2-selected")}),-1==this.highlight()&&n!==!1&&a.highlight(0),!this.opts.createSearchChoice&&!o.filter(".select2-result:not(.select2-selected)").length>0&&(!t||t&&!t.more&&0===this.results.find(".select2-no-results").length)&&k(a.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+a.opts.formatNoMatches(a.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-a(this.search)},resizeSearch:function(){var t,e,n,i,r,o=a(this.search);t=v(this.search)+10,e=this.search.offset().left,n=this.selection.width(),i=this.selection.offset().left,r=n-(e-i)-o,t>r&&(r=n-o),40>r&&(r=n-o),0>=r&&(r=t),this.search.width(Math.floor(r))},getVal:function(){var t;return this.select?(t=this.select.val(),null===t?[]:t):(t=this.opts.element.val(),s(t,this.opts.separator))},setVal:function(e){var n;this.select?this.select.val(e):(n=[],t(e).each(function(){i(this,n)<0&&n.push(this)}),this.opts.element.val(0===n.length?"":n.join(this.opts.separator)))},buildChangeDetails:function(t,e){for(var e=e.slice(0),t=t.slice(0),n=0;n<e.length;n++)for(var i=0;i<t.length;i++)o(this.opts.id(e[n]),this.opts.id(t[i]))&&(e.splice(n,1),n--,t.splice(i,1),i--);return{added:e,removed:t}},val:function(n,i){var r,o=this;if(0===arguments.length)return this.getVal();if(r=this.data(),r.length||(r=[]),!n&&0!==n)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),i&&this.triggerChange({added:this.data(),removed:r}),void 0;if(this.setVal(n),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),i&&this.triggerChange(this.buildChangeDetails(r,this.data()));else{if(this.opts.initSelection===e)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(e){var n=t.map(e,o.id);o.setVal(n),o.updateSelection(e),o.clearSearch(),i&&o.triggerChange(o.buildChangeDetails(r,o.data()))})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var e=[],n=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){e.push(n.opts.id(t(this).data("select2-data")))}),this.setVal(e),this.triggerChange()},data:function(e,n){var i,r,o=this;return 0===arguments.length?this.selection.find(".select2-search-choice").map(function(){return t(this).data("select2-data")}).get():(r=this.data(),e||(e=[]),i=t.map(e,function(t){return o.opts.id(t)}),this.setVal(i),this.updateSelection(e),this.clearSearch(),n&&this.triggerChange(this.buildChangeDetails(r,this.data())),void 0)}}),t.fn.select2=function(){var n,r,o,s,a,l=Array.prototype.slice.call(arguments,0),u=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],c=["opened","isFocused","container","dropdown"],h=["val","data"],p={search:"externalSearch"};return this.each(function(){if(0===l.length||"object"==typeof l[0])n=0===l.length?{}:t.extend({},l[0]),n.element=t(this),"select"===n.element.get(0).tagName.toLowerCase()?a=n.element.prop("multiple"):(a=n.multiple||!1,"tags"in n&&(n.multiple=a=!0)),r=a?new N:new O,r.init(n);else{if("string"!=typeof l[0])throw"Invalid arguments to select2 plugin: "+l;if(i(l[0],u)<0)throw"Unknown method: "+l[0];if(s=e,r=t(this).data("select2"),r===e)return;if(o=l[0],"container"===o?s=r.container:"dropdown"===o?s=r.dropdown:(p[o]&&(o=p[o]),s=r[o].apply(r,l.slice(1))),i(l[0],c)>=0||i(l[0],h)&&1==l.length)return!1}}),s===e?this:s},t.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(t,e,n,i){var r=[];return b(t.text,n.term,r,i),r.join("")},formatSelection:function(t,n,i){return t?i(t.text):e},sortResults:function(t){return t},formatResultCssClass:function(){return e},formatSelectionCssClass:function(){return e},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(t,e){var n=e-t.length;return"Please enter "+n+" more character"+(1==n?"":"s")},formatInputTooLong:function(t,e){var n=t.length-e;return"Please delete "+n+" character"+(1==n?"":"s")},formatSelectionTooBig:function(t){return"You can only select "+t+" item"+(1==t?"":"s")},formatLoadMore:function(){return"Loading more results..."},formatSearching:function(){return"Searching..."},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(t){return t.id},matcher:function(t,e){return n(""+e).toUpperCase().indexOf(n(""+t).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:T,escapeMarkup:w,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(t){return t},adaptDropdownCssClass:function(){return null},nextSearchTerm:function(){return e}},t.fn.select2.ajaxDefaults={transport:t.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:_,local:x,tags:S},util:{debounce:c,markMatch:b,escapeMarkup:w,stripDiacritics:n},"class":{"abstract":A,single:O,multi:N}}}}(jQuery),/* ===================================================
 * bootstrap-transition.js v2.3.0
 * http://twitter.github.com/bootstrap/javascript.html#transitions
 * ===================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */
!function(t){"use strict";t(function(){t.support.transition=function(){var t=function(){var t,e=document.createElement("bootstrap"),n={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(t in n)if(void 0!==e.style[t])return n[t]}();return t&&{end:t}}()})}(window.jQuery),/* ==========================================================
 * bootstrap-affix.js v2.3.0
 * http://twitter.github.com/bootstrap/javascript.html#affix
 * ==========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */
!function(t){"use strict";var e=function(e,n){this.options=t.extend({},t.fn.affix.defaults,n),this.$window=t(window).on("scroll.affix.data-api",t.proxy(this.checkPosition,this)).on("click.affix.data-api",t.proxy(function(){setTimeout(t.proxy(this.checkPosition,this),1)},this)),this.$element=t(e),this.checkPosition()};e.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e,n=t(document).height(),i=this.$window.scrollTop(),r=this.$element.offset(),o=this.options.offset,s=o.bottom,a=o.top,l="affix affix-top affix-bottom";"object"!=typeof o&&(s=a=o),"function"==typeof a&&(a=o.top()),"function"==typeof s&&(s=o.bottom()),e=null!=this.unpin&&i+this.unpin<=r.top?!1:null!=s&&r.top+this.$element.height()>=n-s?"bottom":null!=a&&a>=i?"top":!1,this.affixed!==e&&(this.affixed=e,this.unpin="bottom"==e?r.top-i:null,this.$element.removeClass(l).addClass("affix"+(e?"-"+e:"")))}};var n=t.fn.affix;t.fn.affix=function(n){return this.each(function(){var i=t(this),r=i.data("affix"),o="object"==typeof n&&n;r||i.data("affix",r=new e(this,o)),"string"==typeof n&&r[n]()})},t.fn.affix.Constructor=e,t.fn.affix.defaults={offset:0},t.fn.affix.noConflict=function(){return t.fn.affix=n,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var e=t(this),n=e.data();n.offset=n.offset||{},n.offsetBottom&&(n.offset.bottom=n.offsetBottom),n.offsetTop&&(n.offset.top=n.offsetTop),e.affix(n)})})}(window.jQuery),/* ==========================================================
 * bootstrap-alert.js v2.3.0
 * http://twitter.github.com/bootstrap/javascript.html#alerts
 * ==========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */
!function(t){"use strict";var e='[data-dismiss="alert"]',n=function(n){t(n).on("click",e,this.close)};n.prototype.close=function(e){function n(){i.trigger("closed").remove()}var i,r=t(this),o=r.attr("data-target");o||(o=r.attr("href"),o=o&&o.replace(/.*(?=#[^\s]*$)/,"")),i=t(o),e&&e.preventDefault(),i.length||(i=r.hasClass("alert")?r:r.parent()),i.trigger(e=t.Event("close")),e.isDefaultPrevented()||(i.removeClass("in"),t.support.transition&&i.hasClass("fade")?i.on(t.support.transition.end,n):n())};var i=t.fn.alert;t.fn.alert=function(e){return this.each(function(){var i=t(this),r=i.data("alert");r||i.data("alert",r=new n(this)),"string"==typeof e&&r[e].call(i)})},t.fn.alert.Constructor=n,t.fn.alert.noConflict=function(){return t.fn.alert=i,this},t(document).on("click.alert.data-api",e,n.prototype.close)}(window.jQuery),/* ============================================================
 * bootstrap-button.js v2.3.0
 * http://twitter.github.com/bootstrap/javascript.html#buttons
 * ============================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================ */
!function(t){"use strict";var e=function(e,n){this.$element=t(e),this.options=t.extend({},t.fn.button.defaults,n)};e.prototype.setState=function(t){var e="disabled",n=this.$element,i=n.data(),r=n.is("input")?"val":"html";t+="Text",i.resetText||n.data("resetText",n[r]()),n[r](i[t]||this.options[t]),setTimeout(function(){"loadingText"==t?n.addClass(e).attr(e,e):n.removeClass(e).removeAttr(e)},0)},e.prototype.toggle=function(){var t=this.$element.closest('[data-toggle="buttons-radio"]');t&&t.find(".active").removeClass("active"),this.$element.toggleClass("active")};var n=t.fn.button;t.fn.button=function(n){return this.each(function(){var i=t(this),r=i.data("button"),o="object"==typeof n&&n;r||i.data("button",r=new e(this,o)),"toggle"==n?r.toggle():n&&r.setState(n)})},t.fn.button.defaults={loadingText:"loading..."},t.fn.button.Constructor=e,t.fn.button.noConflict=function(){return t.fn.button=n,this},t(document).on("click.button.data-api","[data-toggle^=button]",function(e){var n=t(e.target);n.hasClass("btn")||(n=n.closest(".btn")),n.button("toggle")})}(window.jQuery),/* ==========================================================
 * bootstrap-carousel.js v2.3.0
 * http://twitter.github.com/bootstrap/javascript.html#carousel
 * ==========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */
!function(t){"use strict";var e=function(e,n){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,"hover"==this.options.pause&&this.$element.on("mouseenter",t.proxy(this.pause,this)).on("mouseleave",t.proxy(this.cycle,this))};e.prototype={cycle:function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},getActiveIndex:function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},to:function(e){var n=this.getActiveIndex(),i=this;if(!(e>this.$items.length-1||0>e))return this.sliding?this.$element.one("slid",function(){i.to(e)}):n==e?this.pause().cycle():this.slide(e>n?"next":"prev",t(this.$items[e]))},pause:function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition.end&&(this.$element.trigger(t.support.transition.end),this.cycle()),clearInterval(this.interval),this.interval=null,this},next:function(){return this.sliding?void 0:this.slide("next")},prev:function(){return this.sliding?void 0:this.slide("prev")},slide:function(e,n){var i,r=this.$element.find(".item.active"),o=n||r[e](),s=this.interval,a="next"==e?"left":"right",l="next"==e?"first":"last",u=this;if(this.sliding=!0,s&&this.pause(),o=o.length?o:this.$element.find(".item")[l](),i=t.Event("slide",{relatedTarget:o[0],direction:a}),!o.hasClass("active")){if(this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid",function(){var e=t(u.$indicators.children()[u.getActiveIndex()]);e&&e.addClass("active")})),t.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(i),i.isDefaultPrevented())return;o.addClass(e),o[0].offsetWidth,r.addClass(a),o.addClass(a),this.$element.one(t.support.transition.end,function(){o.removeClass([e,a].join(" ")).addClass("active"),r.removeClass(["active",a].join(" ")),u.sliding=!1,setTimeout(function(){u.$element.trigger("slid")},0)})}else{if(this.$element.trigger(i),i.isDefaultPrevented())return;r.removeClass("active"),o.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return s&&this.cycle(),this}}};var n=t.fn.carousel;t.fn.carousel=function(n){return this.each(function(){var i=t(this),r=i.data("carousel"),o=t.extend({},t.fn.carousel.defaults,"object"==typeof n&&n),s="string"==typeof n?n:o.slide;r||i.data("carousel",r=new e(this,o)),"number"==typeof n?r.to(n):s?r[s]():o.interval&&r.pause().cycle()})},t.fn.carousel.defaults={interval:5e3,pause:"hover"},t.fn.carousel.Constructor=e,t.fn.carousel.noConflict=function(){return t.fn.carousel=n,this},t(document).on("click.carousel.data-api","[data-slide], [data-slide-to]",function(e){var n,i,r=t(this),o=t(r.attr("data-target")||(n=r.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"")),s=t.extend({},o.data(),r.data());o.carousel(s),(i=r.attr("data-slide-to"))&&o.data("carousel").pause().to(i).cycle(),e.preventDefault()})}(window.jQuery),/* =============================================================
 * bootstrap-collapse.js v2.3.0
 * http://twitter.github.com/bootstrap/javascript.html#collapse
 * =============================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================ */
!function(t){"use strict";var e=function(e,n){this.$element=t(e),this.options=t.extend({},t.fn.collapse.defaults,n),this.options.parent&&(this.$parent=t(this.options.parent)),this.options.toggle&&this.toggle()};e.prototype={constructor:e,dimension:function(){var t=this.$element.hasClass("width");return t?"width":"height"},show:function(){var e,n,i,r;if(!this.transitioning&&!this.$element.hasClass("in")){if(e=this.dimension(),n=t.camelCase(["scroll",e].join("-")),i=this.$parent&&this.$parent.find("> .accordion-group > .in"),i&&i.length){if(r=i.data("collapse"),r&&r.transitioning)return;i.collapse("hide"),r||i.data("collapse",null)}this.$element[e](0),this.transition("addClass",t.Event("show"),"shown"),t.support.transition&&this.$element[e](this.$element[0][n])}},hide:function(){var e;!this.transitioning&&this.$element.hasClass("in")&&(e=this.dimension(),this.reset(this.$element[e]()),this.transition("removeClass",t.Event("hide"),"hidden"),this.$element[e](0))},reset:function(t){var e=this.dimension();return this.$element.removeClass("collapse")[e](t||"auto")[0].offsetWidth,this.$element[null!==t?"addClass":"removeClass"]("collapse"),this},transition:function(e,n,i){var r=this,o=function(){"show"==n.type&&r.reset(),r.transitioning=0,r.$element.trigger(i)};this.$element.trigger(n),n.isDefaultPrevented()||(this.transitioning=1,this.$element[e]("in"),t.support.transition&&this.$element.hasClass("collapse")?this.$element.one(t.support.transition.end,o):o())},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};var n=t.fn.collapse;t.fn.collapse=function(n){return this.each(function(){var i=t(this),r=i.data("collapse"),o=t.extend({},t.fn.collapse.defaults,i.data(),"object"==typeof n&&n);r||i.data("collapse",r=new e(this,o)),"string"==typeof n&&r[n]()})},t.fn.collapse.defaults={toggle:!0},t.fn.collapse.Constructor=e,t.fn.collapse.noConflict=function(){return t.fn.collapse=n,this},t(document).on("click.collapse.data-api","[data-toggle=collapse]",function(e){var n,i=t(this),r=i.attr("data-target")||e.preventDefault()||(n=i.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""),o=t(r).data("collapse")?"toggle":i.data();i[t(r).hasClass("in")?"addClass":"removeClass"]("collapsed"),t(r).collapse(o)})}(window.jQuery),/* ============================================================
 * bootstrap-dropdown.js v2.3.0
 * http://twitter.github.com/bootstrap/javascript.html#dropdowns
 * ============================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================ */
!function(t){"use strict";function e(){t(i).each(function(){n(t(this)).removeClass("open")})}function n(e){var n,i=e.attr("data-target");return i||(i=e.attr("href"),i=i&&/#/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,"")),n=i&&t(i),n&&n.length||(n=e.parent()),n}var i="[data-toggle=dropdown]",r=function(e){var n=t(e).on("click.dropdown.data-api",this.toggle);t("html").on("click.dropdown.data-api",function(){n.parent().removeClass("open")})};r.prototype={constructor:r,toggle:function(){var i,r,o=t(this);if(!o.is(".disabled, :disabled"))return i=n(o),r=i.hasClass("open"),e(),r||i.toggleClass("open"),o.focus(),!1},keydown:function(e){var r,o,s,a,l;if(/(38|40|27)/.test(e.keyCode)&&(r=t(this),e.preventDefault(),e.stopPropagation(),!r.is(".disabled, :disabled"))){if(s=n(r),a=s.hasClass("open"),!a||a&&27==e.keyCode)return 27==e.which&&s.find(i).focus(),r.click();o=t("[role=menu] li:not(.divider):visible a",s),o.length&&(l=o.index(o.filter(":focus")),38==e.keyCode&&l>0&&l--,40==e.keyCode&&l<o.length-1&&l++,~l||(l=0),o.eq(l).focus())}}};var o=t.fn.dropdown;t.fn.dropdown=function(e){return this.each(function(){var n=t(this),i=n.data("dropdown");i||n.data("dropdown",i=new r(this)),"string"==typeof e&&i[e].call(n)})},t.fn.dropdown.Constructor=r,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=o,this},t(document).on("click.dropdown.data-api",e).on("click.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on(".dropdown-menu",function(t){t.stopPropagation()}).on("click.dropdown.data-api",i,r.prototype.toggle).on("keydown.dropdown.data-api",i+", [role=menu]",r.prototype.keydown)}(window.jQuery),/* =========================================================
 * bootstrap-modal.js v2.3.0
 * http://twitter.github.com/bootstrap/javascript.html#modals
 * =========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================= */
!function(t){"use strict";var e=function(e,n){this.options=n,this.$element=t(e).delegate('[data-dismiss="modal"]',"click.dismiss.modal",t.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};e.prototype={constructor:e,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var e=this,n=t.Event("show");this.$element.trigger(n),this.isShown||n.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.backdrop(function(){var n=t.support.transition&&e.$element.hasClass("fade");e.$element.parent().length||e.$element.appendTo(document.body),e.$element.show(),n&&e.$element[0].offsetWidth,e.$element.addClass("in").attr("aria-hidden",!1),e.enforceFocus(),n?e.$element.one(t.support.transition.end,function(){e.$element.focus().trigger("shown")}):e.$element.focus().trigger("shown")}))},hide:function(e){e&&e.preventDefault(),e=t.Event("hide"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),t(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),t.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var e=this;t(document).on("focusin.modal",function(t){e.$element[0]===t.target||e.$element.has(t.target).length||e.$element.focus()})},escape:function(){var t=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(e){27==e.which&&t.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var e=this,n=setTimeout(function(){e.$element.off(t.support.transition.end),e.hideModal()},500);this.$element.one(t.support.transition.end,function(){clearTimeout(n),e.hideModal()})},hideModal:function(){var t=this;this.$element.hide(),this.backdrop(function(){t.removeBackdrop(),t.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop.remove(),this.$backdrop=null},backdrop:function(e){var n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=t.support.transition&&n;if(this.$backdrop=t('<div class="modal-backdrop '+n+'" />').appendTo(document.body),this.$backdrop.click("static"==this.options.backdrop?t.proxy(this.$element[0].focus,this.$element[0]):t.proxy(this.hide,this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;i?this.$backdrop.one(t.support.transition.end,e):e()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(t.support.transition.end,e):e()):e&&e()}};var n=t.fn.modal;t.fn.modal=function(n){return this.each(function(){var i=t(this),r=i.data("modal"),o=t.extend({},t.fn.modal.defaults,i.data(),"object"==typeof n&&n);r||i.data("modal",r=new e(this,o)),"string"==typeof n?r[n]():o.show&&r.show()})},t.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},t.fn.modal.Constructor=e,t.fn.modal.noConflict=function(){return t.fn.modal=n,this},t(document).on("click.modal.data-api",'[data-toggle="modal"]',function(e){var n=t(this),i=n.attr("href"),r=t(n.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),o=r.data("modal")?"toggle":t.extend({remote:!/#/.test(i)&&i},r.data(),n.data());e.preventDefault(),r.modal(o).one("hide",function(){n.focus()})})}(window.jQuery),/* =============================================================
 * bootstrap-scrollspy.js v2.3.0
 * http://twitter.github.com/bootstrap/javascript.html#scrollspy
 * =============================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================== */
!function(t){"use strict";function e(e,n){var i,r=t.proxy(this.process,this),o=t(e).is("body")?t(window):t(e);this.options=t.extend({},t.fn.scrollspy.defaults,n),this.$scrollElement=o.on("scroll.scroll-spy.data-api",r),this.selector=(this.options.target||(i=t(e).attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=t("body"),this.refresh(),this.process()}e.prototype={constructor:e,refresh:function(){var e,n=this;this.offsets=t([]),this.targets=t([]),e=this.$body.find(this.selector).map(function(){var e=t(this),i=e.data("target")||e.attr("href"),r=/^#\w/.test(i)&&t(i);return r&&r.length&&[[r.position().top+(!t.isWindow(n.$scrollElement.get(0))&&n.$scrollElement.scrollTop()),i]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){n.offsets.push(this[0]),n.targets.push(this[1])})},process:function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,n=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,i=n-this.$scrollElement.height(),r=this.offsets,o=this.targets,s=this.activeTarget;if(e>=i)return s!=(t=o.last()[0])&&this.activate(t);for(t=r.length;t--;)s!=o[t]&&e>=r[t]&&(!r[t+1]||e<=r[t+1])&&this.activate(o[t])},activate:function(e){var n,i;this.activeTarget=e,t(this.selector).parent(".active").removeClass("active"),i=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',n=t(i).parent("li").addClass("active"),n.parent(".dropdown-menu").length&&(n=n.closest("li.dropdown").addClass("active")),n.trigger("activate")}};var n=t.fn.scrollspy;t.fn.scrollspy=function(n){return this.each(function(){var i=t(this),r=i.data("scrollspy"),o="object"==typeof n&&n;r||i.data("scrollspy",r=new e(this,o)),"string"==typeof n&&r[n]()})},t.fn.scrollspy.Constructor=e,t.fn.scrollspy.defaults={offset:10},t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=n,this},t(window).on("load",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);e.scrollspy(e.data())})})}(window.jQuery),/* ========================================================
 * bootstrap-tab.js v2.3.0
 * http://twitter.github.com/bootstrap/javascript.html#tabs
 * ========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ======================================================== */
!function(t){"use strict";var e=function(e){this.element=t(e)};e.prototype={constructor:e,show:function(){var e,n,i,r=this.element,o=r.closest("ul:not(.dropdown-menu)"),s=r.attr("data-target");s||(s=r.attr("href"),s=s&&s.replace(/.*(?=#[^\s]*$)/,"")),r.parent("li").hasClass("active")||(e=o.find(".active:last a")[0],i=t.Event("show",{relatedTarget:e}),r.trigger(i),i.isDefaultPrevented()||(n=t(s),this.activate(r.parent("li"),o),this.activate(n,n.parent(),function(){r.trigger({type:"shown",relatedTarget:e})})))},activate:function(e,n,i){function r(){o.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),e.addClass("active"),s?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu")&&e.closest("li.dropdown").addClass("active"),i&&i()}var o=n.find("> .active"),s=i&&t.support.transition&&o.hasClass("fade");s?o.one(t.support.transition.end,r):r(),o.removeClass("in")}};var n=t.fn.tab;t.fn.tab=function(n){return this.each(function(){var i=t(this),r=i.data("tab");r||i.data("tab",r=new e(this)),"string"==typeof n&&r[n]()})},t.fn.tab.Constructor=e,t.fn.tab.noConflict=function(){return t.fn.tab=n,this},t(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(e){e.preventDefault(),t(this).tab("show")})}(window.jQuery),/* ===========================================================
 * bootstrap-tooltip.js v2.3.0
 * http://twitter.github.com/bootstrap/javascript.html#tooltips
 * Inspired by the original jQuery.tipsy by Jason Frame
 * ===========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */
!function(t){"use strict";var e=function(t,e){this.init("tooltip",t,e)};e.prototype={constructor:e,init:function(e,n,i){var r,o,s,a,l;for(this.type=e,this.$element=t(n),this.options=this.getOptions(i),this.enabled=!0,s=this.options.trigger.split(" "),l=s.length;l--;)a=s[l],"click"==a?this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this)):"manual"!=a&&(r="hover"==a?"mouseenter":"focus",o="hover"==a?"mouseleave":"blur",this.$element.on(r+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(o+"."+this.type,this.options.selector,t.proxy(this.leave,this)));this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(e){return e=t.extend({},t.fn[this.type].defaults,this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},enter:function(e){var n=t(e.currentTarget)[this.type](this._options).data(this.type);return n.options.delay&&n.options.delay.show?(clearTimeout(this.timeout),n.hoverState="in",this.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show),void 0):n.show()},leave:function(e){var n=t(e.currentTarget)[this.type](this._options).data(this.type);return this.timeout&&clearTimeout(this.timeout),n.options.delay&&n.options.delay.hide?(n.hoverState="out",this.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide),void 0):n.hide()},show:function(){var e,n,i,r,o,s,a=t.Event("show");if(this.hasContent()&&this.enabled){if(this.$element.trigger(a),a.isDefaultPrevented())return;switch(e=this.tip(),this.setContent(),this.options.animation&&e.addClass("fade"),o="function"==typeof this.options.placement?this.options.placement.call(this,e[0],this.$element[0]):this.options.placement,e.detach().css({top:0,left:0,display:"block"}),this.options.container?e.appendTo(this.options.container):e.insertAfter(this.$element),n=this.getPosition(),i=e[0].offsetWidth,r=e[0].offsetHeight,o){case"bottom":s={top:n.top+n.height,left:n.left+n.width/2-i/2};break;case"top":s={top:n.top-r,left:n.left+n.width/2-i/2};break;case"left":s={top:n.top+n.height/2-r/2,left:n.left-i};break;case"right":s={top:n.top+n.height/2-r/2,left:n.left+n.width}}this.applyPlacement(s,o),this.$element.trigger("shown")}},applyPlacement:function(t,e){var n,i,r,o,s=this.tip(),a=s[0].offsetWidth,l=s[0].offsetHeight;s.offset(t).addClass(e).addClass("in"),n=s[0].offsetWidth,i=s[0].offsetHeight,"top"==e&&i!=l&&(t.top=t.top+l-i,o=!0),"bottom"==e||"top"==e?(r=0,t.left<0&&(r=-2*t.left,t.left=0,s.offset(t),n=s[0].offsetWidth,i=s[0].offsetHeight),this.replaceArrow(r-a+n,n,"left")):this.replaceArrow(i-l,i,"top"),o&&s.offset(t)},replaceArrow:function(t,e,n){this.arrow().css(n,t?50*(1-t/e)+"%":"")},setContent:function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},hide:function(){function e(){var e=setTimeout(function(){n.off(t.support.transition.end).detach()},500);n.one(t.support.transition.end,function(){clearTimeout(e),n.detach()})}var n=this.tip(),i=t.Event("hide");return this.$element.trigger(i),i.isDefaultPrevented()?void 0:(n.removeClass("in"),t.support.transition&&this.$tip.hasClass("fade")?e():n.detach(),this.$element.trigger("hidden"),this)},fixTitle:function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var e=this.$element[0];return t.extend({},"function"==typeof e.getBoundingClientRect?e.getBoundingClientRect():{width:e.offsetWidth,height:e.offsetHeight},this.$element.offset())},getTitle:function(){var t,e=this.$element,n=this.options;return t=e.attr("data-original-title")||("function"==typeof n.title?n.title.call(e[0]):n.title)},tip:function(){return this.$tip=this.$tip||t(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(e){var n=e?t(e.currentTarget)[this.type](this._options).data(this.type):this;n.tip().hasClass("in")?n.hide():n.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var n=t.fn.tooltip;t.fn.tooltip=function(n){return this.each(function(){var i=t(this),r=i.data("tooltip"),o="object"==typeof n&&n;r||i.data("tooltip",r=new e(this,o)),"string"==typeof n&&r[n]()})},t.fn.tooltip.Constructor=e,t.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},t.fn.tooltip.noConflict=function(){return t.fn.tooltip=n,this}}(window.jQuery),/* ===========================================================
 * bootstrap-popover.js v2.3.0
 * http://twitter.github.com/bootstrap/javascript.html#popovers
 * ===========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =========================================================== */
!function(t){"use strict";var e=function(t,e){this.init("popover",t,e)};e.prototype=t.extend({},t.fn.tooltip.Constructor.prototype,{constructor:e,setContent:function(){var t=this.tip(),e=this.getTitle(),n=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content")[this.options.html?"html":"text"](n),t.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var t,e=this.$element,n=this.options;return t=("function"==typeof n.content?n.content.call(e[0]):n.content)||e.attr("data-content")},tip:function(){return this.$tip||(this.$tip=t(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});var n=t.fn.popover;t.fn.popover=function(n){return this.each(function(){var i=t(this),r=i.data("popover"),o="object"==typeof n&&n;r||i.data("popover",r=new e(this,o)),"string"==typeof n&&r[n]()})},t.fn.popover.Constructor=e,t.fn.popover.defaults=t.extend({},t.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),t.fn.popover.noConflict=function(){return t.fn.popover=n,this}}(window.jQuery),/* =============================================================
 * bootstrap-typeahead.js v2.3.0
 * http://twitter.github.com/bootstrap/javascript.html#typeahead
 * =============================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================ */
!function(t){"use strict";var e=function(e,n){this.$element=t(e),this.options=t.extend({},t.fn.typeahead.defaults,n),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.$menu=t(this.options.menu),this.shown=!1,this.listen()};e.prototype={constructor:e,select:function(){var t=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(t)).change(),this.hide()},updater:function(t){return t},show:function(){var e=t.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:e.top+e.height,left:e.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(){var e;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(e=t.isFunction(this.source)?this.source(this.query,t.proxy(this.process,this)):this.source,e?this.process(e):this)},process:function(e){var n=this;return e=t.grep(e,function(t){return n.matcher(t)}),e=this.sorter(e),e.length?this.render(e.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(t){return~t.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(t){for(var e,n=[],i=[],r=[];e=t.shift();)e.toLowerCase().indexOf(this.query.toLowerCase())?~e.indexOf(this.query)?i.push(e):r.push(e):n.push(e);return n.concat(i,r)},highlighter:function(t){var e=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return t.replace(new RegExp("("+e+")","ig"),function(t,e){return"<strong>"+e+"</strong>"})},render:function(e){var n=this;return e=t(e).map(function(e,i){return e=t(n.options.item).attr("data-value",i),e.find("a").html(n.highlighter(i)),e[0]}),e.first().addClass("active"),this.$menu.html(e),this},next:function(){var e=this.$menu.find(".active").removeClass("active"),n=e.next();n.length||(n=t(this.$menu.find("li")[0])),n.addClass("active")},prev:function(){var t=this.$menu.find(".active").removeClass("active"),e=t.prev();e.length||(e=this.$menu.find("li").last()),e.addClass("active")},listen:function(){this.$element.on("focus",t.proxy(this.focus,this)).on("blur",t.proxy(this.blur,this)).on("keypress",t.proxy(this.keypress,this)).on("keyup",t.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",t.proxy(this.keydown,this)),this.$menu.on("click",t.proxy(this.click,this)).on("mouseenter","li",t.proxy(this.mouseenter,this)).on("mouseleave","li",t.proxy(this.mouseleave,this))},eventSupported:function(t){var e=t in this.$element;return e||(this.$element.setAttribute(t,"return;"),e="function"==typeof this.$element[t]),e},move:function(t){if(this.shown){switch(t.keyCode){case 9:case 13:case 27:t.preventDefault();break;case 38:t.preventDefault(),this.prev();break;case 40:t.preventDefault(),this.next()}t.stopPropagation()}},keydown:function(e){this.suppressKeyPressRepeat=~t.inArray(e.keyCode,[40,38,9,13,27]),this.move(e)},keypress:function(t){this.suppressKeyPressRepeat||this.move(t)},keyup:function(t){switch(t.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}t.stopPropagation(),t.preventDefault()},focus:function(){this.focused=!0},blur:function(){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(t){t.stopPropagation(),t.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(e){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),t(e.currentTarget).addClass("active")},mouseleave:function(){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}};var n=t.fn.typeahead;t.fn.typeahead=function(n){return this.each(function(){var i=t(this),r=i.data("typeahead"),o="object"==typeof n&&n;r||i.data("typeahead",r=new e(this,o)),"string"==typeof n&&r[n]()})},t.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},t.fn.typeahead.Constructor=e,t.fn.typeahead.noConflict=function(){return t.fn.typeahead=n,this},t(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(){var e=t(this);e.data("typeahead")||e.typeahead(e.data())})}(window.jQuery),$.fn.bootstrapTypeahead=$.fn.typeahead,function(){var t="undefined"!=typeof window?window:exports,e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n=function(){try{document.createElement("$")}catch(t){return t}}();t.btoa||(t.btoa=function(t){for(var i,r,o=0,s=e,a="";t.charAt(0|o)||(s="=",o%1);a+=s.charAt(63&i>>8-8*(o%1))){if(r=t.charCodeAt(o+=.75),r>255)throw n;i=i<<8|r}return a}),t.atob||(t.atob=function(t){if(t=t.replace(/=+$/,""),1==t.length%4)throw n;for(var i,r,o=0,s=0,a="";r=t.charAt(s++);~r&&(i=o%4?64*i+r:r,o++%4)?a+=String.fromCharCode(255&i>>(6&-2*o)):0)r=e.indexOf(r);return a})}(),function(t){"use strict";for(var e,n=0,i="webkit moz ms o".split(" "),r=t.requestAnimationFrame,o=t.cancelAnimationFrame,s=0;s<i.length&&(!r||!o);s++)e=i[s],r=r||t[e+"RequestAnimationFrame"],o=o||t[e+"CancelAnimationFrame"]||t[e+"CancelRequestAnimationFrame"];r&&o||(r=function(e){var i=(new Date).getTime(),r=Math.max(0,16-(i-n)),o=t.setTimeout(function(){e(i+r)},r);return n=i+r,o},o=function(e){t.clearTimeout(e)}),t.requestAnimationFrame=r,t.cancelAnimationFrame=o}(window);/*
$LicenseInfo:firstyear=2010&license=mit$

Copyright (c) 2010, Linden Research, Inc.

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.
$/LicenseInfo$
*/
var ArrayBuffer,ArrayBufferView,Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,DataView;!function(){"use strict";function t(){throw document&&document.createTextNode("").splitText(1),new RangeError("INDEX_SIZE_ERR")}function e(t){if(Object.getOwnPropertyNames&&Object.defineProperty){var e,n=Object.getOwnPropertyNames(t);for(e=0;e<n.length;e+=1)Object.defineProperty(t,n[e],{value:t[n[e]],writable:!1,enumerable:!1,configurable:!1})}}function n(t){function e(e){Object.defineProperty(t,e,{get:function(){return t._getter(e)},set:function(n){t._setter(e,n)},enumerable:!0,configurable:!1})}if(Object.defineProperty){var n;for(n=0;n<t.length;n+=1)e(n)}}function i(t,e){var n=32-e;return t<<n>>n}function r(t,e){var n=32-e;return t<<n>>>n}function o(t){return[255&t]}function s(t){return i(t[0],8)}function a(t){return[255&t]}function l(t){return r(t[0],8)}function u(t){return[255&t>>8,255&t]}function c(t){return i(t[0]<<8|t[1],16)}function h(t){return[255&t>>8,255&t]}function p(t){return r(t[0]<<8|t[1],16)}function f(t){return[255&t>>24,255&t>>16,255&t>>8,255&t]}function d(t){return i(t[0]<<24|t[1]<<16|t[2]<<8|t[3],32)}function m(t){return[255&t>>24,255&t>>16,255&t>>8,255&t]}function g(t){return r(t[0]<<24|t[1]<<16|t[2]<<8|t[3],32)}function v(t,e,n){var i,r,o,s,a,l,u,c,h=(1<<e-1)-1;for(isNaN(t)?(r=(1<<h)-1,o=Math.pow(2,n-1),i=0):1/0===t||t===-1/0?(r=(1<<h)-1,o=0,i=0>t?1:0):0===t?(r=0,o=0,i=1/t===-1/0?1:0):(i=0>t,t=Math.abs(t),t>=Math.pow(2,1-h)?(s=Math.min(Math.floor(Math.log(t)/Math.LN2),h),r=s+h,o=Math.round(t*Math.pow(2,n-s)-Math.pow(2,n))):(r=0,o=Math.round(t/Math.pow(2,1-h-n)))),l=[],a=n;a;a-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(a=e;a;a-=1)l.push(r%2?1:0),r=Math.floor(r/2);for(l.push(i?1:0),l.reverse(),u=l.join(""),c=[];u.length;)c.push(parseInt(u.substring(0,8),2)),u=u.substring(8);return c}function y(t,e,n){var i,r,o,s,a,l,u,c,h=[];for(i=t.length;i;i-=1)for(o=t[i-1],r=8;r;r-=1)h.push(o%2?1:0),o>>=1;return h.reverse(),s=h.join(""),a=(1<<e-1)-1,l=parseInt(s.substring(0,1),2)?-1:1,u=parseInt(s.substring(1,1+e),2),c=parseInt(s.substring(1+e),2),u===(1<<e)-1?0!==c?0/0:1/0*l:u>0?l*Math.pow(2,u-a)*(1+c/Math.pow(2,n)):0!==c?l*Math.pow(2,-(a-1))*(c/Math.pow(2,n)):0>l?-0:0}function b(t){return y(t,11,52)}function w(t){return v(t,11,52)}function _(t){return y(t,8,23)}function x(t){return v(t,8,23)}var S={ToInt32:function(t){return t>>0},ToUint32:function(t){return t>>>0}};Object.prototype.__defineGetter__&&!Object.defineProperty&&(Object.defineProperty=function(t,e,n){n.hasOwnProperty("get")&&t.__defineGetter__(e,n.get),n.hasOwnProperty("set")&&t.__defineSetter__(e,n.set)}),ArrayBuffer||!function(){function i(i,r,o){var s;return s=function(i,r,o){var a,l,u,c;if(arguments.length&&"number"!=typeof arguments[0])if("object"==typeof arguments[0]&&arguments[0].constructor===s)for(a=arguments[0],this.length=a.length,this.byteLength=this.length*this.BYTES_PER_ELEMENT,this.buffer=new ArrayBuffer(this.byteLength),this.byteOffset=0,u=0;u<this.length;u+=1)this._setter(u,a._getter(u));else if("object"!=typeof arguments[0]||arguments[0]instanceof ArrayBuffer){if(!("object"==typeof arguments[0]&&arguments[0]instanceof ArrayBuffer))throw new TypeError("Unexpected argument type(s)");if(this.buffer=i,this.byteOffset=S.ToUint32(r),this.byteOffset>this.buffer.byteLength&&t(),this.byteOffset%this.BYTES_PER_ELEMENT)throw new RangeError("ArrayBuffer length minus the byteOffset is not a multiple of the element size.");arguments.length<3?(this.byteLength=this.buffer.byteLength-this.byteOffset,this.byteLength%this.BYTES_PER_ELEMENT&&t(),this.length=this.byteLength/this.BYTES_PER_ELEMENT):(this.length=S.ToUint32(o),this.byteLength=this.length*this.BYTES_PER_ELEMENT),this.byteOffset+this.byteLength>this.buffer.byteLength&&t()}else for(l=arguments[0],this.length=S.ToUint32(l.length),this.byteLength=this.length*this.BYTES_PER_ELEMENT,this.buffer=new ArrayBuffer(this.byteLength),this.byteOffset=0,u=0;u<this.length;u+=1)c=l[u],this._setter(u,Number(c));else{if(this.length=S.ToInt32(arguments[0]),0>o)throw new RangeError("ArrayBufferView size is not a small enough positive integer.");this.byteLength=this.length*this.BYTES_PER_ELEMENT,this.buffer=new ArrayBuffer(this.byteLength),this.byteOffset=0}this.constructor=s,e(this),n(this)},s.prototype=new ArrayBufferView,s.prototype.BYTES_PER_ELEMENT=i,s.prototype._pack=r,s.prototype._unpack=o,s.BYTES_PER_ELEMENT=i,s.prototype._getter=function(t){if(arguments.length<1)throw new SyntaxError("Not enough arguments");if(t=S.ToUint32(t),!(t>=this.length)){var e,n,i=[];for(e=0,n=this.byteOffset+t*this.BYTES_PER_ELEMENT;e<this.BYTES_PER_ELEMENT;e+=1,n+=1)i.push(this.buffer._bytes[n]);return this._unpack(i)}},s.prototype.get=s.prototype._getter,s.prototype._setter=function(t,e){if(arguments.length<2)throw new SyntaxError("Not enough arguments");if(t=S.ToUint32(t),!(t>=this.length)){var n,i,r=this._pack(e);for(n=0,i=this.byteOffset+t*this.BYTES_PER_ELEMENT;n<this.BYTES_PER_ELEMENT;n+=1,i+=1)this.buffer._bytes[i]=r[n]}},s.prototype.set=function(){if(arguments.length<1)throw new SyntaxError("Not enough arguments");var e,n,i,r,o,s,a,l,u,c;if("object"==typeof arguments[0]&&arguments[0].constructor===this.constructor)if(e=arguments[0],i=S.ToUint32(arguments[1]),i+e.length>this.length&&t(),l=this.byteOffset+i*this.BYTES_PER_ELEMENT,u=e.length*this.BYTES_PER_ELEMENT,e.buffer===this.buffer){for(c=[],o=0,s=e.byteOffset;u>o;o+=1,s+=1)c[o]=e.buffer._bytes[s];for(o=0,a=l;u>o;o+=1,a+=1)this.buffer._bytes[a]=c[o]}else for(o=0,s=e.byteOffset,a=l;u>o;o+=1,s+=1,a+=1)this.buffer._bytes[a]=e.buffer._bytes[s];else{if("object"!=typeof arguments[0]||"undefined"==typeof arguments[0].length)throw new TypeError("Unexpected argument type(s)");for(n=arguments[0],r=S.ToUint32(n.length),i=S.ToUint32(arguments[1]),i+r>this.length&&t(),o=0;r>o;o+=1)s=n[o],this._setter(i+o,Number(s))}},s.prototype.subarray=function(t,e){function n(t,e,n){return e>t?e:t>n?n:t}t=S.ToInt32(t),e=S.ToInt32(e),arguments.length<1&&(t=0),arguments.length<2&&(e=this.length),0>t&&(t=this.length+t),0>e&&(e=this.length+e),t=n(t,0,this.length),e=n(e,0,this.length);var i=e-t;return 0>i&&(i=0),new this.constructor(this.buffer,t*this.BYTES_PER_ELEMENT,i)},s}ArrayBuffer=function(t){if(t=S.ToInt32(t),0>t)throw new RangeError("ArrayBuffer size is not a small enough positive integer.");this.byteLength=t,this._bytes=[],this._bytes.length=t;var n;for(n=0;n<this.byteLength;n+=1)this._bytes[n]=0;e(this)},ArrayBufferView=function(){},Int8Array=Int8Array||i(1,o,s),Uint8Array=Uint8Array||i(1,a,l),Int16Array=Int16Array||i(2,u,c),Uint16Array=Uint16Array||i(2,h,p),Int32Array=Int32Array||i(4,f,d),Uint32Array=Uint32Array||i(4,m,g),Float32Array=Float32Array||i(4,x,_),Float64Array=Float64Array||i(8,w,b)}(),DataView||!function(){function n(t,e){return"function"==typeof t.get?t.get(e):t[e]}function i(e){return function(i,r){i=S.ToUint32(i),i+e.BYTES_PER_ELEMENT>this.byteLength&&t(),i+=this.byteOffset;var s,a=new Uint8Array(this.buffer,i,e.BYTES_PER_ELEMENT),l=[];for(s=0;s<e.BYTES_PER_ELEMENT;s+=1)l.push(n(a,s));return Boolean(r)===Boolean(o)&&l.reverse(),n(new e(new Uint8Array(l).buffer),0)}}function r(e){return function(i,r,s){i=S.ToUint32(i),i+e.BYTES_PER_ELEMENT>this.byteLength&&t();var a,l,u=new e([r]),c=new Uint8Array(u.buffer),h=[];for(a=0;a<e.BYTES_PER_ELEMENT;a+=1)h.push(n(c,a));Boolean(s)===Boolean(o)&&h.reverse(),l=new Uint8Array(this.buffer,i,e.BYTES_PER_ELEMENT),l.set(h)}}var o=function(){var t=new Uint16Array([4660]),e=new Uint8Array(t.buffer);return 18===n(e,0)}();DataView=function(n,i,r){if(!("object"==typeof n&&n instanceof ArrayBuffer))throw new TypeError("TypeError");this.buffer=n,this.byteOffset=S.ToUint32(i),this.byteOffset>this.buffer.byteLength&&t(),this.byteLength=arguments.length<3?this.buffer.byteLength-this.byteOffset:S.ToUint32(r),this.byteOffset+this.byteLength>this.buffer.byteLength&&t(),e(this)},ArrayBufferView&&(DataView.prototype=new ArrayBufferView),DataView.prototype.getUint8=i(Uint8Array),DataView.prototype.getInt8=i(Int8Array),DataView.prototype.getUint16=i(Uint16Array),DataView.prototype.getInt16=i(Int16Array),DataView.prototype.getUint32=i(Uint32Array),DataView.prototype.getInt32=i(Int32Array),DataView.prototype.getFloat32=i(Float32Array),DataView.prototype.getFloat64=i(Float64Array),DataView.prototype.setUint8=r(Uint8Array),DataView.prototype.setInt8=r(Int8Array),DataView.prototype.setUint16=r(Uint16Array),DataView.prototype.setInt16=r(Int16Array),DataView.prototype.setUint32=r(Uint32Array),DataView.prototype.setInt32=r(Int32Array),DataView.prototype.setFloat32=r(Float32Array),DataView.prototype.setFloat64=r(Float64Array)}()}(),function(){var t=this,e=t._,n={},i=Array.prototype,r=Object.prototype,o=Function.prototype,s=i.push,a=i.slice,l=i.concat,u=r.toString,c=r.hasOwnProperty,h=i.forEach,p=i.map,f=i.reduce,d=i.reduceRight,m=i.filter,g=i.every,v=i.some,y=i.indexOf,b=i.lastIndexOf,w=Array.isArray,_=Object.keys,x=o.bind,S=function(t){return t instanceof S?t:this instanceof S?(this._wrapped=t,void 0):new S(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=S),exports._=S):t._=S,S.VERSION="1.5.2";var k=S.each=S.forEach=function(t,e,i){if(null!=t)if(h&&t.forEach===h)t.forEach(e,i);else if(t.length===+t.length){for(var r=0,o=t.length;o>r;r++)if(e.call(i,t[r],r,t)===n)return}else for(var s=S.keys(t),r=0,o=s.length;o>r;r++)if(e.call(i,t[s[r]],s[r],t)===n)return};S.map=S.collect=function(t,e,n){var i=[];return null==t?i:p&&t.map===p?t.map(e,n):(k(t,function(t,r,o){i.push(e.call(n,t,r,o))}),i)};var C="Reduce of empty array with no initial value";S.reduce=S.foldl=S.inject=function(t,e,n,i){var r=arguments.length>2;if(null==t&&(t=[]),f&&t.reduce===f)return i&&(e=S.bind(e,i)),r?t.reduce(e,n):t.reduce(e);if(k(t,function(t,o,s){r?n=e.call(i,n,t,o,s):(n=t,r=!0)}),!r)throw new TypeError(C);return n},S.reduceRight=S.foldr=function(t,e,n,i){var r=arguments.length>2;if(null==t&&(t=[]),d&&t.reduceRight===d)return i&&(e=S.bind(e,i)),r?t.reduceRight(e,n):t.reduceRight(e);var o=t.length;if(o!==+o){var s=S.keys(t);o=s.length}if(k(t,function(a,l,u){l=s?s[--o]:--o,r?n=e.call(i,n,t[l],l,u):(n=t[l],r=!0)}),!r)throw new TypeError(C);return n},S.find=S.detect=function(t,e,n){var i;return E(t,function(t,r,o){return e.call(n,t,r,o)?(i=t,!0):void 0}),i},S.filter=S.select=function(t,e,n){var i=[];return null==t?i:m&&t.filter===m?t.filter(e,n):(k(t,function(t,r,o){e.call(n,t,r,o)&&i.push(t)}),i)},S.reject=function(t,e,n){return S.filter(t,function(t,i,r){return!e.call(n,t,i,r)},n)},S.every=S.all=function(t,e,i){e||(e=S.identity);var r=!0;return null==t?r:g&&t.every===g?t.every(e,i):(k(t,function(t,o,s){return(r=r&&e.call(i,t,o,s))?void 0:n}),!!r)};var E=S.some=S.any=function(t,e,i){e||(e=S.identity);var r=!1;return null==t?r:v&&t.some===v?t.some(e,i):(k(t,function(t,o,s){return r||(r=e.call(i,t,o,s))?n:void 0}),!!r)};S.contains=S.include=function(t,e){return null==t?!1:y&&t.indexOf===y?-1!=t.indexOf(e):E(t,function(t){return t===e})},S.invoke=function(t,e){var n=a.call(arguments,2),i=S.isFunction(e);return S.map(t,function(t){return(i?e:t[e]).apply(t,n)})},S.pluck=function(t,e){return S.map(t,function(t){return t[e]})},S.where=function(t,e,n){return S.isEmpty(e)?n?void 0:[]:S[n?"find":"filter"](t,function(t){for(var n in e)if(e[n]!==t[n])return!1;return!0})},S.findWhere=function(t,e){return S.where(t,e,!0)},S.max=function(t,e,n){if(!e&&S.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);if(!e&&S.isEmpty(t))return-1/0;var i={computed:-1/0,value:-1/0};return k(t,function(t,r,o){var s=e?e.call(n,t,r,o):t;s>i.computed&&(i={value:t,computed:s})}),i.value},S.min=function(t,e,n){if(!e&&S.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);if(!e&&S.isEmpty(t))return 1/0;var i={computed:1/0,value:1/0};return k(t,function(t,r,o){var s=e?e.call(n,t,r,o):t;s<i.computed&&(i={value:t,computed:s})}),i.value},S.shuffle=function(t){var e,n=0,i=[];return k(t,function(t){e=S.random(n++),i[n-1]=i[e],i[e]=t}),i},S.sample=function(t,e,n){return arguments.length<2||n?t[S.random(t.length-1)]:S.shuffle(t).slice(0,Math.max(0,e))};var T=function(t){return S.isFunction(t)?t:function(e){return e[t]}};S.sortBy=function(t,e,n){var i=T(e);return S.pluck(S.map(t,function(t,e,r){return{value:t,index:e,criteria:i.call(n,t,e,r)}}).sort(function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return t.index-e.index}),"value")};var M=function(t){return function(e,n,i){var r={},o=null==n?S.identity:T(n);return k(e,function(n,s){var a=o.call(i,n,s,e);t(r,a,n)}),r}};S.groupBy=M(function(t,e,n){(S.has(t,e)?t[e]:t[e]=[]).push(n)}),S.indexBy=M(function(t,e,n){t[e]=n}),S.countBy=M(function(t,e){S.has(t,e)?t[e]++:t[e]=1}),S.sortedIndex=function(t,e,n,i){n=null==n?S.identity:T(n);for(var r=n.call(i,e),o=0,s=t.length;s>o;){var a=o+s>>>1;n.call(i,t[a])<r?o=a+1:s=a}return o},S.toArray=function(t){return t?S.isArray(t)?a.call(t):t.length===+t.length?S.map(t,S.identity):S.values(t):[]},S.size=function(t){return null==t?0:t.length===+t.length?t.length:S.keys(t).length},S.first=S.head=S.take=function(t,e,n){return null==t?void 0:null==e||n?t[0]:a.call(t,0,e)},S.initial=function(t,e,n){return a.call(t,0,t.length-(null==e||n?1:e))},S.last=function(t,e,n){return null==t?void 0:null==e||n?t[t.length-1]:a.call(t,Math.max(t.length-e,0))},S.rest=S.tail=S.drop=function(t,e,n){return a.call(t,null==e||n?1:e)},S.compact=function(t){return S.filter(t,S.identity)};var P=function(t,e,n){return e&&S.every(t,S.isArray)?l.apply(n,t):(k(t,function(t){S.isArray(t)||S.isArguments(t)?e?s.apply(n,t):P(t,e,n):n.push(t)}),n)};S.flatten=function(t,e){return P(t,e,[])},S.without=function(t){return S.difference(t,a.call(arguments,1))},S.uniq=S.unique=function(t,e,n,i){S.isFunction(e)&&(i=n,n=e,e=!1);var r=n?S.map(t,n,i):t,o=[],s=[];return k(r,function(n,i){(e?i&&s[s.length-1]===n:S.contains(s,n))||(s.push(n),o.push(t[i]))}),o},S.union=function(){return S.uniq(S.flatten(arguments,!0))},S.intersection=function(t){var e=a.call(arguments,1);return S.filter(S.uniq(t),function(t){return S.every(e,function(e){return S.indexOf(e,t)>=0})})},S.difference=function(t){var e=l.apply(i,a.call(arguments,1));return S.filter(t,function(t){return!S.contains(e,t)})},S.zip=function(){for(var t=S.max(S.pluck(arguments,"length").concat(0)),e=new Array(t),n=0;t>n;n++)e[n]=S.pluck(arguments,""+n);return e},S.object=function(t,e){if(null==t)return{};for(var n={},i=0,r=t.length;r>i;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n},S.indexOf=function(t,e,n){if(null==t)return-1;var i=0,r=t.length;if(n){if("number"!=typeof n)return i=S.sortedIndex(t,e),t[i]===e?i:-1;i=0>n?Math.max(0,r+n):n}if(y&&t.indexOf===y)return t.indexOf(e,n);for(;r>i;i++)if(t[i]===e)return i;return-1},S.lastIndexOf=function(t,e,n){if(null==t)return-1;var i=null!=n;if(b&&t.lastIndexOf===b)return i?t.lastIndexOf(e,n):t.lastIndexOf(e);for(var r=i?n:t.length;r--;)if(t[r]===e)return r;return-1},S.range=function(t,e,n){arguments.length<=1&&(e=t||0,t=0),n=arguments[2]||1;for(var i=Math.max(Math.ceil((e-t)/n),0),r=0,o=new Array(i);i>r;)o[r++]=t,t+=n;return o};var A=function(){};S.bind=function(t,e){var n,i;if(x&&t.bind===x)return x.apply(t,a.call(arguments,1));if(!S.isFunction(t))throw new TypeError;return n=a.call(arguments,2),i=function(){if(!(this instanceof i))return t.apply(e,n.concat(a.call(arguments)));A.prototype=t.prototype;var r=new A;A.prototype=null;var o=t.apply(r,n.concat(a.call(arguments)));return Object(o)===o?o:r}},S.partial=function(t){var e=a.call(arguments,1);return function(){return t.apply(this,e.concat(a.call(arguments)))}},S.bindAll=function(t){var e=a.call(arguments,1);if(0===e.length)throw new Error("bindAll must be passed function names");return k(e,function(e){t[e]=S.bind(t[e],t)}),t},S.memoize=function(t,e){var n={};return e||(e=S.identity),function(){var i=e.apply(this,arguments);return S.has(n,i)?n[i]:n[i]=t.apply(this,arguments)}},S.delay=function(t,e){var n=a.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},S.defer=function(t){return S.delay.apply(S,[t,1].concat(a.call(arguments,1)))},S.throttle=function(t,e,n){var i,r,o,s=null,a=0;n||(n={});var l=function(){a=n.leading===!1?0:new Date,s=null,o=t.apply(i,r)};return function(){var u=new Date;a||n.leading!==!1||(a=u);var c=e-(u-a);return i=this,r=arguments,0>=c?(clearTimeout(s),s=null,a=u,o=t.apply(i,r)):s||n.trailing===!1||(s=setTimeout(l,c)),o}},S.debounce=function(t,e,n){var i,r,o,s,a;return function(){o=this,r=arguments,s=new Date;var l=function(){var u=new Date-s;e>u?i=setTimeout(l,e-u):(i=null,n||(a=t.apply(o,r)))},u=n&&!i;return i||(i=setTimeout(l,e)),u&&(a=t.apply(o,r)),a}},S.once=function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}},S.wrap=function(t,e){return function(){var n=[t];return s.apply(n,arguments),e.apply(this,n)}},S.compose=function(){var t=arguments;return function(){for(var e=arguments,n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},S.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},S.keys=_||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var n in t)S.has(t,n)&&e.push(n);return e},S.values=function(t){for(var e=S.keys(t),n=e.length,i=new Array(n),r=0;n>r;r++)i[r]=t[e[r]];return i},S.pairs=function(t){for(var e=S.keys(t),n=e.length,i=new Array(n),r=0;n>r;r++)i[r]=[e[r],t[e[r]]];return i},S.invert=function(t){for(var e={},n=S.keys(t),i=0,r=n.length;r>i;i++)e[t[n[i]]]=n[i];return e},S.functions=S.methods=function(t){var e=[];for(var n in t)S.isFunction(t[n])&&e.push(n);return e.sort()},S.extend=function(t){return k(a.call(arguments,1),function(e){if(e)for(var n in e)t[n]=e[n]}),t},S.pick=function(t){var e={},n=l.apply(i,a.call(arguments,1));return k(n,function(n){n in t&&(e[n]=t[n])}),e},S.omit=function(t){var e={},n=l.apply(i,a.call(arguments,1));for(var r in t)S.contains(n,r)||(e[r]=t[r]);return e},S.defaults=function(t){return k(a.call(arguments,1),function(e){if(e)for(var n in e)void 0===t[n]&&(t[n]=e[n])}),t},S.clone=function(t){return S.isObject(t)?S.isArray(t)?t.slice():S.extend({},t):t},S.tap=function(t,e){return e(t),t};var O=function(t,e,n,i){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof S&&(t=t._wrapped),e instanceof S&&(e=e._wrapped);var r=u.call(t);if(r!=u.call(e))return!1;switch(r){case"[object String]":return t==String(e);case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var o=n.length;o--;)if(n[o]==t)return i[o]==e;var s=t.constructor,a=e.constructor;if(s!==a&&!(S.isFunction(s)&&s instanceof s&&S.isFunction(a)&&a instanceof a))return!1;n.push(t),i.push(e);var l=0,c=!0;if("[object Array]"==r){if(l=t.length,c=l==e.length)for(;l--&&(c=O(t[l],e[l],n,i)););}else{for(var h in t)if(S.has(t,h)&&(l++,!(c=S.has(e,h)&&O(t[h],e[h],n,i))))break;if(c){for(h in e)if(S.has(e,h)&&!l--)break;c=!l}}return n.pop(),i.pop(),c};S.isEqual=function(t,e){return O(t,e,[],[])},S.isEmpty=function(t){if(null==t)return!0;if(S.isArray(t)||S.isString(t))return 0===t.length;for(var e in t)if(S.has(t,e))return!1;return!0},S.isElement=function(t){return!(!t||1!==t.nodeType)},S.isArray=w||function(t){return"[object Array]"==u.call(t)},S.isObject=function(t){return t===Object(t)},k(["Arguments","Function","String","Number","Date","RegExp"],function(t){S["is"+t]=function(e){return u.call(e)=="[object "+t+"]"}}),S.isArguments(arguments)||(S.isArguments=function(t){return!(!t||!S.has(t,"callee"))}),"function"!=typeof/./&&(S.isFunction=function(t){return"function"==typeof t}),S.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},S.isNaN=function(t){return S.isNumber(t)&&t!=+t},S.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==u.call(t)},S.isNull=function(t){return null===t},S.isUndefined=function(t){return void 0===t},S.has=function(t,e){return c.call(t,e)},S.noConflict=function(){return t._=e,this},S.identity=function(t){return t},S.times=function(t,e,n){for(var i=Array(Math.max(0,t)),r=0;t>r;r++)i[r]=e.call(n,r);return i},S.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))};var N={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};N.unescape=S.invert(N.escape);var D={escape:new RegExp("["+S.keys(N.escape).join("")+"]","g"),unescape:new RegExp("("+S.keys(N.unescape).join("|")+")","g")};S.each(["escape","unescape"],function(t){S[t]=function(e){return null==e?"":(""+e).replace(D[t],function(e){return N[t][e]})}}),S.result=function(t,e){if(null==t)return void 0;var n=t[e];return S.isFunction(n)?n.call(t):n},S.mixin=function(t){k(S.functions(t),function(e){var n=S[e]=t[e];S.prototype[e]=function(){var t=[this._wrapped];return s.apply(t,arguments),R.call(this,n.apply(S,t))}})};var I=0;S.uniqueId=function(t){var e=++I+"";return t?t+e:e},S.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var L=/(.)^/,$={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},z=/\\|'|\r|\n|\t|\u2028|\u2029/g;S.template=function(t,e,n){var i;n=S.defaults({},n,S.templateSettings);var r=new RegExp([(n.escape||L).source,(n.interpolate||L).source,(n.evaluate||L).source].join("|")+"|$","g"),o=0,s="__p+='";t.replace(r,function(e,n,i,r,a){return s+=t.slice(o,a).replace(z,function(t){return"\\"+$[t]}),n&&(s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),i&&(s+="'+\n((__t=("+i+"))==null?'':__t)+\n'"),r&&(s+="';\n"+r+"\n__p+='"),o=a+e.length,e}),s+="';\n",n.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{i=new Function(n.variable||"obj","_",s)}catch(a){throw a.source=s,a}if(e)return i(e,S);var l=function(t){return i.call(this,t,S)};return l.source="function("+(n.variable||"obj")+"){\n"+s+"}",l},S.chain=function(t){return S(t).chain()};var R=function(t){return this._chain?S(t).chain():t};S.mixin(S),k(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=i[t];S.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!=t&&"splice"!=t||0!==n.length||delete n[0],R.call(this,n)}}),k(["concat","join","slice"],function(t){var e=i[t];S.prototype[t]=function(){return R.call(this,e.apply(this._wrapped,arguments))}}),S.extend(S.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),function(t,e){if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(n,i,r){t.Backbone=e(t,r,n,i)});else if("undefined"!=typeof exports){var n,i=require("underscore");try{n=require("jquery")}catch(r){}e(t,exports,i,n)}else t.Backbone=e(t,{},t._,t.jQuery||t.Zepto||t.ender||t.$)}(this,function(t,e,n,i){var r=t.Backbone,o=[];o.push;var s=o.slice;o.splice,e.VERSION="1.1.0";var n=t._;n||"undefined"==typeof require||(n=require("underscore")),e.$=i,e.noConflict=function(){return t.Backbone=r,this},e.emulateHTTP=!1,e.emulateJSON=!1;var a=e.Events={on:function(t,e,n){if(!u(this,"on",t,[e,n])||!e)return this;this._events||(this._events={});var i=this._events[t]||(this._events[t]=[]);return i.push({callback:e,context:n,ctx:n||this}),this},once:function(t,e,i){if(!u(this,"once",t,[e,i])||!e)return this;var r=this,o=n.once(function(){r.off(t,o),e.apply(this,arguments)});return o._callback=e,this.on(t,o,i)},off:function(t,e,i){var r,o,s,a,l,c,h,p;if(!this._events||!u(this,"off",t,[e,i]))return this;if(!t&&!e&&!i)return this._events=void 0,this;for(a=t?[t]:n.keys(this._events),l=0,c=a.length;c>l;l++)if(t=a[l],s=this._events[t]){if(this._events[t]=r=[],e||i)for(h=0,p=s.length;p>h;h++)o=s[h],(e&&e!==o.callback&&e!==o.callback._callback||i&&i!==o.context)&&r.push(o);r.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=s.call(arguments,1);if(!u(this,"trigger",t,e))return this;var n=this._events[t],i=this._events.all;return n&&c(n,e),i&&c(i,arguments),this},stopListening:function(t,e,i){var r=this._listeningTo;if(!r)return this;var o=!e&&!i;i||"object"!=typeof e||(i=this),t&&((r={})[t._listenId]=t);for(var s in r)t=r[s],t.off(e,i,this),(o||n.isEmpty(t._events))&&delete this._listeningTo[s];return this}},l=/\s+/,u=function(t,e,n,i){if(!n)return!0;if("object"==typeof n){for(var r in n)t[e].apply(t,[r,n[r]].concat(i));return!1}if(l.test(n)){for(var o=n.split(l),s=0,a=o.length;a>s;s++)t[e].apply(t,[o[s]].concat(i));return!1}return!0},c=function(t,e){var n,i=-1,r=t.length,o=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;++i<r;)(n=t[i]).callback.call(n.ctx);return;case 1:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o);return;case 2:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o,s);return;case 3:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o,s,a);return;default:for(;++i<r;)(n=t[i]).callback.apply(n.ctx,e)}},h={listenTo:"on",listenToOnce:"once"};n.each(h,function(t,e){a[e]=function(e,i,r){var o=this._listeningTo||(this._listeningTo={}),s=e._listenId||(e._listenId=n.uniqueId("l"));return o[s]=e,r||"object"!=typeof i||(r=this),e[t](i,r,this),this}}),a.bind=a.on,a.unbind=a.off,n.extend(e,a);var p=e.Model=function(t,e){var i=t||{};e||(e={}),this.cid=n.uniqueId("c"),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(i=this.parse(i,e)||{}),i=n.defaults({},i,n.result(this,"defaults")),this.set(i,e),this.changed={},this._syncedAttributes=this.isNew()?null:this.toJSON(),this.initialize.apply(this,arguments)};n.extend(p.prototype,a,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return n.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return n.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,i){var r,o,s,a,l,u,c,h;if(null==t)return this;if("object"==typeof t?(o=t,i=e):(o={})[t]=e,i||(i={}),!this._validate(o,i))return!1;s=i.unset,l=i.silent,a=[],u=this._changing,this._changing=!0,u||(this._previousAttributes=n.clone(this.attributes),this.changed={}),h=this.attributes,c=this._previousAttributes,this.idAttribute in o&&(this.id=o[this.idAttribute]);for(r in o)e=o[r],n.isEqual(h[r],e)||a.push(r),n.isEqual(c[r],e)?delete this.changed[r]:this.changed[r]=e,s?delete h[r]:h[r]=e;if(!l){a.length&&(this._pending=i);for(var p=0,f=a.length;f>p;p++)this.trigger("change:"+a[p],this,h[a[p]],i)}if(u)return this;if(!l)for(;this._pending;)i=this._pending,this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,n.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var i in this.attributes)e[i]=void 0;return this.set(e,n.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!n.isEmpty(this.changed):n.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?n.clone(this.changed):!1;var e=this._changing?this._previousAttributes:this.attributes;return this._diff(e,t)},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},isSynced:function(t){return this._syncedAttributes?null==t?n.isEqual(this._syncedAttributes,this.attributes):n.isEqual(this._syncedAttributes[t],this.attributes[t]):!1},unsyncedAttributes:function(t){return!t&&this.isSynced()?!1:(t=n.extend({},this.attributes,t),this._syncedAttributes?this._diff(this._syncedAttributes,t):t)},synced:function(t){return null!=t&&this._syncedAttributes?this._syncedAttributes[t]:null},syncedAttributes:function(){return n.clone(this._syncedAttributes)},resync:function(t){this._syncedAttributes=t?n.clone(t):this.toJSON()},fetch:function(t){t=n.defaults({},t,{parse:!0,update:!0});var e=this,i=t.success;return t.success=function(n){if(t.update){if(!e.set(e.parse(n,t),t))return!1;i&&i(e,n,t),e._sync(n,t)}else i&&i(e,n,t)},$(this,t),this.sync("read",this,t)},save:function(t,e,i){var r,o,s,a=this.attributes;if(null==t||"object"==typeof t?(r=t,i=e):(r={})[t]=e,i=n.extend({validate:!0},i),r&&!i.wait){if(!this.set(r,i))return!1}else if(!this._validate(r,i))return!1;r&&i.wait&&(this.attributes=n.extend({},a,r)),void 0===i.parse&&(i.parse=!0);var l=this,u=i.success;return i.success=function(t){l.attributes=a;var e=l.parse(t,i);return i.wait&&(e=n.extend(r||{},e)),n.isObject(e)&&!l.set(e,i)?!1:(u&&u(l,t,i),l._sync(t,i),void 0)},$(this,i),o=this.isNew()?"create":i.patch?"patch":"update","patch"===o&&(i.attrs=r),s=this.sync(o,this,i),r&&i.wait&&(this.attributes=a),s},destroy:function(t){t=t?n.clone(t):{};var e=this,i=t.success,r=function(){e.trigger("destroy",e,e.collection,t)};if(t.success=function(n){(t.wait||e.isNew())&&r(),i&&i(e,n,t),e.isNew()||e._sync(n,t)},this.isNew())return t.success(),!1;$(this,t);var o=this.sync("delete",this,t);return t.wait||r(),o},url:function(){var t=n.result(this,"urlRoot")||n.result(this.collection,"url")||L();return this.isNew()?t:t+("/"===t.charAt(t.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(t){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},n.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=n.extend({},this.attributes,t);var i=this.validationError=this.validate(t,e)||null;return i?(this.trigger("invalid",this,i,n.extend(e,{validationError:i})),!1):!0},_sync:function(t,e){this.resync(),this.trigger("sync",this,t,e)},_diff:function(t,e){var i,r=!1;for(var o in e)n.isEqual(t[o],i=e[o])||((r||(r={}))[o]=i);return r}});var f=["keys","values","pairs","invert","pick","omit"];n.each(f,function(t){p.prototype[t]=function(){var e=s.call(arguments);return e.unshift(this.attributes),n[t].apply(n,e)}});var d=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,n.extend({silent:!0},e))},m={add:!0,remove:!0,merge:!0},g={add:!0,remove:!1};n.extend(d.prototype,a,{model:p,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,n.extend({merge:!1},e,g))},remove:function(t,e){var i=!n.isArray(t);t=i?[t]:n.clone(t),e||(e={});var r,o,s,a;for(r=0,o=t.length;o>r;r++)a=t[r]=this.get(t[r]),a&&(s=this.indexOf(a),this.models.splice(s,1),this.length--,e.silent||(e.index=s,a.trigger("remove",a,this,e)),this._removeReference(a,e));return i?t[0]:t},set:function(t,e){e=n.defaults({},e,m),e.parse&&(t=this.parse(t,e));var i=!n.isArray(t);t=i?t?[t]:[]:n.clone(t);var r,o,s,a,l,u,c,h=e.at,f=this.model,d=this.comparator&&null==h&&e.sort!==!1,g=n.isString(this.comparator)?this.comparator:null,v=[],y=[],b={},w=e.add,_=e.merge,x=e.remove,S=!d&&w&&x?[]:!1;for(r=0,o=t.length;o>r;r++){if(l=t[r]||{},s=l instanceof p?a=l:l[f.prototype.idAttribute||"id"],u=this.get(s))x&&(b[u.cid]=!0),_&&(l=l===a?a.attributes:l,e.parse&&(l=u.parse(l,e)),u.set(l,e),d&&!c&&u.hasChanged(g)&&(c=!0)),t[r]=u;else if(w){if(a=t[r]=this._prepareModel(l,e),!a)continue;v.push(a),this._addReference(a,e)}S&&S.push(u||a)}if(x){for(r=0,o=this.length;o>r;++r)b[(a=this.models[r]).cid]||y.push(a);y.length&&this.remove(y,e)}if(v.length||S&&S.length)if(d&&(c=!0),this.length+=v.length,null!=h)for(r=0,o=v.length;o>r;r++)this.models.splice(h+r,0,v[r]);else{S&&(this.models.length=0);var k=S||v;for(r=0,o=k.length;o>r;r++)this.models.push(k[r])}if(c&&this.sort({silent:!0}),!e.silent){for(r=0,o=v.length;o>r;r++)(a=v[r]).trigger("add",a,this,e);(c||S&&S.length)&&this.trigger("sort",this,e)}return i?t[0]:t},reset:function(t,e){e||(e={});for(var i=0,r=this.models.length;r>i;i++)this._removeReference(this.models[i],e);return e.previousModels=this.models,this._reset(),t=this.add(t,n.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,n.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return this.add(t,n.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(){return s.apply(this.models,arguments)},get:function(t){return null==t?void 0:this._byId[t]||this._byId[t.id]||this._byId[t.cid]},at:function(t){return this.models[t]
},where:function(t,e){return n.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var n in t)if(t[n]!==e.get(n))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),n.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return n.invoke(this.models,"get",t)},fetch:function(t){t=n.defaults({},t,{parse:!0,update:!0});var e=t.success,i=this;return t.success=function(n){if(t.update){var r=t.reset?"reset":"set";i[r](n,t),e&&e(i,n,t),i.trigger("sync",i,n,t)}else e&&e(i,n,t)},$(this,t),this.sync("read",this,t)},create:function(t,e){if(e=e?n.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var i=this,r=e.success;return e.success=function(t,n){e.wait&&i.add(t,e),r&&r(t,n,e)},t.save(null,e),t},parse:function(t){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof p)return t;e=e?n.clone(e):{},e.collection=this;var i=new this.model(t,e);return i.validationError?(this.trigger("invalid",this,i.validationError,e),!1):i},_addReference:function(t){this._byId[t.cid]=t,null!=t.id&&(this._byId[t.id]=t),t.collection||(t.collection=this),t.on("all",this._onModelEvent,this)},_removeReference:function(t){delete this._byId[t.id],delete this._byId[t.cid],this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,i){("add"!==t&&"remove"!==t||n===this)&&("destroy"===t&&this.remove(e,i),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});var v=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];n.each(v,function(t){d.prototype[t]=function(){var e=s.call(arguments);return e.unshift(this.models),n[t].apply(n,e)}});var y=["groupBy","countBy","sortBy","indexBy"];n.each(y,function(t){d.prototype[t]=function(e,i){var r=n.isFunction(e)?e:function(t){return t.get(e)};return n[t](this.models,r,i)}});var b=e.View=function(t){this.cid=n.uniqueId("view"),t||(t={}),n.extend(this,n.pick(t,_)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},w=/^(\S+)\s*(.*)$/,_=["model","collection","el","id","attributes","className","tagName","events"];n.extend(b.prototype,a,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,n){return this.$el&&this.undelegateEvents(),this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=n.result(this,"events")))return this;this.undelegateEvents();for(var e in t){var i=t[e];if(n.isFunction(i)||(i=this[t[e]]),i){var r=e.match(w),o=r[1],s=r[2];i=n.bind(i,this),o+=".delegateEvents"+this.cid,""===s?this.$el.on(o,i):this.$el.on(o,s,i)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"),!1);else{var t=n.extend({},n.result(this,"attributes"));this.id&&(t.id=n.result(this,"id")),this.className&&(t["class"]=n.result(this,"className"));var i=e.$("<"+n.result(this,"tagName")+">").attr(t);this.setElement(i,!1)}}}),e.sync=function(t,i,r){var o=S[t];n.defaults(r||(r={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var s={type:o,dataType:"json"};if(r.url||(s.url=n.result(i,"url")||L()),null!=r.data||!i||"create"!==t&&"update"!==t&&"patch"!==t||(s.contentType="application/json",s.data=JSON.stringify(r.attrs||i.toJSON(r))),r.emulateJSON&&(s.contentType="application/x-www-form-urlencoded",s.data=s.data?{model:s.data}:{}),r.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){s.type="POST",r.emulateJSON&&(s.data._method=o);var a=r.beforeSend;r.beforeSend=function(t){return t.setRequestHeader("X-HTTP-Method-Override",o),a?a.apply(this,arguments):void 0}}"GET"===s.type||r.emulateJSON||(s.processData=!1),"PATCH"===s.type&&x&&(s.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var l=r.xhr=e.ajax(n.extend(s,r));return i.trigger("request",i,l,r),l};var x=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),S={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var k=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},C=/\((.*?)\)/g,E=/(\(\?)?:\w+/g,T=/\*\w+/g,M=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(k.prototype,a,{initialize:function(){},route:function(t,i,r){n.isRegExp(t)||(t=this._routeToRegExp(t)),n.isFunction(i)&&(r=i,i=""),r||(r=this[i]);var o=this;return e.history.route(t,function(n){var s=o._extractParameters(t,n);r&&r.apply(o,s),o.trigger.apply(o,["route:"+i].concat(s)),o.trigger("route",i,s),e.history.trigger("route",o,i,s)}),this},navigate:function(t,n){return e.history.navigate(t,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var t,e=n.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(M,"\\$&").replace(C,"(?:$1)?").replace(E,function(t,e){return e?t:"([^/?]+)"}).replace(T,"([^?]*?)").concat("(?:\\?(.*))?"),new RegExp("^"+t+"$")},_extractParameters:function(t,i){var r=t.exec(i).slice(1),o=n.map(r,function(t){return t?decodeURIComponent(t):null});return e.qs&&o.push(e.qs(o.pop())),o}});var P=e.History=function(){this.handlers=[],n.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},A=/^[#\/]|\s+$/g,O=/^\/+|\/+$/g,N=/msie [\w.]+/,D=/\/$/;P.started=!1,n.extend(P.prototype,a,{interval:50,getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=this.location.pathname;var n=this.root.replace(D,"");t.indexOf(n)||(t=t.slice(n.length))}else t=this.getHash();return t.replace(A,"")},start:function(t){if(P.started)throw new Error("Backbone.history has already been started");P.started=!0,this.options=n.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var i=this.getFragment(),r=document.documentMode,o=N.exec(navigator.userAgent.toLowerCase())&&(!r||7>=r);this.root=("/"+this.root+"/").replace(O,"/"),o&&this._wantsHashChange&&(this.iframe=e.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(i)),this._hasPushState?e.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!o?e.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=i;var s=this.location,a=s.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!a)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._hasPushState&&a&&s.hash&&(this.fragment=this.getHash().replace(A,""),this.history.replaceState({},document.title,this.root+this.fragment+s.search))}return this.options.silent?void 0:this.loadUrl()},stop:function(){e.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),P.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(){var t=this.getFragment();return t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe))),t===this.fragment?!1:(this.iframe&&this.navigate(t),this.loadUrl(),void 0)},loadUrl:function(t){return t=this.fragment=this.getFragment(t),n.any(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0})},navigate:function(t,e){if(!P.started)return!1;e&&e!==!0||(e={trigger:!!e});var n=this.root+(t=this.getFragment(t||""));if(this.fragment!==t){if(this.fragment=t,""===t&&"/"!==n&&(n=n.slice(0,-1)),this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,n){if(n){var i=t.href.replace(/(javascript:|#).*$/,"");t.replace(i+"#"+e)}else t.hash="#"+e}}),e.history=new P;var I=function(t,e){var i,r=this;i=t&&n.has(t,"constructor")?t.constructor:function(){return r.apply(this,arguments)},n.extend(i,r,e);var o=function(){this.constructor=i};return o.prototype=r.prototype,i.prototype=new o,t&&n.extend(i.prototype,t),i.__super__=r.prototype,i};p.extend=d.extend=k.extend=b.extend=P.extend=I;var L=function(){throw new Error('A "url" property or function must be specified')},$=function(t,e){var n=e.error;e.error=function(i){n&&n(t,i,e),t.trigger("error",t,i,e)}};return e}),/*
 * Copyright (C) 2013 Panopta, Andrew Moffat
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
function(t){t.fn.wizard=function(t){return new Wizard(this,t)},t.fn.wizard.logging=!1;var e=function(t,e,n,i,r){this.wizard=t,this.index=n,this.prev=i,this.next=r,this.el=e,this.title=e.find("h3").first().text(),this.name=e.data("cardname")||this.title,this.nav=this._createNavElement(this.title,n),this._disabled=!1,this._loaded=!1,this._events={}};e.prototype={select:function(){this.log("selecting"),this.isSelected()||(this.nav.addClass("active"),this.el.show(),this._loaded||(this.trigger("loaded"),this.reload()),this.trigger("selected"));var t=this.wizard;return t.backButton.toggleClass("disabled",0==this.index),this.index>=t._cards.length-1?(this.log("on last card, changing next button to submit"),t.changeNextButton(t.args.buttons.submitText,"btn-success"),t._readyToSubmit=!0,t.trigger("readySubmit")):(t._readyToSubmit=!1,t.changeNextButton(t.args.buttons.nextText,"btn-primary")),this},_createNavElement:function(e,n){var i=t('<li class="wizard-nav-item"></li>'),r=t('<a class="wizard-nav-link"></a>');return r.data("navindex",n),i.append(r),r.append('<i class="icon-chevron-right"></i>'),r.append(e),i},markVisited:function(){return this.log("marking as visited"),this.nav.addClass("already-visited"),this.trigger("markVisited"),this},unmarkVisited:function(){return this.log("unmarking as visited"),this.nav.removeClass("already-visited"),this.trigger("unmarkVisited"),this},deselect:function(){return this.nav.removeClass("active"),this.el.hide(),this.trigger("deselect"),this},enable:function(){return this.log("enabling"),this.nav.addClass("active"),this._disabled=!1,this.trigger("enabled"),this},disable:function(t){return this.log("disabling"),this._disabled=!0,this.nav.removeClass("active already-visited"),t&&this.el.hide(),this.trigger("disabled"),this},isDisabled:function(){return this._disabled},alreadyVisited:function(){return this.nav.hasClass("already-visited")},isSelected:function(){return this.nav.hasClass("active")},reload:function(){return this._loaded=!0,this.trigger("reload"),this},on:function(){return this.wizard.on.apply(this,arguments)},trigger:function(){return this.callListener("on"+arguments[0]),this.wizard.trigger.apply(this,arguments)},toggleAlert:function(e,n){this.log("toggling alert to: "+n),n="undefined"==typeof n?!0:n,n?this.trigger("showAlert"):this.trigger("hideAlert");var i,r=this.el.children("h3").first().next("div.alert");if(0==r.length){if(!n)return this;this.log("couldn't find existing alert div, creating one"),i=t("<div />"),i.addClass("alert"),i.addClass("hide"),i.insertAfter(this.el.find("h3").first())}else this.log("found existing alert div"),i=r.first();return n?(null!=e&&(this.log("setting alert msg to",e),i.html(e)),i.show()):i.hide(),this},callListener:function(t){t=t.toLowerCase(),this.log("looking for listener "+t);var e=window[this.el.data(t)];if(e){this.log("calling listener "+t),this.wizard;try{e(this)}catch(n){this.log("exception calling listener "+t+": ",n)}}else this.log("didn't find listener "+t)},problem:function(t){this.nav.find("a").toggleClass("wizard-step-error",t)},validate:function(){var e=!1,n=this;this.el.find("[data-validate]").each(function(i,r){n.log("validating individiual inputs"),r=t(r);var o=r.data("validate");if(o){var s={status:!0,title:"Error",msg:""},a=window[o](r);if(t.extend(s,a),s.status){r.parent(".control-group").toggleClass("error",!1);try{r.popover("destroy")}catch(l){r.popover("hide")}}else e=!0,r.parent(".control-group").toggleClass("error",!0),n.wizard.errorPopover(r,s.msg)}}),this.log("after validating inputs, failures is",e);var i=window[this.el.data("validate")];if(i){this.log("running html-embedded card validator");var r=i(this);("undefined"==typeof r||null==r)&&(r=!0),r||(e=!0),this.log("after running html-embedded card validator, failures is",e)}this.log("running listener validator");var o=this.trigger("validate");("undefined"==typeof o||null==o)&&(o=!0),o||(e=!0),this.log("after running listener validator, failures is",e);var s=!e;return s?(this.log("validated, calling listeners"),this.trigger("validated")):(this.log("invalid"),this.trigger("invalid")),s},log:function(){if(window.console&&t.fn.wizard.logging){var e="card '"+this.name+"': ",n=[e];n.push.apply(n,arguments),console.log.apply(console,n)}},isActive:function(){return this.nav.hasClass("active")}},Wizard=function(e,n){var i=['<div class="modal hide wizard-modal" role="dialog">','<div class="wizard-modal-header modal-header">','<button class="wizard-close close" type="button">x</button>','<h3 class="wizard-title"></h3>','<span class="wizard-subtitle"></span>',"</div>",'<div class="pull-left wizard-steps">','<div class="wizard-nav-container">','<ul class="nav nav-list" style="padding-bottom:30px;">',"</ul>","</div>",'<div class="wizard-progress-container">',,'<div class="progress progress-striped">','<div class="bar"></div>',"</div>","</div>","</div>","<form>",'<div class="wizard-cards">','<div class="wizard-card-container">',"</div>",'<div class="wizard-modal-footer">','<div class="wizard-buttons-container">','<button class="btn wizard-cancel wizard-close" type="button">Cancel</button>','<div class="btn-group-single pull-right">','<button class="btn wizard-back" type="button">Back</button>','<button class="btn btn-primary wizard-next" type="button">Next</button>',"</div>","</div>","</div>","</div>","</form>","</div>"];this.args={submitUrl:"",width:750,showCancel:!1,progressBarCurrent:!1,increaseHeight:0,buttons:{cancelText:"Cancel",nextText:"Next",backText:"Back",submitText:"Submit",submittingText:"Submitting..."}},t.extend(this.args,n||{}),this.markup=t(e),this.submitCards=this.markup.find(".wizard-error,.wizard-failure,.wizard-success,.wizard-loading"),this.el=t(i.join("\n")),this.el.find(".wizard-card-container").append(this.markup.find(".wizard-card")).append(this.submitCards),t("body").append(this.el),this.closeButton=this.el.find("button.wizard-close"),this.footer=this.el.find(".wizard-modal-footer"),this.cancelButton=this.footer.find(".wizard-cancel"),this.backButton=this.footer.find(".wizard-back"),this.nextButton=this.footer.find(".wizard-next"),this.progress=this.el.find(".progress"),this._cards=[],this.cards={},this._readyToSubmit=!1,this.percentComplete=0,this._submitting=!1,this._events={},this._firstShow=!0,this._createCards(),this.nextButton.click(this,this._handleNextClick),this.backButton.click(this,this._handleBackClick),this.cancelButton.text(this.args.buttons.cancelText),this.backButton.text(this.args.buttons.backText),this.nextButton.text(this.args.buttons.nextText);var r=360,o=r+this.args.increaseHeight;this.el.find(".wizard-nav-container").css("height",o),this.el.find(".wizard-steps").css("height",o+65+"px"),this.el.find(".wizard-card").css("height",o-60+"px"),this.submitCards.css("height",o-60+"px"),this.el.css("margin-top",-(this.el.height()/2)),this.el.css("width",this.args.width),this.el.css("margin-left",-(this.args.width/2));var s=this;this.closeButton.click(function(){s.reset(),s.close(),s.trigger("closed")}),this.el.find(".wizard-steps").on("click","li.already-visited a.wizard-nav-link",this,function(e){var n=parseInt(t(e.target).data("navindex"));e.data.setCard(n)});var a=this.markup.children("h1").first();a.length&&this.setTitle(a.text()),this.on("submit",this._defaultSubmit)},Wizard.prototype={errorPopover:function(t,e){this.log("launching popover on",t);var n=t.popover({content:e,trigger:"manual"}).popover("show").next(".popover");return n.addClass("error-popover"),n},destroyPopover:function(e){e=t(e),e.parent(".control-group").toggleClass("error",!1);var n=e.prev();try{n.popover("destroy")}catch(i){n.popover("hide")}},hidePopovers:function(){this.log("hiding all popovers");var t=this;this.el.find(".error-popover").each(function(e,n){t.destroyPopover(n)})},eachCard:function(e){return t.each(this._cards,e),this},getActiveCard:function(){this.log("getting active card");var e=null;return t.each(this._cards,function(t,n){return n.isActive()?(e=n,!1):void 0}),e?this.log("found active card",e):this.log("couldn't find an active card"),e},setTitle:function(t){return this.log("setting title to",t),this.el.find(".wizard-title").first().text(t),this},setSubtitle:function(t){return this.log("setting subtitle to",t),this.el.find(".wizard-subtitle").first().text(t),this},changeNextButton:function(t,e){return this.log("changing next button, text: "+t,"class: "+e),"undefined"!=typeof e&&this.nextButton.removeClass("btn-success btn-primary"),e&&this.nextButton.addClass(e),this.nextButton.text(t),this},hide:function(){return this.log("hiding"),this.el.modal("hide"),this},close:function(){return this.log("closing"),this.el.modal("hide"),this},show:function(t){return this.log("showing"),this._firstShow&&(this.setCard(0),this._firstShow=!1),this.args.showCancel&&this.cancelButton.show(),this.el.modal(t),this},on:function(t,e){return this.log("adding listener to event "+t),this._events[t]=e,this},trigger:function(){var t=arguments[0],e=Array.prototype.slice.call(arguments);e.shift(),e.unshift(this),this.log("firing event "+t);var n=this._events[t],i=null;return"function"==typeof n?(this.log("found event handler, calling "+t),i=n.apply(this,e)):this.log("couldn't find an event handler for "+t),i},reset:function(){return this.log("resetting"),this.updateProgressBar(0),this.hideSubmitCards(),this.setCard(0),this.lockCards(),this.enableNextButton(),this.showButtons(),this.hidePopovers(),this.trigger("reset"),this},log:function(){if(window.console&&t.fn.wizard.logging){var e="wizard "+this.el.id+": ",n=[e];n.push.apply(n,arguments),console.log.apply(console,n)}},_abstractIncrementStep:function(t,e){var n,i=this.getActiveCard();if(i)for(this.log("searching for valid next card");;){if(n=e(i)){if(this.log("looking at card",n.index),n.isDisabled()){this.log("card "+n.index+" is disabled/locked, continuing"),i=n;continue}return this.setCard(i.index+t)}this.log("next card is not defined, breaking");break}else this.log("current card is undefined")},incrementCard:function(){this.log("incrementing card");var t=this._abstractIncrementStep(1,function(t){return t.next});return this.trigger("incrementCard"),t},decrementCard:function(){this.log("decrementing card");var t=this._abstractIncrementStep(-1,function(t){return t.prev});return this.trigger("decrementCard"),t},setCard:function(t){this.log("setting card to "+t),this.hideSubmitCards();var e=this.getActiveCard();if(this._submitting)return this.log("we're submitting the wizard already, can't change cards"),e;var n=this._cards[t];if(n){if(n.isDisabled())return this.log("new card is currently disabled, returning"),e;if(e){if(t>e.index){for(var i=e,r=!1;i.index!=n.index;){if(i.index!=e.index&&(i.prev.deselect(),i.prev.markVisited(),i.select()),r=i.validate(),!r)return i;i=i.next}i.prev.deselect(),i.prev.markVisited()}e.deselect(),e.markVisited()}if(n.select(),this.args.progressBarCurrent)this.percentComplete=100*t/this._cards.length,this.updateProgressBar(this.percentComplete);else{var o=this.percentComplete;this.percentComplete=100*t/this._cards.length,this.percentComplete=Math.max(o,this.percentComplete),this.updateProgressBar(this.percentComplete)}return n}this.log("couldn't find card "+t)},updateProgressBar:function(t){this.log("updating progress to "+t+"%"),this.progress.find(".bar").css({width:t+"%"}),this.percentComplete=t,this.trigger("progressBar",t),100==t?(this.log("progress is 100, animating progress bar"),this.progress.addClass("active")):0==t&&(this.log("progress is 0, disabling animation"),this.progress.removeClass("active"))},getNextCard:function(){var t=this.getActiveCard();return t?t.next:void 0},lockCards:function(){return this.log("locking nav cards"),this.eachCard(function(t,e){e.unmarkVisited()}),this},disableCards:function(){return this.log("disabling all nav cards"),this.eachCard(function(t,e){e.disable()}),this},enableCards:function(){return this.log("enabling all nav cards"),this.eachCard(function(t,e){e.enable()}),this},hideCards:function(){return this.log("hiding cards"),this.eachCard(function(t,e){e.deselect()}),this.hideSubmitCards(),this},hideButtons:function(){return this.log("hiding buttons"),this.cancelButton.hide(),this.nextButton.hide(),this.backButton.hide(),this},showButtons:function(){return this.log("showing buttons"),this.args.showCancel&&this.cancelButton.show(),this.nextButton.show(),this.backButton.show(),this},getCard:function(e){var n=t(e).parents(".wizard-card").first()[0];if(n){var i=null;return this.eachCard(function(t,e){return n==e.el[0]?(i=e,!1):!0}),i}return null},_createCards:function(){var n=null,i=null,r=null,o=this,s=this,a=this.el.find(".wizard-cards .wizard-card");t.each(a,function(a,l){l=t(l),n=r,r=new e(o,l,a,n,i),s._cards.push(r),r.name&&(s.cards[r.name]=r),n&&(n.next=r),s.el.find(".wizard-steps .nav-list").append(r.nav)})},showSubmitCard:function(t){this.log("showing "+t+" submit card");var e=this.el.find(".wizard-"+t);e.length?(this.hideCards(),this.el.find(".wizard-"+t).show()):this.log("couldn't find submit card "+t)},hideSubmitCard:function(t){this.log("hiding "+t+" submit card"),this.el.find(".wizard-"+t).hide()},hideSubmitCards:function(){var e=this;t.each(["success","error","failure","loading"],function(t,n){e.hideSubmitCard(n)})},enableNextButton:function(){return this.log("enabling next button"),this.nextButton.removeAttr("disabled"),this},disableNextButton:function(){return this.log("disabling next button"),this.nextButton.attr("disabled","disabled"),this},serializeArray:function(){var t=this.el.children("form").first();return t.serializeArray()},serialize:function(){var t=this.el.children("form").first();return t.serialize()},submitSuccess:function(){this.log("submit success"),this._submitting=!1,this.showSubmitCard("success"),this.trigger("submitSuccess")},submitFailure:function(){this.log("submit failure"),this._submitting=!1,this.showSubmitCard("failure"),this.trigger("submitFailure")},submitError:function(){this.log("submit error"),this._submitting=!1,this.showSubmitCard("error"),this.trigger("submitError")},_submit:function(){this.log("submitting wizard"),this._submitting=!0,this.lockCards(),this.cancelButton.hide(),this.backButton.hide(),this.showSubmitCard("loading"),this.updateProgressBar(100),this.changeNextButton(this.args.buttons.submittingText,!1),this.disableNextButton(),this.trigger("submit"),this.trigger("loading")},_onNextClick:function(){this.log("handling 'next' button click");var t=this.getActiveCard();this._readyToSubmit&&t.validate()?this._submit():t=this.incrementCard()},_onBackClick:function(){this.log("handling 'back' button click"),this.decrementCard()},_handleNextClick:function(t){var e=t.data;e._onNextClick.call(e)},_handleBackClick:function(t){var e=t.data;e._onBackClick.call(e)},_defaultSubmit:function(e){t.ajax({type:"POST",url:e.args.submitUrl,data:e.serialize(),dataType:"json",success:function(){e.submitSuccess(),e.hideButtons(),e.updateProgressBar(0)},error:function(){e.submitFailure(),e.hideButtons()}})}}}(window.jQuery),/**
 * @license
 *
 * chroma.js - JavaScript library for color conversions
 * 
 * Copyright (c) 2011-2013, Gregor Aisch
 * All rights reserved.
 * 
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 * 
 * 1. Redistributions of source code must retain the above copyright notice, this
 * list of conditions and the following disclaimer.
 * 
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 * this list of conditions and the following disclaimer in the documentation
 * and/or other materials provided with the distribution.
 * 
 * 3. The name Gregor Aisch may not be used to endorse or promote products
 * derived from this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/
function(){var t,e,n,i,r,o,s,a,l,u,c,h,p,f,d,m,g,v,y,b,w,_,x,S,k,C,E,T,M,P,A,O,N,D,I,L,$,z,R;u=function(e,n,i,r){return new t(e,n,i,r)},"undefined"!=typeof module&&null!==module&&null!=module.exports&&(module.exports=u),"function"==typeof define&&define.amd?define([],function(){return u}):(D="undefined"!=typeof exports&&null!==exports?exports:this,D.chroma=u),u.color=function(e,n,i,r){return new t(e,n,i,r)},u.hsl=function(e,n,i,r){return new t(e,n,i,r,"hsl")},u.hsv=function(e,n,i,r){return new t(e,n,i,r,"hsv")},u.rgb=function(e,n,i,r){return new t(e,n,i,r,"rgb")},u.hex=function(e){return new t(e)},u.css=function(e){return new t(e)},u.lab=function(e,n,i){return new t(e,n,i,"lab")},u.lch=function(e,n,i){return new t(e,n,i,"lch")},u.hsi=function(e,n,i){return new t(e,n,i,"hsi")},u.gl=function(e,n,i,r){return new t(255*e,255*n,255*i,r,"gl")},u.interpolate=function(e,n,i,r){return null==e||null==n?"#000":("string"===I(e)&&(e=new t(e)),"string"===I(n)&&(n=new t(n)),e.interpolate(i,n,r))},u.mix=u.interpolate,u.contrast=function(e,n){var i,r;return"string"===I(e)&&(e=new t(e)),"string"===I(n)&&(n=new t(n)),i=e.luminance(),r=n.luminance(),i>r?(i+.05)/(r+.05):(r+.05)/(i+.05)},u.luminance=function(t){return u(t).luminance()},u._Color=t,/**
      chroma.js
  
      Copyright (c) 2011-2013, Gregor Aisch
      All rights reserved.
  
      Redistribution and use in source and binary forms, with or without
      modification, are permitted provided that the following conditions are met:
  
      * Redistributions of source code must retain the above copyright notice, this
        list of conditions and the following disclaimer.
  
      * Redistributions in binary form must reproduce the above copyright notice,
        this list of conditions and the following disclaimer in the documentation
        and/or other materials provided with the distribution.
  
      * The name Gregor Aisch may not be used to endorse or promote products
        derived from this software without specific prior written permission.
  
      THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
      AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
      IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
      DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
      INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
      BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
      DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
      OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
      NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
      EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  
      @source: https://github.com/gka/chroma.js
  */
t=function(){function t(){var t,e,n,i,r,o,s,a,l,u,h,p,f,y,w;for(r=this,n=[],u=0,h=arguments.length;h>u;u++)e=arguments[u],null!=e&&n.push(e);if(0===n.length)p=[255,0,255,1,"rgb"],s=p[0],a=p[1],l=p[2],t=p[3],i=p[4];else if("array"===I(n[0])){if(3===n[0].length)f=n[0],s=f[0],a=f[1],l=f[2],t=1;else{if(4!==n[0].length)throw"unknown input argument";y=n[0],s=y[0],a=y[1],l=y[2],t=y[3]}i=n[1]}else"string"===I(n[0])?(s=n[0],i="hex"):"object"===I(n[0])?(w=n[0]._rgb,s=w[0],a=w[1],l=w[2],t=w[3],i="rgb"):n.length>=3&&(s=n[0],a=n[1],l=n[2]);3===n.length?(i="rgb",t=1):4===n.length?"string"===I(n[3])?(i=n[3],t=1):"number"===I(n[3])&&(i="rgb",t=n[3]):5===n.length&&(t=n[3],i=n[4]),null==t&&(t=1),"rgb"===i?r._rgb=[s,a,l,t]:"gl"===i?r._rgb=[255*s,255*a,255*l,t]:"hsl"===i?(r._rgb=g(s,a,l),r._rgb[3]=t):"hsv"===i?(r._rgb=v(s,a,l),r._rgb[3]=t):"hex"===i?r._rgb=d(s):"lab"===i?(r._rgb=b(s,a,l),r._rgb[3]=t):"lch"===i?(r._rgb=x(s,a,l),r._rgb[3]=t):"hsi"===i&&(r._rgb=m(s,a,l),r._rgb[3]=t),o=c(r._rgb)}return t.prototype.rgb=function(){return this._rgb.slice(0,3)},t.prototype.rgba=function(){return this._rgb},t.prototype.hex=function(){return E(this._rgb)},t.prototype.toString=function(){return this.name()},t.prototype.hsl=function(){return M(this._rgb)},t.prototype.hsv=function(){return P(this._rgb)},t.prototype.lab=function(){return A(this._rgb)},t.prototype.lch=function(){return O(this._rgb)},t.prototype.hsi=function(){return T(this._rgb)},t.prototype.gl=function(){return[this._rgb[0]/255,this._rgb[1]/255,this._rgb[2]/255,this._rgb[3]]},t.prototype.luminance=function(){return k(this._rgb)},t.prototype.name=function(){var t,e;t=this.hex();for(e in u.colors)if(t===u.colors[e])return e;return t},t.prototype.alpha=function(t){return arguments.length?(this._rgb[3]=t,this):this._rgb[3]},t.prototype.css=function(t){var e,n,i,r;return null==t&&(t="rgb"),n=this,i=n._rgb,3===t.length&&i[3]<1&&(t+="a"),"rgb"===t?t+"("+i.slice(0,3).join(",")+")":"rgba"===t?t+"("+i.join(",")+")":"hsl"===t||"hsla"===t?(e=n.hsl(),r=function(t){return Math.round(100*t)/100},e[0]=r(e[0]),e[1]=r(100*e[1])+"%",e[2]=r(100*e[2])+"%",4===t.length&&(e[3]=i[3]),t+"("+e.join(",")+")"):void 0},t.prototype.interpolate=function(e,n,i){var r,o,s,a,l,u,c,h,p,f,d,m,g,v;if(h=this,null==i&&(i="rgb"),"string"===I(n)&&(n=new t(n)),"hsl"===i||"hsv"===i||"lch"===i||"hsi"===i)"hsl"===i?(g=h.hsl(),v=n.hsl()):"hsv"===i?(g=h.hsv(),v=n.hsv()):"hsi"===i?(g=h.hsi(),v=n.hsi()):"lch"===i&&(g=h.lch(),v=n.lch()),"h"===i.substr(0,1)?(s=g[0],d=g[1],u=g[2],a=v[0],m=v[1],c=v[2]):(u=g[0],d=g[1],s=g[2],c=v[0],m=v[1],a=v[2]),isNaN(s)||isNaN(a)?isNaN(s)?isNaN(a)?o=Number.NaN:(o=a,(1===u||0===u)&&(f=m)):(o=s,(1===c||0===c)&&(f=d)):(r=a>s&&a-s>180?a-(s+360):s>a&&s-a>180?a+360-s:a-s,o=s+e*r),null==f&&(f=d+e*(m-d)),l=u+e*(c-u),p="h"===i.substr(0,1)?new t(o,f,l,i):new t(l,f,o,i);else if("rgb"===i)g=h._rgb,v=n._rgb,p=new t(g[0]+e*(v[0]-g[0]),g[1]+e*(v[1]-g[1]),g[2]+e*(v[2]-g[2]),i);else{if("lab"!==i)throw"color mode "+i+" is not supported";g=h.lab(),v=n.lab(),p=new t(g[0]+e*(v[0]-g[0]),g[1]+e*(v[1]-g[1]),g[2]+e*(v[2]-g[2]),i)}return p.alpha(h.alpha()+e*(n.alpha()-h.alpha())),p},t.prototype.premultiply=function(){var t,e;return e=this.rgb(),t=this.alpha(),u(e[0]*t,e[1]*t,e[2]*t,t)},t.prototype.darken=function(t){var e,n;return null==t&&(t=20),n=this,e=n.lch(),e[0]-=t,u.lch(e).alpha(n.alpha())},t.prototype.darker=function(t){return this.darken(t)},t.prototype.brighten=function(t){return null==t&&(t=20),this.darken(-t)},t.prototype.brighter=function(t){return this.brighten(t)},t.prototype.saturate=function(t){var e,n;return null==t&&(t=20),n=this,e=n.lch(),e[1]+=t,u.lch(e).alpha(n.alpha())},t.prototype.desaturate=function(t){return null==t&&(t=20),this.saturate(-t)},t}(),c=function(t){var e;for(e in t)3>e?(t[e]<0&&(t[e]=0),t[e]>255&&(t[e]=255)):3===e&&(t[e]<0&&(t[e]=0),t[e]>1&&(t[e]=1));return t},f=function(t){var e,n,i,r,o,s,a,l;if(null!=u.colors&&u.colors[t])return d(u.colors[t]);if(i=t.match(/rgb\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*\)/)){for(r=i.slice(1,4),n=o=0;2>=o;n=++o)r[n]=+r[n];r[3]=1}else if(i=t.match(/rgba\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*,\s*([01]|[01]?\.\d+)\)/))for(r=i.slice(1,5),n=s=0;3>=s;n=++s)r[n]=+r[n];else if(i=t.match(/rgb\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/)){for(r=i.slice(1,4),n=a=0;2>=a;n=++a)r[n]=Math.round(2.55*r[n]);r[3]=1}else if(i=t.match(/rgba\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/)){for(r=i.slice(1,5),n=l=0;2>=l;n=++l)r[n]=Math.round(2.55*r[n]);r[3]=+r[3]}else(i=t.match(/hsl\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/))?(e=i.slice(1,4),e[1]*=.01,e[2]*=.01,r=g(e),r[3]=1):(i=t.match(/hsla\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/))&&(e=i.slice(1,4),e[1]*=.01,e[2]*=.01,r=g(e),r[3]=+i[4]);return r},d=function(t){var e,n,i,r,o,s;if(t.match(/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/))return(4===t.length||7===t.length)&&(t=t.substr(1)),3===t.length&&(t=t.split(""),t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),s=parseInt(t,16),r=s>>16,i=255&s>>8,n=255&s,[r,i,n,1];if(t.match(/^#?([A-Fa-f0-9]{8})$/))return 9===t.length&&(t=t.substr(1)),s=parseInt(t,16),r=255&s>>24,i=255&s>>16,n=255&s>>8,e=255&s,[r,i,n,e];if(o=f(t))return o;throw"unknown color: "+t},m=function(t,e,r){var o,s,a,l;return l=L(arguments),t=l[0],e=l[1],r=l[2],t/=360,1/3>t?(o=(1-e)/3,a=(1+e*p(i*t)/p(n-i*t))/3,s=1-(o+a)):2/3>t?(t-=1/3,a=(1-e)/3,s=(1+e*p(i*t)/p(n-i*t))/3,o=1-(a+s)):(t-=2/3,s=(1-e)/3,o=(1+e*p(i*t)/p(n-i*t))/3,a=1-(s+o)),a=S(3*r*a),s=S(3*r*s),o=S(3*r*o),[255*a,255*s,255*o]},g=function(){var t,e,n,i,r,o,s,a,l,u,c,h,p,f;if(p=L(arguments),i=p[0],a=p[1],o=p[2],0===a)s=n=t=255*o;else{for(c=[0,0,0],e=[0,0,0],u=.5>o?o*(1+a):o+a-o*a,l=2*o-u,i/=360,c[0]=i+1/3,c[1]=i,c[2]=i-1/3,r=h=0;2>=h;r=++h)c[r]<0&&(c[r]+=1),c[r]>1&&(c[r]-=1),e[r]=6*c[r]<1?l+6*(u-l)*c[r]:2*c[r]<1?u:3*c[r]<2?l+6*(u-l)*(2/3-c[r]):l;f=[Math.round(255*e[0]),Math.round(255*e[1]),Math.round(255*e[2])],s=f[0],n=f[1],t=f[2]}return[s,n,t]},v=function(){var t,e,n,i,r,o,s,a,l,u,c,h,p,f,d,m,g,v;if(h=L(arguments),i=h[0],l=h[1],c=h[2],c*=255,0===l)a=n=t=c;else switch(360===i&&(i=0),i>360&&(i-=360),0>i&&(i+=360),i/=60,r=Math.floor(i),e=i-r,o=c*(1-l),s=c*(1-l*e),u=c*(1-l*(1-e)),r){case 0:p=[c,u,o],a=p[0],n=p[1],t=p[2];break;case 1:f=[s,c,o],a=f[0],n=f[1],t=f[2];break;case 2:d=[o,c,u],a=d[0],n=d[1],t=d[2];break;case 3:m=[o,s,c],a=m[0],n=m[1],t=m[2];break;case 4:g=[u,o,c],a=g[0],n=g[1],t=g[2];break;case 5:v=[c,o,s],a=v[0],n=v[1],t=v[2]}return a=Math.round(a),n=Math.round(n),t=Math.round(t),[a,n,t]},e=18,r=.95047,o=1,s=1.08883,y=function(){var t,e,n,i,r,o;return o=L(arguments),r=o[0],t=o[1],e=o[2],n=Math.sqrt(t*t+e*e),i=180*(Math.atan2(e,t)/Math.PI),[r,n,i]},b=function(t,e,n){var i,a,l,u,c,h,p;return void 0!==t&&3===t.length&&(h=t,t=h[0],e=h[1],n=h[2]),void 0!==t&&3===t.length&&(p=t,t=p[0],e=p[1],n=p[2]),u=(t+16)/116,l=u+e/500,c=u-n/200,l=w(l)*r,u=w(u)*o,c=w(c)*s,a=z(3.2404542*l-1.5371385*u-.4985314*c),i=z(-.969266*l+1.8760108*u+.041556*c),n=z(.0556434*l-.2040259*u+1.0572252*c),[S(a,0,255),S(i,0,255),S(n,0,255),1]},w=function(t){return t>.206893034?t*t*t:(t-4/29)/7.787037},z=function(t){return Math.round(255*(.00304>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055))},_=function(){var t,e,n,i;return i=L(arguments),n=i[0],t=i[1],e=i[2],e=e*Math.PI/180,[n,Math.cos(e)*t,Math.sin(e)*t]},x=function(t,e,n){var i,r,o,s,a,l,u;return l=_(t,e,n),i=l[0],r=l[1],o=l[2],u=b(i,r,o),a=u[0],s=u[1],o=u[2],[S(a,0,255),S(s,0,255),S(o,0,255)]},k=function(t,e,n){var i;return i=L(arguments),t=i[0],e=i[1],n=i[2],t=C(t),e=C(e),n=C(n),.2126*t+.7152*e+.0722*n},C=function(t){return t/=255,.03928>=t?t/12.92:Math.pow((t+.055)/1.055,2.4)},E=function(){var t,e,n,i,r,o;return o=L(arguments),n=o[0],e=o[1],t=o[2],r=n<<16|e<<8|t,i="000000"+r.toString(16),"#"+i.substr(i.length-6)},T=function(){var t,e,n,i,r,o,s,a,l;return l=L(arguments),s=l[0],n=l[1],e=l[2],t=2*Math.PI,s/=255,n/=255,e/=255,o=Math.min(s,n,e),r=(s+n+e)/3,a=1-o/r,0===a?i=0:(i=(s-n+(s-e))/2,i/=Math.sqrt((s-n)*(s-n)+(s-e)*(n-e)),i=Math.acos(i),e>n&&(i=t-i),i/=t),[360*i,a,r]},M=function(t,e,n){var i,r,o,s,a,l;return void 0!==t&&t.length>=3&&(l=t,t=l[0],e=l[1],n=l[2]),t/=255,e/=255,n/=255,s=Math.min(t,e,n),o=Math.max(t,e,n),r=(o+s)/2,o===s?(a=0,i=Number.NaN):a=.5>r?(o-s)/(o+s):(o-s)/(2-o-s),t===o?i=(e-n)/(o-s):e===o?i=2+(n-t)/(o-s):n===o&&(i=4+(t-e)/(o-s)),i*=60,0>i&&(i+=360),[i,a,r]},P=function(){var t,e,n,i,r,o,s,a,l,u;return u=L(arguments),s=u[0],n=u[1],t=u[2],o=Math.min(s,n,t),r=Math.max(s,n,t),e=r-o,l=r/255,0===r?(i=Number.NaN,a=0):(a=e/r,s===r&&(i=(n-t)/e),n===r&&(i=2+(t-s)/e),t===r&&(i=4+(s-n)/e),i*=60,0>i&&(i+=360)),[i,a,l]},A=function(){var t,e,n,i,a,l,u;return u=L(arguments),n=u[0],e=u[1],t=u[2],n=N(n),e=N(e),t=N(t),i=$((.4124564*n+.3575761*e+.1804375*t)/r),a=$((.2126729*n+.7151522*e+.072175*t)/o),l=$((.0193339*n+.119192*e+.9503041*t)/s),[116*a-16,500*(i-a),200*(a-l)]},N=function(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)},$=function(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29},O=function(){var t,e,n,i,r,o,s;return o=L(arguments),r=o[0],n=o[1],e=o[2],s=A(r,n,e),i=s[0],t=s[1],e=s[2],y(i,t,e)},/*
      chroma.js
  
      Copyright (c) 2011-2013, Gregor Aisch
      All rights reserved.
  
      Redistribution and use in source and binary forms, with or without
      modification, are permitted provided that the following conditions are met:
  
      * Redistributions of source code must retain the above copyright notice, this
        list of conditions and the following disclaimer.
  
      * Redistributions in binary form must reproduce the above copyright notice,
        this list of conditions and the following disclaimer in the documentation
        and/or other materials provided with the distribution.
  
      * The name Gregor Aisch may not be used to endorse or promote products
        derived from this software without specific prior written permission.
  
      THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
      AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
      IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
      DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
      INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
      BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
      DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
      OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
      NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
      EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  
      @source: https://github.com/gka/chroma.js
  */
u.scale=function(t,e){var n,i,r,o,s,a,l,c,h,p,f,d,m,g,v,y,b,w,_,x,S;return y="rgb",b=u("#ccc"),S=0,m=!1,d=[0,1],p=[],_=!1,x=[],v=0,g=1,f=!1,w=0,h={},a=function(t,e){var n,i,r,o,a,l,c;if(null==t&&(t=["#ddd","#222"]),null!=t&&"string"===I(t)&&null!=(null!=(a=u.brewer)?a[t]:void 0)&&(t=u.brewer[t]),"array"===I(t)){for(t=t.slice(0),n=r=0,l=t.length-1;l>=0?l>=r:r>=l;n=l>=0?++r:--r)i=t[n],"string"===I(i)&&(t[n]=u(i));if(null!=e)x=e;else for(x=[],n=o=0,c=t.length-1;c>=0?c>=o:o>=c;n=c>=0?++o:--o)x.push(n/(t.length-1))}return s(),p=t},l=function(t){return null==t&&(t=[]),d=t,v=t[0],g=t[t.length-1],s(),w=2===t.length?0:t.length-1},r=function(t){var e,n;if(null!=d){for(n=d.length-1,e=0;n>e&&t>=d[e];)e++;return e-1}return 0},c=function(t){return t},n=function(t){var e,n,i,o,s;return s=t,d.length>2&&(o=d.length-1,e=r(t),i=d[0]+(d[1]-d[0])*(0+.5*S),n=d[o-1]+(d[o]-d[o-1])*(1-.5*S),s=v+(d[e]+.5*(d[e+1]-d[e])-i)/(n-i)*(g-v)),s},o=function(t,e){var n,i,o,s,a,l,f,m,_;if(null==e&&(e=!1),isNaN(t))return b;if(e?f=t:d.length>2?(n=r(t),f=n/(w-1)):(f=o=(t-v)/(g-v),f=Math.min(1,Math.max(0,f))),e||(f=c(f)),a=Math.floor(1e4*f),h[a])i=h[a];else{if("array"===I(p))for(s=m=0,_=x.length-1;_>=0?_>=m:m>=_;s=_>=0?++m:--m){if(l=x[s],l>=f){i=p[s];break}if(f>=l&&s===x.length-1){i=p[s];break}if(f>l&&f<x[s+1]){f=(f-l)/(x[s+1]-l),i=u.interpolate(p[s],p[s+1],f,y);break}}else"function"===I(p)&&(i=p(f));h[a]=i}return i},s=function(){return h={}},a(t,e),i=function(t){var e;return e=o(t),_&&e[_]?e[_]():e},i.domain=function(t,e,n,r){var o;return null==n&&(n="e"),arguments.length?(null!=e&&(o=u.analyze(t,r),t=0===e?[o.min,o.max]:u.limits(o,n,e)),l(t),i):d},i.mode=function(t){return arguments.length?(y=t,s(),i):y},i.range=function(t,e){return a(t,e),i},i.out=function(t){return _=t,i},i.spread=function(t){return arguments.length?(S=t,i):S},i.correctLightness=function(t){return arguments.length?(f=t,s(),c=f?function(t){var e,n,i,r,s,a,l,u,c;for(e=o(0,!0).lab()[0],n=o(1,!0).lab()[0],l=e>n,i=o(t,!0).lab()[0],s=e+(n-e)*t,r=i-s,u=0,c=1,a=20;Math.abs(r)>.01&&a-->0;)!function(){return l&&(r*=-1),0>r?(u=t,t+=.5*(c-t)):(c=t,t+=.5*(u-t)),i=o(t,!0).lab()[0],r=i-s}();return t}:function(t){return t},i):f},i.colors=function(e){var n,r,o,s,a,l;if(null==e&&(e="hex"),t=[],r=[],d.length>2)for(n=o=1,l=d.length;l>=1?l>o:o>l;n=l>=1?++o:--o)r.push(.5*(d[n-1]+d[n]));else r=d;for(s=0,a=r.length;a>s;s++)n=r[s],t.push(i(n)[e]());return t},i},null==(R=u.scales)&&(u.scales={}),u.scales.cool=function(){return u.scale([u.hsl(180,1,.9),u.hsl(250,.7,.4)])},u.scales.hot=function(){return u.scale(["#000","#f00","#ff0","#fff"],[0,.25,.75,1]).mode("rgb")},/*
      chroma.js
  
      Copyright (c) 2011-2013, Gregor Aisch
      All rights reserved.
  
      Redistribution and use in source and binary forms, with or without
      modification, are permitted provided that the following conditions are met:
  
      * Redistributions of source code must retain the above copyright notice, this
        list of conditions and the following disclaimer.
  
      * Redistributions in binary form must reproduce the above copyright notice,
        this list of conditions and the following disclaimer in the documentation
        and/or other materials provided with the distribution.
  
      * The name Gregor Aisch may not be used to endorse or promote products
        derived from this software without specific prior written permission.
  
      THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
      AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
      IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
      DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
      INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
      BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
      DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
      OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
      NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
      EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  
      @source: https://github.com/gka/chroma.js
  */
u.analyze=function(t,e,n){var i,r,o,s,a,l,c;if(o={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0},null==n&&(n=function(){return!0}),i=function(t){null==t||isNaN(t)||(o.values.push(t),o.sum+=t,t<o.min&&(o.min=t),t>o.max&&(o.max=t),o.count+=1)},a=function(t,r){return n(t,r)?null!=e&&"function"===I(e)?i(e(t)):null!=e&&"string"===I(e)||"number"===I(e)?i(t[e]):i(t):void 0},"array"===I(t))for(l=0,c=t.length;c>l;l++)s=t[l],a(s);else for(r in t)s=t[r],a(s,r);return o.domain=[o.min,o.max],o.limits=function(t,e){return u.limits(o,t,e)},o},u.limits=function(t,e,n){var i,r,o,s,a,l,c,h,p,f,d,m,g,v,y,b,w,_,x,S,k,C,E,T,M,P,A,O,N,D,I,L,$,z,R,B,F,V,j,U,H,q,W,J,Y,K,G,X,Q,Z,te,ee,ne,ie,re,oe;if(null==e&&(e="equal"),null==n&&(n=7),null==t.values&&(t=u.analyze(t)),g=t.min,d=t.max,E=t.sum,P=t.values.sort(function(t,e){return t-e}),f=[],"c"===e.substr(0,1)&&(f.push(g),f.push(d)),"e"===e.substr(0,1)){for(f.push(g),c=A=1,F=n-1;F>=1?F>=A:A>=F;c=F>=1?++A:--A)f.push(g+c/n*(d-g));f.push(d)}else if("l"===e.substr(0,1)){if(0>=g)throw"Logarithmic scales are only possible for values > 0";for(v=Math.LOG10E*Math.log(g),m=Math.LOG10E*Math.log(d),f.push(g),c=O=1,J=n-1;J>=1?J>=O:O>=J;c=J>=1?++O:--O)f.push(Math.pow(10,v+c/n*(m-v)));f.push(d)}else if("q"===e.substr(0,1)){for(f.push(g),c=N=1,Y=n-1;Y>=1?Y>=N:N>=Y;c=Y>=1?++N:--N)x=P.length*c/n,S=Math.floor(x),S===x?f.push(P[S]):(k=x-S,f.push(P[S]*k+P[S+1]*(1-k)));f.push(d)}else if("k"===e.substr(0,1)){for(b=P.length,i=new Array(b),a=new Array(n),C=!0,w=0,o=null,o=[],o.push(g),c=D=1,K=n-1;K>=1?K>=D:D>=K;c=K>=1?++D:--D)o.push(g+c/n*(d-g));for(o.push(d);C;){for(h=I=0,G=n-1;G>=0?G>=I:I>=G;h=G>=0?++I:--I)a[h]=0;for(c=L=0,X=b-1;X>=0?X>=L:L>=X;c=X>=0?++L:--L){for(M=P[c],y=Number.MAX_VALUE,h=$=0,Q=n-1;Q>=0?Q>=$:$>=Q;h=Q>=0?++$:--$)l=Math.abs(o[h]-M),y>l&&(y=l,r=h);a[r]++,i[c]=r}for(_=new Array(n),h=z=0,Z=n-1;Z>=0?Z>=z:z>=Z;h=Z>=0?++z:--z)_[h]=null;for(c=R=0,te=b-1;te>=0?te>=R:R>=te;c=te>=0?++R:--R)s=i[c],null===_[s]?_[s]=P[c]:_[s]+=P[c];for(h=B=0,V=n-1;V>=0?V>=B:B>=V;h=V>=0?++B:--B)_[h]*=1/a[h];for(C=!1,h=ee=0,j=n-1;j>=0?j>=ee:ee>=j;h=j>=0?++ee:--ee)if(_[h]!==o[c]){C=!0;break}o=_,w++,w>200&&(C=!1)}for(p={},h=ne=0,U=n-1;U>=0?U>=ne:ne>=U;h=U>=0?++ne:--ne)p[h]=[];for(c=ie=0,H=b-1;H>=0?H>=ie:ie>=H;c=H>=0?++ie:--ie)s=i[c],p[s].push(P[c]);for(T=[],h=re=0,q=n-1;q>=0?q>=re:re>=q;h=q>=0?++re:--re)T.push(p[h][0]),T.push(p[h][p[h].length-1]);for(T=T.sort(function(t,e){return t-e}),f.push(T[0]),c=oe=1,W=T.length-1;W>=oe;c=oe+=2)isNaN(T[c])||f.push(T[c])}return f},/**
  	ColorBrewer colors for chroma.js
  
  	Copyright (c) 2002 Cynthia Brewer, Mark Harrower, and The 
  	Pennsylvania State University.
  
  	Licensed under the Apache License, Version 2.0 (the "License"); 
  	you may not use this file except in compliance with the License.
  	You may obtain a copy of the License at	
  	http://www.apache.org/licenses/LICENSE-2.0
  
  	Unless required by applicable law or agreed to in writing, software distributed
  	under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
  	CONDITIONS OF ANY KIND, either express or implied. See the License for the
  	specific language governing permissions and limitations under the License.
  
      @preserve
  */
u.brewer=l={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},u.colors=h={indigo:"#4b0082",gold:"#ffd700",hotpink:"#ff69b4",firebrick:"#b22222",indianred:"#cd5c5c",yellow:"#ffff00",mistyrose:"#ffe4e1",darkolivegreen:"#556b2f",olive:"#808000",darkseagreen:"#8fbc8f",pink:"#ffc0cb",tomato:"#ff6347",lightcoral:"#f08080",orangered:"#ff4500",navajowhite:"#ffdead",lime:"#00ff00",palegreen:"#98fb98",darkslategrey:"#2f4f4f",greenyellow:"#adff2f",burlywood:"#deb887",seashell:"#fff5ee",mediumspringgreen:"#00fa9a",fuchsia:"#ff00ff",papayawhip:"#ffefd5",blanchedalmond:"#ffebcd",chartreuse:"#7fff00",dimgray:"#696969",black:"#000000",peachpuff:"#ffdab9",springgreen:"#00ff7f",aquamarine:"#7fffd4",white:"#ffffff",orange:"#ffa500",lightsalmon:"#ffa07a",darkslategray:"#2f4f4f",brown:"#a52a2a",ivory:"#fffff0",dodgerblue:"#1e90ff",peru:"#cd853f",lawngreen:"#7cfc00",chocolate:"#d2691e",crimson:"#dc143c",forestgreen:"#228b22",darkgrey:"#a9a9a9",lightseagreen:"#20b2aa",cyan:"#00ffff",mintcream:"#f5fffa",silver:"#c0c0c0",antiquewhite:"#faebd7",mediumorchid:"#ba55d3",skyblue:"#87ceeb",gray:"#808080",darkturquoise:"#00ced1",goldenrod:"#daa520",darkgreen:"#006400",floralwhite:"#fffaf0",darkviolet:"#9400d3",darkgray:"#a9a9a9",moccasin:"#ffe4b5",saddlebrown:"#8b4513",grey:"#808080",darkslateblue:"#483d8b",lightskyblue:"#87cefa",lightpink:"#ffb6c1",mediumvioletred:"#c71585",slategrey:"#708090",red:"#ff0000",deeppink:"#ff1493",limegreen:"#32cd32",darkmagenta:"#8b008b",palegoldenrod:"#eee8aa",plum:"#dda0dd",turquoise:"#40e0d0",lightgrey:"#d3d3d3",lightgoldenrodyellow:"#fafad2",darkgoldenrod:"#b8860b",lavender:"#e6e6fa",maroon:"#800000",yellowgreen:"#9acd32",sandybrown:"#f4a460",thistle:"#d8bfd8",violet:"#ee82ee",navy:"#000080",magenta:"#ff00ff",dimgrey:"#696969",tan:"#d2b48c",rosybrown:"#bc8f8f",olivedrab:"#6b8e23",blue:"#0000ff",lightblue:"#add8e6",ghostwhite:"#f8f8ff",honeydew:"#f0fff0",cornflowerblue:"#6495ed",slateblue:"#6a5acd",linen:"#faf0e6",darkblue:"#00008b",powderblue:"#b0e0e6",seagreen:"#2e8b57",darkkhaki:"#bdb76b",snow:"#fffafa",sienna:"#a0522d",mediumblue:"#0000cd",royalblue:"#4169e1",lightcyan:"#e0ffff",green:"#008000",mediumpurple:"#9370db",midnightblue:"#191970",cornsilk:"#fff8dc",paleturquoise:"#afeeee",bisque:"#ffe4c4",slategray:"#708090",darkcyan:"#008b8b",khaki:"#f0e68c",wheat:"#f5deb3",teal:"#008080",darkorchid:"#9932cc",deepskyblue:"#00bfff",salmon:"#fa8072",darkred:"#8b0000",steelblue:"#4682b4",palevioletred:"#db7093",lightslategray:"#778899",aliceblue:"#f0f8ff",lightslategrey:"#778899",lightgreen:"#90ee90",orchid:"#da70d6",gainsboro:"#dcdcdc",mediumseagreen:"#3cb371",lightgray:"#d3d3d3",mediumturquoise:"#48d1cc",lemonchiffon:"#fffacd",cadetblue:"#5f9ea0",lightyellow:"#ffffe0",lavenderblush:"#fff0f5",coral:"#ff7f50",purple:"#800080",aqua:"#00ffff",whitesmoke:"#f5f5f5",mediumslateblue:"#7b68ee",darkorange:"#ff8c00",mediumaquamarine:"#66cdaa",darksalmon:"#e9967a",beige:"#f5f5dc",blueviolet:"#8a2be2",azure:"#f0ffff",lightsteelblue:"#b0c4de",oldlace:"#fdf5e6"},/*
      chroma.js
  
      Copyright (c) 2011-2013, Gregor Aisch
      All rights reserved.
  
      Redistribution and use in source and binary forms, with or without
      modification, are permitted provided that the following conditions are met:
  
      * Redistributions of source code must retain the above copyright notice, this
        list of conditions and the following disclaimer.
  
      * Redistributions in binary form must reproduce the above copyright notice,
        this list of conditions and the following disclaimer in the documentation
        and/or other materials provided with the distribution.
  
      * The name Gregor Aisch may not be used to endorse or promote products
        derived from this software without specific prior written permission.
  
      THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
      AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
      IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
      DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
      INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
      BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
      DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
      OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
      NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
      EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  
      @source: https://github.com/gka/chroma.js
  */
I=function(){var t,e,n,i,r;for(t={},r="Boolean Number String Function Array Date RegExp Undefined Null".split(" "),n=0,i=r.length;i>n;n++)e=r[n],t["[object "+e+"]"]=e.toLowerCase();return function(e){var n;return n=Object.prototype.toString.call(e),t[n]||"object"}}(),S=function(t,e,n){return null==e&&(e=0),null==n&&(n=1),e>t&&(t=e),t>n&&(t=n),t},L=function(t){return t.length>=3?t:t[0]},i=2*Math.PI,n=Math.PI/3,p=Math.cos,a=function(t){var e,n,i,r,o,s,l,c,h,p,f;return t=function(){var e,n,i;for(i=[],e=0,n=t.length;n>e;e++)r=t[e],i.push(u(r));return i}(),2===t.length?(h=function(){var e,n,i;for(i=[],e=0,n=t.length;n>e;e++)r=t[e],i.push(r.lab());return i}(),o=h[0],s=h[1],e=function(t){var e,n;return n=function(){var n,i;for(i=[],e=n=0;2>=n;e=++n)i.push(o[e]+t*(s[e]-o[e]));return i}(),u.lab.apply(u,n)}):3===t.length?(p=function(){var e,n,i;for(i=[],e=0,n=t.length;n>e;e++)r=t[e],i.push(r.lab());return i}(),o=p[0],s=p[1],l=p[2],e=function(t){var e,n;return n=function(){var n,i;for(i=[],e=n=0;2>=n;e=++n)i.push((1-t)*(1-t)*o[e]+2*(1-t)*t*s[e]+t*t*l[e]);return i}(),u.lab.apply(u,n)}):4===t.length?(f=function(){var e,n,i;for(i=[],e=0,n=t.length;n>e;e++)r=t[e],i.push(r.lab());return i}(),o=f[0],s=f[1],l=f[2],c=f[3],e=function(t){var e,n;return n=function(){var n,i;for(i=[],e=n=0;2>=n;e=++n)i.push((1-t)*(1-t)*(1-t)*o[e]+3*(1-t)*(1-t)*t*s[e]+3*(1-t)*t*t*l[e]+t*t*t*c[e]);return i}(),u.lab.apply(u,n)}):5===t.length&&(n=a(t.slice(0,3)),i=a(t.slice(2,5)),e=function(t){return.5>t?n(2*t):i(2*(t-.5))}),e},u.interpolate.bezier=a}.call(this),window.CodeMirror=function(){"use strict";function t(n,i){if(!(this instanceof t))return new t(n,i);this.options=i=i||{};for(var r in so)!i.hasOwnProperty(r)&&so.hasOwnProperty(r)&&(i[r]=so[r]);p(i);var o="string"==typeof i.value?0:i.value.first,s=this.display=e(n,o);s.wrapper.CodeMirror=this,u(this),i.autofocus&&!Fr&&de(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,draggingText:!1,highlight:new Yi},a(this),i.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap");var l=i.value;"string"==typeof l&&(l=new _o(i.value,i.mode)),se(this,fi)(this,l),Tr&&setTimeout(ir(fe,this,!0),20),ge(this);var c;try{c=document.activeElement==s.input}catch(h){}c||i.autofocus&&!Fr?setTimeout(ir(Ie,this),20):Le(this),se(this,function(){for(var t in oo)oo.propertyIsEnumerable(t)&&oo[t](this,i[t],ao);for(var e=0;e<ho.length;++e)ho[e](this)})()}function e(t,e){var n={},i=n.input=sr("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none; font-size: 4px;");return Ar?i.style.width="1000px":i.setAttribute("wrap","off"),Br&&(i.style.border="1px solid black"),i.setAttribute("autocorrect","off"),i.setAttribute("autocapitalize","off"),i.setAttribute("spellcheck","false"),n.inputDiv=sr("div",[i],null,"overflow: hidden; position: relative; width: 3px; height: 0px;"),n.scrollbarH=sr("div",[sr("div",null,null,"height: 1px")],"CodeMirror-hscrollbar"),n.scrollbarV=sr("div",[sr("div",null,null,"width: 1px")],"CodeMirror-vscrollbar"),n.scrollbarFiller=sr("div",null,"CodeMirror-scrollbar-filler"),n.gutterFiller=sr("div",null,"CodeMirror-gutter-filler"),n.lineDiv=sr("div",null,"CodeMirror-code"),n.selectionDiv=sr("div",null,null,"position: relative; z-index: 1"),n.cursor=sr("div"," ","CodeMirror-cursor"),n.otherCursor=sr("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"),n.measure=sr("div",null,"CodeMirror-measure"),n.lineSpace=sr("div",[n.measure,n.selectionDiv,n.lineDiv,n.cursor,n.otherCursor],null,"position: relative; outline: none"),n.mover=sr("div",[sr("div",[n.lineSpace],"CodeMirror-lines")],null,"position: relative"),n.sizer=sr("div",[n.mover],"CodeMirror-sizer"),n.heightForcer=sr("div",null,null,"position: absolute; height: "+Eo+"px; width: 1px;"),n.gutters=sr("div",null,"CodeMirror-gutters"),n.lineGutter=null,n.scroller=sr("div",[n.sizer,n.heightForcer,n.gutters],"CodeMirror-scroll"),n.scroller.setAttribute("tabIndex","-1"),n.wrapper=sr("div",[n.inputDiv,n.scrollbarH,n.scrollbarV,n.scrollbarFiller,n.gutterFiller,n.scroller],"CodeMirror"),Mr&&(n.gutters.style.zIndex=-1,n.scroller.style.paddingRight=0),t.appendChild?t.appendChild(n.wrapper):t(n.wrapper),Br&&(i.style.width="0px"),Ar||(n.scroller.draggable=!0),Lr?(n.inputDiv.style.height="1px",n.inputDiv.style.position="absolute"):Mr&&(n.scrollbarH.style.minWidth=n.scrollbarV.style.minWidth="18px"),n.viewOffset=n.lastSizeC=0,n.showingFrom=n.showingTo=e,n.lineNumWidth=n.lineNumInnerWidth=n.lineNumChars=null,n.prevInput="",n.alignWidgets=!1,n.pollingFast=!1,n.poll=new Yi,n.cachedCharWidth=n.cachedTextHeight=null,n.measureLineCache=[],n.measureLineCachePos=0,n.inaccurateSelection=!1,n.maxLine=null,n.maxLineLength=0,n.maxLineChanged=!1,n.wheelDX=n.wheelDY=n.wheelStartX=n.wheelStartY=null,n}function n(e){e.doc.mode=t.getMode(e.options,e.doc.modeOption),e.doc.iter(function(t){t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null)}),e.doc.frontier=e.doc.first,N(e,100),e.state.modeGen++,e.curOp&&ue(e)}function i(t){t.options.lineWrapping?(t.display.wrapper.className+=" CodeMirror-wrap",t.display.sizer.style.minWidth=""):(t.display.wrapper.className=t.display.wrapper.className.replace(" CodeMirror-wrap",""),h(t)),o(t),ue(t),W(t),setTimeout(function(){f(t)},100)}function r(t){var e=ne(t.display),n=t.options.lineWrapping,i=n&&Math.max(5,t.display.scroller.clientWidth/ie(t.display)-3);return function(r){return Un(t.doc,r)?0:n?(Math.ceil(r.text.length/i)||1)*e:e}}function o(t){var e=t.doc,n=r(t);e.iter(function(t){var e=n(t);e!=t.height&&vi(t,e)})}function s(t){var e=mo[t.options.keyMap],n=e.style;t.display.wrapper.className=t.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(n?" cm-keymap-"+n:""),t.state.disableInput=e.disableInput}function a(t){t.display.wrapper.className=t.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+t.options.theme.replace(/(^|\s)\s*/g," cm-s-"),W(t)}function l(t){u(t),ue(t),setTimeout(function(){m(t)},20)}function u(t){var e=t.display.gutters,n=t.options.gutters;ar(e);for(var i=0;i<n.length;++i){var r=n[i],o=e.appendChild(sr("div",null,"CodeMirror-gutter "+r));"CodeMirror-linenumbers"==r&&(t.display.lineGutter=o,o.style.width=(t.display.lineNumWidth||1)+"px")}e.style.display=i?"":"none"}function c(t,e){if(0==e.height)return 0;for(var n,i=e.text.length,r=e;n=Fn(r);){var o=n.find();r=di(t,o.from.line),i+=o.from.ch-o.to.ch}for(r=e;n=Vn(r);){var o=n.find();i-=r.text.length-o.from.ch,r=di(t,o.to.line),i+=r.text.length-o.to.ch}return i}function h(t){var e=t.display,n=t.doc;e.maxLine=di(n,n.first),e.maxLineLength=c(n,e.maxLine),e.maxLineChanged=!0,n.iter(function(t){var i=c(n,t);i>e.maxLineLength&&(e.maxLineLength=i,e.maxLine=t)})}function p(t){var e=Zi(t.gutters,"CodeMirror-linenumbers");-1==e&&t.lineNumbers?t.gutters=t.gutters.concat(["CodeMirror-linenumbers"]):e>-1&&!t.lineNumbers&&(t.gutters=t.gutters.slice(0),t.gutters.splice(e,1))}function f(t){var e=t.display,n=t.doc.height,i=n+z(e);e.sizer.style.minHeight=e.heightForcer.style.top=i+"px",e.gutters.style.height=Math.max(i,e.scroller.clientHeight-Eo)+"px";var r=Math.max(i,e.scroller.scrollHeight),o=e.scroller.scrollWidth>e.scroller.clientWidth+1,s=r>e.scroller.clientHeight+1;s?(e.scrollbarV.style.display="block",e.scrollbarV.style.bottom=o?pr(e.measure)+"px":"0",e.scrollbarV.firstChild.style.height=r-e.scroller.clientHeight+e.scrollbarV.clientHeight+"px"):(e.scrollbarV.style.display="",e.scrollbarV.firstChild.style.height="0"),o?(e.scrollbarH.style.display="block",e.scrollbarH.style.right=s?pr(e.measure)+"px":"0",e.scrollbarH.firstChild.style.width=e.scroller.scrollWidth-e.scroller.clientWidth+e.scrollbarH.clientWidth+"px"):(e.scrollbarH.style.display="",e.scrollbarH.firstChild.style.width="0"),o&&s?(e.scrollbarFiller.style.display="block",e.scrollbarFiller.style.height=e.scrollbarFiller.style.width=pr(e.measure)+"px"):e.scrollbarFiller.style.display="",o&&t.options.coverGutterNextToScrollbar&&t.options.fixedGutter?(e.gutterFiller.style.display="block",e.gutterFiller.style.height=pr(e.measure)+"px",e.gutterFiller.style.width=e.gutters.offsetWidth+"px"):e.gutterFiller.style.display="",$r&&0===pr(e.measure)&&(e.scrollbarV.style.minWidth=e.scrollbarH.style.minHeight=zr?"18px":"12px",e.scrollbarV.style.pointerEvents=e.scrollbarH.style.pointerEvents="none")}function d(t,e,n){var i=t.scroller.scrollTop,r=t.wrapper.clientHeight;"number"==typeof n?i=n:n&&(i=n.top,r=n.bottom-n.top),i=Math.floor(i-$(t));var o=Math.ceil(i+r);return{from:bi(e,i),to:bi(e,o)}}function m(t){var e=t.display;if(e.alignWidgets||e.gutters.firstChild&&t.options.fixedGutter){for(var n=y(e)-e.scroller.scrollLeft+t.doc.scrollLeft,i=e.gutters.offsetWidth,r=n+"px",o=e.lineDiv.firstChild;o;o=o.nextSibling)if(o.alignable)for(var s=0,a=o.alignable;s<a.length;++s)a[s].style.left=r;t.options.fixedGutter&&(e.gutters.style.left=n+i+"px")}}function g(t){if(!t.options.lineNumbers)return!1;var e=t.doc,n=v(t.options,e.first+e.size-1),i=t.display;if(n.length!=i.lineNumChars){var r=i.measure.appendChild(sr("div",[sr("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=r.firstChild.offsetWidth,s=r.offsetWidth-o;return i.lineGutter.style.width="",i.lineNumInnerWidth=Math.max(o,i.lineGutter.offsetWidth-s),i.lineNumWidth=i.lineNumInnerWidth+s,i.lineNumChars=i.lineNumInnerWidth?n.length:-1,i.lineGutter.style.width=i.lineNumWidth+"px",!0}return!1}function v(t,e){return String(t.lineNumberFormatter(e+t.firstLineNumber))}function y(t){return cr(t.scroller).left-cr(t.sizer).left}function b(t,e,n,i){for(var r,o=t.display.showingFrom,s=t.display.showingTo,a=d(t.display,t.doc,n),l=!0;;l=!1){var u=t.display.scroller.clientWidth;if(!w(t,e,a,i))break;if(r=!0,e=[],M(t),f(t),l&&t.options.lineWrapping&&u!=t.display.scroller.clientWidth)i=!0;else if(i=!1,n&&(n=Math.min(t.display.scroller.scrollHeight-t.display.scroller.clientHeight,"number"==typeof n?n:n.top)),a=d(t.display,t.doc,n),a.from>=t.display.showingFrom&&a.to<=t.display.showingTo)break}return r&&(Ui(t,"update",t),(t.display.showingFrom!=o||t.display.showingTo!=s)&&Ui(t,"viewportChange",t,t.display.showingFrom,t.display.showingTo)),r}function w(t,e,n,i){var r=t.display,o=t.doc;if(!r.wrapper.clientWidth)return r.showingFrom=r.showingTo=o.first,r.viewOffset=0,void 0;if(!(!i&&0==e.length&&n.from>r.showingFrom&&n.to<r.showingTo)){g(t)&&(e=[{from:o.first,to:o.first+o.size}]);var s=r.sizer.style.marginLeft=r.gutters.offsetWidth+"px";r.scrollbarH.style.left=t.options.fixedGutter?s:"0";var a=1/0;if(t.options.lineNumbers)for(var l=0;l<e.length;++l)e[l].diff&&e[l].from<a&&(a=e[l].from);var u=o.first+o.size,c=Math.max(n.from-t.options.viewportMargin,o.first),h=Math.min(u,n.to+t.options.viewportMargin);if(r.showingFrom<c&&c-r.showingFrom<20&&(c=Math.max(o.first,r.showingFrom)),r.showingTo>h&&r.showingTo-h<20&&(h=Math.min(u,r.showingTo)),Gr)for(c=yi(jn(o,di(o,c)));u>h&&Un(o,di(o,h));)++h;var p=[{from:Math.max(r.showingFrom,o.first),to:Math.min(r.showingTo,u)}];if(p=p[0].from>=p[0].to?[]:S(p,e),Gr)for(var l=0;l<p.length;++l)for(var f,d=p[l];f=Vn(di(o,d.to-1));){var m=f.find().from.line;if(!(m>d.from)){p.splice(l--,1);break}d.to=m}for(var v=0,l=0;l<p.length;++l){var d=p[l];d.from<c&&(d.from=c),d.to>h&&(d.to=h),d.from>=d.to?p.splice(l--,1):v+=d.to-d.from}if(!i&&v==h-c&&c==r.showingFrom&&h==r.showingTo)return x(t),void 0;p.sort(function(t,e){return t.from-e.from});try{var y=document.activeElement}catch(b){}.7*(h-c)>v&&(r.lineDiv.style.display="none"),C(t,c,h,p,a),r.lineDiv.style.display="",y&&document.activeElement!=y&&y.offsetHeight&&y.focus();var w=c!=r.showingFrom||h!=r.showingTo||r.lastSizeC!=r.wrapper.clientHeight;return w&&(r.lastSizeC=r.wrapper.clientHeight,N(t,400)),r.showingFrom=c,r.showingTo=h,_(t),x(t),!0}}function _(t){for(var e,n=t.display,i=n.lineDiv.offsetTop,r=n.lineDiv.firstChild;r;r=r.nextSibling)if(r.lineObj){if(Mr){var o=r.offsetTop+r.offsetHeight;e=o-i,i=o}else{var s=cr(r);e=s.bottom-s.top}var a=r.lineObj.height-e;if(2>e&&(e=ne(n)),a>.001||-.001>a){vi(r.lineObj,e);var l=r.lineObj.widgets;if(l)for(var u=0;u<l.length;++u)l[u].height=l[u].node.offsetHeight}}}function x(t){var e=t.display.viewOffset=wi(t,di(t.doc,t.display.showingFrom));t.display.mover.style.top=e+"px"}function S(t,e){for(var n=0,i=e.length||0;i>n;++n){for(var r=e[n],o=[],s=r.diff||0,a=0,l=t.length;l>a;++a){var u=t[a];r.to<=u.from&&r.diff?o.push({from:u.from+s,to:u.to+s}):r.to<=u.from||r.from>=u.to?o.push(u):(r.from>u.from&&o.push({from:u.from,to:r.from}),r.to<u.to&&o.push({from:r.to+s,to:u.to+s}))}t=o}return t}function k(t){for(var e=t.display,n={},i={},r=e.gutters.firstChild,o=0;r;r=r.nextSibling,++o)n[t.options.gutters[o]]=r.offsetLeft,i[t.options.gutters[o]]=r.offsetWidth;return{fixedPos:y(e),gutterTotalWidth:e.gutters.offsetWidth,gutterLeft:n,gutterWidth:i,wrapperWidth:e.wrapper.clientWidth}}function C(t,e,n,i,r){function o(e){var n=e.nextSibling;return Ar&&Vr&&t.display.currentWheelTarget==e?(e.style.display="none",e.lineObj=null):e.parentNode.removeChild(e),n}var s=k(t),a=t.display,l=t.options.lineNumbers;i.length||Ar&&t.display.currentWheelTarget||ar(a.lineDiv);var u=a.lineDiv,c=u.firstChild,h=i.shift(),p=e;for(t.doc.iter(e,n,function(e){if(h&&h.to==p&&(h=i.shift()),Un(t.doc,e)){if(0!=e.height&&vi(e,0),e.widgets&&c&&c.previousSibling)for(var n=0;n<e.widgets.length;++n){var a=e.widgets[n];if(a.showIfHidden){var f=c.previousSibling;if(/pre/i.test(f.nodeName)){var d=sr("div",null,null,"position: relative");f.parentNode.replaceChild(d,f),d.appendChild(f),f=d}var m=f.appendChild(sr("div",[a.node],"CodeMirror-linewidget"));a.handleMouseEvents||(m.ignoreEvents=!0),T(a,m,f,s)}}}else if(h&&h.from<=p&&h.to>p){for(;c.lineObj!=e;)c=o(c);l&&p>=r&&c.lineNumber&&ur(c.lineNumber,v(t.options,p)),c=c.nextSibling}else{if(e.widgets)for(var g,y=0,b=c;b&&20>y;++y,b=b.nextSibling)if(b.lineObj==e&&/div/i.test(b.nodeName)){g=b;break}var w=E(t,e,p,s,g);if(w!=g)u.insertBefore(w,c);else{for(;c!=g;)c=o(c);c=c.nextSibling}w.lineObj=e}++p});c;)c=o(c)}function E(t,e,n,i,r){var o,s=ii(t,e),a=s.pre,l=e.gutterMarkers,u=t.display,c=s.bgClass?s.bgClass+" "+(e.bgClass||""):e.bgClass;if(!(t.options.lineNumbers||l||c||e.wrapClass||e.widgets))return a;if(r){r.alignable=null;for(var h,p=!0,f=0,d=null,m=r.firstChild;m;m=h)if(h=m.nextSibling,/\bCodeMirror-linewidget\b/.test(m.className)){for(var g=0;g<e.widgets.length;++g){var y=e.widgets[g];if(y.node==m.firstChild){y.above||d||(d=m),T(y,m,r,i),++f;break}}if(g==e.widgets.length){p=!1;break}}else r.removeChild(m);r.insertBefore(a,d),p&&f==e.widgets.length&&(o=r,r.className=e.wrapClass||"")}if(o||(o=sr("div",null,e.wrapClass,"position: relative"),o.appendChild(a)),c&&o.insertBefore(sr("div",null,c+" CodeMirror-linebackground"),o.firstChild),t.options.lineNumbers||l){var b=o.insertBefore(sr("div",null,null,"position: absolute; left: "+(t.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px"),o.firstChild);if(t.options.fixedGutter&&(o.alignable||(o.alignable=[])).push(b),!t.options.lineNumbers||l&&l["CodeMirror-linenumbers"]||(o.lineNumber=b.appendChild(sr("div",v(t.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+i.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+u.lineNumInnerWidth+"px"))),l)for(var w=0;w<t.options.gutters.length;++w){var _=t.options.gutters[w],x=l.hasOwnProperty(_)&&l[_];x&&b.appendChild(sr("div",[x],"CodeMirror-gutter-elt","left: "+i.gutterLeft[_]+"px; width: "+i.gutterWidth[_]+"px"))}}if(Mr&&(o.style.zIndex=2),e.widgets&&o!=r)for(var g=0,S=e.widgets;g<S.length;++g){var y=S[g],k=sr("div",[y.node],"CodeMirror-linewidget");y.handleMouseEvents||(k.ignoreEvents=!0),T(y,k,o,i),y.above?o.insertBefore(k,t.options.lineNumbers&&0!=e.height?b:a):o.appendChild(k),Ui(y,"redraw")}return o}function T(t,e,n,i){if(t.noHScroll){(n.alignable||(n.alignable=[])).push(e);var r=i.wrapperWidth;e.style.left=i.fixedPos+"px",t.coverGutter||(r-=i.gutterTotalWidth,e.style.paddingLeft=i.gutterTotalWidth+"px"),e.style.width=r+"px"}t.coverGutter&&(e.style.zIndex=5,e.style.position="relative",t.noHScroll||(e.style.marginLeft=-i.gutterTotalWidth+"px"))}function M(t){var e=t.display,n=Ye(t.doc.sel.from,t.doc.sel.to);if(n||t.options.showCursorWhenSelecting?P(t):e.cursor.style.display=e.otherCursor.style.display="none",n?e.selectionDiv.style.display="none":A(t),t.options.moveInputWithCursor){var i=Q(t,t.doc.sel.head,"div"),r=cr(e.wrapper),o=cr(e.lineDiv);e.inputDiv.style.top=Math.max(0,Math.min(e.wrapper.clientHeight-10,i.top+o.top-r.top))+"px",e.inputDiv.style.left=Math.max(0,Math.min(e.wrapper.clientWidth-10,i.left+o.left-r.left))+"px"}}function P(t){var e=t.display,n=Q(t,t.doc.sel.head,"div");e.cursor.style.left=n.left+"px",e.cursor.style.top=n.top+"px",e.cursor.style.height=Math.max(0,n.bottom-n.top)*t.options.cursorHeight+"px",e.cursor.style.display="",n.other?(e.otherCursor.style.display="",e.otherCursor.style.left=n.other.left+"px",e.otherCursor.style.top=n.other.top+"px",e.otherCursor.style.height=.85*(n.other.bottom-n.other.top)+"px"):e.otherCursor.style.display="none"}function A(t){function e(t,e,n,i){0>e&&(e=0),s.appendChild(sr("div",null,"CodeMirror-selected","position: absolute; left: "+t+"px; top: "+e+"px; width: "+(null==n?a-t:n)+"px; height: "+(i-e)+"px"))}function n(n,i,o){function s(e,i){return X(t,Je(n,e),"div",h,i)}var u,c,h=di(r,n),p=h.text.length;return dr(_i(h),i||0,null==o?p:o,function(t,n,r){var h,f,d,m=s(t,"left");if(t==n)h=m,f=d=m.left;else{if(h=s(n-1,"right"),"rtl"==r){var g=m;m=h,h=g}f=m.left,d=h.right}null==i&&0==t&&(f=l),h.top-m.top>3&&(e(f,m.top,null,m.bottom),f=l,m.bottom<h.top&&e(f,m.bottom,null,h.top)),null==o&&n==p&&(d=a),(!u||m.top<u.top||m.top==u.top&&m.left<u.left)&&(u=m),(!c||h.bottom>c.bottom||h.bottom==c.bottom&&h.right>c.right)&&(c=h),l+1>f&&(f=l),e(f,h.top,d-f,h.bottom)}),{start:u,end:c}}var i=t.display,r=t.doc,o=t.doc.sel,s=document.createDocumentFragment(),a=i.lineSpace.offsetWidth,l=R(t.display);if(o.from.line==o.to.line)n(o.from.line,o.from.ch,o.to.ch);else{var u=di(r,o.from.line),c=di(r,o.to.line),h=jn(r,u)==jn(r,c),p=n(o.from.line,o.from.ch,h?u.text.length:null).end,f=n(o.to.line,h?0:null,o.to.ch).start;h&&(p.top<f.top-2?(e(p.right,p.top,null,p.bottom),e(l,f.top,f.left,f.bottom)):e(p.right,p.top,f.left-p.right,p.bottom)),p.bottom<f.top&&e(l,p.bottom,null,f.top)}lr(i.selectionDiv,s),i.selectionDiv.style.display=""}function O(t){if(t.state.focused){var e=t.display;clearInterval(e.blinker);var n=!0;e.cursor.style.visibility=e.otherCursor.style.visibility="",t.options.cursorBlinkRate>0&&(e.blinker=setInterval(function(){e.cursor.style.visibility=e.otherCursor.style.visibility=(n=!n)?"":"hidden"},t.options.cursorBlinkRate))}}function N(t,e){t.doc.mode.startState&&t.doc.frontier<t.display.showingTo&&t.state.highlight.set(e,ir(D,t))}function D(t){var e=t.doc;if(e.frontier<e.first&&(e.frontier=e.first),!(e.frontier>=t.display.showingTo)){var n,i=+new Date+t.options.workTime,r=wn(e.mode,L(t,e.frontier)),o=[];e.iter(e.frontier,Math.min(e.first+e.size,t.display.showingTo+500),function(s){if(e.frontier>=t.display.showingFrom){var a=s.styles;s.styles=Zn(t,s,r);for(var l=!a||a.length!=s.styles.length,u=0;!l&&u<a.length;++u)l=a[u]!=s.styles[u];l&&(n&&n.end==e.frontier?n.end++:o.push(n={start:e.frontier,end:e.frontier+1})),s.stateAfter=wn(e.mode,r)}else ei(t,s,r),s.stateAfter=0==e.frontier%5?wn(e.mode,r):null;return++e.frontier,+new Date>i?(N(t,t.options.workDelay),!0):void 0}),o.length&&se(t,function(){for(var t=0;t<o.length;++t)ue(this,o[t].start,o[t].end)})()}}function I(t,e,n){for(var i,r,o=t.doc,s=n?-1:e-(t.doc.mode.innerMode?1e3:100),a=e;a>s;--a){if(a<=o.first)return o.first;var l=di(o,a-1);if(l.stateAfter&&(!n||a<=o.frontier))return a;var u=Ki(l.text,null,t.options.tabSize);(null==r||i>u)&&(r=a-1,i=u)}return r}function L(t,e,n){var i=t.doc,r=t.display;if(!i.mode.startState)return!0;var o=I(t,e,n),s=o>i.first&&di(i,o-1).stateAfter;return s=s?wn(i.mode,s):_n(i.mode),i.iter(o,e,function(n){ei(t,n,s);var a=o==e-1||0==o%5||o>=r.showingFrom&&o<r.showingTo;n.stateAfter=a?wn(i.mode,s):null,++o}),n&&(i.frontier=o),s}function $(t){return t.lineSpace.offsetTop}function z(t){return t.mover.offsetHeight-t.lineSpace.offsetHeight}function R(t){var e=lr(t.measure,sr("pre",null,null,"text-align: left")).appendChild(sr("span","x"));return e.offsetLeft}function B(t,e,n,i,r){var o=-1;if(i=i||j(t,e),i.crude){var s=i.left+n*i.width;return{left:s,right:s+i.width,top:i.top,bottom:i.bottom}}for(var a=n;;a+=o){var l=i[a];if(l)break;0>o&&0==a&&(o=1)}return r=a>n?"left":n>a?"right":r,"left"==r&&l.leftSide?l=l.leftSide:"right"==r&&l.rightSide&&(l=l.rightSide),{left:n>a?l.right:l.left,right:a>n?l.left:l.right,top:l.top,bottom:l.bottom}}function F(t,e){for(var n=t.display.measureLineCache,i=0;i<n.length;++i){var r=n[i];if(r.text==e.text&&r.markedSpans==e.markedSpans&&t.display.scroller.clientWidth==r.width&&r.classes==e.textClass+"|"+e.wrapClass)return r}}function V(t,e){var n=F(t,e);n&&(n.text=n.measure=n.markedSpans=null)}function j(t,e){var n=F(t,e);if(n)return n.measure;var i=U(t,e),r=t.display.measureLineCache,o={text:e.text,width:t.display.scroller.clientWidth,markedSpans:e.markedSpans,measure:i,classes:e.textClass+"|"+e.wrapClass};return 16==r.length?r[++t.display.measureLineCachePos%16]=o:r.push(o),i}function U(t,e){function n(t){var e=t.top-d.top,n=t.bottom-d.top;n>v&&(n=v),0>e&&(e=0);for(var i=m.length-2;i>=0;i-=2){var r=m[i],o=m[i+1];if(!(r>n||e>o)&&(e>=r&&o>=n||r>=e&&n>=o||Math.min(n,o)-Math.max(e,r)>=n-e>>1)){m[i]=Math.min(e,r),m[i+1]=Math.max(n,o);break}}return 0>i&&(i=m.length,m.push(e,n)),{left:t.left-d.left,right:t.right-d.left,top:i,bottom:null}}function i(t){t.bottom=m[t.top+1],t.top=m[t.top]}if(!t.options.lineWrapping&&e.text.length>=t.options.crudeMeasuringFrom)return H(t,e);var r=t.display,o=nr(e.text.length),s=ii(t,e,o,!0).pre;if(Tr&&!Mr&&!t.options.lineWrapping&&s.childNodes.length>100){for(var a=document.createDocumentFragment(),l=10,u=s.childNodes.length,c=0,h=Math.ceil(u/l);h>c;++c){for(var p=sr("div",null,null,"display: inline-block"),f=0;l>f&&u;++f)p.appendChild(s.firstChild),--u;a.appendChild(p)}s.appendChild(a)}lr(r.measure,s);var d=cr(r.lineDiv),m=[],g=nr(e.text.length),v=s.offsetHeight;Pr&&r.measure.first!=s&&lr(r.measure,s);for(var y,c=0;c<o.length;++c)if(y=o[c]){var b=y,w=null;if(/\bCodeMirror-widget\b/.test(y.className)&&y.getClientRects){1==y.firstChild.nodeType&&(b=y.firstChild);var _=b.getClientRects();_.length>1&&(w=g[c]=n(_[0]),w.rightSide=n(_[_.length-1]))}w||(w=g[c]=n(cr(b))),y.measureRight&&(w.right=cr(y.measureRight).left),y.leftSide&&(w.leftSide=n(cr(y.leftSide)))}ar(t.display.measure);for(var y,c=0;c<g.length;++c)(y=g[c])&&(i(y),y.leftSide&&i(y.leftSide),y.rightSide&&i(y.rightSide));return g}function H(t,e){var n=new vo(e.text.slice(0,100),null);e.textClass&&(n.textClass=e.textClass);var i=U(t,n),r=B(t,n,0,i,"left"),o=B(t,n,99,i,"right");return{crude:!0,top:r.top,left:r.left,bottom:r.bottom,width:(o.right-r.left)/100}}function q(t,e){var n=!1;if(e.markedSpans)for(var i=0;i<e.markedSpans;++i){var r=e.markedSpans[i];!r.collapsed||null!=r.to&&r.to!=e.text.length||(n=!0)}var o=!n&&F(t,e);if(o||e.text.length>=t.options.crudeMeasuringFrom)return B(t,e,e.text.length,o&&o.measure,"right").right;var s=ii(t,e,null,!0).pre,a=s.appendChild(fr(t.display.measure));return lr(t.display.measure,s),cr(a).right-cr(t.display.lineDiv).left}function W(t){t.display.measureLineCache.length=t.display.measureLineCachePos=0,t.display.cachedCharWidth=t.display.cachedTextHeight=null,t.options.lineWrapping||(t.display.maxLineChanged=!0),t.display.lineNumChars=null}function J(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Y(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function K(t,e,n,i){if(e.widgets)for(var r=0;r<e.widgets.length;++r)if(e.widgets[r].above){var o=Yn(e.widgets[r]);n.top+=o,n.bottom+=o}if("line"==i)return n;i||(i="local");var s=wi(t,e);if("local"==i?s+=$(t.display):s-=t.display.viewOffset,"page"==i||"window"==i){var a=cr(t.display.lineSpace);s+=a.top+("window"==i?0:Y());var l=a.left+("window"==i?0:J());n.left+=l,n.right+=l}return n.top+=s,n.bottom+=s,n}function G(t,e,n){if("div"==n)return e;var i=e.left,r=e.top;if("page"==n)i-=J(),r-=Y();else if("local"==n||!n){var o=cr(t.display.sizer);i+=o.left,r+=o.top}var s=cr(t.display.lineSpace);return{left:i-s.left,top:r-s.top}}function X(t,e,n,i,r){return i||(i=di(t.doc,e.line)),K(t,i,B(t,i,e.ch,null,r),n)}function Q(t,e,n,i,r){function o(e,o){var s=B(t,i,e,r,o?"right":"left");return o?s.left=s.right:s.right=s.left,K(t,i,s,n)}function s(t,e){var n=a[e],i=n.level%2;return t==mr(n)&&e&&n.level<a[e-1].level?(n=a[--e],t=gr(n)-(n.level%2?0:1),i=!0):t==gr(n)&&e<a.length-1&&n.level<a[e+1].level&&(n=a[++e],t=mr(n)-n.level%2,i=!1),i&&t==n.to&&t>n.from?o(t-1):o(t,i)}i=i||di(t.doc,e.line),r||(r=j(t,i));var a=_i(i),l=e.ch;if(!a)return o(l);var u=xr(a,l),c=s(l,u);return null!=Ro&&(c.other=s(l,Ro)),c}function Z(t,e,n,i){var r=new Je(t,e);return r.xRel=i,n&&(r.outside=!0),r}function te(t,e,n){var i=t.doc;if(n+=t.display.viewOffset,0>n)return Z(i.first,0,!0,-1);var r=bi(i,n),o=i.first+i.size-1;if(r>o)return Z(i.first+i.size-1,di(i,o).text.length,!0,1);for(0>e&&(e=0);;){var s=di(i,r),a=ee(t,s,r,e,n),l=Vn(s),u=l&&l.find();if(!l||!(a.ch>u.from.ch||a.ch==u.from.ch&&a.xRel>0))return a;r=u.to.line}}function ee(t,e,n,i,r){function o(i){var r=Q(t,Je(n,i),"line",e,u);return a=!0,s>r.bottom?r.left-l:s<r.top?r.left+l:(a=!1,r.left)}var s=r-wi(t,e),a=!1,l=2*t.display.wrapper.clientWidth,u=j(t,e),c=_i(e),h=e.text.length,p=vr(e),f=yr(e),d=o(p),m=a,g=o(f),v=a;if(i>g)return Z(n,f,v,1);for(;;){if(c?f==p||f==kr(e,p,1):1>=f-p){for(var y=d>i||g-i>=i-d?p:f,b=i-(y==p?d:g);Ao.test(e.text.charAt(y));)++y;var w=Z(n,y,y==p?m:v,0>b?-1:b?1:0);return w}var _=Math.ceil(h/2),x=p+_;if(c){x=p;for(var S=0;_>S;++S)x=kr(e,x,1)}var k=o(x);k>i?(f=x,g=k,(v=a)&&(g+=1e3),h=_):(p=x,d=k,m=a,h-=_)}}function ne(t){if(null!=t.cachedTextHeight)return t.cachedTextHeight;if(null==Hr){Hr=sr("pre");for(var e=0;49>e;++e)Hr.appendChild(document.createTextNode("x")),Hr.appendChild(sr("br"));Hr.appendChild(document.createTextNode("x"))}lr(t.measure,Hr);var n=Hr.offsetHeight/50;return n>3&&(t.cachedTextHeight=n),ar(t.measure),n||1}function ie(t){if(null!=t.cachedCharWidth)return t.cachedCharWidth;var e=sr("span","x"),n=sr("pre",[e]);lr(t.measure,n);var i=e.offsetWidth;return i>2&&(t.cachedCharWidth=i),i||10}function re(t){t.curOp={changes:[],forceUpdate:!1,updateInput:null,userSelChange:null,textChanged:null,selectionChanged:!1,cursorActivity:!1,updateMaxLine:!1,updateScrollPos:!1,id:++Xr},Co++||(ko=[])}function oe(t){var e=t.curOp,n=t.doc,i=t.display;if(t.curOp=null,e.updateMaxLine&&h(t),i.maxLineChanged&&!t.options.lineWrapping&&i.maxLine){var r=q(t,i.maxLine);i.sizer.style.minWidth=Math.max(0,r+3+Eo)+"px",i.maxLineChanged=!1;var o=Math.max(0,i.sizer.offsetLeft+i.sizer.offsetWidth-i.scroller.clientWidth);o<n.scrollLeft&&!e.updateScrollPos&&Ee(t,Math.min(i.scroller.scrollLeft,o),!0)}var s,a;if(e.updateScrollPos)s=e.updateScrollPos;else if(e.selectionChanged&&i.scroller.clientHeight){var l=Q(t,n.sel.head);s=cn(t,l.left,l.top,l.left,l.bottom)}(e.changes.length||e.forceUpdate||s&&null!=s.scrollTop)&&(a=b(t,e.changes,s&&s.scrollTop,e.forceUpdate),t.display.scroller.offsetHeight&&(t.doc.scrollTop=t.display.scroller.scrollTop)),!a&&e.selectionChanged&&M(t),e.updateScrollPos?(i.scroller.scrollTop=i.scrollbarV.scrollTop=n.scrollTop=s.scrollTop,i.scroller.scrollLeft=i.scrollbarH.scrollLeft=n.scrollLeft=s.scrollLeft,m(t),e.scrollToPos&&ln(t,Qe(t.doc,e.scrollToPos.from),Qe(t.doc,e.scrollToPos.to),e.scrollToPos.margin)):s&&an(t),e.selectionChanged&&O(t),t.state.focused&&e.updateInput&&fe(t,e.userSelChange);var u=e.maybeHiddenMarkers,c=e.maybeUnhiddenMarkers;if(u)for(var p=0;p<u.length;++p)u[p].lines.length||ji(u[p],"hide");if(c)for(var p=0;p<c.length;++p)c[p].lines.length&&ji(c[p],"unhide");var f;if(--Co||(f=ko,ko=null),e.textChanged&&ji(t,"change",t,e.textChanged),e.cursorActivity&&ji(t,"cursorActivity",t),f)for(var p=0;p<f.length;++p)f[p]()}function se(t,e){return function(){var n=t||this,i=!n.curOp;i&&re(n);try{var r=e.apply(n,arguments)}finally{i&&oe(n)}return r}}function ae(t){return function(){var e,n=this.cm&&!this.cm.curOp;n&&re(this.cm);try{e=t.apply(this,arguments)}finally{n&&oe(this.cm)}return e}}function le(t,e){var n,i=!t.curOp;i&&re(t);try{n=e()}finally{i&&oe(t)}return n}function ue(t,e,n,i){null==e&&(e=t.doc.first),null==n&&(n=t.doc.first+t.doc.size),t.curOp.changes.push({from:e,to:n,diff:i})}function ce(t){t.display.pollingFast||t.display.poll.set(t.options.pollInterval,function(){pe(t),t.state.focused&&ce(t)})}function he(t){function e(){var i=pe(t);i||n?(t.display.pollingFast=!1,ce(t)):(n=!0,t.display.poll.set(60,e))}var n=!1;t.display.pollingFast=!0,t.display.poll.set(20,e)}function pe(t){var e=t.display.input,n=t.display.prevInput,i=t.doc,r=i.sel;if(!t.state.focused||Lo(e)||me(t)||t.state.disableInput)return!1;t.state.pasteIncoming&&t.state.fakedLastChar&&(e.value=e.value.substring(0,e.value.length-1),t.state.fakedLastChar=!1);var o=e.value;if(o==n&&Ye(r.from,r.to))return!1;if(Tr&&!Pr&&t.display.inputHasSelection===o)return fe(t,!0),!1;var s=!t.curOp;s&&re(t),r.shift=!1;for(var a=0,l=Math.min(n.length,o.length);l>a&&n.charCodeAt(a)==o.charCodeAt(a);)++a;var u=r.from,c=r.to;a<n.length?u=Je(u.line,u.ch-(n.length-a)):t.state.overwrite&&Ye(u,c)&&!t.state.pasteIncoming&&(c=Je(c.line,Math.min(di(i,c.line).text.length,c.ch+(o.length-a))));var h=t.curOp.updateInput,p={from:u,to:c,text:Io(o.slice(a)),origin:t.state.pasteIncoming?"paste":"+input"};return Fe(t.doc,p,"end"),t.curOp.updateInput=h,Ui(t,"inputRead",t,p),o.length>1e3||o.indexOf("\n")>-1?e.value=t.display.prevInput="":t.display.prevInput=o,s&&oe(t),t.state.pasteIncoming=!1,!0}function fe(t,e){var n,i,r=t.doc;if(Ye(r.sel.from,r.sel.to))e&&(t.display.prevInput=t.display.input.value="",Tr&&!Pr&&(t.display.inputHasSelection=null));else{t.display.prevInput="",n=$o&&(r.sel.to.line-r.sel.from.line>100||(i=t.getSelection()).length>1e3);var o=n?"-":i||t.getSelection();t.display.input.value=o,t.state.focused&&Qi(t.display.input),Tr&&!Pr&&(t.display.inputHasSelection=o)}t.display.inaccurateSelection=n}function de(t){"nocursor"==t.options.readOnly||Fr&&document.activeElement==t.display.input||t.display.input.focus()}function me(t){return t.options.readOnly||t.doc.cantEdit}function ge(t){function e(){t.state.focused&&setTimeout(ir(de,t),0)}function n(){null==a&&(a=setTimeout(function(){a=null,s.cachedCharWidth=s.cachedTextHeight=No=null,W(t),le(t,ir(ue,t))},100))}function i(){for(var t=s.wrapper.parentNode;t&&t!=document.body;t=t.parentNode);t?setTimeout(i,5e3):Vi(window,"resize",n)}function r(e){Hi(t,e)||t.options.onDragEvent&&t.options.onDragEvent(t,Di(e))||zi(e)}function o(){s.inaccurateSelection&&(s.prevInput="",s.inaccurateSelection=!1,s.input.value=t.getSelection(),Qi(s.input))}var s=t.display;Fi(s.scroller,"mousedown",se(t,be)),Tr?Fi(s.scroller,"dblclick",se(t,function(e){if(!Hi(t,e)){var n=ye(t,e);if(n&&!xe(t,e)&&!ve(t.display,e)){Ii(e);var i=vn(di(t.doc,n.line).text,n);en(t.doc,i.from,i.to)}}})):Fi(s.scroller,"dblclick",function(e){Hi(t,e)||Ii(e)}),Fi(s.lineSpace,"selectstart",function(t){ve(s,t)||Ii(t)}),Yr||Fi(s.scroller,"contextmenu",function(e){$e(t,e)}),Fi(s.scroller,"scroll",function(){s.scroller.clientHeight&&(Ce(t,s.scroller.scrollTop),Ee(t,s.scroller.scrollLeft,!0),ji(t,"scroll",t))}),Fi(s.scrollbarV,"scroll",function(){s.scroller.clientHeight&&Ce(t,s.scrollbarV.scrollTop)}),Fi(s.scrollbarH,"scroll",function(){s.scroller.clientHeight&&Ee(t,s.scrollbarH.scrollLeft)}),Fi(s.scroller,"mousewheel",function(e){Te(t,e)}),Fi(s.scroller,"DOMMouseScroll",function(e){Te(t,e)}),Fi(s.scrollbarH,"mousedown",e),Fi(s.scrollbarV,"mousedown",e),Fi(s.wrapper,"scroll",function(){s.wrapper.scrollTop=s.wrapper.scrollLeft=0});var a;Fi(window,"resize",n),setTimeout(i,5e3),Fi(s.input,"keyup",se(t,function(e){Hi(t,e)||t.options.onKeyEvent&&t.options.onKeyEvent(t,Di(e))||16==e.keyCode&&(t.doc.sel.shift=!1)})),Fi(s.input,"input",function(){Tr&&!Pr&&t.display.inputHasSelection&&(t.display.inputHasSelection=null),he(t)}),Fi(s.input,"keydown",se(t,Ne)),Fi(s.input,"keypress",se(t,De)),Fi(s.input,"focus",ir(Ie,t)),Fi(s.input,"blur",ir(Le,t)),t.options.dragDrop&&(Fi(s.scroller,"dragstart",function(e){ke(t,e)}),Fi(s.scroller,"dragenter",r),Fi(s.scroller,"dragover",r),Fi(s.scroller,"drop",se(t,Se))),Fi(s.scroller,"paste",function(e){ve(s,e)||(de(t),he(t))}),Fi(s.input,"paste",function(){if(Ar&&!t.state.fakedLastChar&&!(new Date-t.state.lastMiddleDown<200)){var e=s.input.selectionStart,n=s.input.selectionEnd;s.input.value+="$",s.input.selectionStart=e,s.input.selectionEnd=n,t.state.fakedLastChar=!0}t.state.pasteIncoming=!0,he(t)
}),Fi(s.input,"cut",o),Fi(s.input,"copy",o),Lr&&Fi(s.sizer,"mouseup",function(){document.activeElement==s.input&&s.input.blur(),de(t)})}function ve(t,e){for(var n=Ri(e);n!=t.wrapper;n=n.parentNode)if(!n||n.ignoreEvents||n.parentNode==t.sizer&&n!=t.mover)return!0}function ye(t,e,n){var i=t.display;if(!n){var r=Ri(e);if(r==i.scrollbarH||r==i.scrollbarH.firstChild||r==i.scrollbarV||r==i.scrollbarV.firstChild||r==i.scrollbarFiller||r==i.gutterFiller)return null}var o,s,a=cr(i.lineSpace);try{o=e.clientX,s=e.clientY}catch(e){return null}return te(t,o-a.left,s-a.top)}function be(t){function e(t){if(!Ye(v,t)){if(v=t,"single"==c)return en(r.doc,Qe(s,l),t),void 0;if(m=Qe(s,m),g=Qe(s,g),"double"==c){var e=vn(di(s,t.line).text,t);Ke(t,m)?en(r.doc,e.from,g):en(r.doc,m,e.to)}else"triple"==c&&(Ke(t,m)?en(r.doc,g,Qe(s,Je(t.line,0))):en(r.doc,m,Qe(s,Je(t.line+1,0))))}}function n(t){var i=++b,a=ye(r,t,!0);if(a)if(Ye(a,p)){var l=t.clientY<y.top?-20:t.clientY>y.bottom?20:0;l&&setTimeout(se(r,function(){b==i&&(o.scroller.scrollTop+=l,n(t))}),50)}else{r.state.focused||Ie(r),p=a,e(a);var u=d(o,s);(a.line>=u.to||a.line<u.from)&&setTimeout(se(r,function(){b==i&&n(t)}),150)}}function i(t){b=1/0,Ii(t),de(r),Vi(document,"mousemove",w),Vi(document,"mouseup",_)}if(!Hi(this,t)){var r=this,o=r.display,s=r.doc,a=s.sel;if(a.shift=t.shiftKey,ve(o,t))return Ar||(o.scroller.draggable=!1,setTimeout(function(){o.scroller.draggable=!0},100)),void 0;if(!xe(r,t)){var l=ye(r,t);switch(Bi(t)){case 3:return Yr&&$e.call(r,r,t),void 0;case 2:return Ar&&(r.state.lastMiddleDown=+new Date),l&&en(r.doc,l),setTimeout(ir(de,r),20),Ii(t),void 0}if(!l)return Ri(t)==o.scroller&&Ii(t),void 0;r.state.focused||Ie(r);var u=+new Date,c="single";if(Wr&&Wr.time>u-400&&Ye(Wr.pos,l))c="triple",Ii(t),setTimeout(ir(de,r),20),yn(r,l.line);else if(qr&&qr.time>u-400&&Ye(qr.pos,l)){c="double",Wr={time:u,pos:l},Ii(t);var h=vn(di(s,l.line).text,l);en(r.doc,h.from,h.to)}else qr={time:u,pos:l};var p=l;if(r.options.dragDrop&&Oo&&!me(r)&&!Ye(a.from,a.to)&&!Ke(l,a.from)&&!Ke(a.to,l)&&"single"==c){var f=se(r,function(e){Ar&&(o.scroller.draggable=!1),r.state.draggingText=!1,Vi(document,"mouseup",f),Vi(o.scroller,"drop",f),Math.abs(t.clientX-e.clientX)+Math.abs(t.clientY-e.clientY)<10&&(Ii(e),en(r.doc,l),de(r))});return Ar&&(o.scroller.draggable=!0),r.state.draggingText=f,o.scroller.dragDrop&&o.scroller.dragDrop(),Fi(document,"mouseup",f),Fi(o.scroller,"drop",f),void 0}Ii(t),"single"==c&&en(r.doc,Qe(s,l));var m=a.from,g=a.to,v=l,y=cr(o.wrapper),b=0,w=se(r,function(t){Tr||Bi(t)?n(t):i(t)}),_=se(r,i);Fi(document,"mousemove",w),Fi(document,"mouseup",_)}}}function we(t,e,n,i,r){try{var o=e.clientX,s=e.clientY}catch(e){return!1}if(o>=Math.floor(cr(t.display.gutters).right))return!1;i&&Ii(e);var a=t.display,l=cr(a.lineDiv);if(s>l.bottom||!Wi(t,n))return $i(e);s-=l.top-a.viewOffset;for(var u=0;u<t.options.gutters.length;++u){var c=a.gutters.childNodes[u];if(c&&cr(c).right>=o){var h=bi(t.doc,s),p=t.options.gutters[u];return r(t,n,t,h,p,e),$i(e)}}}function _e(t,e){return Wi(t,"gutterContextMenu")?we(t,e,"gutterContextMenu",!1,ji):!1}function xe(t,e){return we(t,e,"gutterClick",!0,Ui)}function Se(t){var e=this;if(!(Hi(e,t)||ve(e.display,t)||e.options.onDragEvent&&e.options.onDragEvent(e,Di(t)))){Ii(t),Tr&&(Qr=+new Date);var n=ye(e,t,!0),i=t.dataTransfer.files;if(n&&!me(e))if(i&&i.length&&window.FileReader&&window.File)for(var r=i.length,o=Array(r),s=0,a=function(t,i){var a=new FileReader;a.onload=function(){o[i]=a.result,++s==r&&(n=Qe(e.doc,n),Fe(e.doc,{from:n,to:n,text:Io(o.join("\n")),origin:"paste"},"around"))},a.readAsText(t)},l=0;r>l;++l)a(i[l],l);else{if(e.state.draggingText&&!Ke(n,e.doc.sel.from)&&!Ke(e.doc.sel.to,n))return e.state.draggingText(t),setTimeout(ir(de,e),20),void 0;try{var o=t.dataTransfer.getData("Text");if(o){var u=e.doc.sel.from,c=e.doc.sel.to;rn(e.doc,n,n),e.state.draggingText&&We(e.doc,"",u,c,"paste"),e.replaceSelection(o,null,"paste"),de(e),Ie(e)}}catch(t){}}}}function ke(t,e){if(Tr&&(!t.state.draggingText||+new Date-Qr<100))return zi(e),void 0;if(!Hi(t,e)&&!ve(t.display,e)){var n=t.getSelection();if(e.dataTransfer.setData("Text",n),e.dataTransfer.setDragImage&&!Ir){var i=sr("img",null,null,"position: fixed; left: 0; top: 0;");i.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",Dr&&(i.width=i.height=1,t.display.wrapper.appendChild(i),i._top=i.offsetTop),e.dataTransfer.setDragImage(i,0,0),Dr&&i.parentNode.removeChild(i)}}}function Ce(t,e){Math.abs(t.doc.scrollTop-e)<2||(t.doc.scrollTop=e,Er||b(t,[],e),t.display.scroller.scrollTop!=e&&(t.display.scroller.scrollTop=e),t.display.scrollbarV.scrollTop!=e&&(t.display.scrollbarV.scrollTop=e),Er&&b(t,[]),N(t,100))}function Ee(t,e,n){(n?e==t.doc.scrollLeft:Math.abs(t.doc.scrollLeft-e)<2)||(e=Math.min(e,t.display.scroller.scrollWidth-t.display.scroller.clientWidth),t.doc.scrollLeft=e,m(t),t.display.scroller.scrollLeft!=e&&(t.display.scroller.scrollLeft=e),t.display.scrollbarH.scrollLeft!=e&&(t.display.scrollbarH.scrollLeft=e))}function Te(t,e){var n=e.wheelDeltaX,i=e.wheelDeltaY;null==n&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(n=e.detail),null==i&&e.detail&&e.axis==e.VERTICAL_AXIS?i=e.detail:null==i&&(i=e.wheelDelta);var r=t.display,o=r.scroller;if(n&&o.scrollWidth>o.clientWidth||i&&o.scrollHeight>o.clientHeight){if(i&&Vr&&Ar)for(var s=e.target;s!=o;s=s.parentNode)if(s.lineObj){t.display.currentWheelTarget=s;break}if(n&&!Er&&!Dr&&null!=to)return i&&Ce(t,Math.max(0,Math.min(o.scrollTop+i*to,o.scrollHeight-o.clientHeight))),Ee(t,Math.max(0,Math.min(o.scrollLeft+n*to,o.scrollWidth-o.clientWidth))),Ii(e),r.wheelStartX=null,void 0;if(i&&null!=to){var a=i*to,l=t.doc.scrollTop,u=l+r.wrapper.clientHeight;0>a?l=Math.max(0,l+a-50):u=Math.min(t.doc.height,u+a+50),b(t,[],{top:l,bottom:u})}20>Zr&&(null==r.wheelStartX?(r.wheelStartX=o.scrollLeft,r.wheelStartY=o.scrollTop,r.wheelDX=n,r.wheelDY=i,setTimeout(function(){if(null!=r.wheelStartX){var t=o.scrollLeft-r.wheelStartX,e=o.scrollTop-r.wheelStartY,n=e&&r.wheelDY&&e/r.wheelDY||t&&r.wheelDX&&t/r.wheelDX;r.wheelStartX=r.wheelStartY=null,n&&(to=(to*Zr+n)/(Zr+1),++Zr)}},200)):(r.wheelDX+=n,r.wheelDY+=i))}}function Me(t,e,n){if("string"==typeof e&&(e=fo[e],!e))return!1;t.display.pollingFast&&pe(t)&&(t.display.pollingFast=!1);var i=t.doc,r=i.sel.shift,o=!1;try{me(t)&&(t.state.suppressEdits=!0),n&&(i.sel.shift=!1),o=e(t)!=To}finally{i.sel.shift=r,t.state.suppressEdits=!1}return o}function Pe(t){var e=t.state.keyMaps.slice(0);return t.options.extraKeys&&e.push(t.options.extraKeys),e.push(t.options.keyMap),e}function Ae(t,e){var n=xn(t.options.keyMap),i=n.auto;clearTimeout(eo),i&&!kn(e)&&(eo=setTimeout(function(){xn(t.options.keyMap)==n&&(t.options.keyMap=i.call?i.call(null,t):i,s(t))},50));var r=Cn(e,!0),o=!1;if(!r)return!1;var a=Pe(t);return o=e.shiftKey?Sn("Shift-"+r,a,function(e){return Me(t,e,!0)})||Sn(r,a,function(e){return("string"==typeof e?/^go[A-Z]/.test(e):e.motion)?Me(t,e):void 0}):Sn(r,a,function(e){return Me(t,e)}),o&&(Ii(e),O(t),Pr&&(e.oldKeyCode=e.keyCode,e.keyCode=0),Ui(t,"keyHandled",t,r,e)),o}function Oe(t,e,n){var i=Sn("'"+n+"'",Pe(t),function(e){return Me(t,e,!0)});return i&&(Ii(e),O(t),Ui(t,"keyHandled",t,"'"+n+"'",e)),i}function Ne(t){var e=this;if(e.state.focused||Ie(e),!(Hi(e,t)||e.options.onKeyEvent&&e.options.onKeyEvent(e,Di(t)))){Tr&&27==t.keyCode&&(t.returnValue=!1);var n=t.keyCode;e.doc.sel.shift=16==n||t.shiftKey;var i=Ae(e,t);Dr&&(io=i?n:null,!i&&88==n&&!$o&&(Vr?t.metaKey:t.ctrlKey)&&e.replaceSelection(""))}}function De(t){var e=this;if(!(Hi(e,t)||e.options.onKeyEvent&&e.options.onKeyEvent(e,Di(t)))){var n=t.keyCode,i=t.charCode;if(Dr&&n==io)return io=null,Ii(t),void 0;if(!(Dr&&(!t.which||t.which<10)||Lr)||!Ae(e,t)){var r=String.fromCharCode(null==i?n:i);this.options.electricChars&&this.doc.mode.electricChars&&this.options.smartIndent&&!me(this)&&this.doc.mode.electricChars.indexOf(r)>-1&&setTimeout(se(e,function(){fn(e,e.doc.sel.to.line,"smart")}),75),Oe(e,t,r)||(Tr&&!Pr&&(e.display.inputHasSelection=null),he(e))}}}function Ie(t){"nocursor"!=t.options.readOnly&&(t.state.focused||(ji(t,"focus",t),t.state.focused=!0,-1==t.display.wrapper.className.search(/\bCodeMirror-focused\b/)&&(t.display.wrapper.className+=" CodeMirror-focused"),t.curOp||(fe(t,!0),Ar&&setTimeout(ir(fe,t,!0),0))),ce(t),O(t))}function Le(t){t.state.focused&&(ji(t,"blur",t),t.state.focused=!1,t.display.wrapper.className=t.display.wrapper.className.replace(" CodeMirror-focused","")),clearInterval(t.display.blinker),setTimeout(function(){t.state.focused||(t.doc.sel.shift=!1)},150)}function $e(t,e){function n(){if(null!=r.input.selectionStart){var t=r.input.value="​"+(Ye(o.from,o.to)?"":r.input.value);r.prevInput="​",r.input.selectionStart=1,r.input.selectionEnd=t.length}}function i(){if(r.inputDiv.style.position="relative",r.input.style.cssText=u,Pr&&(r.scrollbarV.scrollTop=r.scroller.scrollTop=a),ce(t),null!=r.input.selectionStart){(!Tr||Pr)&&n(),clearTimeout(no);var e=0,i=function(){" "==r.prevInput&&0==r.input.selectionStart?se(t,fo.selectAll)(t):e++<10?no=setTimeout(i,500):fe(t)};no=setTimeout(i,200)}}if(!Hi(t,e,"contextmenu")){var r=t.display,o=t.doc.sel;if(!ve(r,e)&&!_e(t,e)){var s=ye(t,e),a=r.scroller.scrollTop;if(s&&!Dr){var l=t.options.resetSelectionOnContextMenu;l&&(Ye(o.from,o.to)||Ke(s,o.from)||!Ke(s,o.to))&&se(t,rn)(t.doc,s,s);var u=r.input.style.cssText;if(r.inputDiv.style.position="absolute",r.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(e.clientY-5)+"px; left: "+(e.clientX-5)+"px; z-index: 1000; background: white; outline: none;"+"border-width: 0; outline: none; overflow: hidden; opacity: .05; -ms-opacity: .05; filter: alpha(opacity=5);",de(t),fe(t,!0),Ye(o.from,o.to)&&(r.input.value=r.prevInput=" "),Tr&&!Pr&&n(),Yr){zi(e);var c=function(){Vi(window,"mouseup",c),setTimeout(i,20)};Fi(window,"mouseup",c)}else setTimeout(i,50)}}}}function ze(t,e,n){if(!Ke(e.from,n))return Qe(t,n);var i=e.text.length-1-(e.to.line-e.from.line);if(n.line>e.to.line+i){var r=n.line-i,o=t.first+t.size-1;return r>o?Je(o,di(t,o).text.length):Ze(n,di(t,r).text.length)}if(n.line==e.to.line+i)return Ze(n,Xi(e.text).length+(1==e.text.length?e.from.ch:0)+di(t,e.to.line).text.length-e.to.ch);var s=n.line-e.from.line;return Ze(n,e.text[s].length+(s?0:e.from.ch))}function Re(t,e,n){if(n&&"object"==typeof n)return{anchor:ze(t,e,n.anchor),head:ze(t,e,n.head)};if("start"==n)return{anchor:e.from,head:e.from};var i=ro(e);if("around"==n)return{anchor:e.from,head:i};if("end"==n)return{anchor:i,head:i};var r=function(t){if(Ke(t,e.from))return t;if(!Ke(e.to,t))return i;var n=t.line+e.text.length-(e.to.line-e.from.line)-1,r=t.ch;return t.line==e.to.line&&(r+=i.ch-e.to.ch),Je(n,r)};return{anchor:r(t.sel.anchor),head:r(t.sel.head)}}function Be(t,e,n){var i={canceled:!1,from:e.from,to:e.to,text:e.text,origin:e.origin,cancel:function(){this.canceled=!0}};return n&&(i.update=function(e,n,i,r){e&&(this.from=Qe(t,e)),n&&(this.to=Qe(t,n)),i&&(this.text=i),void 0!==r&&(this.origin=r)}),ji(t,"beforeChange",t,i),t.cm&&ji(t.cm,"beforeChange",t.cm,i),i.canceled?null:{from:i.from,to:i.to,text:i.text,origin:i.origin}}function Fe(t,e,n,i){if(t.cm){if(!t.cm.curOp)return se(t.cm,Fe)(t,e,n,i);if(t.cm.state.suppressEdits)return}if(!(Wi(t,"beforeChange")||t.cm&&Wi(t.cm,"beforeChange"))||(e=Be(t,e,!0))){var r=Kr&&!i&&Rn(t,e.from,e.to);if(r){for(var o=r.length-1;o>=1;--o)Ve(t,{from:r[o].from,to:r[o].to,text:[""]});r.length&&Ve(t,{from:r[0].from,to:r[0].to,text:e.text},n)}else Ve(t,e,n)}}function Ve(t,e,n){if(1!=e.text.length||""!=e.text[0]||!Ye(e.from,e.to)){var i=Re(t,e,n);Ci(t,e,i,t.cm?t.cm.curOp.id:0/0),He(t,e,i,$n(t,e));var r=[];pi(t,function(t,n){n||-1!=Zi(r,t.history)||(Oi(t.history,e),r.push(t.history)),He(t,e,null,$n(t,e))})}}function je(t,e){if(!t.cm||!t.cm.state.suppressEdits){var n=t.history,i=("undo"==e?n.done:n.undone).pop();if(i){var r={changes:[],anchorBefore:i.anchorAfter,headBefore:i.headAfter,anchorAfter:i.anchorBefore,headAfter:i.headBefore,generation:n.generation};("undo"==e?n.undone:n.done).push(r),n.generation=i.generation||++n.maxGeneration;for(var o=Wi(t,"beforeChange")||t.cm&&Wi(t.cm,"beforeChange"),s=i.changes.length-1;s>=0;--s){var a=i.changes[s];if(a.origin=e,o&&!Be(t,a,!1))return("undo"==e?n.done:n.undone).length=0,void 0;r.changes.push(ki(t,a));var l=s?Re(t,a,null):{anchor:i.anchorBefore,head:i.headBefore};He(t,a,l,zn(t,a));var u=[];pi(t,function(t,e){e||-1!=Zi(u,t.history)||(Oi(t.history,a),u.push(t.history)),He(t,a,null,zn(t,a))})}}}}function Ue(t,e){function n(t){return Je(t.line+e,t.ch)}t.first+=e,t.cm&&ue(t.cm,t.first,t.first,e),t.sel.head=n(t.sel.head),t.sel.anchor=n(t.sel.anchor),t.sel.from=n(t.sel.from),t.sel.to=n(t.sel.to)}function He(t,e,n,i){if(t.cm&&!t.cm.curOp)return se(t.cm,He)(t,e,n,i);if(e.to.line<t.first)return Ue(t,e.text.length-1-(e.to.line-e.from.line)),void 0;if(!(e.from.line>t.lastLine())){if(e.from.line<t.first){var r=e.text.length-1-(t.first-e.from.line);Ue(t,r),e={from:Je(t.first,0),to:Je(e.to.line+r,e.to.ch),text:[Xi(e.text)],origin:e.origin}}var o=t.lastLine();e.to.line>o&&(e={from:e.from,to:Je(o,di(t,o).text.length),text:[e.text[0]],origin:e.origin}),e.removed=mi(t,e.from,e.to),n||(n=Re(t,e,null)),t.cm?qe(t.cm,e,i,n):ui(t,e,i,n)}}function qe(t,e,n,i){var o=t.doc,s=t.display,a=e.from,l=e.to,u=!1,h=a.line;t.options.lineWrapping||(h=yi(jn(o,di(o,a.line))),o.iter(h,l.line+1,function(t){return t==s.maxLine?(u=!0,!0):void 0})),Ke(o.sel.head,e.from)||Ke(e.to,o.sel.head)||(t.curOp.cursorActivity=!0),ui(o,e,n,i,r(t)),t.options.lineWrapping||(o.iter(h,a.line+e.text.length,function(t){var e=c(o,t);e>s.maxLineLength&&(s.maxLine=t,s.maxLineLength=e,s.maxLineChanged=!0,u=!1)}),u&&(t.curOp.updateMaxLine=!0)),o.frontier=Math.min(o.frontier,a.line),N(t,400);var p=e.text.length-(l.line-a.line)-1;if(ue(t,a.line,l.line+1,p),Wi(t,"change")){var f={from:a,to:l,text:e.text,removed:e.removed,origin:e.origin};if(t.curOp.textChanged){for(var d=t.curOp.textChanged;d.next;d=d.next);d.next=f}else t.curOp.textChanged=f}}function We(t,e,n,i,r){if(i||(i=n),Ke(i,n)){var o=i;i=n,n=o}"string"==typeof e&&(e=Io(e)),Fe(t,{from:n,to:i,text:e,origin:r},null)}function Je(t,e){return this instanceof Je?(this.line=t,this.ch=e,void 0):new Je(t,e)}function Ye(t,e){return t.line==e.line&&t.ch==e.ch}function Ke(t,e){return t.line<e.line||t.line==e.line&&t.ch<e.ch}function Ge(t){return Je(t.line,t.ch)}function Xe(t,e){return Math.max(t.first,Math.min(e,t.first+t.size-1))}function Qe(t,e){if(e.line<t.first)return Je(t.first,0);var n=t.first+t.size-1;return e.line>n?Je(n,di(t,n).text.length):Ze(e,di(t,e.line).text.length)}function Ze(t,e){var n=t.ch;return null==n||n>e?Je(t.line,e):0>n?Je(t.line,0):t}function tn(t,e){return e>=t.first&&e<t.first+t.size}function en(t,e,n,i){if(t.sel.shift||t.sel.extend){var r=t.sel.anchor;if(n){var o=Ke(e,r);o!=Ke(n,r)?(r=e,e=n):o!=Ke(e,n)&&(e=n)}rn(t,r,e,i)}else rn(t,e,n||e,i);t.cm&&(t.cm.curOp.userSelChange=!0)}function nn(t,e,n){var i={anchor:e,head:n};return ji(t,"beforeSelectionChange",t,i),t.cm&&ji(t.cm,"beforeSelectionChange",t.cm,i),i.anchor=Qe(t,i.anchor),i.head=Qe(t,i.head),i}function rn(t,e,n,i,r){if(!r&&Wi(t,"beforeSelectionChange")||t.cm&&Wi(t.cm,"beforeSelectionChange")){var o=nn(t,e,n);n=o.head,e=o.anchor}var s=t.sel;if(s.goalColumn=null,null==i&&(i=Ke(n,s.head)?-1:1),(r||!Ye(e,s.anchor))&&(e=sn(t,e,i,"push"!=r)),(r||!Ye(n,s.head))&&(n=sn(t,n,i,"push"!=r)),!Ye(s.anchor,e)||!Ye(s.head,n)){s.anchor=e,s.head=n;var a=Ke(n,e);s.from=a?n:e,s.to=a?e:n,t.cm&&(t.cm.curOp.updateInput=t.cm.curOp.selectionChanged=t.cm.curOp.cursorActivity=!0),Ui(t,"cursorActivity",t)}}function on(t){rn(t.doc,t.doc.sel.from,t.doc.sel.to,null,"push")}function sn(t,e,n,i){var r=!1,o=e,s=n||1;t.cantEdit=!1;t:for(;;){var a=di(t,o.line);if(a.markedSpans)for(var l=0;l<a.markedSpans.length;++l){var u=a.markedSpans[l],c=u.marker;if((null==u.from||(c.inclusiveLeft?u.from<=o.ch:u.from<o.ch))&&(null==u.to||(c.inclusiveRight?u.to>=o.ch:u.to>o.ch))){if(i&&(ji(c,"beforeCursorEnter"),c.explicitlyCleared)){if(a.markedSpans){--l;continue}break}if(!c.atomic)continue;var h=c.find()[0>s?"from":"to"];if(Ye(h,o)&&(h.ch+=s,h.ch<0?h=h.line>t.first?Qe(t,Je(h.line-1)):null:h.ch>a.text.length&&(h=h.line<t.first+t.size-1?Je(h.line+1,0):null),!h)){if(r)return i?(t.cantEdit=!0,Je(t.first,0)):sn(t,e,n,!0);r=!0,h=e,s=-s}o=h;continue t}}return o}}function an(t){var e=ln(t,t.doc.sel.head,null,t.options.cursorScrollMargin);if(t.state.focused){var n=t.display,i=cr(n.sizer),r=null;if(e.top+i.top<0?r=!0:e.bottom+i.top>(window.innerHeight||document.documentElement.clientHeight)&&(r=!1),null!=r&&!Rr){var o="none"==n.cursor.style.display;o&&(n.cursor.style.display="",n.cursor.style.left=e.left+"px",n.cursor.style.top=e.top-n.viewOffset+"px"),n.cursor.scrollIntoView(r),o&&(n.cursor.style.display="none")}}}function ln(t,e,n,i){for(null==i&&(i=0);;){var r=!1,o=Q(t,e),s=n&&n!=e?Q(t,n):o,a=cn(t,Math.min(o.left,s.left),Math.min(o.top,s.top)-i,Math.max(o.left,s.left),Math.max(o.bottom,s.bottom)+i),l=t.doc.scrollTop,u=t.doc.scrollLeft;if(null!=a.scrollTop&&(Ce(t,a.scrollTop),Math.abs(t.doc.scrollTop-l)>1&&(r=!0)),null!=a.scrollLeft&&(Ee(t,a.scrollLeft),Math.abs(t.doc.scrollLeft-u)>1&&(r=!0)),!r)return o}}function un(t,e,n,i,r){var o=cn(t,e,n,i,r);null!=o.scrollTop&&Ce(t,o.scrollTop),null!=o.scrollLeft&&Ee(t,o.scrollLeft)}function cn(t,e,n,i,r){var o=t.display,s=ne(t.display);0>n&&(n=0);var a=o.scroller.clientHeight-Eo,l=o.scroller.scrollTop,u={},c=t.doc.height+z(o),h=s>n,p=r>c-s;if(l>n)u.scrollTop=h?0:n;else if(r>l+a){var f=Math.min(n,(p?c:r)-a);f!=l&&(u.scrollTop=f)}var d=o.scroller.clientWidth-Eo,m=o.scroller.scrollLeft;e+=o.gutters.offsetWidth,i+=o.gutters.offsetWidth;var g=o.gutters.offsetWidth,v=g+10>e;return m+g>e||v?(v&&(e=0),u.scrollLeft=Math.max(0,e-10-g)):i>d+m-3&&(u.scrollLeft=i+10-d),u}function hn(t,e,n){t.curOp.updateScrollPos={scrollLeft:null==e?t.doc.scrollLeft:e,scrollTop:null==n?t.doc.scrollTop:n}}function pn(t,e,n){var i=t.curOp.updateScrollPos||(t.curOp.updateScrollPos={scrollLeft:t.doc.scrollLeft,scrollTop:t.doc.scrollTop}),r=t.display.scroller;i.scrollTop=Math.max(0,Math.min(r.scrollHeight-r.clientHeight,i.scrollTop+n)),i.scrollLeft=Math.max(0,Math.min(r.scrollWidth-r.clientWidth,i.scrollLeft+e))}function fn(t,e,n,i){var r=t.doc;if(null==n&&(n="add"),"smart"==n)if(t.doc.mode.indent)var o=L(t,e);else n="prev";var s,a=t.options.tabSize,l=di(r,e),u=Ki(l.text,null,a),c=l.text.match(/^\s*/)[0];if("smart"==n&&(s=t.doc.mode.indent(o,l.text.slice(c.length),l.text),s==To)){if(!i)return;n="prev"}"prev"==n?s=e>r.first?Ki(di(r,e-1).text,null,a):0:"add"==n?s=u+t.options.indentUnit:"subtract"==n?s=u-t.options.indentUnit:"number"==typeof n&&(s=u+n),s=Math.max(0,s);var h="",p=0;if(t.options.indentWithTabs)for(var f=Math.floor(s/a);f;--f)p+=a,h+="	";s>p&&(h+=Gi(s-p)),h!=c&&We(t.doc,h,Je(e,0),Je(e,c.length),"+input"),l.stateAfter=null}function dn(t,e,n){var i=e,r=e,o=t.doc;return"number"==typeof e?r=di(o,Xe(o,e)):i=yi(e),null==i?null:n(r,i)?(ue(t,i,i+1),r):null}function mn(t,e,n,i,r){function o(){var e=a+n;return e<t.first||e>=t.first+t.size?h=!1:(a=e,c=di(t,e))}function s(t){var e=(r?kr:Cr)(c,l,n,!0);if(null==e){if(t||!o())return h=!1;l=r?(0>n?yr:vr)(c):0>n?c.text.length:0}else l=e;return!0}var a=e.line,l=e.ch,u=n,c=di(t,a),h=!0;if("char"==i)s();else if("column"==i)s(!0);else if("word"==i||"group"==i)for(var p=null,f="group"==i,d=!0;!(0>n)||s(!d);d=!1){var m=c.text.charAt(l)||"\n",g=rr(m)?"w":f?/\s/.test(m)?null:"p":null;if(p&&p!=g){0>n&&(n=1,s());break}if(g&&(p=g),n>0&&!s(!d))break}var v=sn(t,Je(a,l),u,!0);return h||(v.hitSide=!0),v}function gn(t,e,n,i){var r,o=t.doc,s=e.left;if("page"==i){var a=Math.min(t.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);r=e.top+n*(a-(0>n?1.5:.5)*ne(t.display))}else"line"==i&&(r=n>0?e.bottom+3:e.top-3);for(;;){var l=te(t,s,r);if(!l.outside)break;if(0>n?0>=r:r>=o.height){l.hitSide=!0;break}r+=5*n}return l}function vn(t,e){var n=e.ch,i=e.ch;if(t){(e.xRel<0||i==t.length)&&n?--n:++i;for(var r=t.charAt(n),o=rr(r)?rr:/\s/.test(r)?function(t){return/\s/.test(t)}:function(t){return!/\s/.test(t)&&!rr(t)};n>0&&o(t.charAt(n-1));)--n;for(;i<t.length&&o(t.charAt(i));)++i}return{from:Je(e.line,n),to:Je(e.line,i)}}function yn(t,e){en(t.doc,Je(e,0),Qe(t.doc,Je(e+1,0)))}function bn(e,n,i,r){t.defaults[e]=n,i&&(oo[e]=r?function(t,e,n){n!=ao&&i(t,e,n)}:i)}function wn(t,e){if(e===!0)return e;if(t.copyState)return t.copyState(e);var n={};for(var i in e){var r=e[i];r instanceof Array&&(r=r.concat([])),n[i]=r}return n}function _n(t,e,n){return t.startState?t.startState(e,n):!0}function xn(t){return"string"==typeof t?mo[t]:t}function Sn(t,e,n){function i(e){e=xn(e);var r=e[t];if(r===!1)return"stop";if(null!=r&&n(r))return!0;if(e.nofallthrough)return"stop";var o=e.fallthrough;if(null==o)return!1;if("[object Array]"!=Object.prototype.toString.call(o))return i(o);for(var s=0,a=o.length;a>s;++s){var l=i(o[s]);if(l)return l}return!1}for(var r=0;r<e.length;++r){var o=i(e[r]);if(o)return"stop"!=o}}function kn(t){var e=zo[t.keyCode];return"Ctrl"==e||"Alt"==e||"Shift"==e||"Mod"==e}function Cn(t,e){if(Dr&&34==t.keyCode&&t["char"])return!1;var n=zo[t.keyCode];return null==n||t.altGraphKey?!1:(t.altKey&&(n="Alt-"+n),(Jr?t.metaKey:t.ctrlKey)&&(n="Ctrl-"+n),(Jr?t.ctrlKey:t.metaKey)&&(n="Cmd-"+n),!e&&t.shiftKey&&(n="Shift-"+n),n)}function En(t,e){this.pos=this.start=0,this.string=t,this.tabSize=e||8,this.lastColumnPos=this.lastColumnValue=0}function Tn(t,e){this.lines=[],this.type=e,this.doc=t}function Mn(t,e,n,i,r){if(i&&i.shared)return An(t,e,n,i,r);if(t.cm&&!t.cm.curOp)return se(t.cm,Mn)(t,e,n,i,r);var o=new Tn(t,r);if("range"==r&&!Ke(e,n))return o;i&&er(i,o),o.replacedWith&&(o.collapsed=!0,o.replacedWith=sr("span",[o.replacedWith],"CodeMirror-widget"),i.handleMouseEvents||(o.replacedWith.ignoreEvents=!0)),o.collapsed&&(Gr=!0),o.addToHistory&&Ci(t,{from:e,to:n,origin:"markText"},{head:t.sel.head,anchor:t.sel.anchor},0/0);var s,a,l,u=e.line,c=0,h=t.cm;if(t.iter(u,n.line+1,function(i){h&&o.collapsed&&!h.options.lineWrapping&&jn(t,i)==h.display.maxLine&&(l=!0);var r={from:null,to:null,marker:o};c+=i.text.length,u==e.line&&(r.from=e.ch,c-=e.ch),u==n.line&&(r.to=n.ch,c-=i.text.length-n.ch),o.collapsed&&(u==n.line&&(a=Bn(i,n.ch)),u==e.line?s=Bn(i,e.ch):vi(i,0)),Dn(i,r),++u}),o.collapsed&&t.iter(e.line,n.line+1,function(e){Un(t,e)&&vi(e,0)}),o.clearOnEnter&&Fi(o,"beforeCursorEnter",function(){o.clear()}),o.readOnly&&(Kr=!0,(t.history.done.length||t.history.undone.length)&&t.clearHistory()),o.collapsed){if(s!=a)throw new Error("Inserting collapsed marker overlapping an existing one");o.size=c,o.atomic=!0}return h&&(l&&(h.curOp.updateMaxLine=!0),(o.className||o.title||o.startStyle||o.endStyle||o.collapsed)&&ue(h,e.line,n.line+1),o.atomic&&on(h)),o}function Pn(t,e){this.markers=t,this.primary=e;for(var n=0,i=this;n<t.length;++n)t[n].parent=this,Fi(t[n],"clear",function(){i.clear()})}function An(t,e,n,i,r){i=er(i),i.shared=!1;var o=[Mn(t,e,n,i,r)],s=o[0],a=i.replacedWith;return pi(t,function(t){a&&(i.replacedWith=a.cloneNode(!0)),o.push(Mn(t,Qe(t,e),Qe(t,n),i,r));for(var l=0;l<t.linked.length;++l)if(t.linked[l].isParent)return;s=Xi(o)}),new Pn(o,s)}function On(t,e){if(t)for(var n=0;n<t.length;++n){var i=t[n];if(i.marker==e)return i}}function Nn(t,e){for(var n,i=0;i<t.length;++i)t[i]!=e&&(n||(n=[])).push(t[i]);return n}function Dn(t,e){t.markedSpans=t.markedSpans?t.markedSpans.concat([e]):[e],e.marker.attachLine(t)}function In(t,e,n){if(t)for(var i,r=0;r<t.length;++r){var o=t[r],s=o.marker,a=null==o.from||(s.inclusiveLeft?o.from<=e:o.from<e);if(a||"bookmark"==s.type&&o.from==e&&(!n||!o.marker.insertLeft)){var l=null==o.to||(s.inclusiveRight?o.to>=e:o.to>e);(i||(i=[])).push({from:o.from,to:l?null:o.to,marker:s})}}return i}function Ln(t,e,n){if(t)for(var i,r=0;r<t.length;++r){var o=t[r],s=o.marker,a=null==o.to||(s.inclusiveRight?o.to>=e:o.to>e);if(a||"bookmark"==s.type&&o.from==e&&(!n||o.marker.insertLeft)){var l=null==o.from||(s.inclusiveLeft?o.from<=e:o.from<e);(i||(i=[])).push({from:l?null:o.from-e,to:null==o.to?null:o.to-e,marker:s})}}return i}function $n(t,e){var n=tn(t,e.from.line)&&di(t,e.from.line).markedSpans,i=tn(t,e.to.line)&&di(t,e.to.line).markedSpans;if(!n&&!i)return null;var r=e.from.ch,o=e.to.ch,s=Ye(e.from,e.to),a=In(n,r,s),l=Ln(i,o,s),u=1==e.text.length,c=Xi(e.text).length+(u?r:0);if(a)for(var h=0;h<a.length;++h){var p=a[h];if(null==p.to){var f=On(l,p.marker);f?u&&(p.to=null==f.to?null:f.to+c):p.to=r}}if(l)for(var h=0;h<l.length;++h){var p=l[h];if(null!=p.to&&(p.to+=c),null==p.from){var f=On(a,p.marker);f||(p.from=c,u&&(a||(a=[])).push(p))}else p.from+=c,u&&(a||(a=[])).push(p)}if(u&&a){for(var h=0;h<a.length;++h)null!=a[h].from&&a[h].from==a[h].to&&"bookmark"!=a[h].marker.type&&a.splice(h--,1);a.length||(a=null)}var d=[a];if(!u){var m,g=e.text.length-2;if(g>0&&a)for(var h=0;h<a.length;++h)null==a[h].to&&(m||(m=[])).push({from:null,to:null,marker:a[h].marker});for(var h=0;g>h;++h)d.push(m);d.push(l)}return d}function zn(t,e){var n=Ti(t,e),i=$n(t,e);if(!n)return i;if(!i)return n;for(var r=0;r<n.length;++r){var o=n[r],s=i[r];if(o&&s)t:for(var a=0;a<s.length;++a){for(var l=s[a],u=0;u<o.length;++u)if(o[u].marker==l.marker)continue t;o.push(l)}else s&&(n[r]=s)}return n}function Rn(t,e,n){var i=null;if(t.iter(e.line,n.line+1,function(t){if(t.markedSpans)for(var e=0;e<t.markedSpans.length;++e){var n=t.markedSpans[e].marker;!n.readOnly||i&&-1!=Zi(i,n)||(i||(i=[])).push(n)}}),!i)return null;for(var r=[{from:e,to:n}],o=0;o<i.length;++o)for(var s=i[o],a=s.find(),l=0;l<r.length;++l){var u=r[l];if(!Ke(u.to,a.from)&&!Ke(a.to,u.from)){var c=[l,1];(Ke(u.from,a.from)||!s.inclusiveLeft&&Ye(u.from,a.from))&&c.push({from:u.from,to:a.from}),(Ke(a.to,u.to)||!s.inclusiveRight&&Ye(u.to,a.to))&&c.push({from:a.to,to:u.to}),r.splice.apply(r,c),l+=c.length-1}}return r}function Bn(t,e){var n,i=Gr&&t.markedSpans;if(i)for(var r,o=0;o<i.length;++o)r=i[o],r.marker.collapsed&&(null==r.from||r.from<e)&&(null==r.to||r.to>e)&&(!n||n.width<r.marker.width)&&(n=r.marker);return n}function Fn(t){return Bn(t,-1)}function Vn(t){return Bn(t,t.text.length+1)}function jn(t,e){for(var n;n=Fn(e);)e=di(t,n.find().from.line);return e}function Un(t,e){var n=Gr&&e.markedSpans;if(n)for(var i,r=0;r<n.length;++r)if(i=n[r],i.marker.collapsed){if(null==i.from)return!0;if(!i.marker.replacedWith&&0==i.from&&i.marker.inclusiveLeft&&Hn(t,e,i))return!0}}function Hn(t,e,n){if(null==n.to){var i=n.marker.find().to,r=di(t,i.line);return Hn(t,r,On(r.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==e.text.length)return!0;for(var o,s=0;s<e.markedSpans.length;++s)if(o=e.markedSpans[s],o.marker.collapsed&&!o.marker.replacedWith&&o.from==n.to&&(o.marker.inclusiveLeft||n.marker.inclusiveRight)&&Hn(t,e,o))return!0}function qn(t){var e=t.markedSpans;if(e){for(var n=0;n<e.length;++n)e[n].marker.detachLine(t);t.markedSpans=null}}function Wn(t,e){if(e){for(var n=0;n<e.length;++n)e[n].marker.attachLine(t);t.markedSpans=e}}function Jn(t){return function(){var e=!this.cm.curOp;e&&re(this.cm);try{var n=t.apply(this,arguments)}finally{e&&oe(this.cm)}return n}}function Yn(t){return null!=t.height?t.height:(t.node.parentNode&&1==t.node.parentNode.nodeType||lr(t.cm.display.measure,sr("div",[t.node],null,"position: relative")),t.height=t.node.offsetHeight)}function Kn(t,e,n,i){var r=new go(t,n,i);return r.noHScroll&&(t.display.alignWidgets=!0),dn(t,e,function(e){var n=e.widgets||(e.widgets=[]);if(null==r.insertAt?n.push(r):n.splice(Math.min(n.length-1,Math.max(0,r.insertAt)),0,r),r.line=e,!Un(t.doc,e)||r.showIfHidden){var i=wi(t,e)<t.doc.scrollTop;vi(e,e.height+Yn(r)),i&&pn(t,0,r.height)}return!0}),r}function Gn(t,e,n,i){t.text=e,t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null),null!=t.order&&(t.order=null),qn(t),Wn(t,n);var r=i?i(t):1;r!=t.height&&vi(t,r)}function Xn(t){t.parent=null,qn(t)}function Qn(t,e,n,i,r){var o=n.flattenSpans;null==o&&(o=t.options.flattenSpans);var s,a=0,l=null,u=new En(e,t.options.tabSize);for(""==e&&n.blankLine&&n.blankLine(i);!u.eol();)u.pos>t.options.maxHighlightLength?(o=!1,u.pos=e.length,s=null):s=n.token(u,i),o&&l==s||(a<u.start&&r(u.start,l),a=u.start,l=s),u.start=u.pos;for(;a<u.pos;){var c=Math.min(u.pos,a+5e4);r(c,l),a=c}}function Zn(t,e,n){var i=[t.state.modeGen];Qn(t,e.text,t.doc.mode,n,function(t,e){i.push(t,e)});for(var r=0;r<t.state.overlays.length;++r){var o=t.state.overlays[r],s=1,a=0;Qn(t,e.text,o.mode,!0,function(t,e){for(var n=s;t>a;){var r=i[s];r>t&&i.splice(s,1,t,i[s+1],r),s+=2,a=Math.min(t,r)}if(e)if(o.opaque)i.splice(n,s-n,t,e),s=n+2;else for(;s>n;n+=2){var l=i[n+1];i[n+1]=l?l+" "+e:e}})}return i}function ti(t,e){return e.styles&&e.styles[0]==t.state.modeGen||(e.styles=Zn(t,e,e.stateAfter=L(t,yi(e)))),e.styles}function ei(t,e,n){var i=t.doc.mode,r=new En(e.text,t.options.tabSize);for(""==e.text&&i.blankLine&&i.blankLine(n);!r.eol()&&r.pos<=t.options.maxHighlightLength;)i.token(r,n),r.start=r.pos}function ni(t,e){if(!t)return null;for(;;){var n=t.match(/(?:^|\s)line-(background-)?(\S+)/);if(!n)break;t=t.slice(0,n.index)+t.slice(n.index+n[0].length);var i=n[1]?"bgClass":"textClass";null==e[i]?e[i]=n[2]:new RegExp("(?:^|s)"+n[2]+"(?:$|s)").test(e[i])||(e[i]+=" "+n[2])}return yo[t]||(yo[t]="cm-"+t.replace(/ +/g," cm-"))}function ii(t,e,n,i){for(var r,o=e,s=!0;r=Fn(o);)o=di(t.doc,r.find().from.line);var a={pre:sr("pre"),col:0,pos:0,measure:null,measuredSomething:!1,cm:t,copyWidgets:i};do{o.text&&(s=!1),a.measure=o==e&&n,a.pos=0,a.addToken=a.measure?oi:ri,(Tr||Ar)&&t.getOption("lineWrapping")&&(a.addToken=si(a.addToken));var l=li(o,a,ti(t,o));n&&o==e&&!a.measuredSomething&&(n[0]=a.pre.appendChild(fr(t.display.measure)),a.measuredSomething=!0),l&&(o=di(t.doc,l.to.line))}while(l);!n||a.measuredSomething||n[0]||(n[0]=a.pre.appendChild(s?sr("span"," "):fr(t.display.measure))),a.pre.firstChild||Un(t.doc,e)||a.pre.appendChild(document.createTextNode(" "));var u;if(n&&Tr&&(u=_i(o))){var c=u.length-1;u[c].from==u[c].to&&--c;var h=u[c],p=u[c-1];if(h.from+1==h.to&&p&&h.level<p.level){var f=n[a.pos-1];f&&f.parentNode.insertBefore(f.measureRight=fr(t.display.measure),f.nextSibling)}}var d=a.textClass?a.textClass+" "+(e.textClass||""):e.textClass;return d&&(a.pre.className=d),ji(t,"renderLine",t,e,a.pre),a}function ri(t,e,n,i,r,o){if(e){if(bo.test(e))for(var s=document.createDocumentFragment(),a=0;;){bo.lastIndex=a;var l=bo.exec(e),u=l?l.index-a:e.length-a;if(u&&(s.appendChild(document.createTextNode(e.slice(a,a+u))),t.col+=u),!l)break;if(a+=u+1,"	"==l[0]){var c=t.cm.options.tabSize,h=c-t.col%c;s.appendChild(sr("span",Gi(h),"cm-tab")),t.col+=h}else{var p=sr("span","•","cm-invalidchar");p.title="\\u"+l[0].charCodeAt(0).toString(16),s.appendChild(p),t.col+=1}}else{t.col+=e.length;var s=document.createTextNode(e)}if(n||i||r||t.measure){var f=n||"";i&&(f+=i),r&&(f+=r);var p=sr("span",[s],f);return o&&(p.title=o),t.pre.appendChild(p)}t.pre.appendChild(s)}}function oi(t,e,n,i,r){for(var o=t.cm.options.lineWrapping,s=0;s<e.length;++s){var a=e.charAt(s),l=0==s;a>=""&&"">a&&s<e.length-1?(a=e.slice(s,s+2),++s):s&&o&&hr(e,s)&&t.pre.appendChild(sr("wbr"));var u=t.measure[t.pos],c=t.measure[t.pos]=ri(t,a,n,l&&i,s==e.length-1&&r);u&&(c.leftSide=u.leftSide||u),Tr&&o&&" "==a&&s&&!/\s/.test(e.charAt(s-1))&&s<e.length-1&&!/\s/.test(e.charAt(s+1))&&(c.style.whiteSpace="normal"),t.pos+=a.length}e.length&&(t.measuredSomething=!0)}function si(t){function e(t){for(var e=" ",n=0;n<t.length-2;++n)e+=n%2?" ":" ";return e+=" "}return function(n,i,r,o,s,a){return t(n,i.replace(/ {3,}/g,e),r,o,s,a)}}function ai(t,e,n,i){var r=!i&&n.replacedWith;if(r&&(t.copyWidgets&&(r=r.cloneNode(!0)),t.pre.appendChild(r),t.measure)){if(e)t.measure[t.pos]=r;else{var o=fr(t.cm.display.measure);if("bookmark"!=n.type||n.insertLeft){if(t.measure[t.pos])return;t.measure[t.pos]=t.pre.insertBefore(o,r)}else t.measure[t.pos]=t.pre.appendChild(o)}t.measuredSomething=!0}t.pos+=e}function li(t,e,n){var i=t.markedSpans,r=t.text,o=0;if(i)for(var s,a,l,u,c,h,p=r.length,f=0,d=1,m="",g=0;;){if(g==f){a=l=u=c="",h=null,g=1/0;for(var v=[],y=0;y<i.length;++y){var b=i[y],w=b.marker;b.from<=f&&(null==b.to||b.to>f)?(null!=b.to&&g>b.to&&(g=b.to,l=""),w.className&&(a+=" "+w.className),w.startStyle&&b.from==f&&(u+=" "+w.startStyle),w.endStyle&&b.to==g&&(l+=" "+w.endStyle),w.title&&!c&&(c=w.title),w.collapsed&&(!h||h.marker.size<w.size)&&(h=b)):b.from>f&&g>b.from&&(g=b.from),"bookmark"==w.type&&b.from==f&&w.replacedWith&&v.push(w)}if(h&&(h.from||0)==f&&(ai(e,(null==h.to?p:h.to)-f,h.marker,null==h.from),null==h.to))return h.marker.find();if(!h&&v.length)for(var y=0;y<v.length;++y)ai(e,0,v[y])}if(f>=p)break;for(var _=Math.min(p,g);;){if(m){var x=f+m.length;if(!h){var S=x>_?m.slice(0,_-f):m;e.addToken(e,S,s?s+a:a,u,f+S.length==g?l:"",c)
}if(x>=_){m=m.slice(_-f),f=_;break}f=x,u=""}m=r.slice(o,o=n[d++]),s=ni(n[d++],e)}}else for(var d=1;d<n.length;d+=2)e.addToken(e,r.slice(o,o=n[d]),ni(n[d+1],e))}function ui(t,e,n,i,r){function o(t){return n?n[t]:null}function s(t,n,i){Gn(t,n,i,r),Ui(t,"change",t,e)}var a=e.from,l=e.to,u=e.text,c=di(t,a.line),h=di(t,l.line),p=Xi(u),f=o(u.length-1),d=l.line-a.line;if(0==a.ch&&0==l.ch&&""==p){for(var m=0,g=u.length-1,v=[];g>m;++m)v.push(new vo(u[m],o(m),r));s(h,h.text,f),d&&t.remove(a.line,d),v.length&&t.insert(a.line,v)}else if(c==h)if(1==u.length)s(c,c.text.slice(0,a.ch)+p+c.text.slice(l.ch),f);else{for(var v=[],m=1,g=u.length-1;g>m;++m)v.push(new vo(u[m],o(m),r));v.push(new vo(p+c.text.slice(l.ch),f,r)),s(c,c.text.slice(0,a.ch)+u[0],o(0)),t.insert(a.line+1,v)}else if(1==u.length)s(c,c.text.slice(0,a.ch)+u[0]+h.text.slice(l.ch),o(0)),t.remove(a.line+1,d);else{s(c,c.text.slice(0,a.ch)+u[0],o(0)),s(h,p+h.text.slice(l.ch),f);for(var m=1,g=u.length-1,v=[];g>m;++m)v.push(new vo(u[m],o(m),r));d>1&&t.remove(a.line+1,d-1),t.insert(a.line+1,v)}Ui(t,"change",t,e),rn(t,i.anchor,i.head,null,!0)}function ci(t){this.lines=t,this.parent=null;for(var e=0,n=t.length,i=0;n>e;++e)t[e].parent=this,i+=t[e].height;this.height=i}function hi(t){this.children=t;for(var e=0,n=0,i=0,r=t.length;r>i;++i){var o=t[i];e+=o.chunkSize(),n+=o.height,o.parent=this}this.size=e,this.height=n,this.parent=null}function pi(t,e,n){function i(t,r,o){if(t.linked)for(var s=0;s<t.linked.length;++s){var a=t.linked[s];if(a.doc!=r){var l=o&&a.sharedHist;(!n||l)&&(e(a.doc,l),i(a.doc,t,l))}}}i(t,null,!0)}function fi(t,e){if(e.cm)throw new Error("This document is already in use.");t.doc=e,e.cm=t,o(t),n(t),t.options.lineWrapping||h(t),t.options.mode=e.modeOption,ue(t)}function di(t,e){for(e-=t.first;!t.lines;)for(var n=0;;++n){var i=t.children[n],r=i.chunkSize();if(r>e){t=i;break}e-=r}return t.lines[e]}function mi(t,e,n){var i=[],r=e.line;return t.iter(e.line,n.line+1,function(t){var o=t.text;r==n.line&&(o=o.slice(0,n.ch)),r==e.line&&(o=o.slice(e.ch)),i.push(o),++r}),i}function gi(t,e,n){var i=[];return t.iter(e,n,function(t){i.push(t.text)}),i}function vi(t,e){for(var n=e-t.height,i=t;i;i=i.parent)i.height+=n}function yi(t){if(null==t.parent)return null;for(var e=t.parent,n=Zi(e.lines,t),i=e.parent;i;e=i,i=i.parent)for(var r=0;i.children[r]!=e;++r)n+=i.children[r].chunkSize();return n+e.first}function bi(t,e){var n=t.first;t:do{for(var i=0,r=t.children.length;r>i;++i){var o=t.children[i],s=o.height;if(s>e){t=o;continue t}e-=s,n+=o.chunkSize()}return n}while(!t.lines);for(var i=0,r=t.lines.length;r>i;++i){var a=t.lines[i],l=a.height;if(l>e)break;e-=l}return n+i}function wi(t,e){e=jn(t.doc,e);for(var n=0,i=e.parent,r=0;r<i.lines.length;++r){var o=i.lines[r];if(o==e)break;n+=o.height}for(var s=i.parent;s;i=s,s=i.parent)for(var r=0;r<s.children.length;++r){var a=s.children[r];if(a==i)break;n+=a.height}return n}function _i(t){var e=t.order;return null==e&&(e=t.order=Bo(t.text)),e}function xi(t){return{done:[],undone:[],undoDepth:1/0,lastTime:0,lastOp:null,lastOrigin:null,generation:t||1,maxGeneration:t||1}}function Si(t,e,n,i){var r=e["spans_"+t.id],o=0;t.iter(Math.max(t.first,n),Math.min(t.first+t.size,i),function(n){n.markedSpans&&((r||(r=e["spans_"+t.id]={}))[o]=n.markedSpans),++o})}function ki(t,e){var n={line:e.from.line,ch:e.from.ch},i={from:n,to:ro(e),text:mi(t,e.from,e.to)};return Si(t,i,e.from.line,e.to.line+1),pi(t,function(t){Si(t,i,e.from.line,e.to.line+1)},!0),i}function Ci(t,e,n,i){var r=t.history;r.undone.length=0;var o=+new Date,s=Xi(r.done);if(s&&(r.lastOp==i||r.lastOrigin==e.origin&&e.origin&&("+"==e.origin.charAt(0)&&t.cm&&r.lastTime>o-t.cm.options.historyEventDelay||"*"==e.origin.charAt(0)))){var a=Xi(s.changes);Ye(e.from,e.to)&&Ye(e.from,a.to)?a.to=ro(e):s.changes.push(ki(t,e)),s.anchorAfter=n.anchor,s.headAfter=n.head}else for(s={changes:[ki(t,e)],generation:r.generation,anchorBefore:t.sel.anchor,headBefore:t.sel.head,anchorAfter:n.anchor,headAfter:n.head},r.done.push(s),r.generation=++r.maxGeneration;r.done.length>r.undoDepth;)r.done.shift();r.lastTime=o,r.lastOp=i,r.lastOrigin=e.origin}function Ei(t){if(!t)return null;for(var e,n=0;n<t.length;++n)t[n].marker.explicitlyCleared?e||(e=t.slice(0,n)):e&&e.push(t[n]);return e?e.length?e:null:t}function Ti(t,e){var n=e["spans_"+t.id];if(!n)return null;for(var i=0,r=[];i<e.text.length;++i)r.push(Ei(n[i]));return r}function Mi(t,e){for(var n=0,i=[];n<t.length;++n){var r=t[n],o=r.changes,s=[];i.push({changes:s,anchorBefore:r.anchorBefore,headBefore:r.headBefore,anchorAfter:r.anchorAfter,headAfter:r.headAfter});for(var a=0;a<o.length;++a){var l,u=o[a];if(s.push({from:u.from,to:u.to,text:u.text}),e)for(var c in u)(l=c.match(/^spans_(\d+)$/))&&Zi(e,Number(l[1]))>-1&&(Xi(s)[c]=u[c],delete u[c])}}return i}function Pi(t,e,n,i){n<t.line?t.line+=i:e<t.line&&(t.line=e,t.ch=0)}function Ai(t,e,n,i){for(var r=0;r<t.length;++r){for(var o=t[r],s=!0,a=0;a<o.changes.length;++a){var l=o.changes[a];if(o.copied||(l.from=Ge(l.from),l.to=Ge(l.to)),n<l.from.line)l.from.line+=i,l.to.line+=i;else if(e<=l.to.line){s=!1;break}}o.copied||(o.anchorBefore=Ge(o.anchorBefore),o.headBefore=Ge(o.headBefore),o.anchorAfter=Ge(o.anchorAfter),o.readAfter=Ge(o.headAfter),o.copied=!0),s?(Pi(o.anchorBefore),Pi(o.headBefore),Pi(o.anchorAfter),Pi(o.headAfter)):(t.splice(0,r+1),r=0)}}function Oi(t,e){var n=e.from.line,i=e.to.line,r=e.text.length-(i-n)-1;Ai(t.done,n,i,r),Ai(t.undone,n,i,r)}function Ni(){zi(this)}function Di(t){return t.stop||(t.stop=Ni),t}function Ii(t){t.preventDefault?t.preventDefault():t.returnValue=!1}function Li(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}function $i(t){return null!=t.defaultPrevented?t.defaultPrevented:0==t.returnValue}function zi(t){Ii(t),Li(t)}function Ri(t){return t.target||t.srcElement}function Bi(t){var e=t.which;return null==e&&(1&t.button?e=1:2&t.button?e=3:4&t.button&&(e=2)),Vr&&t.ctrlKey&&1==e&&(e=3),e}function Fi(t,e,n){if(t.addEventListener)t.addEventListener(e,n,!1);else if(t.attachEvent)t.attachEvent("on"+e,n);else{var i=t._handlers||(t._handlers={}),r=i[e]||(i[e]=[]);r.push(n)}}function Vi(t,e,n){if(t.removeEventListener)t.removeEventListener(e,n,!1);else if(t.detachEvent)t.detachEvent("on"+e,n);else{var i=t._handlers&&t._handlers[e];if(!i)return;for(var r=0;r<i.length;++r)if(i[r]==n){i.splice(r,1);break}}}function ji(t,e){var n=t._handlers&&t._handlers[e];if(n)for(var i=Array.prototype.slice.call(arguments,2),r=0;r<n.length;++r)n[r].apply(null,i)}function Ui(t,e){function n(t){return function(){t.apply(null,r)}}var i=t._handlers&&t._handlers[e];if(i){var r=Array.prototype.slice.call(arguments,2);ko||(++Co,ko=[],setTimeout(qi,0));for(var o=0;o<i.length;++o)ko.push(n(i[o]))}}function Hi(t,e,n){return ji(t,n||e.type,t,e),$i(e)||e.codemirrorIgnore}function qi(){--Co;var t=ko;ko=null;for(var e=0;e<t.length;++e)t[e]()}function Wi(t,e){var n=t._handlers&&t._handlers[e];return n&&n.length>0}function Ji(t){t.prototype.on=function(t,e){Fi(this,t,e)},t.prototype.off=function(t,e){Vi(this,t,e)}}function Yi(){this.id=null}function Ki(t,e,n,i,r){null==e&&(e=t.search(/[^\s\u00a0]/),-1==e&&(e=t.length));for(var o=i||0,s=r||0;e>o;++o)"	"==t.charAt(o)?s+=n-s%n:++s;return s}function Gi(t){for(;Mo.length<=t;)Mo.push(Xi(Mo)+" ");return Mo[t]}function Xi(t){return t[t.length-1]}function Qi(t){if(Br)t.selectionStart=0,t.selectionEnd=t.value.length;else try{t.select()}catch(e){}}function Zi(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0,i=t.length;i>n;++n)if(t[n]==e)return n;return-1}function tr(t,e){function n(){}n.prototype=t;var i=new n;return e&&er(e,i),i}function er(t,e){e||(e={});for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function nr(t){for(var e=[],n=0;t>n;++n)e.push(void 0);return e}function ir(t){var e=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,e)}}function rr(t){return/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||Po.test(t))}function or(t){for(var e in t)if(t.hasOwnProperty(e)&&t[e])return!1;return!0}function sr(t,e,n,i){var r=document.createElement(t);if(n&&(r.className=n),i&&(r.style.cssText=i),"string"==typeof e)ur(r,e);else if(e)for(var o=0;o<e.length;++o)r.appendChild(e[o]);return r}function ar(t){for(var e=t.childNodes.length;e>0;--e)t.removeChild(t.firstChild);return t}function lr(t,e){return ar(t).appendChild(e)}function ur(t,e){Pr?(t.innerHTML="",t.appendChild(document.createTextNode(e))):t.textContent=e}function cr(t){return t.getBoundingClientRect()}function hr(){return!1}function pr(t){if(null!=No)return No;var e=sr("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");return lr(t,e),e.offsetWidth&&(No=e.offsetHeight-e.clientHeight),No||0}function fr(t){if(null==Do){var e=sr("span","​");lr(t,sr("span",[e,document.createTextNode("x")])),0!=t.firstChild.offsetHeight&&(Do=e.offsetWidth<=1&&e.offsetHeight>2&&!Mr)}return Do?sr("span","​"):sr("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px")}function dr(t,e,n,i){if(!t)return i(e,n,"ltr");for(var r=!1,o=0;o<t.length;++o){var s=t[o];(s.from<n&&s.to>e||e==n&&s.to==e)&&(i(Math.max(s.from,e),Math.min(s.to,n),1==s.level?"rtl":"ltr"),r=!0)}r||i(e,n,"ltr")}function mr(t){return t.level%2?t.to:t.from}function gr(t){return t.level%2?t.from:t.to}function vr(t){var e=_i(t);return e?mr(e[0]):0}function yr(t){var e=_i(t);return e?gr(Xi(e)):t.text.length}function br(t,e){var n=di(t.doc,e),i=jn(t.doc,n);i!=n&&(e=yi(i));var r=_i(i),o=r?r[0].level%2?yr(i):vr(i):0;return Je(e,o)}function wr(t,e){for(var n,i;n=Vn(i=di(t.doc,e));)e=n.find().to.line;var r=_i(i),o=r?r[0].level%2?vr(i):yr(i):i.text.length;return Je(e,o)}function _r(t,e,n){var i=t[0].level;return e==i?!0:n==i?!1:n>e}function xr(t,e){for(var n,i=0;i<t.length;++i){var r=t[i];if(r.from<e&&r.to>e)return Ro=null,i;if(r.from==e||r.to==e){if(null!=n)return _r(t,r.level,t[n].level)?(Ro=n,i):(Ro=i,n);n=i}}return Ro=null,n}function Sr(t,e,n,i){if(!i)return e+n;do e+=n;while(e>0&&Ao.test(t.text.charAt(e)));return e}function kr(t,e,n,i){var r=_i(t);if(!r)return Cr(t,e,n,i);for(var o=xr(r,e),s=r[o],a=Sr(t,e,s.level%2?-n:n,i);;){if(a>s.from&&a<s.to)return a;if(a==s.from||a==s.to)return xr(r,a)==o?a:(s=r[o+=n],n>0==s.level%2?s.to:s.from);if(s=r[o+=n],!s)return null;a=n>0==s.level%2?Sr(t,s.to,-1,i):Sr(t,s.from,1,i)}}function Cr(t,e,n,i){var r=e+n;if(i)for(;r>0&&Ao.test(t.text.charAt(r));)r+=n;return 0>r||r>t.text.length?null:r}var Er=/gecko\/\d/i.test(navigator.userAgent),Tr=/MSIE \d/.test(navigator.userAgent),Mr=Tr&&(null==document.documentMode||document.documentMode<8),Pr=Tr&&(null==document.documentMode||document.documentMode<9),Ar=/WebKit\//.test(navigator.userAgent),Or=Ar&&/Qt\/\d+\.\d+/.test(navigator.userAgent),Nr=/Chrome\//.test(navigator.userAgent),Dr=/Opera\//.test(navigator.userAgent),Ir=/Apple Computer/.test(navigator.vendor),Lr=/KHTML\//.test(navigator.userAgent),$r=/Mac OS X 1\d\D([7-9]|\d\d)\D/.test(navigator.userAgent),zr=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),Rr=/PhantomJS/.test(navigator.userAgent),Br=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),Fr=Br||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),Vr=Br||/Mac/.test(navigator.platform),jr=/win/i.test(navigator.platform),Ur=Dr&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);Ur&&(Ur=Number(Ur[1])),Ur&&Ur>=15&&(Dr=!1,Ar=!0);var Hr,qr,Wr,Jr=Vr&&(Or||Dr&&(null==Ur||12.11>Ur)),Yr=Er||Tr&&!Pr,Kr=!1,Gr=!1,Xr=0,Qr=0,Zr=0,to=null;Tr?to=-.53:Er?to=15:Nr?to=-.7:Ir&&(to=-1/3);var eo,no,io=null,ro=t.changeEnd=function(t){return t.text?Je(t.from.line+t.text.length-1,Xi(t.text).length+(1==t.text.length?t.from.ch:0)):t.to};t.Pos=Je,t.prototype={constructor:t,focus:function(){window.focus(),de(this),Ie(this),he(this)},setOption:function(t,e){var n=this.options,i=n[t];(n[t]!=e||"mode"==t)&&(n[t]=e,oo.hasOwnProperty(t)&&se(this,oo[t])(this,e,i))},getOption:function(t){return this.options[t]},getDoc:function(){return this.doc},addKeyMap:function(t,e){this.state.keyMaps[e?"push":"unshift"](t)},removeKeyMap:function(t){for(var e=this.state.keyMaps,n=0;n<e.length;++n)if(e[n]==t||"string"!=typeof e[n]&&e[n].name==t)return e.splice(n,1),!0},addOverlay:se(null,function(e,n){var i=e.token?e:t.getMode(this.options,e);if(i.startState)throw new Error("Overlays may not be stateful.");this.state.overlays.push({mode:i,modeSpec:e,opaque:n&&n.opaque}),this.state.modeGen++,ue(this)}),removeOverlay:se(null,function(t){for(var e=this.state.overlays,n=0;n<e.length;++n){var i=e[n].modeSpec;if(i==t||"string"==typeof t&&i.name==t)return e.splice(n,1),this.state.modeGen++,ue(this),void 0}}),indentLine:se(null,function(t,e,n){"string"!=typeof e&&"number"!=typeof e&&(e=null==e?this.options.smartIndent?"smart":"prev":e?"add":"subtract"),tn(this.doc,t)&&fn(this,t,e,n)}),indentSelection:se(null,function(t){var e=this.doc.sel;if(Ye(e.from,e.to))return fn(this,e.from.line,t);for(var n=e.to.line-(e.to.ch?0:1),i=e.from.line;n>=i;++i)fn(this,i,t)}),getTokenAt:function(t,e){var n=this.doc;t=Qe(n,t);for(var i=L(this,t.line,e),r=this.doc.mode,o=di(n,t.line),s=new En(o.text,this.options.tabSize);s.pos<t.ch&&!s.eol();){s.start=s.pos;var a=r.token(s,i)}return{start:s.start,end:s.pos,string:s.current(),className:a||null,type:a||null,state:i}},getTokenTypeAt:function(t){t=Qe(this.doc,t);var e=ti(this,di(this.doc,t.line)),n=0,i=(e.length-1)/2,r=t.ch;if(0==r)return e[2];for(;;){var o=n+i>>1;if((o?e[2*o-1]:0)>=r)i=o;else{if(!(e[2*o+1]<r))return e[2*o+2];n=o+1}}},getModeAt:function(e){var n=this.doc.mode;return n.innerMode?t.innerMode(n,this.getTokenAt(e).state).mode:n},getHelper:function(t,e){if(po.hasOwnProperty(e)){var n=po[e],i=this.getModeAt(t);return i[e]&&n[i[e]]||i.helperType&&n[i.helperType]||n[i.name]}},getStateAfter:function(t,e){var n=this.doc;return t=Xe(n,null==t?n.first+n.size-1:t),L(this,t+1,e)},cursorCoords:function(t,e){var n,i=this.doc.sel;return n=null==t?i.head:"object"==typeof t?Qe(this.doc,t):t?i.from:i.to,Q(this,n,e||"page")},charCoords:function(t,e){return X(this,Qe(this.doc,t),e||"page")},coordsChar:function(t,e){return t=G(this,t,e||"page"),te(this,t.left,t.top)},lineAtHeight:function(t,e){return t=G(this,{top:t,left:0},e||"page").top,bi(this.doc,t+this.display.viewOffset)},heightAtLine:function(t,e){var n=!1,i=this.doc.first+this.doc.size-1;t<this.doc.first?t=this.doc.first:t>i&&(t=i,n=!0);var r=di(this.doc,t);return K(this,di(this.doc,t),{top:0,left:0},e||"page").top+(n?r.height:0)},defaultTextHeight:function(){return ne(this.display)},defaultCharWidth:function(){return ie(this.display)},setGutterMarker:se(null,function(t,e,n){return dn(this,t,function(t){var i=t.gutterMarkers||(t.gutterMarkers={});return i[e]=n,!n&&or(i)&&(t.gutterMarkers=null),!0})}),clearGutter:se(null,function(t){var e=this,n=e.doc,i=n.first;n.iter(function(n){n.gutterMarkers&&n.gutterMarkers[t]&&(n.gutterMarkers[t]=null,ue(e,i,i+1),or(n.gutterMarkers)&&(n.gutterMarkers=null)),++i})}),addLineClass:se(null,function(t,e,n){return dn(this,t,function(t){var i="text"==e?"textClass":"background"==e?"bgClass":"wrapClass";if(t[i]){if(new RegExp("(?:^|\\s)"+n+"(?:$|\\s)").test(t[i]))return!1;t[i]+=" "+n}else t[i]=n;return!0})}),removeLineClass:se(null,function(t,e,n){return dn(this,t,function(t){var i="text"==e?"textClass":"background"==e?"bgClass":"wrapClass",r=t[i];if(!r)return!1;if(null==n)t[i]=null;else{var o=r.match(new RegExp("(?:^|\\s+)"+n+"(?:$|\\s+)"));if(!o)return!1;var s=o.index+o[0].length;t[i]=r.slice(0,o.index)+(o.index&&s!=r.length?" ":"")+r.slice(s)||null}return!0})}),addLineWidget:se(null,function(t,e,n){return Kn(this,t,e,n)}),removeLineWidget:function(t){t.clear()},lineInfo:function(t){if("number"==typeof t){if(!tn(this.doc,t))return null;var e=t;if(t=di(this.doc,t),!t)return null}else{var e=yi(t);if(null==e)return null}return{line:e,handle:t,text:t.text,gutterMarkers:t.gutterMarkers,textClass:t.textClass,bgClass:t.bgClass,wrapClass:t.wrapClass,widgets:t.widgets}},getViewport:function(){return{from:this.display.showingFrom,to:this.display.showingTo}},addWidget:function(t,e,n,i,r){var o=this.display;t=Q(this,Qe(this.doc,t));var s=t.bottom,a=t.left;if(e.style.position="absolute",o.sizer.appendChild(e),"over"==i)s=t.top;else if("above"==i||"near"==i){var l=Math.max(o.wrapper.clientHeight,this.doc.height),u=Math.max(o.sizer.clientWidth,o.lineSpace.clientWidth);("above"==i||t.bottom+e.offsetHeight>l)&&t.top>e.offsetHeight?s=t.top-e.offsetHeight:t.bottom+e.offsetHeight<=l&&(s=t.bottom),a+e.offsetWidth>u&&(a=u-e.offsetWidth)}e.style.top=s+"px",e.style.left=e.style.right="","right"==r?(a=o.sizer.clientWidth-e.offsetWidth,e.style.right="0px"):("left"==r?a=0:"middle"==r&&(a=(o.sizer.clientWidth-e.offsetWidth)/2),e.style.left=a+"px"),n&&un(this,a,s,a+e.offsetWidth,s+e.offsetHeight)},triggerOnKeyDown:se(null,Ne),execCommand:function(t){return fo[t](this)},findPosH:function(t,e,n,i){var r=1;0>e&&(r=-1,e=-e);for(var o=0,s=Qe(this.doc,t);e>o&&(s=mn(this.doc,s,r,n,i),!s.hitSide);++o);return s},moveH:se(null,function(t,e){var n,i=this.doc.sel;n=i.shift||i.extend||Ye(i.from,i.to)?mn(this.doc,i.head,t,e,this.options.rtlMoveVisually):0>t?i.from:i.to,en(this.doc,n,n,t)}),deleteH:se(null,function(t,e){var n=this.doc.sel;Ye(n.from,n.to)?We(this.doc,"",n.from,mn(this.doc,n.head,t,e,!1),"+delete"):We(this.doc,"",n.from,n.to,"+delete"),this.curOp.userSelChange=!0}),findPosV:function(t,e,n,i){var r=1,o=i;0>e&&(r=-1,e=-e);for(var s=0,a=Qe(this.doc,t);e>s;++s){var l=Q(this,a,"div");if(null==o?o=l.left:l.left=o,a=gn(this,l,r,n),a.hitSide)break}return a},moveV:se(null,function(t,e){var n=this.doc.sel,i=Q(this,n.head,"div");null!=n.goalColumn&&(i.left=n.goalColumn);var r=gn(this,i,t,e);"page"==e&&pn(this,0,X(this,r,"div").top-i.top),en(this.doc,r,r,t),n.goalColumn=i.left}),toggleOverwrite:function(t){(null==t||t!=this.state.overwrite)&&((this.state.overwrite=!this.state.overwrite)?this.display.cursor.className+=" CodeMirror-overwrite":this.display.cursor.className=this.display.cursor.className.replace(" CodeMirror-overwrite",""))},hasFocus:function(){return this.state.focused},scrollTo:se(null,function(t,e){hn(this,t,e)}),getScrollInfo:function(){var t=this.display.scroller,e=Eo;return{left:t.scrollLeft,top:t.scrollTop,height:t.scrollHeight-e,width:t.scrollWidth-e,clientHeight:t.clientHeight-e,clientWidth:t.clientWidth-e}},scrollIntoView:se(null,function(t,e){null==t?t={from:this.doc.sel.head,to:null}:"number"==typeof t?t={from:Je(t,0),to:null}:null==t.from&&(t={from:t,to:null}),t.to||(t.to=t.from),e||(e=0);var n=t;null!=t.from.line&&(this.curOp.scrollToPos={from:t.from,to:t.to,margin:e},n={from:Q(this,t.from),to:Q(this,t.to)});var i=cn(this,Math.min(n.from.left,n.to.left),Math.min(n.from.top,n.to.top)-e,Math.max(n.from.right,n.to.right),Math.max(n.from.bottom,n.to.bottom)+e);hn(this,i.scrollLeft,i.scrollTop)}),setSize:se(null,function(t,e){function n(t){return"number"==typeof t||/^\d+$/.test(String(t))?t+"px":t}null!=t&&(this.display.wrapper.style.width=n(t)),null!=e&&(this.display.wrapper.style.height=n(e)),this.options.lineWrapping&&(this.display.measureLineCache.length=this.display.measureLineCachePos=0),this.curOp.forceUpdate=!0}),operation:function(t){return le(this,t)},refresh:se(null,function(){var t=null==this.display.cachedTextHeight;W(this),hn(this,this.doc.scrollLeft,this.doc.scrollTop),ue(this),t&&o(this)}),swapDoc:se(null,function(t){var e=this.doc;return e.cm=null,fi(this,t),W(this),fe(this,!0),hn(this,t.scrollLeft,t.scrollTop),Ui(this,"swapDoc",this,e),e}),getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Ji(t);var oo=t.optionHandlers={},so=t.defaults={},ao=t.Init={toString:function(){return"CodeMirror.Init"}};bn("value","",function(t,e){t.setValue(e)},!0),bn("mode",null,function(t,e){t.doc.modeOption=e,n(t)},!0),bn("indentUnit",2,n,!0),bn("indentWithTabs",!1),bn("smartIndent",!0),bn("tabSize",4,function(t){n(t),W(t),ue(t)},!0),bn("electricChars",!0),bn("rtlMoveVisually",!jr),bn("theme","default",function(t){a(t),l(t)},!0),bn("keyMap","default",s),bn("extraKeys",null),bn("onKeyEvent",null),bn("onDragEvent",null),bn("lineWrapping",!1,i,!0),bn("gutters",[],function(t){p(t.options),l(t)},!0),bn("fixedGutter",!0,function(t,e){t.display.gutters.style.left=e?y(t.display)+"px":"0",t.refresh()},!0),bn("coverGutterNextToScrollbar",!1,f,!0),bn("lineNumbers",!1,function(t){p(t.options),l(t)},!0),bn("firstLineNumber",1,l,!0),bn("lineNumberFormatter",function(t){return t},l,!0),bn("showCursorWhenSelecting",!1,M,!0),bn("resetSelectionOnContextMenu",!0),bn("readOnly",!1,function(t,e){"nocursor"==e?(Le(t),t.display.input.blur()):e||fe(t,!0)}),bn("dragDrop",!0),bn("cursorBlinkRate",530),bn("cursorScrollMargin",0),bn("cursorHeight",1),bn("workTime",100),bn("workDelay",100),bn("flattenSpans",!0),bn("pollInterval",100),bn("undoDepth",40,function(t,e){t.doc.history.undoDepth=e}),bn("historyEventDelay",500),bn("viewportMargin",10,function(t){t.refresh()},!0),bn("maxHighlightLength",1e4,function(t){n(t),t.refresh()},!0),bn("crudeMeasuringFrom",1e4),bn("moveInputWithCursor",!0,function(t,e){e||(t.display.inputDiv.style.top=t.display.inputDiv.style.left=0)}),bn("tabindex",null,function(t,e){t.display.input.tabIndex=e||""}),bn("autofocus",null);var lo=t.modes={},uo=t.mimeModes={};t.defineMode=function(e,n){if(t.defaults.mode||"null"==e||(t.defaults.mode=e),arguments.length>2){n.dependencies=[];for(var i=2;i<arguments.length;++i)n.dependencies.push(arguments[i])}lo[e]=n},t.defineMIME=function(t,e){uo[t]=e},t.resolveMode=function(e){if("string"==typeof e&&uo.hasOwnProperty(e))e=uo[e];else if(e&&"string"==typeof e.name&&uo.hasOwnProperty(e.name)){var n=uo[e.name];e=tr(n,e),e.name=n.name}else if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return t.resolveMode("application/xml");return"string"==typeof e?{name:e}:e||{name:"null"}},t.getMode=function(e,n){var n=t.resolveMode(n),i=lo[n.name];if(!i)return t.getMode(e,"text/plain");var r=i(e,n);if(co.hasOwnProperty(n.name)){var o=co[n.name];for(var s in o)o.hasOwnProperty(s)&&(r.hasOwnProperty(s)&&(r["_"+s]=r[s]),r[s]=o[s])}return r.name=n.name,r},t.defineMode("null",function(){return{token:function(t){t.skipToEnd()}}}),t.defineMIME("text/plain","null");var co=t.modeExtensions={};t.extendMode=function(t,e){var n=co.hasOwnProperty(t)?co[t]:co[t]={};er(e,n)},t.defineExtension=function(e,n){t.prototype[e]=n},t.defineDocExtension=function(t,e){_o.prototype[t]=e},t.defineOption=bn;var ho=[];t.defineInitHook=function(t){ho.push(t)};var po=t.helpers={};t.registerHelper=function(e,n,i){po.hasOwnProperty(e)||(po[e]=t[e]={}),po[e][n]=i},t.isWordChar=rr,t.copyState=wn,t.startState=_n,t.innerMode=function(t,e){for(;t.innerMode;){var n=t.innerMode(e);if(!n||n.mode==t)break;e=n.state,t=n.mode}return n||{mode:t,state:e}};var fo=t.commands={selectAll:function(t){t.setSelection(Je(t.firstLine(),0),Je(t.lastLine()))},killLine:function(t){var e=t.getCursor(!0),n=t.getCursor(!1),i=!Ye(e,n);i||t.getLine(e.line).length!=e.ch?t.replaceRange("",e,i?n:Je(e.line),"+delete"):t.replaceRange("",e,Je(e.line+1,0),"+delete")},deleteLine:function(t){var e=t.getCursor().line;t.replaceRange("",Je(e,0),Je(e),"+delete")},delLineLeft:function(t){var e=t.getCursor();t.replaceRange("",Je(e.line,0),e,"+delete")},undo:function(t){t.undo()},redo:function(t){t.redo()},goDocStart:function(t){t.extendSelection(Je(t.firstLine(),0))},goDocEnd:function(t){t.extendSelection(Je(t.lastLine()))},goLineStart:function(t){t.extendSelection(br(t,t.getCursor().line))},goLineStartSmart:function(t){var e=t.getCursor(),n=br(t,e.line),i=t.getLineHandle(n.line),r=_i(i);if(r&&0!=r[0].level)t.extendSelection(n);else{var o=Math.max(0,i.text.search(/\S/)),s=e.line==n.line&&e.ch<=o&&e.ch;t.extendSelection(Je(n.line,s?0:o))}},goLineEnd:function(t){t.extendSelection(wr(t,t.getCursor().line))},goLineRight:function(t){var e=t.charCoords(t.getCursor(),"div").top+5;t.extendSelection(t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:e},"div"))},goLineLeft:function(t){var e=t.charCoords(t.getCursor(),"div").top+5;t.extendSelection(t.coordsChar({left:0,top:e},"div"))},goLineUp:function(t){t.moveV(-1,"line")},goLineDown:function(t){t.moveV(1,"line")},goPageUp:function(t){t.moveV(-1,"page")},goPageDown:function(t){t.moveV(1,"page")},goCharLeft:function(t){t.moveH(-1,"char")},goCharRight:function(t){t.moveH(1,"char")},goColumnLeft:function(t){t.moveH(-1,"column")},goColumnRight:function(t){t.moveH(1,"column")},goWordLeft:function(t){t.moveH(-1,"word")},goGroupRight:function(t){t.moveH(1,"group")},goGroupLeft:function(t){t.moveH(-1,"group")},goWordRight:function(t){t.moveH(1,"word")},delCharBefore:function(t){t.deleteH(-1,"char")},delCharAfter:function(t){t.deleteH(1,"char")},delWordBefore:function(t){t.deleteH(-1,"word")},delWordAfter:function(t){t.deleteH(1,"word")},delGroupBefore:function(t){t.deleteH(-1,"group")},delGroupAfter:function(t){t.deleteH(1,"group")},indentAuto:function(t){t.indentSelection("smart")},indentMore:function(t){t.indentSelection("add")},indentLess:function(t){t.indentSelection("subtract")},insertTab:function(t){t.replaceSelection("	","end","+input")},defaultTab:function(t){t.somethingSelected()?t.indentSelection("add"):t.replaceSelection("	","end","+input")},transposeChars:function(t){var e=t.getCursor(),n=t.getLine(e.line);e.ch>0&&e.ch<n.length-1&&t.replaceRange(n.charAt(e.ch)+n.charAt(e.ch-1),Je(e.line,e.ch-1),Je(e.line,e.ch+1))},newlineAndIndent:function(t){se(t,function(){t.replaceSelection("\n","end","+input"),t.indentLine(t.getCursor().line,null,!0)})()},toggleOverwrite:function(t){t.toggleOverwrite()}},mo=t.keyMap={};mo.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite"},mo.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"},mo.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delLineLeft",fallthrough:["basic","emacsy"]},mo["default"]=Vr?mo.macDefault:mo.pcDefault,mo.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},t.lookupKey=Sn,t.isModifierKey=kn,t.keyName=Cn,t.fromTextArea=function(e,n){function i(){e.value=u.getValue()}if(n||(n={}),n.value=e.value,!n.tabindex&&e.tabindex&&(n.tabindex=e.tabindex),!n.placeholder&&e.placeholder&&(n.placeholder=e.placeholder),null==n.autofocus){var r=document.body;try{r=document.activeElement}catch(o){}n.autofocus=r==e||null!=e.getAttribute("autofocus")&&r==document.body}if(e.form&&(Fi(e.form,"submit",i),!n.leaveSubmitMethodAlone)){var s=e.form,a=s.submit;try{var l=s.submit=function(){i(),s.submit=a,s.submit(),s.submit=l}}catch(o){}}e.style.display="none";var u=t(function(t){e.parentNode.insertBefore(t,e.nextSibling)},n);return u.save=i,u.getTextArea=function(){return e},u.toTextArea=function(){i(),e.parentNode.removeChild(u.getWrapperElement()),e.style.display="",e.form&&(Vi(e.form,"submit",i),"function"==typeof e.form.submit&&(e.form.submit=a))},u},En.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return 0==this.pos},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){return this.pos<this.string.length?this.string.charAt(this.pos++):void 0},eat:function(t){var e=this.string.charAt(this.pos);if("string"==typeof t)var n=e==t;else var n=e&&(t.test?t.test(e):t(e));return n?(++this.pos,e):void 0},eatWhile:function(t){for(var e=this.pos;this.eat(t););return this.pos>e},eatSpace:function(){for(var t=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>t},skipToEnd:function(){this.pos=this.string.length},skipTo:function(t){var e=this.string.indexOf(t,this.pos);return e>-1?(this.pos=e,!0):void 0},backUp:function(t){this.pos-=t},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Ki(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue},indentation:function(){return Ki(this.string,null,this.tabSize)},match:function(t,e,n){if("string"!=typeof t){var i=this.string.slice(this.pos).match(t);return i&&i.index>0?null:(i&&e!==!1&&(this.pos+=i[0].length),i)}var r=function(t){return n?t.toLowerCase():t},o=this.string.substr(this.pos,t.length);return r(o)==r(t)?(e!==!1&&(this.pos+=t.length),!0):void 0},current:function(){return this.string.slice(this.start,this.pos)}},t.StringStream=En,t.TextMarker=Tn,Ji(Tn),Tn.prototype.clear=function(){if(!this.explicitlyCleared){var t=this.doc.cm,e=t&&!t.curOp;if(e&&re(t),Wi(this,"clear")){var n=this.find();n&&Ui(this,"clear",n.from,n.to)}for(var i=null,r=null,o=0;o<this.lines.length;++o){var s=this.lines[o],a=On(s.markedSpans,this);null!=a.to&&(r=yi(s)),s.markedSpans=Nn(s.markedSpans,a),null!=a.from?i=yi(s):this.collapsed&&!Un(this.doc,s)&&t&&vi(s,ne(t.display))}if(t&&this.collapsed&&!t.options.lineWrapping)for(var o=0;o<this.lines.length;++o){var l=jn(t.doc,this.lines[o]),u=c(t.doc,l);u>t.display.maxLineLength&&(t.display.maxLine=l,t.display.maxLineLength=u,t.display.maxLineChanged=!0)}null!=i&&t&&ue(t,i,r+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,t&&on(t)),e&&oe(t)}},Tn.prototype.find=function(){for(var t,e,n=0;n<this.lines.length;++n){var i=this.lines[n],r=On(i.markedSpans,this);if(null!=r.from||null!=r.to){var o=yi(i);null!=r.from&&(t=Je(o,r.from)),null!=r.to&&(e=Je(o,r.to))}}return"bookmark"==this.type?t:t&&{from:t,to:e}},Tn.prototype.changed=function(){var t=this.find(),e=this.doc.cm;if(t&&e){"bookmark"!=this.type&&(t=t.from);var n=di(this.doc,t.line);if(V(e,n),t.line>=e.display.showingFrom&&t.line<e.display.showingTo){for(var i=e.display.lineDiv.firstChild;i;i=i.nextSibling)if(i.lineObj==n){i.offsetHeight!=n.height&&vi(n,i.offsetHeight);break}le(e,function(){e.curOp.selectionChanged=e.curOp.forceUpdate=e.curOp.updateMaxLine=!0})}}},Tn.prototype.attachLine=function(t){if(!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;e.maybeHiddenMarkers&&-1!=Zi(e.maybeHiddenMarkers,this)||(e.maybeUnhiddenMarkers||(e.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(t)},Tn.prototype.detachLine=function(t){if(this.lines.splice(Zi(this.lines,t),1),!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;(e.maybeHiddenMarkers||(e.maybeHiddenMarkers=[])).push(this)}},t.SharedTextMarker=Pn,Ji(Pn),Pn.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var t=0;t<this.markers.length;++t)this.markers[t].clear();Ui(this,"clear")}},Pn.prototype.find=function(){return this.primary.find()};var go=t.LineWidget=function(t,e,n){if(n)for(var i in n)n.hasOwnProperty(i)&&(this[i]=n[i]);this.cm=t,this.node=e};Ji(go),go.prototype.clear=Jn(function(){var t=this.line.widgets,e=yi(this.line);if(null!=e&&t){for(var n=0;n<t.length;++n)t[n]==this&&t.splice(n--,1);t.length||(this.line.widgets=null);var i=wi(this.cm,this.line)<this.cm.doc.scrollTop;vi(this.line,Math.max(0,this.line.height-Yn(this))),i&&pn(this.cm,0,-this.height),ue(this.cm,e,e+1)}}),go.prototype.changed=Jn(function(){var t=this.height;this.height=null;var e=Yn(this)-t;if(e){vi(this.line,this.line.height+e);var n=yi(this.line);
ue(this.cm,n,n+1)}});var vo=t.Line=function(t,e,n){this.text=t,Wn(this,e),this.height=n?n(this):1};Ji(vo);var yo={},bo=/[\t\u0000-\u0019\u00ad\u200b\u2028\u2029\uFEFF]/g;ci.prototype={chunkSize:function(){return this.lines.length},removeInner:function(t,e){for(var n=t,i=t+e;i>n;++n){var r=this.lines[n];this.height-=r.height,Xn(r),Ui(r,"delete")}this.lines.splice(t,e)},collapse:function(t){t.splice.apply(t,[t.length,0].concat(this.lines))},insertInner:function(t,e,n){this.height+=n,this.lines=this.lines.slice(0,t).concat(e).concat(this.lines.slice(t));for(var i=0,r=e.length;r>i;++i)e[i].parent=this},iterN:function(t,e,n){for(var i=t+e;i>t;++t)if(n(this.lines[t]))return!0}},hi.prototype={chunkSize:function(){return this.size},removeInner:function(t,e){this.size-=e;for(var n=0;n<this.children.length;++n){var i=this.children[n],r=i.chunkSize();if(r>t){var o=Math.min(e,r-t),s=i.height;if(i.removeInner(t,o),this.height-=s-i.height,r==o&&(this.children.splice(n--,1),i.parent=null),0==(e-=o))break;t=0}else t-=r}if(this.size-e<25){var a=[];this.collapse(a),this.children=[new ci(a)],this.children[0].parent=this}},collapse:function(t){for(var e=0,n=this.children.length;n>e;++e)this.children[e].collapse(t)},insertInner:function(t,e,n){this.size+=e.length,this.height+=n;for(var i=0,r=this.children.length;r>i;++i){var o=this.children[i],s=o.chunkSize();if(s>=t){if(o.insertInner(t,e,n),o.lines&&o.lines.length>50){for(;o.lines.length>50;){var a=o.lines.splice(o.lines.length-25,25),l=new ci(a);o.height-=l.height,this.children.splice(i+1,0,l),l.parent=this}this.maybeSpill()}break}t-=s}},maybeSpill:function(){if(!(this.children.length<=10)){var t=this;do{var e=t.children.splice(t.children.length-5,5),n=new hi(e);if(t.parent){t.size-=n.size,t.height-=n.height;var i=Zi(t.parent.children,t);t.parent.children.splice(i+1,0,n)}else{var r=new hi(t.children);r.parent=t,t.children=[r,n],t=r}n.parent=t.parent}while(t.children.length>10);t.parent.maybeSpill()}},iterN:function(t,e,n){for(var i=0,r=this.children.length;r>i;++i){var o=this.children[i],s=o.chunkSize();if(s>t){var a=Math.min(e,s-t);if(o.iterN(t,a,n))return!0;if(0==(e-=a))break;t=0}else t-=s}}};var wo=0,_o=t.Doc=function(t,e,n){if(!(this instanceof _o))return new _o(t,e,n);null==n&&(n=0),hi.call(this,[new ci([new vo("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.history=xi(),this.cleanGeneration=1,this.frontier=n;var i=Je(n,0);this.sel={from:i,to:i,head:i,anchor:i,shift:!1,extend:!1,goalColumn:null},this.id=++wo,this.modeOption=e,"string"==typeof t&&(t=Io(t)),ui(this,{from:i,to:i,text:t},null,{head:i,anchor:i})};_o.prototype=tr(hi.prototype,{constructor:_o,iter:function(t,e,n){n?this.iterN(t-this.first,e-t,n):this.iterN(this.first,this.first+this.size,t)},insert:function(t,e){for(var n=0,i=0,r=e.length;r>i;++i)n+=e[i].height;this.insertInner(t-this.first,e,n)},remove:function(t,e){this.removeInner(t-this.first,e)},getValue:function(t){var e=gi(this,this.first,this.first+this.size);return t===!1?e:e.join(t||"\n")},setValue:function(t){var e=Je(this.first,0),n=this.first+this.size-1;Fe(this,{from:e,to:Je(n,di(this,n).text.length),text:Io(t),origin:"setValue"},{head:e,anchor:e},!0)},replaceRange:function(t,e,n,i){e=Qe(this,e),n=n?Qe(this,n):e,We(this,t,e,n,i)},getRange:function(t,e,n){var i=mi(this,Qe(this,t),Qe(this,e));return n===!1?i:i.join(n||"\n")},getLine:function(t){var e=this.getLineHandle(t);return e&&e.text},setLine:function(t,e){tn(this,t)&&We(this,e,Je(t,0),Qe(this,Je(t)))},removeLine:function(t){t?We(this,"",Qe(this,Je(t-1)),Qe(this,Je(t))):We(this,"",Je(0,0),Qe(this,Je(1,0)))},getLineHandle:function(t){return tn(this,t)?di(this,t):void 0},getLineNumber:function(t){return yi(t)},getLineHandleVisualStart:function(t){return"number"==typeof t&&(t=di(this,t)),jn(this,t)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(t){return Qe(this,t)},getCursor:function(t){var e,n=this.sel;return e=null==t||"head"==t?n.head:"anchor"==t?n.anchor:"end"==t||t===!1?n.to:n.from,Ge(e)},somethingSelected:function(){return!Ye(this.sel.head,this.sel.anchor)},setCursor:ae(function(t,e,n){var i=Qe(this,"number"==typeof t?Je(t,e||0):t);n?en(this,i):rn(this,i,i)}),setSelection:ae(function(t,e,n){rn(this,Qe(this,t),Qe(this,e||t),n)}),extendSelection:ae(function(t,e,n){en(this,Qe(this,t),e&&Qe(this,e),n)}),getSelection:function(t){return this.getRange(this.sel.from,this.sel.to,t)},replaceSelection:function(t,e,n){Fe(this,{from:this.sel.from,to:this.sel.to,text:Io(t),origin:n},e||"around")},undo:ae(function(){je(this,"undo")}),redo:ae(function(){je(this,"redo")}),setExtending:function(t){this.sel.extend=t},historySize:function(){var t=this.history;return{undo:t.done.length,redo:t.undone.length}},clearHistory:function(){this.history=xi(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration()},changeGeneration:function(){return this.history.lastOp=this.history.lastOrigin=null,this.history.generation},isClean:function(t){return this.history.generation==(t||this.cleanGeneration)},getHistory:function(){return{done:Mi(this.history.done),undone:Mi(this.history.undone)}},setHistory:function(t){var e=this.history=xi(this.history.maxGeneration);e.done=t.done.slice(0),e.undone=t.undone.slice(0)},markText:function(t,e,n){return Mn(this,Qe(this,t),Qe(this,e),n,"range")},setBookmark:function(t,e){var n={replacedWith:e&&(null==e.nodeType?e.widget:e),insertLeft:e&&e.insertLeft};return t=Qe(this,t),Mn(this,t,t,n,"bookmark")},findMarksAt:function(t){t=Qe(this,t);var e=[],n=di(this,t.line).markedSpans;if(n)for(var i=0;i<n.length;++i){var r=n[i];(null==r.from||r.from<=t.ch)&&(null==r.to||r.to>=t.ch)&&e.push(r.marker.parent||r.marker)}return e},getAllMarks:function(){var t=[];return this.iter(function(e){var n=e.markedSpans;if(n)for(var i=0;i<n.length;++i)null!=n[i].from&&t.push(n[i].marker)}),t},posFromIndex:function(t){var e,n=this.first;return this.iter(function(i){var r=i.text.length+1;return r>t?(e=t,!0):(t-=r,++n,void 0)}),Qe(this,Je(n,e))},indexFromPos:function(t){t=Qe(this,t);var e=t.ch;return t.line<this.first||t.ch<0?0:(this.iter(this.first,t.line,function(t){e+=t.text.length+1}),e)},copy:function(t){var e=new _o(gi(this,this.first,this.first+this.size),this.modeOption,this.first);return e.scrollTop=this.scrollTop,e.scrollLeft=this.scrollLeft,e.sel={from:this.sel.from,to:this.sel.to,head:this.sel.head,anchor:this.sel.anchor,shift:this.sel.shift,extend:!1,goalColumn:this.sel.goalColumn},t&&(e.history.undoDepth=this.history.undoDepth,e.setHistory(this.getHistory())),e},linkedDoc:function(t){t||(t={});var e=this.first,n=this.first+this.size;null!=t.from&&t.from>e&&(e=t.from),null!=t.to&&t.to<n&&(n=t.to);var i=new _o(gi(this,e,n),t.mode||this.modeOption,e);return t.sharedHist&&(i.history=this.history),(this.linked||(this.linked=[])).push({doc:i,sharedHist:t.sharedHist}),i.linked=[{doc:this,isParent:!0,sharedHist:t.sharedHist}],i},unlinkDoc:function(e){if(e instanceof t&&(e=e.doc),this.linked)for(var n=0;n<this.linked.length;++n){var i=this.linked[n];if(i.doc==e){this.linked.splice(n,1),e.unlinkDoc(this);break}}if(e.history==this.history){var r=[e.id];pi(e,function(t){r.push(t.id)},!0),e.history=xi(),e.history.done=Mi(this.history.done,r),e.history.undone=Mi(this.history.undone,r)}},iterLinkedDocs:function(t){pi(this,t)},getMode:function(){return this.mode},getEditor:function(){return this.cm}}),_o.prototype.eachLine=_o.prototype.iter;var xo="iter insert remove copy getEditor".split(" ");for(var So in _o.prototype)_o.prototype.hasOwnProperty(So)&&Zi(xo,So)<0&&(t.prototype[So]=function(t){return function(){return t.apply(this.doc,arguments)}}(_o.prototype[So]));Ji(_o),t.e_stop=zi,t.e_preventDefault=Ii,t.e_stopPropagation=Li;var ko,Co=0;t.on=Fi,t.off=Vi,t.signal=ji;var Eo=30,To=t.Pass={toString:function(){return"CodeMirror.Pass"}};Yi.prototype={set:function(t,e){clearTimeout(this.id),this.id=setTimeout(e,t)}},t.countColumn=Ki;var Mo=[""],Po=/[\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,Ao=/[\u0300-\u036F\u0483-\u0487\u0488-\u0489\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\uA66F\uA670-\uA672\uA674-\uA67D\uA69F\udc00-\udfff]/;t.replaceGetRect=function(t){cr=t};var Oo=function(){if(Pr)return!1;var t=sr("div");return"draggable"in t||"dragDrop"in t}();Er?hr=function(t,e){return 36==t.charCodeAt(e-1)&&39==t.charCodeAt(e)}:Ir&&!/Version\/([6-9]|\d\d)\b/.test(navigator.userAgent)?hr=function(t,e){return/\-[^ \-?]|\?[^ !\'\"\),.\-\/:;\?\]\}]/.test(t.slice(e-1,e+1))}:Ar&&/Chrome\/(?:29|[3-9]\d|\d\d\d)\./.test(navigator.userAgent)?hr=function(t,e){var n=t.charCodeAt(e-1);return n>=8208&&8212>=n}:Ar&&(hr=function(t,e){if(e>1&&45==t.charCodeAt(e-1)){if(/\w/.test(t.charAt(e-2))&&/[^\-?\.]/.test(t.charAt(e)))return!0;if(e>2&&/[\d\.,]/.test(t.charAt(e-2))&&/[\d\.,]/.test(t.charAt(e)))return!1}return/[~!#%&*)=+}\]\\|\"\.>,:;][({[<]|-[^\-?\.\u2010-\u201f\u2026]|\?[\w~`@#$%\^&*(_=+{[|><]|…[\w~`@#$%\^&*(_=+{[><]/.test(t.slice(e-1,e+1))});var No,Do,Io=3!="\n\nb".split(/\n/).length?function(t){for(var e=0,n=[],i=t.length;i>=e;){var r=t.indexOf("\n",e);-1==r&&(r=t.length);var o=t.slice(e,"\r"==t.charAt(r-1)?r-1:r),s=o.indexOf("\r");-1!=s?(n.push(o.slice(0,s)),e+=s+1):(n.push(o),e=r+1)}return n}:function(t){return t.split(/\r\n?|\n/)};t.splitLines=Io;var Lo=window.getSelection?function(t){try{return t.selectionStart!=t.selectionEnd}catch(e){return!1}}:function(t){try{var e=t.ownerDocument.selection.createRange()}catch(n){}return e&&e.parentElement()==t?0!=e.compareEndPoints("StartToEnd",e):!1},$o=function(){var t=sr("div");return"oncopy"in t?!0:(t.setAttribute("oncopy","return;"),"function"==typeof t.oncopy)}(),zo={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",109:"-",107:"=",127:"Delete",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};t.keyNames=zo,function(){for(var t=0;10>t;t++)zo[t+48]=String(t);for(var t=65;90>=t;t++)zo[t]=String.fromCharCode(t);for(var t=1;12>=t;t++)zo[t+111]=zo[t+63235]="F"+t}();var Ro,Bo=function(){function t(t){return 255>=t?e.charAt(t):t>=1424&&1524>=t?"R":t>=1536&&1791>=t?n.charAt(t-1536):t>=1792&&2220>=t?"r":"L"}var e="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLL",n="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmmrrrrrrrrrrrrrrrrrr",i=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,r=/[stwN]/,o=/[LRr]/,s=/[Lb1n]/,a=/[1n]/,l="L";return function(e){if(!i.test(e))return!1;for(var n,u=e.length,c=[],h=0;u>h;++h)c.push(n=t(e.charCodeAt(h)));for(var h=0,p=l;u>h;++h){var n=c[h];"m"==n?c[h]=p:p=n}for(var h=0,f=l;u>h;++h){var n=c[h];"1"==n&&"r"==f?c[h]="n":o.test(n)&&(f=n,"r"==n&&(c[h]="R"))}for(var h=1,p=c[0];u-1>h;++h){var n=c[h];"+"==n&&"1"==p&&"1"==c[h+1]?c[h]="1":","!=n||p!=c[h+1]||"1"!=p&&"n"!=p||(c[h]=p),p=n}for(var h=0;u>h;++h){var n=c[h];if(","==n)c[h]="N";else if("%"==n){for(var d=h+1;u>d&&"%"==c[d];++d);for(var m=h&&"!"==c[h-1]||u-1>d&&"1"==c[d]?"1":"N",g=h;d>g;++g)c[g]=m;h=d-1}}for(var h=0,f=l;u>h;++h){var n=c[h];"L"==f&&"1"==n?c[h]="L":o.test(n)&&(f=n)}for(var h=0;u>h;++h)if(r.test(c[h])){for(var d=h+1;u>d&&r.test(c[d]);++d);for(var v="L"==(h?c[h-1]:l),y="L"==(u-1>d?c[d]:l),m=v||y?"L":"R",g=h;d>g;++g)c[g]=m;h=d-1}for(var b,w=[],h=0;u>h;)if(s.test(c[h])){var _=h;for(++h;u>h&&s.test(c[h]);++h);w.push({from:_,to:h,level:0})}else{var x=h,S=w.length;for(++h;u>h&&"L"!=c[h];++h);for(var g=x;h>g;)if(a.test(c[g])){g>x&&w.splice(S,0,{from:x,to:g,level:1});var k=g;for(++g;h>g&&a.test(c[g]);++g);w.splice(S,0,{from:k,to:g,level:2}),x=g}else++g;h>x&&w.splice(S,0,{from:x,to:h,level:1})}return 1==w[0].level&&(b=e.match(/^\s+/))&&(w[0].from=b[0].length,w.unshift({from:0,to:b[0].length,level:0})),1==Xi(w).level&&(b=e.match(/\s+$/))&&(Xi(w).to-=b[0].length,w.push({from:u-b[0].length,to:u,level:0})),w[0].level!=Xi(w).level&&w.push({from:u,to:u,level:w[0].level}),w}}();return t.version="3.19.0",t}(),CodeMirror.defineMode("gfm",function(t){function e(t){return t.code=!1,null}var n=0,i={startState:function(){return{code:!1,codeBlock:!1,ateSpace:!1}},copyState:function(t){return{code:t.code,codeBlock:t.codeBlock,ateSpace:t.ateSpace}},token:function(t,e){if(e.codeBlock)return t.match(/^```/)?(e.codeBlock=!1,null):(t.skipToEnd(),null);if(t.sol()&&(e.code=!1),t.sol()&&t.match(/^```/))return t.skipToEnd(),e.codeBlock=!0,null;if("`"===t.peek()){t.next();var i=t.pos;t.eatWhile("`");var r=1+t.pos-i;return e.code?r===n&&(e.code=!1):(n=r,e.code=!0),null}if(e.code)return t.next(),null;if(t.eatSpace())return e.ateSpace=!0,null;if(t.sol()||e.ateSpace){if(e.ateSpace=!1,t.match(/^(?:[a-zA-Z0-9\-_]+\/)?(?:[a-zA-Z0-9\-_]+@)?(?:[a-f0-9]{7,40}\b)/))return"link";if(t.match(/^(?:[a-zA-Z0-9\-_]+\/)?(?:[a-zA-Z0-9\-_]+)?#[0-9]+\b/))return"link"}return t.match(/^((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\([^\s()<>]*\))+(?:\([^\s()<>]*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))/i)?"link":(t.next(),null)},blankLine:e};return CodeMirror.defineMIME("gfmBase",{name:"markdown",underscoresBreakWords:!1,taskLists:!0,fencedCodeBlocks:!0}),CodeMirror.overlayMode(CodeMirror.getMode(t,"gfmBase"),i)},"markdown"),CodeMirror.defineMode("less",function(t){function e(t,e){return l=e,t}function n(t){for(var e=0;e<c.length;e++)if(t===c[e])return!0}function i(t,i){var u=t.next();if("@"==u)return t.eatWhile(/[\w\-]/),e("meta",t.current());if("/"==u&&t.eat("*"))return i.tokenize=o,o(t,i);if("<"==u&&t.eat("!"))return i.tokenize=s,s(t,i);if("="==u)e(null,"compare");else{if("|"==u&&t.eat("="))return e(null,"compare");if('"'==u||"'"==u)return i.tokenize=a(u),i.tokenize(t,i);if("/"==u){if(t.eat("/"))return i.tokenize=r,r(t,i);if("string"==l||"("==l)return e("string","string");if(void 0!=i.stack[i.stack.length-1])return e(null,u);if(t.eatWhile(/[\a-zA-Z0-9\-_.\s]/),/\/|\)|#/.test(t.peek()||t.eatSpace()&&")"==t.peek())||t.eol())return e("string","string")}else{if("!"==u)return t.match(/^\s*\w*/),e("keyword","important");if(/\d/.test(u))return t.eatWhile(/[\w.%]/),e("number","unit");if(/[,+<>*\/]/.test(u))return"="==t.peek()||"a"==l?e("string","string"):e(null,"select-op");if(!/[;{}:\[\]()~\|]/.test(u)){if("."==u)return"("==l||"string"==l?e("string","string"):(t.eatWhile(/[\a-zA-Z0-9\-_]/)," "==t.peek()&&t.eatSpace(),")"==t.peek()?e("number","unit"):e("tag","tag"));if("#"==u)return t.eatWhile(/[A-Za-z0-9]/),4==t.current().length||7==t.current().length?null!=t.current().match(/[A-Fa-f0-9]{6}|[A-Fa-f0-9]{3}/,!1)?t.current().substring(1)!=t.current().match(/[A-Fa-f0-9]{6}|[A-Fa-f0-9]{3}/,!1)?e("atom","tag"):(t.eatSpace(),/[\/<>.(){!$%^&*_\-\\?=+\|#'~`]/.test(t.peek())?e("atom","tag"):"}"==t.peek()?e("number","unit"):/[a-zA-Z\\]/.test(t.peek())?e("atom","tag"):t.eol()?e("atom","tag"):e("number","unit")):(t.eatWhile(/[\w\\\-]/),e("atom","tag")):(t.eatWhile(/[\w\\\-]/),e("atom","tag"));if("&"==u)return t.eatWhile(/[\w\-]/),e(null,u);if(t.eatWhile(/[\w\\\-_%.{]/),"string"==l)return e("string","string");if(null!=t.current().match(/(^http$|^https$)/))return t.eatWhile(/[\w\\\-_%.{:\/]/),e("string","string");if("<"==t.peek()||">"==t.peek())return e("tag","tag");if(/\(/.test(t.peek()))return e(null,u);if("/"==t.peek()&&void 0!=i.stack[i.stack.length-1])return e("string","string");if(t.current().match(/\-\d|\-.\d/))return e("number","unit");if(n(t.current().toLowerCase()))return e("tag","tag");if(/\/|[\s\)]/.test(t.peek()||t.eol()||t.eatSpace()&&"/"==t.peek())&&-1!==t.current().indexOf("."))return"{"==t.current().substring(t.current().length-1,t.current().length)?(t.backUp(1),e("tag","tag")):(t.eatSpace(),/[{<>.a-zA-Z\/]/.test(t.peek())||t.eol()?e("tag","tag"):e("string","string"));if(t.eol()||"["==t.peek()||"#"==t.peek()||"tag"==l)return"{"==t.current().substring(t.current().length-1,t.current().length)&&t.backUp(1),e("tag","tag");if("compare"==l||"a"==l||"("==l)return e("string","string");if("|"==l||"-"==t.current()||"["==l)return e(null,u);if(":"==t.peek()){t.next();var c=":"==t.peek()?!0:!1;if(c)t.backUp(1);else{var p=t.pos,f=t.current().length;t.eatWhile(/[a-z\\\-]/);var d=t.pos;if(null!=t.current().substring(f-1).match(h))return t.backUp(d-(p-1)),e("tag","tag");t.backUp(d-(p-1))}return c?e("tag","tag"):e("variable","variable")}return e("variable","variable")}if(":"==u)return t.eatWhile(/[a-z\\\-]/),h.test(t.current())?e("tag","tag"):":"==t.peek()?(t.next(),t.eatWhile(/[a-z\\\-]/),t.current().match(/\:\:\-(o|ms|moz|webkit)\-/)?e("string","string"):h.test(t.current().substring(1))?e("tag","tag"):e(null,u)):e(null,u);if("~"!=u)return e(null,u);if("r"==l)return e("string","string")}}}function r(t,n){return t.skipToEnd(),n.tokenize=i,e("comment","comment")}function o(t,n){for(var r,o=!1;null!=(r=t.next());){if(o&&"/"==r){n.tokenize=i;break}o="*"==r}return e("comment","comment")}function s(t,n){for(var r,o=0;null!=(r=t.next());){if(o>=2&&">"==r){n.tokenize=i;break}o="-"==r?o+1:0}return e("comment","comment")}function a(t){return function(n,r){for(var o,s=!1;null!=(o=n.next())&&(o!=t||s);)s=!s&&"\\"==o;return s||(r.tokenize=i),e("string","string")}}var l,u=t.indentUnit,c="a abbr acronym address applet area article aside audio b base basefont bdi bdo big blockquote body br button canvas caption cite code col colgroup command datalist dd del details dfn dir div dl dt em embed fieldset figcaption figure font footer form frame frameset h1 h2 h3 h4 h5 h6 head header hgroup hr html i iframe img input ins keygen kbd label legend li link map mark menu meta meter nav noframes noscript object ol optgroup option output p param pre progress q rp rt ruby s samp script section select small source span strike strong style sub summary sup table tbody td textarea tfoot th thead time title tr track tt u ul var video wbr".split(" "),h=/(^\:root$|^\:nth\-child$|^\:nth\-last\-child$|^\:nth\-of\-type$|^\:nth\-last\-of\-type$|^\:first\-child$|^\:last\-child$|^\:first\-of\-type$|^\:last\-of\-type$|^\:only\-child$|^\:only\-of\-type$|^\:empty$|^\:link|^\:visited$|^\:active$|^\:hover$|^\:focus$|^\:target$|^\:lang$|^\:enabled^\:disabled$|^\:checked$|^\:first\-line$|^\:first\-letter$|^\:before$|^\:after$|^\:not$|^\:required$|^\:invalid$)/;return{startState:function(t){return{tokenize:i,baseIndent:t||0,stack:[]}},token:function(t,e){if(t.eatSpace())return null;var n=e.tokenize(t,e),i=e.stack[e.stack.length-1];return"hash"==l&&"rule"==i?n="atom":"variable"==n&&("rule"==i?n=null:i&&"@media{"!=i||(n="when"==t.current()?"variable":/[\s,|\s\)|\s]/.test(t.peek())?"tag":l)),"rule"==i&&/^[\{\};]$/.test(l)&&e.stack.pop(),"{"==l?"@media"==i?e.stack[e.stack.length-1]="@media{":e.stack.push("{"):"}"==l?e.stack.pop():"@media"==l?e.stack.push("@media"):"{"==i&&"comment"!=l&&e.stack.push("rule"),n},indent:function(t,e){var n=t.stack.length;return/^\}/.test(e)&&(n-="rule"==t.stack[t.stack.length-1]?2:1),t.baseIndent+n*u},electricChars:"}"}}),CodeMirror.defineMIME("text/x-less","less"),CodeMirror.mimeModes.hasOwnProperty("text/css")||CodeMirror.defineMIME("text/css","less"),function(){function t(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32}t.prototype.diff_main=function(t,e,n,i){if("undefined"==typeof i&&(i=0>=this.Diff_Timeout?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout),null==t||null==e)throw Error("Null input. (diff_main)");if(t==e)return t?[[0,t]]:[];"undefined"==typeof n&&(n=!0);var r=n,o=this.diff_commonPrefix(t,e);n=t.substring(0,o),t=t.substring(o),e=e.substring(o);var o=this.diff_commonSuffix(t,e),s=t.substring(t.length-o);return t=t.substring(0,t.length-o),e=e.substring(0,e.length-o),t=this.diff_compute_(t,e,r,i),n&&t.unshift([0,n]),s&&t.push([0,s]),this.diff_cleanupMerge(t),t},t.prototype.diff_compute_=function(t,e,n,i){if(!t)return[[1,e]];if(!e)return[[-1,t]];var r=t.length>e.length?t:e,o=t.length>e.length?e:t,s=r.indexOf(o);return-1!=s?(n=[[1,r.substring(0,s)],[0,o],[1,r.substring(s+o.length)]],t.length>e.length&&(n[0][0]=n[2][0]=-1),n):1==o.length?[[-1,t],[1,e]]:(r=this.diff_halfMatch_(t,e))?(o=r[0],t=r[1],s=r[2],e=r[3],r=r[4],o=this.diff_main(o,s,n,i),n=this.diff_main(t,e,n,i),o.concat([[0,r]],n)):n&&100<t.length&&100<e.length?this.diff_lineMode_(t,e,i):this.diff_bisect_(t,e,i)},t.prototype.diff_lineMode_=function(t,e,n){var i=this.diff_linesToChars_(t,e);t=i.chars1,e=i.chars2,i=i.lineArray,t=this.diff_main(t,e,!1,n),this.diff_charsToLines_(t,i),this.diff_cleanupSemantic(t),t.push([0,""]);for(var r=i=e=0,o="",s="";e<t.length;){switch(t[e][0]){case 1:r++,s+=t[e][1];break;case-1:i++,o+=t[e][1];break;case 0:if(i>=1&&r>=1){for(t.splice(e-i-r,i+r),e=e-i-r,i=this.diff_main(o,s,!1,n),r=i.length-1;r>=0;r--)t.splice(e,0,i[r]);e+=i.length}i=r=0,s=o=""}e++}return t.pop(),t},t.prototype.diff_bisect_=function(t,e,n){for(var i=t.length,r=e.length,o=Math.ceil((i+r)/2),s=o,a=2*o,l=Array(a),u=Array(a),c=0;a>c;c++)l[c]=-1,u[c]=-1;l[s+1]=0,u[s+1]=0;for(var c=i-r,h=0!=c%2,p=0,f=0,d=0,m=0,g=0;o>g&&!((new Date).getTime()>n);g++){for(var v=-g+p;g-f>=v;v+=2){var y,b=s+v;y=v==-g||v!=g&&l[b-1]<l[b+1]?l[b+1]:l[b-1]+1;for(var w=y-v;i>y&&r>w&&t.charAt(y)==e.charAt(w);)y++,w++;if(l[b]=y,y>i)f+=2;else if(w>r)p+=2;else if(h&&(b=s+c-v,b>=0&&a>b&&-1!=u[b])){var _=i-u[b];if(y>=_)return this.diff_bisectSplit_(t,e,y,w,n)}}for(v=-g+d;g-m>=v;v+=2){for(b=s+v,_=v==-g||v!=g&&u[b-1]<u[b+1]?u[b+1]:u[b-1]+1,y=_-v;i>_&&r>y&&t.charAt(i-_-1)==e.charAt(r-y-1);)_++,y++;if(u[b]=_,_>i)m+=2;else if(y>r)d+=2;else if(!h&&(b=s+c-v,b>=0&&a>b&&-1!=l[b]&&(y=l[b],w=s+y-b,_=i-_,y>=_)))return this.diff_bisectSplit_(t,e,y,w,n)}}return[[-1,t],[1,e]]},t.prototype.diff_bisectSplit_=function(t,e,n,i,r){var o=t.substring(0,n),s=e.substring(0,i);return t=t.substring(n),e=e.substring(i),o=this.diff_main(o,s,!1,r),r=this.diff_main(t,e,!1,r),o.concat(r)},t.prototype.diff_linesToChars_=function(t,e){function n(t){for(var e="",n=0,o=-1,s=i.length;o<t.length-1;){o=t.indexOf("\n",n),-1==o&&(o=t.length-1);var a=t.substring(n,o+1),n=o+1;(r.hasOwnProperty?r.hasOwnProperty(a):void 0!==r[a])?e+=String.fromCharCode(r[a]):(e+=String.fromCharCode(s),r[a]=s,i[s++]=a)}return e}var i=[],r={};i[0]="";var o=n(t),s=n(e);return{chars1:o,chars2:s,lineArray:i}},t.prototype.diff_charsToLines_=function(t,e){for(var n=0;n<t.length;n++){for(var i=t[n][1],r=[],o=0;o<i.length;o++)r[o]=e[i.charCodeAt(o)];t[n][1]=r.join("")}},t.prototype.diff_commonPrefix=function(t,e){if(!t||!e||t.charAt(0)!=e.charAt(0))return 0;for(var n=0,i=Math.min(t.length,e.length),r=i,o=0;r>n;)t.substring(o,r)==e.substring(o,r)?o=n=r:i=r,r=Math.floor((i-n)/2+n);return r},t.prototype.diff_commonSuffix=function(t,e){if(!t||!e||t.charAt(t.length-1)!=e.charAt(e.length-1))return 0;for(var n=0,i=Math.min(t.length,e.length),r=i,o=0;r>n;)t.substring(t.length-r,t.length-o)==e.substring(e.length-r,e.length-o)?o=n=r:i=r,r=Math.floor((i-n)/2+n);return r},t.prototype.diff_commonOverlap_=function(t,e){var n=t.length,i=e.length;if(0==n||0==i)return 0;if(n>i?t=t.substring(n-i):i>n&&(e=e.substring(0,n)),n=Math.min(n,i),t==e)return n;for(var i=0,r=1;;){var o=t.substring(n-r),o=e.indexOf(o);if(-1==o)return i;r+=o,(0==o||t.substring(n-r)==e.substring(0,r))&&(i=r,r++)}},t.prototype.diff_halfMatch_=function(t,e){function n(t,e,n){for(var i,r,o,a,l=t.substring(n,n+Math.floor(t.length/4)),u=-1,c="";-1!=(u=e.indexOf(l,u+1));){var h=s.diff_commonPrefix(t.substring(n),e.substring(u)),p=s.diff_commonSuffix(t.substring(0,n),e.substring(0,u));c.length<p+h&&(c=e.substring(u-p,u)+e.substring(u,u+h),i=t.substring(0,n-p),r=t.substring(n+h),o=e.substring(0,u-p),a=e.substring(u+h))}return 2*c.length>=t.length?[i,r,o,a,c]:null}if(0>=this.Diff_Timeout)return null;var i=t.length>e.length?t:e,r=t.length>e.length?e:t;if(4>i.length||2*r.length<i.length)return null;var o,s=this,a=n(i,r,Math.ceil(i.length/4)),i=n(i,r,Math.ceil(i.length/2));if(!a&&!i)return null;o=i?a?a[4].length>i[4].length?a:i:i:a;var l;return t.length>e.length?(a=o[0],i=o[1],r=o[2],l=o[3]):(r=o[0],l=o[1],a=o[2],i=o[3]),o=o[4],[a,i,r,l,o]},t.prototype.diff_cleanupSemantic=function(t){for(var e=!1,n=[],i=0,r=null,o=0,s=0,a=0,l=0,u=0;o<t.length;)0==t[o][0]?(n[i++]=o,s=l,a=u,u=l=0,r=t[o][1]):(1==t[o][0]?l+=t[o][1].length:u+=t[o][1].length,r&&r.length<=Math.max(s,a)&&r.length<=Math.max(l,u)&&(t.splice(n[i-1],0,[-1,r]),t[n[i-1]+1][0]=1,i--,i--,o=i>0?n[i-1]:-1,u=l=a=s=0,r=null,e=!0)),o++;for(e&&this.diff_cleanupMerge(t),this.diff_cleanupSemanticLossless(t),o=1;o<t.length;)-1==t[o-1][0]&&1==t[o][0]&&(e=t[o-1][1],n=t[o][1],i=this.diff_commonOverlap_(e,n),r=this.diff_commonOverlap_(n,e),i>=r?(i>=e.length/2||i>=n.length/2)&&(t.splice(o,0,[0,n.substring(0,i)]),t[o-1][1]=e.substring(0,e.length-i),t[o+1][1]=n.substring(i),o++):(r>=e.length/2||r>=n.length/2)&&(t.splice(o,0,[0,e.substring(0,r)]),t[o-1][0]=1,t[o-1][1]=n.substring(0,n.length-r),t[o+1][0]=-1,t[o+1][1]=e.substring(r),o++),o++),o++},t.prototype.diff_cleanupSemanticLossless=function(e){function n(e,n){if(!e||!n)return 6;var i=e.charAt(e.length-1),r=n.charAt(0),o=i.match(t.nonAlphaNumericRegex_),s=r.match(t.nonAlphaNumericRegex_),a=o&&i.match(t.whitespaceRegex_),l=s&&r.match(t.whitespaceRegex_),i=a&&i.match(t.linebreakRegex_),r=l&&r.match(t.linebreakRegex_),u=i&&e.match(t.blanklineEndRegex_),c=r&&n.match(t.blanklineStartRegex_);return u||c?5:i||r?4:o&&!a&&l?3:a||l?2:o||s?1:0}for(var i=1;i<e.length-1;){if(0==e[i-1][0]&&0==e[i+1][0]){var r=e[i-1][1],o=e[i][1],s=e[i+1][1],a=this.diff_commonSuffix(r,o);if(a)var l=o.substring(o.length-a),r=r.substring(0,r.length-a),o=l+o.substring(0,o.length-a),s=l+s;for(var a=r,l=o,u=s,c=n(r,o)+n(o,s);o.charAt(0)===s.charAt(0);){var r=r+o.charAt(0),o=o.substring(1)+s.charAt(0),s=s.substring(1),h=n(r,o)+n(o,s);h>=c&&(c=h,a=r,l=o,u=s)}e[i-1][1]!=a&&(a?e[i-1][1]=a:(e.splice(i-1,1),i--),e[i][1]=l,u?e[i+1][1]=u:(e.splice(i+1,1),i--))}i++}},t.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,t.whitespaceRegex_=/\s/,t.linebreakRegex_=/[\r\n]/,t.blanklineEndRegex_=/\n\r?\n$/,t.blanklineStartRegex_=/^\r?\n\r?\n/,t.prototype.diff_cleanupEfficiency=function(t){for(var e=!1,n=[],i=0,r=null,o=0,s=!1,a=!1,l=!1,u=!1;o<t.length;)0==t[o][0]?(t[o][1].length<this.Diff_EditCost&&(l||u)?(n[i++]=o,s=l,a=u,r=t[o][1]):(i=0,r=null),l=u=!1):(-1==t[o][0]?u=!0:l=!0,r&&(s&&a&&l&&u||r.length<this.Diff_EditCost/2&&3==s+a+l+u)&&(t.splice(n[i-1],0,[-1,r]),t[n[i-1]+1][0]=1,i--,r=null,s&&a?(l=u=!0,i=0):(i--,o=i>0?n[i-1]:-1,l=u=!1),e=!0)),o++;e&&this.diff_cleanupMerge(t)},t.prototype.diff_cleanupMerge=function(t){t.push([0,""]);for(var e,n=0,i=0,r=0,o="",s="";n<t.length;)switch(t[n][0]){case 1:r++,s+=t[n][1],n++;break;case-1:i++,o+=t[n][1],n++;break;case 0:i+r>1?(0!==i&&0!==r&&(e=this.diff_commonPrefix(s,o),0!==e&&(n-i-r>0&&0==t[n-i-r-1][0]?t[n-i-r-1][1]+=s.substring(0,e):(t.splice(0,0,[0,s.substring(0,e)]),n++),s=s.substring(e),o=o.substring(e)),e=this.diff_commonSuffix(s,o),0!==e&&(t[n][1]=s.substring(s.length-e)+t[n][1],s=s.substring(0,s.length-e),o=o.substring(0,o.length-e))),0===i?t.splice(n-r,i+r,[1,s]):0===r?t.splice(n-i,i+r,[-1,o]):t.splice(n-i-r,i+r,[-1,o],[1,s]),n=n-i-r+(i?1:0)+(r?1:0)+1):0!==n&&0==t[n-1][0]?(t[n-1][1]+=t[n][1],t.splice(n,1)):n++,i=r=0,s=o=""}for(""===t[t.length-1][1]&&t.pop(),i=!1,n=1;n<t.length-1;)0==t[n-1][0]&&0==t[n+1][0]&&(t[n][1].substring(t[n][1].length-t[n-1][1].length)==t[n-1][1]?(t[n][1]=t[n-1][1]+t[n][1].substring(0,t[n][1].length-t[n-1][1].length),t[n+1][1]=t[n-1][1]+t[n+1][1],t.splice(n-1,1),i=!0):t[n][1].substring(0,t[n+1][1].length)==t[n+1][1]&&(t[n-1][1]+=t[n+1][1],t[n][1]=t[n][1].substring(t[n+1][1].length)+t[n+1][1],t.splice(n+1,1),i=!0)),n++;i&&this.diff_cleanupMerge(t)},t.prototype.diff_xIndex=function(t,e){var n,i=0,r=0,o=0,s=0;for(n=0;n<t.length&&(1!==t[n][0]&&(i+=t[n][1].length),-1!==t[n][0]&&(r+=t[n][1].length),!(i>e));n++)o=i,s=r;return t.length!=n&&-1===t[n][0]?s:s+(e-o)},t.prototype.diff_prettyHtml=function(t){for(var e=[],n=/&/g,i=/</g,r=/>/g,o=/\n/g,s=0;s<t.length;s++){var a=t[s][0],l=t[s][1],l=l.replace(n,"&amp;").replace(i,"&lt;").replace(r,"&gt;").replace(o,"&para;<br>");switch(a){case 1:e[s]='<ins style="background:#e6ffe6;">'+l+"</ins>";break;case-1:e[s]='<del style="background:#ffe6e6;">'+l+"</del>";break;case 0:e[s]="<span>"+l+"</span>"}}return e.join("")},t.prototype.diff_text1=function(t){for(var e=[],n=0;n<t.length;n++)1!==t[n][0]&&(e[n]=t[n][1]);return e.join("")},t.prototype.diff_text2=function(t){for(var e=[],n=0;n<t.length;n++)-1!==t[n][0]&&(e[n]=t[n][1]);return e.join("")},t.prototype.diff_levenshtein=function(t){for(var e=0,n=0,i=0,r=0;r<t.length;r++){var o=t[r][0],s=t[r][1];switch(o){case 1:n+=s.length;break;case-1:i+=s.length;break;case 0:e+=Math.max(n,i),i=n=0}}return e+=Math.max(n,i)},t.prototype.diff_toDelta=function(t){for(var e=[],n=0;n<t.length;n++)switch(t[n][0]){case 1:e[n]="+"+encodeURI(t[n][1]);break;case-1:e[n]="-"+t[n][1].length;break;case 0:e[n]="="+t[n][1].length}return e.join("	").replace(/%20/g," ")},t.prototype.diff_fromDelta=function(t,e){for(var n=[],i=0,r=0,o=e.split(/\t/g),s=0;s<o.length;s++){var a=o[s].substring(1);switch(o[s].charAt(0)){case"+":try{n[i++]=[1,decodeURI(a)]}catch(l){throw Error("Illegal escape in diff_fromDelta: "+a)}break;case"-":case"=":var u=parseInt(a,10);if(isNaN(u)||0>u)throw Error("Invalid number in diff_fromDelta: "+a);a=t.substring(r,r+=u),n[i++]="="==o[s].charAt(0)?[0,a]:[-1,a];break;default:if(o[s])throw Error("Invalid diff operation in diff_fromDelta: "+o[s])}}if(r!=t.length)throw Error("Delta length ("+r+") does not equal source text length ("+t.length+").");return n},t.prototype.match_main=function(t,e,n){if(null==t||null==e||null==n)throw Error("Null input. (match_main)");return n=Math.max(0,Math.min(n,t.length)),t==e?0:t.length?t.substring(n,n+e.length)==e?n:this.match_bitap_(t,e,n):-1},t.prototype.match_bitap_=function(t,e,n){function i(t,i){var r=t/e.length,s=Math.abs(n-i);return o.Match_Distance?r+s/o.Match_Distance:s?1:r}if(e.length>this.Match_MaxBits)throw Error("Pattern too long for this browser.");var r=this.match_alphabet_(e),o=this,s=this.Match_Threshold,a=t.indexOf(e,n);-1!=a&&(s=Math.min(i(0,a),s),a=t.lastIndexOf(e,n+e.length),-1!=a&&(s=Math.min(i(0,a),s)));for(var l,u,c,h=1<<e.length-1,a=-1,p=e.length+t.length,f=0;f<e.length;f++){for(l=0,u=p;u>l;)i(f,n+u)<=s?l=u:p=u,u=Math.floor((p-l)/2+l);p=u,l=Math.max(1,n-u+1);var d=Math.min(n+u,t.length)+e.length;for(u=Array(d+2),u[d+1]=(1<<f)-1;d>=l;d--){var m=r[t.charAt(d-1)];if(u[d]=0===f?(1|u[d+1]<<1)&m:(1|u[d+1]<<1)&m|(1|(c[d+1]|c[d])<<1)|c[d+1],u[d]&h&&(m=i(f,d-1),s>=m)){if(s=m,a=d-1,!(a>n))break;l=Math.max(1,2*n-a)}}if(i(f+1,n)>s)break;c=u}return a},t.prototype.match_alphabet_=function(t){for(var e={},n=0;n<t.length;n++)e[t.charAt(n)]=0;for(n=0;n<t.length;n++)e[t.charAt(n)]|=1<<t.length-n-1;return e},t.prototype.patch_addContext_=function(t,e){if(0!=e.length){for(var n=e.substring(t.start2,t.start2+t.length1),i=0;e.indexOf(n)!=e.lastIndexOf(n)&&n.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)i+=this.Patch_Margin,n=e.substring(t.start2-i,t.start2+t.length1+i);i+=this.Patch_Margin,(n=e.substring(t.start2-i,t.start2))&&t.diffs.unshift([0,n]),(i=e.substring(t.start2+t.length1,t.start2+t.length1+i))&&t.diffs.push([0,i]),t.start1-=n.length,t.start2-=n.length,t.length1+=n.length+i.length,t.length2+=n.length+i.length}},t.prototype.patch_make=function(e,n,i){var r;if("string"==typeof e&&"string"==typeof n&&"undefined"==typeof i)r=e,n=this.diff_main(r,n,!0),2<n.length&&(this.diff_cleanupSemantic(n),this.diff_cleanupEfficiency(n));else if(e&&"object"==typeof e&&"undefined"==typeof n&&"undefined"==typeof i)n=e,r=this.diff_text1(n);else if("string"==typeof e&&n&&"object"==typeof n&&"undefined"==typeof i)r=e;else{if("string"!=typeof e||"string"!=typeof n||!i||"object"!=typeof i)throw Error("Unknown call format to patch_make.");r=e,n=i}if(0===n.length)return[];i=[],e=new t.patch_obj;for(var o=0,s=0,a=0,l=r,u=0;u<n.length;u++){var c=n[u][0],h=n[u][1];switch(!o&&0!==c&&(e.start1=s,e.start2=a),c){case 1:e.diffs[o++]=n[u],e.length2+=h.length,r=r.substring(0,a)+h+r.substring(a);
break;case-1:e.length1+=h.length,e.diffs[o++]=n[u],r=r.substring(0,a)+r.substring(a+h.length);break;case 0:h.length<=2*this.Patch_Margin&&o&&n.length!=u+1?(e.diffs[o++]=n[u],e.length1+=h.length,e.length2+=h.length):h.length>=2*this.Patch_Margin&&o&&(this.patch_addContext_(e,l),i.push(e),e=new t.patch_obj,o=0,l=r,s=a)}1!==c&&(s+=h.length),-1!==c&&(a+=h.length)}return o&&(this.patch_addContext_(e,l),i.push(e)),i},t.prototype.patch_deepCopy=function(e){for(var n=[],i=0;i<e.length;i++){var r=e[i],o=new t.patch_obj;o.diffs=[];for(var s=0;s<r.diffs.length;s++)o.diffs[s]=r.diffs[s].slice();o.start1=r.start1,o.start2=r.start2,o.length1=r.length1,o.length2=r.length2,n[i]=o}return n},t.prototype.patch_apply=function(t,e){if(0==t.length)return[e,[]];t=this.patch_deepCopy(t);var n=this.patch_addPadding(t);e=n+e+n,this.patch_splitMax(t);for(var i=0,r=[],o=0;o<t.length;o++){var s,a=t[o].start2+i,l=this.diff_text1(t[o].diffs),u=-1;if(l.length>this.Match_MaxBits?(s=this.match_main(e,l.substring(0,this.Match_MaxBits),a),-1!=s&&(u=this.match_main(e,l.substring(l.length-this.Match_MaxBits),a+l.length-this.Match_MaxBits),-1==u||s>=u)&&(s=-1)):s=this.match_main(e,l,a),-1==s)r[o]=!1,i-=t[o].length2-t[o].length1;else if(r[o]=!0,i=s-a,a=-1==u?e.substring(s,s+l.length):e.substring(s,u+this.Match_MaxBits),l==a)e=e.substring(0,s)+this.diff_text2(t[o].diffs)+e.substring(s+l.length);else if(a=this.diff_main(l,a,!1),l.length>this.Match_MaxBits&&this.diff_levenshtein(a)/l.length>this.Patch_DeleteThreshold)r[o]=!1;else{this.diff_cleanupSemanticLossless(a);for(var c,l=0,u=0;u<t[o].diffs.length;u++){var h=t[o].diffs[u];0!==h[0]&&(c=this.diff_xIndex(a,l)),1===h[0]?e=e.substring(0,s+c)+h[1]+e.substring(s+c):-1===h[0]&&(e=e.substring(0,s+c)+e.substring(s+this.diff_xIndex(a,l+h[1].length))),-1!==h[0]&&(l+=h[1].length)}}}return e=e.substring(n.length,e.length-n.length),[e,r]},t.prototype.patch_addPadding=function(t){for(var e=this.Patch_Margin,n="",i=1;e>=i;i++)n+=String.fromCharCode(i);for(i=0;i<t.length;i++)t[i].start1+=e,t[i].start2+=e;var i=t[0],r=i.diffs;if(0==r.length||0!=r[0][0])r.unshift([0,n]),i.start1-=e,i.start2-=e,i.length1+=e,i.length2+=e;else if(e>r[0][1].length){var o=e-r[0][1].length;r[0][1]=n.substring(r[0][1].length)+r[0][1],i.start1-=o,i.start2-=o,i.length1+=o,i.length2+=o}return i=t[t.length-1],r=i.diffs,0==r.length||0!=r[r.length-1][0]?(r.push([0,n]),i.length1+=e,i.length2+=e):e>r[r.length-1][1].length&&(o=e-r[r.length-1][1].length,r[r.length-1][1]+=n.substring(0,o),i.length1+=o,i.length2+=o),n},t.prototype.patch_splitMax=function(e){for(var n=this.Match_MaxBits,i=0;i<e.length;i++)if(!(e[i].length1<=n)){var r=e[i];e.splice(i--,1);for(var o=r.start1,s=r.start2,a="";0!==r.diffs.length;){var l=new t.patch_obj,u=!0;for(l.start1=o-a.length,l.start2=s-a.length,""!==a&&(l.length1=l.length2=a.length,l.diffs.push([0,a]));0!==r.diffs.length&&l.length1<n-this.Patch_Margin;){var a=r.diffs[0][0],c=r.diffs[0][1];1===a?(l.length2+=c.length,s+=c.length,l.diffs.push(r.diffs.shift()),u=!1):-1===a&&1==l.diffs.length&&0==l.diffs[0][0]&&c.length>2*n?(l.length1+=c.length,o+=c.length,u=!1,l.diffs.push([a,c]),r.diffs.shift()):(c=c.substring(0,n-l.length1-this.Patch_Margin),l.length1+=c.length,o+=c.length,0===a?(l.length2+=c.length,s+=c.length):u=!1,l.diffs.push([a,c]),c==r.diffs[0][1]?r.diffs.shift():r.diffs[0][1]=r.diffs[0][1].substring(c.length))}a=this.diff_text2(l.diffs),a=a.substring(a.length-this.Patch_Margin),c=this.diff_text1(r.diffs).substring(0,this.Patch_Margin),""!==c&&(l.length1+=c.length,l.length2+=c.length,0!==l.diffs.length&&0===l.diffs[l.diffs.length-1][0]?l.diffs[l.diffs.length-1][1]+=c:l.diffs.push([0,c])),u||e.splice(++i,0,l)}}},t.prototype.patch_toText=function(t){for(var e=[],n=0;n<t.length;n++)e[n]=t[n];return e.join("")},t.prototype.patch_fromText=function(e){var n=[];if(!e)return n;e=e.split("\n");for(var i=0,r=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;i<e.length;){var o=e[i].match(r);if(!o)throw Error("Invalid patch string: "+e[i]);var s=new t.patch_obj;for(n.push(s),s.start1=parseInt(o[1],10),""===o[2]?(s.start1--,s.length1=1):"0"==o[2]?s.length1=0:(s.start1--,s.length1=parseInt(o[2],10)),s.start2=parseInt(o[3],10),""===o[4]?(s.start2--,s.length2=1):"0"==o[4]?s.length2=0:(s.start2--,s.length2=parseInt(o[4],10)),i++;i<e.length;){o=e[i].charAt(0);try{var a=decodeURI(e[i].substring(1))}catch(l){throw Error("Illegal escape in patch_fromText: "+a)}if("-"==o)s.diffs.push([-1,a]);else if("+"==o)s.diffs.push([1,a]);else if(" "==o)s.diffs.push([0,a]);else{if("@"==o)break;if(""!==o)throw Error('Invalid patch mode "'+o+'" in: '+a)}i++}}return n},t.patch_obj=function(){this.diffs=[],this.start2=this.start1=null,this.length2=this.length1=0},t.patch_obj.prototype.toString=function(){var t,e;t=0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1,e=0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2,t=["@@ -"+t+" +"+e+" @@\n"];var n;for(e=0;e<this.diffs.length;e++){switch(this.diffs[e][0]){case 1:n="+";break;case-1:n="-";break;case 0:n=" "}t[e+1]=n+encodeURI(this.diffs[e][1])+"\n"}return t.join("").replace(/%20/g," ")},this.diff_match_patch=t,this.DIFF_DELETE=-1,this.DIFF_INSERT=1,this.DIFF_EQUAL=0}(),function(){"use strict";var t={};"undefined"!=typeof e&&(t=e);var e=t;t.version="0.0.7",t.config={textDiffMinLength:60,detectArrayMove:!0,includeValueOnArrayMove:!1};var n="function"==typeof Array.prototype.indexOf?function(t,e){return t.indexOf(e)}:function(t,e){for(var n=t.length,i=0;n>i;i++)if(t[i]===e)return i;return-1},i={diff:function(e,i,r,o){for(var s,a,l,u=0,c=0,h=e.length,p=i.length,f=[],d=[],m="function"==typeof r?function(t,e,n,i){if(t===e)return!0;if("object"!=typeof t||"object"!=typeof e)return!1;var o,s;return"number"==typeof n?(o=f[n],"undefined"==typeof o&&(f[n]=o=r(t))):o=r(t),"number"==typeof i?(s=d[i],"undefined"==typeof s&&(d[i]=s=r(e))):s=r(e),o===s}:function(t,e){return t===e},g=function(t,n){return m(e[t],i[n],t,n)},v=function(t,n){if(o&&"object"==typeof e[t]&&"object"==typeof i[n]){var r=o(e[t],i[n]);"undefined"!=typeof r&&(l||(l={_t:"a"}),l[n]=r)}};h>u&&p>u&&g(u,u);)v(u,u),u++;for(;h>c+u&&p>c+u&&g(h-1-c,p-1-c);)v(h-1-c,p-1-c),c++;if(u+c===h){if(h===p)return l;for(l=l||{_t:"a"},s=u;p-c>s;s++)l[s]=[i[s]];return l}if(u+c===p){for(l=l||{_t:"a"},s=u;h-c>s;s++)l["_"+s]=[e[s],0,0];return l}var y=this.lcs(e.slice(u,h-c),i.slice(u,p-c),{areTheSameByIndex:function(t,e){return g(t+u,e+u)}});l=l||{_t:"a"};var b=[];for(s=u;h-c>s;s++)n(y.indices1,s-u)<0&&(l["_"+s]=[e[s],0,0],b.push(s));var w=b.length;for(s=u;p-c>s;s++){var _=n(y.indices2,s-u);if(0>_){var x=!1;if(t.config.detectArrayMove&&w>0)for(a=0;w>a;a++)if(g(b[a],s)){l["_"+b[a]].splice(1,2,s,3),t.config.includeValueOnArrayMove||(l["_"+b[a]][0]=""),v(b[a],s),b.splice(a,1),x=!0;break}x||(l[s]=[i[s]])}else v(y.indices1[_]+u,y.indices2[_]+u)}return l},getArrayIndexBefore:function(t,e){var n,i=e;for(var r in t)if(t.hasOwnProperty(r)&&o(t[r]))if(n="_"===r.slice(0,1)?parseInt(r.slice(1),10):parseInt(r,10),1===t[r].length){if(e>n)i--;else if(n===e)return-1}else if(3===t[r].length)if(0===t[r][2])e>=n&&i++;else if(3===t[r][2])if(e>=n&&i++,t[r][1]>e)i--;else if(t[r][1]===e)return n;return i},patch:function(t,e,n,i){var r,o,s=function(t,e){return t-e},a=function(t){return function(e,n){return e[t]-n[t]}},l=[],u=[],c=[];for(r in e)if("_t"!==r)if("_"==r[0]){if(0!==e[r][2]&&3!==e[r][2])throw new Error("only removal or move can be applied at original array indices, invalid diff type: "+e[r][2]);l.push(parseInt(r.slice(1),10))}else 1===e[r].length?u.push({index:parseInt(r,10),value:e[r][0]}):c.push({index:parseInt(r,10),diff:e[r]});for(l=l.sort(s),r=l.length-1;r>=0;r--){o=l[r];var h=e["_"+o],p=t.splice(o,1)[0];3===h[2]&&u.push({index:h[1],value:p})}u=u.sort(a("index"));var f=u.length;for(r=0;f>r;r++){var d=u[r];t.splice(d.index,0,d.value)}var m=c.length;if(m>0){if("function"!=typeof n)throw new Error("to patch items in the array an objectInnerPatch function must be provided");for(r=0;m>r;r++){var g=c[r];n(t,g.index.toString(),g.diff,i)}}return t},lcs:function(t,e,n){n.areTheSameByIndex=n.areTheSameByIndex||function(n,i){return t[n]===e[i]};var i=this.lengthMatrix(t,e,n),r=this.backtrack(i,t,e,t.length,e.length);return"string"==typeof t&&"string"==typeof e&&(r.sequence=r.sequence.join("")),r},lengthMatrix:function(t,e,n){var i,r,o=t.length,s=e.length,a=[o+1];for(i=0;o+1>i;i++)for(a[i]=[s+1],r=0;s+1>r;r++)a[i][r]=0;for(a.options=n,i=1;o+1>i;i++)for(r=1;s+1>r;r++)a[i][r]=n.areTheSameByIndex(i-1,r-1)?a[i-1][r-1]+1:Math.max(a[i-1][r],a[i][r-1]);return a},backtrack:function(t,e,n,i,r){if(0===i||0===r)return{sequence:[],indices1:[],indices2:[]};if(t.options.areTheSameByIndex(i-1,r-1)){var o=this.backtrack(t,e,n,i-1,r-1);return o.sequence.push(e[i-1]),o.indices1.push(i-1),o.indices2.push(r-1),o}return t[i][r-1]>t[i-1][r]?this.backtrack(t,e,n,i,r-1):this.backtrack(t,e,n,i-1,r)}};t.sequenceDiffer=i,t.dateReviver=function(t,e){var n;return"string"==typeof e&&(n=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)(Z|([+\-])(\d{2}):(\d{2}))$/.exec(e))?new Date(Date.UTC(+n[1],+n[2]-1,+n[3],+n[4],+n[5],+n[6])):e};var r=function(){var e;return t.config.diff_match_patch&&(e=new t.config.diff_match_patch.diff_match_patch),"undefined"!=typeof diff_match_patch&&("function"==typeof diff_match_patch?e=new diff_match_patch:"object"==typeof diff_match_patch&&"function"==typeof diff_match_patch.diff_match_patch&&(e=new diff_match_patch.diff_match_patch)),e?(t.config.textDiff=function(t,n){return e.patch_toText(e.patch_make(t,n))},t.config.textPatch=function(t,n){for(var i=e.patch_apply(e.patch_fromText(n),t),r=0;r<i[1].length;r++)if(!i[1][r])throw new Error("text patch failed");return i[0]},!0):void 0},o=t.isArray="function"==typeof Array.isArray?Array.isArray:function(t){return"object"==typeof t&&t instanceof Array},s=t.isDate=function(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)},a=function(e,n){return i.diff(e,n,t.config.objectHash,t.diff)},l=function(t,e){var n,i,r,o;o=function(r){i=u(t[r],e[r]),"undefined"!=typeof i&&("undefined"==typeof n&&(n={}),n[r]=i)};for(r in e)e.hasOwnProperty(r)&&o(r);for(r in t)t.hasOwnProperty(r)&&"undefined"==typeof e[r]&&o(r);return n},u=t.diff=function(e,n){var i,u,c,h,p;if(e!==n&&(e===e||n===n)&&(i=typeof n,u=typeof e,c=null===n,h=null===e,"object"==u&&s(e)&&(u="date"),"object"!=i||!s(n)||(i="date","date"!=u||e.getTime()!==n.getTime()))){if(c||h||"undefined"==i||i!=u||"number"==i||"number"==u||"boolean"==i||"boolean"==u||"string"==i||"string"==u||"date"==i||"date"==u||"object"===i&&o(n)!=o(e)){if(p=[],"undefined"!=typeof e)if("undefined"!=typeof n){var f="string"==i&&"string"==u&&Math.min(e.length,n.length)>t.config.textDiffMinLength;f&&!t.config.textDiff&&r(),f&&t.config.textDiff?p.push(t.config.textDiff(e,n),0,2):(p.push(e),p.push(n))}else p.push(e),p.push(0,0);else p.push(n);return p}return o(n)?a(e,n):l(e,n)}},c=function(t,e){return o(t)?t[parseInt(e,10)]:t[e]};t.getByKey=c;var h=function(t,e,n){if(o(t)&&t._key){var i=t._key;"function"!=typeof t._key&&(i=function(e){return e[t._key]});for(var r=0;r<t.length;r++)if(i(t[r])===e)return"undefined"==typeof n?(t.splice(r,1),r--):t[r]=n,void 0;return"undefined"!=typeof n&&t.push(n),void 0}"undefined"==typeof n?o(t)?t.splice(e,1):delete t[e]:t[e]=n},p=function(e){return t.config.textDiffReverse||(t.config.textDiffReverse=function(t){var e,n,i,r,o,s,a,l=null,u=/^@@ +\-(\d+),(\d+) +\+(\d+),(\d+) +@@$/;for(i=t.split("\n"),e=0,n=i.length;n>e;e++){r=i[e];var c=r.slice(0,1);"@"===c?(l=u.exec(r),o=e,s=null,a=null,i[o]="@@ -"+l[3]+","+l[4]+" +"+l[1]+","+l[2]+" @@"):"+"==c?(s=e,i[e]="-"+i[e].slice(1)):"-"==c&&(a=e,i[e]="+"+i[e].slice(1))}return i.join("\n")}),t.config.textDiffReverse(e)},f=t.reverse=function(t){var e,n;if("undefined"!=typeof t){if(null===t)return null;if("object"==typeof t&&!s(t)){if(o(t)){if(t.length<3)return 1===t.length?[t[0],0,0]:[t[1],t[0]];if(0===t[2])return[t[0]];if(2===t[2])return[p(t[0]),0,2];throw new Error("invalid diff type")}if(n={},"a"===t._t){for(e in t)if(t.hasOwnProperty(e)&&"_t"!==e){var r,a=e;if(r="_"===e.slice(0,1)?parseInt(e.slice(1),10):parseInt(e,10),o(t[e]))if(1===t[e].length)a="_"+r;else if(2===t[e].length)a=i.getArrayIndexBefore(t,r);else if(0===t[e][2])a=r.toString();else{if(3===t[e][2]){a="_"+t[e][1],n[a]=[t[e][0],r,3];continue}a=i.getArrayIndexBefore(t,r)}else a=i.getArrayIndexBefore(t,r);n[a]=f(t[e])}n._t="a"}else for(e in t)t.hasOwnProperty(e)&&(n[e]=f(t[e]));return n}return"string"==typeof t&&"@@"===t.slice(0,2)?p(t):t}},d=t.patch=function(n,s,a,l){var u,p,f,m="";if("string"!=typeof s?(l=a,a=s,s=null):"object"!=typeof n&&(s=null),l&&(m+=l),m+="/",null!==s&&(m+=s),"object"==typeof a)if(o(a)){if(a.length<3)return p=a[a.length-1],null!==s&&h(n,s,p),p;if(0!==a[2]){if(2===a[2]){if(t.config.textPatch||r(),!t.config.textPatch)throw new Error("textPatch function not found");try{p=t.config.textPatch(c(n,s),a[0])}catch(g){throw new Error('cannot apply patch at "'+m+'": '+g)}return null!==s&&h(n,s,p),p}throw 3===a[2]?new Error("Not implemented diff type: "+a[2]):new Error("invalid diff type: "+a[2])}if(null===s)return;h(n,s)}else if("a"==a._t){if(f=null===s?n:c(n,s),"object"!=typeof f||!o(f))throw new Error('cannot apply patch at "'+m+'": array expected');i.patch(f,a,e.patch,m)}else{if(f=null===s?n:c(n,s),"object"!=typeof f||o(f))throw new Error('cannot apply patch at "'+m+'": object expected');for(u in a)a.hasOwnProperty(u)&&d(f,u,a[u],m)}return n};t.unpatch=function(t,e,n,i){return"string"!=typeof e?d(t,f(e),n):d(t,e,f(n),i)},"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?module.exports=t:"function"==typeof define&&define.amd?define(t):window.jsondiffpatch=t}();var objectDiff="undefined"!=typeof exports?exports:{};objectDiff.diff=function t(e,n){if(e===n)return{changed:"equal",value:e};var i={},r=!0;for(var o in e)if(o in n)if(e[o]===n[o])i[o]={changed:"equal",value:e[o]};else{var s=typeof e[o],a=typeof n[o];if(!e[o]||!n[o]||"object"!=s&&"function"!=s||"object"!=a&&"function"!=a)r=!1,i[o]={changed:"primitive change",removed:e[o],added:n[o]};else{var l=t(e[o],n[o]);"equal"==l.changed?i[o]={changed:"equal",value:e[o]}:(r=!1,i[o]=l)}}else r=!1,i[o]={changed:"removed",value:e[o]};for(o in n)o in e||(r=!1,i[o]={changed:"added",value:n[o]});return r?{changed:"equal",value:e}:{changed:"object change",value:i}},objectDiff.diffOwnProperties=function e(t,n){if(t===n)return{changed:"equal",value:t};for(var i={},r=!0,o=Object.keys(t),s=0,a=o.length;a>s;s++){var l=o[s];if(n.hasOwnProperty(l))if(t[l]===n[l])i[l]={changed:"equal",value:t[l]};else{var u=typeof t[l],c=typeof n[l];if(!t[l]||!n[l]||"object"!=u&&"function"!=u||"object"!=c&&"function"!=c)r=!1,i[l]={changed:"primitive change",removed:t[l],added:n[l]};else{var h=e(t[l],n[l]);"equal"==h.changed?i[l]={changed:"equal",value:t[l]}:(r=!1,i[l]=h)}}else r=!1,i[l]={changed:"removed",value:t[l]}}for(o=Object.keys(n),s=0,a=o.length;a>s;s++)l=o[s],t.hasOwnProperty(l)||(r=!1,i[l]={changed:"added",value:n[l]});return r?{value:t,changed:"equal"}:{changed:"object change",value:i}},function(){function t(t){return/^[a-z0-9_$]*$/i.test(t)?t:JSON.stringify(t)}function e(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function n(n){function i(n,r){switch(typeof r){case"object":if(!r){n+="null";break}var o=Object.keys(r),s=o.length;if(0===s)n+="<span>{}</span>";else{n+='<span>{</span>\n<div class="diff-level">';for(var a=0;s>a;a++){var l=o[a];n=i(n+t(e(l))+"<span>: </span>",r[l]),s-1>a&&(n+="<span>,</span>\n")}n+="\n</div><span>}</span>"}break;case"string":n+=JSON.stringify(e(r));break;case"undefined":n+="undefined";break;default:n+=e(String(r))}return n}return i("",n)}objectDiff.convertToXMLString=function i(r){var o=[],s=r.value;if("equal"==r.changed)return n(s);for(var a in s){var l=s[a].changed;switch(l){case"equal":o.push(t(e(a))+"<span>: </span>"+n(s[a].value));break;case"removed":o.push('<del class="diff">'+t(e(a))+"<span>: </span>"+n(s[a].value)+"</del>");break;case"added":o.push('<ins class="diff">'+t(e(a))+"<span>: </span>"+n(s[a].value)+"</ins>");break;case"primitive change":var u=t(e(a))+"<span>: </span>";o.push('<del class="diff diff-key">'+u+n(s[a].removed)+"</del><span>,</span>\n"+'<ins class="diff diff-key">'+u+n(s[a].added)+"</ins>");break;case"object change":o.push(t(a)+"<span>: </span>"+i(s[a]))}}return'<span>{</span>\n<div class="diff-level">'+o.join("<span>,</span>\n")+"\n</div><span>}</span>"}}(),function(){}.call(this),function(){function createBlob(t,e){t=t||[],e=e||{};try{return new Blob(t,e)}catch(n){if("TypeError"!==n.name)throw n;for(var i=window.BlobBuilder||window.MSBlobBuilder||window.MozBlobBuilder||window.WebKitBlobBuilder,r=new i,o=0;o<t.length;o+=1)r.append(t[o]);return r.getBlob(e.type)}}function pathToTree(t){for(var e,n=t.shift(),i=[n.id,n.opts,[]],r=i;t.length;)n=t.shift(),e=[n.id,n.opts,[]],r[2].push(e),r=e;return i}function mergeTree(t,e){for(var n=[{tree1:t,tree2:e}],i=!1;n.length>0;){var r=n.pop(),o=r.tree1,s=r.tree2;(o[1].status||s[1].status)&&(o[1].status="available"===o[1].status||"available"===s[1].status?"available":"missing");for(var a=0;a<s[2].length;a++)if(o[2][0]){for(var l=!1,u=0;u<o[2].length;u++)o[2][u][0]===s[2][a][0]&&(n.push({tree1:o[2][u],tree2:s[2][a]}),l=!0);l||(i="new_branch",o[2].push(s[2][a]),o[2].sort())}else i="new_leaf",o[2][0]=s[2][a]}return{conflicts:i,tree:t}}function doMerge(t,e,n){var i,r=[],o=!1,s=!1;return t.length?(t.forEach(function(t){if(t.pos===e.pos&&t.ids[0]===e.ids[0])i=mergeTree(t.ids,e.ids),r.push({pos:t.pos,ids:i.tree}),o=o||i.conflicts,s=!0;else if(n!==!0){var a=t.pos<e.pos?t:e,l=t.pos<e.pos?e:t,u=l.pos-a.pos,c=[],h=[];for(h.push({ids:a.ids,diff:u,parent:null,parentIdx:null});h.length>0;){var p=h.pop();0!==p.diff?p.ids&&p.ids[2].forEach(function(t,e){h.push({ids:t,diff:p.diff-1,parent:p.ids,parentIdx:e})}):p.ids[0]===l.ids[0]&&c.push(p)}var f=c[0];f?(i=mergeTree(f.ids,l.ids),f.parent[2][f.parentIdx]=i.tree,r.push({pos:a.pos,ids:a.ids}),o=o||i.conflicts,s=!0):r.push(t)}else r.push(t)}),s||r.push(e),r.sort(function(t,e){return t.pos-e.pos}),{tree:r,conflicts:o||"internal_node"}):{tree:[e],conflicts:"new_leaf"}}function stem(t,e){var n=PouchMerge.rootToLeaf(t).map(function(t){var n=t.ids.slice(-e);return{pos:t.pos+(t.ids.length-n.length),ids:pathToTree(n)}});return n.reduce(function(t,e){return doMerge(t,e,!0).tree},[n.shift()])}function replicate(t,e,n,i){function r(i,r,o){if(n.onChange)for(var s=0;o>s;s++)n.onChange.apply(this,[_]);v-=o,_.docs_written+=o,writeCheckpoint(t,e,d,y,function(){p.notifyRequestComplete(),h()})}function o(){if(!f.length)return p.notifyRequestComplete();var t=f.length;e.bulkDocs({docs:f},{new_edits:!1},function(e,n){r(e,n,t)}),f=[]}function s(e,n){t.get(e,{revs:!0,rev:n,attachments:!0},function(t,e){_.docs_read++,p.notifyRequestComplete(),f.push(e),p.enqueue(o)})}function a(t){return function(e,r){if(p.notifyRequestComplete(),e)return b&&i.cancel(),PouchUtils.call(n.complete,e,null),void 0;if(0===Object.keys(r).length){for(var o in t)v-=t[o];return h(),void 0}var a=function(t){p.enqueue(s,[l,t])};for(var l in r){var u=t[l]-r[l].missing.length;v-=u,r[l].missing.forEach(a)}}}function l(t,n){e.revsDiff(t,a(n))}function u(t){y=t.seq,m.push(t);var e={};e[t.id]=t.changes.map(function(t){return t.rev});var n={};n[t.id]=t.changes.length,v+=t.changes.length,p.enqueue(l,[e,n])}function c(){g=!0,h()}function h(){g&&0===v&&(_.end_time=new Date,PouchUtils.call(n.complete,null,_))}var p=new RequestManager,f=[],d=genReplicationId(t,e,n),m=[],g=!1,v=0,y=0,b=n.continuous||!1,w=n.doc_ids,_={ok:!0,start_time:new Date,docs_read:0,docs_written:0};fetchCheckpoint(t,e,d,function(e,r){if(e)return PouchUtils.call(n.complete,e);if(y=r,!i.cancelled){var o={continuous:b,since:y,style:"all_docs",onChange:u,complete:c,doc_ids:w};n.filter&&(o.filter=n.filter),n.query_params&&(o.query_params=n.query_params);var s=t.changes(o);n.continuous&&(i.cancel=s.cancel)}})}function toPouch(t,e){return"string"==typeof t?new Pouch(t,e):(e(null,t),void 0)}function arrayFirst(t,e){for(var n=0;n<t.length;n++)if(e(t[n],n)===!0)return t[n];return!1}function yankError(t){return function(e,n){e||n[0].error?call(t,e||n[0]):call(t,null,n[0])}}function computeHeight(t){var e={},n=[];return PouchMerge.traverseRevTree(t,function(t,i,r,o){var s=i+"-"+r;return t&&(e[s]=0),void 0!==o&&n.push({from:o,to:s}),s}),n.reverse(),n.forEach(function(t){e[t.from]=void 0===e[t.from]?1+e[t.to]:Math.min(e[t.from],1+e[t.to])}),e}function parseUri(t){for(var e=parseUri.options,n=e.parser[e.strictMode?"strict":"loose"].exec(t),i={},r=14;r--;)i[e.key[r]]=n[r]||"";return i[e.q.name]={},i[e.key[12]].replace(e.q.parser,function(t,n,r){n&&(i[e.q.name][n]=r)}),i}function encodeDocId(t){return/^_design/.test(t)?t:encodeURIComponent(t)}function getHost(t,e){if(/http(s?):/.test(t)){var n=parseUri(t);n.remote=!0,(n.user||n.password)&&(n.auth={username:n.user,password:n.password});var i=n.path.replace(/(^\/|\/$)/g,"").split("/");if(n.db=i.pop(),n.path=i.join("/"),e=e||{},n.headers=e.headers||{},e.auth||n.auth){var r=e.auth||n.auth,o=PouchUtils.btoa(r.username+":"+r.password);n.headers.Authorization="Basic "+o}return e.headers&&(n.headers=e.headers),n}return{host:"",path:"/",db:t,auth:!1}}function genDBUrl(t,e){if(t.remote){var n=t.path?"/":"";return t.protocol+"://"+t.host+":"+t.port+"/"+t.path+n+t.db+"/"+e}return"/"+t.db+"/"+e}function genUrl(t,e){if(t.remote){var n=t.path?"/":"";return t.protocol+"://"+t.host+":"+t.port+"/"+t.path+n+e}return"/"+e}function HttpPouch(t,e){function n(t,e){return PouchUtils.ajax(PouchUtils.extend({},s,t),e)}var i=getHost(t.name,t),r=genDBUrl(i,""),o={},s=t.ajax||{},a={list:[],get:function(t,e){"function"==typeof t&&(e=t,t={count:10});var r=function(t,n){!t&&"uuids"in n?(a.list=a.list.concat(n.uuids),PouchUtils.call(e,null,"OK")):PouchUtils.call(e,t||Pouch.Errors.UNKNOWN_ERROR)},o="?count="+t.count;n({headers:i.headers,method:"GET",url:genUrl(i,"_uuids")+o},r)}},l=function(){n({headers:i.headers,method:"PUT",url:r},function(t){t&&401===t.status?n({headers:i.headers,method:"HEAD",url:r},function(t){t?PouchUtils.call(e,t):PouchUtils.call(e,null,o)}):t&&412!==t.status?PouchUtils.call(e,Pouch.Errors.UNKNOWN_ERROR):PouchUtils.call(e,null,o)})};return t.skipSetup||n({headers:i.headers,method:"GET",url:r},function(t){t?404===t.status?l():PouchUtils.call(e,t):PouchUtils.call(e,null,o)}),o.type=function(){return"http"},o.id=function(){return genDBUrl(i,"")},o.request=function(t,e){return o.taskqueue.ready()?(t.headers=i.headers,t.url=genDBUrl(i,t.url),n(t,e),void 0):(o.taskqueue.addTask("request",arguments),void 0)},o.compact=function(t,e){return o.taskqueue.ready()?("function"==typeof t&&(e=t,t={}),n({headers:i.headers,url:genDBUrl(i,"_compact"),method:"POST"},function(){function n(){o.info(function(i,r){r.compact_running?setTimeout(n,t.interval||200):PouchUtils.call(e,null)})}"function"==typeof e&&n()}),void 0):(o.taskqueue.addTask("compact",arguments),void 0)},o.info=function(t){return o.taskqueue.ready()?(n({headers:i.headers,method:"GET",url:genDBUrl(i,"")},t),void 0):(o.taskqueue.addTask("info",arguments),void 0)},o.get=function(t,e,r){if(!o.taskqueue.ready())return o.taskqueue.addTask("get",arguments),void 0;"function"==typeof e&&(r=e,e={}),void 0===e.auto_encode&&(e.auto_encode=!0);var s=[];e.revs&&s.push("revs=true"),e.revs_info&&s.push("revs_info=true"),e.local_seq&&s.push("local_seq=true"),e.open_revs&&("all"!==e.open_revs&&(e.open_revs=JSON.stringify(e.open_revs)),s.push("open_revs="+e.open_revs)),e.attachments&&s.push("attachments=true"),e.rev&&s.push("rev="+e.rev),e.conflicts&&s.push("conflicts="+e.conflicts),s=s.join("&"),s=""===s?"":"?"+s,e.auto_encode&&(t=encodeDocId(t));var a={headers:i.headers,method:"GET",url:genDBUrl(i,t+s)},l=t.split("/");(l.length>1&&"_design"!==l[0]&&"_local"!==l[0]||l.length>2&&"_design"===l[0]&&"_local"!==l[0])&&(a.binary=!0),n(a,function(t,e,n){return t?PouchUtils.call(r,t):(PouchUtils.call(r,null,e,n),void 0)})},o.remove=function(t,e,r){return o.taskqueue.ready()?("function"==typeof e&&(r=e,e={}),n({headers:i.headers,method:"DELETE",url:genDBUrl(i,encodeDocId(t._id))+"?rev="+t._rev},r),void 0):(o.taskqueue.addTask("remove",arguments),void 0)},o.getAttachment=function(t,e,n,i){"function"==typeof n&&(i=n,n={}),void 0===n.auto_encode&&(n.auto_encode=!0),n.auto_encode&&(t=encodeDocId(t)),n.auto_encode=!1,o.get(t+"/"+e,n,i)},o.removeAttachment=function(t,e,r,s){return o.taskqueue.ready()?(n({headers:i.headers,method:"DELETE",url:genDBUrl(i,encodeDocId(t)+"/"+e)+"?rev="+r},s),void 0):(o.taskqueue.addTask("removeAttachment",arguments),void 0)},o.putAttachment=function(t,e,r,s,a,l){if(!o.taskqueue.ready())return o.taskqueue.addTask("putAttachment",arguments),void 0;"function"==typeof a&&(l=a,a=s,s=r,r=null),"undefined"==typeof a&&(a=s,s=r,r=null);var u=encodeDocId(t)+"/"+e,c=genDBUrl(i,u);r&&(c+="?rev="+r);var h={headers:i.headers,method:"PUT",url:c,processData:!1,body:s,timeout:6e4};h.headers["Content-Type"]=a,n(h,l)},o.put=function(t,e,r){if(!o.taskqueue.ready())return o.taskqueue.addTask("put",arguments),void 0;if("function"==typeof e&&(r=e,e={}),"object"!=typeof t)return PouchUtils.call(r,Pouch.Errors.NOT_AN_OBJECT);if(!("_id"in t))return PouchUtils.call(r,Pouch.Errors.MISSING_ID);var s=[];e&&"undefined"!=typeof e.new_edits&&s.push("new_edits="+e.new_edits),s=s.join("&"),""!==s&&(s="?"+s),n({headers:i.headers,method:"PUT",url:genDBUrl(i,encodeDocId(t._id))+s,body:t},r)},o.post=function(t,e,n){return o.taskqueue.ready()?("function"==typeof e&&(n=e,e={}),"object"!=typeof t?PouchUtils.call(n,Pouch.Errors.NOT_AN_OBJECT):("_id"in t?o.put(t,e,n):a.list.length>0?(t._id=a.list.pop(),o.put(t,e,n)):a.get(function(i){return i?PouchUtils.call(n,Pouch.Errors.UNKNOWN_ERROR):(t._id=a.list.pop(),o.put(t,e,n),void 0)}),void 0)):(o.taskqueue.addTask("post",arguments),void 0)},o.bulkDocs=function(t,e,r){return o.taskqueue.ready()?("function"==typeof e&&(r=e,e={}),e||(e={}),"undefined"!=typeof e.new_edits&&(t.new_edits=e.new_edits),n({headers:i.headers,method:"POST",url:genDBUrl(i,"_bulk_docs"),body:t},r),void 0):(o.taskqueue.addTask("bulkDocs",arguments),void 0)},o.allDocs=function(t,e){if(!o.taskqueue.ready())return o.taskqueue.addTask("allDocs",arguments),void 0;"function"==typeof t&&(e=t,t={});var r,s=[],a="GET";t.conflicts&&s.push("conflicts=true"),t.descending&&s.push("descending=true"),t.include_docs&&s.push("include_docs=true"),t.startkey&&s.push("startkey="+encodeURIComponent(JSON.stringify(t.startkey))),t.endkey&&s.push("endkey="+encodeURIComponent(JSON.stringify(t.endkey))),t.limit&&s.push("limit="+t.limit),"undefined"!=typeof t.skip&&s.push("skip="+t.skip),s=s.join("&"),""!==s&&(s="?"+s),"undefined"!=typeof t.keys&&(a="POST",r=JSON.stringify({keys:t.keys})),n({headers:i.headers,method:a,url:genDBUrl(i,"_all_docs"+s),body:r},e)},o.changes=function(t){var e=25;if(!o.taskqueue.ready())return o.taskqueue.addTask("changes",arguments),void 0;if("latest"===t.since)return o.info(function(e,n){t.since=n.update_seq,o.changes(t)}),void 0;Pouch.DEBUG&&console.log(r+": Start Changes Feed: continuous="+t.continuous);var s={},a="undefined"!=typeof t.limit?t.limit:!1;0===a&&(a=1);var l=a;if(t.style&&(s.style=t.style),(t.include_docs||t.filter&&"function"==typeof t.filter)&&(s.include_docs=!0),t.continuous&&(s.feed="longpoll"),t.conflicts&&(s.conflicts=!0),t.descending&&(s.descending=!0),t.filter&&"string"==typeof t.filter&&(s.filter=t.filter),t.query_params&&"object"==typeof t.query_params)for(var u in t.query_params)t.query_params.hasOwnProperty(u)&&(s[u]=t.query_params[u]);var c,h,p,f,d=function(r,o){s.since=r,t.continuous||f||(f=p),s.limit=!a||l>e?e:l;var u="?"+Object.keys(s).map(function(t){return t+"="+s[t]}).join("&"),d={headers:i.headers,method:"GET",url:genDBUrl(i,"_changes"+u),timeout:null};h=r,t.aborted||(c=n(d,o))},m=10,g=0,v={results:[]},y=function(n,i){if(i&&i.results){v.last_seq=i.last_seq;var r={};r.query=t.query_params,i.results=i.results.filter(function(e){l--;var n=PouchUtils.filterChange(t)(e);return n&&(v.results.push(e),PouchUtils.call(t.onChange,e)),n})}i&&i.last_seq&&(h=i.last_seq);var o=i&&i.results.length||0;f-=e;var s=a&&0>=l||i&&!o&&0>=f||o&&i.last_seq===p||t.descending&&0!==h;if(t.continuous||!s){n?g+=1:g=0;var u=1<<g,c=m*u,b=t.maximumWait||3e4;c>b&&PouchUtils.call(t.complete,n||Pouch.Errors.UNKNOWN_ERROR,null),setTimeout(function(){d(h,y)},c)}else PouchUtils.call(t.complete,null,v)};return t.continuous?d(t.since||0,y):o.info(function(e,n){return e?PouchUtils.call(t.complete,e):(p=n.update_seq,d(t.since||0,y),void 0)}),{cancel:function(){Pouch.DEBUG&&console.log(r+": Cancel Changes Feed"),t.aborted=!0,c.abort()}}},o.revsDiff=function(t,e,r){return o.taskqueue.ready()?("function"==typeof e&&(r=e,e={}),n({headers:i.headers,method:"POST",url:genDBUrl(i,"_revs_diff"),body:t},function(t,e){PouchUtils.call(r,t,e)}),void 0):(o.taskqueue.addTask("revsDiff",arguments),void 0)},o.close=function(t){return o.taskqueue.ready()?(PouchUtils.call(t,null),void 0):(o.taskqueue.addTask("close",arguments),void 0)},o}function quote(t){return"'"+t+"'"}/*!
Math.uuid.js (v1.4)
http://www.broofa.com
mailto:robert@broofa.com

Copyright (c) 2010 Robert Kieffer
Dual licensed under the MIT and GPL licenses.
*/
var uuid;!function(){var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");uuid=function(e,n){var i,r=t,o=[];if(n=n||r.length,e)for(i=0;e>i;i++)o[i]=r[0|Math.random()*n];else{var s;for(o[8]=o[13]=o[18]=o[23]="-",o[14]="4",i=0;36>i;i++)o[i]||(s=0|16*Math.random(),o[i]=r[19==i?8|3&s:s])}return o.join("")}}(),"undefined"!=typeof module&&module.exports&&(module.exports=uuid);var Crypto={};!function(){Crypto.MD5=function(t){function e(t,e){return t<<e|t>>>32-e}function n(t,e){var n,i,r,o,s;return r=2147483648&t,o=2147483648&e,n=1073741824&t,i=1073741824&e,s=(1073741823&t)+(1073741823&e),n&i?2147483648^s^r^o:n|i?1073741824&s?3221225472^s^r^o:1073741824^s^r^o:s^r^o}function i(t,e,n){return t&e|~t&n}function r(t,e,n){return t&n|e&~n}function o(t,e,n){return t^e^n}function s(t,e,n){return e^(t|~n)}function a(t,r,o,s,a,l,u){return t=n(t,n(n(i(r,o,s),a),u)),n(e(t,l),r)}function l(t,i,o,s,a,l,u){return t=n(t,n(n(r(i,o,s),a),u)),n(e(t,l),i)}function u(t,i,r,s,a,l,u){return t=n(t,n(n(o(i,r,s),a),u)),n(e(t,l),i)}function c(t,i,r,o,a,l,u){return t=n(t,n(n(s(i,r,o),a),u)),n(e(t,l),i)}function h(t){for(var e,n=t.length,i=n+8,r=(i-i%64)/64,o=16*(r+1),s=Array(o-1),a=0,l=0;n>l;)e=(l-l%4)/4,a=8*(l%4),s[e]=s[e]|t.charCodeAt(l)<<a,l++;return e=(l-l%4)/4,a=8*(l%4),s[e]=s[e]|128<<a,s[o-2]=n<<3,s[o-1]=n>>>29,s}function p(t){var e,n,i="",r="";for(n=0;3>=n;n++)e=255&t>>>8*n,r="0"+e.toString(16),i+=r.substr(r.length-2,2);return i}var f,d,m,g,v,y,b,w,_,x=Array(),S=7,k=12,C=17,E=22,T=5,M=9,P=14,A=20,O=4,N=11,D=16,I=23,L=6,$=10,z=15,R=21;for(x=h(t),y=1732584193,b=4023233417,w=2562383102,_=271733878,f=0;f<x.length;f+=16)d=y,m=b,g=w,v=_,y=a(y,b,w,_,x[f+0],S,3614090360),_=a(_,y,b,w,x[f+1],k,3905402710),w=a(w,_,y,b,x[f+2],C,606105819),b=a(b,w,_,y,x[f+3],E,3250441966),y=a(y,b,w,_,x[f+4],S,4118548399),_=a(_,y,b,w,x[f+5],k,1200080426),w=a(w,_,y,b,x[f+6],C,2821735955),b=a(b,w,_,y,x[f+7],E,4249261313),y=a(y,b,w,_,x[f+8],S,1770035416),_=a(_,y,b,w,x[f+9],k,2336552879),w=a(w,_,y,b,x[f+10],C,4294925233),b=a(b,w,_,y,x[f+11],E,2304563134),y=a(y,b,w,_,x[f+12],S,1804603682),_=a(_,y,b,w,x[f+13],k,4254626195),w=a(w,_,y,b,x[f+14],C,2792965006),b=a(b,w,_,y,x[f+15],E,1236535329),y=l(y,b,w,_,x[f+1],T,4129170786),_=l(_,y,b,w,x[f+6],M,3225465664),w=l(w,_,y,b,x[f+11],P,643717713),b=l(b,w,_,y,x[f+0],A,3921069994),y=l(y,b,w,_,x[f+5],T,3593408605),_=l(_,y,b,w,x[f+10],M,38016083),w=l(w,_,y,b,x[f+15],P,3634488961),b=l(b,w,_,y,x[f+4],A,3889429448),y=l(y,b,w,_,x[f+9],T,568446438),_=l(_,y,b,w,x[f+14],M,3275163606),w=l(w,_,y,b,x[f+3],P,4107603335),b=l(b,w,_,y,x[f+8],A,1163531501),y=l(y,b,w,_,x[f+13],T,2850285829),_=l(_,y,b,w,x[f+2],M,4243563512),w=l(w,_,y,b,x[f+7],P,1735328473),b=l(b,w,_,y,x[f+12],A,2368359562),y=u(y,b,w,_,x[f+5],O,4294588738),_=u(_,y,b,w,x[f+8],N,2272392833),w=u(w,_,y,b,x[f+11],D,1839030562),b=u(b,w,_,y,x[f+14],I,4259657740),y=u(y,b,w,_,x[f+1],O,2763975236),_=u(_,y,b,w,x[f+4],N,1272893353),w=u(w,_,y,b,x[f+7],D,4139469664),b=u(b,w,_,y,x[f+10],I,3200236656),y=u(y,b,w,_,x[f+13],O,681279174),_=u(_,y,b,w,x[f+0],N,3936430074),w=u(w,_,y,b,x[f+3],D,3572445317),b=u(b,w,_,y,x[f+6],I,76029189),y=u(y,b,w,_,x[f+9],O,3654602809),_=u(_,y,b,w,x[f+12],N,3873151461),w=u(w,_,y,b,x[f+15],D,530742520),b=u(b,w,_,y,x[f+2],I,3299628645),y=c(y,b,w,_,x[f+0],L,4096336452),_=c(_,y,b,w,x[f+7],$,1126891415),w=c(w,_,y,b,x[f+14],z,2878612391),b=c(b,w,_,y,x[f+5],R,4237533241),y=c(y,b,w,_,x[f+12],L,1700485571),_=c(_,y,b,w,x[f+3],$,2399980690),w=c(w,_,y,b,x[f+10],z,4293915773),b=c(b,w,_,y,x[f+1],R,2240044497),y=c(y,b,w,_,x[f+8],L,1873313359),_=c(_,y,b,w,x[f+15],$,4264355552),w=c(w,_,y,b,x[f+6],z,2734768916),b=c(b,w,_,y,x[f+13],R,1309151649),y=c(y,b,w,_,x[f+4],L,4149444226),_=c(_,y,b,w,x[f+11],$,3174756917),w=c(w,_,y,b,x[f+2],z,718787259),b=c(b,w,_,y,x[f+9],R,3951481745),y=n(y,d),b=n(b,m),w=n(w,g),_=n(_,v);var B=p(y)+p(b)+p(w)+p(_);return B.toLowerCase()}}(),"undefined"!=typeof module&&module.exports&&(module.exports=Crypto),"undefined"!=typeof module&&module.exports&&(module.exports=createBlob),function(){if(!Object.defineProperty||!function(){try{return Object.defineProperty({},"x",{}),!0}catch(t){return!1}}()){var t=Object.defineProperty;Object.defineProperty=function(e,n,i){"use strict";if(t)try{return t(e,n,i)}catch(r){}if(e!==Object(e))throw new TypeError("Object.defineProperty called on non-object");return Object.prototype.__defineGetter__&&"get"in i&&Object.prototype.__defineGetter__.call(e,n,i.get),Object.prototype.__defineSetter__&&"set"in i&&Object.prototype.__defineSetter__.call(e,n,i.set),"value"in i&&(e[n]=i.value),e}}}(),Object.keys||(Object.keys=function(t){if(t!==Object(t))throw new TypeError("Object.keys called on non-object");var e,n=[];for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&n.push(e);return n}),Array.prototype.forEach||(Array.prototype.forEach=function(t){"use strict";if(void 0===this||null===this)throw new TypeError;var e=Object(this),n=e.length>>>0;if("function"!=typeof t)throw new TypeError;var i,r=arguments[1];for(i=0;n>i;i++)i in e&&t.call(r,e[i],i,e)}),Array.prototype.map||(Array.prototype.map=function(t){"use strict";if(void 0===this||null===this)throw new TypeError;var e=Object(this),n=e.length>>>0;if("function"!=typeof t)throw new TypeError;var i=[];i.length=n;var r,o=arguments[1];for(r=0;n>r;r++)r in e&&(i[r]=t.call(o,e[r],r,e));return i});for(var class2type={},types=["Boolean","Number","String","Function","Array","Date","RegExp","Object","Error"],i=0;i<types.length;i++){var typename=types[i];class2type["[object "+typename+"]"]=typename.toLowerCase()}var core_toString=class2type.toString,core_hasOwn=class2type.hasOwnProperty,type=function(t){return null===t?String(t):"object"==typeof t||"function"==typeof t?class2type[core_toString.call(t)]||"object":typeof t},isWindow=function(t){return null!==t&&t===t.window},isPlainObject=function(t){if(!t||"object"!==type(t)||t.nodeType||isWindow(t))return!1;try{if(t.constructor&&!core_hasOwn.call(t,"constructor")&&!core_hasOwn.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}var n;for(n in t);return void 0===n||core_hasOwn.call(t,n)},isFunction=function(t){return"function"===type(t)},isArray=Array.isArray||function(t){return"array"===type(t)},extend=function(){var t,e,n,i,r,o,s=arguments[0]||{},a=1,l=arguments.length,u=!1;for("boolean"==typeof s&&(u=s,s=arguments[1]||{},a=2),"object"==typeof s||isFunction(s)||(s={}),l===a&&(s=this,--a);l>a;a++)if(null!=(t=arguments[a]))for(e in t)n=s[e],i=t[e],s!==i&&(u&&i&&(isPlainObject(i)||(r=isArray(i)))?(r?(r=!1,o=n&&isArray(n)?n:[]):o=n&&isPlainObject(n)?n:{},s[e]=extend(u,o,i)):void 0!==i&&(isArray(t)&&isFunction(i)||(s[e]=i)));return s};"undefined"!=typeof module&&module.exports&&(module.exports=extend);var request,extend,createBlob;"undefined"!=typeof module&&module.exports&&(request=require("request"),extend=require("./extend.js"),createBlob=require("./blob.js"));var ajax=function(t,e){function n(t,e,n){if(n){var i=new Date;i.setTime(i.getTime()+1e3*60*60*24*n);var r="; expires="+i.toGMTString()}else var r="";document.cookie=t+"="+e+r+"; path=/"}"function"==typeof t&&(e=t,t={});var i=function(t){var e=Array.prototype.slice.call(arguments,1);typeof t==typeof Function&&t.apply(this,e)},r={method:"GET",headers:{},json:!0,processData:!0,timeout:1e4};t=extend(!0,r,t);var o=function(e,n,r){if(t.binary||t.json||!t.processData||"string"==typeof e){if(!t.binary&&t.json&&"string"==typeof e)try{e=JSON.parse(e)}catch(o){return i(r,o),void 0}}else e=JSON.stringify(e);i(r,null,e,n)},s=function(t,e){var n,r={status:t.status};try{n=JSON.parse(t.responseText),r=extend(!0,{},r,n)}catch(o){}i(e,r)};if("undefined"!=typeof window&&window.XMLHttpRequest){var a,l=!1,u=new XMLHttpRequest;u.open(t.method,t.url),u.withCredentials=!0,t.json&&(t.headers.Accept="application/json",t.headers["Content-Type"]=t.headers["Content-Type"]||"application/json",t.body&&t.processData&&"string"!=typeof t.body&&(t.body=JSON.stringify(t.body))),t.binary&&(u.responseType="arraybuffer");for(var c in t.headers)if("Cookie"===c){var h=t.headers[c].split("=");n(h[0],h[1],10)}else u.setRequestHeader(c,t.headers[c]);"body"in t||(t.body=null);var p=function(){l=!0,u.abort(),i(s,u,e)};return u.onreadystatechange=function(){if(4===u.readyState&&!l)if(clearTimeout(a),u.status>=200&&u.status<300){var n;n=t.binary?createBlob([u.response||""],{type:u.getResponseHeader("Content-Type")}):u.responseText,i(o,n,u,e)}else i(s,u,e)},t.timeout>0&&(a=setTimeout(p,t.timeout)),u.send(t.body),{abort:p}}return t.json&&(t.binary||(t.headers.Accept="application/json"),t.headers["Content-Type"]=t.headers["Content-Type"]||"application/json"),t.binary&&(t.encoding=null,t.json=!1),t.processData||(t.json=!1),request(t,function(n,r,a){if(n)return n.status=r?r.statusCode:400,i(s,n,e);var l=r.headers["content-type"],u=a||"";t.binary||!t.json&&t.processData||"object"==typeof u||!(/json/.test(l)||/^[\s]*\{/.test(u)&&/\}[\s]*$/.test(u))||(u=JSON.parse(u)),r.statusCode>=200&&r.statusCode<300?i(o,u,r,e):(t.binary&&(u=JSON.parse(u.toString())),u.status=r.statusCode,i(e,u))})};"undefined"!=typeof module&&module.exports&&(module.exports=ajax);var PouchUtils;"undefined"!=typeof module&&module.exports&&(PouchUtils=require("./pouch.utils.js"));var Pouch=function t(e,n,i){if(!(this instanceof t))return new t(e,n,i);("function"==typeof n||"undefined"==typeof n)&&(i=n,n={}),"object"==typeof e&&(n=e,e=void 0),"undefined"==typeof i&&(i=function(){});var r=t.parseAdapter(n.name||e);if(n.originalName=e,n.name=n.name||r.name,n.adapter=n.adapter||r.adapter,!t.adapters[n.adapter])throw"Adapter is missing";if(!t.adapters[n.adapter].valid())throw"Invalid Adapter";var o=new PouchAdapter(n,function(e,n){if(e)return i&&i(e),void 0;for(var r in t.plugins){var o=t.plugins[r](n);for(var s in o)s in n||(n[s]=o[s])}n.taskqueue.ready(!0),n.taskqueue.execute(n),i(null,n)});for(var s in o)this[s]=o[s];for(var a in t.plugins){var l=t.plugins[a](this);for(var u in l)u in this||(this[u]=l[u])}};if(Pouch.DEBUG=!1,Pouch.openReqList={},Pouch.adapters={},Pouch.plugins={},Pouch.prefix="_pouch_",Pouch.parseAdapter=function(t){var e,n=t.match(/([a-z\-]*):\/\/(.*)/);if(n){if(t=/http(s?)/.test(n[1])?n[1]+"://"+n[2]:n[2],e=n[1],!Pouch.adapters[e].valid())throw"Invalid adapter";return{name:t,adapter:n[1]}}for(var i=["idb","leveldb","websql"],r=0;r<i.length;++r)if(i[r]in Pouch.adapters){e=Pouch.adapters[i[r]];var o="use_prefix"in e?e.use_prefix:!0;return{name:o?Pouch.prefix+t:t,adapter:i[r]}}throw"No valid adapter found"},Pouch.destroy=function(t,e,n){("function"==typeof e||"undefined"==typeof e)&&(n=e,e={}),"object"==typeof t&&(e=t,t=void 0),"undefined"==typeof n&&(n=function(){});var i=Pouch.parseAdapter(e.name||t),r=function(t){if(t)return n(t),void 0;for(var r in Pouch.plugins)Pouch.plugins[r]._delete(i.name);Pouch.DEBUG&&console.log(i.name+": Delete Database"),Pouch.adapters[i.adapter].destroy(i.name,e,n)};Pouch.removeFromAllDbs(i,r)},Pouch.removeFromAllDbs=function(t,e){if(!Pouch.enableAllDbs)return e(),void 0;var n=t.adapter;return"http"===n||"https"===n?(e(),void 0):(new Pouch(Pouch.allDBName(t.adapter),function(n,i){if(n)return console.error(n),e(),void 0;var r=Pouch.dbName(t.adapter,t.name);i.get(r,function(t,n){t?e():i.remove(n,function(t){t&&console.error(t),e()})})}),void 0)},Pouch.adapter=function(t,e){e.valid()&&(Pouch.adapters[t]=e)},Pouch.plugin=function(t,e){Pouch.plugins[t]=e},Pouch.enableAllDbs=!1,Pouch.ALL_DBS="_allDbs",Pouch.dbName=function(t,e){return[t,"-",e].join("")},Pouch.realDBName=function(t,e){return[t,"://",e].join("")},Pouch.allDBName=function(t){return[t,"://",Pouch.prefix+Pouch.ALL_DBS].join("")},Pouch.open=function(t,e){if(!Pouch.enableAllDbs)return e(),void 0;var n=t.adapter;return"http"===n||"https"===n?(e(),void 0):(new Pouch(Pouch.allDBName(n),function(i,r){if(i)return console.error(i),e(),void 0;var o=Pouch.dbName(n,t.name);r.get(o,function(n){n&&404===n.status?r.put({_id:o,dbname:t.originalName},function(t){t&&console.error(t),e()}):e()})}),void 0)},Pouch.allDbs=function(t){var e=function(n,i){if(0===n.length){var r=[];return i.forEach(function(t){var e=r.some(function(e){return e.id===t.id});e||r.push(t)}),t(null,r.map(function(t){return t.doc.dbname})),void 0}var o=n.shift();return"http"===o||"https"===o?(e(n,i),void 0):(new Pouch(Pouch.allDBName(o),function(r,o){return r?(t(r),void 0):(o.allDocs({include_docs:!0},function(r,o){return r?(t(r),void 0):(i.unshift.apply(i,o.rows),e(n,i),void 0)}),void 0)}),void 0)},n=Object.keys(Pouch.adapters);e(n,[])},Pouch.uuids=function(t,e){"object"!=typeof e&&(e={});for(var n=e.length,i=e.radix,r=[];r.push(PouchUtils.uuid(n,i))<t;);return r},Pouch.uuid=function(t){return Pouch.uuids(1,t)[0]},Pouch.Errors={MISSING_BULK_DOCS:{status:400,error:"bad_request",reason:"Missing JSON list of 'docs'"},MISSING_DOC:{status:404,error:"not_found",reason:"missing"},REV_CONFLICT:{status:409,error:"conflict",reason:"Document update conflict"},INVALID_ID:{status:400,error:"invalid_id",reason:"_id field must contain a string"},MISSING_ID:{status:412,error:"missing_id",reason:"_id is required for puts"},RESERVED_ID:{status:400,error:"bad_request",reason:"Only reserved document ids may start with underscore."},NOT_OPEN:{status:412,error:"precondition_failed",reason:"Database not open so cannot close"},UNKNOWN_ERROR:{status:500,error:"unknown_error",reason:"Database encountered an unknown error"},BAD_ARG:{status:500,error:"badarg",reason:"Some query argument is invalid"},INVALID_REQUEST:{status:400,error:"invalid_request",reason:"Request was invalid"},QUERY_PARSE_ERROR:{status:400,error:"query_parse_error",reason:"Some query parameter is invalid"},DOC_VALIDATION:{status:500,error:"doc_validation",reason:"Bad special document member"},BAD_REQUEST:{status:400,error:"bad_request",reason:"Something wrong with the request"},NOT_AN_OBJECT:{status:400,error:"bad_request",reason:"Document must be a JSON object"}},Pouch.error=function(t,e){return PouchUtils.extend({},t,{reason:e})},"undefined"!=typeof module&&module.exports){global.Pouch=Pouch,global.PouchDB=Pouch,module.exports=Pouch,Pouch.replicate=require("./pouch.replicate.js").replicate;var PouchAdapter=require("./pouch.adapter.js");require("./adapters/pouch.http.js"),require("./adapters/pouch.idb.js"),require("./adapters/pouch.websql.js"),require("./adapters/pouch.leveldb.js"),require("./plugins/pouchdb.mapreduce.js")}else window.Pouch=Pouch,window.PouchDB=Pouch;var pouchCollate=function(t,e){var n=collationIndex(t),i=collationIndex(e);return 0!==n-i?n-i:null===t?0:"number"==typeof t?t-e:"boolean"==typeof t?e>t?-1:1:"string"==typeof t?stringCollate(t,e):Array.isArray(t)?arrayCollate(t,e):"object"==typeof t?objectCollate(t,e):void 0},stringCollate=function(t,e){return t===e?0:t>e?1:-1},objectCollate=function(t,e){for(var n=Object.keys(t),i=Object.keys(e),r=Math.min(n.length,i.length),o=0;r>o;o++){var s=pouchCollate(n[o],i[o]);if(0!==s)return s;if(s=pouchCollate(t[n[o]],e[i[o]]),0!==s)return s}return n.length===i.length?0:n.length>i.length?1:-1},arrayCollate=function(t,e){for(var n=Math.min(t.length,e.length),i=0;n>i;i++){var r=pouchCollate(t[i],e[i]);if(0!==r)return r}return t.length===e.length?0:t.length>e.length?1:-1},collationIndex=function(t){var e=["boolean","number","string","object"];return-1!==e.indexOf(typeof t)?null===t?1:e.indexOf(typeof t)+2:Array.isArray(t)?4.5:void 0};"undefined"!=typeof module&&module.exports&&(module.exports=pouchCollate);var extend;"undefined"!=typeof module&&module.exports&&(extend=require("./deps/extend"));var PouchMerge={};PouchMerge.merge=function(t,e,n){t=extend(!0,[],t),e=extend(!0,{},e);var i=doMerge(t,e);return{tree:stem(i.tree,n),conflicts:i.conflicts}},PouchMerge.winningRev=function(t){var e=[];return PouchMerge.traverseRevTree(t.rev_tree,function(t,n,i,r,o){t&&e.push({pos:n,id:i,deleted:!!o.deleted})}),e.sort(function(t,e){return t.deleted!==e.deleted?t.deleted>e.deleted?1:-1:t.pos!==e.pos?e.pos-t.pos:t.id<e.id?1:-1}),e[0].pos+"-"+e[0].id},PouchMerge.traverseRevTree=function(t,e){var n=[];for(t.forEach(function(t){n.push({pos:t.pos,ids:t.ids})});n.length>0;){var i=n.pop(),r=i.pos,o=i.ids,s=e(0===o[2].length,r,o[0],i.ctx,o[1]);o[2].forEach(function(t){n.push({pos:r+1,ids:t,ctx:s})})}},PouchMerge.collectLeaves=function(t){var e=[];return PouchMerge.traverseRevTree(t,function(t,n,i,r,o){t&&e.unshift({rev:n+"-"+i,pos:n,opts:o})}),e.sort(function(t,e){return e.pos-t.pos}),e.map(function(t){delete t.pos}),e},PouchMerge.collectConflicts=function(t){var e=PouchMerge.winningRev(t),n=PouchMerge.collectLeaves(t.rev_tree),i=[];return n.forEach(function(t){t.rev===e||t.opts.deleted||i.push(t.rev)}),i},PouchMerge.rootToLeaf=function(t){var e=[];return PouchMerge.traverseRevTree(t,function(t,n,i,r,o){if(r=r?r.slice(0):[],r.push({id:i,opts:o}),t){var s=n+1-r.length;e.unshift({pos:s,ids:r})}return r}),e},"undefined"!=typeof module&&module.exports&&(module.exports=PouchMerge);var PouchUtils;"undefined"!=typeof module&&module.exports&&(module.exports=Pouch,PouchUtils=require("./pouch.utils.js"));var Promise=function(){this.cancelled=!1,this.cancel=function(){this.cancelled=!0}},RequestManager=function(){var t=[],e={},n=!1;return e.enqueue=function(i,r){t.push({fun:i,args:r}),n||e.process()},e.process=function(){if(!n&&t.length){n=!0;var e=t.shift();e.fun.apply(null,e.args)}},e.notifyRequestComplete=function(){n=!1,e.process()},e},genReplicationId=function(t,e,n){var i=n.filter?n.filter.toString():"";return"_local/"+PouchUtils.Crypto.MD5(t.id()+e.id()+i)},fetchCheckpoint=function(t,e,n,i){e.get(n,function(e,r){e&&404===e.status?i(null,0):t.get(n,function(t,e){t&&404===t.status||r.last_seq!==e.last_seq?i(null,0):i(null,e.last_seq)})})},writeCheckpoint=function(t,e,n,i,r){var o={_id:n,last_seq:i};e.put(o,function(){t.put(o,function(){r()})})};Pouch.replicate=function(t,e,n,i){n instanceof Function&&(i=n,n={}),void 0===n&&(n={}),n.complete||(n.complete=i);var r=new Promise;return toPouch(t,function(t,o){return t?PouchUtils.call(i,t):(toPouch(e,function(t,e){return t?PouchUtils.call(i,t):(replicate(o,e,n,r),void 0)}),void 0)}),r};var PouchUtils={};"undefined"!=typeof module&&module.exports?(PouchMerge=require("./pouch.merge.js"),PouchUtils.extend=require("./deps/extend"),PouchUtils.ajax=require("./deps/ajax"),PouchUtils.createBlob=require("./deps/blob"),PouchUtils.uuid=require("./deps/uuid"),PouchUtils.Crypto=require("./deps/md5.js")):(PouchUtils.Crypto=Crypto,PouchUtils.extend=extend,PouchUtils.ajax=ajax,PouchUtils.createBlob=createBlob,PouchUtils.uuid=uuid);var reservedWords=["_id","_rev","_attachments","_deleted","_revisions","_revs_info","_conflicts","_deleted_conflicts","_local_seq","_rev_tree"],isValidId=function(t){return/^_/.test(t)?/^_(design|local)/.test(t):!0},isChromeApp=function(){return"undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage&&"undefined"!=typeof chrome.storage.local};PouchUtils.call=function(t){if(typeof t==typeof Function){var e=Array.prototype.slice.call(arguments,1);t.apply(this,e)}},PouchUtils.isLocalId=function(t){return/^_local/.test(t)},PouchUtils.isDeleted=function(t,e){e||(e=PouchMerge.winningRev(t)),e.indexOf("-")>=0&&(e=e.split("-")[1]);var n=!1;return PouchMerge.traverseRevTree(t.rev_tree,function(t,i,r,o,s){r===e&&(n=!!s.deleted)}),n},PouchUtils.filterChange=function(t){return function(e){var n={},i=t.filter&&"function"==typeof t.filter;if(n.query=t.query_params,t.filter&&i&&!t.filter.call(this,e.doc,n))return!1;if(t.doc_ids&&-1===t.doc_ids.indexOf(e.id))return!1;if(t.include_docs)for(var r in e.doc._attachments)e.doc._attachments[r].stub=!0;else delete e.doc;return!0}},PouchUtils.processChanges=function(t,e,n){e=e.filter(PouchUtils.filterChange(t)),t.limit&&t.limit<e.length&&(e.length=t.limit),e.forEach(function(e){PouchUtils.call(t.onChange,e)}),PouchUtils.call(t.complete,null,{results:e,last_seq:n})},PouchUtils.parseDoc=function(t,e){var n,i,r,o=null,s={status:"available"};if(t._deleted&&(s.deleted=!0),e)if(t._id||(t._id=Pouch.uuid()),i=Pouch.uuid({length:32,radix:16}).toLowerCase(),t._rev){if(r=/^(\d+)-(.+)$/.exec(t._rev),!r)throw"invalid value for property '_rev'";t._rev_tree=[{pos:parseInt(r[1],10),ids:[r[2],{status:"missing"},[[i,s,[]]]]}],n=parseInt(r[1],10)+1}else t._rev_tree=[{pos:1,ids:[i,s,[]]}],n=1;else if(t._revisions&&(t._rev_tree=[{pos:t._revisions.start-t._revisions.ids.length+1,ids:t._revisions.ids.reduce(function(t,e){return null===t?[e,s,[]]:[e,{status:"missing"},[t]]},null)}],n=t._revisions.start,i=t._revisions.ids[0]),!t._rev_tree){if(r=/^(\d+)-(.+)$/.exec(t._rev),!r)return Pouch.Errors.BAD_ARG;n=parseInt(r[1],10),i=r[2],t._rev_tree=[{pos:parseInt(r[1],10),ids:[r[2],s,[]]}]}"string"!=typeof t._id?o=Pouch.Errors.INVALID_ID:isValidId(t._id)||(o=Pouch.Errors.RESERVED_ID);for(var a in t)t.hasOwnProperty(a)&&"_"===a[0]&&-1===reservedWords.indexOf(a)&&(o=PouchUtils.extend({},Pouch.Errors.DOC_VALIDATION),o.reason+=": "+a);return t._id=decodeURIComponent(t._id),t._rev=[n,i].join("-"),o?o:Object.keys(t).reduce(function(e,n){return/^_/.test(n)&&"_attachments"!==n?e.metadata[n.slice(1)]=t[n]:e.data[n]=t[n],e},{metadata:{},data:{}})},PouchUtils.isCordova=function(){return"undefined"!=typeof cordova||"undefined"!=typeof PhoneGap||"undefined"!=typeof phonegap},PouchUtils.Changes=function(){var t={},e={};return isChromeApp()?chrome.storage.onChanged.addListener(function(e){null!=e.db_name&&t.notify(e.db_name.newValue)}):"undefined"!=typeof window&&window.addEventListener("storage",function(e){t.notify(e.key)}),t.addListener=function(t,n,i,r){e[t]||(e[t]={}),e[t][n]={db:i,opts:r}},t.removeListener=function(t,n){delete e[t][n]},t.clearListeners=function(t){delete e[t]},t.notifyLocalWindows=function(t){isChromeApp()?chrome.storage.local.set({db_name:t}):localStorage[t]="a"===localStorage[t]?"b":"a"},t.notify=function(t){e[t]&&Object.keys(e[t]).forEach(function(n){var i=e[t][n].opts;e[t][n].db.changes({include_docs:i.include_docs,conflicts:i.conflicts,continuous:!1,descending:!1,filter:i.filter,since:i.since,query_params:i.query_params,onChange:function(t){t.seq>i.since&&!i.cancelled&&(i.since=t.seq,PouchUtils.call(i.onChange,t))}})})},t},PouchUtils.atob="undefined"!=typeof window&&"atob"in window?function(t){return atob(t)}:function(t){var e=new Buffer(t,"base64");if(e.toString("base64")!==t)throw"Cannot base64 encode full string";return e.toString("binary")},PouchUtils.btoa="undefined"!=typeof window&&"btoa"in window?function(t){return btoa(t)}:function(t){return new Buffer(t,"binary").toString("base64")},"undefined"!=typeof module&&module.exports&&(module.exports=PouchUtils);var PouchAdapter,PouchUtils;"undefined"!=typeof module&&module.exports&&(PouchUtils=require("./pouch.utils.js"));var call=PouchUtils.call;PouchAdapter=function(t,e){var n={},i=Pouch.adapters[t.adapter](t,function(i,r){if(i)return e&&e(i),void 0;for(var o in n)r.hasOwnProperty(o)||(r[o]=n[o]);t.name===Pouch.prefix+Pouch.ALL_DBS?e(i,r):Pouch.open(t,function(t){e(t,r)})}),r=t.auto_compaction===!0,o=function(t){return r?function(e,n){if(e)call(t,e);else{var i=n.length,r=function(){i--,i||call(t,null,n)};n.forEach(function(t){t.ok?s(t.id,1,r):r()})}}:t};n.post=function(t,e,n){return"function"==typeof e&&(n=e,e={}),"object"!=typeof t||Array.isArray(t)?call(n,Pouch.Errors.NOT_AN_OBJECT):i.bulkDocs({docs:[t]},e,o(yankError(n)))},n.put=function(t,e,n){return"function"==typeof e&&(n=e,e={}),"object"!=typeof t?call(n,Pouch.Errors.NOT_AN_OBJECT):"_id"in t?i.bulkDocs({docs:[t]},e,o(yankError(n))):call(n,Pouch.Errors.MISSING_ID)},n.putAttachment=function(t,e,i,r,o,s){function a(t){t._attachments=t._attachments||{},t._attachments[e]={content_type:o,data:r},n.put(t,s)}return n.taskqueue.ready()?("function"==typeof o&&(s=o,o=r,r=i,i=null),"undefined"==typeof o&&(o=r,r=i,i=null),n.get(t,function(e,n){return e&&e.error===Pouch.Errors.MISSING_DOC.error?(a({_id:t}),void 0):e?(call(s,e),void 0):n._rev!==i?(call(s,Pouch.Errors.REV_CONFLICT),void 0):(a(n),void 0)}),void 0):(n.taskqueue.addTask("putAttachment",arguments),void 0)},n.removeAttachment=function(t,e,i,r){n.get(t,function(t,o){return t?(call(r,t),void 0):o._rev!==i?(call(r,Pouch.Errors.REV_CONFLICT),void 0):o._attachments?(delete o._attachments[e],0===Object.keys(o._attachments).length&&delete o._attachments,n.put(o,r),void 0):call(r,null)})},n.remove=function(t,e,n){"function"==typeof e&&(n=e,e={}),void 0===e&&(e={}),e.was_delete=!0;var r={_id:t._id,_rev:t._rev};return r._deleted=!0,i.bulkDocs({docs:[r]},e,yankError(n))},n.revsDiff=function(t,e,n){function r(t,e){l[t]||(l[t]={missing:[]}),l[t].missing.push(e)}function o(e,n){var i=t[e].slice(0);PouchMerge.traverseRevTree(n,function(t,n,o,s,a){var l=n+"-"+o,u=i.indexOf(l);-1!==u&&(i.splice(u,1),"available"!==a.status&&r(e,l))}),i.forEach(function(t){r(e,t)})}"function"==typeof e&&(n=e,e={});var s=Object.keys(t),a=0,l={};s.map(function(e){i._getRevisionTree(e,function(i,r){if(i&&"not_found"===i.error&&"missing"===i.reason)l[e]={missing:t[e]};else{if(i)return call(n,i);o(e,r)}return++a===s.length?call(n,null,l):void 0})})};var s=function(t,e,n){i._getRevisionTree(t,function(r,o){if(r)return call(n);var s=computeHeight(o),a=[],l=[];Object.keys(s).forEach(function(t){s[t]>e&&a.push(t)}),PouchMerge.traverseRevTree(o,function(t,e,n,i,r){var o=e+"-"+n;"available"===r.status&&-1!==a.indexOf(o)&&(r.status="missing",l.push(o))}),i._doCompaction(t,o,l,n)})};n.compact=function(t,e){"function"==typeof t&&(e=t,t={}),n.changes({complete:function(t,n){if(t)return call(e),void 0;var i=n.results.length;return i?(n.results.forEach(function(t){s(t.id,0,function(){i--,i||call(e)})}),void 0):(call(e),void 0)}})},n.get=function(t,e,r){function o(){var i=[],o=s.length;return o?(s.forEach(function(s){n.get(t,{rev:s,revs:e.revs},function(t,e){t?i.push({missing:s}):i.push({ok:e}),o--,o||call(r,null,i)})}),void 0):call(r,null,i)}if(!n.taskqueue.ready())return n.taskqueue.addTask("get",arguments),void 0;"function"==typeof e&&(r=e,e={});var s=[];{if(!e.open_revs)return i._get(t,e,function(t,n){if(t)return call(r,t);var o=n.doc,s=n.metadata,a=n.ctx;if(e.conflicts){var l=PouchMerge.collectConflicts(s);l.length&&(o._conflicts=l)}if(e.revs||e.revs_info){var u=PouchMerge.rootToLeaf(s.rev_tree),c=arrayFirst(u,function(t){return-1!==t.ids.map(function(t){return t.id}).indexOf(o._rev.split("-")[1])});if(c.ids.splice(c.ids.map(function(t){return t.id}).indexOf(o._rev.split("-")[1])+1),c.ids.reverse(),e.revs&&(o._revisions={start:c.pos+c.ids.length-1,ids:c.ids.map(function(t){return t.id})}),e.revs_info){var h=c.pos+c.ids.length;o._revs_info=c.ids.map(function(t){return h--,{rev:h+"-"+t.id,status:t.opts.status}})}}if(e.local_seq&&(o._local_seq=n.metadata.seq),e.attachments&&o._attachments){var p=o._attachments,f=Object.keys(p).length;if(0===f)return call(r,null,o);Object.keys(p).forEach(function(t){i._getAttachment(p[t],{encode:!0,ctx:a},function(e,n){o._attachments[t].data=n,--f||call(r,null,o)})})}else{if(o._attachments)for(var d in o._attachments)o._attachments[d].stub=!0;call(r,null,o)}});if("all"===e.open_revs)i._getRevisionTree(t,function(t,e){t&&(e=[]),s=PouchMerge.collectLeaves(e).map(function(t){return t.rev}),o()});else{if(!Array.isArray(e.open_revs))return call(r,Pouch.error(Pouch.Errors.UNKNOWN_ERROR,"function_clause"));s=e.open_revs;for(var a=0;a<s.length;a++){var l=s[a];if("string"!=typeof l||!/^\d+-/.test(l))return call(r,Pouch.error(Pouch.Errors.BAD_REQUEST,"Invalid rev format"))}o()}}},n.getAttachment=function(t,e,r,o){return n.taskqueue.ready()?(r instanceof Function&&(o=r,r={}),i._get(t,r,function(t,n){return t?call(o,t):n.doc._attachments&&n.doc._attachments[e]?(r.ctx=n.ctx,i._getAttachment(n.doc._attachments[e],r,o),void 0):call(o,Pouch.Errors.MISSING_DOC)}),void 0):(n.taskqueue.addTask("getAttachment",arguments),void 0)},n.allDocs=function(t,e){if(!n.taskqueue.ready())return n.taskqueue.addTask("allDocs",arguments),void 0;if("function"==typeof t&&(e=t,t={}),"keys"in t){if("startkey"in t)return call(e,Pouch.error(Pouch.Errors.QUERY_PARSE_ERROR,"Query parameter `start_key` is not compatible with multi-get")),void 0;if("endkey"in t)return call(e,Pouch.error(Pouch.Errors.QUERY_PARSE_ERROR,"Query parameter `end_key` is not compatible with multi-get")),void 0}return"undefined"==typeof t.skip&&(t.skip=0),i._allDocs(t,e)},n.changes=function(t){return n.taskqueue.ready()?(t=PouchUtils.extend(!0,{},t),t.since||(t.since=0),"latest"===t.since?(n.info(function(e,i){t.since=i.update_seq-1,n.changes(t)}),void 0):("descending"in t||(t.descending=!1),t.limit=0===t.limit?1:t.limit,i._changes(t))):(n.taskqueue.addTask("changes",arguments),void 0)},n.close=function(t){return n.taskqueue.ready()?i._close(t):(n.taskqueue.addTask("close",arguments),void 0)},n.info=function(t){return n.taskqueue.ready()?i._info(t):(n.taskqueue.addTask("info",arguments),void 0)},n.id=function(){return i._id()},n.type=function(){return"function"==typeof i._type?i._type():t.adapter},n.bulkDocs=function(t,e,r){if(!n.taskqueue.ready())return n.taskqueue.addTask("bulkDocs",arguments),void 0;if("function"==typeof e&&(r=e,e={}),e=e?PouchUtils.extend(!0,{},e):{},!t||!t.docs||t.docs.length<1)return call(r,Pouch.Errors.MISSING_BULK_DOCS);if(!Array.isArray(t.docs))return call(r,Pouch.Errors.QUERY_PARSE_ERROR);for(var s=0;s<t.docs.length;++s)if("object"!=typeof t.docs[s]||Array.isArray(t.docs[s]))return call(r,Pouch.Errors.NOT_AN_OBJECT);return t=PouchUtils.extend(!0,{},t),"new_edits"in e||(e.new_edits=!0),i._bulkDocs(t,e,o(r))};var a={};a.ready=!1,a.queue=[],n.taskqueue={},n.taskqueue.execute=function(t){a.ready&&a.queue.forEach(function(e){t[e.task].apply(null,e.parameters)})},n.taskqueue.ready=function(){return 0===arguments.length?a.ready:(a.ready=arguments[0],void 0)},n.taskqueue.addTask=function(t,e){a.queue.push({task:t,parameters:e})},n.replicate={},n.replicate.from=function(t,e,n){return"function"==typeof e&&(n=e,e={}),Pouch.replicate(t,i,e,n)},n.replicate.to=function(t,e,n){return"function"==typeof e&&(n=e,e={}),Pouch.replicate(i,t,e,n)};for(var l in n)i.hasOwnProperty(l)||(i[l]=n[l]);return t.skipSetup&&(n.taskqueue.ready(!0),n.taskqueue.execute(n)),PouchUtils.isCordova()&&cordova.fireWindowEvent(t.name+"_pouch",{}),i},"undefined"!=typeof module&&module.exports&&(module.exports=PouchAdapter);var PouchUtils;"undefined"!=typeof module&&module.exports&&(Pouch=require("../pouch.js"),PouchUtils=require("../pouch.utils.js"));var HTTP_TIMEOUT=1e4;parseUri.options={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},HttpPouch.destroy=function(t,e,n){var i=getHost(t,e);e=e||{},"function"==typeof e&&(n=e,e={}),e.headers=i.headers,e.method="DELETE",e.url=genDBUrl(i,""),PouchUtils.ajax(e,n)},HttpPouch.valid=function(){return!0},Pouch.adapter("http",HttpPouch),Pouch.adapter("https",HttpPouch);var PouchUtils;"undefined"!=typeof module&&module.exports&&(PouchUtils=require("../pouch.utils.js"));var idbError=function(t){return function(e){PouchUtils.call(t,{status:500,error:e.type,reason:e.target})}},IdbPouch=function(opts,callback){function createSchema(t){t.createObjectStore(DOC_STORE,{keyPath:"id"}).createIndex("seq","seq",{unique:!0}),t.createObjectStore(BY_SEQ_STORE,{autoIncrement:!0}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0}),t.createObjectStore(ATTACH_STORE,{keyPath:"digest"}),t.createObjectStore(META_STORE,{keyPath:"id",autoIncrement:!1}),t.createObjectStore(DETECT_BLOB_SUPPORT_STORE)}function fixBinary(t){for(var e=t.length,n=new ArrayBuffer(e),i=new Uint8Array(n),r=0;e>r;r++)i[r]=t.charCodeAt(r);return n}function sortByBulkSeq(t,e){return t._bulk_seq-e._bulk_seq}var POUCH_VERSION=1,DOC_STORE="document-store",BY_SEQ_STORE="by-sequence",ATTACH_STORE="attach-store",META_STORE="meta-store",DETECT_BLOB_SUPPORT_STORE="detect-blob-support",name=opts.name,req=window.indexedDB.open(name,POUCH_VERSION);Pouch.openReqList&&(Pouch.openReqList[name]=req);var blobSupport=null,instanceId=null,api={},idb=null;return Pouch.DEBUG&&console.log(name+": Open Database"),req.onupgradeneeded=function(t){for(var e=t.target.result,n=t.oldVersion;n!==t.newVersion;)0===n&&createSchema(e),n++},req.onsuccess=function(t){idb=t.target.result;var e=idb.transaction([META_STORE,DETECT_BLOB_SUPPORT_STORE],"readwrite");if(idb.onversionchange=function(){idb.close()},idb.setVersion&&Number(idb.version)!==POUCH_VERSION){var n=idb.setVersion(POUCH_VERSION);
return n.onsuccess=function(e){function n(){i.onsuccess(t)}e.target.result.oncomplete=n,i.onupgradeneeded(t)},void 0}var i=e.objectStore(META_STORE).get(META_STORE);i.onsuccess=function(t){var n=t.target.result||{id:META_STORE};name+"_id"in n?instanceId=n[name+"_id"]:(instanceId=Pouch.uuid(),n[name+"_id"]=instanceId,e.objectStore(META_STORE).put(n));try{e.objectStore(DETECT_BLOB_SUPPORT_STORE).put(PouchUtils.createBlob(),"key"),blobSupport=!0}catch(i){blobSupport=!1}finally{PouchUtils.call(callback,null,api)}}},req.onerror=idbError(callback),api.type=function(){return"idb"},api.id=function(){return instanceId},api._bulkDocs=function(t,e,n){function i(t){var e=t.target.result;e.updateSeq=(e.updateSeq||0)+b,v.objectStore(META_STORE).put(e)}function r(){if(!m.length)return v.objectStore(META_STORE).get(META_STORE).onsuccess=i,void 0;var t=m.shift(),e=v.objectStore(DOC_STORE).get(t.metadata.id);e.onsuccess=function(e){var n=e.target.result;n?u(n,t):c(t)}}function o(){var t=[];y.sort(sortByBulkSeq),y.forEach(function(e){if(delete e._bulk_seq,e.error)return t.push(e),void 0;var n=e.metadata,i=PouchMerge.winningRev(n);t.push({ok:!0,id:n.id,rev:i}),PouchUtils.isLocalId(n.id)||(IdbPouch.Changes.notify(name),IdbPouch.Changes.notifyLocalWindows(name))}),PouchUtils.call(n,null,t)}function s(t,e){if(t.stub)return e();if("string"==typeof t.data){var i;try{i=atob(t.data)}catch(r){var o=Pouch.error(Pouch.Errors.BAD_ARG,"Attachments need to be base64 encoded");return PouchUtils.call(n,o)}if(t.digest="md5-"+PouchUtils.Crypto.MD5(i),blobSupport){var s=t.content_type;i=fixBinary(i),t.data=PouchUtils.createBlob([i],{type:s})}return e()}var a=new FileReader;a.onloadend=function(){t.digest="md5-"+PouchUtils.Crypto.MD5(this.result),blobSupport||(t.data=btoa(this.result)),e()},a.readAsBinaryString(t.data)}function a(t){function e(){n++,m.length===n&&t()}if(!m.length)return t();var n=0;m.forEach(function(t){function n(){r++,r===i.length&&e()}var i=t.data&&t.data._attachments?Object.keys(t.data._attachments):[];if(!i.length)return e();var r=0;for(var o in t.data._attachments)s(t.data._attachments[o],n)})}function l(t,e){function n(t){o||(t?(o=t,PouchUtils.call(e,o)):s===a.length&&r())}function i(t){s++,n(t)}function r(){t.data._doc_id_rev=t.data._id+"::"+t.data._rev;var n=v.objectStore(BY_SEQ_STORE).put(t.data);n.onsuccess=function(n){Pouch.DEBUG&&console.log(name+": Wrote Document ",t.metadata.id),t.metadata.seq=n.target.result,delete t.metadata.rev;var i=v.objectStore(DOC_STORE).put(t.metadata);i.onsuccess=function(){y.push(t),PouchUtils.call(e)}}}var o=null,s=0;t.data._id=t.metadata.id,t.data._rev=t.metadata.rev,b++,PouchUtils.isDeleted(t.metadata,t.metadata.rev)&&(t.data._deleted=!0);var a=t.data._attachments?Object.keys(t.data._attachments):[];for(var l in t.data._attachments)if(t.data._attachments[l].stub)s++,n();else{var u=t.data._attachments[l].data;delete t.data._attachments[l].data;var c=t.data._attachments[l].digest;p(t,c,u,i)}a.length||r()}function u(t,e){var n=PouchMerge.merge(t.rev_tree,e.metadata.rev_tree[0],1e3),i=PouchUtils.isDeleted(t),o=i&&PouchUtils.isDeleted(e.metadata)||!i&&f&&"new_leaf"!==n.conflicts;return o?(y.push(h(Pouch.Errors.REV_CONFLICT,e._bulk_seq)),r()):(e.metadata.rev_tree=n.tree,l(e,r),void 0)}function c(t){return"was_delete"in e&&PouchUtils.isDeleted(t.metadata)?(y.push(Pouch.Errors.MISSING_DOC),r()):(l(t,r),void 0)}function h(t,e){return t._bulk_seq=e,t}function p(t,e,n,i){var r=v.objectStore(ATTACH_STORE);r.get(e).onsuccess=function(o){var s=o.target.result&&o.target.result.refs||{},a=[t.metadata.id,t.metadata.rev].join("@"),l={digest:e,body:n,refs:s};l.refs[a]=!0,r.put(l).onsuccess=function(){PouchUtils.call(i)}}}var f=e.new_edits,d=t.docs,m=d.map(function(t,e){var n=PouchUtils.parseDoc(t,f);return n._bulk_seq=e,n}),g=m.filter(function(t){return t.error});if(g.length)return PouchUtils.call(n,g[0]);var v,y=[],b=0;a(function(){v=idb.transaction([DOC_STORE,BY_SEQ_STORE,ATTACH_STORE,META_STORE],"readwrite"),v.onerror=idbError(n),v.ontimeout=idbError(n),v.oncomplete=o,r()})},api._get=function(t,e,n){function i(){PouchUtils.call(n,s,{doc:r,metadata:o,ctx:a})}var r,o,s,a;a=e.ctx?e.ctx:idb.transaction([DOC_STORE,BY_SEQ_STORE,ATTACH_STORE],"readonly"),a.objectStore(DOC_STORE).get(t).onsuccess=function(t){if(o=t.target.result,!o)return s=Pouch.Errors.MISSING_DOC,i();if(PouchUtils.isDeleted(o)&&!e.rev)return s=Pouch.error(Pouch.Errors.MISSING_DOC,"deleted"),i();var n=PouchMerge.winningRev(o),l=o.id+"::"+(e.rev?e.rev:n),u=a.objectStore(BY_SEQ_STORE).index("_doc_id_rev");u.get(l).onsuccess=function(t){return r=t.target.result,r&&r._doc_id_rev&&delete r._doc_id_rev,r?(i(),void 0):(s=Pouch.Errors.MISSING_DOC,i())}}},api._getAttachment=function(t,e,n){var i,r;r=e.ctx?e.ctx:idb.transaction([DOC_STORE,BY_SEQ_STORE,ATTACH_STORE],"readonly");var o=t.digest,s=t.content_type;r.objectStore(ATTACH_STORE).get(o).onsuccess=function(t){var r=t.target.result.body;if(e.encode)if(blobSupport){var o=new FileReader;o.onloadend=function(){i=btoa(this.result),PouchUtils.call(n,null,i)},o.readAsBinaryString(r)}else i=r,PouchUtils.call(n,null,i);else blobSupport?i=r:(r=fixBinary(atob(r)),i=PouchUtils.createBlob([r],{type:s})),PouchUtils.call(n,null,i)}},api._allDocs=function(t,e){var n="startkey"in t?t.startkey:!1,i="endkey"in t?t.endkey:!1,r="descending"in t?t.descending:!1;r=r?"prev":null;var o=n&&i?window.IDBKeyRange.bound(n,i):n?window.IDBKeyRange.lowerBound(n):i?window.IDBKeyRange.upperBound(i):null,s=idb.transaction([DOC_STORE,BY_SEQ_STORE],"readonly");s.oncomplete=function(){"keys"in t&&(t.keys.forEach(function(t){t in c?u.push(c[t]):u.push({key:t,error:"not_found"})}),t.descending&&u.reverse()),PouchUtils.call(e,null,{total_rows:u.length,offset:t.skip,rows:"limit"in t?u.slice(t.skip,t.limit+t.skip):t.skip>0?u.slice(t.skip):u})};var a=s.objectStore(DOC_STORE),l=r?a.openCursor(o,r):a.openCursor(o),u=[],c={};l.onsuccess=function(e){function n(e,n){if(PouchUtils.isLocalId(e.id))return i["continue"]();var r={id:e.id,key:e.id,value:{rev:PouchMerge.winningRev(e)}};if(t.include_docs){r.doc=n,r.doc._rev=PouchMerge.winningRev(e),r.doc._doc_id_rev&&delete r.doc._doc_id_rev,t.conflicts&&(r.doc._conflicts=PouchMerge.collectConflicts(e));for(var o in r.doc._attachments)r.doc._attachments[o].stub=!0}"keys"in t?t.keys.indexOf(e.id)>-1&&(PouchUtils.isDeleted(e)&&(r.value.deleted=!0,r.doc=null),c[r.id]=r):PouchUtils.isDeleted(e)||u.push(r),i["continue"]()}if(e.target.result){var i=e.target.result,r=i.value;if(t.include_docs){var o=s.objectStore(BY_SEQ_STORE).index("_doc_id_rev"),a=PouchMerge.winningRev(r),l=r.id+"::"+a;o.get(l).onsuccess=function(t){n(i.value,t.target.result)}}else n(r)}}},api._info=function(t){function e(t){r=t.target.result&&t.target.result.updateSeq||0}function n(t){var n=t.target.result;return n?(n.value.deleted!==!0&&i++,n["continue"](),void 0):(o.objectStore(META_STORE).get(META_STORE).onsuccess=e,void 0)}var i=0,r=0,o=idb.transaction([DOC_STORE,META_STORE],"readonly");o.oncomplete=function(){t(null,{db_name:name,doc_count:i,update_seq:r})},o.objectStore(DOC_STORE).openCursor().onsuccess=n},api._changes=function idb_changes(opts){function fetchChanges(){txn=idb.transaction([DOC_STORE,BY_SEQ_STORE]),txn.oncomplete=onTxnComplete;var t;t=descending?txn.objectStore(BY_SEQ_STORE).openCursor(window.IDBKeyRange.lowerBound(opts.since,!0),descending):txn.objectStore(BY_SEQ_STORE).openCursor(window.IDBKeyRange.lowerBound(opts.since,!0)),t.onsuccess=onsuccess,t.onerror=onerror}function onsuccess(t){if(!t.target.result){for(var e=0,n=results.length;n>e;e++){var i=results[e];i&&dedupResults.push(i)}return!1}var r=t.target.result,o=r.value._id,s=resultIndices[o];if(void 0!==s)return results[s].seq=r.key,results.push(results[s]),results[s]=null,resultIndices[o]=results.length-1,r["continue"]();var a=txn.objectStore(DOC_STORE);a.get(r.value._id).onsuccess=function(t){var e=t.target.result;if(PouchUtils.isLocalId(e.id))return r["continue"]();last_seq<e.seq&&(last_seq=e.seq);var n=PouchMerge.winningRev(e),i=e.id+"::"+n,o=txn.objectStore(BY_SEQ_STORE).index("_doc_id_rev");o.get(i).onsuccess=function(t){var i=t.target.result;delete i._doc_id_rev;var o=[{rev:n}];"all_docs"===opts.style&&(o=PouchMerge.collectLeaves(e.rev_tree).map(function(t){return{rev:t.rev}}));var s={id:e.id,seq:r.key,changes:o,doc:i};PouchUtils.isDeleted(e,n)&&(s.deleted=!0),opts.conflicts&&(s.doc._conflicts=PouchMerge.collectConflicts(e));var a=s.id,l=resultIndices[a];void 0!==l&&(results[l]=null),results.push(s),resultIndices[a]=results.length-1,r["continue"]()}}}function onTxnComplete(){PouchUtils.processChanges(opts,dedupResults,last_seq)}function onerror(){PouchUtils.call(opts.complete)}if(Pouch.DEBUG&&console.log(name+": Start Changes Feed: continuous="+opts.continuous),opts.continuous){var id=name+":"+Pouch.uuid();return opts.cancelled=!1,IdbPouch.Changes.addListener(name,id,api,opts),IdbPouch.Changes.notify(name),{cancel:function(){Pouch.DEBUG&&console.log(name+": Cancel Changes Feed"),opts.cancelled=!0,IdbPouch.Changes.removeListener(name,id)}}}var descending=opts.descending?"prev":null,last_seq=0;opts.since=opts.since&&!descending?opts.since:0;var results=[],resultIndices={},dedupResults=[],txn;if(opts.filter&&"string"==typeof opts.filter){var filterName=opts.filter.split("/");api.get("_design/"+filterName[0],function(err,ddoc){var filter=eval("(function() { return "+ddoc.filters[filterName[1]]+" })()");opts.filter=filter,fetchChanges()})}else fetchChanges()},api._close=function(t){return null===idb?PouchUtils.call(t,Pouch.Errors.NOT_OPEN):(idb.close(),PouchUtils.call(t,null),void 0)},api._getRevisionTree=function(t,e){var n=idb.transaction([DOC_STORE],"readonly"),i=n.objectStore(DOC_STORE).get(t);i.onsuccess=function(t){var n=t.target.result;n?PouchUtils.call(e,null,n.rev_tree):PouchUtils.call(e,Pouch.Errors.MISSING_DOC)}},api._doCompaction=function(t,e,n,i){var r=idb.transaction([DOC_STORE,BY_SEQ_STORE],"readwrite"),o=r.objectStore(DOC_STORE);o.get(t).onsuccess=function(i){var o=i.target.result;o.rev_tree=e;var s=n.length;n.forEach(function(e){var n=r.objectStore(BY_SEQ_STORE).index("_doc_id_rev"),i=t+"::"+e;n.getKey(i).onsuccess=function(t){var e=t.target.result;e&&(r.objectStore(BY_SEQ_STORE)["delete"](e),s--,s||r.objectStore(DOC_STORE).put(o))}})},r.oncomplete=function(){PouchUtils.call(i)}},api};IdbPouch.valid=function(){return"undefined"!=typeof window&&!!window.indexedDB},IdbPouch.destroy=function(t,e,n){Pouch.DEBUG&&console.log(t+": Delete Database"),IdbPouch.Changes.clearListeners(t),Pouch.openReqList[t]&&Pouch.openReqList[t].result&&Pouch.openReqList[t].result.close();var i=window.indexedDB.deleteDatabase(t);i.onsuccess=function(){Pouch.openReqList[t]&&(Pouch.openReqList[t]=null),PouchUtils.call(n,null)},i.onerror=idbError(n)},IdbPouch.Changes=new PouchUtils.Changes,Pouch.adapter("idb",IdbPouch);var PouchUtils;"undefined"!=typeof module&&module.exports&&(PouchUtils=require("../pouch.utils.js"));var POUCH_VERSION=1,POUCH_SIZE=5242880,DOC_STORE=quote("document-store"),BY_SEQ_STORE=quote("by-sequence"),ATTACH_STORE=quote("attach-store"),META_STORE=quote("metadata-store"),unknownError=function(t){return function(e){PouchUtils.call(t,{status:500,error:e.type,reason:e.target})}},webSqlPouch=function(opts,callback){function dbCreated(){callback(null,api)}function setup(){db.transaction(function(t){var e="CREATE TABLE IF NOT EXISTS "+META_STORE+" (update_seq, dbid)",n="CREATE TABLE IF NOT EXISTS "+ATTACH_STORE+" (digest, json, body BLOB)",i="CREATE TABLE IF NOT EXISTS "+DOC_STORE+" (id unique, seq, json, winningseq)",r="CREATE TABLE IF NOT EXISTS "+BY_SEQ_STORE+" (seq INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, doc_id_rev UNIQUE, json)";t.executeSql(n),t.executeSql(i),t.executeSql(r),t.executeSql(e);var o="SELECT update_seq FROM "+META_STORE;t.executeSql(o,[],function(t,e){if(!e.rows.length){var n="INSERT INTO "+META_STORE+" (update_seq) VALUES (?)";return t.executeSql(n,[0]),void 0}});var s="SELECT dbid FROM "+META_STORE+" WHERE dbid IS NOT NULL";t.executeSql(s,[],function(t,e){if(!e.rows.length){var n="UPDATE "+META_STORE+" SET dbid=?";return instanceId=Pouch.uuid(),t.executeSql(n,[instanceId]),void 0}instanceId=e.rows.item(0).dbid})},unknownError(callback),dbCreated)}function makeRevs(t){return t.map(function(t){return{rev:t.rev}})}var api={},instanceId=null,name=opts.name,db=openDatabase(name,POUCH_VERSION,name,POUCH_SIZE);return db?(PouchUtils.isCordova()&&"undefined"!=typeof window?window.addEventListener(name+"_pouch",function t(){window.removeEventListener(name+"_pouch",t,!1),setup()},!1):setup(),api.type=function(){return"websql"},api.id=function(){return instanceId},api._info=function(t){db.transaction(function(e){var n="SELECT COUNT(id) AS count FROM "+DOC_STORE;e.executeSql(n,[],function(e,n){var i=n.rows.item(0).count,r="SELECT update_seq FROM "+META_STORE;e.executeSql(r,[],function(e,n){var r=n.rows.item(0).update_seq;t(null,{db_name:name,doc_count:i,update_seq:r})})})})},api._bulkDocs=function(t,e,n){function i(t,e){return t._bulk_seq-e._bulk_seq}function r(){var t=[];w.sort(i),w.forEach(function(e){if(delete e._bulk_seq,e.error)return t.push(e),void 0;var n=e.metadata,i=PouchMerge.winningRev(n);t.push({ok:!0,id:n.id,rev:i}),PouchUtils.isLocalId(n.id)||(g++,webSqlPouch.Changes.notify(name),webSqlPouch.Changes.notifyLocalWindows(name))});var e="SELECT update_seq FROM "+META_STORE;b.executeSql(e,[],function(e,i){var r=i.rows.item(0).update_seq+g,o="UPDATE "+META_STORE+" SET update_seq=?";e.executeSql(o,[r],function(){PouchUtils.call(n,null,t)})})}function o(t,e){if(t.stub)return e();if("string"==typeof t.data){try{t.data=atob(t.data)}catch(i){var r=Pouch.error(Pouch.Errors.BAD_ARG,"Attachments need to be base64 encoded");return PouchUtils.call(n,r)}return t.digest="md5-"+PouchUtils.Crypto.MD5(t.data),e()}var o=new FileReader;o.onloadend=function(){t.data=this.result,t.digest="md5-"+PouchUtils.Crypto.MD5(this.result),e()},o.readAsBinaryString(t.data)}function s(t){function e(){n++,v.length===n&&t()}if(!v.length)return t();var n=0,i=0;v.forEach(function(t){function n(){i++,i===r.length&&e()}var r=t.data&&t.data._attachments?Object.keys(t.data._attachments):[];if(!r.length)return e();for(var s in t.data._attachments)o(t.data._attachments[s],n)})}function a(t,e,n){function i(){var e=t.data,n="INSERT INTO "+BY_SEQ_STORE+" (doc_id_rev, json) VALUES (?, ?);";b.executeSql(n,[e._id+"::"+e._rev,JSON.stringify(e)],s)}function r(t){a||(t?(a=t,PouchUtils.call(e,a)):l===u.length&&i())}function o(t){l++,r(t)}function s(i,r){var o=t.metadata.seq=r.insertId;delete t.metadata.rev;var s=PouchMerge.winningRev(t.metadata),a=n?"UPDATE "+DOC_STORE+" SET seq=?, json=?, winningseq=(SELECT seq FROM "+BY_SEQ_STORE+" WHERE doc_id_rev=?) WHERE id=?":"INSERT INTO "+DOC_STORE+" (id, seq, winningseq, json) VALUES (?, ?, ?, ?);",l=JSON.stringify(t.metadata),u=t.metadata.id+"::"+s,c=n?[o,l,u,t.metadata.id]:[t.metadata.id,o,o,l];i.executeSql(a,c,function(){w.push(t),PouchUtils.call(e,null)})}var a=null,l=0;t.data._id=t.metadata.id,t.data._rev=t.metadata.rev,PouchUtils.isDeleted(t.metadata,t.metadata.rev)&&(t.data._deleted=!0);var u=t.data._attachments?Object.keys(t.data._attachments):[];for(var c in t.data._attachments)if(t.data._attachments[c].stub)l++,r();else{var h=t.data._attachments[c].data;delete t.data._attachments[c].data;var f=t.data._attachments[c].digest;p(t,f,h,o)}u.length||i()}function l(t,e){var n=PouchMerge.merge(t.rev_tree,e.metadata.rev_tree[0],1e3),i=PouchUtils.isDeleted(t)&&PouchUtils.isDeleted(e.metadata)||!PouchUtils.isDeleted(t)&&d&&"new_leaf"!==n.conflicts;return i?(w.push(h(Pouch.Errors.REV_CONFLICT,e._bulk_seq)),c()):(e.metadata.rev_tree=n.tree,a(e,c,!0),void 0)}function u(t){return"was_delete"in e&&PouchUtils.isDeleted(t.metadata)?(w.push(Pouch.Errors.MISSING_DOC),c()):(a(t,c,!1),void 0)}function c(){if(!v.length)return r();var t=v.shift(),e=t.metadata.id;e in _?l(_[e],t):(_[e]=t.metadata,u(t))}function h(t,e){return t._bulk_seq=e,t}function p(t,e,n,i){var r=[t.metadata.id,t.metadata.rev].join("@"),o={digest:e},s="SELECT digest, json FROM "+ATTACH_STORE+" WHERE digest=?";b.executeSql(s,[e],function(t,a){a.rows.length?(o.refs=JSON.parse(a.rows.item(0).json).refs,s="UPDATE "+ATTACH_STORE+" SET json=?, body=? WHERE digest=?",t.executeSql(s,[JSON.stringify(o),n,e],function(){PouchUtils.call(i,null)})):(o.refs={},o.refs[r]=!0,s="INSERT INTO "+ATTACH_STORE+"(digest, json, body) VALUES (?, ?, ?)",t.executeSql(s,[e,JSON.stringify(o),n],function(){PouchUtils.call(i,null)}))})}function f(t,e){for(var n=0;n<e.rows.length;n++){var i=e.rows.item(n);_[i.id]=JSON.parse(i.json)}c()}var d=e.new_edits,m=t.docs,g=0,v=m.map(function(t,e){var n=PouchUtils.parseDoc(t,d);return n._bulk_seq=e,n}),y=v.filter(function(t){return t.error});if(y.length)return PouchUtils.call(n,y[0]);var b,w=[],_={};s(function(){db.transaction(function(t){b=t;var e="("+v.map(function(t){return quote(t.metadata.id)}).join(",")+")",n="SELECT * FROM "+DOC_STORE+" WHERE id IN "+e;b.executeSql(n,[],f)},unknownError(n))})},api._get=function(t,e,n){function i(){PouchUtils.call(n,s,{doc:r,metadata:o,ctx:a})}var r,o,s;if(!e.ctx)return db.transaction(function(i){e.ctx=i,api._get(t,e,n)}),void 0;var a=e.ctx,l="SELECT * FROM "+DOC_STORE+" WHERE id=?";a.executeSql(l,[t],function(t,n){if(!n.rows.length)return s=Pouch.Errors.MISSING_DOC,i();if(o=JSON.parse(n.rows.item(0).json),PouchUtils.isDeleted(o)&&!e.rev)return s=Pouch.error(Pouch.Errors.MISSING_DOC,"deleted"),i();var l=PouchMerge.winningRev(o),u=e.rev?e.rev:l;u=o.id+"::"+u;var c="SELECT * FROM "+BY_SEQ_STORE+" WHERE doc_id_rev=?";a.executeSql(c,[u],function(t,e){return e.rows.length?(r=JSON.parse(e.rows.item(0).json),i(),void 0):(s=Pouch.Errors.MISSING_DOC,i())})})},api._allDocs=function(t,e){var n=[],i={},r="startkey"in t?t.startkey:!1,o="endkey"in t?t.endkey:!1,s="descending"in t?t.descending:!1,a="SELECT "+DOC_STORE+".id, "+BY_SEQ_STORE+".seq, "+BY_SEQ_STORE+".json AS data, "+DOC_STORE+".json AS metadata FROM "+BY_SEQ_STORE+" JOIN "+DOC_STORE+" ON "+BY_SEQ_STORE+".seq = "+DOC_STORE+".winningseq";"keys"in t?a+=" WHERE "+DOC_STORE+".id IN ("+t.keys.map(function(t){return quote(t)}).join(",")+")":(r&&(a+=" WHERE "+DOC_STORE+'.id >= "'+r+'"'),o&&(a+=(r?" AND ":" WHERE ")+DOC_STORE+'.id <= "'+o+'"'),a+=" ORDER BY "+DOC_STORE+".id "+(s?"DESC":"ASC")),db.transaction(function(e){e.executeSql(a,[],function(e,r){for(var o=0,s=r.rows.length;s>o;o++){var a=r.rows.item(o),l=JSON.parse(a.metadata),u=JSON.parse(a.data);if(!PouchUtils.isLocalId(l.id)){if(a={id:l.id,key:l.id,value:{rev:PouchMerge.winningRev(l)}},t.include_docs){a.doc=u,a.doc._rev=PouchMerge.winningRev(l),t.conflicts&&(a.doc._conflicts=PouchMerge.collectConflicts(l));for(var c in a.doc._attachments)a.doc._attachments[c].stub=!0}"keys"in t?t.keys.indexOf(l.id)>-1&&(PouchUtils.isDeleted(l)&&(a.value.deleted=!0,a.doc=null),i[a.id]=a):PouchUtils.isDeleted(l)||n.push(a)}}})},unknownError(e),function(){"keys"in t&&(t.keys.forEach(function(t){t in i?n.push(i[t]):n.push({key:t,error:"not_found"})}),t.descending&&n.reverse()),PouchUtils.call(e,null,{total_rows:n.length,offset:t.skip,rows:"limit"in t?n.slice(t.skip,t.limit+t.skip):t.skip>0?n.slice(t.skip):n})})},api._changes=function idb_changes(opts){function fetchChanges(){var t="SELECT "+DOC_STORE+".id, "+BY_SEQ_STORE+".seq, "+BY_SEQ_STORE+".json AS data, "+DOC_STORE+".json AS metadata FROM "+BY_SEQ_STORE+" JOIN "+DOC_STORE+" ON "+BY_SEQ_STORE+".seq = "+DOC_STORE+".winningseq WHERE "+DOC_STORE+".seq > "+opts.since+" ORDER BY "+DOC_STORE+".seq "+(descending?"DESC":"ASC");db.transaction(function(e){e.executeSql(t,[],function(t,e){for(var n=0,i=0,r=e.rows.length;r>i;i++){var o=e.rows.item(i),s=JSON.parse(o.metadata);if(!PouchUtils.isLocalId(s.id)){n<o.seq&&(n=o.seq);var a=JSON.parse(o.data),l=a._rev,u=[{rev:l}];"all_docs"===opts.style&&(u=makeRevs(PouchMerge.collectLeaves(s.rev_tree)));var c={id:s.id,seq:o.seq,changes:u,doc:a};PouchUtils.isDeleted(s,l)&&(c.deleted=!0),opts.conflicts&&(c.doc._conflicts=PouchMerge.collectConflicts(s)),results.push(c)}}PouchUtils.processChanges(opts,results,n)})})}if(Pouch.DEBUG&&console.log(name+": Start Changes Feed: continuous="+opts.continuous),opts.continuous){var id=name+":"+Pouch.uuid();return opts.cancelled=!1,webSqlPouch.Changes.addListener(name,id,api,opts),webSqlPouch.Changes.notify(name),{cancel:function(){Pouch.DEBUG&&console.log(name+": Cancel Changes Feed"),opts.cancelled=!0,webSqlPouch.Changes.removeListener(name,id)}}}var descending=opts.descending;opts.since=opts.since&&!descending?opts.since:0;var results=[],txn;if(opts.filter&&"string"==typeof opts.filter){var filterName=opts.filter.split("/");api.get("_design/"+filterName[0],function(err,ddoc){var filter=eval("(function() { return "+ddoc.filters[filterName[1]]+" })()");opts.filter=filter,fetchChanges()})}else fetchChanges()},api._close=function(t){PouchUtils.call(t,null)},api._getAttachment=function(t,e,n){var i,r=e.ctx,o=t.digest,s=t.content_type,a="SELECT body FROM "+ATTACH_STORE+" WHERE digest=?";r.executeSql(a,[o],function(t,r){var o=r.rows.item(0).body;i=e.encode?btoa(o):PouchUtils.createBlob([o],{type:s}),PouchUtils.call(n,null,i)})},api._getRevisionTree=function(t,e){db.transaction(function(n){var i="SELECT json AS metadata FROM "+DOC_STORE+" WHERE id = ?";n.executeSql(i,[t],function(t,n){if(n.rows.length){var i=JSON.parse(n.rows.item(0).metadata);PouchUtils.call(e,null,i.rev_tree)}else PouchUtils.call(e,Pouch.Errors.MISSING_DOC)})})},api._doCompaction=function(t,e,n,i){db.transaction(function(r){var o="SELECT json AS metadata FROM "+DOC_STORE+" WHERE id = ?";r.executeSql(o,[t],function(r,o){if(!o.rows.length)return PouchUtils.call(i);var s=JSON.parse(o.rows.item(0).metadata);s.rev_tree=e;var a="DELETE FROM "+BY_SEQ_STORE+" WHERE doc_id_rev IN ("+n.map(function(e){return quote(t+"::"+e)}).join(",")+")";r.executeSql(a,[],function(e){var n="UPDATE "+DOC_STORE+" SET json = ? WHERE id = ?";e.executeSql(n,[JSON.stringify(s),t],function(){i()})})})})},api):PouchUtils.call(callback,Pouch.Errors.UNKNOWN_ERROR)};webSqlPouch.valid=function(){return"undefined"!=typeof window&&!!window.openDatabase},webSqlPouch.destroy=function(t,e,n){var i=openDatabase(t,POUCH_VERSION,t,POUCH_SIZE);i.transaction(function(t){t.executeSql("DROP TABLE IF EXISTS "+DOC_STORE,[]),t.executeSql("DROP TABLE IF EXISTS "+BY_SEQ_STORE,[]),t.executeSql("DROP TABLE IF EXISTS "+ATTACH_STORE,[]),t.executeSql("DROP TABLE IF EXISTS "+META_STORE,[])},unknownError(n),function(){PouchUtils.call(n,null)})},webSqlPouch.Changes=new PouchUtils.Changes,Pouch.adapter("websql",webSqlPouch);var pouchCollate;"undefined"!=typeof module&&module.exports&&(pouchCollate=require("../pouch.collate.js"));var MapReduce=function(db){function viewQuery(fun,options){function sum(t){return t.reduce(function(t,e){return t+e},0)}if(options.complete){options.skip||(options.skip=0),fun.reduce||(options.reduce=!1);var builtInReduce={_sum:function(t,e){return sum(e)},_count:function(t,e,n){return n?sum(e):e.length},_stats:function(t,e){return{sum:sum(e),min:Math.min.apply(null,e),max:Math.max.apply(null,e),count:e.length,sumsqr:function(){var t=0;for(var n in e)"number"==typeof e[n]&&(t+=e[n]*e[n]);return t}()}}},results=[],current=null,num_started=0,completed=!1,emit=function(t,e){var n={id:current.doc._id,key:t,value:e};if(!(options.startkey&&pouchCollate(t,options.startkey)<0||options.endkey&&pouchCollate(t,options.endkey)>0||options.key&&0!==pouchCollate(t,options.key))){if(num_started++,options.include_docs){if(e&&"object"==typeof e&&e._id)return db.get(e._id,function(t,e){e&&(n.doc=e),results.push(n),checkComplete()}),void 0;n.doc=current.doc}results.push(n)}};eval("fun.map = "+fun.map.toString()+";"),fun.reduce&&(builtInReduce[fun.reduce]&&(fun.reduce=builtInReduce[fun.reduce]),eval("fun.reduce = "+fun.reduce.toString()+";"));var checkComplete=function(){if(completed&&results.length==num_started){if(results.sort(function(t,e){return pouchCollate(t.key,e.key)}),options.descending&&results.reverse(),options.reduce===!1)return options.complete(null,{total_rows:results.length,offset:options.skip,rows:"limit"in options?results.slice(options.skip,options.limit+options.skip):options.skip>0?results.slice(options.skip):results});var t=[];results.forEach(function(e){var n=t[t.length-1]||null;return n&&0===pouchCollate(n.key[0][0],e.key)?(n.key.push([e.key,e.id]),n.value.push(e.value),void 0):(t.push({key:[[e.key,e.id]],value:[e.value]}),void 0)}),t.forEach(function(t){t.value=fun.reduce(t.key,t.value),t.value="undefined"==typeof t.value?null:t.value,t.key=t.key[0][0]}),options.complete(null,{total_rows:t.length,offset:options.skip,rows:"limit"in options?t.slice(options.skip,options.limit+options.skip):options.skip>0?t.slice(options.skip):t})}};db.changes({conflicts:!0,include_docs:!0,onChange:function(t){"deleted"in t||(current={doc:t.doc},fun.map.call(this,t.doc))},complete:function(){completed=!0,checkComplete()}})}}function httpQuery(t,e,n){var i=[],r=void 0,o="GET";if("undefined"!=typeof e.reduce&&i.push("reduce="+e.reduce),"undefined"!=typeof e.include_docs&&i.push("include_docs="+e.include_docs),"undefined"!=typeof e.limit&&i.push("limit="+e.limit),"undefined"!=typeof e.descending&&i.push("descending="+e.descending),"undefined"!=typeof e.startkey&&i.push("startkey="+encodeURIComponent(JSON.stringify(e.startkey))),"undefined"!=typeof e.endkey&&i.push("endkey="+encodeURIComponent(JSON.stringify(e.endkey))),"undefined"!=typeof e.key&&i.push("key="+encodeURIComponent(JSON.stringify(e.key))),"undefined"!=typeof e.group&&i.push("group="+e.group),"undefined"!=typeof e.group_level&&i.push("group_level="+e.group_level),"undefined"!=typeof e.skip&&i.push("skip="+e.skip),"undefined"!=typeof e.keys&&(o="POST",r=JSON.stringify({keys:e.keys})),i=i.join("&"),i=""===i?"":"?"+i,"string"==typeof t){var s=t.split("/");return db.request({method:o,url:"_design/"+s[0]+"/_view/"+s[1]+i,body:r},n),void 0}var a=JSON.parse(JSON.stringify(t,function(t,e){return"function"==typeof e?e+"":e}));db.request({method:"POST",url:"_temp_view"+i,body:a},n)}function query(t,e,n){if("function"==typeof e&&(n=e,e={}),n&&(e.complete=n),"http"===db.type())return"function"==typeof t?httpQuery({map:t},e,n):httpQuery(t,e,n);if("object"==typeof t)return viewQuery(t,e);if("function"==typeof t)return viewQuery({map:t},e);var i=t.split("/");db.get("_design/"+i[0],function(t,r){return t?(n&&n(t),void 0):r.views[i[1]]?(viewQuery({map:r.views[i[1]].map,reduce:r.views[i[1]].reduce},e),void 0):(n&&n({error:"not_found",reason:"missing_named_view"}),void 0)})}return{query:query}};MapReduce._delete=function(){},Pouch.plugin("mapreduce",MapReduce)}(this),function(t,e,n){function i(n,o){if(!e[n]){if(!t[n]){var s="function"==typeof require&&require;if(!o&&s)return s(n,!0);if(r)return r(n,!0);throw new Error("Cannot find module '"+n+"'")}var a=e[n]={exports:{}};t[n][0].call(a.exports,function(e){var r=t[n][1][e];return i(r?r:e)},a,a.exports)}return e[n].exports}for(var r="function"==typeof require&&require,o=0;o<n.length;o++)i(n[o]);return i}({1:[function(t,e){css=t("css"),e.exports=css},{css:2}],2:[function(t,e,n){n.parse=t("css-parse"),n.stringify=t("css-stringify")},{"css-parse":3,"css-stringify":4}],3:[function(t,e){e.exports=function(t){function e(){return{stylesheet:{rules:r()}}}function n(){return o(/^{\s*/)}function i(){return o(/^}\s*/)}function r(){var e,n=[];for(s(),a(n);"}"!=t[0]&&(e=x()||S());)n.push(e),a(n);return n}function o(e){var n=e.exec(t);if(n)return t=t.slice(n[0].length),n}function s(){o(/^\s*/)}function a(t){t=t||[];for(var e;e=l();)t.push(e);return t}function l(){if("/"==t[0]&&"*"==t[1]){for(var e=2;"*"!=t[e]||"/"!=t[e+1];)++e;e+=2;var n=t.slice(2,e-2);return t=t.slice(e),s(),{comment:n}}}function u(){var t=o(/^([^{]+)/);if(t)return t[0].trim().split(/\s*,\s*/)}function c(){var t=o(/^(\*?[-\w]+)\s*/);if(t&&(t=t[0],o(/^:\s*/))){var e=o(/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^\)]*?\)|[^};])+)\s*/);if(e)return e=e[0].trim(),o(/^[;\s]*/),{property:t,value:e}}}function h(){for(var t,e=[];t=o(/^(from|to|\d+%|\.\d+%|\d+\.\d+%)\s*/);)e.push(t[1]),o(/^,\s*/);return e.length?{values:e,declarations:_()}:void 0}function p(){var t=o(/^@([-\w]+)?keyframes */);if(t){var e=t[1],t=o(/^([-\w]+)\s*/);if(t){var r=t[1];if(n()){a();for(var s,l=[];s=h();)l.push(s),a();if(i())return{name:r,vendor:e,keyframes:l}}}}}function f(){var t=o(/^@supports *([^{]+)/);if(t){var e=t[1].trim();if(n()){a();var s=r();if(i())return{supports:e,rules:s}}}}function d(){var t=o(/^@media *([^{]+)/);if(t){var e=t[1].trim();if(n()){a();var s=r();if(i())return{media:e,rules:s}}}}function m(){var t=o(/^@page */);if(t){var e=u()||[],r=[];if(n()){a();for(var s;s=c()||g();)r.push(s),a();if(i())return{type:"page",selectors:e,declarations:r}}}}function g(){var t=o(/^@([a-z\-]+) */);if(t){var e=t[1];return{type:e,declarations:_()}}}function v(){return w("import")}function y(){return w("charset")}function b(){return w("namespace")}function w(t){var e=o(new RegExp("^@"+t+" *([^;\\n]+);\\s*"));if(e){var n={};return n[t]=e[1].trim(),n}}function _(){var t=[];if(n()){a();for(var e;e=c();)t.push(e),a();if(i())return t}}function x(){return p()||d()||f()||v()||y()||b()||m()}function S(){var t=u();if(t)return a(),{selectors:t,declarations:_()}}return e()}},{}],4:[function(t,e){function n(t){t=t||{},this.compress=t.compress,this.indentation=t.indent}e.exports=function(t,e){return new n(e).compile(t)},n.prototype.compile=function(t){return t.stylesheet.rules.map(this.visit,this).join(this.compress?"":"\n\n")},n.prototype.visit=function(t){return t.comment?this.comment(t):t.charset?this.charset(t):t.keyframes?this.keyframes(t):t.media?this.media(t):t.import?this.import(t):this.rule(t)},n.prototype.comment=function(t){return this.compress?"":"/*"+t.comment+"*/"},n.prototype.import=function(t){return"@import "+t.import+";"},n.prototype.media=function(t){return this.compress?"@media "+t.media+"{"+t.rules.map(this.visit,this).join("")+"}":"@media "+t.media+" {\n"+this.indent(1)+t.rules.map(this.visit,this).join("\n\n")+this.indent(-1)+"\n}"},n.prototype.charset=function(t){return this.compress?"@charset "+t.charset+";":"@charset "+t.charset+";\n"},n.prototype.keyframes=function(t){return this.compress?"@"+(t.vendor||"")+"keyframes "+t.name+"{"+t.keyframes.map(this.keyframe,this).join("")+"}":"@"+(t.vendor||"")+"keyframes "+t.name+" {\n"+this.indent(1)+t.keyframes.map(this.keyframe,this).join("\n")+this.indent(-1)+"}"},n.prototype.keyframe=function(t){return this.compress?t.values.join(",")+"{"+t.declarations.map(this.declaration,this).join(";")+"}":this.indent()+t.values.join(", ")+" {\n"+this.indent(1)+t.declarations.map(this.declaration,this).join(";\n")+this.indent(-1)+"\n"+this.indent()+"}\n"},n.prototype.rule=function(t){var e=this.indent();return this.compress?t.selectors.join(",")+"{"+t.declarations.map(this.declaration,this).join(";")+"}":t.selectors.map(function(t){return e+t}).join(",\n")+" {\n"+this.indent(1)+t.declarations.map(this.declaration,this).join(";\n")+this.indent(-1)+"\n"+this.indent()+"}"},n.prototype.declaration=function(t){return this.compress?t.property+":"+t.value:this.indent()+t.property+": "+t.value},n.prototype.indent=function(t){return this.level=this.level||1,null!=t?(this.level+=t,""):Array(this.level).join(this.indentation||"  ")}},{}]},{},[1]),function(){function t(t,e){try{for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1})}catch(i){t.prototype=e}}function e(t){for(var e=-1,n=t.length,i=[];++e<n;)i.push(t[e]);return i}function n(t){return Array.prototype.slice.call(t)}function i(){}function r(){return this}function o(t,e,n){return function(){var i=n.apply(e,arguments);return arguments.length?t:i}}function s(t){return null!=t&&!isNaN(t)}function a(t){return t.length}function l(t){return null==t}function u(t){return t.replace(/(^\s+)|(\s+$)/g,"").replace(/\s+/g," ")}function c(t){for(var e=1;t*e%1;)e*=10;return e}function h(){}function p(t){function e(){for(var e,i=n,r=-1,o=i.length;++r<o;)(e=i[r].on)&&e.apply(this,arguments);return t}var n=[],r=new i;return e.on=function(e,i){var o,s=r.get(e);return arguments.length<2?s&&s.on:(s&&(s.on=null,n=n.slice(0,o=n.indexOf(s)).concat(n.slice(o+1)),r.remove(e)),i&&n.push(r.set(e,{on:i})),t)},e}function f(t,e){return e-(t?1+Math.floor(Math.log(t+Math.pow(10,1+Math.floor(Math.log(t)/Math.LN10)-e))/Math.LN10):1)}function m(t){return t+""}function g(t){for(var e=t.lastIndexOf("."),n=e>=0?t.substring(e):(e=t.length,""),i=[];e>0;)i.push(t.substring(e-=3,e+3));return i.reverse().join(",")+n}function v(t,e){return{scale:Math.pow(10,3*(8-e)),symbol:t}}function y(t){return function(e){return 0>=e?0:e>=1?1:t(e)}}function b(t){return function(e){return 1-t(1-e)}}function w(t){return function(e){return.5*(.5>e?t(2*e):2-t(2-2*e))
}}function _(t){return t}function x(t){return function(e){return Math.pow(e,t)}}function S(t){return 1-Math.cos(t*Math.PI/2)}function k(t){return Math.pow(2,10*(t-1))}function C(t){return 1-Math.sqrt(1-t*t)}function E(t,e){var n;return arguments.length<2&&(e=.45),arguments.length<1?(t=1,n=e/4):n=e/(2*Math.PI)*Math.asin(1/t),function(i){return 1+t*Math.pow(2,10*-i)*Math.sin(2*(i-n)*Math.PI/e)}}function T(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}}function M(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function P(){d3.event.stopPropagation(),d3.event.preventDefault()}function A(){for(var t,e=d3.event;t=e.sourceEvent;)e=t;return e}function O(t){for(var e=new h,n=0,i=arguments.length;++n<i;)e[arguments[n]]=p(e);return e.of=function(n,i){return function(r){try{var o=r.sourceEvent=d3.event;r.target=t,d3.event=r,e[r.type].apply(n,i)}finally{d3.event=o}}},e}function N(t){return"transform"==t?d3.interpolateTransform:d3.interpolate}function D(t,e){return e=e-(t=+t)?1/(e-t):0,function(n){return(n-t)*e}}function I(t,e){return e=e-(t=+t)?1/(e-t):0,function(n){return Math.max(0,Math.min(1,(n-t)*e))}}function L(t,e,n){return new $(t,e,n)}function $(t,e,n){this.r=t,this.g=e,this.b=n}function z(t){return 16>t?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function R(t,e,n){var i,r,o,s=0,a=0,l=0;if(i=/([a-z]+)\((.*)\)/i.exec(t))switch(r=i[2].split(","),i[1]){case"hsl":return n(parseFloat(r[0]),parseFloat(r[1])/100,parseFloat(r[2])/100);case"rgb":return e(F(r[0]),F(r[1]),F(r[2]))}return(o=Fr.get(t))?e(o.r,o.g,o.b):(null!=t&&"#"===t.charAt(0)&&(4===t.length?(s=t.charAt(1),s+=s,a=t.charAt(2),a+=a,l=t.charAt(3),l+=l):7===t.length&&(s=t.substring(1,3),a=t.substring(3,5),l=t.substring(5,7)),s=parseInt(s,16),a=parseInt(a,16),l=parseInt(l,16)),e(s,a,l))}function B(t,e,n){var i,r,o=Math.min(t/=255,e/=255,n/=255),s=Math.max(t,e,n),a=s-o,l=(s+o)/2;return a?(r=.5>l?a/(s+o):a/(2-s-o),i=t==s?(e-n)/a+(n>e?6:0):e==s?(n-t)/a+2:(t-e)/a+4,i*=60):r=i=0,V(i,r,l)}function F(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}function V(t,e,n){return new j(t,e,n)}function j(t,e,n){this.h=t,this.s=e,this.l=n}function U(t,e,n){function i(t){return t>360?t-=360:0>t&&(t+=360),60>t?o+(s-o)*t/60:180>t?s:240>t?o+(s-o)*(240-t)/60:o}function r(t){return Math.round(255*i(t))}var o,s;return t%=360,0>t&&(t+=360),e=0>e?0:e>1?1:e,n=0>n?0:n>1?1:n,s=.5>=n?n*(1+e):n+e-n*e,o=2*n-s,L(r(t+120),r(t),r(t-120))}function H(t){return Cr(t,Wr),t}function q(t){return function(){return Vr(t,this)}}function W(t){return function(){return jr(t,this)}}function J(t,e){function n(){if(e=this.classList)return e.add(t);var e=this.className,n=null!=e.baseVal,i=n?e.baseVal:e;o.lastIndex=0,o.test(i)||(i=u(i+" "+t),n?e.baseVal=i:this.className=i)}function i(){if(e=this.classList)return e.remove(t);var e=this.className,n=null!=e.baseVal,i=n?e.baseVal:e;i=u(i.replace(o," ")),n?e.baseVal=i:this.className=i}function r(){(e.apply(this,arguments)?n:i).call(this)}var o=new RegExp("(^|\\s+)"+d3.requote(t)+"(\\s+|$)","g");if(arguments.length<2){var s=this.node();if(a=s.classList)return a.contains(t);var a=s.className;return o.lastIndex=0,o.test(null!=a.baseVal?a.baseVal:a)}return this.each("function"==typeof e?r:e?n:i)}function Y(t){return{__data__:t}}function K(t){return function(){return qr(this,t)}}function G(t){return arguments.length||(t=d3.ascending),function(e,n){return t(e&&e.__data__,n&&n.__data__)}}function X(t){return Cr(t,Kr),t}function Q(t,e,n){Cr(t,Xr);var r=new i,o=d3.dispatch("start","end"),s=to;return t.id=e,t.time=n,t.tween=function(e,n){return arguments.length<2?r.get(e):(null==n?r.remove(e):r.set(e,n),t)},t.ease=function(e){return arguments.length?(s="function"==typeof e?e:d3.ease.apply(d3,arguments),t):s},t.each=function(e,n){return arguments.length<2?ee.call(t,e):(o.on(e,n),t)},d3.timer(function(i){return t.each(function(a,l,u){function c(t){return v.active>e?p():(v.active=e,r.forEach(function(t,e){(tween=e.call(d,a,l))&&f.push(tween)}),o.start.call(d,a,l),h(t)||d3.timer(h,0,n),1)}function h(t){if(v.active!==e)return p();for(var n=(t-m)/g,i=s(n),r=f.length;r>0;)f[--r].call(d,i);return n>=1?(p(),Zr=e,o.end.call(d,a,l),Zr=0,1):void 0}function p(){return--v.count||delete d.__transition__,1}var f=[],d=this,m=t[u][l].delay,g=t[u][l].duration,v=d.__transition__||(d.__transition__={active:0,count:0});++v.count,i>=m?c(i):d3.timer(c,m,n)}),1},0,n),t}function Z(t,e,n){return""!=n&&Gr}function te(t,e){function n(t,n,i){var o=e.call(this,t,n);return null==o?""!=i&&Gr:i!=o&&r(i,o)}function i(t,n,i){return i!=e&&r(i,e)}var r=N(t);return"function"==typeof e?n:null==e?Z:(e+="",i)}function ee(t){for(var e=0,n=this.length;n>e;e++)for(var i=this[e],r=0,o=i.length;o>r;r++){var s=i[r];s&&t.call(s=s.node,s.__data__,r,e)}return this}function ne(){for(var t,e=Date.now(),n=io;n;)t=e-n.then,t>=n.delay&&(n.flush=n.callback(t)),n=n.next;var i=ie()-e;i>24?(isFinite(i)&&(clearTimeout(no),no=setTimeout(ne,i)),eo=0):(eo=1,ro(ne))}function ie(){for(var t=null,e=io,n=1/0;e;)e.flush?e=t?t.next=e.next:io=e.next:(n=Math.min(n,e.then+e.delay),e=(t=e).next);return n}function re(t){var e=[t.a,t.b],n=[t.c,t.d],i=se(e),r=oe(e,n),o=se(ae(n,e,-r))||0;e[0]*n[1]<n[0]*e[1]&&(e[0]*=-1,e[1]*=-1,i*=-1,r*=-1),this.rotate=(i?Math.atan2(e[1],e[0]):Math.atan2(-n[0],n[1]))*oo,this.translate=[t.e,t.f],this.scale=[i,o],this.skew=o?Math.atan2(r,o)*oo:0}function oe(t,e){return t[0]*e[0]+t[1]*e[1]}function se(t){var e=Math.sqrt(oe(t,t));return e&&(t[0]/=e,t[1]/=e),e}function ae(t,e,n){return t[0]+=n*e[0],t[1]+=n*e[1],t}function le(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();if(0>so&&(window.scrollX||window.scrollY)){n=d3.select(document.body).append("svg").style("position","absolute").style("top",0).style("left",0);var r=n[0][0].getScreenCTM();so=!(r.f||r.e),n.remove()}return so?(i.x=e.pageX,i.y=e.pageY):(i.x=e.clientX,i.y=e.clientY),i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}function ue(t){var e=t[0],n=t[t.length-1];return n>e?[e,n]:[n,e]}function ce(t){return t.rangeExtent?t.rangeExtent():ue(t.range())}function he(t,e){var n,i=0,r=t.length-1,o=t[i],s=t[r];return o>s&&(n=i,i=r,r=n,n=o,o=s,s=n),(n=s-o)&&(e=e(n),t[i]=e.floor(o),t[r]=e.ceil(s)),t}function pe(){return Math}function fe(t,e,n,i){function r(){var r=Math.min(t.length,e.length)>2?we:be,l=i?I:D;return s=r(t,e,l,n),a=r(e,t,l,d3.interpolate),o}function o(t){return s(t)}var s,a;return o.invert=function(t){return a(t)},o.domain=function(e){return arguments.length?(t=e.map(Number),r()):t},o.range=function(t){return arguments.length?(e=t,r()):e},o.rangeRound=function(t){return o.range(t).interpolate(d3.interpolateRound)},o.clamp=function(t){return arguments.length?(i=t,r()):i},o.interpolate=function(t){return arguments.length?(n=t,r()):n},o.ticks=function(e){return ve(t,e)},o.tickFormat=function(e){return ye(t,e)},o.nice=function(){return he(t,me),r()},o.copy=function(){return fe(t,e,n,i)},r()}function de(t,e){return d3.rebind(t,e,"range","rangeRound","interpolate","clamp")}function me(t){return t=Math.pow(10,Math.round(Math.log(t)/Math.LN10)-1),{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}}function ge(t,e){var n=ue(t),i=n[1]-n[0],r=Math.pow(10,Math.floor(Math.log(i/e)/Math.LN10)),o=e/i*r;return.15>=o?r*=10:.35>=o?r*=5:.75>=o&&(r*=2),n[0]=Math.ceil(n[0]/r)*r,n[1]=Math.floor(n[1]/r)*r+.5*r,n[2]=r,n}function ve(t,e){return d3.range.apply(d3,ge(t,e))}function ye(t,e){return d3.format(",."+Math.max(0,-Math.floor(Math.log(ge(t,e)[2])/Math.LN10+.01))+"f")}function be(t,e,n,i){var r=n(t[0],t[1]),o=i(e[0],e[1]);return function(t){return o(r(t))}}function we(t,e,n,i){var r=[],o=[],s=0,a=Math.min(t.length,e.length)-1;for(t[a]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<=a;)r.push(n(t[s-1],t[s])),o.push(i(e[s-1],e[s]));return function(e){var n=d3.bisect(t,e,1,a)-1;return o[n](r[n](e))}}function _e(t,e){function n(n){return t(e(n))}var i=e.pow;return n.invert=function(e){return i(t.invert(e))},n.domain=function(r){return arguments.length?(e=r[0]<0?Se:xe,i=e.pow,t.domain(r.map(e)),n):t.domain().map(i)},n.nice=function(){return t.domain(he(t.domain(),pe)),n},n.ticks=function(){var n=ue(t.domain()),r=[];if(n.every(isFinite)){var o=Math.floor(n[0]),s=Math.ceil(n[1]),a=i(n[0]),l=i(n[1]);if(e===Se)for(r.push(i(o));o++<s;)for(var u=9;u>0;u--)r.push(i(o)*u);else{for(;s>o;o++)for(var u=1;10>u;u++)r.push(i(o)*u);r.push(i(o))}for(o=0;r[o]<a;o++);for(s=r.length;r[s-1]>l;s--);r=r.slice(o,s)}return r},n.tickFormat=function(t,r){if(arguments.length<2&&(r=ao),arguments.length<1)return r;var o,s=t/n.ticks().length,a=e===Se?(o=-1e-12,Math.floor):(o=1e-12,Math.ceil);return function(t){return t/i(a(e(t)+o))<s?r(t):""}},n.copy=function(){return _e(t.copy(),e)},de(n,t)}function xe(t){return Math.log(0>t?0:t)/Math.LN10}function Se(t){return-Math.log(t>0?0:-t)/Math.LN10}function ke(t,e){function n(e){return t(i(e))}var i=Ce(e),r=Ce(1/e);return n.invert=function(e){return r(t.invert(e))},n.domain=function(e){return arguments.length?(t.domain(e.map(i)),n):t.domain().map(r)},n.ticks=function(t){return ve(n.domain(),t)},n.tickFormat=function(t){return ye(n.domain(),t)},n.nice=function(){return n.domain(he(n.domain(),me))},n.exponent=function(t){if(!arguments.length)return e;var o=n.domain();return i=Ce(e=t),r=Ce(1/e),n.domain(o)},n.copy=function(){return ke(t.copy(),e)},de(n,t)}function Ce(t){return function(e){return 0>e?-Math.pow(-e,t):Math.pow(e,t)}}function Ee(t,e){function n(e){return s[((o.get(e)||o.set(e,t.push(e)))-1)%s.length]}function r(e,n){return d3.range(t.length).map(function(t){return e+n*t})}var o,s,a;return n.domain=function(r){if(!arguments.length)return t;t=[],o=new i;for(var s,a=-1,l=r.length;++a<l;)o.has(s=r[a])||o.set(s,t.push(s));return n[e.t](e.x,e.p)},n.range=function(t){return arguments.length?(s=t,a=0,e={t:"range",x:t},n):s},n.rangePoints=function(i,o){arguments.length<2&&(o=0);var l=i[0],u=i[1],c=(u-l)/(t.length-1+o);return s=r(t.length<2?(l+u)/2:l+c*o/2,c),a=0,e={t:"rangePoints",x:i,p:o},n},n.rangeBands=function(i,o){arguments.length<2&&(o=0);var l=i[1]<i[0],u=i[l-0],c=i[1-l],h=(c-u)/(t.length+o);return s=r(u+h*o,h),l&&s.reverse(),a=h*(1-o),e={t:"rangeBands",x:i,p:o},n},n.rangeRoundBands=function(i,o){arguments.length<2&&(o=0);var l=i[1]<i[0],u=i[l-0],c=i[1-l],h=Math.floor((c-u)/(t.length+o)),p=c-u-(t.length-o)*h;return s=r(u+Math.round(p/2),h),l&&s.reverse(),a=Math.round(h*(1-o)),e={t:"rangeRoundBands",x:i,p:o},n},n.rangeBand=function(){return a},n.rangeExtent=function(){return ue(e.x)},n.copy=function(){return Ee(t,e)},n.domain(t)}function Te(t,e){function n(){var n=0,o=(t.length,e.length);for(r=[];++n<o;)r[n-1]=d3.quantile(t,n/o);return i}function i(t){return isNaN(t=+t)?0/0:e[d3.bisect(r,t)]}var r;return i.domain=function(e){return arguments.length?(t=e.filter(function(t){return!isNaN(t)}).sort(d3.ascending),n()):t},i.range=function(t){return arguments.length?(e=t,n()):e},i.quantiles=function(){return r},i.copy=function(){return Te(t,e)},n()}function Me(t,e,n){function i(e){return n[Math.max(0,Math.min(s,Math.floor(o*(e-t))))]}function r(){return o=n.length/(e-t),s=n.length-1,i}var o,s;return i.domain=function(n){return arguments.length?(t=+n[0],e=+n[n.length-1],r()):[t,e]},i.range=function(t){return arguments.length?(n=t,r()):n},i.copy=function(){return Me(t,e,n)},r()}function Pe(t){function e(t){return+t}return e.invert=e,e.domain=e.range=function(n){return arguments.length?(t=n.map(e),e):t},e.ticks=function(e){return ve(t,e)},e.tickFormat=function(e){return ye(t,e)},e.copy=function(){return Pe(t)},e}function Ae(t){return t.innerRadius}function Oe(t){return t.outerRadius}function Ne(t){return t.startAngle}function De(t){return t.endAngle}function Ie(t){function e(e){return e.length<1?null:"M"+o(t(Le(this,e,n,i)),s)}var n=$e,i=ze,r=mo,o=go.get(r),s=.7;return e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(i=t,e):i},e.interpolate=function(t){return arguments.length?(go.has(t+="")||(t=mo),o=go.get(r=t),e):r},e.tension=function(t){return arguments.length?(s=t,e):s},e}function Le(t,e,n,i){var r,o=[],s=-1,a=e.length,l="function"==typeof n,u="function"==typeof i;if(l&&u)for(;++s<a;)o.push([n.call(t,r=e[s],s),i.call(t,r,s)]);else if(l)for(;++s<a;)o.push([n.call(t,e[s],s),i]);else if(u)for(;++s<a;)o.push([n,i.call(t,e[s],s)]);else for(;++s<a;)o.push([n,i]);return o}function $e(t){return t[0]}function ze(t){return t[1]}function Re(t){for(var e=0,n=t.length,i=t[0],r=[i[0],",",i[1]];++e<n;)r.push("L",(i=t[e])[0],",",i[1]);return r.join("")}function Be(t){for(var e=0,n=t.length,i=t[0],r=[i[0],",",i[1]];++e<n;)r.push("V",(i=t[e])[1],"H",i[0]);return r.join("")}function Fe(t){for(var e=0,n=t.length,i=t[0],r=[i[0],",",i[1]];++e<n;)r.push("H",(i=t[e])[0],"V",i[1]);return r.join("")}function Ve(t,e){return t.length<4?Re(t):t[1]+He(t.slice(1,t.length-1),qe(t,e))}function je(t,e){return t.length<3?Re(t):t[0]+He((t.push(t[0]),t),qe([t[t.length-2]].concat(t,[t[1]]),e))}function Ue(t,e){return t.length<3?Re(t):t[0]+He(t,qe(t,e))}function He(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return Re(t);var n=t.length!=e.length,i="",r=t[0],o=t[1],s=e[0],a=s,l=1;if(n&&(i+="Q"+(o[0]-2*s[0]/3)+","+(o[1]-2*s[1]/3)+","+o[0]+","+o[1],r=t[1],l=2),e.length>1){a=e[1],o=t[l],l++,i+="C"+(r[0]+s[0])+","+(r[1]+s[1])+","+(o[0]-a[0])+","+(o[1]-a[1])+","+o[0]+","+o[1];for(var u=2;u<e.length;u++,l++)o=t[l],a=e[u],i+="S"+(o[0]-a[0])+","+(o[1]-a[1])+","+o[0]+","+o[1]}if(n){var c=t[l];i+="Q"+(o[0]+2*a[0]/3)+","+(o[1]+2*a[1]/3)+","+c[0]+","+c[1]}return i}function qe(t,e){for(var n,i=[],r=(1-e)/2,o=t[0],s=t[1],a=1,l=t.length;++a<l;)n=o,o=s,s=t[a],i.push([r*(s[0]-n[0]),r*(s[1]-n[1])]);return i}function We(t){if(t.length<3)return Re(t);var e=1,n=t.length,i=t[0],r=i[0],o=i[1],s=[r,r,r,(i=t[1])[0]],a=[o,o,o,i[1]],l=[r,",",o];for(Xe(l,s,a);++e<n;)i=t[e],s.shift(),s.push(i[0]),a.shift(),a.push(i[1]),Xe(l,s,a);for(e=-1;++e<2;)s.shift(),s.push(i[0]),a.shift(),a.push(i[1]),Xe(l,s,a);return l.join("")}function Je(t){if(t.length<4)return Re(t);for(var e,n=[],i=-1,r=t.length,o=[0],s=[0];++i<3;)e=t[i],o.push(e[0]),s.push(e[1]);for(n.push(Ge(bo,o)+","+Ge(bo,s)),--i;++i<r;)e=t[i],o.shift(),o.push(e[0]),s.shift(),s.push(e[1]),Xe(n,o,s);return n.join("")}function Ye(t){for(var e,n,i=-1,r=t.length,o=r+4,s=[],a=[];++i<4;)n=t[i%r],s.push(n[0]),a.push(n[1]);for(e=[Ge(bo,s),",",Ge(bo,a)],--i;++i<o;)n=t[i%r],s.shift(),s.push(n[0]),a.shift(),a.push(n[1]),Xe(e,s,a);return e.join("")}function Ke(t,e){for(var n,i,r=t.length-1,o=t[0][0],s=t[0][1],a=t[r][0]-o,l=t[r][1]-s,u=-1;++u<=r;)n=t[u],i=u/r,n[0]=e*n[0]+(1-e)*(o+i*a),n[1]=e*n[1]+(1-e)*(s+i*l);return We(t)}function Ge(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function Xe(t,e,n){t.push("C",Ge(vo,e),",",Ge(vo,n),",",Ge(yo,e),",",Ge(yo,n),",",Ge(bo,e),",",Ge(bo,n))}function Qe(t,e){return(e[1]-t[1])/(e[0]-t[0])}function Ze(t){for(var e=0,n=t.length-1,i=[],r=t[0],o=t[1],s=i[0]=Qe(r,o);++e<n;)i[e]=s+(s=Qe(r=o,o=t[e+1]));return i[e]=s,i}function tn(t){for(var e,n,i,r,o=[],s=Ze(t),a=-1,l=t.length-1;++a<l;)e=Qe(t[a],t[a+1]),Math.abs(e)<1e-6?s[a]=s[a+1]=0:(n=s[a]/e,i=s[a+1]/e,r=n*n+i*i,r>9&&(r=3*e/Math.sqrt(r),s[a]=r*n,s[a+1]=r*i));for(a=-1;++a<=l;)r=(t[Math.min(l,a+1)][0]-t[Math.max(0,a-1)][0])/(6*(1+s[a]*s[a])),o.push([r||0,s[a]*r||0]);return o}function en(t){return t.length<3?Re(t):t[0]+He(t,tn(t))}function nn(t){for(var e,n,i,r=-1,o=t.length;++r<o;)e=t[r],n=e[0],i=e[1]+po,e[0]=n*Math.cos(i),e[1]=n*Math.sin(i);return t}function rn(t){function e(e){if(e.length<1)return null;var n=Le(this,e,o,a),c=Le(this,e,o===s?on(n):s,a===l?sn(n):l);return"M"+i(t(c),u)+"L"+r(t(n.reverse()),u)+"Z"}var n,i,r,o=$e,s=$e,a=0,l=ze,u=.7;return e.x=function(t){return arguments.length?(o=s=t,e):s},e.x0=function(t){return arguments.length?(o=t,e):o},e.x1=function(t){return arguments.length?(s=t,e):s},e.y=function(t){return arguments.length?(a=l=t,e):l},e.y0=function(t){return arguments.length?(a=t,e):a},e.y1=function(t){return arguments.length?(l=t,e):l},e.interpolate=function(t){return arguments.length?(go.has(t+="")||(t=mo),i=go.get(n=t),r=i.reverse||i,e):n},e.tension=function(t){return arguments.length?(u=t,e):u},e.interpolate("linear")}function on(t){return function(e,n){return t[n][0]}}function sn(t){return function(e,n){return t[n][1]}}function an(t){return t.source}function ln(t){return t.target}function un(t){return t.radius}function cn(t){return[t.x,t.y]}function hn(t){return function(){var e=t.apply(this,arguments),n=e[0],i=e[1]+po;return[n*Math.cos(i),n*Math.sin(i)]}}function pn(){return 64}function fn(){return"circle"}function dn(t){var e=Math.sqrt(t/Math.PI);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}function mn(t,e){t.attr("transform",function(t){return"translate("+e(t)+",0)"})}function gn(t,e){t.attr("transform",function(t){return"translate(0,"+e(t)+")"})}function vn(t,e,n){if(i=[],n&&e.length>1){for(var i,r,o,s=ue(t.domain()),a=-1,l=e.length,u=(e[1]-e[0])/++n;++a<l;)for(r=n;--r>0;)(o=+e[a]-r*u)>=s[0]&&i.push(o);for(--a,r=0;++r<n&&(o=+e[a]+r*u)<s[1];)i.push(o)}return i}function yn(){Co||(Co=d3.select("body").append("div").style("visibility","hidden").style("top",0).style("height",0).style("width",0).style("overflow-y","scroll").append("div").style("height","2000px").node().parentNode);var t,e=d3.event;try{Co.scrollTop=1e3,Co.dispatchEvent(e),t=1e3-Co.scrollTop}catch(n){t=e.wheelDelta||5*-e.detail}return t}function bn(t){for(var e=t.source,n=t.target,i=_n(e,n),r=[e];e!==i;)e=e.parent,r.push(e);for(var o=r.length;n!==i;)r.splice(o,0,n),n=n.parent;return r}function wn(t){for(var e=[],n=t.parent;null!=n;)e.push(t),t=n,n=n.parent;return e.push(t),e}function _n(t,e){if(t===e)return t;for(var n=wn(t),i=wn(e),r=n.pop(),o=i.pop(),s=null;r===o;)s=r,r=n.pop(),o=i.pop();return s}function xn(t){t.fixed|=2}function Sn(t){t!==Mo&&(t.fixed&=1)}function kn(){Mo.fixed&=1,To=Mo=null}function Cn(){Mo.px=d3.event.x,Mo.py=d3.event.y,To.resume()}function En(t,e,n){var i=0,r=0;if(t.charge=0,!t.leaf)for(var o,s=t.nodes,a=s.length,l=-1;++l<a;)o=s[l],null!=o&&(En(o,e,n),t.charge+=o.charge,i+=o.charge*o.cx,r+=o.charge*o.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var u=e*n[t.point.index];t.charge+=t.pointCharge=u,i+=u*t.point.x,r+=u*t.point.y}t.cx=i/t.charge,t.cy=r/t.charge}function Tn(){return 20}function Mn(){return 1}function Pn(t){return t.x}function An(t){return t.y}function On(t,e,n){t.y0=e,t.y=n}function Nn(t){return d3.range(t.length)}function Dn(t){for(var e=-1,n=t[0].length,i=[];++e<n;)i[e]=0;return i}function In(t){for(var e,n=1,i=0,r=t[0][1],o=t.length;o>n;++n)(e=t[n][1])>r&&(i=n,r=e);return i}function Ln(t){return t.reduce($n,0)}function $n(t,e){return t+e[1]}function zn(t,e){return Rn(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function Rn(t,e){for(var n=-1,i=+t[0],r=(t[1]-i)/e,o=[];++n<=e;)o[n]=r*n+i;return o}function Bn(t){return[d3.min(t),d3.max(t)]}function Fn(t,e){return d3.rebind(t,e,"sort","children","value"),t.links=Hn,t.nodes=function(e){return No=!0,(t.nodes=t)(e)},t}function Vn(t){return t.children}function jn(t){return t.value}function Un(t,e){return e.value-t.value}function Hn(t){return d3.merge(t.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}function qn(t,e){return t.value-e.value}function Wn(t,e){var n=t._pack_next;t._pack_next=e,e._pack_prev=t,e._pack_next=n,n._pack_prev=e}function Jn(t,e){t._pack_next=e,e._pack_prev=t}function Yn(t,e){var n=e.x-t.x,i=e.y-t.y,r=t.r+e.r;return r*r-n*n-i*i>.001}function Kn(t){function e(t){a=Math.min(t.x-t.r,a),l=Math.max(t.x+t.r,l),u=Math.min(t.y-t.r,u),c=Math.max(t.y+t.r,c)}var n,i,r,o,s,a=1/0,l=-1/0,u=1/0,c=-1/0,h=t.length;if(t.forEach(Gn),n=t[0],n.x=-n.r,n.y=0,e(n),h>1&&(i=t[1],i.x=i.r,i.y=0,e(i),h>2)){r=t[2],ti(n,i,r),e(r),Wn(n,r),n._pack_prev=r,Wn(r,i),i=n._pack_next;for(var p=3;h>p;p++){ti(n,i,r=t[p]);var f=0,d=1,m=1;for(o=i._pack_next;o!==i;o=o._pack_next,d++)if(Yn(o,r)){f=1;break}if(1==f)for(s=n._pack_prev;s!==o._pack_prev&&!Yn(s,r);s=s._pack_prev,m++);f?(m>d||d==m&&i.r<n.r?Jn(n,i=o):Jn(n=s,i),p--):(Wn(n,r),i=r,e(r))}}for(var g=(a+l)/2,v=(u+c)/2,y=0,p=0;h>p;p++){var b=t[p];b.x-=g,b.y-=v,y=Math.max(y,b.r+Math.sqrt(b.x*b.x+b.y*b.y))}return t.forEach(Xn),y}function Gn(t){t._pack_next=t._pack_prev=t}function Xn(t){delete t._pack_next,delete t._pack_prev}function Qn(t){var e=t.children;e&&e.length?(e.forEach(Qn),t.r=Kn(e)):t.r=Math.sqrt(t.value)}function Zn(t,e,n,i){var r=t.children;if(t.x=e+=i*t.x,t.y=n+=i*t.y,t.r*=i,r)for(var o=-1,s=r.length;++o<s;)Zn(r[o],e,n,i)}function ti(t,e,n){var i=t.r+n.r,r=e.x-t.x,o=e.y-t.y;if(i&&(r||o)){var s=e.r+n.r,a=Math.sqrt(r*r+o*o),l=Math.max(-1,Math.min(1,(i*i+a*a-s*s)/(2*i*a))),u=Math.acos(l),c=l*(i/=a),h=Math.sin(u)*i;n.x=t.x+c*r+h*o,n.y=t.y+c*o-h*r}else n.x=t.x+i,n.y=t.y}function ei(t){return 1+d3.max(t,function(t){return t.y})}function ni(t){return t.reduce(function(t,e){return t+e.x},0)/t.length}function ii(t){var e=t.children;return e&&e.length?ii(e[0]):t}function ri(t){var e,n=t.children;return n&&(e=n.length)?ri(n[e-1]):t}function oi(t,e){return t.parent==e.parent?1:2}function si(t){var e=t.children;return e&&e.length?e[0]:t._tree.thread}function ai(t){var e,n=t.children;return n&&(e=n.length)?n[e-1]:t._tree.thread}function li(t,e){var n=t.children;if(n&&(r=n.length))for(var i,r,o=-1;++o<r;)e(i=li(n[o],e),t)>0&&(t=i);return t}function ui(t,e){return t.x-e.x}function ci(t,e){return e.x-t.x}function hi(t,e){return t.depth-e.depth}function pi(t,e){function n(t,i){var r=t.children;if(r&&(s=r.length))for(var o,s,a=null,l=-1;++l<s;)o=r[l],n(o,a),a=o;e(t,i)}n(t,null)}function fi(t){for(var e,n=0,i=0,r=t.children,o=r.length;--o>=0;)e=r[o]._tree,e.prelim+=n,e.mod+=n,n+=e.shift+(i+=e.change)}function di(t,e,n){t=t._tree,e=e._tree;var i=n/(e.number-t.number);t.change+=i,e.change-=i,e.shift+=n,e.prelim+=n,e.mod+=n}function mi(t,e,n){return t._tree.ancestor.parent==e.parent?t._tree.ancestor:n}function gi(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function vi(t,e){var n=t.x+e[3],i=t.y+e[0],r=t.dx-e[1]-e[3],o=t.dy-e[0]-e[2];return 0>r&&(n+=r/2,r=0),0>o&&(i+=o/2,o=0),{x:n,y:i,dx:r,dy:o}}function yi(t){return t.map(bi).join(",")}function bi(t){return/[",\n]/.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}function wi(t,e){return function(n){return n&&t.hasOwnProperty(n.type)?t[n.type](n):e}}function _i(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function xi(t,e){Io.hasOwnProperty(t.type)&&Io[t.type](t,e)}function Si(t,e){xi(t.geometry,e)}function ki(t,e){for(var n=t.features,i=0,r=n.length;r>i;i++)xi(n[i].geometry,e)}function Ci(t,e){for(var n=t.geometries,i=0,r=n.length;r>i;i++)xi(n[i],e)}function Ei(t,e){for(var n=t.coordinates,i=0,r=n.length;r>i;i++)e.apply(null,n[i])}function Ti(t,e){for(var n=t.coordinates,i=0,r=n.length;r>i;i++)for(var o=n[i],s=0,a=o.length;a>s;s++)e.apply(null,o[s])}function Mi(t,e){for(var n=t.coordinates,i=0,r=n.length;r>i;i++)for(var o=n[i][0],s=0,a=o.length;a>s;s++)e.apply(null,o[s])}function Pi(t,e){e.apply(null,t.coordinates)}function Ai(t,e){for(var n=t.coordinates[0],i=0,r=n.length;r>i;i++)e.apply(null,n[i])}function Oi(t){return t.source}function Ni(t){return t.target}function Di(t,e){function n(t){var e=Math.sin(m-(t*=m))/g,n=Math.sin(t)/g,i=e*a*r+n*f*c,s=e*a*o+n*f*h,u=e*l+n*d;return[Math.atan2(s,i)/Do,Math.atan2(u,Math.sqrt(i*i+s*s))/Do]}var i=t[0]*Do,r=Math.cos(i),o=Math.sin(i),s=t[1]*Do,a=Math.cos(s),l=Math.sin(s),u=e[0]*Do,c=Math.cos(u),h=Math.sin(u),p=e[1]*Do,f=Math.cos(p),d=Math.sin(p),m=n.d=Math.acos(Math.max(-1,Math.min(1,l*d+a*f*Math.cos(u-i)))),g=Math.sin(m);return n}function Ii(t){for(var e=0,n=0;;){if(t(e,n))return[e,n];0===e?(e=n+1,n=0):(e-=1,n+=1)}}function Li(t,e,n,i){var r,o,s,a,l,u,c;return r=i[t],o=r[0],s=r[1],r=i[e],a=r[0],l=r[1],r=i[n],u=r[0],c=r[1],(c-s)*(a-o)-(l-s)*(u-o)>0}function $i(t,e,n){return(n[0]-e[0])*(t[1]-e[1])<(n[1]-e[1])*(t[0]-e[0])}function zi(t,e,n,i){var r=t[0],o=e[0],s=n[0],a=i[0],l=t[1],u=e[1],c=n[1],h=i[1],p=r-s,f=o-r,d=a-s,m=l-c,g=u-l,v=h-c,y=(d*m-v*p)/(v*f-d*g);return[r+y*f,l+y*g]}function Ri(t,e){var n={list:t.map(function(t,e){return{index:e,x:t[0],y:t[1]}}).sort(function(t,e){return t.y<e.y?-1:t.y>e.y?1:t.x<e.x?-1:t.x>e.x?1:0}),bottomSite:null},i={list:[],leftEnd:null,rightEnd:null,init:function(){i.leftEnd=i.createHalfEdge(null,"l"),i.rightEnd=i.createHalfEdge(null,"l"),i.leftEnd.r=i.rightEnd,i.rightEnd.l=i.leftEnd,i.list.unshift(i.leftEnd,i.rightEnd)},createHalfEdge:function(t,e){return{edge:t,side:e,vertex:null,l:null,r:null}},insert:function(t,e){e.l=t,e.r=t.r,t.r.l=e,t.r=e},leftBound:function(t){var e=i.leftEnd;do e=e.r;while(e!=i.rightEnd&&r.rightOf(e,t));return e=e.l},del:function(t){t.l.r=t.r,t.r.l=t.l,t.edge=null},right:function(t){return t.r},left:function(t){return t.l},leftRegion:function(t){return null==t.edge?n.bottomSite:t.edge.region[t.side]},rightRegion:function(t){return null==t.edge?n.bottomSite:t.edge.region[zo[t.side]]}},r={bisect:function(t,e){var n={region:{l:t,r:e},ep:{l:null,r:null}},i=e.x-t.x,r=e.y-t.y,o=i>0?i:-i,s=r>0?r:-r;return n.c=t.x*i+t.y*r+.5*(i*i+r*r),o>s?(n.a=1,n.b=r/i,n.c/=i):(n.b=1,n.a=i/r,n.c/=r),n},intersect:function(t,e){var n=t.edge,i=e.edge;if(!n||!i||n.region.r==i.region.r)return null;var r=n.a*i.b-n.b*i.a;if(Math.abs(r)<1e-10)return null;var o,s,a=(n.c*i.b-i.c*n.b)/r,l=(i.c*n.a-n.c*i.a)/r,u=n.region.r,c=i.region.r;u.y<c.y||u.y==c.y&&u.x<c.x?(o=t,s=n):(o=e,s=i);var h=a>=s.region.r.x;return h&&"l"===o.side||!h&&"r"===o.side?null:{x:a,y:l}},rightOf:function(t,e){var n=t.edge,i=n.region.r,r=e.x>i.x;if(r&&"l"===t.side)return 1;if(!r&&"r"===t.side)return 0;if(1===n.a){var o=e.y-i.y,s=e.x-i.x,a=0,l=0;if(!r&&n.b<0||r&&n.b>=0?l=a=o>=n.b*s:(l=e.x+e.y*n.b>n.c,n.b<0&&(l=!l),l||(a=1)),!a){var u=i.x-n.region.l.x;l=n.b*(s*s-o*o)<u*o*(1+2*s/u+n.b*n.b),n.b<0&&(l=!l)}}else{var c=n.c-n.a*e.x,h=e.y-c,p=e.x-i.x,f=c-i.y;l=h*h>p*p+f*f}return"l"===t.side?l:!l},endPoint:function(t,n,i){t.ep[n]=i,t.ep[zo[n]]&&e(t)},distance:function(t,e){var n=t.x-e.x,i=t.y-e.y;return Math.sqrt(n*n+i*i)}},o={list:[],insert:function(t,e,n){t.vertex=e,t.ystar=e.y+n;for(var i=0,r=o.list,s=r.length;s>i;i++){var a=r[i];if(!(t.ystar>a.ystar||t.ystar==a.ystar&&e.x>a.vertex.x))break}r.splice(i,0,t)},del:function(t){for(var e=0,n=o.list,i=n.length;i>e&&n[e]!=t;++e);n.splice(e,1)},empty:function(){return 0===o.list.length},nextEvent:function(t){for(var e=0,n=o.list,i=n.length;i>e;++e)if(n[e]==t)return n[e+1];return null},min:function(){var t=o.list[0];return{x:t.vertex.x,y:t.ystar}},extractMin:function(){return o.list.shift()}};i.init(),n.bottomSite=n.list.shift();for(var s,a,l,u,c,h,p,f,d,m,g,v,y,b=n.list.shift();;)if(o.empty()||(s=o.min()),b&&(o.empty()||b.y<s.y||b.y==s.y&&b.x<s.x))a=i.leftBound(b),l=i.right(a),p=i.rightRegion(a),v=r.bisect(p,b),h=i.createHalfEdge(v,"l"),i.insert(a,h),m=r.intersect(a,h),m&&(o.del(a),o.insert(a,m,r.distance(m,b))),a=h,h=i.createHalfEdge(v,"r"),i.insert(a,h),m=r.intersect(h,l),m&&o.insert(h,m,r.distance(m,b)),b=n.list.shift();else{if(o.empty())break;a=o.extractMin(),u=i.left(a),l=i.right(a),c=i.right(l),p=i.leftRegion(a),f=i.rightRegion(l),g=a.vertex,r.endPoint(a.edge,a.side,g),r.endPoint(l.edge,l.side,g),i.del(a),o.del(l),i.del(l),y="l",p.y>f.y&&(d=p,p=f,f=d,y="r"),v=r.bisect(p,f),h=i.createHalfEdge(v,y),i.insert(u,h),r.endPoint(v,zo[y],g),m=r.intersect(u,h),m&&(o.del(u),o.insert(u,m,r.distance(m,p))),m=r.intersect(h,c),m&&o.insert(h,m,r.distance(m,p))}for(a=i.right(i.leftEnd);a!=i.rightEnd;a=i.right(a))e(a.edge)}function Bi(){return{leaf:!0,nodes:[],point:null}}function Fi(t,e,n,i,r,o){if(!t(e,n,i,r,o)){var s=.5*(n+r),a=.5*(i+o),l=e.nodes;l[0]&&Fi(t,l[0],n,i,s,a),l[1]&&Fi(t,l[1],s,i,r,a),l[2]&&Fi(t,l[2],n,a,s,o),l[3]&&Fi(t,l[3],s,a,r,o)}}function Vi(t){return{x:t[0],y:t[1]}}function ji(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Ui(t,e,n,i){for(var r,o,s=0,a=e.length,l=n.length;a>s;){if(i>=l)return-1;if(r=e.charCodeAt(s++),37==r){if(o=Ho[e.charAt(s++)],!o||(i=o(t,n,i))<0)return-1}else if(r!=n.charCodeAt(i++))return-1}return i}function Hi(t,e,n){return qo.test(e.substring(n,n+=3))?n:-1}function qi(t,e,n){Wo.lastIndex=0;var i=Wo.exec(e.substring(n,n+10));return i?n+=i[0].length:-1}function Wi(t,e,n){var i=Jo.get(e.substring(n,n+=3).toLowerCase());return null==i?-1:(t.setMonth(i),n)}function Ji(t,e,n){Yo.lastIndex=0;var i=Yo.exec(e.substring(n,n+12));return i?(t.setMonth(Ko.get(i[0].toLowerCase())),n+=i[0].length):-1}function Yi(t,e,n){return Ui(t,Uo.c.toString(),e,n)}function Ki(t,e,n){return Ui(t,Uo.x.toString(),e,n)}function Gi(t,e,n){return Ui(t,Uo.X.toString(),e,n)}function Xi(t,e,n){Xo.lastIndex=0;var i=Xo.exec(e.substring(n,n+4));return i?(t.setFullYear(i[0]),n+=i[0].length):-1}function Qi(t,e,n){Xo.lastIndex=0;var i=Xo.exec(e.substring(n,n+2));return i?(t.setFullYear(Zi()+ +i[0]),n+=i[0].length):-1}function Zi(){return 1e3*~~((new Date).getFullYear()/1e3)}function tr(t,e,n){Xo.lastIndex=0;var i=Xo.exec(e.substring(n,n+2));return i?(t.setMonth(i[0]-1),n+=i[0].length):-1}function er(t,e,n){Xo.lastIndex=0;var i=Xo.exec(e.substring(n,n+2));return i?(t.setDate(+i[0]),n+=i[0].length):-1}function nr(t,e,n){Xo.lastIndex=0;var i=Xo.exec(e.substring(n,n+2));return i?(t.setHours(+i[0]),n+=i[0].length):-1}function ir(t,e,n){return t.hour12=!0,nr(t,e,n)}function rr(t,e,n){Xo.lastIndex=0;var i=Xo.exec(e.substring(n,n+2));return i?(t.setMinutes(+i[0]),n+=i[0].length):-1}function or(t,e,n){Xo.lastIndex=0;var i=Xo.exec(e.substring(n,n+2));return i?(t.setSeconds(+i[0]),n+=i[0].length):-1}function sr(t,e,n){Xo.lastIndex=0;var i=Xo.exec(e.substring(n,n+3));return i?(t.setMilliseconds(+i[0]),n+=i[0].length):-1}function ar(t,e,n){var i=Qo.get(e.substring(n,n+=2).toLowerCase());return null==i?-1:(t.hour12pm=i,n)}function lr(t){var e=t.getTimezoneOffset(),n=e>0?"-":"+",i=~~(Math.abs(e)/60),r=Math.abs(e)%60;return n+Bo(i)+Bo(r)}function ur(t){return t.toISOString()}function cr(t,e,n){function i(e){var n=t(e),i=o(n,1);return i-e>e-n?n:i}function r(n){return e(n=t(new Ro(n-1)),1),n}function o(t,n){return e(t=new Ro(+t),n),t}function s(t,i,o){var s=r(t),a=[];if(o>1)for(;i>s;)n(s)%o||a.push(new Date(+s)),e(s,1);else for(;i>s;)a.push(new Date(+s)),e(s,1);return a}function a(t,e,n){try{Ro=ji;var i=new ji;return i._=t,s(i,e,n)}finally{Ro=Date}}t.floor=t,t.round=i,t.ceil=r,t.offset=o,t.range=s;var l=t.utc=hr(t);return l.floor=l,l.round=hr(i),l.ceil=hr(r),l.offset=hr(o),l.range=a,t}function hr(t){return function(e,n){try{Ro=ji;var i=new ji;return i._=e,t(i,n)._}finally{Ro=Date}}}function pr(t,e,n){function i(e){return t(e)}return i.invert=function(e){return dr(t.invert(e))},i.domain=function(e){return arguments.length?(t.domain(e),i):t.domain().map(dr)},i.nice=function(t){var e=fr(i.domain());return i.domain([t.floor(e[0]),t.ceil(e[1])])},i.ticks=function(n,r){var o=fr(i.domain());if("function"!=typeof n){var s=o[1]-o[0],a=s/n,l=d3.bisect(ts,a);if(l==ts.length)return e.year(o,n);if(!l)return t.ticks(n).map(dr);Math.log(a/ts[l-1])<Math.log(ts[l]/a)&&--l,n=e[l],r=n[1],n=n[0].range}return n(o[0],new Date(+o[1]+1),r)},i.tickFormat=function(){return n},i.copy=function(){return pr(t.copy(),e,n)},d3.rebind(i,t,"range","rangeRound","interpolate","clamp")}function fr(t){var e=t[0],n=t[t.length-1];return n>e?[e,n]:[n,e]}function dr(t){return new Date(t)}function mr(t){return function(e){for(var n=t.length-1,i=t[n];!i[1](e);)i=t[--n];return i[0](e)}}function gr(t){var e=new Date(t,0,1);return e.setFullYear(t),e}function vr(t){var e=t.getFullYear(),n=gr(e),i=gr(e+1);return e+(t-n)/(i-n)}function yr(t){var e=new Date(Date.UTC(t,0,1));return e.setUTCFullYear(t),e}function br(t){var e=t.getUTCFullYear(),n=yr(e),i=yr(e+1);return e+(t-n)/(i-n)}Date.now||(Date.now=function(){return+new Date});try{document.createElement("div").style.setProperty("opacity",0,"")}catch(wr){var _r=CSSStyleDeclaration.prototype,xr=_r.setProperty;_r.setProperty=function(t,e,n){xr.call(this,t,e+"",n)}}d3={version:"2.8.0"};var Sr=n;try{Sr(document.documentElement.childNodes)[0].nodeType}catch(kr){Sr=e}var Cr=[].__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]};d3.map=function(t){var e=new i;for(var n in t)e.set(n,t[n]);return e},t(i,{has:function(t){return Er+t in this},get:function(t){return this[Er+t]},set:function(t,e){return this[Er+t]=e},remove:function(t){return t=Er+t,t in this&&delete this[t]},keys:function(){var t=[];return this.forEach(function(e){t.push(e)}),t},values:function(){var t=[];return this.forEach(function(e,n){t.push(n)}),t
},entries:function(){var t=[];return this.forEach(function(e,n){t.push({key:e,value:n})}),t},forEach:function(t){for(var e in this)e.charCodeAt(0)===Tr&&t.call(this,e.substring(1),this[e])}});var Er="\x00",Tr=Er.charCodeAt(0);d3.functor=function(t){return"function"==typeof t?t:function(){return t}},d3.rebind=function(t,e){for(var n,i=1,r=arguments.length;++i<r;)t[n=arguments[i]]=o(t,e,e[n]);return t},d3.ascending=function(t,e){return e>t?-1:t>e?1:t>=e?0:0/0},d3.descending=function(t,e){return t>e?-1:e>t?1:e>=t?0:0/0},d3.mean=function(t,e){var n,i=t.length,r=0,o=-1,a=0;if(1===arguments.length)for(;++o<i;)s(n=t[o])&&(r+=(n-r)/++a);else for(;++o<i;)s(n=e.call(t,t[o],o))&&(r+=(n-r)/++a);return a?r:void 0},d3.median=function(t,e){return arguments.length>1&&(t=t.map(e)),t=t.filter(s),t.length?d3.quantile(t.sort(d3.ascending),.5):void 0},d3.min=function(t,e){var n,i,r=-1,o=t.length;if(1===arguments.length){for(;++r<o&&(null==(n=t[r])||n!=n);)n=void 0;for(;++r<o;)null!=(i=t[r])&&n>i&&(n=i)}else{for(;++r<o&&(null==(n=e.call(t,t[r],r))||n!=n);)n=void 0;for(;++r<o;)null!=(i=e.call(t,t[r],r))&&n>i&&(n=i)}return n},d3.max=function(t,e){var n,i,r=-1,o=t.length;if(1===arguments.length){for(;++r<o&&(null==(n=t[r])||n!=n);)n=void 0;for(;++r<o;)null!=(i=t[r])&&i>n&&(n=i)}else{for(;++r<o&&(null==(n=e.call(t,t[r],r))||n!=n);)n=void 0;for(;++r<o;)null!=(i=e.call(t,t[r],r))&&i>n&&(n=i)}return n},d3.extent=function(t,e){var n,i,r,o=-1,s=t.length;if(1===arguments.length){for(;++o<s&&(null==(n=r=t[o])||n!=n);)n=r=void 0;for(;++o<s;)null!=(i=t[o])&&(n>i&&(n=i),i>r&&(r=i))}else{for(;++o<s&&(null==(n=r=e.call(t,t[o],o))||n!=n);)n=void 0;for(;++o<s;)null!=(i=e.call(t,t[o],o))&&(n>i&&(n=i),i>r&&(r=i))}return[n,r]},d3.random={normal:function(t,e){return arguments.length<2&&(e=1),arguments.length<1&&(t=0),function(){var n,i,r;do n=2*Math.random()-1,i=2*Math.random()-1,r=n*n+i*i;while(!r||r>1);return t+e*n*Math.sqrt(-2*Math.log(r)/r)}}},d3.sum=function(t,e){var n,i=0,r=t.length,o=-1;if(1===arguments.length)for(;++o<r;)isNaN(n=+t[o])||(i+=n);else for(;++o<r;)isNaN(n=+e.call(t,t[o],o))||(i+=n);return i},d3.quantile=function(t,e){var n=(t.length-1)*e+1,i=Math.floor(n),r=t[i-1],o=n-i;return o?r+o*(t[i]-r):r},d3.transpose=function(t){return d3.zip.apply(d3,t)},d3.zip=function(){if(!(i=arguments.length))return[];for(var t=-1,e=d3.min(arguments,a),n=new Array(e);++t<e;)for(var i,r=-1,o=n[t]=new Array(i);++r<i;)o[r]=arguments[r][t];return n},d3.bisector=function(t){return{left:function(e,n,i,r){for(arguments.length<3&&(i=0),arguments.length<4&&(r=e.length);r>i;){var o=i+r>>1;t.call(e,e[o],o)<n?i=o+1:r=o}return i},right:function(e,n,i,r){for(arguments.length<3&&(i=0),arguments.length<4&&(r=e.length);r>i;){var o=i+r>>1;n<t.call(e,e[o],o)?r=o:i=o+1}return i}}};var Mr=d3.bisector(function(t){return t});d3.bisectLeft=Mr.left,d3.bisect=d3.bisectRight=Mr.right,d3.first=function(t,e){var n,i=0,r=t.length,o=t[0];for(1===arguments.length&&(e=d3.ascending);++i<r;)e.call(t,o,n=t[i])>0&&(o=n);return o},d3.last=function(t,e){var n,i=0,r=t.length,o=t[0];for(1===arguments.length&&(e=d3.ascending);++i<r;)e.call(t,o,n=t[i])<=0&&(o=n);return o},d3.nest=function(){function t(e,a){if(a>=s.length)return r?r.call(o,e):n?e.sort(n):e;for(var l,u,c,h=-1,p=e.length,f=s[a++],d=new i,m={};++h<p;)(c=d.get(l=f(u=e[h])))?c.push(u):d.set(l,[u]);return d.forEach(function(e){m[e]=t(d.get(e),a)}),m}function e(t,n){if(n>=s.length)return t;var i,r=[],o=a[n++];for(i in t)r.push({key:i,values:e(t[i],n)});return o&&r.sort(function(t,e){return o(t.key,e.key)}),r}var n,r,o={},s=[],a=[];return o.map=function(e){return t(e,0)},o.entries=function(n){return e(t(n,0),0)},o.key=function(t){return s.push(t),o},o.sortKeys=function(t){return a[s.length-1]=t,o},o.sortValues=function(t){return n=t,o},o.rollup=function(t){return r=t,o},o},d3.keys=function(t){var e=[];for(var n in t)e.push(n);return e},d3.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},d3.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},d3.permute=function(t,e){for(var n=[],i=-1,r=e.length;++i<r;)n[i]=t[e[i]];return n},d3.merge=function(t){return Array.prototype.concat.apply([],t)},d3.split=function(t,e){var n,i=[],r=[],o=-1,s=t.length;for(arguments.length<2&&(e=l);++o<s;)e.call(r,n=t[o],o)?r=[]:(r.length||i.push(r),r.push(n));return i},d3.range=function(t,e,n){if(arguments.length<3&&(n=1,arguments.length<2&&(e=t,t=0)),1/0===(e-t)/n)throw new Error("infinite range");var i,r=[],o=c(Math.abs(n)),s=-1;if(t*=o,e*=o,n*=o,0>n)for(;(i=t+n*++s)>e;)r.push(i/o);else for(;(i=t+n*++s)<e;)r.push(i/o);return r},d3.requote=function(t){return t.replace(Pr,"\\$&")};var Pr=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;d3.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)},d3.xhr=function(t,e,n){var i=new XMLHttpRequest;arguments.length<3?(n=e,e=null):e&&i.overrideMimeType&&i.overrideMimeType(e),i.open("GET",t,!0),e&&i.setRequestHeader("Accept",e),i.onreadystatechange=function(){4===i.readyState&&n(i.status<300?i:null)},i.send(null)},d3.text=function(t,e,n){function i(t){n(t&&t.responseText)}arguments.length<3&&(n=e,e=null),d3.xhr(t,e,i)},d3.json=function(t,e){d3.text(t,"application/json",function(t){e(t?JSON.parse(t):null)})},d3.html=function(t,e){d3.text(t,"text/html",function(t){if(null!=t){var n=document.createRange();n.selectNode(document.body),t=n.createContextualFragment(t)}e(t)})},d3.xml=function(t,e,n){function i(t){n(t&&t.responseXML)}arguments.length<3&&(n=e,e=null),d3.xhr(t,e,i)};var Ar={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};d3.ns={prefix:Ar,qualify:function(t){var e=t.indexOf(":"),n=t;return e>=0&&(n=t.substring(0,e),t=t.substring(e+1)),Ar.hasOwnProperty(n)?{space:Ar[n],local:t}:t}},d3.dispatch=function(){for(var t=new h,e=-1,n=arguments.length;++e<n;)t[arguments[e]]=p(t);return t},h.prototype.on=function(t,e){var n=t.indexOf("."),i="";return n>0&&(i=t.substring(n+1),t=t.substring(0,n)),arguments.length<2?this[t].on(i):this[t].on(i,e)},d3.format=function(t){var e=Or.exec(t),n=e[1]||" ",i=e[3]||"",r=e[5],o=+e[6],s=e[7],a=e[8],l=e[9],u=1,c="",h=!1;switch(a&&(a=+a.substring(1)),r&&(n="0",s&&(o-=Math.floor((o-1)/4))),l){case"n":s=!0,l="g";break;case"%":u=100,c="%",l="f";break;case"p":u=100,c="%",l="r";break;case"d":h=!0,a=0;break;case"s":u=-1,l="r"}return"r"!=l||a||(l="g"),l=Nr.get(l)||m,function(t){if(h&&t%1)return"";var e=0>t&&(t=-t)?"−":i;if(0>u){var p=d3.formatPrefix(t,a);t*=p.scale,c=p.symbol}else t*=u;if(t=l(t,a),r){var f=t.length+e.length;o>f&&(t=new Array(o-f+1).join(n)+t),s&&(t=g(t)),t=e+t}else{s&&(t=g(t)),t=e+t;var f=t.length;o>f&&(t=new Array(o-f+1).join(n)+t)}return t+c}};var Or=/(?:([^{])?([<>=^]))?([+\- ])?(#)?(0)?([0-9]+)?(,)?(\.[0-9]+)?([a-zA-Z%])?/,Nr=d3.map({g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,e){return d3.round(t,e=f(t,e)).toFixed(Math.max(0,Math.min(20,e)))}}),Dr=["y","z","a","f","p","n","μ","m","","k","M","G","T","P","E","Z","Y"].map(v);d3.formatPrefix=function(t,e){var n=0;return t&&(0>t&&(t*=-1),e&&(t=d3.round(t,f(t,e))),n=1+Math.floor(1e-12+Math.log(t)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((0>=n?n+1:n-1)/3)))),Dr[8+n/3]};/*
 * TERMS OF USE - EASING EQUATIONS
 *
 * Open source under the BSD License.
 *
 * Copyright 2001 Robert Penner
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * - Redistributions of source code must retain the above copyright notice, this
 *   list of conditions and the following disclaimer.
 *
 * - Redistributions in binary form must reproduce the above copyright notice,
 *   this list of conditions and the following disclaimer in the documentation
 *   and/or other materials provided with the distribution.
 *
 * - Neither the name of the author nor the names of contributors may be used to
 *   endorse or promote products derived from this software without specific
 *   prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 */
var Ir=x(2),Lr=x(3),$r=function(){return _},zr=d3.map({linear:$r,poly:x,quad:function(){return Ir},cubic:function(){return Lr},sin:function(){return S},exp:function(){return k},circle:function(){return C},elastic:E,back:T,bounce:function(){return M}}),Rr=d3.map({"in":_,out:b,"in-out":w,"out-in":function(t){return w(b(t))}});d3.ease=function(t){var e=t.indexOf("-"),n=e>=0?t.substring(0,e):t,i=e>=0?t.substring(e+1):"in";return n=zr.get(n)||$r,i=Rr.get(i)||_,y(i(n.apply(null,Array.prototype.slice.call(arguments,1))))},d3.event=null,d3.interpolate=function(t,e){for(var n,i=d3.interpolators.length;--i>=0&&!(n=d3.interpolators[i](t,e)););return n},d3.interpolateNumber=function(t,e){return e-=t,function(n){return t+e*n}},d3.interpolateRound=function(t,e){return e-=t,function(n){return Math.round(t+e*n)}},d3.interpolateString=function(t,e){var n,i,r,o,s,a=0,l=0,u=[],c=[];for(Br.lastIndex=0,i=0;n=Br.exec(e);++i)n.index&&u.push(e.substring(a,l=n.index)),c.push({i:u.length,x:n[0]}),u.push(null),a=Br.lastIndex;for(a<e.length&&u.push(e.substring(a)),i=0,o=c.length;(n=Br.exec(t))&&o>i;++i)if(s=c[i],s.x==n[0]){if(s.i)if(null==u[s.i+1])for(u[s.i-1]+=s.x,u.splice(s.i,1),r=i+1;o>r;++r)c[r].i--;else for(u[s.i-1]+=s.x+u[s.i+1],u.splice(s.i,2),r=i+1;o>r;++r)c[r].i-=2;else if(null==u[s.i+1])u[s.i]=s.x;else for(u[s.i]=s.x+u[s.i+1],u.splice(s.i+1,1),r=i+1;o>r;++r)c[r].i--;c.splice(i,1),o--,i--}else s.x=d3.interpolateNumber(parseFloat(n[0]),parseFloat(s.x));for(;o>i;)s=c.pop(),null==u[s.i+1]?u[s.i]=s.x:(u[s.i]=s.x+u[s.i+1],u.splice(s.i+1,1)),o--;return 1===u.length?null==u[0]?c[0].x:function(){return e}:function(t){for(i=0;o>i;++i)u[(s=c[i]).i]=s.x(t);return u.join("")}},d3.interpolateTransform=function(t,e){var n,i=[],r=[],o=d3.transform(t),s=d3.transform(e),a=o.translate,l=s.translate,u=o.rotate,c=s.rotate,h=o.skew,p=s.skew,f=o.scale,d=s.scale;return a[0]!=l[0]||a[1]!=l[1]?(i.push("translate(",null,",",null,")"),r.push({i:1,x:d3.interpolateNumber(a[0],l[0])},{i:3,x:d3.interpolateNumber(a[1],l[1])})):l[0]||l[1]?i.push("translate("+l+")"):i.push(""),u!=c?r.push({i:i.push(i.pop()+"rotate(",null,")")-2,x:d3.interpolateNumber(u,c)}):c&&i.push(i.pop()+"rotate("+c+")"),h!=p?r.push({i:i.push(i.pop()+"skewX(",null,")")-2,x:d3.interpolateNumber(h,p)}):p&&i.push(i.pop()+"skewX("+p+")"),f[0]!=d[0]||f[1]!=d[1]?(n=i.push(i.pop()+"scale(",null,",",null,")"),r.push({i:n-4,x:d3.interpolateNumber(f[0],d[0])},{i:n-2,x:d3.interpolateNumber(f[1],d[1])})):(1!=d[0]||1!=d[1])&&i.push(i.pop()+"scale("+d+")"),n=r.length,function(t){for(var e,o=-1;++o<n;)i[(e=r[o]).i]=e.x(t);return i.join("")}},d3.interpolateRgb=function(t,e){t=d3.rgb(t),e=d3.rgb(e);var n=t.r,i=t.g,r=t.b,o=e.r-n,s=e.g-i,a=e.b-r;return function(t){return"#"+z(Math.round(n+o*t))+z(Math.round(i+s*t))+z(Math.round(r+a*t))}},d3.interpolateHsl=function(t,e){t=d3.hsl(t),e=d3.hsl(e);var n=t.h,i=t.s,r=t.l,o=e.h-n,s=e.s-i,a=e.l-r;return function(t){return U(n+o*t,i+s*t,r+a*t).toString()}},d3.interpolateArray=function(t,e){var n,i=[],r=[],o=t.length,s=e.length,a=Math.min(t.length,e.length);for(n=0;a>n;++n)i.push(d3.interpolate(t[n],e[n]));for(;o>n;++n)r[n]=t[n];for(;s>n;++n)r[n]=e[n];return function(t){for(n=0;a>n;++n)r[n]=i[n](t);return r}},d3.interpolateObject=function(t,e){var n,i={},r={};for(n in t)n in e?i[n]=N(n)(t[n],e[n]):r[n]=t[n];for(n in e)n in t||(r[n]=e[n]);return function(t){for(n in i)r[n]=i[n](t);return r}};var Br=/[-+]?(?:\d*\.?\d+)(?:[eE][-+]?\d+)?/g;d3.interpolators=[d3.interpolateObject,function(t,e){return e instanceof Array&&d3.interpolateArray(t,e)},function(t,e){return("string"==typeof t||"string"==typeof e)&&d3.interpolateString(t+"",e+"")},function(t,e){return("string"==typeof e?Fr.has(e)||/^(#|rgb\(|hsl\()/.test(e):e instanceof $||e instanceof j)&&d3.interpolateRgb(t,e)},function(t,e){return!isNaN(t=+t)&&!isNaN(e=+e)&&d3.interpolateNumber(t,e)}],d3.rgb=function(t,e,n){return 1===arguments.length?t instanceof $?L(t.r,t.g,t.b):R(""+t,L,U):L(~~t,~~e,~~n)},$.prototype.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,i=this.b,r=30;return e||n||i?(e&&r>e&&(e=r),n&&r>n&&(n=r),i&&r>i&&(i=r),L(Math.min(255,Math.floor(e/t)),Math.min(255,Math.floor(n/t)),Math.min(255,Math.floor(i/t)))):L(r,r,r)},$.prototype.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),L(Math.floor(t*this.r),Math.floor(t*this.g),Math.floor(t*this.b))},$.prototype.hsl=function(){return B(this.r,this.g,this.b)},$.prototype.toString=function(){return"#"+z(this.r)+z(this.g)+z(this.b)};var Fr=d3.map({aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"});Fr.forEach(function(t,e){Fr.set(t,R(e,L,U))}),d3.hsl=function(t,e,n){return 1===arguments.length?t instanceof j?V(t.h,t.s,t.l):R(""+t,B,V):V(+t,+e,+n)},j.prototype.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),V(this.h,this.s,this.l/t)},j.prototype.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),V(this.h,this.s,t*this.l)},j.prototype.rgb=function(){return U(this.h,this.s,this.l)},j.prototype.toString=function(){return this.rgb().toString()};var Vr=function(t,e){return e.querySelector(t)},jr=function(t,e){return e.querySelectorAll(t)},Ur=document.documentElement,Hr=Ur.matchesSelector||Ur.webkitMatchesSelector||Ur.mozMatchesSelector||Ur.msMatchesSelector||Ur.oMatchesSelector,qr=function(t,e){return Hr.call(t,e)};"function"==typeof Sizzle&&(Vr=function(t,e){return Sizzle(t,e)[0]},jr=function(t,e){return Sizzle.uniqueSort(Sizzle(t,e))},qr=Sizzle.matchesSelector);var Wr=[];d3.selection=function(){return Yr},d3.selection.prototype=Wr,Wr.select=function(t){var e,n,i,r,o=[];"function"!=typeof t&&(t=q(t));for(var s=-1,a=this.length;++s<a;){o.push(e=[]),e.parentNode=(i=this[s]).parentNode;for(var l=-1,u=i.length;++l<u;)(r=i[l])?(e.push(n=t.call(r,r.__data__,l)),n&&"__data__"in r&&(n.__data__=r.__data__)):e.push(null)}return H(o)},Wr.selectAll=function(t){var e,n,i=[];"function"!=typeof t&&(t=W(t));for(var r=-1,o=this.length;++r<o;)for(var s=this[r],a=-1,l=s.length;++a<l;)(n=s[a])&&(i.push(e=Sr(t.call(n,n.__data__,a))),e.parentNode=n);return H(i)},Wr.attr=function(t,e){function n(){this.removeAttribute(t)}function i(){this.removeAttributeNS(t.space,t.local)}function r(){this.setAttribute(t,e)}function o(){this.setAttributeNS(t.space,t.local,e)}function s(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}function a(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}if(t=d3.ns.qualify(t),arguments.length<2){var l=this.node();return t.local?l.getAttributeNS(t.space,t.local):l.getAttribute(t)}return this.each(null==e?t.local?i:n:"function"==typeof e?t.local?a:s:t.local?o:r)},Wr.classed=function(t,e){var n=t.split(Jr),i=n.length,r=-1;if(arguments.length>1){for(;++r<i;)J.call(this,n[r],e);return this}for(;++r<i;)if(!J.call(this,n[r]))return!1;return!0};var Jr=/\s+/g;Wr.style=function(t,e,n){function i(){this.style.removeProperty(t)}function r(){this.style.setProperty(t,e,n)}function o(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n)}return arguments.length<3&&(n=""),arguments.length<2?window.getComputedStyle(this.node(),null).getPropertyValue(t):this.each(null==e?i:"function"==typeof e?o:r)},Wr.property=function(t,e){function n(){delete this[t]}function i(){this[t]=e}function r(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}return arguments.length<2?this.node()[t]:this.each(null==e?n:"function"==typeof e?r:i)},Wr.text=function(t){return arguments.length<1?this.node().textContent:this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t})},Wr.html=function(t){return arguments.length<1?this.node().innerHTML:this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t})},Wr.append=function(t){function e(){return this.appendChild(document.createElementNS(this.namespaceURI,t))}function n(){return this.appendChild(document.createElementNS(t.space,t.local))}return t=d3.ns.qualify(t),this.select(t.local?n:e)},Wr.insert=function(t,e){function n(){return this.insertBefore(document.createElementNS(this.namespaceURI,t),Vr(e,this))}function i(){return this.insertBefore(document.createElementNS(t.space,t.local),Vr(e,this))}return t=d3.ns.qualify(t),this.select(t.local?i:n)},Wr.remove=function(){return this.each(function(){var t=this.parentNode;t&&t.removeChild(this)})},Wr.data=function(t,e){function n(t,n){var r,o,s,a=t.length,h=n.length,p=Math.min(a,h),f=Math.max(a,h),d=[],m=[],g=[];if(e){var v,y=new i,b=[],w=n.length;for(r=-1;++r<a;)v=e.call(o=t[r],o.__data__,r),y.has(v)?g[w++]=o:y.set(v,o),b.push(v);for(r=-1;++r<h;)v=e.call(n,s=n[r],r),y.has(v)?(d[r]=o=y.get(v),o.__data__=s,m[r]=g[r]=null):(m[r]=Y(s),d[r]=g[r]=null),y.remove(v);for(r=-1;++r<a;)y.has(b[r])&&(g[r]=t[r])}else{for(r=-1;++r<p;)o=t[r],s=n[r],o?(o.__data__=s,d[r]=o,m[r]=g[r]=null):(m[r]=Y(s),d[r]=g[r]=null);for(;h>r;++r)m[r]=Y(n[r]),d[r]=g[r]=null;for(;f>r;++r)g[r]=t[r],m[r]=d[r]=null}m.update=d,m.parentNode=d.parentNode=g.parentNode=t.parentNode,l.push(m),u.push(d),c.push(g)}var r,o,s=-1,a=this.length;if(!arguments.length){for(t=new Array(a=(r=this[0]).length);++s<a;)(o=r[s])&&(t[s]=o.__data__);return t}var l=X([]),u=H([]),c=H([]);if("function"==typeof t)for(;++s<a;)n(r=this[s],t.call(r,r.parentNode.__data__,s));else for(;++s<a;)n(r=this[s],t);return u.enter=function(){return l},u.exit=function(){return c},u},Wr.datum=Wr.map=function(t){return arguments.length<1?this.property("__data__"):this.property("__data__",t)},Wr.filter=function(t){var e,n,i,r=[];"function"!=typeof t&&(t=K(t));for(var o=0,s=this.length;s>o;o++){r.push(e=[]),e.parentNode=(n=this[o]).parentNode;for(var a=0,l=n.length;l>a;a++)(i=n[a])&&t.call(i,i.__data__,a)&&e.push(i)}return H(r)},Wr.order=function(){for(var t=-1,e=this.length;++t<e;)for(var n,i=this[t],r=i.length-1,o=i[r];--r>=0;)(n=i[r])&&(o&&o!==n.nextSibling&&o.parentNode.insertBefore(n,o),o=n);return this},Wr.sort=function(t){t=G.apply(this,arguments);for(var e=-1,n=this.length;++e<n;)this[e].sort(t);return this.order()},Wr.on=function(t,e,n){arguments.length<3&&(n=!1);var i="__on"+t,r=t.indexOf(".");return r>0&&(t=t.substring(0,r)),arguments.length<2?(r=this.node()[i])&&r._:this.each(function(r,o){function s(t){var n=d3.event;d3.event=t;try{e.call(a,a.__data__,o)}finally{d3.event=n}}var a=this,l=a[i];l&&(a.removeEventListener(t,l,l.$),delete a[i]),e&&(a.addEventListener(t,a[i]=s,s.$=n),s._=e)})},Wr.each=function(t){for(var e=-1,n=this.length;++e<n;)for(var i=this[e],r=-1,o=i.length;++r<o;){var s=i[r];s&&t.call(s,s.__data__,r,e)}return this},Wr.call=function(t){return t.apply(this,(arguments[0]=this,arguments)),this},Wr.empty=function(){return!this.node()},Wr.node=function(){for(var t=0,e=this.length;e>t;t++)for(var n=this[t],i=0,r=n.length;r>i;i++){var o=n[i];if(o)return o}return null},Wr.transition=function(){for(var t,e,n=[],i=-1,r=this.length;++i<r;){n.push(t=[]);for(var o=this[i],s=-1,a=o.length;++s<a;)t.push((e=o[s])?{node:e,delay:0,duration:250}:null)}return Q(n,Zr||++Qr,Date.now())};var Yr=H([[document]]);Yr[0].parentNode=Ur,d3.select=function(t){return"string"==typeof t?Yr.select(t):H([[t]])},d3.selectAll=function(t){return"string"==typeof t?Yr.selectAll(t):H([Sr(t)])};var Kr=[];d3.selection.enter=X,d3.selection.enter.prototype=Kr,Kr.append=Wr.append,Kr.insert=Wr.insert,Kr.empty=Wr.empty,Kr.node=Wr.node,Kr.select=function(t){for(var e,n,i,r,o,s=[],a=-1,l=this.length;++a<l;){i=(r=this[a]).update,s.push(e=[]),e.parentNode=r.parentNode;for(var u=-1,c=r.length;++u<c;)(o=r[u])?(e.push(i[u]=n=t.call(r.parentNode,o.__data__,u)),n.__data__=o.__data__):e.push(null)}return H(s)};var Gr={},Xr=[],Qr=0,Zr=0,to=d3.ease("cubic-in-out");Xr.call=Wr.call,d3.transition=function(){return Yr.transition()},d3.transition.prototype=Xr,Xr.select=function(t){var e,n,i,r=[];"function"!=typeof t&&(t=q(t));for(var o=-1,s=this.length;++o<s;){r.push(e=[]);for(var a=this[o],l=-1,u=a.length;++l<u;)(i=a[l])&&(n=t.call(i.node,i.node.__data__,l))?("__data__"in i.node&&(n.__data__=i.node.__data__),e.push({node:n,delay:i.delay,duration:i.duration})):e.push(null)}return Q(r,this.id,this.time).ease(this.ease())},Xr.selectAll=function(t){var e,n,i,r=[];"function"!=typeof t&&(t=W(t));for(var o=-1,s=this.length;++o<s;)for(var a=this[o],l=-1,u=a.length;++l<u;)if(i=a[l]){n=t.call(i.node,i.node.__data__,l),r.push(e=[]);for(var c=-1,h=n.length;++c<h;)e.push({node:n[c],delay:i.delay,duration:i.duration})}return Q(r,this.id,this.time).ease(this.ease())},Xr.attr=function(t,e){return this.attrTween(t,te(t,e))},Xr.attrTween=function(t,e){function n(t,n){var i=e.call(this,t,n,this.getAttribute(r));return i===Gr?(this.removeAttribute(r),null):i&&function(t){this.setAttribute(r,i(t))}}function i(t,n){var i=e.call(this,t,n,this.getAttributeNS(r.space,r.local));return i===Gr?(this.removeAttributeNS(r.space,r.local),null):i&&function(t){this.setAttributeNS(r.space,r.local,i(t))}}var r=d3.ns.qualify(t);return this.tween("attr."+t,r.local?i:n)},Xr.style=function(t,e,n){return arguments.length<3&&(n=""),this.styleTween(t,te(t,e),n)},Xr.styleTween=function(t,e,n){return arguments.length<3&&(n=""),this.tween("style."+t,function(i,r){var o=e.call(this,i,r,window.getComputedStyle(this,null).getPropertyValue(t));return o===Gr?(this.style.removeProperty(t),null):o&&function(e){this.style.setProperty(t,o(e),n)}})},Xr.text=function(t){return this.tween("text",function(e,n){this.textContent="function"==typeof t?t.call(this,e,n):t})},Xr.remove=function(){return this.each("end.transition",function(){var t;!this.__transition__&&(t=this.parentNode)&&t.removeChild(this)})},Xr.delay=function(t){var e=this;return e.each("function"==typeof t?function(n,i,r){e[r][i].delay=0|t.apply(this,arguments)}:(t=0|t,function(n,i,r){e[r][i].delay=t}))},Xr.duration=function(t){var e=this;return e.each("function"==typeof t?function(n,i,r){e[r][i].duration=Math.max(1,0|t.apply(this,arguments))}:(t=Math.max(1,0|t),function(n,i,r){e[r][i].duration=t}))},Xr.transition=function(){return this.select(r)};var eo,no,io=null;d3.timer=function(t,e,n){var i,r=!1,o=io;if(arguments.length<3){if(arguments.length<2)e=0;else if(!isFinite(e))return;n=Date.now()}for(;o;){if(o.callback===t){o.then=n,o.delay=e,r=!0;break}i=o,o=o.next}r||(io={callback:t,then:n,delay:e,next:io}),eo||(no=clearTimeout(no),eo=1,ro(ne))},d3.timer.flush=function(){for(var t,e=Date.now(),n=io;n;)t=e-n.then,n.delay||(n.flush=n.callback(t)),n=n.next;ie()};var ro=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){setTimeout(t,17)};d3.transform=function(t){var e=document.createElementNS(d3.ns.prefix.svg,"g"),n={a:1,b:0,c:0,d:1,e:0,f:0};return(d3.transform=function(t){e.setAttribute("transform",t);var i=e.transform.baseVal.consolidate();return new re(i?i.matrix:n)})(t)},re.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var oo=180/Math.PI;d3.mouse=function(t){return le(t,A())};var so=/WebKit/.test(navigator.userAgent)?-1:0;d3.touches=function(t,e){return arguments.length<2&&(e=A().touches),e?Sr(e).map(function(e){var n=le(t,e);return n.identifier=e.identifier,n}):[]},d3.scale={},d3.scale.linear=function(){return fe([0,1],[0,1],d3.interpolate,!1)},d3.scale.log=function(){return _e(d3.scale.linear(),xe)};var ao=d3.format(".0e");xe.pow=function(t){return Math.pow(10,t)},Se.pow=function(t){return-Math.pow(10,-t)},d3.scale.pow=function(){return ke(d3.scale.linear(),1)},d3.scale.sqrt=function(){return d3.scale.pow().exponent(.5)},d3.scale.ordinal=function(){return Ee([],{t:"range",x:[]})},d3.scale.category10=function(){return d3.scale.ordinal().range(lo)},d3.scale.category20=function(){return d3.scale.ordinal().range(uo)},d3.scale.category20b=function(){return d3.scale.ordinal().range(co)},d3.scale.category20c=function(){return d3.scale.ordinal().range(ho)};var lo=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],uo=["#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"],co=["#393b79","#5254a3","#6b6ecf","#9c9ede","#637939","#8ca252","#b5cf6b","#cedb9c","#8c6d31","#bd9e39","#e7ba52","#e7cb94","#843c39","#ad494a","#d6616b","#e7969c","#7b4173","#a55194","#ce6dbd","#de9ed6"],ho=["#3182bd","#6baed6","#9ecae1","#c6dbef","#e6550d","#fd8d3c","#fdae6b","#fdd0a2","#31a354","#74c476","#a1d99b","#c7e9c0","#756bb1","#9e9ac8","#bcbddc","#dadaeb","#636363","#969696","#bdbdbd","#d9d9d9"];d3.scale.quantile=function(){return Te([],[])},d3.scale.quantize=function(){return Me(0,1,[0,1])},d3.scale.identity=function(){return Pe([0,1])},d3.svg={},d3.svg.arc=function(){function t(){var t=e.apply(this,arguments),o=n.apply(this,arguments),s=i.apply(this,arguments)+po,a=r.apply(this,arguments)+po,l=(s>a&&(l=s,s=a,a=l),a-s),u=l<Math.PI?"0":"1",c=Math.cos(s),h=Math.sin(s),p=Math.cos(a),f=Math.sin(a);return l>=fo?t?"M0,"+o+"A"+o+","+o+" 0 1,1 0,"+-o+"A"+o+","+o+" 0 1,1 0,"+o+"M0,"+t+"A"+t+","+t+" 0 1,0 0,"+-t+"A"+t+","+t+" 0 1,0 0,"+t+"Z":"M0,"+o+"A"+o+","+o+" 0 1,1 0,"+-o+"A"+o+","+o+" 0 1,1 0,"+o+"Z":t?"M"+o*c+","+o*h+"A"+o+","+o+" 0 "+u+",1 "+o*p+","+o*f+"L"+t*p+","+t*f+"A"+t+","+t+" 0 "+u+",0 "+t*c+","+t*h+"Z":"M"+o*c+","+o*h+"A"+o+","+o+" 0 "+u+",1 "+o*p+","+o*f+"L0,0"+"Z"}var e=Ae,n=Oe,i=Ne,r=De;return t.innerRadius=function(n){return arguments.length?(e=d3.functor(n),t):e},t.outerRadius=function(e){return arguments.length?(n=d3.functor(e),t):n},t.startAngle=function(e){return arguments.length?(i=d3.functor(e),t):i},t.endAngle=function(e){return arguments.length?(r=d3.functor(e),t):r},t.centroid=function(){var t=(e.apply(this,arguments)+n.apply(this,arguments))/2,o=(i.apply(this,arguments)+r.apply(this,arguments))/2+po;return[Math.cos(o)*t,Math.sin(o)*t]},t};var po=-Math.PI/2,fo=2*Math.PI-1e-6;d3.svg.line=function(){return Ie(Object)};var mo="linear",go=d3.map({linear:Re,"step-before":Be,"step-after":Fe,basis:We,"basis-open":Je,"basis-closed":Ye,bundle:Ke,cardinal:Ue,"cardinal-open":Ve,"cardinal-closed":je,monotone:en}),vo=[0,2/3,1/3,0],yo=[0,1/3,2/3,0],bo=[0,1/6,2/3,1/6];d3.svg.line.radial=function(){var t=Ie(nn);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},Be.reverse=Fe,Fe.reverse=Be,d3.svg.area=function(){return rn(Object)},d3.svg.area.radial=function(){var t=rn(nn);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},d3.svg.chord=function(){function t(t,a){var l=e(this,o,t,a),u=e(this,s,t,a);return"M"+l.p0+i(l.r,l.p1,l.a1-l.a0)+(n(l,u)?r(l.r,l.p1,l.r,l.p0):r(l.r,l.p1,u.r,u.p0)+i(u.r,u.p1,u.a1-u.a0)+r(u.r,u.p1,l.r,l.p0))+"Z"}function e(t,e,n,i){var r=e.call(t,n,i),o=a.call(t,r,i),s=l.call(t,r,i)+po,c=u.call(t,r,i)+po;return{r:o,a0:s,a1:c,p0:[o*Math.cos(s),o*Math.sin(s)],p1:[o*Math.cos(c),o*Math.sin(c)]}}function n(t,e){return t.a0==e.a0&&t.a1==e.a1}function i(t,e,n){return"A"+t+","+t+" 0 "+ +(n>Math.PI)+",1 "+e}function r(t,e,n,i){return"Q 0,0 "+i}var o=an,s=ln,a=un,l=Ne,u=De;return t.radius=function(e){return arguments.length?(a=d3.functor(e),t):a},t.source=function(e){return arguments.length?(o=d3.functor(e),t):o},t.target=function(e){return arguments.length?(s=d3.functor(e),t):s},t.startAngle=function(e){return arguments.length?(l=d3.functor(e),t):l},t.endAngle=function(e){return arguments.length?(u=d3.functor(e),t):u},t},d3.svg.diagonal=function(){function t(t,r){var o=e.call(this,t,r),s=n.call(this,t,r),a=(o.y+s.y)/2,l=[o,{x:o.x,y:a},{x:s.x,y:a},s];return l=l.map(i),"M"+l[0]+"C"+l[1]+" "+l[2]+" "+l[3]}var e=an,n=ln,i=cn;return t.source=function(n){return arguments.length?(e=d3.functor(n),t):e},t.target=function(e){return arguments.length?(n=d3.functor(e),t):n},t.projection=function(e){return arguments.length?(i=e,t):i},t},d3.svg.diagonal.radial=function(){var t=d3.svg.diagonal(),e=cn,n=t.projection;return t.projection=function(t){return arguments.length?n(hn(e=t)):e},t},d3.svg.mouse=d3.mouse,d3.svg.touches=d3.touches,d3.svg.symbol=function(){function t(t,i){return(wo.get(e.call(this,t,i))||dn)(n.call(this,t,i))}var e=fn,n=pn;return t.type=function(n){return arguments.length?(e=d3.functor(n),t):e},t.size=function(e){return arguments.length?(n=d3.functor(e),t):n},t};var wo=d3.map({circle:dn,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*xo)),n=e*xo;return"M0,"+-e+"L"+n+",0"+" 0,"+e+" "+-n+",0"+"Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/_o),n=e*_o/2;return"M0,"+n+"L"+e+","+-n+" "+-e+","+-n+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/_o),n=e*_o/2;return"M0,"+-n+"L"+e+","+n+" "+-e+","+n+"Z"}});d3.svg.symbolTypes=wo.keys();var _o=Math.sqrt(3),xo=Math.tan(30*Math.PI/180);d3.svg.axis=function(){function t(t){t.each(function(h,p,f){var d,m=d3.select(this),g=t.delay?function(e){var n=Zr;try{return Zr=t.id,e.transition().delay(t[f][p].delay).duration(t[f][p].duration).ease(t.ease())}finally{Zr=n}}:Object,v=null==u?n.ticks?n.ticks.apply(n,l):n.domain():u,y=null==e?n.tickFormat?n.tickFormat.apply(n,l):String:e,b=vn(n,v,c),w=m.selectAll(".minor").data(b,String),_=w.enter().insert("line","g").attr("class","tick minor").style("opacity",1e-6),x=g(w.exit()).style("opacity",1e-6).remove(),S=g(w).style("opacity",1),k=m.selectAll("g").data(v,String),C=k.enter().insert("g","path").style("opacity",1e-6),E=g(k.exit()).style("opacity",1e-6).remove(),T=g(k).style("opacity",1),M=ce(n),P=m.selectAll(".domain").data([0]),A=(P.enter().append("path").attr("class","domain"),g(P)),O=n.copy(),N=this.__chart__||O;switch(this.__chart__=O,C.append("line").attr("class","tick"),C.append("text"),T.select("text").text(y),i){case"bottom":d=mn,_.attr("y2",o),S.attr("x2",0).attr("y2",o),C.select("line").attr("y2",r),C.select("text").attr("y",Math.max(r,0)+a),T.select("line").attr("x2",0).attr("y2",r),T.select("text").attr("x",0).attr("y",Math.max(r,0)+a).attr("dy",".71em").attr("text-anchor","middle"),A.attr("d","M"+M[0]+","+s+"V0H"+M[1]+"V"+s);break;case"top":d=mn,_.attr("y2",-o),S.attr("x2",0).attr("y2",-o),C.select("line").attr("y2",-r),C.select("text").attr("y",-(Math.max(r,0)+a)),T.select("line").attr("x2",0).attr("y2",-r),T.select("text").attr("x",0).attr("y",-(Math.max(r,0)+a)).attr("dy","0em").attr("text-anchor","middle"),A.attr("d","M"+M[0]+","+-s+"V0H"+M[1]+"V"+-s);break;case"left":d=gn,_.attr("x2",-o),S.attr("x2",-o).attr("y2",0),C.select("line").attr("x2",-r),C.select("text").attr("x",-(Math.max(r,0)+a)),T.select("line").attr("x2",-r).attr("y2",0),T.select("text").attr("x",-(Math.max(r,0)+a)).attr("y",0).attr("dy",".32em").attr("text-anchor","end"),A.attr("d","M"+-s+","+M[0]+"H0V"+M[1]+"H"+-s);break;case"right":d=gn,_.attr("x2",o),S.attr("x2",o).attr("y2",0),C.select("line").attr("x2",r),C.select("text").attr("x",Math.max(r,0)+a),T.select("line").attr("x2",r).attr("y2",0),T.select("text").attr("x",Math.max(r,0)+a).attr("y",0).attr("dy",".32em").attr("text-anchor","start"),A.attr("d","M"+s+","+M[0]+"H0V"+M[1]+"H"+s)}if(n.ticks)C.call(d,N),T.call(d,O),E.call(d,O),_.call(d,N),S.call(d,O),x.call(d,O);else{var D=O.rangeBand()/2,I=function(t){return O(t)+D};C.call(d,I),T.call(d,I)}})}var e,n=d3.scale.linear(),i="bottom",r=6,o=6,s=6,a=3,l=[10],u=null,c=0;return t.scale=function(e){return arguments.length?(n=e,t):n},t.orient=function(e){return arguments.length?(i=e,t):i},t.ticks=function(){return arguments.length?(l=arguments,t):l},t.tickValues=function(e){return arguments.length?(u=e,t):u},t.tickFormat=function(n){return arguments.length?(e=n,t):e},t.tickSize=function(e,n){if(!arguments.length)return r;var i=arguments.length-1;return r=+e,o=i>1?+n:r,s=i>0?+arguments[i]:r,t},t.tickPadding=function(e){return arguments.length?(a=+e,t):a},t.tickSubdivide=function(e){return arguments.length?(c=+e,t):c},t},d3.svg.brush=function(){function t(a){a.each(function(){var a,u=d3.select(this),c=u.selectAll(".background").data([0]),h=u.selectAll(".extent").data([0]),p=u.selectAll(".resize").data(l,String);u.style("pointer-events","all").on("mousedown.brush",r).on("touchstart.brush",r),c.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),h.enter().append("rect").attr("class","extent").style("cursor","move"),p.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return So[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),p.style("display",t.empty()?"none":null),p.exit().remove(),o&&(a=ce(o),c.attr("x",a[0]).attr("width",a[1]-a[0]),n(u)),s&&(a=ce(s),c.attr("y",a[0]).attr("height",a[1]-a[0]),i(u)),e(u)})}function e(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+u[+/e$/.test(t)][0]+","+u[+/^s/.test(t)][1]+")"})}function n(t){t.select(".extent").attr("x",u[0][0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",u[1][0]-u[0][0])}function i(t){t.select(".extent").attr("y",u[0][1]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",u[1][1]-u[0][1])}function r(){function r(){var t=d3.event.changedTouches;return t?d3.touches(g,t)[0]:d3.mouse(g)}function l(){32==d3.event.keyCode&&(S||(d=null,k[0]-=u[1][0],k[1]-=u[1][1],S=2),P())}function c(){32==d3.event.keyCode&&2==S&&(k[0]+=u[1][0],k[1]+=u[1][1],S=0,P())}function h(){var t=r(),a=!1;m&&(t[0]+=m[0],t[1]+=m[1]),S||(d3.event.altKey?(d||(d=[(u[0][0]+u[1][0])/2,(u[0][1]+u[1][1])/2]),k[0]=u[+(t[0]<d[0])][0],k[1]=u[+(t[1]<d[1])][1]):d=null),_&&p(t,o,0)&&(n(b),a=!0),x&&p(t,s,1)&&(i(b),a=!0),a&&(e(b),y({type:"brush"}))}function p(t,e,n){var i,r,o=ce(e),s=o[0],a=o[1],l=k[n],c=u[1][n]-u[0][n];return S&&(s-=l,a-=c+l),i=Math.max(s,Math.min(a,t[n])),S?r=(i+=l)+c:(d&&(l=Math.max(s,Math.min(a,2*d[n]-i))),i>l?(r=i,i=l):r=l),u[0][n]!==i||u[1][n]!==r?(u[0][n]=i,u[1][n]=r,!0):void 0}function f(){h(),b.style("pointer-events","all").selectAll(".resize").style("display",t.empty()?"none":null),d3.select("body").style("cursor",null),C.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),y({type:"brushend"}),P()}var d,m,g=this,v=d3.select(d3.event.target),y=a.of(g,arguments),b=d3.select(g),w=v.datum(),_=!/^(n|s)$/.test(w)&&o,x=!/^(e|w)$/.test(w)&&s,S=v.classed("extent"),k=r(),C=d3.select(window).on("mousemove.brush",h).on("mouseup.brush",f).on("touchmove.brush",h).on("touchend.brush",f).on("keydown.brush",l).on("keyup.brush",c);if(S)k[0]=u[0][0]-k[0],k[1]=u[0][1]-k[1];else if(w){var E=+/w$/.test(w),T=+/^n/.test(w);m=[u[1-E][0]-k[0],u[1-T][1]-k[1]],k[0]=u[E][0],k[1]=u[T][1]}else d3.event.altKey&&(d=k.slice());b.style("pointer-events","none").selectAll(".resize").style("display",null),d3.select("body").style("cursor",v.style("cursor")),y({type:"brushstart"}),h(),P()}var o,s,a=O(t,"brushstart","brush","brushend"),l=ko[0],u=[[0,0],[0,0]];return t.x=function(e){return arguments.length?(o=e,l=ko[!o<<1|!s],t):o},t.y=function(e){return arguments.length?(s=e,l=ko[!o<<1|!s],t):s},t.extent=function(e){var n,i,r,a,l;return arguments.length?(o&&(n=e[0],i=e[1],s&&(n=n[0],i=i[0]),o.invert&&(n=o(n),i=o(i)),n>i&&(l=n,n=i,i=l),u[0][0]=n,u[1][0]=i),s&&(r=e[0],a=e[1],o&&(r=r[1],a=a[1]),s.invert&&(r=s(r),a=s(a)),r>a&&(l=r,r=a,a=l),u[0][1]=r,u[1][1]=a),t):(o&&(n=u[0][0],i=u[1][0],o.invert&&(n=o.invert(n),i=o.invert(i)),n>i&&(l=n,n=i,i=l)),s&&(r=u[0][1],a=u[1][1],s.invert&&(r=s.invert(r),a=s.invert(a)),r>a&&(l=r,r=a,a=l)),o&&s?[[n,r],[i,a]]:o?[n,i]:s&&[r,a])},t.clear=function(){return u[0][0]=u[0][1]=u[1][0]=u[1][1]=0,t},t.empty=function(){return o&&u[0][0]===u[1][0]||s&&u[0][1]===u[1][1]},d3.rebind(t,a,"on")};var So={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},ko=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];d3.behavior={},d3.behavior.drag=function(){function t(){this.on("mousedown.drag",e).on("touchstart.drag",e)}function e(){function t(){var t=a.parentNode,e=d3.event.changedTouches;return e?d3.touches(t,e)[0]:d3.mouse(t)}function e(){if(!a.parentNode)return r();var e=t(),n=e[0]-c[0],i=e[1]-c[1];h|=n|i,c=e,P(),l({type:"drag",x:e[0]+s[0],y:e[1]+s[1],dx:n,dy:i})}function r(){l({type:"dragend"}),h&&(P(),d3.event.target===u&&p.on("click.drag",o,!0)),p.on("mousemove.drag",null).on("touchmove.drag",null).on("mouseup.drag",null).on("touchend.drag",null)}function o(){P(),p.on("click.drag",null)}var s,a=this,l=n.of(a,arguments),u=d3.event.target,c=t(),h=0,p=d3.select(window).on("mousemove.drag",e).on("touchmove.drag",e).on("mouseup.drag",r,!0).on("touchend.drag",r,!0);i?(s=i.apply(a,arguments),s=[s.x-c[0],s.y-c[1]]):s=[0,0],l({type:"dragstart"})}var n=O(t,"drag","dragstart","dragend"),i=null;return t.origin=function(e){return arguments.length?(i=e,t):i},d3.rebind(t,n,"on")},d3.behavior.zoom=function(){function t(){this.on("mousedown.zoom",s).on("mousewheel.zoom",a).on("mousemove.zoom",l).on("DOMMouseScroll.zoom",a).on("dblclick.zoom",u).on("touchstart.zoom",c).on("touchmove.zoom",h).on("touchend.zoom",c)}function e(t){return[(t[0]-b[0])/w,(t[1]-b[1])/w]}function n(t){return[t[0]*w+b[0],t[1]*w+b[1]]}function i(t){w=Math.max(_[0],Math.min(_[1],t))
}function r(t,e){e=n(e),b[0]+=t[0]-e[0],b[1]+=t[1]-e[1]}function o(t){m&&m.domain(d.range().map(function(t){return(t-b[0])/w}).map(d.invert)),v&&v.domain(g.range().map(function(t){return(t-b[1])/w}).map(g.invert)),d3.event.preventDefault(),t({type:"zoom",scale:w,translate:b})}function s(){function t(){u=1,r(d3.mouse(s),h),o(a)}function n(){u&&P(),c.on("mousemove.zoom",null).on("mouseup.zoom",null),u&&d3.event.target===l&&c.on("click.zoom",i)}function i(){P(),c.on("click.zoom",null)}var s=this,a=x.of(s,arguments),l=d3.event.target,u=0,c=d3.select(window).on("mousemove.zoom",t).on("mouseup.zoom",n),h=e(d3.mouse(s));window.focus(),P()}function a(){p||(p=e(d3.mouse(this))),i(Math.pow(2,.002*yn())*w),r(d3.mouse(this),p),o(x.of(this,arguments))}function l(){p=null}function u(){var t=d3.mouse(this),n=e(t);i(d3.event.shiftKey?w/2:2*w),r(t,n),o(x.of(this,arguments))}function c(){var t=d3.touches(this),n=Date.now();if(f=w,p={},t.forEach(function(t){p[t.identifier]=e(t)}),P(),1===t.length&&500>n-y){var s=t[0],a=e(t[0]);i(2*w),r(s,a),o(x.of(this,arguments))}y=n}function h(){var t=d3.touches(this),e=t[0],n=p[e.identifier];if(s=t[1]){var s,a=p[s.identifier];e=[(e[0]+s[0])/2,(e[1]+s[1])/2],n=[(n[0]+a[0])/2,(n[1]+a[1])/2],i(d3.event.scale*f)}r(e,n),o(x.of(this,arguments))}var p,f,d,m,g,v,y,b=[0,0],w=1,_=Eo,x=O(t,"zoom");return t.translate=function(e){return arguments.length?(b=e.map(Number),t):b},t.scale=function(e){return arguments.length?(w=+e,t):w},t.scaleExtent=function(e){return arguments.length?(_=null==e?Eo:e.map(Number),t):_},t.x=function(e){return arguments.length?(m=e,d=e.copy(),t):m},t.y=function(e){return arguments.length?(v=e,g=e.copy(),t):v},d3.rebind(t,x,"on")};var Co,Eo=[0,1/0];d3.layout={},d3.layout.bundle=function(){return function(t){for(var e=[],n=-1,i=t.length;++n<i;)e.push(bn(t[n]));return e}},d3.layout.chord=function(){function t(){var t,u,h,p,f,d={},m=[],g=d3.range(o),v=[];for(n=[],i=[],t=0,p=-1;++p<o;){for(u=0,f=-1;++f<o;)u+=r[p][f];m.push(u),v.push(d3.range(o)),t+=u}for(s&&g.sort(function(t,e){return s(m[t],m[e])}),a&&v.forEach(function(t,e){t.sort(function(t,n){return a(r[e][t],r[e][n])})}),t=(2*Math.PI-c*o)/t,u=0,p=-1;++p<o;){for(h=u,f=-1;++f<o;){var y=g[p],b=v[y][f],w=r[y][b],_=u,x=u+=w*t;d[y+"-"+b]={index:y,subindex:b,startAngle:_,endAngle:x,value:w}}i.push({index:y,startAngle:h,endAngle:u,value:(u-h)/t}),u+=c}for(p=-1;++p<o;)for(f=p-1;++f<o;){var S=d[p+"-"+f],k=d[f+"-"+p];(S.value||k.value)&&n.push(S.value<k.value?{source:k,target:S}:{source:S,target:k})}l&&e()}function e(){n.sort(function(t,e){return l((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}var n,i,r,o,s,a,l,u={},c=0;return u.matrix=function(t){return arguments.length?(o=(r=t)&&r.length,n=i=null,u):r},u.padding=function(t){return arguments.length?(c=t,n=i=null,u):c},u.sortGroups=function(t){return arguments.length?(s=t,n=i=null,u):s},u.sortSubgroups=function(t){return arguments.length?(a=t,n=null,u):a},u.sortChords=function(t){return arguments.length?(l=t,n&&e(),u):l},u.chords=function(){return n||t(),n},u.groups=function(){return i||t(),i},u},d3.layout.force=function(){function t(t){return function(e,n,i,r){if(e.point!==t){var o=e.cx-t.x,s=e.cy-t.y,a=1/Math.sqrt(o*o+s*s);if(m>(r-n)*a){var l=e.charge*a*a;return t.px-=o*l,t.py-=s*l,!0}if(e.point&&isFinite(a)){var l=e.pointCharge*a*a;t.px-=o*l,t.py-=s*l}}return!e.charge}}function e(t){xn(Mo=t),To=a}var n,i,r,o,s,a={},l=d3.dispatch("start","tick","end"),u=[1,1],c=.9,h=Tn,p=Mn,f=-30,d=.1,m=.8,g=[],v=[];return a.tick=function(){if((i*=.99)<.005)return l.end({type:"end",alpha:i=0}),!0;var e,n,a,h,p,m,y,b,w,_=g.length,x=v.length;for(n=0;x>n;++n)a=v[n],h=a.source,p=a.target,b=p.x-h.x,w=p.y-h.y,(m=b*b+w*w)&&(m=i*o[n]*((m=Math.sqrt(m))-r[n])/m,b*=m,w*=m,p.x-=b*(y=h.weight/(p.weight+h.weight)),p.y-=w*y,h.x+=b*(y=1-y),h.y+=w*y);if((y=i*d)&&(b=u[0]/2,w=u[1]/2,n=-1,y))for(;++n<_;)a=g[n],a.x+=(b-a.x)*y,a.y+=(w-a.y)*y;if(f)for(En(e=d3.geom.quadtree(g),i,s),n=-1;++n<_;)(a=g[n]).fixed||e.visit(t(a));for(n=-1;++n<_;)a=g[n],a.fixed?(a.x=a.px,a.y=a.py):(a.x-=(a.px-(a.px=a.x))*c,a.y-=(a.py-(a.py=a.y))*c);l.tick({type:"tick",alpha:i})},a.nodes=function(t){return arguments.length?(g=t,a):g},a.links=function(t){return arguments.length?(v=t,a):v},a.size=function(t){return arguments.length?(u=t,a):u},a.linkDistance=function(t){return arguments.length?(h=d3.functor(t),a):h},a.distance=a.linkDistance,a.linkStrength=function(t){return arguments.length?(p=d3.functor(t),a):p},a.friction=function(t){return arguments.length?(c=t,a):c},a.charge=function(t){return arguments.length?(f="function"==typeof t?t:+t,a):f},a.gravity=function(t){return arguments.length?(d=t,a):d},a.theta=function(t){return arguments.length?(m=t,a):m},a.alpha=function(t){return arguments.length?(i?i=t>0?t:0:t>0&&(l.start({type:"start",alpha:i=t}),d3.timer(a.tick)),a):i},a.start=function(){function t(t,i){for(var r,o=e(n),s=-1,a=o.length;++s<a;)if(!isNaN(r=o[s][t]))return r;return Math.random()*i}function e(){if(!l){for(l=[],i=0;d>i;++i)l[i]=[];for(i=0;m>i;++i){var t=v[i];l[t.source.index].push(t.target),l[t.target.index].push(t.source)}}return l[n]}var n,i,l,c,d=g.length,m=v.length,y=u[0],b=u[1];for(n=0;d>n;++n)(c=g[n]).index=n,c.weight=0;for(r=[],o=[],n=0;m>n;++n)c=v[n],"number"==typeof c.source&&(c.source=g[c.source]),"number"==typeof c.target&&(c.target=g[c.target]),r[n]=h.call(this,c,n),o[n]=p.call(this,c,n),++c.source.weight,++c.target.weight;for(n=0;d>n;++n)c=g[n],isNaN(c.x)&&(c.x=t("x",y)),isNaN(c.y)&&(c.y=t("y",b)),isNaN(c.px)&&(c.px=c.x),isNaN(c.py)&&(c.py=c.y);if(s=[],"function"==typeof f)for(n=0;d>n;++n)s[n]=+f.call(this,g[n],n);else for(n=0;d>n;++n)s[n]=f;return a.resume()},a.resume=function(){return a.alpha(.1)},a.stop=function(){return a.alpha(0)},a.drag=function(){n||(n=d3.behavior.drag().origin(Object).on("dragstart",e).on("drag",Cn).on("dragend",kn)),this.on("mouseover.force",xn).on("mouseout.force",Sn).call(n)},d3.rebind(a,l,"on")};var To,Mo;d3.layout.partition=function(){function t(e,n,i,r){var o=e.children;if(e.x=n,e.y=e.depth*r,e.dx=i,e.dy=r,o&&(s=o.length)){var s,a,l,u=-1;for(i=e.value?i/e.value:0;++u<s;)t(a=o[u],n,l=a.value*i,r),n+=l}}function e(t){var n=t.children,i=0;if(n&&(r=n.length))for(var r,o=-1;++o<r;)i=Math.max(i,e(n[o]));return 1+i}function n(n,o){var s=i.call(this,n,o);return t(s[0],0,r[0],r[1]/e(s[0])),s}var i=d3.layout.hierarchy(),r=[1,1];return n.size=function(t){return arguments.length?(r=t,n):r},Fn(n,i)},d3.layout.pie=function(){function t(o){var s=o.map(function(n,i){return+e.call(t,n,i)}),a=+("function"==typeof i?i.apply(this,arguments):i),l=(("function"==typeof r?r.apply(this,arguments):r)-i)/d3.sum(s),u=d3.range(o.length);null!=n&&u.sort(n===Po?function(t,e){return s[e]-s[t]}:function(t,e){return n(o[t],o[e])});var c=[];return u.forEach(function(t){c[t]={data:o[t],value:d=s[t],startAngle:a,endAngle:a+=d*l}}),c}var e=Number,n=Po,i=0,r=2*Math.PI;return t.value=function(n){return arguments.length?(e=n,t):e},t.sort=function(e){return arguments.length?(n=e,t):n},t.startAngle=function(e){return arguments.length?(i=e,t):i},t.endAngle=function(e){return arguments.length?(r=e,t):r},t};var Po={};d3.layout.stack=function(){function t(a,l){var u=a.map(function(n,i){return e.call(t,n,i)}),c=u.map(function(e){return e.map(function(e,n){return[o.call(t,e,n),s.call(t,e,n)]})}),h=n.call(t,c,l);u=d3.permute(u,h),c=d3.permute(c,h);var p,f,d,m=i.call(t,c,l),g=u.length,v=u[0].length;for(f=0;v>f;++f)for(r.call(t,u[0][f],d=m[f],c[0][f][1]),p=1;g>p;++p)r.call(t,u[p][f],d+=c[p-1][f][1],c[p][f][1]);return a}var e=Object,n=Nn,i=Dn,r=On,o=Pn,s=An;return t.values=function(n){return arguments.length?(e=n,t):e},t.order=function(e){return arguments.length?(n="function"==typeof e?e:Ao.get(e)||Nn,t):n},t.offset=function(e){return arguments.length?(i="function"==typeof e?e:Oo.get(e)||Dn,t):i},t.x=function(e){return arguments.length?(o=e,t):o},t.y=function(e){return arguments.length?(s=e,t):s},t.out=function(e){return arguments.length?(r=e,t):r},t};var Ao=d3.map({"inside-out":function(t){var e,n,i=t.length,r=t.map(In),o=t.map(Ln),s=d3.range(i).sort(function(t,e){return r[t]-r[e]}),a=0,l=0,u=[],c=[];for(e=0;i>e;++e)n=s[e],l>a?(a+=o[n],u.push(n)):(l+=o[n],c.push(n));return c.reverse().concat(u)},reverse:function(t){return d3.range(t.length).reverse()},"default":Nn}),Oo=d3.map({silhouette:function(t){var e,n,i,r=t.length,o=t[0].length,s=[],a=0,l=[];for(n=0;o>n;++n){for(e=0,i=0;r>e;e++)i+=t[e][n][1];i>a&&(a=i),s.push(i)}for(n=0;o>n;++n)l[n]=(a-s[n])/2;return l},wiggle:function(t){var e,n,i,r,o,s,a,l,u,c=t.length,h=t[0],p=h.length,f=[];for(f[0]=l=u=0,n=1;p>n;++n){for(e=0,r=0;c>e;++e)r+=t[e][n][1];for(e=0,o=0,a=h[n][0]-h[n-1][0];c>e;++e){for(i=0,s=(t[e][n][1]-t[e][n-1][1])/(2*a);e>i;++i)s+=(t[i][n][1]-t[i][n-1][1])/a;o+=s*t[e][n][1]}f[n]=l-=r?o/r*a:0,u>l&&(u=l)}for(n=0;p>n;++n)f[n]-=u;return f},expand:function(t){var e,n,i,r=t.length,o=t[0].length,s=1/r,a=[];for(n=0;o>n;++n){for(e=0,i=0;r>e;e++)i+=t[e][n][1];if(i)for(e=0;r>e;e++)t[e][n][1]/=i;else for(e=0;r>e;e++)t[e][n][1]=s}for(n=0;o>n;++n)a[n]=0;return a},zero:Dn});d3.layout.histogram=function(){function t(t,o){for(var s,a,l=[],u=t.map(n,this),c=i.call(this,u,o),h=r.call(this,c,u,o),o=-1,p=u.length,f=h.length-1,d=e?1:1/p;++o<f;)s=l[o]=[],s.dx=h[o+1]-(s.x=h[o]),s.y=0;for(o=-1;++o<p;)a=u[o],a>=c[0]&&a<=c[1]&&(s=l[d3.bisect(h,a,1,f)-1],s.y+=d,s.push(t[o]));return l}var e=!0,n=Number,i=Bn,r=zn;return t.value=function(e){return arguments.length?(n=e,t):n},t.range=function(e){return arguments.length?(i=d3.functor(e),t):i},t.bins=function(e){return arguments.length?(r="number"==typeof e?function(t){return Rn(t,e)}:d3.functor(e),t):r},t.frequency=function(n){return arguments.length?(e=!!n,t):e},t},d3.layout.hierarchy=function(){function t(e,s,a){var l=r.call(n,e,s),u=No?e:{data:e};if(u.depth=s,a.push(u),l&&(c=l.length)){for(var c,h=-1,p=u.children=[],f=0,m=s+1;++h<c;)d=t(l[h],m,a),d.parent=u,p.push(d),f+=d.value;i&&p.sort(i),o&&(u.value=f)}else o&&(u.value=+o.call(n,e,s)||0);return u}function e(t,i){var r=t.children,s=0;if(r&&(a=r.length))for(var a,l=-1,u=i+1;++l<a;)s+=e(r[l],u);else o&&(s=+o.call(n,No?t:t.data,i)||0);return o&&(t.value=s),s}function n(e){var n=[];return t(e,0,n),n}var i=Un,r=Vn,o=jn;return n.sort=function(t){return arguments.length?(i=t,n):i},n.children=function(t){return arguments.length?(r=t,n):r},n.value=function(t){return arguments.length?(o=t,n):o},n.revalue=function(t){return e(t,0),t},n};var No=!1;d3.layout.pack=function(){function t(t,i){var r=e.call(this,t,i),o=r[0];o.x=0,o.y=0,Qn(o);var s=n[0],a=n[1],l=1/Math.max(2*o.r/s,2*o.r/a);return Zn(o,s/2,a/2,l),r}var e=d3.layout.hierarchy().sort(qn),n=[1,1];return t.size=function(e){return arguments.length?(n=e,t):n},Fn(t,e)},d3.layout.cluster=function(){function t(t,r){var o,s=e.call(this,t,r),a=s[0],l=0;pi(a,function(t){var e=t.children;e&&e.length?(t.x=ni(e),t.y=ei(e)):(t.x=o?l+=n(t,o):0,t.y=0,o=t)});var u=ii(a),c=ri(a),h=u.x-n(u,c)/2,p=c.x+n(c,u)/2;return pi(a,function(t){t.x=(t.x-h)/(p-h)*i[0],t.y=(1-(a.y?t.y/a.y:1))*i[1]}),s}var e=d3.layout.hierarchy().sort(null).value(null),n=oi,i=[1,1];return t.separation=function(e){return arguments.length?(n=e,t):n},t.size=function(e){return arguments.length?(i=e,t):i},Fn(t,e)},d3.layout.tree=function(){function t(t,r){function o(t,e){var i=t.children,r=t._tree;if(i&&(s=i.length)){for(var s,l,u,c=i[0],h=c,p=-1;++p<s;)u=i[p],o(u,l),h=a(u,l,h),l=u;fi(t);var f=.5*(c._tree.prelim+u._tree.prelim);e?(r.prelim=e._tree.prelim+n(t,e),r.mod=r.prelim-f):r.prelim=f}else e&&(r.prelim=e._tree.prelim+n(t,e))}function s(t,e){t.x=t._tree.prelim+e;var n=t.children;if(n&&(i=n.length)){var i,r=-1;for(e+=t._tree.mod;++r<i;)s(n[r],e)}}function a(t,e,i){if(e){for(var r,o=t,s=t,a=e,l=t.parent.children[0],u=o._tree.mod,c=s._tree.mod,h=a._tree.mod,p=l._tree.mod;a=ai(a),o=si(o),a&&o;)l=si(l),s=ai(s),s._tree.ancestor=t,r=a._tree.prelim+h-o._tree.prelim-u+n(a,o),r>0&&(di(mi(a,t,i),t,r),u+=r,c+=r),h+=a._tree.mod,u+=o._tree.mod,p+=l._tree.mod,c+=s._tree.mod;a&&!ai(s)&&(s._tree.thread=a,s._tree.mod+=h-c),o&&!si(l)&&(l._tree.thread=o,l._tree.mod+=u-p,i=t)}return i}var l=e.call(this,t,r),u=l[0];pi(u,function(t,e){t._tree={ancestor:t,prelim:0,mod:0,change:0,shift:0,number:e?e._tree.number+1:0}}),o(u),s(u,-u._tree.prelim);var c=li(u,ci),h=li(u,ui),p=li(u,hi),f=c.x-n(c,h)/2,d=h.x+n(h,c)/2,m=p.depth||1;return pi(u,function(t){t.x=(t.x-f)/(d-f)*i[0],t.y=t.depth/m*i[1],delete t._tree}),l}var e=d3.layout.hierarchy().sort(null).value(null),n=oi,i=[1,1];return t.separation=function(e){return arguments.length?(n=e,t):n},t.size=function(e){return arguments.length?(i=e,t):i},Fn(t,e)},d3.layout.treemap=function(){function t(t,e){for(var n,i,r=-1,o=t.length;++r<o;)i=(n=t[r]).value*(0>e?0:e),n.area=isNaN(i)||0>=i?0:i}function e(n){var o=n.children;if(o&&o.length){var s,a,l,u=h(n),c=[],p=o.slice(),f=1/0,d=Math.min(u.dx,u.dy);for(t(p,u.dx*u.dy/n.value),c.area=0;(l=p.length)>0;)c.push(s=p[l-1]),c.area+=s.area,(a=i(c,d))<=f?(p.pop(),f=a):(c.area-=c.pop().area,r(c,d,u,!1),d=Math.min(u.dx,u.dy),c.length=c.area=0,f=1/0);c.length&&(r(c,d,u,!0),c.length=c.area=0),o.forEach(e)}}function n(e){var i=e.children;if(i&&i.length){var o,s=h(e),a=i.slice(),l=[];for(t(a,s.dx*s.dy/e.value),l.area=0;o=a.pop();)l.push(o),l.area+=o.area,null!=o.z&&(r(l,o.z?s.dx:s.dy,s,!a.length),l.length=l.area=0);i.forEach(n)}}function i(t,e){for(var n,i=t.area,r=0,o=1/0,s=-1,a=t.length;++s<a;)(n=t[s].area)&&(o>n&&(o=n),n>r&&(r=n));return i*=i,e*=e,i?Math.max(e*r*f/i,i/(e*o*f)):1/0}function r(t,e,n,i){var r,o=-1,s=t.length,a=n.x,u=n.y,c=e?l(t.area/e):0;if(e==n.dx){for((i||c>n.dy)&&(c=n.dy);++o<s;)r=t[o],r.x=a,r.y=u,r.dy=c,a+=r.dx=Math.min(n.x+n.dx-a,c?l(r.area/c):0);r.z=!0,r.dx+=n.x+n.dx-a,n.y+=c,n.dy-=c}else{for((i||c>n.dx)&&(c=n.dx);++o<s;)r=t[o],r.x=a,r.y=u,r.dx=c,u+=r.dy=Math.min(n.y+n.dy-u,c?l(r.area/c):0);r.z=!1,r.dy+=n.y+n.dy-u,n.x+=c,n.dx-=c}}function o(i){var r=s||a(i),o=r[0];return o.x=0,o.y=0,o.dx=u[0],o.dy=u[1],s&&a.revalue(o),t([o],o.dx*o.dy/o.value),(s?n:e)(o),p&&(s=r),r}var s,a=d3.layout.hierarchy(),l=Math.round,u=[1,1],c=null,h=gi,p=!1,f=.5*(1+Math.sqrt(5));return o.size=function(t){return arguments.length?(u=t,o):u},o.padding=function(t){function e(e){var n=t.call(o,e,e.depth);return null==n?gi(e):vi(e,"number"==typeof n?[n,n,n,n]:n)}function n(e){return vi(e,t)}if(!arguments.length)return c;var i;return h=null==(c=t)?gi:"function"==(i=typeof t)?e:"number"===i?(t=[t,t,t,t],n):n,o},o.round=function(t){return arguments.length?(l=t?Math.round:Number,o):l!=Number},o.sticky=function(t){return arguments.length?(p=t,s=null,o):p},o.ratio=function(t){return arguments.length?(f=t,o):f},Fn(o,a)},d3.csv=function(t,e){d3.text(t,"text/csv",function(t){e(t&&d3.csv.parse(t))})},d3.csv.parse=function(t){var e;return d3.csv.parseRows(t,function(t,n){if(n){for(var i={},r=-1,o=e.length;++r<o;)i[e[r]]=t[r];return i}return e=t,null})},d3.csv.parseRows=function(t,e){function n(){if(l.lastIndex>=t.length)return s;if(r)return r=!1,o;var e=l.lastIndex;if(34===t.charCodeAt(e)){for(var n=e;n++<t.length;)if(34===t.charCodeAt(n)){if(34!==t.charCodeAt(n+1))break;n++}l.lastIndex=n+2;var i=t.charCodeAt(n+1);return 13===i?(r=!0,10===t.charCodeAt(n+2)&&l.lastIndex++):10===i&&(r=!0),t.substring(e+1,n).replace(/""/g,'"')}var a=l.exec(t);return a?(r=44!==a[0].charCodeAt(0),t.substring(e,a.index)):(l.lastIndex=t.length,t.substring(e))}var i,r,o={},s={},a=[],l=/\r\n|[,\r\n]/g,u=0;for(l.lastIndex=0;(i=n())!==s;){for(var c=[];i!==o&&i!==s;)c.push(i),i=n();(!e||(c=e(c,u++)))&&a.push(c)}return a},d3.csv.format=function(t){return t.map(yi).join("\n")},d3.geo={};var Do=Math.PI/180;d3.geo.azimuthal=function(){function t(t){var e,i=t[0]*Do-n,u=t[1]*Do,c=Math.cos(i),h=Math.sin(i),p=Math.cos(u),f=Math.sin(u),d="orthographic"!==s?o*f+r*p*c:null,m="stereographic"===s?1/(1+d):"gnomonic"===s?1/d:"equidistant"===s?(e=Math.acos(d),e?e/Math.sin(e):0):"equalarea"===s?Math.sqrt(2/(1+d)):1,g=m*p*h,v=m*(o*p*c-r*f);return[a*g+l[0],a*v+l[1]]}var e,n,i,r,o,s="orthographic",a=200,l=[480,250];return t.invert=function(t){var e=(t[0]-l[0])/a,i=(t[1]-l[1])/a,u=Math.sqrt(e*e+i*i),c="stereographic"===s?2*Math.atan(u):"gnomonic"===s?Math.atan(u):"equidistant"===s?u:"equalarea"===s?2*Math.asin(.5*u):Math.asin(u),h=Math.sin(c),p=Math.cos(c);return[(n+Math.atan2(e*h,u*r*p+i*o*h))/Do,Math.asin(p*o-(u?i*h*r/u:0))/Do]},t.mode=function(e){return arguments.length?(s=e+"",t):s},t.origin=function(s){return arguments.length?(e=s,n=e[0]*Do,i=e[1]*Do,r=Math.cos(i),o=Math.sin(i),t):e},t.scale=function(e){return arguments.length?(a=+e,t):a},t.translate=function(e){return arguments.length?(l=[+e[0],+e[1]],t):l},t.origin([0,0])},d3.geo.albers=function(){function t(t){var e=i*(Do*t[0]-n),s=Math.sqrt(r-2*i*Math.sin(Do*t[1]))/i;return[l*s*Math.sin(e)+u[0],l*(s*Math.cos(e)-o)+u[1]]}function e(){var e=Do*a[0],l=Do*a[1],u=Do*s[1],c=Math.sin(e),h=Math.cos(e);return n=Do*s[0],i=.5*(c+Math.sin(l)),r=h*h+2*i*c,o=Math.sqrt(r-2*i*Math.sin(u))/i,t}var n,i,r,o,s=[-98,38],a=[29.5,45.5],l=1e3,u=[480,250];return t.invert=function(t){var e=(t[0]-u[0])/l,s=(t[1]-u[1])/l,a=o+s,c=Math.atan2(e,a),h=Math.sqrt(e*e+a*a);return[(n+c/i)/Do,Math.asin((r-h*h*i*i)/(2*i))/Do]},t.origin=function(t){return arguments.length?(s=[+t[0],+t[1]],e()):s},t.parallels=function(t){return arguments.length?(a=[+t[0],+t[1]],e()):a},t.scale=function(e){return arguments.length?(l=+e,t):l},t.translate=function(e){return arguments.length?(u=[+e[0],+e[1]],t):u},e()},d3.geo.albersUsa=function(){function t(t){var o=t[0],s=t[1];return(s>50?n:-140>o?i:21>s?r:e)(t)}var e=d3.geo.albers(),n=d3.geo.albers().origin([-160,60]).parallels([55,65]),i=d3.geo.albers().origin([-160,20]).parallels([8,18]),r=d3.geo.albers().origin([-60,10]).parallels([8,18]);return t.scale=function(o){return arguments.length?(e.scale(o),n.scale(.6*o),i.scale(o),r.scale(1.5*o),t.translate(e.translate())):e.scale()},t.translate=function(o){if(!arguments.length)return e.translate();var s=e.scale()/1e3,a=o[0],l=o[1];return e.translate(o),n.translate([a-400*s,l+170*s]),i.translate([a-190*s,l+200*s]),r.translate([a+580*s,l+430*s]),t},t.scale(e.scale())},d3.geo.bonne=function(){function t(t){var a=t[0]*Do-e,l=t[1]*Do-n;if(i){var u=r+i-l,c=a*Math.cos(l)/u;a=u*Math.sin(c),l=u*Math.cos(c)-r}else a*=Math.cos(l),l*=-1;return[o*a+s[0],o*l+s[1]]}var e,n,i,r,o=200,s=[480,250];return t.invert=function(t){var n=(t[0]-s[0])/o,a=(t[1]-s[1])/o;if(i){var l=r+a,u=Math.sqrt(n*n+l*l);a=r+i-u,n=e+u*Math.atan2(n,l)/Math.cos(a)}else a*=-1,n/=Math.cos(a);return[n/Do,a/Do]},t.parallel=function(e){return arguments.length?(r=1/Math.tan(i=e*Do),t):i/Do},t.origin=function(i){return arguments.length?(e=i[0]*Do,n=i[1]*Do,t):[e/Do,n/Do]},t.scale=function(e){return arguments.length?(o=+e,t):o},t.translate=function(e){return arguments.length?(s=[+e[0],+e[1]],t):s},t.origin([0,0]).parallel(45)},d3.geo.equirectangular=function(){function t(t){var i=t[0]/360,r=-t[1]/360;return[e*i+n[0],e*r+n[1]]}var e=500,n=[480,250];return t.invert=function(t){var i=(t[0]-n[0])/e,r=(t[1]-n[1])/e;return[360*i,-360*r]},t.scale=function(n){return arguments.length?(e=+n,t):e},t.translate=function(e){return arguments.length?(n=[+e[0],+e[1]],t):n},t},d3.geo.mercator=function(){function t(t){var i=t[0]/360,r=-(Math.log(Math.tan(Math.PI/4+t[1]*Do/2))/Do)/360;return[e*i+n[0],e*Math.max(-.5,Math.min(.5,r))+n[1]]}var e=500,n=[480,250];return t.invert=function(t){var i=(t[0]-n[0])/e,r=(t[1]-n[1])/e;return[360*i,2*Math.atan(Math.exp(-360*r*Do))/Do-90]},t.scale=function(n){return arguments.length?(e=+n,t):e},t.translate=function(e){return arguments.length?(n=[+e[0],+e[1]],t):n},t},d3.geo.path=function(){function t(t){return"function"==typeof o&&(s=_i(o.apply(this,arguments))),l(t)||null}function e(t){return a(t).join(",")}function n(t){for(var e=r(t[0]),n=0,i=t.length;++n<i;)e-=r(t[n]);return e}function i(t){for(var e=d3.geom.polygon(t[0].map(a)),n=e.area(),i=e.centroid(0>n?(n*=-1,1):-1),r=i[0],o=i[1],s=n,l=0,u=t.length;++l<u;)e=d3.geom.polygon(t[l].map(a)),n=e.area(),i=e.centroid(0>n?(n*=-1,1):-1),r-=i[0],o-=i[1],s-=n;return[r,o,6*s]}function r(t){return Math.abs(d3.geom.polygon(t.map(a)).area())}var o=4.5,s=_i(o),a=d3.geo.albersUsa(),l=wi({FeatureCollection:function(t){for(var e=[],n=t.features,i=-1,r=n.length;++i<r;)e.push(l(n[i].geometry));return e.join("")},Feature:function(t){return l(t.geometry)},Point:function(t){return"M"+e(t.coordinates)+s},MultiPoint:function(t){for(var n=[],i=t.coordinates,r=-1,o=i.length;++r<o;)n.push("M",e(i[r]),s);return n.join("")},LineString:function(t){for(var n=["M"],i=t.coordinates,r=-1,o=i.length;++r<o;)n.push(e(i[r]),"L");return n.pop(),n.join("")},MultiLineString:function(t){for(var n,i,r,o=[],s=t.coordinates,a=-1,l=s.length;++a<l;){for(n=s[a],i=-1,r=n.length,o.push("M");++i<r;)o.push(e(n[i]),"L");o.pop()}return o.join("")},Polygon:function(t){for(var n,i,r,o=[],s=t.coordinates,a=-1,l=s.length;++a<l;)if(n=s[a],i=-1,(r=n.length-1)>0){for(o.push("M");++i<r;)o.push(e(n[i]),"L");o[o.length-1]="Z"}return o.join("")},MultiPolygon:function(t){for(var n,i,r,o,s,a,l=[],u=t.coordinates,c=-1,h=u.length;++c<h;)for(n=u[c],i=-1,r=n.length;++i<r;)if(o=n[i],s=-1,(a=o.length-1)>0){for(l.push("M");++s<a;)l.push(e(o[s]),"L");l[l.length-1]="Z"}return l.join("")},GeometryCollection:function(t){for(var e=[],n=t.geometries,i=-1,r=n.length;++i<r;)e.push(l(n[i]));return e.join("")}}),u=t.area=wi({FeatureCollection:function(t){for(var e=0,n=t.features,i=-1,r=n.length;++i<r;)e+=u(n[i]);return e},Feature:function(t){return u(t.geometry)},Polygon:function(t){return n(t.coordinates)},MultiPolygon:function(t){for(var e=0,i=t.coordinates,r=-1,o=i.length;++r<o;)e+=n(i[r]);return e},GeometryCollection:function(t){for(var e=0,n=t.geometries,i=-1,r=n.length;++i<r;)e+=u(n[i]);return e}},0),c=t.centroid=wi({Feature:function(t){return c(t.geometry)},Polygon:function(t){var e=i(t.coordinates);return[e[0]/e[2],e[1]/e[2]]},MultiPolygon:function(t){for(var e,n=t.coordinates,r=0,o=0,s=0,a=-1,l=n.length;++a<l;)e=i(n[a]),r+=e[0],o+=e[1],s+=e[2];return[r/s,o/s]}});return t.projection=function(e){return a=e,t},t.pointRadius=function(e){return"function"==typeof e?o=e:(o=+e,s=_i(o)),t},t},d3.geo.bounds=function(t){var e=1/0,n=1/0,i=-1/0,r=-1/0;return xi(t,function(t,o){e>t&&(e=t),t>i&&(i=t),n>o&&(n=o),o>r&&(r=o)}),[[e,n],[i,r]]};var Io={Feature:Si,FeatureCollection:ki,GeometryCollection:Ci,LineString:Ei,MultiLineString:Ti,MultiPoint:Ei,MultiPolygon:Mi,Point:Pi,Polygon:Ai};d3.geo.circle=function(){function t(){}function e(t){return a.distance(t)<s}function n(t){for(var e,n,r,o,l,u=-1,c=t.length,h=[];++u<c;)l=a.distance(r=t[u]),s>l?(n&&h.push(Di(n,r)((o-s)/(o-l))),h.push(r),e=n=null):(n=r,!e&&h.length&&(h.push(Di(h[h.length-1],n)((s-o)/(l-o))),e=n)),o=l;return n&&h.length&&(l=a.distance(r=h[0]),h.push(Di(n,r)((o-s)/(o-l)))),i(h)}function i(t){for(var e,n,i,r=0,o=t.length,s=o?[t[0]]:t,l=a.source();++r<o;)for(i=a.source(t[r-1])(t[r]).coordinates,e=0,n=i.length;++e<n;)s.push(i[e]);return a.source(l),s}var r=[0,0],o=89.99,s=o*Do,a=d3.geo.greatArc().target(Object);t.clip=function(t){return a.source("function"==typeof r?r.apply(this,arguments):r),l(t)};var l=wi({FeatureCollection:function(t){var e=t.features.map(l).filter(Object);return e&&(t=Object.create(t),t.features=e,t)},Feature:function(t){var e=l(t.geometry);return e&&(t=Object.create(t),t.geometry=e,t)},Point:function(t){return e(t.coordinates)&&t},MultiPoint:function(t){var n=t.coordinates.filter(e);return n.length&&{type:t.type,coordinates:n}},LineString:function(t){var e=n(t.coordinates);return e.length&&(t=Object.create(t),t.coordinates=e,t)},MultiLineString:function(t){var e=t.coordinates.map(n).filter(function(t){return t.length});return e.length&&(t=Object.create(t),t.coordinates=e,t)},Polygon:function(t){var e=t.coordinates.map(n);return e[0].length&&(t=Object.create(t),t.coordinates=e,t)},MultiPolygon:function(t){var e=t.coordinates.map(function(t){return t.map(n)}).filter(function(t){return t[0].length});return e.length&&(t=Object.create(t),t.coordinates=e,t)},GeometryCollection:function(t){var e=t.geometries.map(l).filter(Object);return e.length&&(t=Object.create(t),t.geometries=e,t)}});return t.origin=function(e){return arguments.length?(r=e,t):r},t.angle=function(e){return arguments.length?(s=(o=+e)*Do,t):o},t.precision=function(e){return arguments.length?(a.precision(e),t):a.precision()},t},d3.geo.greatArc=function(){function t(){for(var t="function"==typeof e?e.apply(this,arguments):e,r="function"==typeof n?n.apply(this,arguments):n,o=Di(t,r),s=i/o.d,a=0,l=[t];(a+=s)<1;)l.push(o(a));return l.push(r),{type:"LineString",coordinates:l}}var e=Oi,n=Ni,i=6*Do;return t.distance=function(){var t="function"==typeof e?e.apply(this,arguments):e,i="function"==typeof n?n.apply(this,arguments):n;return Di(t,i).d},t.source=function(n){return arguments.length?(e=n,t):e},t.target=function(e){return arguments.length?(n=e,t):n},t.precision=function(e){return arguments.length?(i=e*Do,t):i/Do},t},d3.geo.greatCircle=d3.geo.circle,d3.geom={},d3.geom.contour=function(t,e){var n=e||Ii(t),i=[],r=n[0],o=n[1],s=0,a=0,l=0/0,u=0/0,c=0;do c=0,t(r-1,o-1)&&(c+=1),t(r,o-1)&&(c+=2),t(r-1,o)&&(c+=4),t(r,o)&&(c+=8),6===c?(s=-1===u?-1:1,a=0):9===c?(s=0,a=1===l?-1:1):(s=Lo[c],a=$o[c]),s!=l&&a!=u&&(i.push([r,o]),l=s,u=a),r+=s,o+=a;while(n[0]!=r||n[1]!=o);return i};var Lo=[1,0,1,1,-1,0,-1,1,0,0,0,0,-1,0,-1,0/0],$o=[0,-1,0,0,0,-1,0,0,1,-1,1,1,0,-1,0,0/0];d3.geom.hull=function(t){if(t.length<3)return[];var e,n,i,r,o,s,a,l,u,c,h=t.length,p=h-1,f=[],d=[],m=0;for(e=1;h>e;++e)t[e][1]<t[m][1]?m=e:t[e][1]==t[m][1]&&(m=t[e][0]<t[m][0]?e:m);for(e=0;h>e;++e)e!==m&&(r=t[e][1]-t[m][1],i=t[e][0]-t[m][0],f.push({angle:Math.atan2(r,i),index:e}));for(f.sort(function(t,e){return t.angle-e.angle}),u=f[0].angle,l=f[0].index,a=0,e=1;p>e;++e)n=f[e].index,u==f[e].angle?(i=t[l][0]-t[m][0],r=t[l][1]-t[m][1],o=t[n][0]-t[m][0],s=t[n][1]-t[m][1],i*i+r*r>=o*o+s*s?f[e].index=-1:(f[a].index=-1,u=f[e].angle,a=e,l=n)):(u=f[e].angle,a=e,l=n);for(d.push(m),e=0,n=0;2>e;++n)-1!==f[n].index&&(d.push(f[n].index),e++);for(c=d.length;p>n;++n)if(-1!==f[n].index){for(;!Li(d[c-2],d[c-1],f[n].index,t);)--c;d[c++]=f[n].index}var g=[];for(e=0;c>e;++e)g.push(t[d[e]]);return g},d3.geom.polygon=function(t){return t.area=function(){for(var e=0,n=t.length,i=t[n-1][0]*t[0][1],r=t[n-1][1]*t[0][0];++e<n;)i+=t[e-1][0]*t[e][1],r+=t[e-1][1]*t[e][0];return.5*(r-i)},t.centroid=function(e){var n,i,r=-1,o=t.length,s=0,a=0,l=t[o-1];for(arguments.length||(e=-1/(6*t.area()));++r<o;)n=l,l=t[r],i=n[0]*l[1]-l[0]*n[1],s+=(n[0]+l[0])*i,a+=(n[1]+l[1])*i;return[s*e,a*e]},t.clip=function(e){for(var n,i,r,o,s,a,l=-1,u=t.length,c=t[u-1];++l<u;){for(n=e.slice(),e.length=0,o=t[l],s=n[(r=n.length)-1],i=-1;++i<r;)a=n[i],$i(a,c,o)?($i(s,c,o)||e.push(zi(s,a,c,o)),e.push(a)):$i(s,c,o)&&e.push(zi(s,a,c,o)),s=a;c=o}return e},t},d3.geom.voronoi=function(t){var e=t.map(function(){return[]});return Ri(t,function(t){var n,i,r,o,s,a;1===t.a&&t.b>=0?(n=t.ep.r,i=t.ep.l):(n=t.ep.l,i=t.ep.r),1===t.a?(s=n?n.y:-1e6,r=t.c-t.b*s,a=i?i.y:1e6,o=t.c-t.b*a):(r=n?n.x:-1e6,s=t.c-t.a*r,o=i?i.x:1e6,a=t.c-t.a*o);var l=[r,s],u=[o,a];e[t.region.l.index].push(l,u),e[t.region.r.index].push(l,u)}),e.map(function(e,n){var i=t[n][0],r=t[n][1];return e.forEach(function(t){t.angle=Math.atan2(t[0]-i,t[1]-r)}),e.sort(function(t,e){return t.angle-e.angle}).filter(function(t,n){return!n||t.angle-e[n-1].angle>1e-10})})};var zo={l:"r",r:"l"};d3.geom.delaunay=function(t){var e=t.map(function(){return[]}),n=[];return Ri(t,function(n){e[n.region.l.index].push(t[n.region.r.index])}),e.forEach(function(e,i){var r=t[i],o=r[0],s=r[1];e.forEach(function(t){t.angle=Math.atan2(t[0]-o,t[1]-s)}),e.sort(function(t,e){return t.angle-e.angle});for(var a=0,l=e.length-1;l>a;a++)n.push([r,e[a],e[a+1]])}),n},d3.geom.quadtree=function(t,e,n,i,r){function o(t,e,n,i,r,o){if(!isNaN(e.x)&&!isNaN(e.y))if(t.leaf){var a=t.point;a?Math.abs(a.x-e.x)+Math.abs(a.y-e.y)<.01?s(t,e,n,i,r,o):(t.point=null,s(t,a,n,i,r,o),s(t,e,n,i,r,o)):t.point=e}else s(t,e,n,i,r,o)}function s(t,e,n,i,r,s){var a=.5*(n+r),l=.5*(i+s),u=e.x>=a,c=e.y>=l,h=(c<<1)+u;t.leaf=!1,t=t.nodes[h]||(t.nodes[h]=Bi()),u?n=a:r=a,c?i=l:s=l,o(t,e,n,i,r,s)}var a,l=-1,u=t.length;if(u&&isNaN(t[0].x)&&(t=t.map(Vi)),arguments.length<5)if(3===arguments.length)r=i=n,n=e;else{for(e=n=1/0,i=r=-1/0;++l<u;)a=t[l],a.x<e&&(e=a.x),a.y<n&&(n=a.y),a.x>i&&(i=a.x),a.y>r&&(r=a.y);var c=i-e,h=r-n;c>h?r=n+c:i=e+h}var p=Bi();return p.add=function(t){o(p,t,e,n,i,r)},p.visit=function(t){Fi(t,p,e,n,i,r)},t.forEach(p.add),p},d3.time={};var Ro=Date;ji.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(t){this._.setUTCDate(t)},setDay:function(t){this._.setUTCDay(t)},setFullYear:function(t){this._.setUTCFullYear(t)},setHours:function(t){this._.setUTCHours(t)},setMilliseconds:function(t){this._.setUTCMilliseconds(t)},setMinutes:function(t){this._.setUTCMinutes(t)},setMonth:function(t){this._.setUTCMonth(t)},setSeconds:function(t){this._.setUTCSeconds(t)},setTime:function(t){this._.setTime(t)}},d3.time.format=function(t){function e(e){for(var i,r,o=[],s=-1,a=0;++s<n;)37==t.charCodeAt(s)&&(o.push(t.substring(a,s),(r=Uo[i=t.charAt(++s)])?r(e):i),a=s+1);return o.push(t.substring(a,s)),o.join("")}var n=t.length;return e.parse=function(e){var n=new Ro(1900,0,1),i=Ui(n,t,e,0);if(i!=e.length)return null;if(n.hour12){var r=n.getHours()%12;n.setHours(n.hour12pm?r+12:r)}return delete n.hour12,delete n.hour12pm,n},e.toString=function(){return t},e};var Bo=d3.format("02d"),Fo=d3.format("03d"),Vo=d3.format("04d"),jo=d3.format("2d"),Uo={a:function(t){return d3_time_weekdays[t.getDay()].substring(0,3)},A:function(t){return d3_time_weekdays[t.getDay()]},b:function(t){return Go[t.getMonth()].substring(0,3)},B:function(t){return Go[t.getMonth()]},c:d3.time.format("%a %b %e %H:%M:%S %Y"),d:function(t){return Bo(t.getDate())},e:function(t){return jo(t.getDate())},H:function(t){return Bo(t.getHours())},I:function(t){return Bo(t.getHours()%12||12)},j:function(t){return Fo(1+d3.time.dayOfYear(t))},L:function(t){return Fo(t.getMilliseconds())},m:function(t){return Bo(t.getMonth()+1)},M:function(t){return Bo(t.getMinutes())},p:function(t){return t.getHours()>=12?"PM":"AM"},S:function(t){return Bo(t.getSeconds())},U:function(t){return Bo(d3.time.sundayOfYear(t))},w:function(t){return t.getDay()},W:function(t){return Bo(d3.time.mondayOfYear(t))},x:d3.time.format("%m/%d/%y"),X:d3.time.format("%H:%M:%S"),y:function(t){return Bo(t.getFullYear()%100)},Y:function(t){return Vo(t.getFullYear()%1e4)},Z:lr,"%":function(){return"%"}},Ho={a:Hi,A:qi,b:Wi,B:Ji,c:Yi,d:er,e:er,H:nr,I:ir,L:sr,m:tr,M:rr,p:ar,S:or,x:Ki,X:Gi,y:Qi,Y:Xi},qo=/^(?:sun|mon|tue|wed|thu|fri|sat)/i,Wo=/^(?:Sunday|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday)/i;d3_time_weekdays=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];var Jo=d3.map({jan:0,feb:1,mar:2,apr:3,may:4,jun:5,jul:6,aug:7,sep:8,oct:9,nov:10,dec:11}),Yo=/^(?:January|February|March|April|May|June|July|August|September|October|November|December)/gi,Ko=d3.map({january:0,february:1,march:2,april:3,may:4,june:5,july:6,august:7,september:8,october:9,november:10,december:11}),Go=["January","February","March","April","May","June","July","August","September","October","November","December"],Xo=/\s*\d+/,Qo=d3.map({am:0,pm:1});d3.time.format.utc=function(t){function e(t){try{Ro=ji;var e=new Ro;return e._=t,n(e)}finally{Ro=Date}}var n=d3.time.format(t);return e.parse=function(t){try{Ro=ji;var e=n.parse(t);return e&&e._}finally{Ro=Date}},e.toString=n.toString,e};var Zo=d3.time.format.utc("%Y-%m-%dT%H:%M:%S.%LZ");d3.time.format.iso=Date.prototype.toISOString?ur:Zo,ur.parse=function(t){return new Date(t)},ur.toString=Zo.toString,d3.time.second=cr(function(t){return new Ro(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),d3.time.seconds=d3.time.second.range,d3.time.seconds.utc=d3.time.second.utc.range,d3.time.minute=cr(function(t){return new Ro(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),d3.time.minutes=d3.time.minute.range,d3.time.minutes.utc=d3.time.minute.utc.range,d3.time.hour=cr(function(t){var e=t.getTimezoneOffset()/60;return new Ro(36e5*(Math.floor(t/36e5-e)+e))
},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),d3.time.hours=d3.time.hour.range,d3.time.hours.utc=d3.time.hour.utc.range,d3.time.day=cr(function(t){return new Ro(t.getFullYear(),t.getMonth(),t.getDate())},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),d3.time.days=d3.time.day.range,d3.time.days.utc=d3.time.day.utc.range,d3.time.dayOfYear=function(t){var e=d3.time.year(t);return Math.floor((t-e)/864e5-(t.getTimezoneOffset()-e.getTimezoneOffset())/1440)},d3_time_weekdays.forEach(function(t,e){t=t.toLowerCase(),e=7-e;var n=d3.time[t]=cr(function(t){return(t=d3.time.day(t)).setDate(t.getDate()-(t.getDay()+e)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var n=d3.time.year(t).getDay();return Math.floor((d3.time.dayOfYear(t)+(n+e)%7)/7)-(n!==e)});d3.time[t+"s"]=n.range,d3.time[t+"s"].utc=n.utc.range,d3.time[t+"OfYear"]=function(t){var n=d3.time.year(t).getDay();return Math.floor((d3.time.dayOfYear(t)+(n+e)%7)/7)}}),d3.time.week=d3.time.sunday,d3.time.weeks=d3.time.sunday.range,d3.time.weeks.utc=d3.time.sunday.utc.range,d3.time.weekOfYear=d3.time.sundayOfYear,d3.time.month=cr(function(t){return new Ro(t.getFullYear(),t.getMonth(),1)},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),d3.time.months=d3.time.month.range,d3.time.months.utc=d3.time.month.utc.range,d3.time.year=cr(function(t){return new Ro(t.getFullYear(),0,1)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),d3.time.years=d3.time.year.range,d3.time.years.utc=d3.time.year.utc.range;var ts=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],es=[[d3.time.second,1],[d3.time.second,5],[d3.time.second,15],[d3.time.second,30],[d3.time.minute,1],[d3.time.minute,5],[d3.time.minute,15],[d3.time.minute,30],[d3.time.hour,1],[d3.time.hour,3],[d3.time.hour,6],[d3.time.hour,12],[d3.time.day,1],[d3.time.day,2],[d3.time.week,1],[d3.time.month,1],[d3.time.month,3],[d3.time.year,1]],ns=[[d3.time.format("%Y"),function(){return!0}],[d3.time.format("%B"),function(t){return t.getMonth()}],[d3.time.format("%b %d"),function(t){return 1!=t.getDate()}],[d3.time.format("%a %d"),function(t){return t.getDay()&&1!=t.getDate()}],[d3.time.format("%I %p"),function(t){return t.getHours()}],[d3.time.format("%I:%M"),function(t){return t.getMinutes()}],[d3.time.format(":%S"),function(t){return t.getSeconds()}],[d3.time.format(".%L"),function(t){return t.getMilliseconds()}]],is=d3.scale.linear(),rs=mr(ns);es.year=function(t,e){return is.domain(t.map(vr)).ticks(e).map(gr)},d3.time.scale=function(){return pr(d3.scale.linear(),es,rs)};var os=es.map(function(t){return[t[0].utc,t[1]]}),ss=[[d3.time.format.utc("%Y"),function(){return!0}],[d3.time.format.utc("%B"),function(t){return t.getUTCMonth()}],[d3.time.format.utc("%b %d"),function(t){return 1!=t.getUTCDate()}],[d3.time.format.utc("%a %d"),function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],[d3.time.format.utc("%I %p"),function(t){return t.getUTCHours()}],[d3.time.format.utc("%I:%M"),function(t){return t.getUTCMinutes()}],[d3.time.format.utc(":%S"),function(t){return t.getUTCSeconds()}],[d3.time.format.utc(".%L"),function(t){return t.getUTCMilliseconds()}]],as=mr(ss);os.year=function(t,e){return is.domain(t.map(br)).ticks(e).map(yr)},d3.time.scale.utc=function(){return pr(d3.scale.linear(),os,as)}}(),function(t){function e(t,e,n,i){var r,o=0,s=0,a=0,n=(n||"(").toString(),i=(i||")").toString();for(r=0;r<t.length;r++){var l=t[r];if(l.indexOf(n,o)>l.indexOf(i,o)||~l.indexOf(n,o)&&!~l.indexOf(i,o)||!~l.indexOf(n,o)&&~l.indexOf(i,o)){if(s=l.indexOf(n,o),a=l.indexOf(i,o),~s&&!~a||!~s&&~a){var u=t.slice(0,(r||1)+1).join(e);t=[u].concat(t.slice((r||1)+1))}o=(a>s?a:s)+1,r=0}else o=0}return t}function n(t,e){for(var n,r=0,o="";n=t.substr(r).match(/[^\w\d\- %@&]*\*[^\w\d\- %@&]*/);)r=n.index+n[0].length,n[0]=n[0].replace(/^\*/,"([_.()!\\ %@&a-zA-Z0-9-]+)"),o+=t.substr(0,n.index)+n[0];t=o+=t.substr(r);var s,a,l=t.match(/:([^\/]+)/gi);if(l){a=l.length;for(var u=0;a>u;u++)s=l[u],t="::"===s.slice(0,2)?s.slice(1):t.replace(s,i(s,e))}return t}function i(t,e,n){n=t;for(var i in e)if(e.hasOwnProperty(i)&&(n=e[i](t),n!==t))break;return n===t?"([._a-zA-Z0-9-]+)":n}function r(t,e,n){if(!t.length)return n();var i=0;!function r(){e(t[i],function(e){e||e===!1?(n(e),n=function(){}):(i+=1,i===t.length?n():r())})}()}function o(t){for(var e=[],n=0,i=t.length;i>n;n++)e=e.concat(t[n]);return e}function a(t,e){for(var n=0;n<t.length;n+=1)if(e(t[n],n,t)===!1)return}function l(){return""===u.hash||"#"===u.hash}Array.prototype.filter||(Array.prototype.filter=function(t,e){for(var n,i=[],r=0,o=this.length;o>r;r++)r in this&&t.call(e,n=this[r],r,this)&&i.push(n);return i}),Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)});var u=document.location,c={mode:"modern",hash:u.hash,history:!1,check:function(){var t=u.hash;t!=this.hash&&(this.hash=t,this.onHashChanged())},fire:function(){"modern"===this.mode?this.history===!0?window.onpopstate():window.onhashchange():this.onHashChanged()},init:function(t,e){function n(t){for(var e=0,n=h.listeners.length;n>e;e++)h.listeners[e](t)}var i=this;if(this.history=e,h.listeners||(h.listeners=[]),"onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7))this.history===!0?setTimeout(function(){window.onpopstate=n},500):window.onhashchange=n,this.mode="modern";else{var r=document.createElement("iframe");r.id="state-frame",r.style.display="none",document.body.appendChild(r),this.writeFrame(""),"onpropertychange"in document&&"attachEvent"in document&&document.attachEvent("onpropertychange",function(){"location"===event.propertyName&&i.check()}),window.setInterval(function(){i.check()},50),this.onHashChanged=n,this.mode="legacy"}return h.listeners.push(t),this.mode},destroy:function(t){if(h&&h.listeners)for(var e=h.listeners,n=e.length-1;n>=0;n--)e[n]===t&&e.splice(n,1)},setHash:function(t){return"legacy"===this.mode&&this.writeFrame(t),this.history===!0?(window.history.pushState({},document.title,t),this.fire()):u.hash="/"===t[0]?t:"/"+t,this},writeFrame:function(t){var e=document.getElementById("state-frame"),n=e.contentDocument||e.contentWindow.document;n.open(),n.write("<script>_hash = '"+t+"'; onload = parent.listener.syncHash;<script>"),n.close()},syncHash:function(){var t=this._hash;return t!=u.hash&&(u.hash=t),this},onHashChanged:function(){}},h=t.Router=function(t){return this instanceof h?(this.params={},this.routes={},this.methods=["on","once","after","before"],this.scope=[],this._methods={},this._insert=this.insert,this.insert=this.insertEx,this.historySupport=null!=(null!=window.history?window.history.pushState:null),this.configure(),this.mount(t||{}),void 0):new h(t)};h.prototype.init=function(t){var e=this;if(this.handler=function(t){var n=t&&t.newURL||window.location.hash,i=e.history===!0?e.getPath():n.replace(/.*#/,"");e.dispatch("on","/"===i[0]?i:"/"+i)},c.init(this.handler,this.history),this.history===!1)l()&&t?u.hash=t:l()||e.dispatch("on","/"+u.hash.replace(/^#/,""));else{var n=l()&&t?t:l()?null:u.hash.replace(/^#/,"");n&&window.history.replaceState({},document.title,n),(n||this.run_in_init===!0)&&this.handler()}return this},h.prototype.explode=function(){var t=this.history===!0?this.getPath():u.hash;return"/"===t.charAt(1)&&(t=t.slice(1)),t.slice(1,t.length).split("/")},h.prototype.setRoute=function(t,e,n){var i=this.explode();return"number"==typeof t&&"string"==typeof e?i[t]=e:"string"==typeof n?i.splice(t,e,s):i=[t],c.setHash(i.join("/")),i},h.prototype.insertEx=function(t,e,n,i){return"once"===t&&(t="on",n=function(t){var e=!1;return function(){return e?void 0:(e=!0,t.apply(this,arguments))}}(n)),this._insert(t,e,n,i)},h.prototype.getRoute=function(t){var e=t;if("number"==typeof t)e=this.explode()[t];else if("string"==typeof t){var n=this.explode();e=n.indexOf(t)}else e=this.explode();return e},h.prototype.destroy=function(){return c.destroy(this.handler),this},h.prototype.getPath=function(){var t=window.location.pathname;return"/"!==t.substr(0,1)&&(t="/"+t),t},h.prototype.configure=function(t){t=t||{};for(var e=0;e<this.methods.length;e++)this._methods[this.methods[e]]=!0;return this.recurse=t.recurse||this.recurse||!1,this.async=t.async||!1,this.delimiter=t.delimiter||"/",this.strict="undefined"==typeof t.strict?!0:t.strict,this.notfound=t.notfound,this.resource=t.resource,this.history=t.html5history&&this.historySupport||!1,this.run_in_init=this.history===!0&&t.run_handler_in_init!==!1,this.every={after:t.after||null,before:t.before||null,on:t.on||null},this},h.prototype.param=function(t,e){":"!==t[0]&&(t=":"+t);var n=new RegExp(t,"g");this.params[t]=function(t){return t.replace(n,e.source||e)}},h.prototype.on=h.prototype.route=function(t,n,i){var r=this;return!i&&"function"==typeof n&&(i=n,n=t,t="on"),Array.isArray(n)?n.forEach(function(e){r.on(t,e,i)}):(n.source&&(n=n.source.replace(/\\\//gi,"/")),Array.isArray(t)?t.forEach(function(t){r.on(t.toLowerCase(),n,i)}):(n=n.split(new RegExp(this.delimiter)),n=e(n,this.delimiter),this.insert(t,this.scope.concat(n),i),void 0))},h.prototype.dispatch=function(t,e,n){function i(){o.last=s.after,o.invoke(o.runlist(s),o,n)}var r,o=this,s=this.traverse(t,e,this.routes,""),a=this._invoked;return this._invoked=!0,s&&0!==s.length?("forward"===this.recurse&&(s=s.reverse()),r=this.every&&this.every.after?[this.every.after].concat(this.last):[this.last],r&&r.length>0&&a?(this.async?this.invoke(r,this,i):(this.invoke(r,this),i()),!0):(i(),!0)):(this.last=[],"function"==typeof this.notfound&&this.invoke([this.notfound],{method:t,path:e},n),!1)},h.prototype.invoke=function(t,e,n){var i=this;this.async?r(t,function o(n,i){return Array.isArray(n)?r(n,o,i):("function"==typeof n&&n.apply(e,t.captures.concat(i)),void 0)},function(){n&&n.apply(e,arguments)}):a(t,function s(n){return Array.isArray(n)?a(n,s):"function"==typeof n?n.apply(e,t.captures||[]):("string"==typeof n&&i.resource&&i.resource[n].apply(e,t.captures||[]),void 0)})},h.prototype.traverse=function(t,e,n,i,r){function o(t){function e(t){for(var n=t.length-1;n>=0;n--)Array.isArray(t[n])?(e(t[n]),0===t[n].length&&t.splice(n,1)):r(t[n])||t.splice(n,1)}function n(t){for(var e=[],i=0;i<t.length;i++)e[i]=Array.isArray(t[i])?n(t[i]):t[i];return e}if(!r)return t;var i=n(t);return i.matched=t.matched,i.captures=t.captures,i.after=t.after.filter(r),e(i),i}var s,a,l,u,c=[];if(e===this.delimiter&&n[t])return u=[[n.before,n[t]].filter(Boolean)],u.after=[n.after].filter(Boolean),u.matched=!0,u.captures=[],o(u);for(var h in n)if(n.hasOwnProperty(h)&&(!this._methods[h]||this._methods[h]&&"object"==typeof n[h]&&!Array.isArray(n[h]))){if(s=a=i+this.delimiter+h,this.strict||(a+="["+this.delimiter+"]?"),l=e.match(new RegExp("^"+a)),!l)continue;if(l[0]&&l[0]==e&&n[h][t])return u=[[n[h].before,n[h][t]].filter(Boolean)],u.after=[n[h].after].filter(Boolean),u.matched=!0,u.captures=l.slice(1),this.recurse&&n===this.routes&&(u.push([n.before,n.on].filter(Boolean)),u.after=u.after.concat([n.after].filter(Boolean))),o(u);if(u=this.traverse(t,e,n[h],s),u.matched)return u.length>0&&(c=c.concat(u)),this.recurse&&(c.push([n[h].before,n[h].on].filter(Boolean)),u.after=u.after.concat([n[h].after].filter(Boolean)),n===this.routes&&(c.push([n.before,n.on].filter(Boolean)),u.after=u.after.concat([n.after].filter(Boolean)))),c.matched=!0,c.captures=u.captures,c.after=u.after,o(c)}return!1},h.prototype.insert=function(t,e,i,r){var o,s,a,l,u;if(e=e.filter(function(t){return t&&t.length>0}),r=r||this.routes,u=e.shift(),/\:|\*/.test(u)&&!/\\d|\\w/.test(u)&&(u=n(u,this.params)),e.length>0)return r[u]=r[u]||{},this.insert(t,e,i,r[u]);if(u||e.length||r!==this.routes){if(s=typeof r[u],a=Array.isArray(r[u]),r[u]&&!a&&"object"==s)switch(o=typeof r[u][t]){case"function":return r[u][t]=[r[u][t],i],void 0;case"object":return r[u][t].push(i),void 0;case"undefined":return r[u][t]=i,void 0}else if("undefined"==s)return l={},l[t]=i,r[u]=l,void 0;throw new Error("Invalid route context: "+s)}switch(o=typeof r[t]){case"function":return r[t]=[r[t],i],void 0;case"object":return r[t].push(i),void 0;case"undefined":return r[t]=i,void 0}},h.prototype.extend=function(t){function e(t){i._methods[t]=!0,i[t]=function(){var e=1===arguments.length?[t,""]:[t];i.on.apply(i,e.concat(Array.prototype.slice.call(arguments)))}}var n,i=this,r=t.length;for(n=0;r>n;n++)e(t[n])},h.prototype.runlist=function(t){var e=this.every&&this.every.before?[this.every.before].concat(o(t)):o(t);return this.every&&this.every.on&&e.push(this.every.on),e.captures=t.captures,e.source=t.source,e},h.prototype.mount=function(t,n){function i(n,i){var o=n,s=n.split(r.delimiter),a=typeof t[n],l=""===s[0]||!r._methods[s[0]],u=l?"on":o;l&&(o=o.slice((o.match(new RegExp("^"+r.delimiter))||[""])[0].length),s.shift()),l&&"object"===a&&!Array.isArray(t[n])?(i=i.concat(s),r.mount(t[n],i)):(l&&(i=i.concat(o.split(r.delimiter)),i=e(i,r.delimiter)),r.insert(u,i,t[n]))}if(t&&"object"==typeof t&&!Array.isArray(t)){var r=this;n=n||[],Array.isArray(n)||(n=n.split(r.delimiter));for(var o in t)t.hasOwnProperty(o)&&i(o,n.slice(0))}}}("object"==typeof exports?exports:window),function(){function t(e,n,i){var r=t.resolve(e);if(null==r){i=i||e,n=n||"root";var o=new Error('Failed to require "'+i+'" from "'+n+'"');throw o.path=i,o.parent=n,o.require=!0,o}var s=t.modules[r];return s.exports||(s.exports={},s.client=s.component=!0,s.call(this,s.exports,t.relative(r),s)),s.exports}var e=Object.prototype.hasOwnProperty;t.modules={},t.aliases={},t.resolve=function(n){"/"===n.charAt(0)&&(n=n.slice(1));for(var i=n+"/index.js",r=[n,n+".js",n+".json",n+"/index.js",n+"/index.json"],o=0;o<r.length;o++){var n=r[o];if(e.call(t.modules,n))return n}return e.call(t.aliases,i)?t.aliases[i]:void 0},t.normalize=function(t,e){var n=[];if("."!=e.charAt(0))return e;t=t.split("/"),e=e.split("/");for(var i=0;i<e.length;++i)".."==e[i]?t.pop():"."!=e[i]&&""!=e[i]&&n.push(e[i]);return t.concat(n).join("/")},t.register=function(e,n){t.modules[e]=n},t.alias=function(n,i){if(!e.call(t.modules,n))throw new Error('Failed to alias "'+n+'", it does not exist');t.aliases[i]=n},t.relative=function(n){function i(t,e){for(var n=t.length;n--;)if(t[n]===e)return n;return-1}function r(e){var i=r.resolve(e);return t(i,n,e)}var o=t.normalize(n,"..");return r.resolve=function(e){var r=e.charAt(0);if("/"==r)return e.slice(1);if("."==r)return t.normalize(o,e);var s=n.split("/"),a=i(s,"deps")+1;return a||(a=0),e=s.slice(0,a+1).join("/")+"/deps/"+e},r.exists=function(n){return e.call(t.modules,r.resolve(n))},r},t.register("component-emitter/index.js",function(t,e,n){function i(t){return t?r(t):void 0}function r(t){for(var e in i.prototype)t[e]=i.prototype[e];return t}n.exports=i,i.prototype.on=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks[t]=this._callbacks[t]||[]).push(e),this},i.prototype.once=function(t,e){function n(){i.off(t,n),e.apply(this,arguments)}var i=this;return this._callbacks=this._callbacks||{},e._off=n,this.on(t,n),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=function(t,e){this._callbacks=this._callbacks||{};var n=this._callbacks[t];if(!n)return this;if(1==arguments.length)return delete this._callbacks[t],this;var i=n.indexOf(e._off||e);return~i&&n.splice(i,1),this},i.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),n=this._callbacks[t];if(n){n=n.slice(0);for(var i=0,r=n.length;r>i;++i)n[i].apply(this,e)}return this},i.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks[t]||[]},i.prototype.hasListeners=function(t){return!!this.listeners(t).length}}),t.register("dropzone/index.js",function(t,e,n){n.exports=e("./lib/dropzone.js")}),t.register("dropzone/lib/dropzone.js",function(t,e,n){/*
#
# More info at [www.dropzonejs.com](http://www.dropzonejs.com)
# 
# Copyright (c) 2012, Matias Meno  
# 
# Permission is hereby granted, free of charge, to any person obtaining a copy
# of this software and associated documentation files (the "Software"), to deal
# in the Software without restriction, including without limitation the rights
# to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
# copies of the Software, and to permit persons to whom the Software is
# furnished to do so, subject to the following conditions:
# 
# The above copyright notice and this permission notice shall be included in
# all copies or substantial portions of the Software.
# 
# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
# AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
# OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
# THE SOFTWARE.
#
*/
(function(){var t,i,r,o,s,a,l={}.hasOwnProperty,u=function(t,e){function n(){this.constructor=t}for(var i in e)l.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},c=[].slice,h=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};i="undefined"!=typeof Emitter&&null!==Emitter?Emitter:e("emitter"),s=function(){},t=function(t){function e(t,n){var i,r,o,s;if(this.element=t,this.version=e.version,this.defaultOptions.previewTemplate=this.defaultOptions.previewTemplate.replace(/\n*/g,""),"string"==typeof this.element&&(this.element=document.querySelector(this.element)),!this.element||null==this.element.nodeType)throw new Error("Invalid dropzone element.");if(this.element.dropzone)throw new Error("Dropzone already attached.");if(e.instances.push(this),t.dropzone=this,i=null!=(s=e.optionsForElement(this.element))?s:{},r=function(){var t,e,n,i,r,o,s;for(i=arguments[0],n=2<=arguments.length?c.call(arguments,1):[],o=0,s=n.length;s>o;o++){e=n[o];for(t in e)r=e[t],i[t]=r}return i},this.options=r({},this.defaultOptions,i,null!=n?n:{}),null==this.options.url&&(this.options.url=this.element.action),!this.options.url)throw new Error("No URL provided.");if(this.options.acceptParameter&&this.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptParameter' and 'acceptedMimeTypes'. 'acceptParameter' is deprecated.");if(this.options.method=this.options.method.toUpperCase(),this.options.forceFallback||!e.isBrowserSupported())return this.options.fallback.call(this);if((o=this.getExistingFallback())&&o.parentNode&&o.parentNode.removeChild(o),this.options.previewsContainer){if("string"==typeof this.options.previewsContainer?this.previewsContainer=document.querySelector(this.options.previewsContainer):null!=this.options.previewsContainer.nodeType&&(this.previewsContainer=this.options.previewsContainer),null==this.previewsContainer)throw new Error("Invalid `previewsContainer` option provided. Please provide a CSS selector or a plain HTML element.")}else this.previewsContainer=this.element;if(this.options.clickable&&(this.options.clickable===!0?this.clickableElement=this.element:"string"==typeof this.options.clickable?this.clickableElement=document.querySelector(this.options.clickable):null!=this.options.clickable.nodeType&&(this.clickableElement=this.options.clickable),!this.clickableElement))throw new Error("Invalid `clickable` element provided. Please set it to `true`, a plain HTML element or a valid CSS selector.");this.init()}return u(e,t),e.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","selectedfiles","addedfile","removedfile","thumbnail","error","processingfile","uploadprogress","sending","success","complete","reset"],e.prototype.defaultOptions={url:null,method:"post",parallelUploads:2,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:100,thumbnailHeight:100,params:{},clickable:!0,acceptedMimeTypes:null,acceptParameter:null,enqueueForUpload:!0,previewsContainer:null,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MB). Max filesize: {{maxFilesize}}MB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",accept:function(t,e){return e()},init:function(){return s},forceFallback:!1,fallback:function(){var t,n,i,r,o,s;for(this.element.className=""+this.element.className+" dz-browser-not-supported",s=this.element.getElementsByTagName("div"),r=0,o=s.length;o>r;r++)t=s[r],/(^| )message($| )/.test(t.className)&&(n=t,t.className="dz-message");return n||(n=e.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(n)),i=n.getElementsByTagName("span")[0],i&&(i.textContent=this.options.dictFallbackMessage),this.element.appendChild(this.getFallbackForm())},drop:function(){return this.element.classList.remove("dz-drag-hover")},dragstart:s,dragend:function(){return this.element.classList.remove("dz-drag-hover")},dragenter:function(){return this.element.classList.add("dz-drag-hover")},dragover:function(){return this.element.classList.add("dz-drag-hover")},dragleave:function(){return this.element.classList.remove("dz-drag-hover")},selectedfiles:function(){return this.element===this.previewsContainer?this.element.classList.add("dz-started"):void 0},reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(t){return t.previewElement=e.createElement(this.options.previewTemplate),t.previewTemplate=t.previewElement,this.previewsContainer.appendChild(t.previewElement),t.previewElement.querySelector("[data-dz-name]").textContent=t.name,t.previewElement.querySelector("[data-dz-size]").innerHTML=this.filesize(t.size)},removedfile:function(t){return t.previewElement.parentNode.removeChild(t.previewElement)},thumbnail:function(t,e){var n;return t.previewElement.classList.remove("dz-file-preview"),t.previewElement.classList.add("dz-image-preview"),n=t.previewElement.querySelector("[data-dz-thumbnail]"),n.alt=t.name,n.src=e},error:function(t,e){return t.previewElement.classList.add("dz-error"),t.previewElement.querySelector("[data-dz-errormessage]").textContent=e},processingfile:function(t){return t.previewElement.classList.add("dz-processing")},uploadprogress:function(t,e){return t.previewElement.querySelector("[data-dz-uploadprogress]").style.width=""+e+"%"},sending:s,success:function(t){return t.previewElement.classList.add("dz-success")},complete:s,previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-details">\n    <div class="dz-filename"><span data-dz-name></span></div>\n    <div class="dz-size" data-dz-size></div>\n    <img data-dz-thumbnail />\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-success-mark"><span>✔</span></div>\n  <div class="dz-error-mark"><span>✘</span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n</div>'},e.prototype.init=function(){var t,n,i,r,o,s,a,l=this;for("form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector("[data-dz-message]")&&this.element.appendChild(e.createElement('<div class="dz-default dz-message" data-dz-message><span>'+this.options.dictDefaultMessage+"</span></div>")),this.clickableElement&&(i=function(){return l.hiddenFileInput&&document.body.removeChild(l.hiddenFileInput),l.hiddenFileInput=document.createElement("input"),l.hiddenFileInput.setAttribute("type","file"),l.hiddenFileInput.setAttribute("multiple","multiple"),null!=l.options.acceptedMimeTypes&&l.hiddenFileInput.setAttribute("accept",l.options.acceptedMimeTypes),null!=l.options.acceptParameter&&l.hiddenFileInput.setAttribute("accept",l.options.acceptParameter),l.hiddenFileInput.style.visibility="hidden",l.hiddenFileInput.style.position="absolute",l.hiddenFileInput.style.top="0",l.hiddenFileInput.style.left="0",l.hiddenFileInput.style.height="0",l.hiddenFileInput.style.width="0",document.body.appendChild(l.hiddenFileInput),l.hiddenFileInput.addEventListener("change",function(){var t;return t=l.hiddenFileInput.files,t.length&&(l.emit("selectedfiles",t),l.handleFiles(t)),i()})},i()),this.files=[],this.filesQueue=[],this.filesProcessing=[],this.URL=null!=(s=window.URL)?s:window.webkitURL,a=this.events,r=0,o=a.length;o>r;r++)t=a[r],this.on(t,this.options[t]);return n=function(t){return t.stopPropagation(),t.preventDefault?t.preventDefault():t.returnValue=!1},this.listeners=[{element:this.element,events:{dragstart:function(t){return l.emit("dragstart",t)},dragenter:function(t){return n(t),l.emit("dragenter",t)},dragover:function(t){return n(t),l.emit("dragover",t)},dragleave:function(t){return l.emit("dragleave",t)},drop:function(t){return n(t),l.drop(t),l.emit("drop",t)},dragend:function(t){return l.emit("dragend",t)}}}],this.clickableElement&&this.listeners.push({element:this.clickableElement,events:{click:function(t){return l.clickableElement!==l.element||t.target===l.element||e.elementInside(t.target,l.element.querySelector(".dz-message"))?l.hiddenFileInput.click():void 0}}}),this.enable(),this.options.init.call(this)},e.prototype.getFallbackForm=function(){var t,n,i,r;return(t=this.getExistingFallback())?t:(i='<div class="dz-fallback">',this.options.dictFallbackText&&(i+="<p>"+this.options.dictFallbackText+"</p>"),i+='<input type="file" name="'+this.options.paramName+'" multiple="multiple" /><button type="submit">Upload!</button></div>',n=e.createElement(i),"FORM"!==this.element.tagName?(r=e.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>'),r.appendChild(n)):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=r?r:n)},e.prototype.getExistingFallback=function(){var t,e,n,i,r,o;for(e=function(t){var e,n,i;for(n=0,i=t.length;i>n;n++)if(e=t[n],/(^| )fallback($| )/.test(e.className))return e},o=["div","form"],i=0,r=o.length;r>i;i++)if(n=o[i],t=e(this.element.getElementsByTagName(n)))return t},e.prototype.setupEventListeners=function(){var t,e,n,i,r,o,s;for(o=this.listeners,s=[],i=0,r=o.length;r>i;i++)t=o[i],s.push(function(){var i,r;i=t.events,r=[];for(e in i)n=i[e],r.push(t.element.addEventListener(e,n,!1));return r}());return s},e.prototype.removeEventListeners=function(){var t,e,n,i,r,o,s;for(o=this.listeners,s=[],i=0,r=o.length;r>i;i++)t=o[i],s.push(function(){var i,r;i=t.events,r=[];for(e in i)n=i[e],r.push(t.element.removeEventListener(e,n,!1));return r}());return s},e.prototype.disable=function(){return this.clickableElement===this.element&&this.element.classList.remove("dz-clickable"),this.removeEventListeners(),this.filesProcessing=[],this.filesQueue=[]},e.prototype.enable=function(){return this.clickableElement===this.element&&this.element.classList.add("dz-clickable"),this.setupEventListeners()},e.prototype.filesize=function(t){var e;return t>=1e11?(t/=1e11,e="TB"):t>=1e8?(t/=1e8,e="GB"):t>=1e5?(t/=1e5,e="MB"):t>=100?(t/=100,e="KB"):(t=10*t,e="b"),"<strong>"+Math.round(t)/10+"</strong> "+e},e.prototype.drop=function(t){var e;if(t.dataTransfer)return e=t.dataTransfer.files,this.emit("selectedfiles",e),e.length?this.handleFiles(e):void 0},e.prototype.handleFiles=function(t){var e,n,i,r;for(r=[],n=0,i=t.length;i>n;n++)e=t[n],r.push(this.addFile(e));return r},e.prototype.accept=function(t,n){return t.size>1024*1024*this.options.maxFilesize?n(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(t.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):e.isValidMimeType(t.type,this.options.acceptedMimeTypes)?this.options.accept.call(this,t,n):n(this.options.dictInvalidFileType)},e.prototype.addFile=function(t){var e=this;return this.files.push(t),this.emit("addedfile",t),this.options.createImageThumbnails&&t.type.match(/image.*/)&&t.size<=1024*1024*this.options.maxThumbnailFilesize&&this.createThumbnail(t),this.accept(t,function(n){return n?e.errorProcessing(t,n):e.options.enqueueForUpload?(e.filesQueue.push(t),e.processQueue()):void 0})},e.prototype.removeFile=function(t){if(t.processing)throw new Error("Can't remove file currently processing");return this.files=a(this.files,t),this.filesQueue=a(this.filesQueue,t),this.emit("removedfile",t),0===this.files.length?this.emit("reset"):void 0},e.prototype.removeAllFiles=function(){var t,e,n,i;for(i=this.files.slice(),e=0,n=i.length;n>e;e++)t=i[e],h.call(this.filesProcessing,t)<0&&this.removeFile(t);return null},e.prototype.createThumbnail=function(t){var e,n=this;return e=new FileReader,e.onload=function(){var i;return i=new Image,i.onload=function(){var e,r,o,s,a,l,u,c,h,p,f,d,m;return e=document.createElement("canvas"),r=e.getContext("2d"),l=0,u=0,a=i.width,o=i.height,e.width=n.options.thumbnailWidth,e.height=n.options.thumbnailHeight,d=0,m=0,f=e.width,h=e.height,s=i.width/i.height,p=e.width/e.height,i.height<e.height||i.width<e.width?(h=o,f=a):s>p?(o=i.height,a=o*p):(a=i.width,o=a/p),l=(i.width-a)/2,u=(i.height-o)/2,m=(e.height-h)/2,d=(e.width-f)/2,r.drawImage(i,l,u,a,o,d,m,f,h),c=e.toDataURL("image/png"),n.emit("thumbnail",t,c)},i.src=e.result},e.readAsDataURL(t)},e.prototype.processQueue=function(){var t,e,n;for(e=this.options.parallelUploads,n=this.filesProcessing.length,t=n;e>t;){if(!this.filesQueue.length)return;this.processFile(this.filesQueue.shift()),t++}},e.prototype.processFile=function(t){return this.filesProcessing.push(t),t.processing=!0,this.emit("processingfile",t),this.uploadFile(t)},e.prototype.uploadFile=function(t){var e,n,i,r,o,s,a,l,u,c,h,p,f,d,m,g=this;if(c=new XMLHttpRequest,c.open(this.options.method,this.options.url,!0),l=null,n=function(){return g.errorProcessing(t,l||g.options.dictResponseError.replace("{{statusCode}}",c.status),c)},c.onload=function(e){var i;if(l=c.responseText,c.getResponseHeader("content-type")&&~c.getResponseHeader("content-type").indexOf("application/json"))try{l=JSON.parse(l)}catch(r){e=r,l="Invalid JSON response from server."}return 200<=(i=c.status)&&300>i?(g.emit("uploadprogress",t,100,t.size),g.finished(t,l,e)):n()},c.onerror=function(){return n()},a=null!=(f=c.upload)?f:c,a.onprogress=function(e){return g.emit("uploadprogress",t,Math.max(0,Math.min(100,100*e.loaded/e.total)),e.loaded)},c.setRequestHeader("Accept","application/json"),c.setRequestHeader("Cache-Control","no-cache"),c.setRequestHeader("X-Requested-With","XMLHttpRequest"),c.setRequestHeader("X-File-Name",t.name),e=new FormData,this.options.params){d=this.options.params;for(s in d)u=d[s],e.append(s,u)}if("FORM"===this.element.tagName)for(m=this.element.querySelectorAll("input, textarea, select, button"),h=0,p=m.length;p>h;h++)i=m[h],r=i.getAttribute("name"),o=i.getAttribute("type"),(!o||"checkbox"!==o.toLowerCase()||i.checked)&&e.append(r,i.value);return this.emit("sending",t,c,e),e.append(this.options.paramName,t),c.send(e)},e.prototype.finished=function(t,e,n){return this.filesProcessing=a(this.filesProcessing,t),t.processing=!1,this.processQueue(),this.emit("success",t,e,n),this.emit("finished",t,e,n),this.emit("complete",t)},e.prototype.errorProcessing=function(t,e,n){return this.filesProcessing=a(this.filesProcessing,t),t.processing=!1,this.processQueue(),this.emit("error",t,e,n),this.emit("complete",t)},e}(i),t.version="3.0.1",t.options={},t.optionsForElement=function(e){return e.id?t.options[r(e.id)]:void 0},t.instances=[],t.forElement=function(t){var e;return"string"==typeof t&&(t=document.querySelector(t)),null!=(e=t.dropzone)?e:null},t.autoDiscover=!0,t.discover=function(){var e,n,i,r,o,s;if(t.autoDiscover){for(document.querySelectorAll?i=document.querySelectorAll(".dropzone"):(i=[],e=function(t){var e,n,r,o;for(o=[],n=0,r=t.length;r>n;n++)e=t[n],/(^| )dropzone($| )/.test(e.className)?o.push(i.push(e)):o.push(void 0);return o},e(document.getElementsByTagName("div")),e(document.getElementsByTagName("form"))),s=[],r=0,o=i.length;o>r;r++)n=i[r],t.optionsForElement(n)!==!1?s.push(new t(n)):s.push(void 0);return s}},t.blacklistedBrowsers=[/opera.*Macintosh.*version\/12/i],t.isBrowserSupported=function(){var e,n,i,r,o;if(e=!0,window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a"))for(o=t.blacklistedBrowsers,i=0,r=o.length;r>i;i++)n=o[i],n.test(navigator.userAgent)&&(e=!1);else e=!1;else e=!1;return e},a=function(t,e){var n,i,r,o;for(o=[],i=0,r=t.length;r>i;i++)n=t[i],n!==e&&o.push(n);return o},r=function(t){return t.replace(/[\-_](\w)/g,function(t){return t[1].toUpperCase()})},t.createElement=function(t){var e;return e=document.createElement("div"),e.innerHTML=t,e.childNodes[0]},t.elementInside=function(t,e){if(t===e)return!0;for(;t=t.parentNode;)if(t===e)return!0;return!1},t.isValidMimeType=function(t,e){var n,i,r,o;if(!e)return!0;for(e=e.split(","),n=t.replace(/\/.*$/,""),r=0,o=e.length;o>r;r++)if(i=e[r],i=i.trim(),/\/\*$/.test(i)){if(n===i.replace(/\/.*$/,""))return!0}else if(t===i)return!0;return!1},"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.fn.dropzone=function(e){return this.each(function(){return new t(this,e)})}),"undefined"!=typeof n&&null!==n?n.exports=t:window.Dropzone=t,o=function(t,e){var n,i,r,o,s,a,l,u,c;if(r=!1,c=!0,i=t.document,u=i.documentElement,n=i.addEventListener?"addEventListener":"attachEvent",l=i.addEventListener?"removeEventListener":"detachEvent",a=i.addEventListener?"":"on",o=function(n){return"readystatechange"!==n.type||"complete"===i.readyState?(("load"===n.type?t:i)[l](a+n.type,o,!1),!r&&(r=!0)?e.call(t,n.type||n):void 0):void 0},s=function(){var t;try{u.doScroll("left")}catch(e){return t=e,setTimeout(s,50),void 0}return o("poll")},"complete"!==i.readyState){if(i.createEventObject&&u.doScroll){try{c=!t.frameElement}catch(h){}c&&s()}return i[n](a+"DOMContentLoaded",o,!1),i[n](a+"readystatechange",o,!1),t[n](a+"load",o,!1)}},o(window,t.discover)}).call(this)}),t.alias("component-emitter/index.js","dropzone/deps/emitter/index.js"),"object"==typeof exports?module.exports=t("dropzone"):"function"==typeof define&&define.amd?define(function(){return t("dropzone")}):window.Dropzone=t("dropzone")}();var inflections=window.inflections={plurals:[],singulars:[],uncountables:[],humans:[]},PLURALS=inflections.plurals,SINGULARS=inflections.singulars,UNCOUNTABLES=inflections.uncountables,HUMANS=inflections.humans,plural=function(t,e){inflections.plurals.unshift([t,e])},singular=function(t,e){inflections.singulars.unshift([t,e])},uncountable=function(t){inflections.uncountables.unshift(t)},irregular=function(t,e){t.substr(0,1).toUpperCase()==e.substr(0,1).toUpperCase()?(plural(new RegExp("("+t.substr(0,1)+")"+t.substr(1)+"$","i"),"$1"+e.substr(1)),plural(new RegExp("("+e.substr(0,1)+")"+e.substr(1)+"$","i"),"$1"+e.substr(1)),singular(new RegExp("("+e.substr(0,1)+")"+e.substr(1)+"$","i"),"$1"+t.substr(1))):(plural(new RegExp(t.substr(0,1).toUpperCase()+t.substr(1)+"$"),e.substr(0,1).toUpperCase()+e.substr(1)),plural(new RegExp(t.substr(0,1).toLowerCase()+t.substr(1)+"$"),e.substr(0,1).toLowerCase()+e.substr(1)),plural(new RegExp(e.substr(0,1).toUpperCase()+e.substr(1)+"$"),e.substr(0,1).toUpperCase()+e.substr(1)),plural(new RegExp(e.substr(0,1).toLowerCase()+e.substr(1)+"$"),e.substr(0,1).toLowerCase()+e.substr(1)),singular(new RegExp(e.substr(0,1).toUpperCase()+e.substr(1)+"$"),t.substr(0,1).toUpperCase()+t.substr(1)),singular(new RegExp(e.substr(0,1).toLowerCase()+e.substr(1)+"$"),t.substr(0,1).toLowerCase()+t.substr(1)))},human=function(t,e){inflections.humans.push([t,e])};plural(/$/,"s"),plural(/s$/i,"s"),plural(/(ax|test)is$/i,"$1es"),plural(/(octop|vir)us$/i,"$1i"),plural(/(alias|status)$/i,"$1es"),plural(/(bu)s$/i,"$1ses"),plural(/(buffal|tomat)o$/i,"$1oes"),plural(/([ti])um$/i,"$1a"),plural(/sis$/i,"ses"),plural(/(?:([^f])fe|([lr])f)$/i,"$1$2ves"),plural(/(hive)$/i,"$1s"),plural(/([^aeiouy]|qu)y$/i,"$1ies"),plural(/(x|ch|ss|sh)$/i,"$1es"),plural(/(matr|vert|ind)(?:ix|ex)$/i,"$1ices"),plural(/([m|l])ouse$/i,"$1ice"),plural(/^(ox)$/i,"$1en"),plural(/(quiz)$/i,"$1zes"),singular(/s$/i,""),singular(/(n)ews$/i,"$1ews"),singular(/([ti])a$/i,"$1um"),singular(/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$/i,"$1$2sis"),singular(/(^analy)ses$/i,"$1sis"),singular(/([^f])ves$/i,"$1fe"),singular(/(hive)s$/i,"$1"),singular(/(tive)s$/i,"$1"),singular(/([lr])ves$/i,"$1f"),singular(/([^aeiouy]|qu)ies$/i,"$1y"),singular(/(s)eries$/i,"$1eries"),singular(/(m)ovies$/i,"$1ovie"),singular(/(x|ch|ss|sh)es$/i,"$1"),singular(/([m|l])ice$/i,"$1ouse"),singular(/(bus)es$/i,"$1"),singular(/(o)es$/i,"$1"),singular(/(shoe)s$/i,"$1"),singular(/(cris|ax|test)es$/i,"$1is"),singular(/(octop|vir)i$/i,"$1us"),singular(/(alias|status)es$/i,"$1"),singular(/^(ox)en/i,"$1"),singular(/(vert|ind)ices$/i,"$1ex"),singular(/(matr)ices$/i,"$1ix"),singular(/(quiz)zes$/i,"$1"),singular(/(database)s$/i,"$1"),irregular("person","people"),irregular("man","men"),irregular("child","children"),irregular("sex","sexes"),irregular("move","moves"),irregular("cow","kine"),irregular("lens","lenses"),uncountable("equipment"),uncountable("information"),uncountable("rice"),uncountable("money"),uncountable("species"),uncountable("series"),uncountable("fish"),uncountable("sheep"),uncountable("jeans"),window.pluralize=function(t){for(var e=t.toLowerCase(),n=0;n<UNCOUNTABLES.length;n++){var i=UNCOUNTABLES[n];if(e==i)return t}for(var n=0;n<PLURALS.length;n++){var r=PLURALS[n][0],o=PLURALS[n][1];if(r.test(t))return t.replace(r,o)}},window.singularize=function(t){for(var e=t.toLowerCase(),n=0;n<UNCOUNTABLES.length;n++){var i=UNCOUNTABLES[n];if(e==i)return t}for(var n=0;n<SINGULARS.length;n++){var r=SINGULARS[n][0],o=SINGULARS[n][1];if(r.test(t))return t.replace(r,o)}};var MD5=function(t){function e(t,e){return t<<e|t>>>32-e}function n(t,e){var n,i,r,o,s;return r=2147483648&t,o=2147483648&e,n=1073741824&t,i=1073741824&e,s=(1073741823&t)+(1073741823&e),n&i?2147483648^s^r^o:n|i?1073741824&s?3221225472^s^r^o:1073741824^s^r^o:s^r^o}function i(t,e,n){return t&e|~t&n}function r(t,e,n){return t&n|e&~n}function o(t,e,n){return t^e^n}function s(t,e,n){return e^(t|~n)}function a(t,r,o,s,a,l,u){return t=n(t,n(n(i(r,o,s),a),u)),n(e(t,l),r)}function l(t,i,o,s,a,l,u){return t=n(t,n(n(r(i,o,s),a),u)),n(e(t,l),i)}function u(t,i,r,s,a,l,u){return t=n(t,n(n(o(i,r,s),a),u)),n(e(t,l),i)}function c(t,i,r,o,a,l,u){return t=n(t,n(n(s(i,r,o),a),u)),n(e(t,l),i)}function h(t){for(var e,n=t.length,i=n+8,r=(i-i%64)/64,o=16*(r+1),s=Array(o-1),a=0,l=0;n>l;)e=(l-l%4)/4,a=8*(l%4),s[e]=s[e]|t.charCodeAt(l)<<a,l++;return e=(l-l%4)/4,a=8*(l%4),s[e]=s[e]|128<<a,s[o-2]=n<<3,s[o-1]=n>>>29,s}function p(t){var e,n,i="",r="";for(n=0;3>=n;n++)e=255&t>>>8*n,r="0"+e.toString(16),i+=r.substr(r.length-2,2);return i}function f(t){t=t.replace(/rn/g,"n");for(var e="",n=0;n<t.length;n++){var i=t.charCodeAt(n);128>i?e+=String.fromCharCode(i):i>127&&2048>i?(e+=String.fromCharCode(192|i>>6),e+=String.fromCharCode(128|63&i)):(e+=String.fromCharCode(224|i>>12),e+=String.fromCharCode(128|63&i>>6),e+=String.fromCharCode(128|63&i))}return e}var d,m,g,v,y,b,w,_,x,S=Array(),k=7,C=12,E=17,T=22,M=5,P=9,A=14,O=20,N=4,D=11,I=16,L=23,$=6,z=10,R=15,B=21;for(t=f(t),S=h(t),b=1732584193,w=4023233417,_=2562383102,x=271733878,d=0;d<S.length;d+=16)m=b,g=w,v=_,y=x,b=a(b,w,_,x,S[d+0],k,3614090360),x=a(x,b,w,_,S[d+1],C,3905402710),_=a(_,x,b,w,S[d+2],E,606105819),w=a(w,_,x,b,S[d+3],T,3250441966),b=a(b,w,_,x,S[d+4],k,4118548399),x=a(x,b,w,_,S[d+5],C,1200080426),_=a(_,x,b,w,S[d+6],E,2821735955),w=a(w,_,x,b,S[d+7],T,4249261313),b=a(b,w,_,x,S[d+8],k,1770035416),x=a(x,b,w,_,S[d+9],C,2336552879),_=a(_,x,b,w,S[d+10],E,4294925233),w=a(w,_,x,b,S[d+11],T,2304563134),b=a(b,w,_,x,S[d+12],k,1804603682),x=a(x,b,w,_,S[d+13],C,4254626195),_=a(_,x,b,w,S[d+14],E,2792965006),w=a(w,_,x,b,S[d+15],T,1236535329),b=l(b,w,_,x,S[d+1],M,4129170786),x=l(x,b,w,_,S[d+6],P,3225465664),_=l(_,x,b,w,S[d+11],A,643717713),w=l(w,_,x,b,S[d+0],O,3921069994),b=l(b,w,_,x,S[d+5],M,3593408605),x=l(x,b,w,_,S[d+10],P,38016083),_=l(_,x,b,w,S[d+15],A,3634488961),w=l(w,_,x,b,S[d+4],O,3889429448),b=l(b,w,_,x,S[d+9],M,568446438),x=l(x,b,w,_,S[d+14],P,3275163606),_=l(_,x,b,w,S[d+3],A,4107603335),w=l(w,_,x,b,S[d+8],O,1163531501),b=l(b,w,_,x,S[d+13],M,2850285829),x=l(x,b,w,_,S[d+2],P,4243563512),_=l(_,x,b,w,S[d+7],A,1735328473),w=l(w,_,x,b,S[d+12],O,2368359562),b=u(b,w,_,x,S[d+5],N,4294588738),x=u(x,b,w,_,S[d+8],D,2272392833),_=u(_,x,b,w,S[d+11],I,1839030562),w=u(w,_,x,b,S[d+14],L,4259657740),b=u(b,w,_,x,S[d+1],N,2763975236),x=u(x,b,w,_,S[d+4],D,1272893353),_=u(_,x,b,w,S[d+7],I,4139469664),w=u(w,_,x,b,S[d+10],L,3200236656),b=u(b,w,_,x,S[d+13],N,681279174),x=u(x,b,w,_,S[d+0],D,3936430074),_=u(_,x,b,w,S[d+3],I,3572445317),w=u(w,_,x,b,S[d+6],L,76029189),b=u(b,w,_,x,S[d+9],N,3654602809),x=u(x,b,w,_,S[d+12],D,3873151461),_=u(_,x,b,w,S[d+15],I,530742520),w=u(w,_,x,b,S[d+2],L,3299628645),b=c(b,w,_,x,S[d+0],$,4096336452),x=c(x,b,w,_,S[d+7],z,1126891415),_=c(_,x,b,w,S[d+14],R,2878612391),w=c(w,_,x,b,S[d+5],B,4237533241),b=c(b,w,_,x,S[d+12],$,1700485571),x=c(x,b,w,_,S[d+3],z,2399980690),_=c(_,x,b,w,S[d+10],R,4293915773),w=c(w,_,x,b,S[d+1],B,2240044497),b=c(b,w,_,x,S[d+8],$,1873313359),x=c(x,b,w,_,S[d+15],z,4264355552),_=c(_,x,b,w,S[d+6],R,2734768916),w=c(w,_,x,b,S[d+13],B,1309151649),b=c(b,w,_,x,S[d+4],$,4149444226),x=c(x,b,w,_,S[d+11],z,3174756917),_=c(_,x,b,w,S[d+2],R,718787259),w=c(w,_,x,b,S[d+9],B,3951481745),b=n(b,m),w=n(w,g),_=n(_,v),x=n(x,y);var F=p(b)+p(w)+p(_)+p(x);return F.toLowerCase()};window.Gravatar={defaults:{secure:!1,placeholder:null,size:null},get:function(t,e){var n,i,r,o=[];return t||(t=""),e=_.extend({},Gravatar.defaults,e),e.secure?(n="https",i="secure.gravatar.com"):(n="http",i="gravatar.com"),r=e.encrypt===!1?t:MD5(t),e.placeholder&&o.push("default="+e.placeholder),e.size&&o.push("size="+e.size),o=0==o.length?"":"?"+o.join("&"),n+"://"+i+"/avatar/"+r+o}};/*

Copyright (C) 2011 by Yehuda Katz

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

*/
var Handlebars={};!function(t,e){t.VERSION="1.0.0",t.COMPILER_REVISION=4,t.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"},t.helpers={},t.partials={};var n=Object.prototype.toString,i="[object Function]",r="[object Object]";t.registerHelper=function(e,i,o){if(n.call(e)===r){if(o||i)throw new t.Exception("Arg not supported with multiple helpers");t.Utils.extend(this.helpers,e)}else o&&(i.not=o),this.helpers[e]=i},t.registerPartial=function(e,i){n.call(e)===r?t.Utils.extend(this.partials,e):this.partials[e]=i},t.registerHelper("helperMissing",function(t){if(2===arguments.length)return e;throw new Error("Missing helper: '"+t+"'")}),t.registerHelper("blockHelperMissing",function(e,r){var o=r.inverse||function(){},s=r.fn,a=n.call(e);return a===i&&(e=e.call(this)),e===!0?s(this):e===!1||null==e?o(this):"[object Array]"===a?e.length>0?t.helpers.each(e,r):o(this):s(e)}),t.K=function(){},t.createFrame=Object.create||function(e){t.K.prototype=e;var n=new t.K;return t.K.prototype=null,n},t.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,methodMap:{0:"debug",1:"info",2:"warn",3:"error"},log:function(e,n){if(t.logger.level<=e){var i=t.logger.methodMap[e];"undefined"!=typeof console&&console[i]&&console[i].call(console,n)}}},t.log=function(e,n){t.logger.log(e,n)},t.registerHelper("each",function(e,r){var o,s=r.fn,a=r.inverse,l=0,u="",c=n.call(e);if(c===i&&(e=e.call(this)),r.data&&(o=t.createFrame(r.data)),e&&"object"==typeof e)if(e instanceof Array)for(var h=e.length;h>l;l++)o&&(o.index=l),u+=s(e[l],{data:o});else for(var p in e)e.hasOwnProperty(p)&&(o&&(o.key=p),u+=s(e[p],{data:o}),l++);return 0===l&&(u=a(this)),u}),t.registerHelper("if",function(e,r){var o=n.call(e);return o===i&&(e=e.call(this)),!e||t.Utils.isEmpty(e)?r.inverse(this):r.fn(this)}),t.registerHelper("unless",function(e,n){return t.helpers["if"].call(this,e,{fn:n.inverse,inverse:n.fn})}),t.registerHelper("with",function(e,r){var o=n.call(e);return o===i&&(e=e.call(this)),t.Utils.isEmpty(e)?void 0:r.fn(e)}),t.registerHelper("log",function(e,n){var i=n.data&&null!=n.data.level?parseInt(n.data.level,10):1;t.log(i,e)});var o=function(){function t(){this.yy={}}var e={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,simpleInverse:6,statements:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,inMustache:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,params:27,hash:28,dataName:29,param:30,STRING:31,INTEGER:32,BOOLEAN:33,hashSegments:34,hashSegment:35,ID:36,EQUALS:37,DATA:38,pathSegments:39,SEP:40,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",31:"STRING",32:"INTEGER",33:"BOOLEAN",36:"ID",37:"EQUALS",38:"DATA",40:"SEP"},productions_:[0,[3,2],[4,2],[4,3],[4,2],[4,1],[4,1],[4,0],[7,1],[7,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,3],[13,4],[6,2],[17,3],[17,2],[17,2],[17,1],[17,1],[27,2],[27,1],[30,1],[30,1],[30,1],[30,1],[30,1],[28,1],[34,2],[34,1],[35,3],[35,3],[35,3],[35,3],[35,3],[26,1],[26,1],[26,1],[29,2],[21,1],[39,3],[39,1]],performAction:function(t,e,n,i,r,o){var s=o.length-1;switch(r){case 1:return o[s-1];case 2:this.$=new i.ProgramNode([],o[s]);break;case 3:this.$=new i.ProgramNode(o[s-2],o[s]);break;case 4:this.$=new i.ProgramNode(o[s-1],[]);break;case 5:this.$=new i.ProgramNode(o[s]);break;case 6:this.$=new i.ProgramNode([],[]);break;case 7:this.$=new i.ProgramNode([]);break;case 8:this.$=[o[s]];break;case 9:o[s-1].push(o[s]),this.$=o[s-1];break;case 10:this.$=new i.BlockNode(o[s-2],o[s-1].inverse,o[s-1],o[s]);break;case 11:this.$=new i.BlockNode(o[s-2],o[s-1],o[s-1].inverse,o[s]);break;case 12:this.$=o[s];break;case 13:this.$=o[s];break;case 14:this.$=new i.ContentNode(o[s]);break;case 15:this.$=new i.CommentNode(o[s]);break;case 16:this.$=new i.MustacheNode(o[s-1][0],o[s-1][1]);break;case 17:this.$=new i.MustacheNode(o[s-1][0],o[s-1][1]);break;case 18:this.$=o[s-1];break;case 19:this.$=new i.MustacheNode(o[s-1][0],o[s-1][1],"&"===o[s-2][2]);break;case 20:this.$=new i.MustacheNode(o[s-1][0],o[s-1][1],!0);break;case 21:this.$=new i.PartialNode(o[s-1]);break;case 22:this.$=new i.PartialNode(o[s-2],o[s-1]);break;case 23:break;case 24:this.$=[[o[s-2]].concat(o[s-1]),o[s]];break;case 25:this.$=[[o[s-1]].concat(o[s]),null];break;case 26:this.$=[[o[s-1]],o[s]];break;case 27:this.$=[[o[s]],null];break;case 28:this.$=[[o[s]],null];break;case 29:o[s-1].push(o[s]),this.$=o[s-1];break;case 30:this.$=[o[s]];break;case 31:this.$=o[s];break;case 32:this.$=new i.StringNode(o[s]);break;case 33:this.$=new i.IntegerNode(o[s]);break;case 34:this.$=new i.BooleanNode(o[s]);break;case 35:this.$=o[s];break;case 36:this.$=new i.HashNode(o[s]);break;case 37:o[s-1].push(o[s]),this.$=o[s-1];break;case 38:this.$=[o[s]];break;case 39:this.$=[o[s-2],o[s]];break;case 40:this.$=[o[s-2],new i.StringNode(o[s])];break;case 41:this.$=[o[s-2],new i.IntegerNode(o[s])];break;case 42:this.$=[o[s-2],new i.BooleanNode(o[s])];break;case 43:this.$=[o[s-2],o[s]];break;case 44:this.$=new i.PartialNameNode(o[s]);break;case 45:this.$=new i.PartialNameNode(new i.StringNode(o[s]));break;case 46:this.$=new i.PartialNameNode(new i.IntegerNode(o[s]));break;case 47:this.$=new i.DataNode(o[s]);break;case 48:this.$=new i.IdNode(o[s]);break;case 49:o[s-2].push({part:o[s],separator:o[s-1]}),this.$=o[s-2];break;case 50:this.$=[{part:o[s]}]}},table:[{3:1,4:2,5:[2,7],6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],22:[1,14],23:[1,15],25:[1,16]},{1:[3]},{5:[1,17]},{5:[2,6],7:18,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,6],22:[1,14],23:[1,15],25:[1,16]},{5:[2,5],6:20,8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,5],22:[1,14],23:[1,15],25:[1,16]},{17:23,18:[1,22],21:24,29:25,36:[1,28],38:[1,27],39:26},{5:[2,8],14:[2,8],15:[2,8],16:[2,8],19:[2,8],20:[2,8],22:[2,8],23:[2,8],25:[2,8]},{4:29,6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,7],22:[1,14],23:[1,15],25:[1,16]},{4:30,6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,7],22:[1,14],23:[1,15],25:[1,16]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{17:31,21:24,29:25,36:[1,28],38:[1,27],39:26},{17:32,21:24,29:25,36:[1,28],38:[1,27],39:26},{17:33,21:24,29:25,36:[1,28],38:[1,27],39:26},{21:35,26:34,31:[1,36],32:[1,37],36:[1,28],39:26},{1:[2,1]},{5:[2,2],8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,2],22:[1,14],23:[1,15],25:[1,16]},{17:23,21:24,29:25,36:[1,28],38:[1,27],39:26},{5:[2,4],7:38,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,4],22:[1,14],23:[1,15],25:[1,16]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{5:[2,23],14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{18:[1,39]},{18:[2,27],21:44,24:[2,27],27:40,28:41,29:48,30:42,31:[1,45],32:[1,46],33:[1,47],34:43,35:49,36:[1,50],38:[1,27],39:26},{18:[2,28],24:[2,28]},{18:[2,48],24:[2,48],31:[2,48],32:[2,48],33:[2,48],36:[2,48],38:[2,48],40:[1,51]},{21:52,36:[1,28],39:26},{18:[2,50],24:[2,50],31:[2,50],32:[2,50],33:[2,50],36:[2,50],38:[2,50],40:[2,50]},{10:53,20:[1,54]},{10:55,20:[1,54]},{18:[1,56]},{18:[1,57]},{24:[1,58]},{18:[1,59],21:60,36:[1,28],39:26},{18:[2,44],36:[2,44]},{18:[2,45],36:[2,45]},{18:[2,46],36:[2,46]},{5:[2,3],8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,3],22:[1,14],23:[1,15],25:[1,16]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{18:[2,25],21:44,24:[2,25],28:61,29:48,30:62,31:[1,45],32:[1,46],33:[1,47],34:43,35:49,36:[1,50],38:[1,27],39:26},{18:[2,26],24:[2,26]},{18:[2,30],24:[2,30],31:[2,30],32:[2,30],33:[2,30],36:[2,30],38:[2,30]},{18:[2,36],24:[2,36],35:63,36:[1,64]},{18:[2,31],24:[2,31],31:[2,31],32:[2,31],33:[2,31],36:[2,31],38:[2,31]},{18:[2,32],24:[2,32],31:[2,32],32:[2,32],33:[2,32],36:[2,32],38:[2,32]},{18:[2,33],24:[2,33],31:[2,33],32:[2,33],33:[2,33],36:[2,33],38:[2,33]},{18:[2,34],24:[2,34],31:[2,34],32:[2,34],33:[2,34],36:[2,34],38:[2,34]},{18:[2,35],24:[2,35],31:[2,35],32:[2,35],33:[2,35],36:[2,35],38:[2,35]},{18:[2,38],24:[2,38],36:[2,38]},{18:[2,50],24:[2,50],31:[2,50],32:[2,50],33:[2,50],36:[2,50],37:[1,65],38:[2,50],40:[2,50]},{36:[1,66]},{18:[2,47],24:[2,47],31:[2,47],32:[2,47],33:[2,47],36:[2,47],38:[2,47]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{21:67,36:[1,28],39:26},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,68]},{18:[2,24],24:[2,24]},{18:[2,29],24:[2,29],31:[2,29],32:[2,29],33:[2,29],36:[2,29],38:[2,29]},{18:[2,37],24:[2,37],36:[2,37]},{37:[1,65]},{21:69,29:73,31:[1,70],32:[1,71],33:[1,72],36:[1,28],38:[1,27],39:26},{18:[2,49],24:[2,49],31:[2,49],32:[2,49],33:[2,49],36:[2,49],38:[2,49],40:[2,49]},{18:[1,74]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{18:[2,39],24:[2,39],36:[2,39]},{18:[2,40],24:[2,40],36:[2,40]},{18:[2,41],24:[2,41],36:[2,41]},{18:[2,42],24:[2,42],36:[2,42]},{18:[2,43],24:[2,43],36:[2,43]},{5:[2,18],14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]}],defaultActions:{17:[2,1]},parseError:function(t){throw new Error(t)},parse:function(t){function e(){var t;return t=n.lexer.lex()||1,"number"!=typeof t&&(t=n.symbols_[t]||t),t}var n=this,i=[0],r=[null],o=[],s=this.table,a="",l=0,u=0,c=0;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var h=this.lexer.yylloc;o.push(h);var p=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var f,d,m,g,v,y,b,w,_,x={};;){if(m=i[i.length-1],this.defaultActions[m]?g=this.defaultActions[m]:((null===f||"undefined"==typeof f)&&(f=e()),g=s[m]&&s[m][f]),"undefined"==typeof g||!g.length||!g[0]){var S="";if(!c){_=[];for(y in s[m])this.terminals_[y]&&y>2&&_.push("'"+this.terminals_[y]+"'");S=this.lexer.showPosition?"Parse error on line "+(l+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+_.join(", ")+", got '"+(this.terminals_[f]||f)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==f?"end of input":"'"+(this.terminals_[f]||f)+"'"),this.parseError(S,{text:this.lexer.match,token:this.terminals_[f]||f,line:this.lexer.yylineno,loc:h,expected:_})}}if(g[0]instanceof Array&&g.length>1)throw new Error("Parse Error: multiple actions possible at state: "+m+", token: "+f);switch(g[0]){case 1:i.push(f),r.push(this.lexer.yytext),o.push(this.lexer.yylloc),i.push(g[1]),f=null,d?(f=d,d=null):(u=this.lexer.yyleng,a=this.lexer.yytext,l=this.lexer.yylineno,h=this.lexer.yylloc,c>0&&c--);break;case 2:if(b=this.productions_[g[1]][1],x.$=r[r.length-b],x._$={first_line:o[o.length-(b||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(b||1)].first_column,last_column:o[o.length-1].last_column},p&&(x._$.range=[o[o.length-(b||1)].range[0],o[o.length-1].range[1]]),v=this.performAction.call(x,a,u,l,this.yy,g[1],r,o),"undefined"!=typeof v)return v;b&&(i=i.slice(0,2*-1*b),r=r.slice(0,-1*b),o=o.slice(0,-1*b)),i.push(this.productions_[g[1]][0]),r.push(x.$),o.push(x._$),w=s[i[i.length-2]][i[i.length-1]],i.push(w);break;case 3:return!0}}return!0}},n=function(){var t={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t){return this._input=t,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t;var e=t.match(/(?:\r\n?|\n).*/g);return e?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,n=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e-1),this.offset-=e;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var r=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===i.length?this.yylloc.first_column:0)+i[i.length-n.length].length-n[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[r[0],r[0]+this.yyleng-e]),this},more:function(){return this._more=!0,this},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var t,e,n,i,r;this._more||(this.yytext="",this.match="");for(var o=this._currentRules(),s=0;s<o.length&&(n=this._input.match(this.rules[o[s]]),!n||e&&!(n[0].length>e[0].length)||(e=n,i=s,this.options.flex));s++);return e?(r=e[0].match(/(?:\r\n?|\n).*/g),r&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],t=this.performAction.call(this,this.yy,this,o[i],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),t?t:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return"undefined"!=typeof t?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)}};return t.options={},t.performAction=function(t,e,n,i){switch(n){case 0:return e.yytext="\\",14;case 1:if("\\"!==e.yytext.slice(-1)&&this.begin("mu"),"\\"===e.yytext.slice(-1)&&(e.yytext=e.yytext.substr(0,e.yyleng-1),this.begin("emu")),e.yytext)return 14;break;case 2:return 14;case 3:return"\\"!==e.yytext.slice(-1)&&this.popState(),"\\"===e.yytext.slice(-1)&&(e.yytext=e.yytext.substr(0,e.yyleng-1)),14;case 4:return e.yytext=e.yytext.substr(0,e.yyleng-4),this.popState(),15;case 5:return 25;case 6:return 16;case 7:return 20;case 8:return 19;case 9:return 19;case 10:return 23;case 11:return 22;case 12:this.popState(),this.begin("com");break;case 13:return e.yytext=e.yytext.substr(3,e.yyleng-5),this.popState(),15;case 14:return 22;case 15:return 37;case 16:return 36;case 17:return 36;case 18:return 40;case 19:break;case 20:return this.popState(),24;case 21:return this.popState(),18;case 22:return e.yytext=e.yytext.substr(1,e.yyleng-2).replace(/\\"/g,'"'),31;case 23:return e.yytext=e.yytext.substr(1,e.yyleng-2).replace(/\\'/g,"'"),31;case 24:return 38;case 25:return 33;case 26:return 33;case 27:return 32;case 28:return 36;case 29:return e.yytext=e.yytext.substr(1,e.yyleng-2),36;case 30:return"INVALID";case 31:return 5}},t.rules=[/^(?:\\\\(?=(\{\{)))/,/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\{\{>)/,/^(?:\{\{#)/,/^(?:\{\{\/)/,/^(?:\{\{\^)/,/^(?:\{\{\s*else\b)/,/^(?:\{\{\{)/,/^(?:\{\{&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{)/,/^(?:=)/,/^(?:\.(?=[}\/ ]))/,/^(?:\.\.)/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}\}\})/,/^(?:\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=[}\s]))/,/^(?:false(?=[}\s]))/,/^(?:-?[0-9]+(?=[}\s]))/,/^(?:[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.]))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],t.conditions={mu:{rules:[5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],inclusive:!1},emu:{rules:[3],inclusive:!1},com:{rules:[4],inclusive:!1},INITIAL:{rules:[0,1,2,31],inclusive:!0}},t}();return e.lexer=n,t.prototype=e,e.Parser=t,new t}();t.Parser=o,t.parse=function(e){return e.constructor===t.AST.ProgramNode?e:(t.Parser.yy=t.AST,t.Parser.parse(e))},t.AST={},t.AST.ProgramNode=function(e,n){this.type="program",this.statements=e,n&&(this.inverse=new t.AST.ProgramNode(n))},t.AST.MustacheNode=function(t,e,n){this.type="mustache",this.escaped=!n,this.hash=e;var i=this.id=t[0],r=this.params=t.slice(1),o=this.eligibleHelper=i.isSimple;this.isHelper=o&&(r.length||e)},t.AST.PartialNode=function(t,e){this.type="partial",this.partialName=t,this.context=e},t.AST.BlockNode=function(e,n,i,r){var o=function(e,n){if(e.original!==n.original)throw new t.Exception(e.original+" doesn't match "+n.original)};o(e.id,r),this.type="block",this.mustache=e,this.program=n,this.inverse=i,this.inverse&&!this.program&&(this.isInverse=!0)},t.AST.ContentNode=function(t){this.type="content",this.string=t},t.AST.HashNode=function(t){this.type="hash",this.pairs=t},t.AST.IdNode=function(e){this.type="ID";for(var n="",i=[],r=0,o=0,s=e.length;s>o;o++){var a=e[o].part;if(n+=(e[o].separator||"")+a,".."===a||"."===a||"this"===a){if(i.length>0)throw new t.Exception("Invalid path: "+n);".."===a?r++:this.isScoped=!0}else i.push(a)}this.original=n,this.parts=i,this.string=i.join("."),this.depth=r,this.isSimple=1===e.length&&!this.isScoped&&0===r,this.stringModeValue=this.string},t.AST.PartialNameNode=function(t){this.type="PARTIAL_NAME",this.name=t.original},t.AST.DataNode=function(t){this.type="DATA",this.id=t},t.AST.StringNode=function(t){this.type="STRING",this.original=this.string=this.stringModeValue=t},t.AST.IntegerNode=function(t){this.type="INTEGER",this.original=this.integer=t,this.stringModeValue=Number(t)},t.AST.BooleanNode=function(t){this.type="BOOLEAN",this.bool=t,this.stringModeValue="true"===t},t.AST.CommentNode=function(t){this.type="comment",this.comment=t};var s=["description","fileName","lineNumber","message","name","number","stack"];t.Exception=function(){for(var t=Error.prototype.constructor.apply(this,arguments),e=0;e<s.length;e++)this[s[e]]=t[s[e]]},t.Exception.prototype=new Error,t.SafeString=function(t){this.string=t},t.SafeString.prototype.toString=function(){return this.string.toString()};var a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},l=/[&<>"'`]/g,u=/[&<>"'`]/,c=function(t){return a[t]||"&amp;"};t.Utils={extend:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},escapeExpression:function(e){return e instanceof t.SafeString?e.toString():null==e||e===!1?"":(e=e.toString(),u.test(e)?e.replace(l,c):e)},isEmpty:function(t){return t||0===t?"[object Array]"===n.call(t)&&0===t.length?!0:!1:!0}};var h=t.Compiler=function(){},p=t.JavaScriptCompiler=function(){};h.prototype={compiler:h,disassemble:function(){for(var t,e,n,i=this.opcodes,r=[],o=0,s=i.length;s>o;o++)if(t=i[o],"DECLARE"===t.opcode)r.push("DECLARE "+t.name+"="+t.value);else{e=[];for(var a=0;a<t.args.length;a++)n=t.args[a],"string"==typeof n&&(n='"'+n.replace("\n","\\n")+'"'),e.push(n);r.push(t.opcode+" "+e.join(" "))}return r.join("\n")},equals:function(t){var e=this.opcodes.length;if(t.opcodes.length!==e)return!1;for(var n=0;e>n;n++){var i=this.opcodes[n],r=t.opcodes[n];if(i.opcode!==r.opcode||i.args.length!==r.args.length)return!1;for(var o=0;o<i.args.length;o++)if(i.args[o]!==r.args[o])return!1}if(e=this.children.length,t.children.length!==e)return!1;for(n=0;e>n;n++)if(!this.children[n].equals(t.children[n]))return!1;return!0},guid:0,compile:function(t,e){this.children=[],this.depths={list:[]},this.options=e;var n=this.options.knownHelpers;if(this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0},n)for(var i in n)this.options.knownHelpers[i]=n[i];return this.program(t)},accept:function(t){return this[t.type](t)},program:function(t){var e,n=t.statements;this.opcodes=[];for(var i=0,r=n.length;r>i;i++)e=n[i],this[e.type](e);return this.isSimple=1===r,this.depths.list=this.depths.list.sort(function(t,e){return t-e}),this},compileProgram:function(t){var e,n=(new this.compiler).compile(t,this.options),i=this.guid++;this.usePartial=this.usePartial||n.usePartial,this.children[i]=n;for(var r=0,o=n.depths.list.length;o>r;r++)e=n.depths.list[r],2>e||this.addDepth(e-1);return i},block:function(t){var e=t.mustache,n=t.program,i=t.inverse;n&&(n=this.compileProgram(n)),i&&(i=this.compileProgram(i));var r=this.classifyMustache(e);"helper"===r?this.helperMustache(e,n,i):"simple"===r?(this.simpleMustache(e),this.opcode("pushProgram",n),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousMustache(e,n,i),this.opcode("pushProgram",n),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(t){var e,n,i=t.pairs;this.opcode("pushHash");for(var r=0,o=i.length;o>r;r++)e=i[r],n=e[1],this.options.stringParams?(n.depth&&this.addDepth(n.depth),this.opcode("getContext",n.depth||0),this.opcode("pushStringParam",n.stringModeValue,n.type)):this.accept(n),this.opcode("assignToHash",e[0]);this.opcode("popHash")},partial:function(t){var e=t.partialName;this.usePartial=!0,t.context?this.ID(t.context):this.opcode("push","depth0"),this.opcode("invokePartial",e.name),this.opcode("append")},content:function(t){this.opcode("appendContent",t.string)},mustache:function(t){var e=this.options,n=this.classifyMustache(t);"simple"===n?this.simpleMustache(t):"helper"===n?this.helperMustache(t):this.ambiguousMustache(t),t.escaped&&!e.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ambiguousMustache:function(t,e,n){var i=t.id,r=i.parts[0],o=null!=e||null!=n;this.opcode("getContext",i.depth),this.opcode("pushProgram",e),this.opcode("pushProgram",n),this.opcode("invokeAmbiguous",r,o)},simpleMustache:function(t){var e=t.id;"DATA"===e.type?this.DATA(e):e.parts.length?this.ID(e):(this.addDepth(e.depth),this.opcode("getContext",e.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperMustache:function(t,e,n){var i=this.setupFullMustacheParams(t,e,n),r=t.id.parts[0];if(this.options.knownHelpers[r])this.opcode("invokeKnownHelper",i.length,r);else{if(this.options.knownHelpersOnly)throw new Error("You specified knownHelpersOnly, but used the unknown helper "+r);this.opcode("invokeHelper",i.length,r)}},ID:function(t){this.addDepth(t.depth),this.opcode("getContext",t.depth);var e=t.parts[0];e?this.opcode("lookupOnContext",t.parts[0]):this.opcode("pushContext");for(var n=1,i=t.parts.length;i>n;n++)this.opcode("lookup",t.parts[n])},DATA:function(e){if(this.options.data=!0,e.id.isScoped||e.id.depth)throw new t.Exception("Scoped data references are not supported: "+e.original);this.opcode("lookupData");for(var n=e.id.parts,i=0,r=n.length;r>i;i++)this.opcode("lookup",n[i])},STRING:function(t){this.opcode("pushString",t.string)},INTEGER:function(t){this.opcode("pushLiteral",t.integer)},BOOLEAN:function(t){this.opcode("pushLiteral",t.bool)},comment:function(){},opcode:function(t){this.opcodes.push({opcode:t,args:[].slice.call(arguments,1)})},declare:function(t,e){this.opcodes.push({opcode:"DECLARE",name:t,value:e})},addDepth:function(t){if(isNaN(t))throw new Error("EWOT");0!==t&&(this.depths[t]||(this.depths[t]=!0,this.depths.list.push(t)))},classifyMustache:function(t){var e=t.isHelper,n=t.eligibleHelper,i=this.options;if(n&&!e){var r=t.id.parts[0];i.knownHelpers[r]?e=!0:i.knownHelpersOnly&&(n=!1)}return e?"helper":n?"ambiguous":"simple"},pushParams:function(t){for(var e,n=t.length;n--;)e=t[n],this.options.stringParams?(e.depth&&this.addDepth(e.depth),this.opcode("getContext",e.depth||0),this.opcode("pushStringParam",e.stringModeValue,e.type)):this[e.type](e)},setupMustacheParams:function(t){var e=t.params;return this.pushParams(e),t.hash?this.hash(t.hash):this.opcode("emptyHash"),e},setupFullMustacheParams:function(t,e,n){var i=t.params;return this.pushParams(i),this.opcode("pushProgram",e),this.opcode("pushProgram",n),t.hash?this.hash(t.hash):this.opcode("emptyHash"),i}};var f=function(t){this.value=t};p.prototype={nameLookup:function(t,e){return/^[0-9]+$/.test(e)?t+"["+e+"]":p.isValidJavaScriptVariableName(e)?t+"."+e:t+"['"+e+"']"},appendToBuffer:function(t){return this.environment.isSimple?"return "+t+";":{appendToBuffer:!0,content:t,toString:function(){return"buffer += "+t+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(e,n,i,r){this.environment=e,this.options=n||{},t.log(t.logger.DEBUG,this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!i,this.context=i||{programs:[],environments:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.compileStack=[],this.inlineStack=[],this.compileChildren(e,n);var o,s=e.opcodes;for(this.i=0,v=s.length;this.i<v;this.i++)o=s[this.i],"DECLARE"===o.opcode?this[o.name]=o.value:this[o.opcode].apply(this,o.args);return this.createFunctionContext(r)},nextOpcode:function(){var t=this.environment.opcodes;return t[this.i+1]},eat:function(){this.i=this.i+1},preamble:function(){var t=[];if(this.isChild)t.push("");else{var e=this.namespace,n="helpers = this.merge(helpers, "+e+".helpers);";this.environment.usePartial&&(n=n+" partials = this.merge(partials, "+e+".partials);"),this.options.data&&(n+=" data = data || {};"),t.push(n)}this.environment.isSimple?t.push(""):t.push(", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=t},createFunctionContext:function(e){var n=this.stackVars.concat(this.registers.list);if(n.length>0&&(this.source[1]=this.source[1]+", "+n.join(", ")),!this.isChild)for(var i in this.context.aliases)this.context.aliases.hasOwnProperty(i)&&(this.source[1]=this.source[1]+", "+i+"="+this.context.aliases[i]);this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.source.push("return buffer;");for(var r=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"],o=0,s=this.environment.depths.list.length;s>o;o++)r.push("depth"+this.environment.depths.list[o]);var a=this.mergeSource();if(!this.isChild){var l=t.COMPILER_REVISION,u=t.REVISION_CHANGES[l];a="this.compilerInfo = ["+l+",'"+u+"'];\n"+a}if(e)return r.push(a),Function.apply(this,r);var c="function "+(this.name||"")+"("+r.join(",")+") {\n  "+a+"}";return t.log(t.logger.DEBUG,c+"\n\n"),c},mergeSource:function(){for(var t,n="",i=0,r=this.source.length;r>i;i++){var o=this.source[i];o.appendToBuffer?t=t?t+"\n    + "+o.content:o.content:(t&&(n+="buffer += "+t+";\n  ",t=e),n+=o+"\n  ")}return n},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var t=["depth0"];this.setupParams(0,t),this.replaceStack(function(e){return t.splice(1,0,e),"blockHelperMissing.call("+t.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var t=["depth0"];this.setupParams(0,t);var e=this.topStack();t.splice(1,0,e),t[t.length-1]="options",this.source.push("if (!"+this.lastHelper+") { "+e+" = blockHelperMissing.call("+t.join(", ")+"); }")},appendContent:function(t){this.source.push(this.appendToBuffer(this.quotedString(t)))},append:function(){this.flushInline();var t=this.popStack();this.source.push("if("+t+" || "+t+" === 0) { "+this.appendToBuffer(t)+" }"),this.environment.isSimple&&this.source.push("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression",this.source.push(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(t){this.lastContext!==t&&(this.lastContext=t)},lookupOnContext:function(t){this.push(this.nameLookup("depth"+this.lastContext,t,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"',this.replaceStack(function(t){return"typeof "+t+" === functionType ? "+t+".apply(depth0) : "+t})},lookup:function(t){this.replaceStack(function(e){return e+" == null || "+e+" === false ? "+e+" : "+this.nameLookup(e,t,"context")})},lookupData:function(){this.push("data")},pushStringParam:function(t,e){this.pushStackLiteral("depth"+this.lastContext),this.pushString(e),"string"==typeof t?this.pushString(t):this.pushStackLiteral(t)},emptyHash:function(){this.pushStackLiteral("{}"),this.options.stringParams&&(this.register("hashTypes","{}"),this.register("hashContexts","{}"))},pushHash:function(){this.hash={values:[],types:[],contexts:[]}},popHash:function(){var t=this.hash;this.hash=e,this.options.stringParams&&(this.register("hashContexts","{"+t.contexts.join(",")+"}"),this.register("hashTypes","{"+t.types.join(",")+"}")),this.push("{\n    "+t.values.join(",\n    ")+"\n  }")},pushString:function(t){this.pushStackLiteral(this.quotedString(t))},push:function(t){return this.inlineStack.push(t),t},pushLiteral:function(t){this.pushStackLiteral(t)},pushProgram:function(t){null!=t?this.pushStackLiteral(this.programExpression(t)):this.pushStackLiteral(null)},invokeHelper:function(t,e){this.context.aliases.helperMissing="helpers.helperMissing";var n=this.lastHelper=this.setupHelper(t,e,!0),i=this.nameLookup("depth"+this.lastContext,e,"context");this.push(n.name+" || "+i),this.replaceStack(function(t){return t+" ? "+t+".call("+n.callParams+") "+": helperMissing.call("+n.helperMissingParams+")"})},invokeKnownHelper:function(t,e){var n=this.setupHelper(t,e);this.push(n.name+".call("+n.callParams+")")},invokeAmbiguous:function(t,e){this.context.aliases.functionType='"function"',this.pushStackLiteral("{}");var n=this.setupHelper(0,t,e),i=this.lastHelper=this.nameLookup("helpers",t,"helper"),r=this.nameLookup("depth"+this.lastContext,t,"context"),o=this.nextStack();this.source.push("if ("+o+" = "+i+") { "+o+" = "+o+".call("+n.callParams+"); }"),this.source.push("else { "+o+" = "+r+"; "+o+" = typeof "+o+" === functionType ? "+o+".apply(depth0) : "+o+"; }")},invokePartial:function(t){var e=[this.nameLookup("partials",t,"partial"),"'"+t+"'",this.popStack(),"helpers","partials"];this.options.data&&e.push("data"),this.context.aliases.self="this",this.push("self.invokePartial("+e.join(", ")+")")},assignToHash:function(t){var e,n,i=this.popStack();this.options.stringParams&&(n=this.popStack(),e=this.popStack());var r=this.hash;e&&r.contexts.push("'"+t+"': "+e),n&&r.types.push("'"+t+"': "+n),r.values.push("'"+t+"': ("+i+")")},compiler:p,compileChildren:function(t,e){for(var n,i,r=t.children,o=0,s=r.length;s>o;o++){n=r[o],i=new this.compiler;var a=this.matchExistingProgram(n);null==a?(this.context.programs.push(""),a=this.context.programs.length,n.index=a,n.name="program"+a,this.context.programs[a]=i.compile(n,e,this.context),this.context.environments[a]=n):(n.index=a,n.name="program"+a)}},matchExistingProgram:function(t){for(var e=0,n=this.context.environments.length;n>e;e++){var i=this.context.environments[e];
if(i&&i.equals(t))return e}},programExpression:function(t){if(this.context.aliases.self="this",null==t)return"self.noop";for(var e,n=this.environment.children[t],i=n.depths.list,r=[n.index,n.name,"data"],o=0,s=i.length;s>o;o++)e=i[o],1===e?r.push("depth0"):r.push("depth"+(e-1));return(0===i.length?"self.program(":"self.programWithDepth(")+r.join(", ")+")"},register:function(t,e){this.useRegister(t),this.source.push(t+" = "+e+";")},useRegister:function(t){this.registers[t]||(this.registers[t]=!0,this.registers.list.push(t))},pushStackLiteral:function(t){return this.push(new f(t))},pushStack:function(t){this.flushInline();var e=this.incrStack();return t&&this.source.push(e+" = "+t+";"),this.compileStack.push(e),e},replaceStack:function(t){var e,n="",i=this.isInline();if(i){var r=this.popStack(!0);if(r instanceof f)e=r.value;else{var o=this.stackSlot?this.topStackName():this.incrStack();n="("+this.push(o)+" = "+r+"),",e=this.topStack()}}else e=this.topStack();var s=t.call(this,e);return i?((this.inlineStack.length||this.compileStack.length)&&this.popStack(),this.push("("+n+s+")")):(/^stack/.test(e)||(e=this.nextStack()),this.source.push(e+" = ("+n+s+");")),e},nextStack:function(){return this.pushStack()},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var t=this.inlineStack;if(t.length){this.inlineStack=[];for(var e=0,n=t.length;n>e;e++){var i=t[e];i instanceof f?this.compileStack.push(i):this.pushStack(i)}}},isInline:function(){return this.inlineStack.length},popStack:function(t){var e=this.isInline(),n=(e?this.inlineStack:this.compileStack).pop();return!t&&n instanceof f?n.value:(e||this.stackSlot--,n)},topStack:function(t){var e=this.isInline()?this.inlineStack:this.compileStack,n=e[e.length-1];return!t&&n instanceof f?n.value:n},quotedString:function(t){return'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(t,e,n){var i=[];this.setupParams(t,i,n);var r=this.nameLookup("helpers",e,"helper");return{params:i,name:r,callParams:["depth0"].concat(i).join(", "),helperMissingParams:n&&["depth0",this.quotedString(e)].concat(i).join(", ")}},setupParams:function(t,e,n){var i,r,o,s=[],a=[],l=[];s.push("hash:"+this.popStack()),r=this.popStack(),o=this.popStack(),(o||r)&&(o||(this.context.aliases.self="this",o="self.noop"),r||(this.context.aliases.self="this",r="self.noop"),s.push("inverse:"+r),s.push("fn:"+o));for(var u=0;t>u;u++)i=this.popStack(),e.push(i),this.options.stringParams&&(l.push(this.popStack()),a.push(this.popStack()));return this.options.stringParams&&(s.push("contexts:["+a.join(",")+"]"),s.push("types:["+l.join(",")+"]"),s.push("hashContexts:hashContexts"),s.push("hashTypes:hashTypes")),this.options.data&&s.push("data:data"),s="{"+s.join(",")+"}",n?(this.register("options",s),e.push("options")):e.push(s),e.join(", ")}};for(var d="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),m=p.RESERVED_WORDS={},g=0,v=d.length;v>g;g++)m[d[g]]=!0;p.isValidJavaScriptVariableName=function(t){return!p.RESERVED_WORDS[t]&&/^[a-zA-Z_$][0-9a-zA-Z_$]+$/.test(t)?!0:!1},t.precompile=function(e,n){if(null==e||"string"!=typeof e&&e.constructor!==t.AST.ProgramNode)throw new t.Exception("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+e);n=n||{},"data"in n||(n.data=!0);var i=t.parse(e),r=(new h).compile(i,n);return(new p).compile(r,n)},t.compile=function(n,i){function r(){var r=t.parse(n),o=(new h).compile(r,i),s=(new p).compile(o,i,e,!0);return t.template(s)}if(null==n||"string"!=typeof n&&n.constructor!==t.AST.ProgramNode)throw new t.Exception("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+n);i=i||{},"data"in i||(i.data=!0);var o;return function(t,e){return o||(o=r()),o.call(this,t,e)}},t.VM={template:function(e){var n={escapeExpression:t.Utils.escapeExpression,invokePartial:t.VM.invokePartial,programs:[],program:function(e,n,i){var r=this.programs[e];return i?r=t.VM.program(e,n,i):r||(r=this.programs[e]=t.VM.program(e,n)),r},merge:function(e,n){var i=e||n;return e&&n&&(i={},t.Utils.extend(i,n),t.Utils.extend(i,e)),i},programWithDepth:t.VM.programWithDepth,noop:t.VM.noop,compilerInfo:null};return function(i,r){r=r||{};var o=e.call(n,t,i,r.helpers,r.partials,r.data),s=n.compilerInfo||[],a=s[0]||1,l=t.COMPILER_REVISION;if(a!==l){if(l>a){var u=t.REVISION_CHANGES[l],c=t.REVISION_CHANGES[a];throw"Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+u+") or downgrade your runtime to an older version ("+c+")."}throw"Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+s[1]+")."}return o}},programWithDepth:function(t,e,n){var i=Array.prototype.slice.call(arguments,3),r=function(t,r){return r=r||{},e.apply(this,[t,r.data||n].concat(i))};return r.program=t,r.depth=i.length,r},program:function(t,e,n){var i=function(t,i){return i=i||{},e(t,i.data||n)};return i.program=t,i.depth=0,i},noop:function(){return""},invokePartial:function(n,i,r,o,s,a){var l={helpers:o,partials:s,data:a};if(n===e)throw new t.Exception("The partial "+i+" could not be found");if(n instanceof Function)return n(r,l);if(t.compile)return s[i]=t.compile(n,{data:a!==e}),s[i](r,l);throw new t.Exception("The partial "+i+" could not be compiled when running in runtime-only mode")}},t.template=t.VM.template}(Handlebars),/*
 Copyright (c) 2013 Gildas Lormeau. All rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are met:

 1. Redistributions of source code must retain the above copyright notice,
 this list of conditions and the following disclaimer.

 2. Redistributions in binary form must reproduce the above copyright
 notice, this list of conditions and the following disclaimer in
 the documentation and/or other materials provided with the distribution.

 3. The names of the authors may not be used to endorse or promote products
 derived from this software without specific prior written permission.

 THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED WARRANTIES,
 INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND
 FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL JCRAFT,
 INC. OR ANY CONTRIBUTORS TO THIS SOFTWARE BE LIABLE FOR ANY DIRECT, INDIRECT,
 INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA,
 OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
function(t){function e(){var t=-1,e=this;e.append=function(n){var i,r=e.table;for(i=0;i<n.length;i++)t=t>>>8^r[255&(t^n[i])]},e.get=function(){return~t}}function n(t,e,n){return t.slice?t.slice(e,e+n):t.webkitSlice?t.webkitSlice(e,e+n):t.mozSlice?t.mozSlice(e,e+n):t.msSlice?t.msSlice(e,e+n):void 0}function i(t,e){var n,i;return n=new ArrayBuffer(t),i=new Uint8Array(n),e&&i.set(e,0),{buffer:n,array:i,view:new DataView(n)}}function r(){}function o(t){function e(e,n){var o=new Blob([t],{type:R});i=new a(o),i.init(function(){r.size=i.size,e()},n)}function n(t,e,n,r){i.readUint8Array(t,e,n,r)}var i,r=this;r.size=0,r.init=e,r.readUint8Array=n}function s(e){function n(t){for(var n=e.length;"="==e.charAt(n-1);)n--;o=e.indexOf(",")+1,s.size=Math.floor(.75*(n-o)),t()}function r(n,r,s){var a,l=i(r),u=4*Math.floor(n/3),c=4*Math.ceil((n+r)/3),h=t.atob(e.substring(u+o,c+o)),p=n-3*Math.floor(u/4);for(a=p;p+r>a;a++)l.array[a-p]=h.charCodeAt(a);s(l.array)}var o,s=this;s.size=0,s.init=n,s.readUint8Array=r}function a(t){function e(e){this.size=t.size,e()}function i(e,i,r,o){var s=new FileReader;s.onload=function(t){r(new Uint8Array(t.target.result))},s.onerror=o,s.readAsArrayBuffer(n(t,e,i))}var r=this;r.size=0,r.init=e,r.readUint8Array=i}function l(){}function u(t){function e(t){r=new Blob([],{type:R}),t()}function n(t,e){r=new Blob([r,E?t:t.buffer],{type:R}),e()}function i(e,n){var i=new FileReader;i.onload=function(t){e(t.target.result)},i.onerror=n,i.readAsText(r,t)}var r,o=this;o.init=e,o.writeUint8Array=n,o.getData=i}function c(e){function n(t){s+="data:"+(e||"")+";base64,",t()}function i(e,n){var i,r=a.length,o=a;for(a="",i=0;i<3*Math.floor((r+e.length)/3)-r;i++)o+=String.fromCharCode(e[i]);for(;i<e.length;i++)a+=String.fromCharCode(e[i]);o.length>2?s+=t.btoa(o):a=o,n()}function r(e){e(s+t.btoa(a))}var o=this,s="",a="";o.init=n,o.writeUint8Array=i,o.getData=r}function h(t){function e(e){r=new Blob([],{type:t}),e()}function n(e,n){r=new Blob([r,E?e:e.buffer],{type:t}),n()}function i(t){t(r)}var r,o=this;o.init=e,o.writeUint8Array=n,o.getData=i}function p(t,e,n,i,r,o,s,a,l,u){function c(){t.removeEventListener(B,h,!1),a(d)}function h(t){var e=t.data,i=e.data;e.onappend&&(d+=i.length,n.writeUint8Array(i,function(){o(!1,i),p()},u)),e.onflush&&(i?(d+=i.length,n.writeUint8Array(i,function(){o(!1,i),c()},u)):c()),e.progress&&s&&s(f+e.current,r)}function p(){f=m*L,r>f?e.readUint8Array(i+f,Math.min(L,r-f),function(e){t.postMessage({append:!0,data:e}),m++,s&&s(f,r),o(!0,e)},l):t.postMessage({flush:!0})}var f,d,m=0;d=0,t.addEventListener(B,h,!1),p()}function f(t,e,n,i,r,o,s,a,l,u){function c(){var d;h=p*L,r>h?e.readUint8Array(i+h,Math.min(L,r-h),function(e){var a=t.append(e,function(){s&&s(i+h,r)});f+=a.length,o(!0,e),n.writeUint8Array(a,function(){o(!1,a),p++,setTimeout(c,1)},u),s&&s(h,r)},l):(d=t.flush(),d?(f+=d.length,n.writeUint8Array(d,function(){o(!1,d),a(f)},u)):a(f))}var h,p=0,f=0;c()}function d(n,i,r,o,s,a,l,u,c){function h(t,e){s&&!t&&g.append(e)}function d(t){a(t,g.get())}var m,g=new e;return t.zip.useWebWorkers?(m=new Worker(t.zip.workerScriptsPath+$),p(m,n,i,r,o,h,l,d,u,c)):f(new t.zip.Inflater,n,i,r,o,h,l,d,u,c),m}function m(n,i,r,o,s,a,l){function u(t,e){t&&m.append(e)}function c(t){o(t,m.get())}function h(){d.removeEventListener(B,h,!1),p(d,n,i,0,n.size,u,s,c,a,l)}var d,m=new e;return t.zip.useWebWorkers?(d=new Worker(t.zip.workerScriptsPath+z),d.addEventListener(B,h,!1),d.postMessage({init:!0,level:r})):f(new t.zip.Deflater,n,i,0,n.size,u,s,c,a,l),d}function g(t,n,i,r,o,s,a,l,u){function c(){var e=h*L;r>e?t.readUint8Array(i+e,Math.min(L,r-e),function(t){o&&p.append(t),a&&a(e,r,t),n.writeUint8Array(t,function(){h++,c()},u)},l):s(r,p.get())}var h=0,p=new e;c()}function v(t){var e,n,i="",r=["Ç","ü","é","â","ä","à","å","ç","ê","ë","è","ï","î","ì","Ä","Å","É","æ","Æ","ô","ö","ò","û","ù","ÿ","Ö","Ü","ø","£","Ø","×","ƒ","á","í","ó","ú","ñ","Ñ","ª","º","¿","®","¬","½","¼","¡","«","»","_","_","_","¦","¦","Á","Â","À","©","¦","¦","+","+","¢","¥","+","+","-","-","+","-","+","ã","Ã","+","+","-","-","¦","-","+","¤","ð","Ð","Ê","Ë","È","i","Í","Î","Ï","+","+","_","_","¦","Ì","_","Ó","ß","Ô","Ò","õ","Õ","µ","þ","Þ","Ú","Û","Ù","ý","Ý","¯","´","­","±","_","¾","¶","§","÷","¸","°","¨","·","¹","³","²","_"," "];for(e=0;e<t.length;e++)n=255&t.charCodeAt(e),i+=n>127?r[n-128]:String.fromCharCode(n);return i}function y(t){return decodeURIComponent(escape(t))}function b(t){var e,n="";for(e=0;e<t.length;e++)n+=String.fromCharCode(t[e]);return n}function w(t){var e=(4294901760&t)>>16,n=65535&t;try{return new Date(1980+((65024&e)>>9),((480&e)>>5)-1,31&e,(63488&n)>>11,(2016&n)>>5,2*(31&n),0)}catch(i){}}function _(t,e,n,i,r){return t.version=e.view.getUint16(n,!0),t.bitFlag=e.view.getUint16(n+2,!0),t.compressionMethod=e.view.getUint16(n+4,!0),t.lastModDateRaw=e.view.getUint32(n+6,!0),t.lastModDate=w(t.lastModDateRaw),1===(1&t.bitFlag)?(r(M),void 0):((i||8!=(8&t.bitFlag))&&(t.crc32=e.view.getUint32(n+10,!0),t.compressedSize=e.view.getUint32(n+14,!0),t.uncompressedSize=e.view.getUint32(n+18,!0)),4294967295===t.compressedSize||4294967295===t.uncompressedSize?(r(P),void 0):(t.filenameLength=e.view.getUint16(n+22,!0),t.extraFieldLength=e.view.getUint16(n+24,!0),void 0))}function x(t,e){function n(){}function r(n,o){t.readUint8Array(t.size-n,n,function(t){var e=i(t.length,t).view;1347093766!=e.getUint32(0)?r(n+1,o):o(e)},function(){e(A)})}return n.prototype.getData=function(n,r,o,s){function a(t,e){p&&p.terminate(),p=null,t&&t(e)}function l(t){var e=i(4);return e.view.setUint32(0,t),f.crc32==e.view.getUint32(0)}function u(t,e){s&&!l(e)?c():n.getData(function(t){a(r,t)})}function c(){a(e,D)}function h(){a(e,N)}var p,f=this;t.readUint8Array(f.offset,30,function(r){var a,l=i(r.length,r);return 1347093252!=l.view.getUint32(0)?(e(T),void 0):(_(f,l,4,!1,e),a=f.offset+30+f.filenameLength+f.extraFieldLength,n.init(function(){0===f.compressionMethod?g(t,n,a,f.compressedSize,s,u,o,c,h):p=d(t,n,a,f.compressedSize,s,u,o,c,h)},h),void 0)},c)},{getEntries:function(o){return t.size<22?(e(T),void 0):(r(22,function(r){var s,a;s=r.getUint32(16,!0),a=r.getUint16(8,!0),t.readUint8Array(s,t.size-s,function(t){var r,s,l,u,c=0,h=[],p=i(t.length,t);for(r=0;a>r;r++){if(s=new n,1347092738!=p.view.getUint32(c))return e(T),void 0;_(s,p,c+6,!0,e),s.commentLength=p.view.getUint16(c+32,!0),s.directory=16==(16&p.view.getUint8(c+38)),s.offset=p.view.getUint32(c+42,!0),l=b(p.array.subarray(c+46,c+46+s.filenameLength)),s.filename=2048===(2048&s.bitFlag)?y(l):v(l),s.directory||"/"!=s.filename.charAt(s.filename.length-1)||(s.directory=!0),u=b(p.array.subarray(c+46+s.filenameLength+s.extraFieldLength,c+46+s.filenameLength+s.extraFieldLength+s.commentLength)),s.comment=2048===(2048&s.bitFlag)?y(u):v(u),h.push(s),c+=46+s.filenameLength+s.extraFieldLength+s.commentLength}o(h)},function(){e(A)})}),void 0)},close:function(t){t&&t()}}}function S(t){return unescape(encodeURIComponent(t))}function k(t){var e,n=[];for(e=0;e<t.length;e++)n.push(t.charCodeAt(e));return n}function C(t,e,n){function r(t,e){a&&a.terminate(),a=null,t&&t(e)}function o(){r(e,O)}function s(){r(e,D)}var a,l={},u=[],c=0;return{add:function(h,p,f,d,v){function y(e){var r;C=v.lastModDate||new Date,_=i(26),l[h]={headerArray:_.array,directory:v.directory,filename:x,offset:c,comment:k(S(v.comment||""))},_.view.setUint32(0,335546376),v.version&&_.view.setUint8(0,v.version),n||0===v.level||v.directory||_.view.setUint16(4,2048),_.view.setUint16(6,(C.getHours()<<6|C.getMinutes())<<5|C.getSeconds()/2,!0),_.view.setUint16(8,(C.getFullYear()-1980<<4|C.getMonth()+1)<<5|C.getDate(),!0),_.view.setUint16(22,x.length,!0),r=i(30+x.length),r.view.setUint32(0,1347093252),r.array.set(_.array,4),r.array.set(x,30),c+=r.array.length,t.writeUint8Array(r.array,e,o)}function b(e,n){var s=i(16);c+=e||0,s.view.setUint32(0,1347094280),"undefined"!=typeof n&&(_.view.setUint32(10,n,!0),s.view.setUint32(4,n,!0)),p&&(s.view.setUint32(8,e,!0),_.view.setUint32(14,e,!0),s.view.setUint32(12,p.size,!0),_.view.setUint32(18,p.size,!0)),t.writeUint8Array(s.array,function(){c+=16,r(f)},o)}function w(){return v=v||{},h=h.trim(),v.directory&&"/"!=h.charAt(h.length-1)&&(h+="/"),l.hasOwnProperty(h)?(e(I),void 0):(x=k(S(h)),u.push(h),y(function(){p?n||0===v.level?g(p,t,0,p.size,!0,b,d,s,o):a=m(p,t,v.level,b,d,s,o):b()},o),void 0)}var _,x,C;p?p.init(w,s):w()},close:function(e){var n,s,a,h=0,p=0;for(s=0;s<u.length;s++)a=l[u[s]],h+=46+a.filename.length+a.comment.length;for(n=i(h+22),s=0;s<u.length;s++)a=l[u[s]],n.view.setUint32(p,1347092738),n.view.setUint16(p+4,5120),n.array.set(a.headerArray,p+6),n.view.setUint16(p+32,a.comment.length,!0),a.directory&&n.view.setUint8(p+38,16),n.view.setUint32(p+42,a.offset,!0),n.array.set(a.filename,p+46),n.array.set(a.comment,p+46+a.filename.length),p+=46+a.filename.length+a.comment.length;n.view.setUint32(p,1347093766),n.view.setUint16(p+8,u.length,!0),n.view.setUint16(p+10,u.length,!0),n.view.setUint32(p+12,h,!0),n.view.setUint32(p+16,c,!0),t.writeUint8Array(n.array,function(){r(function(){t.getData(e)})},o)}}}var E,T="File format is not recognized.",M="File contains encrypted entry.",P="File is using Zip64 (4gb+ file size).",A="Error while reading zip file.",O="Error while writing zip file.",N="Error while writing file data.",D="Error while reading file data.",I="File already exists.",L=524288,$="inflate.js",z="deflate.js",R="text/plain",B="message";try{E=0===new Blob([new DataView(new ArrayBuffer(0))]).size}catch(F){}e.prototype.table=function(){var t,e,n,i=[];for(t=0;256>t;t++){for(n=t,e=0;8>e;e++)1&n?n=3988292384^n>>>1:n>>>=1;i[t]=n}return i}(),o.prototype=new r,o.prototype.constructor=o,s.prototype=new r,s.prototype.constructor=s,a.prototype=new r,a.prototype.constructor=a,l.prototype.getData=function(t){t(this.data)},u.prototype=new l,u.prototype.constructor=u,c.prototype=new l,c.prototype.constructor=c,h.prototype=new l,h.prototype.constructor=h,t.zip={Reader:r,Writer:l,BlobReader:a,Data64URIReader:s,TextReader:o,BlobWriter:h,Data64URIWriter:c,TextWriter:u,createReader:function(t,e,n){t.init(function(){e(x(t,n))},n)},createWriter:function(t,e,n,i){t.init(function(){e(C(t,n,i))},n)},workerScriptsPath:"",useWebWorkers:!0}}(this),/*
 Copyright (c) 2013 Gildas Lormeau. All rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are met:

 1. Redistributions of source code must retain the above copyright notice,
 this list of conditions and the following disclaimer.

 2. Redistributions in binary form must reproduce the above copyright
 notice, this list of conditions and the following disclaimer in
 the documentation and/or other materials provided with the distribution.

 3. The names of the authors may not be used to endorse or promote products
 derived from this software without specific prior written permission.

 THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED WARRANTIES,
 INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND
 FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL JCRAFT,
 INC. OR ANY CONTRIBUTORS TO THIS SOFTWARE BE LIABLE FOR ANY DIRECT, INDIRECT,
 INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA,
 OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
function(t){function e(){function t(t){var e,n,r,o,s,a,u=i.dyn_tree,c=i.stat_desc.static_tree,h=i.stat_desc.extra_bits,p=i.stat_desc.extra_base,f=i.stat_desc.max_length,m=0;for(o=0;l>=o;o++)t.bl_count[o]=0;for(u[2*t.heap[t.heap_max]+1]=0,e=t.heap_max+1;d>e;e++)n=t.heap[e],o=u[2*u[2*n+1]+1]+1,o>f&&(o=f,m++),u[2*n+1]=o,n>i.max_code||(t.bl_count[o]++,s=0,n>=p&&(s=h[n-p]),a=u[2*n],t.opt_len+=a*(o+s),c&&(t.static_len+=a*(c[2*n+1]+s)));if(0!==m){do{for(o=f-1;0===t.bl_count[o];)o--;t.bl_count[o]--,t.bl_count[o+1]+=2,t.bl_count[f]--,m-=2}while(m>0);for(o=f;0!==o;o--)for(n=t.bl_count[o];0!==n;)r=t.heap[--e],r>i.max_code||(u[2*r+1]!=o&&(t.opt_len+=(o-u[2*r+1])*u[2*r],u[2*r+1]=o),n--)}}function e(t,e){var n=0;do n|=1&t,t>>>=1,n<<=1;while(--e>0);return n>>>1}function n(t,n,i){var r,o,s,a=[],u=0;for(r=1;l>=r;r++)a[r]=u=u+i[r-1]<<1;for(o=0;n>=o;o++)s=t[2*o+1],0!==s&&(t[2*o]=e(a[s]++,s))}var i=this;i.build_tree=function(e){var r,o,s,a=i.dyn_tree,l=i.stat_desc.static_tree,u=i.stat_desc.elems,c=-1;for(e.heap_len=0,e.heap_max=d,r=0;u>r;r++)0!==a[2*r]?(e.heap[++e.heap_len]=c=r,e.depth[r]=0):a[2*r+1]=0;for(;e.heap_len<2;)s=e.heap[++e.heap_len]=2>c?++c:0,a[2*s]=1,e.depth[s]=0,e.opt_len--,l&&(e.static_len-=l[2*s+1]);for(i.max_code=c,r=Math.floor(e.heap_len/2);r>=1;r--)e.pqdownheap(a,r);s=u;do r=e.heap[1],e.heap[1]=e.heap[e.heap_len--],e.pqdownheap(a,1),o=e.heap[1],e.heap[--e.heap_max]=r,e.heap[--e.heap_max]=o,a[2*s]=a[2*r]+a[2*o],e.depth[s]=Math.max(e.depth[r],e.depth[o])+1,a[2*r+1]=a[2*o+1]=s,e.heap[1]=s++,e.pqdownheap(a,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],t(e),n(a,i.max_code,e.bl_count)}}function n(t,e,n,i,r){var o=this;o.static_tree=t,o.extra_bits=e,o.extra_base=n,o.elems=i,o.max_length=r}function i(t,e,n,i,r){var o=this;o.good_length=t,o.max_lazy=e,o.nice_length=n,o.max_chain=i,o.func=r}function r(t,e,n,i){var r=t[2*e],o=t[2*n];return o>r||r==o&&i[e]<=i[n]}function o(){function t(){var t;for(Ae=2*Ee,Ne[Ie-1]=0,t=0;Ie-1>t;t++)Ne[t]=0;Je=V[Ye].max_lazy,Ge=V[Ye].good_length,Xe=V[Ye].nice_length,We=V[Ye].max_chain,je=0,Re=0,He=0,Be=qe=ee-1,Ve=0,De=0}function i(){var t;for(t=0;f>t;t++)Qe[2*t]=0;for(t=0;u>t;t++)Ze[2*t]=0;for(t=0;c>t;t++)tn[2*t]=0;Qe[2*m]=1,en.opt_len=en.static_len=0,ln=cn=0}function o(){nn.dyn_tree=Qe,nn.stat_desc=n.static_l_desc,rn.dyn_tree=Ze,rn.stat_desc=n.static_d_desc,on.dyn_tree=tn,on.stat_desc=n.static_bl_desc,pn=0,fn=0,hn=8,i()}function s(t,e){var n,i,r=-1,o=t[1],s=0,a=7,l=4;for(0===o&&(a=138,l=3),t[2*(e+1)+1]=65535,n=0;e>=n;n++)i=o,o=t[2*(n+1)+1],++s<a&&i==o||(l>s?tn[2*i]+=s:0!==i?(i!=r&&tn[2*i]++,tn[2*v]++):10>=s?tn[2*y]++:tn[2*b]++,s=0,r=i,0===o?(a=138,l=3):i==o?(a=6,l=3):(a=7,l=4))}function a(){var t;for(s(Qe,nn.max_code),s(Ze,rn.max_code),on.build_tree(en),t=c-1;t>=3&&0===tn[2*e.bl_order[t]+1];t--);return en.opt_len+=3*(t+1)+5+5+4,t}function l(t){en.pending_buf[en.pending++]=t}function h(t){l(255&t),l(255&t>>>8)}function d(t){l(255&t>>8),l(255&(255&t))}function g(t,e){var n,i=e;fn>w-i?(n=t,pn|=65535&n<<fn,h(pn),pn=n>>>w-fn,fn+=i-w):(pn|=65535&t<<fn,fn+=i)}function L(t,e){var n=2*t;g(65535&e[n],65535&e[n+1])}function re(t,e){var n,i,r=-1,o=t[1],s=0,a=7,l=4;for(0===o&&(a=138,l=3),n=0;e>=n;n++)if(i=o,o=t[2*(n+1)+1],!(++s<a&&i==o)){if(l>s){do L(i,tn);while(0!==--s)}else 0!==i?(i!=r&&(L(i,tn),s--),L(v,tn),g(s-3,2)):10>=s?(L(y,tn),g(s-3,3)):(L(b,tn),g(s-11,7));s=0,r=i,0===o?(a=138,l=3):i==o?(a=6,l=3):(a=7,l=4)}}function oe(t,n,i){var r;for(g(t-257,5),g(n-1,5),g(i-4,4),r=0;i>r;r++)g(tn[2*e.bl_order[r]+1],3);re(Qe,t-1),re(Ze,n-1)}function se(){16==fn?(h(pn),pn=0,fn=0):fn>=8&&(l(255&pn),pn>>>=8,fn-=8)}function ae(){g(Z<<1,3),L(m,n.static_ltree),se(),9>1+hn+10-fn&&(g(Z<<1,3),L(m,n.static_ltree),se()),hn=7}function le(t,n){var i,r,o;if(en.pending_buf[un+2*ln]=255&t>>>8,en.pending_buf[un+2*ln+1]=255&t,en.pending_buf[sn+ln]=255&n,ln++,0===t?Qe[2*n]++:(cn++,t--,Qe[2*(e._length_code[n]+p+1)]++,Ze[2*e.d_code(t)]++),0===(8191&ln)&&Ye>2){for(i=8*ln,r=je-Re,o=0;u>o;o++)i+=Ze[2*o]*(5+e.extra_dbits[o]);if(i>>>=3,cn<Math.floor(ln/2)&&i<Math.floor(r/2))return!0}return ln==an-1}function ue(t,n){var i,r,o,s,a=0;if(0!==ln)do i=65280&en.pending_buf[un+2*a]<<8|255&en.pending_buf[un+2*a+1],r=255&en.pending_buf[sn+a],a++,0===i?L(r,t):(o=e._length_code[r],L(o+p+1,t),s=e.extra_lbits[o],0!==s&&(r-=e.base_length[o],g(r,s)),i--,o=e.d_code(i),L(o,n),s=e.extra_dbits[o],0!==s&&(i-=e.base_dist[o],g(i,s)));while(ln>a);L(m,t),hn=t[2*m+1]}function ce(){fn>8?h(pn):fn>0&&l(255&pn),pn=0,fn=0}function he(t,e,n){ce(),hn=8,n&&(h(e),h(~e)),en.pending_buf.set(Pe.subarray(t,t+e),en.pending),en.pending+=e}function pe(t,e,n){g((Q<<1)+(n?1:0),3),he(t,e,!0)}function fe(t,e,r){var o,s,l=0;Ye>0?(nn.build_tree(en),rn.build_tree(en),l=a(),o=en.opt_len+3+7>>>3,s=en.static_len+3+7>>>3,o>=s&&(o=s)):o=s=e+5,o>=e+4&&-1!=t?pe(t,e,r):s==o?(g((Z<<1)+(r?1:0),3),ue(n.static_ltree,n.static_dtree)):(g((te<<1)+(r?1:0),3),oe(nn.max_code+1,rn.max_code+1,l+1),ue(Qe,Ze)),i(),r&&ce()}function de(t){fe(Re>=0?Re:-1,je-Re,t),Re=je,_e.flush_pending()}function me(){var t,e,n,i;do{if(i=Ae-He-je,0===i&&0===je&&0===He)i=Ee;else if(-1==i)i--;else if(je>=Ee+Ee-ie){Pe.set(Pe.subarray(Ee,Ee+Ee),0),Ue-=Ee,je-=Ee,Re-=Ee,t=Ie,n=t;do e=65535&Ne[--n],Ne[n]=e>=Ee?e-Ee:0;while(0!==--t);t=Ee,n=t;do e=65535&Oe[--n],Oe[n]=e>=Ee?e-Ee:0;while(0!==--t);i+=Ee}if(0===_e.avail_in)return;t=_e.read_buf(Pe,je+He,i),He+=t,He>=ee&&(De=255&Pe[je],De=(De<<ze^255&Pe[je+1])&$e)}while(ie>He&&0!==_e.avail_in)}function ge(t){var e,n=65535;for(n>Se-5&&(n=Se-5);;){if(1>=He){if(me(),0===He&&t==C)return U;if(0===He)break}if(je+=He,He=0,e=Re+n,(0===je||je>=e)&&(He=je-e,je=e,de(!1),0===_e.avail_out))return U;if(je-Re>=Ee-ie&&(de(!1),0===_e.avail_out))return U}return de(t==M),0===_e.avail_out?t==M?q:U:t==M?W:H}function ve(t){var e,n,i=We,r=je,o=qe,s=je>Ee-ie?je-(Ee-ie):0,a=Xe,l=Me,u=je+ne,c=Pe[r+o-1],h=Pe[r+o];qe>=Ge&&(i>>=2),a>He&&(a=He);do if(e=t,Pe[e+o]==h&&Pe[e+o-1]==c&&Pe[e]==Pe[r]&&Pe[++e]==Pe[r+1]){r+=2,e++;do;while(Pe[++r]==Pe[++e]&&Pe[++r]==Pe[++e]&&Pe[++r]==Pe[++e]&&Pe[++r]==Pe[++e]&&Pe[++r]==Pe[++e]&&Pe[++r]==Pe[++e]&&Pe[++r]==Pe[++e]&&Pe[++r]==Pe[++e]&&u>r);if(n=ne-(u-r),r=u-ne,n>o){if(Ue=t,o=n,n>=a)break;c=Pe[r+o-1],h=Pe[r+o]}}while((t=65535&Oe[t&l])>s&&0!==--i);return He>=o?o:He}function ye(t){for(var e,n=0;;){if(ie>He){if(me(),ie>He&&t==C)return U;if(0===He)break}if(He>=ee&&(De=(De<<ze^255&Pe[je+(ee-1)])&$e,n=65535&Ne[De],Oe[je&Me]=Ne[De],Ne[De]=je),0!==n&&Ee-ie>=(65535&je-n)&&Ke!=S&&(Be=ve(n)),Be>=ee)if(e=le(je-Ue,Be-ee),He-=Be,Je>=Be&&He>=ee){Be--;do je++,De=(De<<ze^255&Pe[je+(ee-1)])&$e,n=65535&Ne[De],Oe[je&Me]=Ne[De],Ne[De]=je;while(0!==--Be);je++}else je+=Be,Be=0,De=255&Pe[je],De=(De<<ze^255&Pe[je+1])&$e;else e=le(0,255&Pe[je]),He--,je++;if(e&&(de(!1),0===_e.avail_out))return U}return de(t==M),0===_e.avail_out?t==M?q:U:t==M?W:H}function be(t){for(var e,n,i=0;;){if(ie>He){if(me(),ie>He&&t==C)return U;if(0===He)break}if(He>=ee&&(De=(De<<ze^255&Pe[je+(ee-1)])&$e,i=65535&Ne[De],Oe[je&Me]=Ne[De],Ne[De]=je),qe=Be,Fe=Ue,Be=ee-1,0!==i&&Je>qe&&Ee-ie>=(65535&je-i)&&(Ke!=S&&(Be=ve(i)),5>=Be&&(Ke==x||Be==ee&&je-Ue>4096)&&(Be=ee-1)),qe>=ee&&qe>=Be){n=je+He-ee,e=le(je-1-Fe,qe-ee),He-=qe-1,qe-=2;do++je<=n&&(De=(De<<ze^255&Pe[je+(ee-1)])&$e,i=65535&Ne[De],Oe[je&Me]=Ne[De],Ne[De]=je);while(0!==--qe);if(Ve=0,Be=ee-1,je++,e&&(de(!1),0===_e.avail_out))return U}else if(0!==Ve){if(e=le(0,255&Pe[je-1]),e&&de(!1),je++,He--,0===_e.avail_out)return U}else Ve=1,je++,He--}return 0!==Ve&&(e=le(0,255&Pe[je-1]),Ve=0),de(t==M),0===_e.avail_out?t==M?q:U:t==M?W:H}function we(e){return e.total_in=e.total_out=0,e.msg=null,en.pending=0,en.pending_out=0,xe=K,Ce=C,o(),t(),P}var _e,xe,Se,ke,Ce,Ee,Te,Me,Pe,Ae,Oe,Ne,De,Ie,Le,$e,ze,Re,Be,Fe,Ve,je,Ue,He,qe,We,Je,Ye,Ke,Ge,Xe,Qe,Ze,tn,en=this,nn=new e,rn=new e,on=new e;en.depth=[];var sn,an,ln,un,cn,hn,pn,fn;en.bl_count=[],en.heap=[],Qe=[],Ze=[],tn=[],en.pqdownheap=function(t,e){for(var n=en.heap,i=n[e],o=e<<1;o<=en.heap_len&&(o<en.heap_len&&r(t,n[o+1],n[o],en.depth)&&o++,!r(t,i,n[o],en.depth));)n[e]=n[o],e=o,o<<=1;n[e]=i},en.deflateInit=function(t,e,n,i,r,o){return i||(i=X),r||(r=z),o||(o=k),t.msg=null,e==_&&(e=6),1>r||r>$||i!=X||9>n||n>15||0>e||e>9||0>o||o>S?N:(t.dstate=en,Te=n,Ee=1<<Te,Me=Ee-1,Le=r+7,Ie=1<<Le,$e=Ie-1,ze=Math.floor((Le+ee-1)/ee),Pe=new Uint8Array(2*Ee),Oe=[],Ne=[],an=1<<r+6,en.pending_buf=new Uint8Array(4*an),Se=4*an,un=Math.floor(an/2),sn=3*an,Ye=e,Ke=o,ke=255&i,we(t))},en.deflateEnd=function(){return xe!=Y&&xe!=K&&xe!=G?N:(en.pending_buf=null,Ne=null,Oe=null,Pe=null,en.dstate=null,xe==K?D:P)},en.deflateParams=function(t,e,n){var i=P;return e==_&&(e=6),0>e||e>9||0>n||n>S?N:(V[Ye].func!=V[e].func&&0!==t.total_in&&(i=t.deflate(E)),Ye!=e&&(Ye=e,Je=V[Ye].max_lazy,Ge=V[Ye].good_length,Xe=V[Ye].nice_length,We=V[Ye].max_chain),Ke=n,i)},en.deflateSetDictionary=function(t,e,n){var i,r=n,o=0;if(!e||xe!=Y)return N;if(ee>r)return P;for(r>Ee-ie&&(r=Ee-ie,o=n-r),Pe.set(e.subarray(o,o+r),0),je=r,Re=r,De=255&Pe[0],De=(De<<ze^255&Pe[1])&$e,i=0;r-ee>=i;i++)De=(De<<ze^255&Pe[i+(ee-1)])&$e,Oe[i&Me]=Ne[De],Ne[De]=i;return P},en.deflate=function(t,e){var n,i,r,o,s;if(e>M||0>e)return N;if(!t.next_out||!t.next_in&&0!==t.avail_in||xe==G&&e!=M)return t.msg=j[O-N],N;if(0===t.avail_out)return t.msg=j[O-I],I;if(_e=t,o=Ce,Ce=e,xe==Y&&(i=X+(Te-8<<4)<<8,r=(255&Ye-1)>>1,r>3&&(r=3),i|=r<<6,0!==je&&(i|=J),i+=31-i%31,xe=K,d(i)),0!==en.pending){if(_e.flush_pending(),0===_e.avail_out)return Ce=-1,P}else if(0===_e.avail_in&&o>=e&&e!=M)return _e.msg=j[O-I],I;if(xe==G&&0!==_e.avail_in)return t.msg=j[O-I],I;if(0!==_e.avail_in||0!==He||e!=C&&xe!=G){switch(s=-1,V[Ye].func){case R:s=ge(e);break;case B:s=ye(e);break;case F:s=be(e)}if((s==q||s==W)&&(xe=G),s==U||s==q)return 0===_e.avail_out&&(Ce=-1),P;if(s==H){if(e==E)ae();else if(pe(0,0,!1),e==T)for(n=0;Ie>n;n++)Ne[n]=0;if(_e.flush_pending(),0===_e.avail_out)return Ce=-1,P}}return e!=M?P:A}}function s(){var t=this;t.next_in_index=0,t.next_out_index=0,t.avail_in=0,t.total_in=0,t.avail_out=0,t.total_out=0}function a(t){var e=this,n=new s,i=512,r=C,o=new Uint8Array(i);"undefined"==typeof t&&(t=_),n.deflateInit(t),n.next_out=o,e.append=function(t,e){var s,a,l=[],u=0,c=0,h=0;if(t.length){n.next_in_index=0,n.next_in=t,n.avail_in=t.length;do{if(n.next_out_index=0,n.avail_out=i,s=n.deflate(r),s!=P)throw"deflating: "+n.msg;n.next_out_index&&(n.next_out_index==i?l.push(new Uint8Array(o)):l.push(new Uint8Array(o.subarray(0,n.next_out_index)))),h+=n.next_out_index,e&&n.next_in_index>0&&n.next_in_index!=u&&(e(n.next_in_index),u=n.next_in_index)}while(n.avail_in>0||0===n.avail_out);return a=new Uint8Array(h),l.forEach(function(t){a.set(t,c),c+=t.length}),a}},e.flush=function(){var t,e,r=[],s=0,a=0;do{if(n.next_out_index=0,n.avail_out=i,t=n.deflate(M),t!=A&&t!=P)throw"deflating: "+n.msg;i-n.avail_out>0&&r.push(new Uint8Array(o.subarray(0,n.next_out_index))),a+=n.next_out_index}while(n.avail_in>0||0===n.avail_out);return n.deflateEnd(),e=new Uint8Array(a),r.forEach(function(t){e.set(t,s),s+=t.length}),e}}var l=15,u=30,c=19,h=29,p=256,f=p+1+h,d=2*f+1,m=256,g=7,v=16,y=17,b=18,w=16,_=-1,x=1,S=2,k=0,C=0,E=1,T=3,M=4,P=0,A=1,O=2,N=-2,D=-3,I=-5,L=[0,1,2,3,4,4,5,5,6,6,6,6,7,7,7,7,8,8,8,8,8,8,8,8,9,9,9,9,9,9,9,9,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,0,0,16,17,18,18,19,19,20,20,20,20,21,21,21,21,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29];e._length_code=[0,1,2,3,4,5,6,7,8,8,9,9,10,10,11,11,12,12,12,12,13,13,13,13,14,14,14,14,15,15,15,15,16,16,16,16,16,16,16,16,17,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,28],e.base_length=[0,1,2,3,4,5,6,7,8,10,12,14,16,20,24,28,32,40,48,56,64,80,96,112,128,160,192,224,0],e.base_dist=[0,1,2,3,4,6,8,12,16,24,32,48,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096,6144,8192,12288,16384,24576],e.d_code=function(t){return 256>t?L[t]:L[256+(t>>>7)]},e.extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],e.extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],e.extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],e.bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],n.static_ltree=[12,8,140,8,76,8,204,8,44,8,172,8,108,8,236,8,28,8,156,8,92,8,220,8,60,8,188,8,124,8,252,8,2,8,130,8,66,8,194,8,34,8,162,8,98,8,226,8,18,8,146,8,82,8,210,8,50,8,178,8,114,8,242,8,10,8,138,8,74,8,202,8,42,8,170,8,106,8,234,8,26,8,154,8,90,8,218,8,58,8,186,8,122,8,250,8,6,8,134,8,70,8,198,8,38,8,166,8,102,8,230,8,22,8,150,8,86,8,214,8,54,8,182,8,118,8,246,8,14,8,142,8,78,8,206,8,46,8,174,8,110,8,238,8,30,8,158,8,94,8,222,8,62,8,190,8,126,8,254,8,1,8,129,8,65,8,193,8,33,8,161,8,97,8,225,8,17,8,145,8,81,8,209,8,49,8,177,8,113,8,241,8,9,8,137,8,73,8,201,8,41,8,169,8,105,8,233,8,25,8,153,8,89,8,217,8,57,8,185,8,121,8,249,8,5,8,133,8,69,8,197,8,37,8,165,8,101,8,229,8,21,8,149,8,85,8,213,8,53,8,181,8,117,8,245,8,13,8,141,8,77,8,205,8,45,8,173,8,109,8,237,8,29,8,157,8,93,8,221,8,61,8,189,8,125,8,253,8,19,9,275,9,147,9,403,9,83,9,339,9,211,9,467,9,51,9,307,9,179,9,435,9,115,9,371,9,243,9,499,9,11,9,267,9,139,9,395,9,75,9,331,9,203,9,459,9,43,9,299,9,171,9,427,9,107,9,363,9,235,9,491,9,27,9,283,9,155,9,411,9,91,9,347,9,219,9,475,9,59,9,315,9,187,9,443,9,123,9,379,9,251,9,507,9,7,9,263,9,135,9,391,9,71,9,327,9,199,9,455,9,39,9,295,9,167,9,423,9,103,9,359,9,231,9,487,9,23,9,279,9,151,9,407,9,87,9,343,9,215,9,471,9,55,9,311,9,183,9,439,9,119,9,375,9,247,9,503,9,15,9,271,9,143,9,399,9,79,9,335,9,207,9,463,9,47,9,303,9,175,9,431,9,111,9,367,9,239,9,495,9,31,9,287,9,159,9,415,9,95,9,351,9,223,9,479,9,63,9,319,9,191,9,447,9,127,9,383,9,255,9,511,9,0,7,64,7,32,7,96,7,16,7,80,7,48,7,112,7,8,7,72,7,40,7,104,7,24,7,88,7,56,7,120,7,4,7,68,7,36,7,100,7,20,7,84,7,52,7,116,7,3,8,131,8,67,8,195,8,35,8,163,8,99,8,227,8],n.static_dtree=[0,5,16,5,8,5,24,5,4,5,20,5,12,5,28,5,2,5,18,5,10,5,26,5,6,5,22,5,14,5,30,5,1,5,17,5,9,5,25,5,5,5,21,5,13,5,29,5,3,5,19,5,11,5,27,5,7,5,23,5],n.static_l_desc=new n(n.static_ltree,e.extra_lbits,p+1,f,l),n.static_d_desc=new n(n.static_dtree,e.extra_dbits,0,u,l),n.static_bl_desc=new n(null,e.extra_blbits,0,c,g);var $=9,z=8,R=0,B=1,F=2,V=[new i(0,0,0,0,R),new i(4,4,8,4,B),new i(4,5,16,8,B),new i(4,6,32,32,B),new i(4,4,16,16,F),new i(8,16,32,32,F),new i(8,16,128,128,F),new i(8,32,128,256,F),new i(32,128,258,1024,F),new i(32,258,258,4096,F)],j=["need dictionary","stream end","","","stream error","data error","","buffer error","",""],U=0,H=1,q=2,W=3,J=32,Y=42,K=113,G=666,X=8,Q=0,Z=1,te=2,ee=3,ne=258,ie=ne+ee+1;s.prototype={deflateInit:function(t,e){var n=this;return n.dstate=new o,e||(e=l),n.dstate.deflateInit(n,t,e)},deflate:function(t){var e=this;return e.dstate?e.dstate.deflate(e,t):N},deflateEnd:function(){var t=this;if(!t.dstate)return N;var e=t.dstate.deflateEnd();return t.dstate=null,e},deflateParams:function(t,e){var n=this;return n.dstate?n.dstate.deflateParams(n,t,e):N},deflateSetDictionary:function(t,e){var n=this;return n.dstate?n.dstate.deflateSetDictionary(n,t,e):N},read_buf:function(t,e,n){var i=this,r=i.avail_in;return r>n&&(r=n),0===r?0:(i.avail_in-=r,t.set(i.next_in.subarray(i.next_in_index,i.next_in_index+r),e),i.next_in_index+=r,i.total_in+=r,r)},flush_pending:function(){var t=this,e=t.dstate.pending;e>t.avail_out&&(e=t.avail_out),0!==e&&(t.next_out.set(t.dstate.pending_buf.subarray(t.dstate.pending_out,t.dstate.pending_out+e),t.next_out_index),t.next_out_index+=e,t.dstate.pending_out+=e,t.total_out+=e,t.avail_out-=e,t.dstate.pending-=e,0===t.dstate.pending&&(t.dstate.pending_out=0))}};var re;t.zip?t.zip.Deflater=a:(re=new a,t.addEventListener("message",function(e){var n=e.data;n.init&&(re=new a(n.level),t.postMessage({oninit:!0})),n.append&&t.postMessage({onappend:!0,data:re.append(n.data,function(e){t.postMessage({progress:!0,current:e})})}),n.flush&&t.postMessage({onflush:!0,data:re.flush()})},!1))}(this),/*
 Copyright (c) 2013 Gildas Lormeau. All rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are met:

 1. Redistributions of source code must retain the above copyright notice,
 this list of conditions and the following disclaimer.

 2. Redistributions in binary form must reproduce the above copyright
 notice, this list of conditions and the following disclaimer in
 the documentation and/or other materials provided with the distribution.

 3. The names of the authors may not be used to endorse or promote products
 derived from this software without specific prior written permission.

 THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED WARRANTIES,
 INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND
 FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL JCRAFT,
 INC. OR ANY CONTRIBUTORS TO THIS SOFTWARE BE LIABLE FOR ANY DIRECT, INDIRECT,
 INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA,
 OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
function(t){function e(){function t(t,e,n,i,u,c,h,f,m,v,y){var b,w,_,x,S,k,C,E,M,P,A,O,N,D,I;P=0,S=n;do r[t[e+P]]++,P++,S--;while(0!==S);if(r[0]==n)return h[0]=-1,f[0]=0,l;for(E=f[0],k=1;T>=k&&0===r[k];k++);for(C=k,k>E&&(E=k),S=T;0!==S&&0===r[S];S--);for(_=S,E>S&&(E=S),f[0]=E,D=1<<k;S>k;k++,D<<=1)if((D-=r[k])<0)return p;if((D-=r[S])<0)return p;for(r[S]+=D,a[1]=k=0,P=1,N=2;0!==--S;)a[N]=k+=r[P],N++,P++;S=0,P=0;do 0!==(k=t[e+P])&&(y[a[k]++]=S),P++;while(++S<n);for(n=a[_],a[0]=S=0,P=0,x=-1,O=-E,s[0]=0,A=0,I=0;_>=C;C++)for(b=r[C];0!==b--;){for(;C>O+E;){if(x++,O+=E,I=_-O,I=I>E?E:I,(w=1<<(k=C-O))>b+1&&(w-=b+1,N=C,I>k))for(;++k<I&&!((w<<=1)<=r[++N]);)w-=r[N];if(I=1<<k,v[0]+I>g)return p;s[x]=A=v[0],v[0]+=I,0!==x?(a[x]=S,o[0]=k,o[1]=E,k=S>>>O-E,o[2]=A-s[x-1]-k,m.set(o,3*(s[x-1]+k))):h[0]=A}for(o[1]=C-O,P>=n?o[0]=192:y[P]<i?(o[0]=y[P]<256?0:96,o[2]=y[P++]):(o[0]=c[y[P]-i]+16+64,o[2]=u[y[P++]-i]),w=1<<C-O,k=S>>>O;I>k;k+=w)m.set(o,3*(A+k));for(k=1<<C-1;0!==(S&k);k>>>=1)S^=k;for(S^=k,M=(1<<O)-1;(S&M)!=a[x];)x--,O-=E,M=(1<<O)-1}return 0!==D&&1!=_?d:l}function e(t){var e;for(n||(n=[],i=[],r=new Int32Array(T+1),o=[],s=new Int32Array(T),a=new Int32Array(T+1)),i.length<t&&(i=[]),e=0;t>e;e++)i[e]=0;for(e=0;T+1>e;e++)r[e]=0;for(e=0;3>e;e++)o[e]=0;s.set(r.subarray(0,T),0),a.set(r.subarray(0,T+1),0)}var n,i,r,o,s,a,u=this;u.inflate_trees_bits=function(r,o,s,a,l){var u;return e(19),n[0]=0,u=t(r,0,19,19,null,null,s,o,a,n,i),u==p?l.msg="oversubscribed dynamic bit lengths tree":(u==d||0===o[0])&&(l.msg="incomplete dynamic bit lengths tree",u=p),u},u.inflate_trees_dynamic=function(r,o,s,a,u,c,h,m,g){var v;return e(288),n[0]=0,v=t(s,0,r,257,S,k,c,a,m,n,i),v!=l||0===a[0]?(v==p?g.msg="oversubscribed literal/length tree":v!=f&&(g.msg="incomplete literal/length tree",v=p),v):(e(288),v=t(s,r,o,0,C,E,h,u,m,n,i),v!=l||0===u[0]&&r>257?(v==p?g.msg="oversubscribed distance tree":v==d?(g.msg="incomplete distance tree",v=p):v!=f&&(g.msg="empty distance tree with lengths",v=p),v):l)}}function n(){function t(t,e,n,i,r,o,s,a){var c,h,f,d,g,v,y,b,w,_,x,S,k,C,E,T;y=a.next_in_index,b=a.avail_in,g=s.bitb,v=s.bitk,w=s.write,_=w<s.read?s.read-w-1:s.end-w,x=m[t],S=m[e];do{for(;20>v;)b--,g|=(255&a.read_byte(y++))<<v,v+=8;if(c=g&x,h=n,f=i,T=3*(f+c),0!==(d=h[T]))for(;;){if(g>>=h[T+1],v-=h[T+1],0!==(16&d)){for(d&=15,k=h[T+2]+(g&m[d]),g>>=d,v-=d;15>v;)b--,g|=(255&a.read_byte(y++))<<v,v+=8;for(c=g&S,h=r,f=o,T=3*(f+c),d=h[T];;){if(g>>=h[T+1],v-=h[T+1],0!==(16&d)){for(d&=15;d>v;)b--,g|=(255&a.read_byte(y++))<<v,v+=8;if(C=h[T+2]+(g&m[d]),g>>=d,v-=d,_-=k,w>=C)E=w-C,w-E>0&&2>w-E?(s.window[w++]=s.window[E++],s.window[w++]=s.window[E++],k-=2):(s.window.set(s.window.subarray(E,E+2),w),w+=2,E+=2,k-=2);else{E=w-C;do E+=s.end;while(0>E);if(d=s.end-E,k>d){if(k-=d,w-E>0&&d>w-E){do s.window[w++]=s.window[E++];while(0!==--d)}else s.window.set(s.window.subarray(E,E+d),w),w+=d,E+=d,d=0;E=0}}if(w-E>0&&k>w-E){do s.window[w++]=s.window[E++];while(0!==--k)}else s.window.set(s.window.subarray(E,E+k),w),w+=k,E+=k,k=0;break}if(0!==(64&d))return a.msg="invalid distance code",k=a.avail_in-b,k=k>v>>3?v>>3:k,b+=k,y-=k,v-=k<<3,s.bitb=g,s.bitk=v,a.avail_in=b,a.total_in+=y-a.next_in_index,a.next_in_index=y,s.write=w,p;c+=h[T+2],c+=g&m[d],T=3*(f+c),d=h[T]}break}if(0!==(64&d))return 0!==(32&d)?(k=a.avail_in-b,k=k>v>>3?v>>3:k,b+=k,y-=k,v-=k<<3,s.bitb=g,s.bitk=v,a.avail_in=b,a.total_in+=y-a.next_in_index,a.next_in_index=y,s.write=w,u):(a.msg="invalid literal/length code",k=a.avail_in-b,k=k>v>>3?v>>3:k,b+=k,y-=k,v-=k<<3,s.bitb=g,s.bitk=v,a.avail_in=b,a.total_in+=y-a.next_in_index,a.next_in_index=y,s.write=w,p);if(c+=h[T+2],c+=g&m[d],T=3*(f+c),0===(d=h[T])){g>>=h[T+1],v-=h[T+1],s.window[w++]=h[T+2],_--;break}}else g>>=h[T+1],v-=h[T+1],s.window[w++]=h[T+2],_--}while(_>=258&&b>=10);return k=a.avail_in-b,k=k>v>>3?v>>3:k,b+=k,y-=k,v-=k<<3,s.bitb=g,s.bitk=v,a.avail_in=b,a.total_in+=y-a.next_in_index,a.next_in_index=y,s.write=w,l}var e,n,i,r,o=this,s=0,a=0,c=0,f=0,d=0,g=0,v=0,y=0,b=0,w=0;o.init=function(t,o,s,a,l,u){e=M,v=t,y=o,i=s,b=a,r=l,w=u,n=null},o.proc=function(o,_,x){var S,k,C,E,T,R,B,F=0,V=0,j=0;for(j=_.next_in_index,E=_.avail_in,F=o.bitb,V=o.bitk,T=o.write,R=T<o.read?o.read-T-1:o.end-T;;)switch(e){case M:if(R>=258&&E>=10&&(o.bitb=F,o.bitk=V,_.avail_in=E,_.total_in+=j-_.next_in_index,_.next_in_index=j,o.write=T,x=t(v,y,i,b,r,w,o,_),j=_.next_in_index,E=_.avail_in,F=o.bitb,V=o.bitk,T=o.write,R=T<o.read?o.read-T-1:o.end-T,x!=l)){e=x==u?L:z;break}c=v,n=i,a=b,e=P;case P:for(S=c;S>V;){if(0===E)return o.bitb=F,o.bitk=V,_.avail_in=E,_.total_in+=j-_.next_in_index,_.next_in_index=j,o.write=T,o.inflate_flush(_,x);x=l,E--,F|=(255&_.read_byte(j++))<<V,V+=8}if(k=3*(a+(F&m[S])),F>>>=n[k+1],V-=n[k+1],C=n[k],0===C){f=n[k+2],e=I;break}if(0!==(16&C)){d=15&C,s=n[k+2],e=A;break}if(0===(64&C)){c=C,a=k/3+n[k+2];break}if(0!==(32&C)){e=L;break}return e=z,_.msg="invalid literal/length code",x=p,o.bitb=F,o.bitk=V,_.avail_in=E,_.total_in+=j-_.next_in_index,_.next_in_index=j,o.write=T,o.inflate_flush(_,x);case A:for(S=d;S>V;){if(0===E)return o.bitb=F,o.bitk=V,_.avail_in=E,_.total_in+=j-_.next_in_index,_.next_in_index=j,o.write=T,o.inflate_flush(_,x);x=l,E--,F|=(255&_.read_byte(j++))<<V,V+=8}s+=F&m[S],F>>=S,V-=S,c=y,n=r,a=w,e=O;case O:for(S=c;S>V;){if(0===E)return o.bitb=F,o.bitk=V,_.avail_in=E,_.total_in+=j-_.next_in_index,_.next_in_index=j,o.write=T,o.inflate_flush(_,x);x=l,E--,F|=(255&_.read_byte(j++))<<V,V+=8}if(k=3*(a+(F&m[S])),F>>=n[k+1],V-=n[k+1],C=n[k],0!==(16&C)){d=15&C,g=n[k+2],e=N;break}if(0===(64&C)){c=C,a=k/3+n[k+2];break}return e=z,_.msg="invalid distance code",x=p,o.bitb=F,o.bitk=V,_.avail_in=E,_.total_in+=j-_.next_in_index,_.next_in_index=j,o.write=T,o.inflate_flush(_,x);case N:for(S=d;S>V;){if(0===E)return o.bitb=F,o.bitk=V,_.avail_in=E,_.total_in+=j-_.next_in_index,_.next_in_index=j,o.write=T,o.inflate_flush(_,x);x=l,E--,F|=(255&_.read_byte(j++))<<V,V+=8}g+=F&m[S],F>>=S,V-=S,e=D;case D:for(B=T-g;0>B;)B+=o.end;for(;0!==s;){if(0===R&&(T==o.end&&0!==o.read&&(T=0,R=T<o.read?o.read-T-1:o.end-T),0===R&&(o.write=T,x=o.inflate_flush(_,x),T=o.write,R=T<o.read?o.read-T-1:o.end-T,T==o.end&&0!==o.read&&(T=0,R=T<o.read?o.read-T-1:o.end-T),0===R)))return o.bitb=F,o.bitk=V,_.avail_in=E,_.total_in+=j-_.next_in_index,_.next_in_index=j,o.write=T,o.inflate_flush(_,x);o.window[T++]=o.window[B++],R--,B==o.end&&(B=0),s--}e=M;break;case I:if(0===R&&(T==o.end&&0!==o.read&&(T=0,R=T<o.read?o.read-T-1:o.end-T),0===R&&(o.write=T,x=o.inflate_flush(_,x),T=o.write,R=T<o.read?o.read-T-1:o.end-T,T==o.end&&0!==o.read&&(T=0,R=T<o.read?o.read-T-1:o.end-T),0===R)))return o.bitb=F,o.bitk=V,_.avail_in=E,_.total_in+=j-_.next_in_index,_.next_in_index=j,o.write=T,o.inflate_flush(_,x);x=l,o.window[T++]=f,R--,e=M;break;case L:if(V>7&&(V-=8,E++,j--),o.write=T,x=o.inflate_flush(_,x),T=o.write,R=T<o.read?o.read-T-1:o.end-T,o.read!=o.write)return o.bitb=F,o.bitk=V,_.avail_in=E,_.total_in+=j-_.next_in_index,_.next_in_index=j,o.write=T,o.inflate_flush(_,x);e=$;case $:return x=u,o.bitb=F,o.bitk=V,_.avail_in=E,_.total_in+=j-_.next_in_index,_.next_in_index=j,o.write=T,o.inflate_flush(_,x);case z:return x=p,o.bitb=F,o.bitk=V,_.avail_in=E,_.total_in+=j-_.next_in_index,_.next_in_index=j,o.write=T,o.inflate_flush(_,x);default:return x=h,o.bitb=F,o.bitk=V,_.avail_in=E,_.total_in+=j-_.next_in_index,_.next_in_index=j,o.write=T,o.inflate_flush(_,x)}},o.free=function(){}}function i(t,i){var r,o=this,s=B,a=0,c=0,f=0,v=[0],y=[0],b=new n,w=0,_=new Int32Array(3*g),x=0,S=new e;o.bitk=0,o.bitb=0,o.window=new Uint8Array(i),o.end=i,o.read=0,o.write=0,o.reset=function(t,e){e&&(e[0]=x),s==q&&b.free(t),s=B,o.bitk=0,o.bitb=0,o.read=o.write=0},o.reset(t,null),o.inflate_flush=function(t,e){var n,i,r;return i=t.next_out_index,r=o.read,n=(r<=o.write?o.write:o.end)-r,n>t.avail_out&&(n=t.avail_out),0!==n&&e==d&&(e=l),t.avail_out-=n,t.total_out+=n,t.next_out.set(o.window.subarray(r,r+n),i),i+=n,r+=n,r==o.end&&(r=0,o.write==o.end&&(o.write=0),n=o.write-r,n>t.avail_out&&(n=t.avail_out),0!==n&&e==d&&(e=l),t.avail_out-=n,t.total_out+=n,t.next_out.set(o.window.subarray(r,r+n),i),i+=n,r+=n),t.next_out_index=i,o.read=r,e},o.proc=function(t,n){var i,d,g,x,k,C,E,T;for(x=t.next_in_index,k=t.avail_in,d=o.bitb,g=o.bitk,C=o.write,E=C<o.read?o.read-C-1:o.end-C;;)switch(s){case B:for(;3>g;){if(0===k)return o.bitb=d,o.bitk=g,t.avail_in=k,t.total_in+=x-t.next_in_index,t.next_in_index=x,o.write=C,o.inflate_flush(t,n);n=l,k--,d|=(255&t.read_byte(x++))<<g,g+=8}switch(i=7&d,w=1&i,i>>>1){case 0:d>>>=3,g-=3,i=7&g,d>>>=i,g-=i,s=F;break;case 1:var M=[],P=[],A=[[]],O=[[]];e.inflate_trees_fixed(M,P,A,O),b.init(M[0],P[0],A[0],0,O[0],0),d>>>=3,g-=3,s=q;break;case 2:d>>>=3,g-=3,s=j;break;case 3:return d>>>=3,g-=3,s=Y,t.msg="invalid block type",n=p,o.bitb=d,o.bitk=g,t.avail_in=k,t.total_in+=x-t.next_in_index,t.next_in_index=x,o.write=C,o.inflate_flush(t,n)}break;case F:for(;32>g;){if(0===k)return o.bitb=d,o.bitk=g,t.avail_in=k,t.total_in+=x-t.next_in_index,t.next_in_index=x,o.write=C,o.inflate_flush(t,n);n=l,k--,d|=(255&t.read_byte(x++))<<g,g+=8}if((65535&~d>>>16)!=(65535&d))return s=Y,t.msg="invalid stored block lengths",n=p,o.bitb=d,o.bitk=g,t.avail_in=k,t.total_in+=x-t.next_in_index,t.next_in_index=x,o.write=C,o.inflate_flush(t,n);a=65535&d,d=g=0,s=0!==a?V:0!==w?W:B;break;case V:if(0===k)return o.bitb=d,o.bitk=g,t.avail_in=k,t.total_in+=x-t.next_in_index,t.next_in_index=x,o.write=C,o.inflate_flush(t,n);if(0===E&&(C==o.end&&0!==o.read&&(C=0,E=C<o.read?o.read-C-1:o.end-C),0===E&&(o.write=C,n=o.inflate_flush(t,n),C=o.write,E=C<o.read?o.read-C-1:o.end-C,C==o.end&&0!==o.read&&(C=0,E=C<o.read?o.read-C-1:o.end-C),0===E)))return o.bitb=d,o.bitk=g,t.avail_in=k,t.total_in+=x-t.next_in_index,t.next_in_index=x,o.write=C,o.inflate_flush(t,n);if(n=l,i=a,i>k&&(i=k),i>E&&(i=E),o.window.set(t.read_buf(x,i),C),x+=i,k-=i,C+=i,E-=i,0!==(a-=i))break;s=0!==w?W:B;break;case j:for(;14>g;){if(0===k)return o.bitb=d,o.bitk=g,t.avail_in=k,t.total_in+=x-t.next_in_index,t.next_in_index=x,o.write=C,o.inflate_flush(t,n);n=l,k--,d|=(255&t.read_byte(x++))<<g,g+=8}if(c=i=16383&d,(31&i)>29||(31&i>>5)>29)return s=Y,t.msg="too many length or distance symbols",n=p,o.bitb=d,o.bitk=g,t.avail_in=k,t.total_in+=x-t.next_in_index,t.next_in_index=x,o.write=C,o.inflate_flush(t,n);if(i=258+(31&i)+(31&i>>5),!r||r.length<i)r=[];else for(T=0;i>T;T++)r[T]=0;d>>>=14,g-=14,f=0,s=U;case U:for(;4+(c>>>10)>f;){for(;3>g;){if(0===k)return o.bitb=d,o.bitk=g,t.avail_in=k,t.total_in+=x-t.next_in_index,t.next_in_index=x,o.write=C,o.inflate_flush(t,n);n=l,k--,d|=(255&t.read_byte(x++))<<g,g+=8}r[R[f++]]=7&d,d>>>=3,g-=3}for(;19>f;)r[R[f++]]=0;if(v[0]=7,i=S.inflate_trees_bits(r,v,y,_,t),i!=l)return n=i,n==p&&(r=null,s=Y),o.bitb=d,o.bitk=g,t.avail_in=k,t.total_in+=x-t.next_in_index,t.next_in_index=x,o.write=C,o.inflate_flush(t,n);f=0,s=H;case H:for(;;){if(i=c,!(258+(31&i)+(31&i>>5)>f))break;var N,D;for(i=v[0];i>g;){if(0===k)return o.bitb=d,o.bitk=g,t.avail_in=k,t.total_in+=x-t.next_in_index,t.next_in_index=x,o.write=C,o.inflate_flush(t,n);n=l,k--,d|=(255&t.read_byte(x++))<<g,g+=8}if(i=_[3*(y[0]+(d&m[i]))+1],D=_[3*(y[0]+(d&m[i]))+2],16>D)d>>>=i,g-=i,r[f++]=D;else{for(T=18==D?7:D-14,N=18==D?11:3;i+T>g;){if(0===k)return o.bitb=d,o.bitk=g,t.avail_in=k,t.total_in+=x-t.next_in_index,t.next_in_index=x,o.write=C,o.inflate_flush(t,n);n=l,k--,d|=(255&t.read_byte(x++))<<g,g+=8}if(d>>>=i,g-=i,N+=d&m[T],d>>>=T,g-=T,T=f,i=c,T+N>258+(31&i)+(31&i>>5)||16==D&&1>T)return r=null,s=Y,t.msg="invalid bit length repeat",n=p,o.bitb=d,o.bitk=g,t.avail_in=k,t.total_in+=x-t.next_in_index,t.next_in_index=x,o.write=C,o.inflate_flush(t,n);D=16==D?r[T-1]:0;do r[T++]=D;while(0!==--N);f=T}}y[0]=-1;var I=[],L=[],$=[],z=[];if(I[0]=9,L[0]=6,i=c,i=S.inflate_trees_dynamic(257+(31&i),1+(31&i>>5),r,I,L,$,z,_,t),i!=l)return i==p&&(r=null,s=Y),n=i,o.bitb=d,o.bitk=g,t.avail_in=k,t.total_in+=x-t.next_in_index,t.next_in_index=x,o.write=C,o.inflate_flush(t,n);b.init(I[0],L[0],_,$[0],_,z[0]),s=q;case q:if(o.bitb=d,o.bitk=g,t.avail_in=k,t.total_in+=x-t.next_in_index,t.next_in_index=x,o.write=C,(n=b.proc(o,t,n))!=u)return o.inflate_flush(t,n);if(n=l,b.free(t),x=t.next_in_index,k=t.avail_in,d=o.bitb,g=o.bitk,C=o.write,E=C<o.read?o.read-C-1:o.end-C,0===w){s=B;break}s=W;case W:if(o.write=C,n=o.inflate_flush(t,n),C=o.write,E=C<o.read?o.read-C-1:o.end-C,o.read!=o.write)return o.bitb=d,o.bitk=g,t.avail_in=k,t.total_in+=x-t.next_in_index,t.next_in_index=x,o.write=C,o.inflate_flush(t,n);s=J;case J:return n=u,o.bitb=d,o.bitk=g,t.avail_in=k,t.total_in+=x-t.next_in_index,t.next_in_index=x,o.write=C,o.inflate_flush(t,n);case Y:return n=p,o.bitb=d,o.bitk=g,t.avail_in=k,t.total_in+=x-t.next_in_index,t.next_in_index=x,o.write=C,o.inflate_flush(t,n);default:return n=h,o.bitb=d,o.bitk=g,t.avail_in=k,t.total_in+=x-t.next_in_index,t.next_in_index=x,o.write=C,o.inflate_flush(t,n)}},o.free=function(t){o.reset(t,null),o.window=null,_=null},o.set_dictionary=function(t,e,n){o.window.set(t.subarray(e,e+n),0),o.read=o.write=n},o.sync_point=function(){return s==F?1:0}}function r(){function t(t){return t&&t.istate?(t.total_in=t.total_out=0,t.msg=null,t.istate.mode=re,t.istate.blocks.reset(t,null),l):h}var e=this;e.mode=0,e.method=0,e.was=[0],e.need=0,e.marker=0,e.wbits=0,e.inflateEnd=function(t){return e.blocks&&e.blocks.free(t),e.blocks=null,l},e.inflateInit=function(n,r){return n.msg=null,e.blocks=null,8>r||r>15?(e.inflateEnd(n),h):(e.wbits=r,n.istate.blocks=new i(n,1<<r),t(n),l)},e.inflate=function(t,e){var n,i;if(!t||!t.istate||!t.next_in)return h;for(e=e==y?d:l,n=d;;)switch(t.istate.mode){case X:if(0===t.avail_in)return n;if(n=e,t.avail_in--,t.total_in++,(15&(t.istate.method=t.read_byte(t.next_in_index++)))!=G){t.istate.mode=se,t.msg="unknown compression method",t.istate.marker=5;break}if((t.istate.method>>4)+8>t.istate.wbits){t.istate.mode=se,t.msg="invalid window size",t.istate.marker=5;break}t.istate.mode=Q;case Q:if(0===t.avail_in)return n;if(n=e,t.avail_in--,t.total_in++,i=255&t.read_byte(t.next_in_index++),0!==((t.istate.method<<8)+i)%31){t.istate.mode=se,t.msg="incorrect header check",t.istate.marker=5;break}if(0===(i&K)){t.istate.mode=re;break}t.istate.mode=Z;case Z:if(0===t.avail_in)return n;n=e,t.avail_in--,t.total_in++,t.istate.need=4278190080&(255&t.read_byte(t.next_in_index++))<<24,t.istate.mode=te;case te:if(0===t.avail_in)return n;n=e,t.avail_in--,t.total_in++,t.istate.need+=16711680&(255&t.read_byte(t.next_in_index++))<<16,t.istate.mode=ee;case ee:if(0===t.avail_in)return n;n=e,t.avail_in--,t.total_in++,t.istate.need+=65280&(255&t.read_byte(t.next_in_index++))<<8,t.istate.mode=ne;case ne:return 0===t.avail_in?n:(n=e,t.avail_in--,t.total_in++,t.istate.need+=255&t.read_byte(t.next_in_index++),t.istate.mode=ie,c);case ie:return t.istate.mode=se,t.msg="need dictionary",t.istate.marker=0,h;case re:if(n=t.istate.blocks.proc(t,n),n==p){t.istate.mode=se,t.istate.marker=0;break}if(n==l&&(n=e),n!=u)return n;n=e,t.istate.blocks.reset(t,t.istate.was),t.istate.mode=oe;case oe:return u;case se:return p;default:return h}},e.inflateSetDictionary=function(t,e,n){var i=0,r=n;return t&&t.istate&&t.istate.mode==ie?(r>=1<<t.istate.wbits&&(r=(1<<t.istate.wbits)-1,i=n-r),t.istate.blocks.set_dictionary(e,i,r),t.istate.mode=re,l):h},e.inflateSync=function(e){var n,i,r,o,s;if(!e||!e.istate)return h;if(e.istate.mode!=se&&(e.istate.mode=se,e.istate.marker=0),0===(n=e.avail_in))return d;for(i=e.next_in_index,r=e.istate.marker;0!==n&&4>r;)e.read_byte(i)==ae[r]?r++:r=0!==e.read_byte(i)?0:4-r,i++,n--;return e.total_in+=i-e.next_in_index,e.next_in_index=i,e.avail_in=n,e.istate.marker=r,4!=r?p:(o=e.total_in,s=e.total_out,t(e),e.total_in=o,e.total_out=s,e.istate.mode=re,l)},e.inflateSyncPoint=function(t){return t&&t.istate&&t.istate.blocks?t.istate.blocks.sync_point():h}}function o(){}function s(){var t=this,e=new o,n=512,i=v,r=new Uint8Array(n),s=!1;e.inflateInit(),e.next_out=r,t.append=function(t,o){var a,c,h=[],p=0,f=0,m=0;if(0!==t.length){e.next_in_index=0,e.next_in=t,e.avail_in=t.length;do{if(e.next_out_index=0,e.avail_out=n,0!==e.avail_in||s||(e.next_in_index=0,s=!0),a=e.inflate(i),s&&a==d)return-1;if(a!=l&&a!=u)throw"inflating: "+e.msg;if((s||a==u)&&e.avail_in==t.length)return-1;e.next_out_index&&(e.next_out_index==n?h.push(new Uint8Array(r)):h.push(new Uint8Array(r.subarray(0,e.next_out_index)))),m+=e.next_out_index,o&&e.next_in_index>0&&e.next_in_index!=p&&(o(e.next_in_index),p=e.next_in_index)}while(e.avail_in>0||0===e.avail_out);return c=new Uint8Array(m),h.forEach(function(t){c.set(t,f),f+=t.length}),c}},t.flush=function(){e.inflateEnd()}}var a=15,l=0,u=1,c=2,h=-2,p=-3,f=-4,d=-5,m=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],g=1440,v=0,y=4,b=9,w=5,_=[96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,192,80,7,10,0,8,96,0,8,32,0,9,160,0,8,0,0,8,128,0,8,64,0,9,224,80,7,6,0,8,88,0,8,24,0,9,144,83,7,59,0,8,120,0,8,56,0,9,208,81,7,17,0,8,104,0,8,40,0,9,176,0,8,8,0,8,136,0,8,72,0,9,240,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,200,81,7,13,0,8,100,0,8,36,0,9,168,0,8,4,0,8,132,0,8,68,0,9,232,80,7,8,0,8,92,0,8,28,0,9,152,84,7,83,0,8,124,0,8,60,0,9,216,82,7,23,0,8,108,0,8,44,0,9,184,0,8,12,0,8,140,0,8,76,0,9,248,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,196,81,7,11,0,8,98,0,8,34,0,9,164,0,8,2,0,8,130,0,8,66,0,9,228,80,7,7,0,8,90,0,8,26,0,9,148,84,7,67,0,8,122,0,8,58,0,9,212,82,7,19,0,8,106,0,8,42,0,9,180,0,8,10,0,8,138,0,8,74,0,9,244,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,204,81,7,15,0,8,102,0,8,38,0,9,172,0,8,6,0,8,134,0,8,70,0,9,236,80,7,9,0,8,94,0,8,30,0,9,156,84,7,99,0,8,126,0,8,62,0,9,220,82,7,27,0,8,110,0,8,46,0,9,188,0,8,14,0,8,142,0,8,78,0,9,252,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,194,80,7,10,0,8,97,0,8,33,0,9,162,0,8,1,0,8,129,0,8,65,0,9,226,80,7,6,0,8,89,0,8,25,0,9,146,83,7,59,0,8,121,0,8,57,0,9,210,81,7,17,0,8,105,0,8,41,0,9,178,0,8,9,0,8,137,0,8,73,0,9,242,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,202,81,7,13,0,8,101,0,8,37,0,9,170,0,8,5,0,8,133,0,8,69,0,9,234,80,7,8,0,8,93,0,8,29,0,9,154,84,7,83,0,8,125,0,8,61,0,9,218,82,7,23,0,8,109,0,8,45,0,9,186,0,8,13,0,8,141,0,8,77,0,9,250,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,198,81,7,11,0,8,99,0,8,35,0,9,166,0,8,3,0,8,131,0,8,67,0,9,230,80,7,7,0,8,91,0,8,27,0,9,150,84,7,67,0,8,123,0,8,59,0,9,214,82,7,19,0,8,107,0,8,43,0,9,182,0,8,11,0,8,139,0,8,75,0,9,246,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,206,81,7,15,0,8,103,0,8,39,0,9,174,0,8,7,0,8,135,0,8,71,0,9,238,80,7,9,0,8,95,0,8,31,0,9,158,84,7,99,0,8,127,0,8,63,0,9,222,82,7,27,0,8,111,0,8,47,0,9,190,0,8,15,0,8,143,0,8,79,0,9,254,96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,193,80,7,10,0,8,96,0,8,32,0,9,161,0,8,0,0,8,128,0,8,64,0,9,225,80,7,6,0,8,88,0,8,24,0,9,145,83,7,59,0,8,120,0,8,56,0,9,209,81,7,17,0,8,104,0,8,40,0,9,177,0,8,8,0,8,136,0,8,72,0,9,241,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,201,81,7,13,0,8,100,0,8,36,0,9,169,0,8,4,0,8,132,0,8,68,0,9,233,80,7,8,0,8,92,0,8,28,0,9,153,84,7,83,0,8,124,0,8,60,0,9,217,82,7,23,0,8,108,0,8,44,0,9,185,0,8,12,0,8,140,0,8,76,0,9,249,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,197,81,7,11,0,8,98,0,8,34,0,9,165,0,8,2,0,8,130,0,8,66,0,9,229,80,7,7,0,8,90,0,8,26,0,9,149,84,7,67,0,8,122,0,8,58,0,9,213,82,7,19,0,8,106,0,8,42,0,9,181,0,8,10,0,8,138,0,8,74,0,9,245,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,205,81,7,15,0,8,102,0,8,38,0,9,173,0,8,6,0,8,134,0,8,70,0,9,237,80,7,9,0,8,94,0,8,30,0,9,157,84,7,99,0,8,126,0,8,62,0,9,221,82,7,27,0,8,110,0,8,46,0,9,189,0,8,14,0,8,142,0,8,78,0,9,253,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,195,80,7,10,0,8,97,0,8,33,0,9,163,0,8,1,0,8,129,0,8,65,0,9,227,80,7,6,0,8,89,0,8,25,0,9,147,83,7,59,0,8,121,0,8,57,0,9,211,81,7,17,0,8,105,0,8,41,0,9,179,0,8,9,0,8,137,0,8,73,0,9,243,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,203,81,7,13,0,8,101,0,8,37,0,9,171,0,8,5,0,8,133,0,8,69,0,9,235,80,7,8,0,8,93,0,8,29,0,9,155,84,7,83,0,8,125,0,8,61,0,9,219,82,7,23,0,8,109,0,8,45,0,9,187,0,8,13,0,8,141,0,8,77,0,9,251,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,199,81,7,11,0,8,99,0,8,35,0,9,167,0,8,3,0,8,131,0,8,67,0,9,231,80,7,7,0,8,91,0,8,27,0,9,151,84,7,67,0,8,123,0,8,59,0,9,215,82,7,19,0,8,107,0,8,43,0,9,183,0,8,11,0,8,139,0,8,75,0,9,247,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,207,81,7,15,0,8,103,0,8,39,0,9,175,0,8,7,0,8,135,0,8,71,0,9,239,80,7,9,0,8,95,0,8,31,0,9,159,84,7,99,0,8,127,0,8,63,0,9,223,82,7,27,0,8,111,0,8,47,0,9,191,0,8,15,0,8,143,0,8,79,0,9,255],x=[80,5,1,87,5,257,83,5,17,91,5,4097,81,5,5,89,5,1025,85,5,65,93,5,16385,80,5,3,88,5,513,84,5,33,92,5,8193,82,5,9,90,5,2049,86,5,129,192,5,24577,80,5,2,87,5,385,83,5,25,91,5,6145,81,5,7,89,5,1537,85,5,97,93,5,24577,80,5,4,88,5,769,84,5,49,92,5,12289,82,5,13,90,5,3073,86,5,193,192,5,24577],S=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],k=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,112,112],C=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],E=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],T=15;e.inflate_trees_fixed=function(t,e,n,i){return t[0]=b,e[0]=w,n[0]=_,i[0]=x,l};var M=0,P=1,A=2,O=3,N=4,D=5,I=6,L=7,$=8,z=9,R=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],B=0,F=1,V=2,j=3,U=4,H=5,q=6,W=7,J=8,Y=9,K=32,G=8,X=0,Q=1,Z=2,te=3,ee=4,ne=5,ie=6,re=7,oe=12,se=13,ae=[0,0,255,255];o.prototype={inflateInit:function(t){var e=this;return e.istate=new r,t||(t=a),e.istate.inflateInit(e,t)},inflate:function(t){var e=this;return e.istate?e.istate.inflate(e,t):h},inflateEnd:function(){var t=this;if(!t.istate)return h;var e=t.istate.inflateEnd(t);return t.istate=null,e},inflateSync:function(){var t=this;return t.istate?t.istate.inflateSync(t):h},inflateSetDictionary:function(t,e){var n=this;return n.istate?n.istate.inflateSetDictionary(n,t,e):h},read_byte:function(t){var e=this;return e.next_in.subarray(t,t+1)[0]},read_buf:function(t,e){var n=this;return n.next_in.subarray(t,t+e)}};var le;t.zip?t.zip.Inflater=s:(le=new s,t.addEventListener("message",function(e){var n=e.data;n.append&&t.postMessage({onappend:!0,data:le.append(n.data,function(e){t.postMessage({progress:!0,current:e})})}),n.flush&&(le.flush(),t.postMessage({onflush:!0}))},!1))}(this),/*! jQuery UI - v1.9.2 - 2012-11-28
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.position.js, jquery.ui.draggable.js, jquery.ui.droppable.js, jquery.ui.resizable.js, jquery.ui.selectable.js, jquery.ui.sortable.js, jquery.ui.autocomplete.js, jquery.ui.menu.js, jquery.ui.effect.js, jquery.ui.effect-blind.js, jquery.ui.effect-bounce.js, jquery.ui.effect-clip.js, jquery.ui.effect-drop.js, jquery.ui.effect-explode.js, jquery.ui.effect-fade.js, jquery.ui.effect-fold.js, jquery.ui.effect-highlight.js, jquery.ui.effect-pulsate.js, jquery.ui.effect-scale.js, jquery.ui.effect-shake.js, jquery.ui.effect-slide.js, jquery.ui.effect-transfer.js
* Copyright (c) 2012 jQuery Foundation and other contributors Licensed MIT */
function(t,e){function n(e,n){var r,o,s,a=e.nodeName.toLowerCase();return"area"===a?(r=e.parentNode,o=r.name,e.href&&o&&"map"===r.nodeName.toLowerCase()?(s=t("img[usemap=#"+o+"]")[0],!!s&&i(s)):!1):(/input|select|textarea|button|object/.test(a)?!e.disabled:"a"===a?e.href||n:n)&&i(e)}function i(e){return t.expr.filters.visible(e)&&!t(e).parents().andSelf().filter(function(){return"hidden"===t.css(this,"visibility")}).length}var r=0,o=/^ui-id-\d+$/;t.ui=t.ui||{},t.ui.version||(t.extend(t.ui,{version:"1.9.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),t.fn.extend({_focus:t.fn.focus,focus:function(e,n){return"number"==typeof e?this.each(function(){var i=this;setTimeout(function(){t(i).focus(),n&&n.call(i)},e)}):this._focus.apply(this,arguments)},scrollParent:function(){var e;return e=t.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(t.css(this,"position"))&&/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!e.length?t(document):e},zIndex:function(n){if(n!==e)return this.css("zIndex",n);if(this.length)for(var i,r,o=t(this[0]);o.length&&o[0]!==document;){if(i=o.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(r=parseInt(o.css("zIndex"),10),!isNaN(r)&&0!==r))return r;o=o.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++r)})},removeUniqueId:function(){return this.each(function(){o.test(this.id)&&t(this).removeAttr("id")})}}),t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(n){return!!t.data(n,e)}}):function(e,n,i){return!!t.data(e,i[3])},focusable:function(e){return n(e,!isNaN(t.attr(e,"tabindex")))},tabbable:function(e){var i=t.attr(e,"tabindex"),r=isNaN(i);return(r||i>=0)&&n(e,!r)}}),t(function(){var e=document.body,n=e.appendChild(n=document.createElement("div"));n.offsetHeight,t.extend(n.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),t.support.minHeight=100===n.offsetHeight,t.support.selectstart="onselectstart"in n,e.removeChild(n).style.display="none"}),t("<a>").outerWidth(1).jquery||t.each(["Width","Height"],function(n,i){function r(e,n,i,r){return t.each(o,function(){n-=parseFloat(t.css(e,"padding"+this))||0,i&&(n-=parseFloat(t.css(e,"border"+this+"Width"))||0),r&&(n-=parseFloat(t.css(e,"margin"+this))||0)}),n}var o="Width"===i?["Left","Right"]:["Top","Bottom"],s=i.toLowerCase(),a={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+i]=function(n){return n===e?a["inner"+i].call(this):this.each(function(){t(this).css(s,r(this,n)+"px")})},t.fn["outer"+i]=function(e,n){return"number"!=typeof e?a["outer"+i].call(this,e):this.each(function(){t(this).css(s,r(this,e,!0,n)+"px")})}}),t("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(t.fn.removeData=function(e){return function(n){return arguments.length?e.call(this,t.camelCase(n)):e.call(this)}}(t.fn.removeData)),function(){var e=/msie ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||[];t.ui.ie=e.length?!0:!1,t.ui.ie6=6===parseFloat(e[1],10)}(),t.fn.extend({disableSelection:function(){return this.bind((t.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(t){t.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),t.extend(t.ui,{plugin:{add:function(e,n,i){var r,o=t.ui[e].prototype;for(r in i)o.plugins[r]=o.plugins[r]||[],o.plugins[r].push([n,i[r]])},call:function(t,e,n){var i,r=t.plugins[e];if(r&&t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType)for(i=0;i<r.length;i++)t.options[r[i][0]]&&r[i][1].apply(t.element,n)}},contains:t.contains,hasScroll:function(e,n){if("hidden"===t(e).css("overflow"))return!1;var i=n&&"left"===n?"scrollLeft":"scrollTop",r=!1;return e[i]>0?!0:(e[i]=1,r=e[i]>0,e[i]=0,r)},isOverAxis:function(t,e,n){return t>e&&e+n>t},isOver:function(e,n,i,r,o,s){return t.ui.isOverAxis(e,i,o)&&t.ui.isOverAxis(n,r,s)}}))}(jQuery),function(t,e){var n=0,i=Array.prototype.slice,r=t.cleanData;t.cleanData=function(e){for(var n,i=0;null!=(n=e[i]);i++)try{t(n).triggerHandler("remove")}catch(o){}r(e)},t.widget=function(e,n,i){var r,o,s,a,l=e.split(".")[0];e=e.split(".")[1],r=l+"-"+e,i||(i=n,n=t.Widget),t.expr[":"][r.toLowerCase()]=function(e){return!!t.data(e,r)},t[l]=t[l]||{},o=t[l][e],s=t[l][e]=function(t,e){return this._createWidget?(arguments.length&&this._createWidget(t,e),void 0):new s(t,e)},t.extend(s,o,{version:i.version,_proto:t.extend({},i),_childConstructors:[]}),a=new n,a.options=t.widget.extend({},a.options),t.each(i,function(e,r){t.isFunction(r)&&(i[e]=function(){var t=function(){return n.prototype[e].apply(this,arguments)},i=function(t){return n.prototype[e].apply(this,t)};return function(){var e,n=this._super,o=this._superApply;return this._super=t,this._superApply=i,e=r.apply(this,arguments),this._super=n,this._superApply=o,e}}())}),s.prototype=t.widget.extend(a,{widgetEventPrefix:o?a.widgetEventPrefix:e},i,{constructor:s,namespace:l,widgetName:e,widgetBaseClass:r,widgetFullName:r}),o?(t.each(o._childConstructors,function(e,n){var i=n.prototype;t.widget(i.namespace+"."+i.widgetName,s,n._proto)}),delete o._childConstructors):n._childConstructors.push(s),t.widget.bridge(e,s)},t.widget.extend=function(n){for(var r,o,s=i.call(arguments,1),a=0,l=s.length;l>a;a++)for(r in s[a])o=s[a][r],s[a].hasOwnProperty(r)&&o!==e&&(n[r]=t.isPlainObject(o)?t.isPlainObject(n[r])?t.widget.extend({},n[r],o):t.widget.extend({},o):o);return n},t.widget.bridge=function(n,r){var o=r.prototype.widgetFullName||n;t.fn[n]=function(s){var a="string"==typeof s,l=i.call(arguments,1),u=this;return s=!a&&l.length?t.widget.extend.apply(null,[s].concat(l)):s,a?this.each(function(){var i,r=t.data(this,o);return r?t.isFunction(r[s])&&"_"!==s.charAt(0)?(i=r[s].apply(r,l),i!==r&&i!==e?(u=i&&i.jquery?u.pushStack(i.get()):i,!1):void 0):t.error("no such method '"+s+"' for "+n+" widget instance"):t.error("cannot call methods on "+n+" prior to initialization; "+"attempted to call method '"+s+"'")}):this.each(function(){var e=t.data(this,o);e?e.option(s||{})._init():t.data(this,o,new r(s,this))}),u}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,i){i=t(i||this.defaultElement||this)[0],this.element=t(i),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this.bindings=t(),this.hoverable=t(),this.focusable=t(),i!==this&&(t.data(i,this.widgetName,this),t.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===i&&this.destroy()}}),this.document=t(i.style?i.ownerDocument:i.document||i),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(n,i){var r,o,s,a=n;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof n)if(a={},r=n.split("."),n=r.shift(),r.length){for(o=a[n]=t.widget.extend({},this.options[n]),s=0;s<r.length-1;s++)o[r[s]]=o[r[s]]||{},o=o[r[s]];if(n=r.pop(),i===e)return o[n]===e?null:o[n];o[n]=i}else{if(i===e)return this.options[n]===e?null:this.options[n];a[n]=i}return this._setOptions(a),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!e).attr("aria-disabled",e),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(e,n,i){var r,o=this;"boolean"!=typeof e&&(i=n,n=e,e=!1),i?(n=r=t(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,r=this.widget()),t.each(i,function(i,s){function a(){return e||o.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof s?o[s]:s).apply(o,arguments):void 0}"string"!=typeof s&&(a.guid=s.guid=s.guid||a.guid||t.guid++);var l=i.match(/^(\w+)\s*(.*)$/),u=l[1]+o.eventNamespace,c=l[2];c?r.delegate(c,u,a):n.bind(u,a)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e)},_delay:function(t,e){function n(){return("string"==typeof t?i[t]:t).apply(i,arguments)}var i=this;return setTimeout(n,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,n,i){var r,o,s=this.options[e];if(i=i||{},n=t.Event(n),n.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),n.target=this.element[0],o=n.originalEvent)for(r in o)r in n||(n[r]=o[r]);return this.element.trigger(n,i),!(t.isFunction(s)&&s.apply(this.element[0],[n].concat(i))===!1||n.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,n){t.Widget.prototype["_"+e]=function(i,r,o){"string"==typeof r&&(r={effect:r});var s,a=r?r===!0||"number"==typeof r?n:r.effect||n:e;r=r||{},"number"==typeof r&&(r={duration:r}),s=!t.isEmptyObject(r),r.complete=o,r.delay&&i.delay(r.delay),s&&t.effects&&(t.effects.effect[a]||t.uiBackCompat!==!1&&t.effects[a])?i[e](r):a!==e&&i[a]?i[a](r.duration,r.easing,o):i.queue(function(n){t(this)[e](),o&&o.call(i[0]),n()})}}),t.uiBackCompat!==!1&&(t.Widget.prototype._getCreateOptions=function(){return t.metadata&&t.metadata.get(this.element[0])[this.widgetName]})}(jQuery),function(t){var e=!1;t(document).mouseup(function(){e=!1}),t.widget("ui.mouse",{version:"1.9.2",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(n){return!0===t.data(n.target,e.widgetName+".preventClickEvent")?(t.removeData(n.target,e.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(n){if(!e){this._mouseStarted&&this._mouseUp(n),this._mouseDownEvent=n;var i=this,r=1===n.which,o="string"==typeof this.options.cancel&&n.target.nodeName?t(n.target).closest(this.options.cancel).length:!1;return r&&!o&&this._mouseCapture(n)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(n)&&this._mouseDelayMet(n)&&(this._mouseStarted=this._mouseStart(n)!==!1,!this._mouseStarted)?(n.preventDefault(),!0):(!0===t.data(n.target,this.widgetName+".preventClickEvent")&&t.removeData(n.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return i._mouseMove(t)},this._mouseUpDelegate=function(t){return i._mouseUp(t)},t(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),n.preventDefault(),e=!0,!0)):!0}},_mouseMove:function(e){return!t.ui.ie||document.documentMode>=9||e.button?this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==!1,this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted):this._mouseUp(e)},_mouseUp:function(e){return t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(t,e){function n(t,e,n){return[parseInt(t[0],10)*(p.test(t[0])?e/100:1),parseInt(t[1],10)*(p.test(t[1])?n/100:1)]}function i(e,n){return parseInt(t.css(e,n),10)||0}t.ui=t.ui||{};var r,o=Math.max,s=Math.abs,a=Math.round,l=/left|center|right/,u=/top|center|bottom/,c=/[\+\-]\d+%?/,h=/^\w+/,p=/%$/,f=t.fn.position;t.position={scrollbarWidth:function(){if(r!==e)return r;var n,i,o=t("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),s=o.children()[0];return t("body").append(o),n=s.offsetWidth,o.css("overflow","scroll"),i=s.offsetWidth,n===i&&(i=o[0].clientWidth),o.remove(),r=n-i},getScrollInfo:function(e){var n=e.isWindow?"":e.element.css("overflow-x"),i=e.isWindow?"":e.element.css("overflow-y"),r="scroll"===n||"auto"===n&&e.width<e.element[0].scrollWidth,o="scroll"===i||"auto"===i&&e.height<e.element[0].scrollHeight;return{width:r?t.position.scrollbarWidth():0,height:o?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var n=t(e||window),i=t.isWindow(n[0]);return{element:n,isWindow:i,offset:n.offset()||{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:i?n.width():n.outerWidth(),height:i?n.height():n.outerHeight()}}},t.fn.position=function(e){if(!e||!e.of)return f.apply(this,arguments);e=t.extend({},e);var r,p,d,m,g,v=t(e.of),y=t.position.getWithinInfo(e.within),b=t.position.getScrollInfo(y),w=v[0],_=(e.collision||"flip").split(" "),x={};return 9===w.nodeType?(p=v.width(),d=v.height(),m={top:0,left:0}):t.isWindow(w)?(p=v.width(),d=v.height(),m={top:v.scrollTop(),left:v.scrollLeft()}):w.preventDefault?(e.at="left top",p=d=0,m={top:w.pageY,left:w.pageX}):(p=v.outerWidth(),d=v.outerHeight(),m=v.offset()),g=t.extend({},m),t.each(["my","at"],function(){var t,n,i=(e[this]||"").split(" ");1===i.length&&(i=l.test(i[0])?i.concat(["center"]):u.test(i[0])?["center"].concat(i):["center","center"]),i[0]=l.test(i[0])?i[0]:"center",i[1]=u.test(i[1])?i[1]:"center",t=c.exec(i[0]),n=c.exec(i[1]),x[this]=[t?t[0]:0,n?n[0]:0],e[this]=[h.exec(i[0])[0],h.exec(i[1])[0]]}),1===_.length&&(_[1]=_[0]),"right"===e.at[0]?g.left+=p:"center"===e.at[0]&&(g.left+=p/2),"bottom"===e.at[1]?g.top+=d:"center"===e.at[1]&&(g.top+=d/2),r=n(x.at,p,d),g.left+=r[0],g.top+=r[1],this.each(function(){var l,u,c=t(this),h=c.outerWidth(),f=c.outerHeight(),w=i(this,"marginLeft"),S=i(this,"marginTop"),k=h+w+i(this,"marginRight")+b.width,C=f+S+i(this,"marginBottom")+b.height,E=t.extend({},g),T=n(x.my,c.outerWidth(),c.outerHeight());"right"===e.my[0]?E.left-=h:"center"===e.my[0]&&(E.left-=h/2),"bottom"===e.my[1]?E.top-=f:"center"===e.my[1]&&(E.top-=f/2),E.left+=T[0],E.top+=T[1],t.support.offsetFractions||(E.left=a(E.left),E.top=a(E.top)),l={marginLeft:w,marginTop:S},t.each(["left","top"],function(n,i){t.ui.position[_[n]]&&t.ui.position[_[n]][i](E,{targetWidth:p,targetHeight:d,elemWidth:h,elemHeight:f,collisionPosition:l,collisionWidth:k,collisionHeight:C,offset:[r[0]+T[0],r[1]+T[1]],my:e.my,at:e.at,within:y,elem:c})}),t.fn.bgiframe&&c.bgiframe(),e.using&&(u=function(t){var n=m.left-E.left,i=n+p-h,r=m.top-E.top,a=r+d-f,l={target:{element:v,left:m.left,top:m.top,width:p,height:d},element:{element:c,left:E.left,top:E.top,width:h,height:f},horizontal:0>i?"left":n>0?"right":"center",vertical:0>a?"top":r>0?"bottom":"middle"};h>p&&s(n+i)<p&&(l.horizontal="center"),f>d&&s(r+a)<d&&(l.vertical="middle"),l.important=o(s(n),s(i))>o(s(r),s(a))?"horizontal":"vertical",e.using.call(this,t,l)}),c.offset(t.extend(E,{using:u}))})},t.ui.position={fit:{left:function(t,e){var n,i=e.within,r=i.isWindow?i.scrollLeft:i.offset.left,s=i.width,a=t.left-e.collisionPosition.marginLeft,l=r-a,u=a+e.collisionWidth-s-r;e.collisionWidth>s?l>0&&0>=u?(n=t.left+l+e.collisionWidth-s-r,t.left+=l-n):t.left=u>0&&0>=l?r:l>u?r+s-e.collisionWidth:r:l>0?t.left+=l:u>0?t.left-=u:t.left=o(t.left-a,t.left)},top:function(t,e){var n,i=e.within,r=i.isWindow?i.scrollTop:i.offset.top,s=e.within.height,a=t.top-e.collisionPosition.marginTop,l=r-a,u=a+e.collisionHeight-s-r;e.collisionHeight>s?l>0&&0>=u?(n=t.top+l+e.collisionHeight-s-r,t.top+=l-n):t.top=u>0&&0>=l?r:l>u?r+s-e.collisionHeight:r:l>0?t.top+=l:u>0?t.top-=u:t.top=o(t.top-a,t.top)}},flip:{left:function(t,e){var n,i,r=e.within,o=r.offset.left+r.scrollLeft,a=r.width,l=r.isWindow?r.scrollLeft:r.offset.left,u=t.left-e.collisionPosition.marginLeft,c=u-l,h=u+e.collisionWidth-a-l,p="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,f="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,d=-2*e.offset[0];0>c?(n=t.left+p+f+d+e.collisionWidth-a-o,(0>n||n<s(c))&&(t.left+=p+f+d)):h>0&&(i=t.left-e.collisionPosition.marginLeft+p+f+d-l,(i>0||s(i)<h)&&(t.left+=p+f+d))},top:function(t,e){var n,i,r=e.within,o=r.offset.top+r.scrollTop,a=r.height,l=r.isWindow?r.scrollTop:r.offset.top,u=t.top-e.collisionPosition.marginTop,c=u-l,h=u+e.collisionHeight-a-l,p="top"===e.my[1],f=p?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,d="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,m=-2*e.offset[1];0>c?(i=t.top+f+d+m+e.collisionHeight-a-o,t.top+f+d+m>c&&(0>i||i<s(c))&&(t.top+=f+d+m)):h>0&&(n=t.top-e.collisionPosition.marginTop+f+d+m-l,t.top+f+d+m>h&&(n>0||s(n)<h)&&(t.top+=f+d+m))}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}},function(){var e,n,i,r,o,s=document.getElementsByTagName("body")[0],a=document.createElement("div");e=document.createElement(s?"div":"body"),i={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},s&&t.extend(i,{position:"absolute",left:"-1000px",top:"-1000px"});for(o in i)e.style[o]=i[o];e.appendChild(a),n=s||document.documentElement,n.insertBefore(e,n.firstChild),a.style.cssText="position: absolute; left: 10.7432222px;",r=t(a).offset().left,t.support.offsetFractions=r>10&&11>r,e.innerHTML="",n.removeChild(e)}(),t.uiBackCompat!==!1&&!function(t){var n=t.fn.position;t.fn.position=function(i){if(!i||!i.offset)return n.call(this,i);var r=i.offset.split(" "),o=i.at.split(" ");return 1===r.length&&(r[1]=r[0]),/^\d/.test(r[0])&&(r[0]="+"+r[0]),/^\d/.test(r[1])&&(r[1]="+"+r[1]),1===o.length&&(/left|center|right/.test(o[0])?o[1]="center":(o[1]=o[0],o[0]="center")),n.call(this,t.extend(i,{at:o[0]+r[0]+" "+o[1]+r[1],offset:e}))}}(jQuery)}(jQuery),function(t){t.widget("ui.draggable",t.ui.mouse,{version:"1.9.2",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){"original"!=this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(e){var n=this.options;return this.helper||n.disabled||t(e.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(e),this.handle?(t(n.iframeFix===!0?"iframe":n.iframeFix).each(function(){t('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(t(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(e){var n=this.options;return this.helper=this._createHelper(e),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),n.containment&&this._setContainment(),this._trigger("start",e)===!1?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!n.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_mouseDrag:function(e,n){if(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),!n){var i=this._uiHash();if(this._trigger("drag",e,i)===!1)return this._mouseUp({}),!1;this.position=i.position}return this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px"),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var n=!1;t.ui.ddmanager&&!this.options.dropBehaviour&&(n=t.ui.ddmanager.drop(this,e)),this.dropped&&(n=this.dropped,this.dropped=!1);for(var i=this.element[0],r=!1;i&&(i=i.parentNode);)i==document&&(r=!0);if(!r&&"original"===this.options.helper)return!1;if("invalid"==this.options.revert&&!n||"valid"==this.options.revert&&n||this.options.revert===!0||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)){var o=this;t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){o._trigger("stop",e)!==!1&&o._clear()})}else this._trigger("stop",e)!==!1&&this._clear();return!1},_mouseUp:function(e){return t("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(e){var n=this.options.handle&&t(this.options.handle,this.element).length?!1:!0;return t(this.options.handle,this.element).find("*").andSelf().each(function(){this==e.target&&(n=!0)}),n},_createHelper:function(e){var n=this.options,i=t.isFunction(n.helper)?t(n.helper.apply(this.element[0],[e])):"clone"==n.helper?this.element.clone().removeAttr("id"):this.element;return i.parents("body").length||i.appendTo("parent"==n.appendTo?this.element[0].parentNode:n.appendTo),i[0]==this.element[0]||/(fixed|absolute)/.test(i.css("position"))||i.css("position","absolute"),i},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var t=this.element.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e=this.options;if("parent"==e.containment&&(e.containment=this.helper[0].parentNode),("document"==e.containment||"window"==e.containment)&&(this.containment=["document"==e.containment?0:t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"==e.containment?0:t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"==e.containment?0:t(window).scrollLeft())+t("document"==e.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"==e.containment?0:t(window).scrollTop())+(t("document"==e.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(e.containment)||e.containment.constructor==Array)e.containment.constructor==Array&&(this.containment=e.containment);else{var n=t(e.containment),i=n[0];if(!i)return;n.offset();var r="hidden"!=t(i).css("overflow");this.containment=[(parseInt(t(i).css("borderLeftWidth"),10)||0)+(parseInt(t(i).css("paddingLeft"),10)||0),(parseInt(t(i).css("borderTopWidth"),10)||0)+(parseInt(t(i).css("paddingTop"),10)||0),(r?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(t(i).css("borderLeftWidth"),10)||0)-(parseInt(t(i).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(r?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(t(i).css("borderTopWidth"),10)||0)-(parseInt(t(i).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=n}},_convertPositionTo:function(e,n){n||(n=this.position);var i="absolute"==e?1:-1,r=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),o=/(html|body)/i.test(r[0].tagName);return{top:n.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"==this.cssPosition?-this.scrollParent.scrollTop():o?0:r.scrollTop())*i,left:n.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():o?0:r.scrollLeft())*i}},_generatePosition:function(e){var n=this.options,i="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,r=/(html|body)/i.test(i[0].tagName),o=e.pageX,s=e.pageY;if(this.originalPosition){var a;if(this.containment){if(this.relative_container){var l=this.relative_container.offset();a=[this.containment[0]+l.left,this.containment[1]+l.top,this.containment[2]+l.left,this.containment[3]+l.top]}else a=this.containment;e.pageX-this.offset.click.left<a[0]&&(o=a[0]+this.offset.click.left),e.pageY-this.offset.click.top<a[1]&&(s=a[1]+this.offset.click.top),e.pageX-this.offset.click.left>a[2]&&(o=a[2]+this.offset.click.left),e.pageY-this.offset.click.top>a[3]&&(s=a[3]+this.offset.click.top)}if(n.grid){var u=n.grid[1]?this.originalPageY+Math.round((s-this.originalPageY)/n.grid[1])*n.grid[1]:this.originalPageY;s=a?u-this.offset.click.top<a[1]||u-this.offset.click.top>a[3]?u-this.offset.click.top<a[1]?u+n.grid[1]:u-n.grid[1]:u:u;var c=n.grid[0]?this.originalPageX+Math.round((o-this.originalPageX)/n.grid[0])*n.grid[0]:this.originalPageX;o=a?c-this.offset.click.left<a[0]||c-this.offset.click.left>a[2]?c-this.offset.click.left<a[0]?c+n.grid[0]:c-n.grid[0]:c:c}}return{top:s-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"==this.cssPosition?-this.scrollParent.scrollTop():r?0:i.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():r?0:i.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]==this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(e,n,i){return i=i||this._uiHash(),t.ui.plugin.call(this,e,[n,i]),"drag"==e&&(this.positionAbs=this._convertPositionTo("absolute")),t.Widget.prototype._trigger.call(this,e,n,i)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,n){var i=t(this).data("draggable"),r=i.options,o=t.extend({},n,{item:i.element});i.sortables=[],t(r.connectToSortable).each(function(){var n=t.data(this,"sortable");n&&!n.options.disabled&&(i.sortables.push({instance:n,shouldRevert:n.options.revert}),n.refreshPositions(),n._trigger("activate",e,o))})},stop:function(e,n){var i=t(this).data("draggable"),r=t.extend({},n,{item:i.element});t.each(i.sortables,function(){this.instance.isOver?(this.instance.isOver=0,i.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(e),this.instance.options.helper=this.instance.options._helper,"original"==i.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",e,r))})},drag:function(e,n){var i=t(this).data("draggable"),r=this;t.each(i.sortables,function(){var o=!1,s=this;this.instance.positionAbs=i.positionAbs,this.instance.helperProportions=i.helperProportions,this.instance.offset.click=i.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(o=!0,t.each(i.sortables,function(){return this.instance.positionAbs=i.positionAbs,this.instance.helperProportions=i.helperProportions,this.instance.offset.click=i.offset.click,this!=s&&this.instance._intersectsWith(this.instance.containerCache)&&t.ui.contains(s.instance.element[0],this.instance.element[0])&&(o=!1),o})),o?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=t(r).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return n.helper[0]},e.target=this.instance.currentItem[0],this.instance._mouseCapture(e,!0),this.instance._mouseStart(e,!0,!0),this.instance.offset.click.top=i.offset.click.top,this.instance.offset.click.left=i.offset.click.left,this.instance.offset.parent.left-=i.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=i.offset.parent.top-this.instance.offset.parent.top,i._trigger("toSortable",e),i.dropped=this.instance.element,i.currentItem=i.element,this.instance.fromOutside=i),this.instance.currentItem&&this.instance._mouseDrag(e)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",e,this.instance._uiHash(this.instance)),this.instance._mouseStop(e,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),i._trigger("fromSortable",e),i.dropped=!1)
})}}),t.ui.plugin.add("draggable","cursor",{start:function(){var e=t("body"),n=t(this).data("draggable").options;e.css("cursor")&&(n._cursor=e.css("cursor")),e.css("cursor",n.cursor)},stop:function(){var e=t(this).data("draggable").options;e._cursor&&t("body").css("cursor",e._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,n){var i=t(n.helper),r=t(this).data("draggable").options;i.css("opacity")&&(r._opacity=i.css("opacity")),i.css("opacity",r.opacity)},stop:function(e,n){var i=t(this).data("draggable").options;i._opacity&&t(n.helper).css("opacity",i._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(){var e=t(this).data("draggable");e.scrollParent[0]!=document&&"HTML"!=e.scrollParent[0].tagName&&(e.overflowOffset=e.scrollParent.offset())},drag:function(e){var n=t(this).data("draggable"),i=n.options,r=!1;n.scrollParent[0]!=document&&"HTML"!=n.scrollParent[0].tagName?(i.axis&&"x"==i.axis||(n.overflowOffset.top+n.scrollParent[0].offsetHeight-e.pageY<i.scrollSensitivity?n.scrollParent[0].scrollTop=r=n.scrollParent[0].scrollTop+i.scrollSpeed:e.pageY-n.overflowOffset.top<i.scrollSensitivity&&(n.scrollParent[0].scrollTop=r=n.scrollParent[0].scrollTop-i.scrollSpeed)),i.axis&&"y"==i.axis||(n.overflowOffset.left+n.scrollParent[0].offsetWidth-e.pageX<i.scrollSensitivity?n.scrollParent[0].scrollLeft=r=n.scrollParent[0].scrollLeft+i.scrollSpeed:e.pageX-n.overflowOffset.left<i.scrollSensitivity&&(n.scrollParent[0].scrollLeft=r=n.scrollParent[0].scrollLeft-i.scrollSpeed))):(i.axis&&"x"==i.axis||(e.pageY-t(document).scrollTop()<i.scrollSensitivity?r=t(document).scrollTop(t(document).scrollTop()-i.scrollSpeed):t(window).height()-(e.pageY-t(document).scrollTop())<i.scrollSensitivity&&(r=t(document).scrollTop(t(document).scrollTop()+i.scrollSpeed))),i.axis&&"y"==i.axis||(e.pageX-t(document).scrollLeft()<i.scrollSensitivity?r=t(document).scrollLeft(t(document).scrollLeft()-i.scrollSpeed):t(window).width()-(e.pageX-t(document).scrollLeft())<i.scrollSensitivity&&(r=t(document).scrollLeft(t(document).scrollLeft()+i.scrollSpeed)))),r!==!1&&t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(n,e)}}),t.ui.plugin.add("draggable","snap",{start:function(){var e=t(this).data("draggable"),n=e.options;e.snapElements=[],t(n.snap.constructor!=String?n.snap.items||":data(draggable)":n.snap).each(function(){var n=t(this),i=n.offset();this!=e.element[0]&&e.snapElements.push({item:this,width:n.outerWidth(),height:n.outerHeight(),top:i.top,left:i.left})})},drag:function(e,n){for(var i=t(this).data("draggable"),r=i.options,o=r.snapTolerance,s=n.offset.left,a=s+i.helperProportions.width,l=n.offset.top,u=l+i.helperProportions.height,c=i.snapElements.length-1;c>=0;c--){var h=i.snapElements[c].left,p=h+i.snapElements[c].width,f=i.snapElements[c].top,d=f+i.snapElements[c].height;if(s>h-o&&p+o>s&&l>f-o&&d+o>l||s>h-o&&p+o>s&&u>f-o&&d+o>u||a>h-o&&p+o>a&&l>f-o&&d+o>l||a>h-o&&p+o>a&&u>f-o&&d+o>u){if("inner"!=r.snapMode){var m=Math.abs(f-u)<=o,g=Math.abs(d-l)<=o,v=Math.abs(h-a)<=o,y=Math.abs(p-s)<=o;m&&(n.position.top=i._convertPositionTo("relative",{top:f-i.helperProportions.height,left:0}).top-i.margins.top),g&&(n.position.top=i._convertPositionTo("relative",{top:d,left:0}).top-i.margins.top),v&&(n.position.left=i._convertPositionTo("relative",{top:0,left:h-i.helperProportions.width}).left-i.margins.left),y&&(n.position.left=i._convertPositionTo("relative",{top:0,left:p}).left-i.margins.left)}var b=m||g||v||y;if("outer"!=r.snapMode){var m=Math.abs(f-l)<=o,g=Math.abs(d-u)<=o,v=Math.abs(h-s)<=o,y=Math.abs(p-a)<=o;m&&(n.position.top=i._convertPositionTo("relative",{top:f,left:0}).top-i.margins.top),g&&(n.position.top=i._convertPositionTo("relative",{top:d-i.helperProportions.height,left:0}).top-i.margins.top),v&&(n.position.left=i._convertPositionTo("relative",{top:0,left:h}).left-i.margins.left),y&&(n.position.left=i._convertPositionTo("relative",{top:0,left:p-i.helperProportions.width}).left-i.margins.left)}!i.snapElements[c].snapping&&(m||g||v||y||b)&&i.options.snap.snap&&i.options.snap.snap.call(i.element,e,t.extend(i._uiHash(),{snapItem:i.snapElements[c].item})),i.snapElements[c].snapping=m||g||v||y||b}else i.snapElements[c].snapping&&i.options.snap.release&&i.options.snap.release.call(i.element,e,t.extend(i._uiHash(),{snapItem:i.snapElements[c].item})),i.snapElements[c].snapping=!1}}}),t.ui.plugin.add("draggable","stack",{start:function(){var e=t(this).data("draggable").options,n=t.makeArray(t(e.stack)).sort(function(e,n){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(n).css("zIndex"),10)||0)});if(n.length){var i=parseInt(n[0].style.zIndex)||0;t(n).each(function(t){this.style.zIndex=i+t}),this[0].style.zIndex=i+n.length}}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,n){var i=t(n.helper),r=t(this).data("draggable").options;i.css("zIndex")&&(r._zIndex=i.css("zIndex")),i.css("zIndex",r.zIndex)},stop:function(e,n){var i=t(this).data("draggable").options;i._zIndex&&t(n.helper).css("zIndex",i._zIndex)}})}(jQuery),function(t){t.widget("ui.droppable",{version:"1.9.2",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var e=this.options,n=e.accept;this.isover=0,this.isout=1,this.accept=t.isFunction(n)?n:function(t){return t.is(n)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},t.ui.ddmanager.droppables[e.scope]=t.ui.ddmanager.droppables[e.scope]||[],t.ui.ddmanager.droppables[e.scope].push(this),e.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var e=t.ui.ddmanager.droppables[this.options.scope],n=0;n<e.length;n++)e[n]==this&&e.splice(n,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(e,n){"accept"==e&&(this.accept=t.isFunction(n)?n:function(t){return t.is(n)}),t.Widget.prototype._setOption.apply(this,arguments)},_activate:function(e){var n=t.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),n&&this._trigger("activate",e,this.ui(n))},_deactivate:function(e){var n=t.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),n&&this._trigger("deactivate",e,this.ui(n))},_over:function(e){var n=t.ui.ddmanager.current;n&&(n.currentItem||n.element)[0]!=this.element[0]&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",e,this.ui(n)))},_out:function(e){var n=t.ui.ddmanager.current;n&&(n.currentItem||n.element)[0]!=this.element[0]&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",e,this.ui(n)))},_drop:function(e,n){var i=n||t.ui.ddmanager.current;if(!i||(i.currentItem||i.element)[0]==this.element[0])return!1;var r=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var e=t.data(this,"droppable");return e.options.greedy&&!e.options.disabled&&e.options.scope==i.options.scope&&e.accept.call(e.element[0],i.currentItem||i.element)&&t.ui.intersect(i,t.extend(e,{offset:e.element.offset()}),e.options.tolerance)?(r=!0,!1):void 0}),r?!1:this.accept.call(this.element[0],i.currentItem||i.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",e,this.ui(i)),this.element):!1},ui:function(t){return{draggable:t.currentItem||t.element,helper:t.helper,position:t.position,offset:t.positionAbs}}}),t.ui.intersect=function(e,n,i){if(!n.offset)return!1;var r=(e.positionAbs||e.position.absolute).left,o=r+e.helperProportions.width,s=(e.positionAbs||e.position.absolute).top,a=s+e.helperProportions.height,l=n.offset.left,u=l+n.proportions.width,c=n.offset.top,h=c+n.proportions.height;switch(i){case"fit":return r>=l&&u>=o&&s>=c&&h>=a;case"intersect":return l<r+e.helperProportions.width/2&&o-e.helperProportions.width/2<u&&c<s+e.helperProportions.height/2&&a-e.helperProportions.height/2<h;case"pointer":var p=(e.positionAbs||e.position.absolute).left+(e.clickOffset||e.offset.click).left,f=(e.positionAbs||e.position.absolute).top+(e.clickOffset||e.offset.click).top,d=t.ui.isOver(f,p,c,l,n.proportions.height,n.proportions.width);return d;case"touch":return(s>=c&&h>=s||a>=c&&h>=a||c>s&&a>h)&&(r>=l&&u>=r||o>=l&&u>=o||l>r&&o>u);default:return!1}},t.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(e,n){var i=t.ui.ddmanager.droppables[e.options.scope]||[],r=n?n.type:null,o=(e.currentItem||e.element).find(":data(droppable)").andSelf();t:for(var s=0;s<i.length;s++)if(!(i[s].options.disabled||e&&!i[s].accept.call(i[s].element[0],e.currentItem||e.element))){for(var a=0;a<o.length;a++)if(o[a]==i[s].element[0]){i[s].proportions.height=0;continue t}i[s].visible="none"!=i[s].element.css("display"),i[s].visible&&("mousedown"==r&&i[s]._activate.call(i[s],n),i[s].offset=i[s].element.offset(),i[s].proportions={width:i[s].element[0].offsetWidth,height:i[s].element[0].offsetHeight})}},drop:function(e,n){var i=!1;return t.each(t.ui.ddmanager.droppables[e.options.scope]||[],function(){this.options&&(!this.options.disabled&&this.visible&&t.ui.intersect(e,this,this.options.tolerance)&&(i=this._drop.call(this,n)||i),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,n)))}),i},dragStart:function(e,n){e.element.parentsUntil("body").bind("scroll.droppable",function(){e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,n)})},drag:function(e,n){e.options.refreshPositions&&t.ui.ddmanager.prepareOffsets(e,n),t.each(t.ui.ddmanager.droppables[e.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var i=t.ui.intersect(e,this,this.options.tolerance),r=i||1!=this.isover?i&&0==this.isover?"isover":null:"isout";if(r){var o;if(this.options.greedy){var s=this.options.scope,a=this.element.parents(":data(droppable)").filter(function(){return t.data(this,"droppable").options.scope===s});a.length&&(o=t.data(a[0],"droppable"),o.greedyChild="isover"==r?1:0)}o&&"isover"==r&&(o.isover=0,o.isout=1,o._out.call(o,n)),this[r]=1,this["isout"==r?"isover":"isout"]=0,this["isover"==r?"_over":"_out"].call(this,n),o&&"isout"==r&&(o.isout=0,o.isover=1,o._over.call(o,n))}}})},dragStop:function(e,n){e.element.parentsUntil("body").unbind("scroll.droppable"),e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,n)}}}(jQuery),function(t){t.widget("ui.resizable",t.ui.mouse,{version:"1.9.2",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1e3},_create:function(){var e=this,n=this.options;if(this.element.addClass("ui-resizable"),t.extend(this,{_aspectRatio:!!n.aspectRatio,aspectRatio:n.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:n.helper||n.ghost||n.animate?n.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(t('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=n.handles||(t(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor==String){"all"==this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");var i=this.handles.split(",");this.handles={};for(var r=0;r<i.length;r++){var o=t.trim(i[r]),s="ui-resizable-"+o,a=t('<div class="ui-resizable-handle '+s+'"></div>');a.css({zIndex:n.zIndex}),"se"==o&&a.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[o]=".ui-resizable-"+o,this.element.append(a)}}this._renderAxis=function(e){e=e||this.element;for(var n in this.handles){if(this.handles[n].constructor==String&&(this.handles[n]=t(this.handles[n],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var i=t(this.handles[n],this.element),r=0;r=/sw|ne|nw|se|n|s/.test(n)?i.outerHeight():i.outerWidth();var o=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join("");e.css(o,r),this._proportionallyResize()}t(this.handles[n]).length}},this._renderAxis(this.element),this._handles=t(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!e.resizing){if(this.className)var t=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);e.axis=t&&t[1]?t[1]:"se"}}),n.autoHide&&(this._handles.hide(),t(this.element).addClass("ui-resizable-autohide").mouseenter(function(){n.disabled||(t(this).removeClass("ui-resizable-autohide"),e._handles.show())}).mouseleave(function(){n.disabled||e.resizing||(t(this).addClass("ui-resizable-autohide"),e._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var e=function(e){t(e).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){e(this.element);var n=this.element;this.originalElement.css({position:n.css("position"),width:n.outerWidth(),height:n.outerHeight(),top:n.css("top"),left:n.css("left")}).insertAfter(n),n.remove()}return this.originalElement.css("resize",this.originalResizeStyle),e(this.originalElement),this},_mouseCapture:function(e){var n=!1;for(var i in this.handles)t(this.handles[i])[0]==e.target&&(n=!0);return!this.options.disabled&&n},_mouseStart:function(n){var i=this.options,r=this.element.position(),o=this.element;this.resizing=!0,this.documentScroll={top:t(document).scrollTop(),left:t(document).scrollLeft()},(o.is(".ui-draggable")||/absolute/.test(o.css("position")))&&o.css({position:"absolute",top:r.top,left:r.left}),this._renderProxy();var s=e(this.helper.css("left")),a=e(this.helper.css("top"));i.containment&&(s+=t(i.containment).scrollLeft()||0,a+=t(i.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:s,top:a},this.size=this._helper?{width:o.outerWidth(),height:o.outerHeight()}:{width:o.width(),height:o.height()},this.originalSize=this._helper?{width:o.outerWidth(),height:o.outerHeight()}:{width:o.width(),height:o.height()},this.originalPosition={left:s,top:a},this.sizeDiff={width:o.outerWidth()-o.width(),height:o.outerHeight()-o.height()},this.originalMousePosition={left:n.pageX,top:n.pageY},this.aspectRatio="number"==typeof i.aspectRatio?i.aspectRatio:this.originalSize.width/this.originalSize.height||1;var l=t(".ui-resizable-"+this.axis).css("cursor");return t("body").css("cursor","auto"==l?this.axis+"-resize":l),o.addClass("ui-resizable-resizing"),this._propagate("start",n),!0},_mouseDrag:function(t){var e=this.helper,n=(this.options,this.originalMousePosition),i=this.axis,r=t.pageX-n.left||0,o=t.pageY-n.top||0,s=this._change[i];if(!s)return!1;var a=s.apply(this,[t,r,o]);return this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(a=this._updateRatio(a,t)),a=this._respectSize(a,t),this._propagate("resize",t),e.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(a),this._trigger("resize",t,this.ui()),!1},_mouseStop:function(e){this.resizing=!1;var n=this.options,i=this;if(this._helper){var r=this._proportionallyResizeElements,o=r.length&&/textarea/i.test(r[0].nodeName),s=o&&t.ui.hasScroll(r[0],"left")?0:i.sizeDiff.height,a=o?0:i.sizeDiff.width,l={width:i.helper.width()-a,height:i.helper.height()-s},u=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,c=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;n.animate||this.element.css(t.extend(l,{top:c,left:u})),i.helper.height(i.size.height),i.helper.width(i.size.width),this._helper&&!n.animate&&this._proportionallyResize()}return t("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(t){var e,i,r,o,s,a=this.options;s={minWidth:n(a.minWidth)?a.minWidth:0,maxWidth:n(a.maxWidth)?a.maxWidth:1/0,minHeight:n(a.minHeight)?a.minHeight:0,maxHeight:n(a.maxHeight)?a.maxHeight:1/0},(this._aspectRatio||t)&&(e=s.minHeight*this.aspectRatio,r=s.minWidth/this.aspectRatio,i=s.maxHeight*this.aspectRatio,o=s.maxWidth/this.aspectRatio,e>s.minWidth&&(s.minWidth=e),r>s.minHeight&&(s.minHeight=r),i<s.maxWidth&&(s.maxWidth=i),o<s.maxHeight&&(s.maxHeight=o)),this._vBoundaries=s},_updateCache:function(t){this.options,this.offset=this.helper.offset(),n(t.left)&&(this.position.left=t.left),n(t.top)&&(this.position.top=t.top),n(t.height)&&(this.size.height=t.height),n(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=(this.options,this.position),i=this.size,r=this.axis;return n(t.height)?t.width=t.height*this.aspectRatio:n(t.width)&&(t.height=t.width/this.aspectRatio),"sw"==r&&(t.left=e.left+(i.width-t.width),t.top=null),"nw"==r&&(t.top=e.top+(i.height-t.height),t.left=e.left+(i.width-t.width)),t},_respectSize:function(t,e){var i=(this.helper,this._vBoundaries),r=(this._aspectRatio||e.shiftKey,this.axis),o=n(t.width)&&i.maxWidth&&i.maxWidth<t.width,s=n(t.height)&&i.maxHeight&&i.maxHeight<t.height,a=n(t.width)&&i.minWidth&&i.minWidth>t.width,l=n(t.height)&&i.minHeight&&i.minHeight>t.height;a&&(t.width=i.minWidth),l&&(t.height=i.minHeight),o&&(t.width=i.maxWidth),s&&(t.height=i.maxHeight);var u=this.originalPosition.left+this.originalSize.width,c=this.position.top+this.size.height,h=/sw|nw|w/.test(r),p=/nw|ne|n/.test(r);a&&h&&(t.left=u-i.minWidth),o&&h&&(t.left=u-i.maxWidth),l&&p&&(t.top=c-i.minHeight),s&&p&&(t.top=c-i.maxHeight);var f=!t.width&&!t.height;return f&&!t.left&&t.top?t.top=null:f&&!t.top&&t.left&&(t.left=null),t},_proportionallyResize:function(){if(this.options,this._proportionallyResizeElements.length)for(var e=this.helper||this.element,n=0;n<this._proportionallyResizeElements.length;n++){var i=this._proportionallyResizeElements[n];if(!this.borderDif){var r=[i.css("borderTopWidth"),i.css("borderRightWidth"),i.css("borderBottomWidth"),i.css("borderLeftWidth")],o=[i.css("paddingTop"),i.css("paddingRight"),i.css("paddingBottom"),i.css("paddingLeft")];this.borderDif=t.map(r,function(t,e){var n=parseInt(t,10)||0,i=parseInt(o[e],10)||0;return n+i})}i.css({height:e.height()-this.borderDif[0]-this.borderDif[2]||0,width:e.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var e=this.element,n=this.options;if(this.elementOffset=e.offset(),this._helper){this.helper=this.helper||t('<div style="overflow:hidden;"></div>');var i=t.ui.ie6?1:0,r=t.ui.ie6?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+r,height:this.element.outerHeight()+r,position:"absolute",left:this.elementOffset.left-i+"px",top:this.elementOffset.top-i+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var n=(this.options,this.originalSize),i=this.originalPosition;return{left:i.left+e,width:n.width-e}},n:function(t,e,n){var i=(this.options,this.originalSize),r=this.originalPosition;return{top:r.top+n,height:i.height-n}},s:function(t,e,n){return{height:this.originalSize.height+n}},se:function(e,n,i){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,n,i]))},sw:function(e,n,i){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,n,i]))},ne:function(e,n,i){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,n,i]))},nw:function(e,n,i){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,n,i]))}},_propagate:function(e,n){t.ui.plugin.call(this,e,[n,this.ui()]),"resize"!=e&&this._trigger(e,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),t.ui.plugin.add("resizable","alsoResize",{start:function(){var e=t(this).data("resizable"),n=e.options,i=function(e){t(e).each(function(){var e=t(this);e.data("resizable-alsoresize",{width:parseInt(e.width(),10),height:parseInt(e.height(),10),left:parseInt(e.css("left"),10),top:parseInt(e.css("top"),10)})})};"object"!=typeof n.alsoResize||n.alsoResize.parentNode?i(n.alsoResize):n.alsoResize.length?(n.alsoResize=n.alsoResize[0],i(n.alsoResize)):t.each(n.alsoResize,function(t){i(t)})},resize:function(e,n){var i=t(this).data("resizable"),r=i.options,o=i.originalSize,s=i.originalPosition,a={height:i.size.height-o.height||0,width:i.size.width-o.width||0,top:i.position.top-s.top||0,left:i.position.left-s.left||0},l=function(e,i){t(e).each(function(){var e=t(this),r=t(this).data("resizable-alsoresize"),o={},s=i&&i.length?i:e.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(s,function(t,e){var n=(r[e]||0)+(a[e]||0);n&&n>=0&&(o[e]=n||null)}),e.css(o)})};"object"!=typeof r.alsoResize||r.alsoResize.nodeType?l(r.alsoResize):t.each(r.alsoResize,function(t,e){l(t,e)})},stop:function(){t(this).removeData("resizable-alsoresize")}}),t.ui.plugin.add("resizable","animate",{stop:function(e){var n=t(this).data("resizable"),i=n.options,r=n._proportionallyResizeElements,o=r.length&&/textarea/i.test(r[0].nodeName),s=o&&t.ui.hasScroll(r[0],"left")?0:n.sizeDiff.height,a=o?0:n.sizeDiff.width,l={width:n.size.width-a,height:n.size.height-s},u=parseInt(n.element.css("left"),10)+(n.position.left-n.originalPosition.left)||null,c=parseInt(n.element.css("top"),10)+(n.position.top-n.originalPosition.top)||null;n.element.animate(t.extend(l,c&&u?{top:c,left:u}:{}),{duration:i.animateDuration,easing:i.animateEasing,step:function(){var i={width:parseInt(n.element.css("width"),10),height:parseInt(n.element.css("height"),10),top:parseInt(n.element.css("top"),10),left:parseInt(n.element.css("left"),10)};r&&r.length&&t(r[0]).css({width:i.width,height:i.height}),n._updateCache(i),n._propagate("resize",e)}})}}),t.ui.plugin.add("resizable","containment",{start:function(){var n=t(this).data("resizable"),i=n.options,r=n.element,o=i.containment,s=o instanceof t?o.get(0):/parent/.test(o)?r.parent().get(0):o;if(s)if(n.containerElement=t(s),/document/.test(o)||o==document)n.containerOffset={left:0,top:0},n.containerPosition={left:0,top:0},n.parentData={element:t(document),left:0,top:0,width:t(document).width(),height:t(document).height()||document.body.parentNode.scrollHeight};else{var a=t(s),l=[];t(["Top","Right","Left","Bottom"]).each(function(t,n){l[t]=e(a.css("padding"+n))}),n.containerOffset=a.offset(),n.containerPosition=a.position(),n.containerSize={height:a.innerHeight()-l[3],width:a.innerWidth()-l[1]};var u=n.containerOffset,c=n.containerSize.height,h=n.containerSize.width,p=t.ui.hasScroll(s,"left")?s.scrollWidth:h,f=t.ui.hasScroll(s)?s.scrollHeight:c;n.parentData={element:s,left:u.left,top:u.top,width:p,height:f}}},resize:function(e){var n=t(this).data("resizable"),i=n.options,r=(n.containerSize,n.containerOffset),o=(n.size,n.position),s=n._aspectRatio||e.shiftKey,a={top:0,left:0},l=n.containerElement;l[0]!=document&&/static/.test(l.css("position"))&&(a=r),o.left<(n._helper?r.left:0)&&(n.size.width=n.size.width+(n._helper?n.position.left-r.left:n.position.left-a.left),s&&(n.size.height=n.size.width/n.aspectRatio),n.position.left=i.helper?r.left:0),o.top<(n._helper?r.top:0)&&(n.size.height=n.size.height+(n._helper?n.position.top-r.top:n.position.top),s&&(n.size.width=n.size.height*n.aspectRatio),n.position.top=n._helper?r.top:0),n.offset.left=n.parentData.left+n.position.left,n.offset.top=n.parentData.top+n.position.top;var u=Math.abs((n._helper?n.offset.left-a.left:n.offset.left-a.left)+n.sizeDiff.width),c=Math.abs((n._helper?n.offset.top-a.top:n.offset.top-r.top)+n.sizeDiff.height),h=n.containerElement.get(0)==n.element.parent().get(0),p=/relative|absolute/.test(n.containerElement.css("position"));h&&p&&(u-=n.parentData.left),u+n.size.width>=n.parentData.width&&(n.size.width=n.parentData.width-u,s&&(n.size.height=n.size.width/n.aspectRatio)),c+n.size.height>=n.parentData.height&&(n.size.height=n.parentData.height-c,s&&(n.size.width=n.size.height*n.aspectRatio))},stop:function(){var e=t(this).data("resizable"),n=e.options,i=(e.position,e.containerOffset),r=e.containerPosition,o=e.containerElement,s=t(e.helper),a=s.offset(),l=s.outerWidth()-e.sizeDiff.width,u=s.outerHeight()-e.sizeDiff.height;e._helper&&!n.animate&&/relative/.test(o.css("position"))&&t(this).css({left:a.left-r.left-i.left,width:l,height:u}),e._helper&&!n.animate&&/static/.test(o.css("position"))&&t(this).css({left:a.left-r.left-i.left,width:l,height:u})}}),t.ui.plugin.add("resizable","ghost",{start:function(){var e=t(this).data("resizable"),n=e.options,i=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:.25,display:"block",position:"relative",height:i.height,width:i.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof n.ghost?n.ghost:""),e.ghost.appendTo(e.helper)},resize:function(){var e=t(this).data("resizable");e.options,e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){var e=t(this).data("resizable");e.options,e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),t.ui.plugin.add("resizable","grid",{resize:function(e){var n=t(this).data("resizable"),i=n.options,r=n.size,o=n.originalSize,s=n.originalPosition,a=n.axis;i._aspectRatio||e.shiftKey,i.grid="number"==typeof i.grid?[i.grid,i.grid]:i.grid;var l=Math.round((r.width-o.width)/(i.grid[0]||1))*(i.grid[0]||1),u=Math.round((r.height-o.height)/(i.grid[1]||1))*(i.grid[1]||1);/^(se|s|e)$/.test(a)?(n.size.width=o.width+l,n.size.height=o.height+u):/^(ne)$/.test(a)?(n.size.width=o.width+l,n.size.height=o.height+u,n.position.top=s.top-u):/^(sw)$/.test(a)?(n.size.width=o.width+l,n.size.height=o.height+u,n.position.left=s.left-l):(n.size.width=o.width+l,n.size.height=o.height+u,n.position.top=s.top-u,n.position.left=s.left-l)}});var e=function(t){return parseInt(t,10)||0},n=function(t){return!isNaN(parseInt(t,10))}}(jQuery),function(t){t.widget("ui.selectable",t.ui.mouse,{version:"1.9.2",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var e=this;this.element.addClass("ui-selectable"),this.dragged=!1;var n;this.refresh=function(){n=t(e.options.filter,e.element[0]),n.addClass("ui-selectee"),n.each(function(){var e=t(this),n=e.offset();t.data(this,"selectable-item",{element:this,$element:e,left:n.left,top:n.top,right:n.left+e.outerWidth(),bottom:n.top+e.outerHeight(),startselected:!1,selected:e.hasClass("ui-selected"),selecting:e.hasClass("ui-selecting"),unselecting:e.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=n.addClass("ui-selectee"),this._mouseInit(),this.helper=t("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(e){var n=this;if(this.opos=[e.pageX,e.pageY],!this.options.disabled){var i=this.options;this.selectees=t(i.filter,this.element[0]),this._trigger("start",e),t(i.appendTo).append(this.helper),this.helper.css({left:e.clientX,top:e.clientY,width:0,height:0}),i.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var i=t.data(this,"selectable-item");i.startselected=!0,e.metaKey||e.ctrlKey||(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,n._trigger("unselecting",e,{unselecting:i.element}))}),t(e.target).parents().andSelf().each(function(){var i=t.data(this,"selectable-item");if(i){var r=!e.metaKey&&!e.ctrlKey||!i.$element.hasClass("ui-selected");return i.$element.removeClass(r?"ui-unselecting":"ui-selected").addClass(r?"ui-selecting":"ui-unselecting"),i.unselecting=!r,i.selecting=r,i.selected=r,r?n._trigger("selecting",e,{selecting:i.element}):n._trigger("unselecting",e,{unselecting:i.element}),!1}})}},_mouseDrag:function(e){var n=this;if(this.dragged=!0,!this.options.disabled){var i=this.options,r=this.opos[0],o=this.opos[1],s=e.pageX,a=e.pageY;if(r>s){var l=s;s=r,r=l}if(o>a){var l=a;a=o,o=l}return this.helper.css({left:r,top:o,width:s-r,height:a-o}),this.selectees.each(function(){var l=t.data(this,"selectable-item");if(l&&l.element!=n.element[0]){var u=!1;"touch"==i.tolerance?u=!(l.left>s||l.right<r||l.top>a||l.bottom<o):"fit"==i.tolerance&&(u=l.left>r&&l.right<s&&l.top>o&&l.bottom<a),u?(l.selected&&(l.$element.removeClass("ui-selected"),l.selected=!1),l.unselecting&&(l.$element.removeClass("ui-unselecting"),l.unselecting=!1),l.selecting||(l.$element.addClass("ui-selecting"),l.selecting=!0,n._trigger("selecting",e,{selecting:l.element}))):(l.selecting&&((e.metaKey||e.ctrlKey)&&l.startselected?(l.$element.removeClass("ui-selecting"),l.selecting=!1,l.$element.addClass("ui-selected"),l.selected=!0):(l.$element.removeClass("ui-selecting"),l.selecting=!1,l.startselected&&(l.$element.addClass("ui-unselecting"),l.unselecting=!0),n._trigger("unselecting",e,{unselecting:l.element}))),l.selected&&(e.metaKey||e.ctrlKey||l.startselected||(l.$element.removeClass("ui-selected"),l.selected=!1,l.$element.addClass("ui-unselecting"),l.unselecting=!0,n._trigger("unselecting",e,{unselecting:l.element}))))}}),!1}},_mouseStop:function(e){var n=this;return this.dragged=!1,this.options,t(".ui-unselecting",this.element[0]).each(function(){var i=t.data(this,"selectable-item");i.$element.removeClass("ui-unselecting"),i.unselecting=!1,i.startselected=!1,n._trigger("unselected",e,{unselected:i.element})}),t(".ui-selecting",this.element[0]).each(function(){var i=t.data(this,"selectable-item");i.$element.removeClass("ui-selecting").addClass("ui-selected"),i.selecting=!1,i.selected=!0,i.startselected=!0,n._trigger("selected",e,{selected:i.element})}),this._trigger("stop",e),this.helper.remove(),!1}})}(jQuery),function(t){t.widget("ui.sortable",t.ui.mouse,{version:"1.9.2",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3},_create:function(){var t=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===t.axis||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_setOption:function(e,n){"disabled"===e?(this.options[e]=n,this.widget().toggleClass("ui-sortable-disabled",!!n)):t.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(e,n){var i=this;
if(this.reverting)return!1;if(this.options.disabled||"static"==this.options.type)return!1;this._refreshItems(e);var r=null;if(t(e.target).parents().each(function(){return t.data(this,i.widgetName+"-item")==i?(r=t(this),!1):void 0}),t.data(e.target,i.widgetName+"-item")==i&&(r=t(e.target)),!r)return!1;if(this.options.handle&&!n){var o=!1;if(t(this.options.handle,r).find("*").andSelf().each(function(){this==e.target&&(o=!0)}),!o)return!1}return this.currentItem=r,this._removeCurrentsFromItems(),!0},_mouseStart:function(e,n,i){var r=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,r.cursorAt&&this._adjustOffsetFromHelper(r.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),r.containment&&this._setContainment(),r.cursor&&(t("body").css("cursor")&&(this._storedCursor=t("body").css("cursor")),t("body").css("cursor",r.cursor)),r.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",r.opacity)),r.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",r.zIndex)),this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!i)for(var o=this.containers.length-1;o>=0;o--)this.containers[o]._trigger("activate",e,this._uiHash(this));return t.ui.ddmanager&&(t.ui.ddmanager.current=this),t.ui.ddmanager&&!r.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(e),!0},_mouseDrag:function(e){if(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll){var n=this.options,i=!1;this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<n.scrollSensitivity?this.scrollParent[0].scrollTop=i=this.scrollParent[0].scrollTop+n.scrollSpeed:e.pageY-this.overflowOffset.top<n.scrollSensitivity&&(this.scrollParent[0].scrollTop=i=this.scrollParent[0].scrollTop-n.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<n.scrollSensitivity?this.scrollParent[0].scrollLeft=i=this.scrollParent[0].scrollLeft+n.scrollSpeed:e.pageX-this.overflowOffset.left<n.scrollSensitivity&&(this.scrollParent[0].scrollLeft=i=this.scrollParent[0].scrollLeft-n.scrollSpeed)):(e.pageY-t(document).scrollTop()<n.scrollSensitivity?i=t(document).scrollTop(t(document).scrollTop()-n.scrollSpeed):t(window).height()-(e.pageY-t(document).scrollTop())<n.scrollSensitivity&&(i=t(document).scrollTop(t(document).scrollTop()+n.scrollSpeed)),e.pageX-t(document).scrollLeft()<n.scrollSensitivity?i=t(document).scrollLeft(t(document).scrollLeft()-n.scrollSpeed):t(window).width()-(e.pageX-t(document).scrollLeft())<n.scrollSensitivity&&(i=t(document).scrollLeft(t(document).scrollLeft()+n.scrollSpeed))),i!==!1&&t.ui.ddmanager&&!n.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e)}this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px");for(var r=this.items.length-1;r>=0;r--){var o=this.items[r],s=o.item[0],a=this._intersectsWithPointer(o);if(a&&o.instance===this.currentContainer&&s!=this.currentItem[0]&&this.placeholder[1==a?"next":"prev"]()[0]!=s&&!t.contains(this.placeholder[0],s)&&("semi-dynamic"==this.options.type?!t.contains(this.element[0],s):!0)){if(this.direction=1==a?"down":"up","pointer"!=this.options.tolerance&&!this._intersectsWithSides(o))break;this._rearrange(e,o),this._trigger("change",e,this._uiHash());break}}return this._contactContainers(e),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,n){if(e){if(t.ui.ddmanager&&!this.options.dropBehaviour&&t.ui.ddmanager.drop(this,e),this.options.revert){var i=this,r=this.placeholder.offset();this.reverting=!0,t(this.helper).animate({left:r.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:r.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){i._clear(e)})}else this._clear(e,n);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"==this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("deactivate",null,this._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,this._uiHash(this)),this.containers[e].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!=this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),t.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?t(this.domPosition.prev).after(this.currentItem):t(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var n=this._getItemsAsjQuery(e&&e.connected),i=[];return e=e||{},t(n).each(function(){var n=(t(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[-=_](.+)/);n&&i.push((e.key||n[1]+"[]")+"="+(e.key&&e.expression?n[1]:n[2]))}),!i.length&&e.key&&i.push(e.key+"="),i.join("&")},toArray:function(e){var n=this._getItemsAsjQuery(e&&e.connected),i=[];return e=e||{},n.each(function(){i.push(t(e.item||this).attr(e.attribute||"id")||"")}),i},_intersectsWith:function(t){var e=this.positionAbs.left,n=e+this.helperProportions.width,i=this.positionAbs.top,r=i+this.helperProportions.height,o=t.left,s=o+t.width,a=t.top,l=a+t.height,u=this.offset.click.top,c=this.offset.click.left,h=i+u>a&&l>i+u&&e+c>o&&s>e+c;return"pointer"==this.options.tolerance||this.options.forcePointerForContainers||"pointer"!=this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?h:o<e+this.helperProportions.width/2&&n-this.helperProportions.width/2<s&&a<i+this.helperProportions.height/2&&r-this.helperProportions.height/2<l},_intersectsWithPointer:function(e){var n="x"===this.options.axis||t.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),i="y"===this.options.axis||t.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width),r=n&&i,o=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return r?this.floating?s&&"right"==s||"down"==o?2:1:o&&("down"==o?2:1):!1},_intersectsWithSides:function(e){var n=t.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),i=t.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),r=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return this.floating&&o?"right"==o&&i||"left"==o&&!i:r&&("down"==r&&n||"up"==r&&!n)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!=t&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!=t&&(t>0?"right":"left")},refresh:function(t){return this._refreshItems(t),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor==String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(e){var n=[],i=[],r=this._connectWith();if(r&&e)for(var o=r.length-1;o>=0;o--)for(var s=t(r[o]),a=s.length-1;a>=0;a--){var l=t.data(s[a],this.widgetName);l&&l!=this&&!l.options.disabled&&i.push([t.isFunction(l.options.items)?l.options.items.call(l.element):t(l.options.items,l.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),l])}i.push([t.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):t(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var o=i.length-1;o>=0;o--)i[o][0].each(function(){n.push(this)});return t(n)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=t.grep(this.items,function(t){for(var n=0;n<e.length;n++)if(e[n]==t.item[0])return!1;return!0})},_refreshItems:function(e){this.items=[],this.containers=[this];var n=this.items,i=[[t.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):t(this.options.items,this.element),this]],r=this._connectWith();if(r&&this.ready)for(var o=r.length-1;o>=0;o--)for(var s=t(r[o]),a=s.length-1;a>=0;a--){var l=t.data(s[a],this.widgetName);l&&l!=this&&!l.options.disabled&&(i.push([t.isFunction(l.options.items)?l.options.items.call(l.element[0],e,{item:this.currentItem}):t(l.options.items,l.element),l]),this.containers.push(l))}for(var o=i.length-1;o>=0;o--)for(var u=i[o][1],c=i[o][0],a=0,h=c.length;h>a;a++){var p=t(c[a]);p.data(this.widgetName+"-item",u),n.push({item:p,instance:u,width:0,height:0,left:0,top:0})}},refreshPositions:function(e){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var n=this.items.length-1;n>=0;n--){var i=this.items[n];if(i.instance==this.currentContainer||!this.currentContainer||i.item[0]==this.currentItem[0]){var r=this.options.toleranceElement?t(this.options.toleranceElement,i.item):i.item;e||(i.width=r.outerWidth(),i.height=r.outerHeight());var o=r.offset();i.left=o.left,i.top=o.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(var n=this.containers.length-1;n>=0;n--){var o=this.containers[n].element.offset();this.containers[n].containerCache.left=o.left,this.containers[n].containerCache.top=o.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight()}return this},_createPlaceholder:function(e){e=e||this;var n=e.options;if(!n.placeholder||n.placeholder.constructor==String){var i=n.placeholder;n.placeholder={element:function(){var n=t(document.createElement(e.currentItem[0].nodeName)).addClass(i||e.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return i||(n.style.visibility="hidden"),n},update:function(t,r){(!i||n.forcePlaceholderSize)&&(r.height()||r.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),r.width()||r.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10)))}}}e.placeholder=t(n.placeholder.element.call(e.element,e.currentItem)),e.currentItem.after(e.placeholder),n.placeholder.update(e,e.placeholder)},_contactContainers:function(e){for(var n=null,i=null,r=this.containers.length-1;r>=0;r--)if(!t.contains(this.currentItem[0],this.containers[r].element[0]))if(this._intersectsWith(this.containers[r].containerCache)){if(n&&t.contains(this.containers[r].element[0],n.element[0]))continue;n=this.containers[r],i=r}else this.containers[r].containerCache.over&&(this.containers[r]._trigger("out",e,this._uiHash(this)),this.containers[r].containerCache.over=0);if(n)if(1===this.containers.length)this.containers[i]._trigger("over",e,this._uiHash(this)),this.containers[i].containerCache.over=1;else{for(var o=1e4,s=null,a=this.containers[i].floating?"left":"top",l=this.containers[i].floating?"width":"height",u=this.positionAbs[a]+this.offset.click[a],c=this.items.length-1;c>=0;c--)if(t.contains(this.containers[i].element[0],this.items[c].item[0])&&this.items[c].item[0]!=this.currentItem[0]){var h=this.items[c].item.offset()[a],p=!1;Math.abs(h-u)>Math.abs(h+this.items[c][l]-u)&&(p=!0,h+=this.items[c][l]),Math.abs(h-u)<o&&(o=Math.abs(h-u),s=this.items[c],this.direction=p?"up":"down")}if(!s&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[i],s?this._rearrange(e,s,null,!0):this._rearrange(e,null,this.containers[i].element,!0),this._trigger("change",e,this._uiHash()),this.containers[i]._trigger("change",e,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[i]._trigger("over",e,this._uiHash(this)),this.containers[i].containerCache.over=1}},_createHelper:function(e){var n=this.options,i=t.isFunction(n.helper)?t(n.helper.apply(this.element[0],[e,this.currentItem])):"clone"==n.helper?this.currentItem.clone():this.currentItem;return i.parents("body").length||t("parent"!=n.appendTo?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(i[0]),i[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(""==i[0].style.width||n.forceHelperSize)&&i.width(this.currentItem.width()),(""==i[0].style.height||n.forceHelperSize)&&i.height(this.currentItem.height()),i},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e=this.options;if("parent"==e.containment&&(e.containment=this.helper[0].parentNode),("document"==e.containment||"window"==e.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,t("document"==e.containment?document:window).width()-this.helperProportions.width-this.margins.left,(t("document"==e.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),!/^(document|window|parent)$/.test(e.containment)){var n=t(e.containment)[0],i=t(e.containment).offset(),r="hidden"!=t(n).css("overflow");this.containment=[i.left+(parseInt(t(n).css("borderLeftWidth"),10)||0)+(parseInt(t(n).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(t(n).css("borderTopWidth"),10)||0)+(parseInt(t(n).css("paddingTop"),10)||0)-this.margins.top,i.left+(r?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(t(n).css("borderLeftWidth"),10)||0)-(parseInt(t(n).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(r?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(t(n).css("borderTopWidth"),10)||0)-(parseInt(t(n).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(e,n){n||(n=this.position);var i="absolute"==e?1:-1,r=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),o=/(html|body)/i.test(r[0].tagName);return{top:n.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"==this.cssPosition?-this.scrollParent.scrollTop():o?0:r.scrollTop())*i,left:n.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():o?0:r.scrollLeft())*i}},_generatePosition:function(e){var n=this.options,i="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,r=/(html|body)/i.test(i[0].tagName);"relative"!=this.cssPosition||this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset());var o=e.pageX,s=e.pageY;if(this.originalPosition&&(this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(o=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(s=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(o=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(s=this.containment[3]+this.offset.click.top)),n.grid)){var a=this.originalPageY+Math.round((s-this.originalPageY)/n.grid[1])*n.grid[1];s=this.containment?a-this.offset.click.top<this.containment[1]||a-this.offset.click.top>this.containment[3]?a-this.offset.click.top<this.containment[1]?a+n.grid[1]:a-n.grid[1]:a:a;var l=this.originalPageX+Math.round((o-this.originalPageX)/n.grid[0])*n.grid[0];o=this.containment?l-this.offset.click.left<this.containment[0]||l-this.offset.click.left>this.containment[2]?l-this.offset.click.left<this.containment[0]?l+n.grid[0]:l-n.grid[0]:l:l}return{top:s-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"==this.cssPosition?-this.scrollParent.scrollTop():r?0:i.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():r?0:i.scrollLeft())}},_rearrange:function(t,e,n,i){n?n[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"==this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var r=this.counter;this._delay(function(){r==this.counter&&this.refreshPositions(!i)})},_clear:function(e,n){this.reverting=!1;var i=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]==this.currentItem[0]){for(var r in this._storedCSS)("auto"==this._storedCSS[r]||"static"==this._storedCSS[r])&&(this._storedCSS[r]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!n&&i.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev==this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent==this.currentItem.parent()[0]||n||i.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(n||(i.push(function(t){this._trigger("remove",t,this._uiHash())}),i.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),i.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer))));for(var r=this.containers.length-1;r>=0;r--)n||i.push(function(t){return function(e){t._trigger("deactivate",e,this._uiHash(this))}}.call(this,this.containers[r])),this.containers[r].containerCache.over&&(i.push(function(t){return function(e){t._trigger("out",e,this._uiHash(this))}}.call(this,this.containers[r])),this.containers[r].containerCache.over=0);if(this._storedCursor&&t("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"==this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!n){this._trigger("beforeStop",e,this._uiHash());for(var r=0;r<i.length;r++)i[r].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!1}if(n||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null,!n){for(var r=0;r<i.length;r++)i[r].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){t.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(e){var n=e||this;return{helper:n.helper,placeholder:n.placeholder||t([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:e?e.element:null}}})}(jQuery),function(t){var e=0;t.widget("ui.autocomplete",{version:"1.9.2",defaultElement:"<input>",options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var e,n,i;this.isMultiLine=this._isMultiLine(),this.valueMethod=this.element[this.element.is("input,textarea")?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(r){if(this.element.prop("readOnly"))return e=!0,i=!0,n=!0,void 0;e=!1,i=!1,n=!1;var o=t.ui.keyCode;switch(r.keyCode){case o.PAGE_UP:e=!0,this._move("previousPage",r);break;case o.PAGE_DOWN:e=!0,this._move("nextPage",r);break;case o.UP:e=!0,this._keyEvent("previous",r);break;case o.DOWN:e=!0,this._keyEvent("next",r);break;case o.ENTER:case o.NUMPAD_ENTER:this.menu.active&&(e=!0,r.preventDefault(),this.menu.select(r));break;case o.TAB:this.menu.active&&this.menu.select(r);break;case o.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(r),r.preventDefault());break;default:n=!0,this._searchTimeout(r)}},keypress:function(i){if(e)return e=!1,i.preventDefault(),void 0;if(!n){var r=t.ui.keyCode;switch(i.keyCode){case r.PAGE_UP:this._move("previousPage",i);break;case r.PAGE_DOWN:this._move("nextPage",i);break;case r.UP:this._keyEvent("previous",i);break;case r.DOWN:this._keyEvent("next",i)}}},input:function(t){return i?(i=!1,t.preventDefault(),void 0):(this._searchTimeout(t),void 0)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(t){return this.cancelBlur?(delete this.cancelBlur,void 0):(clearTimeout(this.searching),this.close(t),this._change(t),void 0)}}),this._initSource(),this.menu=t("<ul>").addClass("ui-autocomplete").appendTo(this.document.find(this.options.appendTo||"body")[0]).menu({input:t(),role:null}).zIndex(this.element.zIndex()+1).hide().data("menu"),this._on(this.menu.element,{mousedown:function(e){e.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var n=this.menu.element[0];t(e.target).closest(".ui-menu-item").length||this._delay(function(){var e=this;this.document.one("mousedown",function(i){i.target===e.element[0]||i.target===n||t.contains(n,i.target)||e.close()})})},menufocus:function(e,n){if(this.isNewMenu&&(this.isNewMenu=!1,e.originalEvent&&/^mouse/.test(e.originalEvent.type)))return this.menu.blur(),this.document.one("mousemove",function(){t(e.target).trigger(e.originalEvent)}),void 0;var i=n.item.data("ui-autocomplete-item")||n.item.data("item.autocomplete");!1!==this._trigger("focus",e,{item:i})?e.originalEvent&&/^key/.test(e.originalEvent.type)&&this._value(i.value):this.liveRegion.text(i.value)},menuselect:function(t,e){var n=e.item.data("ui-autocomplete-item")||e.item.data("item.autocomplete"),i=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=i,this._delay(function(){this.previous=i,this.selectedItem=n})),!1!==this._trigger("select",t,{item:n})&&this._value(n.value),this.term=this._value(),this.close(t),this.selectedItem=n}}),this.liveRegion=t("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertAfter(this.element),t.fn.bgiframe&&this.menu.element.bgiframe(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(t,e){this._super(t,e),"source"===t&&this._initSource(),"appendTo"===t&&this.menu.element.appendTo(this.document.find(e||"body")[0]),"disabled"===t&&e&&this.xhr&&this.xhr.abort()},_isMultiLine:function(){return this.element.is("textarea")?!0:this.element.is("input")?!1:this.element.prop("isContentEditable")},_initSource:function(){var e,n,i=this;t.isArray(this.options.source)?(e=this.options.source,this.source=function(n,i){i(t.ui.autocomplete.filter(e,n.term))}):"string"==typeof this.options.source?(n=this.options.source,this.source=function(e,r){i.xhr&&i.xhr.abort(),i.xhr=t.ajax({url:n,data:e,dataType:"json",success:function(t){r(t)},error:function(){r([])}})}):this.source=this.options.source},_searchTimeout:function(t){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,t))},this.options.delay)},search:function(t,e){return t=null!=t?t:this._value(),this.term=this._value(),t.length<this.options.minLength?this.close(e):this._trigger("search",e)!==!1?this._search(t):void 0},_search:function(t){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:t},this._response())},_response:function(){var t=this,n=++e;return function(i){n===e&&t.__response(i),t.pending--,t.pending||t.element.removeClass("ui-autocomplete-loading")}},__response:function(t){t&&(t=this._normalize(t)),this._trigger("response",null,{content:t}),!this.options.disabled&&t&&t.length&&!this.cancelSearch?(this._suggest(t),this._trigger("open")):this._close()},close:function(t){this.cancelSearch=!0,this._close(t)},_close:function(t){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",t))},_change:function(t){this.previous!==this._value()&&this._trigger("change",t,{item:this.selectedItem})},_normalize:function(e){return e.length&&e[0].label&&e[0].value?e:t.map(e,function(e){return"string"==typeof e?{label:e,value:e}:t.extend({label:e.label||e.value,value:e.value||e.label},e)})},_suggest:function(e){var n=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(n,e),this.menu.refresh(),n.show(),this._resizeMenu(),n.position(t.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var t=this.menu.element;t.outerWidth(Math.max(t.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(e,n){var i=this;t.each(n,function(t,n){i._renderItemData(e,n)})},_renderItemData:function(t,e){return this._renderItem(t,e).data("ui-autocomplete-item",e)},_renderItem:function(e,n){return t("<li>").append(t("<a>").text(n.label)).appendTo(e)},_move:function(t,e){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(t)||this.menu.isLastItem()&&/^next/.test(t)?(this._value(this.term),this.menu.blur(),void 0):(this.menu[t](e),void 0):(this.search(null,e),void 0)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(t,e){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(t,e),e.preventDefault())}}),t.extend(t.ui.autocomplete,{escapeRegex:function(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(e,n){var i=new RegExp(t.ui.autocomplete.escapeRegex(n),"i");return t.grep(e,function(t){return i.test(t.label||t.value||t)})}}),t.widget("ui.autocomplete",t.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(t){return t+(t>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var e;this._superApply(arguments),this.options.disabled||this.cancelSearch||(e=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,this.liveRegion.text(e))}})}(jQuery),function(t){var e=!1;t.widget("ui.menu",{version:"1.9.2",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,t.proxy(function(t){this.options.disabled&&t.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(t){t.preventDefault()},"click .ui-state-disabled > a":function(t){t.preventDefault()},"click .ui-menu-item:has(a)":function(n){var i=t(n.target).closest(".ui-menu-item");!e&&i.not(".ui-state-disabled").length&&(e=!0,this.select(n),i.has(".ui-menu").length?this.expand(n):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(e){var n=t(e.currentTarget);n.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(e,n)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(t,e){var n=this.active||this.element.children(".ui-menu-item").eq(0);e||this.focus(t,n)},blur:function(e){this._delay(function(){t.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(e)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(n){t(n.target).closest(".ui-menu").length||this.collapseAll(n),e=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").andSelf().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var e=t(this);e.data("ui-menu-submenu-carat")&&e.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(e){function n(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var i,r,o,s,a,l=!0;switch(e.keyCode){case t.ui.keyCode.PAGE_UP:this.previousPage(e);break;case t.ui.keyCode.PAGE_DOWN:this.nextPage(e);break;case t.ui.keyCode.HOME:this._move("first","first",e);break;case t.ui.keyCode.END:this._move("last","last",e);break;case t.ui.keyCode.UP:this.previous(e);break;case t.ui.keyCode.DOWN:this.next(e);break;case t.ui.keyCode.LEFT:this.collapse(e);break;case t.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(e);
break;case t.ui.keyCode.ENTER:case t.ui.keyCode.SPACE:this._activate(e);break;case t.ui.keyCode.ESCAPE:this.collapse(e);break;default:l=!1,r=this.previousFilter||"",o=String.fromCharCode(e.keyCode),s=!1,clearTimeout(this.filterTimer),o===r?s=!0:o=r+o,a=new RegExp("^"+n(o),"i"),i=this.activeMenu.children(".ui-menu-item").filter(function(){return a.test(t(this).children("a").text())}),i=s&&-1!==i.index(this.active.next())?this.active.nextAll(".ui-menu-item"):i,i.length||(o=String.fromCharCode(e.keyCode),a=new RegExp("^"+n(o),"i"),i=this.activeMenu.children(".ui-menu-item").filter(function(){return a.test(t(this).children("a").text())})),i.length?(this.focus(e,i),i.length>1?(this.previousFilter=o,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}l&&e.preventDefault()},_activate:function(t){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(t):this.select(t))},refresh:function(){var e,n=this.options.icons.submenu,i=this.element.find(this.options.menus);i.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var e=t(this),i=e.prev("a"),r=t("<span>").addClass("ui-menu-icon ui-icon "+n).data("ui-menu-submenu-carat",!0);i.attr("aria-haspopup","true").prepend(r),e.attr("aria-labelledby",i.attr("id"))}),e=i.add(this.element),e.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),e.children(":not(.ui-menu-item)").each(function(){var e=t(this);/[^\-—–\s]/.test(e.text())||e.addClass("ui-widget-content ui-menu-divider")}),e.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!t.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},focus:function(t,e){var n,i;this.blur(t,t&&"focus"===t.type),this._scrollIntoView(e),this.active=e.first(),i=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",i.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),t&&"keydown"===t.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),n=e.children(".ui-menu"),n.length&&/^mouse/.test(t.type)&&this._startOpening(n),this.activeMenu=e.parent(),this._trigger("focus",t,{item:e})},_scrollIntoView:function(e){var n,i,r,o,s,a;this._hasScroll()&&(n=parseFloat(t.css(this.activeMenu[0],"borderTopWidth"))||0,i=parseFloat(t.css(this.activeMenu[0],"paddingTop"))||0,r=e.offset().top-this.activeMenu.offset().top-n-i,o=this.activeMenu.scrollTop(),s=this.activeMenu.height(),a=e.height(),0>r?this.activeMenu.scrollTop(o+r):r+a>s&&this.activeMenu.scrollTop(o+r-s+a))},blur:function(t,e){e||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",t,{item:this.active}))},_startOpening:function(t){clearTimeout(this.timer),"true"===t.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(t)},this.delay))},_open:function(e){var n=t.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(e.parents(".ui-menu")).hide().attr("aria-hidden","true"),e.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(n)},collapseAll:function(e,n){clearTimeout(this.timer),this.timer=this._delay(function(){var i=n?this.element:t(e&&e.target).closest(this.element.find(".ui-menu"));i.length||(i=this.element),this._close(i),this.blur(e),this.activeMenu=i},this.delay)},_close:function(t){t||(t=this.active?this.active.parent():this.element),t.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(t){var e=this.active&&this.active.parent().closest(".ui-menu-item",this.element);e&&e.length&&(this._close(),this.focus(t,e))},expand:function(t){var e=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();e&&e.length&&(this._open(e.parent()),this._delay(function(){this.focus(t,e)}))},next:function(t){this._move("next","first",t)},previous:function(t){this._move("prev","last",t)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(t,e,n){var i;this.active&&(i="first"===t||"last"===t?this.active["first"===t?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[t+"All"](".ui-menu-item").eq(0)),i&&i.length&&this.active||(i=this.activeMenu.children(".ui-menu-item")[e]()),this.focus(n,i)},nextPage:function(e){var n,i,r;return this.active?(this.isLastItem()||(this._hasScroll()?(i=this.active.offset().top,r=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return n=t(this),n.offset().top-i-r<0}),this.focus(e,n)):this.focus(e,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())),void 0):(this.next(e),void 0)},previousPage:function(e){var n,i,r;return this.active?(this.isFirstItem()||(this._hasScroll()?(i=this.active.offset().top,r=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return n=t(this),n.offset().top-i+r>0}),this.focus(e,n)):this.focus(e,this.activeMenu.children(".ui-menu-item").first())),void 0):(this.next(e),void 0)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(e){this.active=this.active||t(e.target).closest(".ui-menu-item");var n={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(e,!0),this._trigger("select",e,n)}})}(jQuery),jQuery.effects||function(t,e){var n=t.uiBackCompat!==!1,i="ui-effects-";t.effects={effect:{}},/*!
 * jQuery Color Animations v2.0.0
 * http://jquery.com/
 *
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * Date: Mon Aug 13 13:41:02 2012 -0500
 */
function(e,n){function i(t,e,n){var i=p[e.type]||{};return null==t?n||!e.def?null:e.def:(t=i.floor?~~t:parseFloat(t),isNaN(t)?e.def:i.mod?(t+i.mod)%i.mod:0>t?0:i.max<t?i.max:t)}function r(t){var n=c(),i=n._rgba=[];return t=t.toLowerCase(),m(u,function(e,r){var o,s=r.re.exec(t),a=s&&r.parse(s),l=r.space||"rgba";return a?(o=n[l](a),n[h[l].cache]=o[h[l].cache],i=n._rgba=o._rgba,!1):void 0}),i.length?("0,0,0,0"===i.join()&&e.extend(i,s.transparent),n):s[t]}function o(t,e,n){return n=(n+1)%1,1>6*n?t+6*(e-t)*n:1>2*n?e:2>3*n?t+6*(e-t)*(2/3-n):t}var s,a="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor".split(" "),l=/^([\-+])=\s*(\d+\.?\d*)/,u=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(t){return[t[1],t[2]/100,t[3]/100,t[4]]}}],c=e.Color=function(t,n,i,r){return new e.Color.fn.parse(t,n,i,r)},h={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},p={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},f=c.support={},d=e("<p>")[0],m=e.each;d.style.cssText="background-color:rgba(1,1,1,.5)",f.rgba=d.style.backgroundColor.indexOf("rgba")>-1,m(h,function(t,e){e.cache="_"+t,e.props.alpha={idx:3,type:"percent",def:1}}),c.fn=e.extend(c.prototype,{parse:function(o,a,l,u){if(o===n)return this._rgba=[null,null,null,null],this;(o.jquery||o.nodeType)&&(o=e(o).css(a),a=n);var p=this,f=e.type(o),d=this._rgba=[];return a!==n&&(o=[o,a,l,u],f="array"),"string"===f?this.parse(r(o)||s._default):"array"===f?(m(h.rgba.props,function(t,e){d[e.idx]=i(o[e.idx],e)}),this):"object"===f?(o instanceof c?m(h,function(t,e){o[e.cache]&&(p[e.cache]=o[e.cache].slice())}):m(h,function(e,n){var r=n.cache;m(n.props,function(t,e){if(!p[r]&&n.to){if("alpha"===t||null==o[t])return;p[r]=n.to(p._rgba)}p[r][e.idx]=i(o[t],e,!0)}),p[r]&&t.inArray(null,p[r].slice(0,3))<0&&(p[r][3]=1,n.from&&(p._rgba=n.from(p[r])))}),this):void 0},is:function(t){var e=c(t),n=!0,i=this;return m(h,function(t,r){var o,s=e[r.cache];return s&&(o=i[r.cache]||r.to&&r.to(i._rgba)||[],m(r.props,function(t,e){return null!=s[e.idx]?n=s[e.idx]===o[e.idx]:void 0})),n}),n},_space:function(){var t=[],e=this;return m(h,function(n,i){e[i.cache]&&t.push(n)}),t.pop()},transition:function(t,e){var n=c(t),r=n._space(),o=h[r],s=0===this.alpha()?c("transparent"):this,a=s[o.cache]||o.to(s._rgba),l=a.slice();return n=n[o.cache],m(o.props,function(t,r){var o=r.idx,s=a[o],u=n[o],c=p[r.type]||{};null!==u&&(null===s?l[o]=u:(c.mod&&(u-s>c.mod/2?s+=c.mod:s-u>c.mod/2&&(s-=c.mod)),l[o]=i((u-s)*e+s,r)))}),this[r](l)},blend:function(t){if(1===this._rgba[3])return this;var n=this._rgba.slice(),i=n.pop(),r=c(t)._rgba;return c(e.map(n,function(t,e){return(1-i)*r[e]+i*t}))},toRgbaString:function(){var t="rgba(",n=e.map(this._rgba,function(t,e){return null==t?e>2?1:0:t});return 1===n[3]&&(n.pop(),t="rgb("),t+n.join()+")"},toHslaString:function(){var t="hsla(",n=e.map(this.hsla(),function(t,e){return null==t&&(t=e>2?1:0),e&&3>e&&(t=Math.round(100*t)+"%"),t});return 1===n[3]&&(n.pop(),t="hsl("),t+n.join()+")"},toHexString:function(t){var n=this._rgba.slice(),i=n.pop();return t&&n.push(~~(255*i)),"#"+e.map(n,function(t){return t=(t||0).toString(16),1===t.length?"0"+t:t}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),c.fn.parse.prototype=c.fn,h.hsla.to=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e,n,i=t[0]/255,r=t[1]/255,o=t[2]/255,s=t[3],a=Math.max(i,r,o),l=Math.min(i,r,o),u=a-l,c=a+l,h=.5*c;return e=l===a?0:i===a?60*(r-o)/u+360:r===a?60*(o-i)/u+120:60*(i-r)/u+240,n=0===h||1===h?h:.5>=h?u/c:u/(2-c),[Math.round(e)%360,n,h,null==s?1:s]},h.hsla.from=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e=t[0]/360,n=t[1],i=t[2],r=t[3],s=.5>=i?i*(1+n):i+n-i*n,a=2*i-s;return[Math.round(255*o(a,s,e+1/3)),Math.round(255*o(a,s,e)),Math.round(255*o(a,s,e-1/3)),r]},m(h,function(t,r){var o=r.props,s=r.cache,a=r.to,u=r.from;c.fn[t]=function(t){if(a&&!this[s]&&(this[s]=a(this._rgba)),t===n)return this[s].slice();var r,l=e.type(t),h="array"===l||"object"===l?t:arguments,p=this[s].slice();return m(o,function(t,e){var n=h["object"===l?t:e.idx];null==n&&(n=p[e.idx]),p[e.idx]=i(n,e)}),u?(r=c(u(p)),r[s]=p,r):c(p)},m(o,function(n,i){c.fn[n]||(c.fn[n]=function(r){var o,s=e.type(r),a="alpha"===n?this._hsla?"hsla":"rgba":t,u=this[a](),c=u[i.idx];return"undefined"===s?c:("function"===s&&(r=r.call(this,c),s=e.type(r)),null==r&&i.empty?this:("string"===s&&(o=l.exec(r),o&&(r=c+parseFloat(o[2])*("+"===o[1]?1:-1))),u[i.idx]=r,this[a](u)))})})}),m(a,function(t,n){e.cssHooks[n]={set:function(t,i){var o,s,a="";if("string"!==e.type(i)||(o=r(i))){if(i=c(o||i),!f.rgba&&1!==i._rgba[3]){for(s="backgroundColor"===n?t.parentNode:t;(""===a||"transparent"===a)&&s&&s.style;)try{a=e.css(s,"backgroundColor"),s=s.parentNode}catch(l){}i=i.blend(a&&"transparent"!==a?a:"_default")}i=i.toRgbaString()}try{t.style[n]=i}catch(u){}}},e.fx.step[n]=function(t){t.colorInit||(t.start=c(t.elem,n),t.end=c(t.end),t.colorInit=!0),e.cssHooks[n].set(t.elem,t.start.transition(t.end,t.pos))}}),e.cssHooks.borderColor={expand:function(t){var e={};return m(["Top","Right","Bottom","Left"],function(n,i){e["border"+i+"Color"]=t}),e}},s=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function n(){var e,n,i=this.ownerDocument.defaultView?this.ownerDocument.defaultView.getComputedStyle(this,null):this.currentStyle,r={};if(i&&i.length&&i[0]&&i[i[0]])for(n=i.length;n--;)e=i[n],"string"==typeof i[e]&&(r[t.camelCase(e)]=i[e]);else for(e in i)"string"==typeof i[e]&&(r[e]=i[e]);return r}function i(e,n){var i,r,s={};for(i in n)r=n[i],e[i]!==r&&(o[i]||(t.fx.step[i]||!isNaN(parseFloat(r)))&&(s[i]=r));return s}var r=["add","remove","toggle"],o={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};t.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(e,n){t.fx.step[n]=function(t){("none"!==t.end&&!t.setAttr||1===t.pos&&!t.setAttr)&&(jQuery.style(t.elem,n,t.end),t.setAttr=!0)}}),t.effects.animateClass=function(e,o,s,a){var l=t.speed(o,s,a);return this.queue(function(){var o,s=t(this),a=s.attr("class")||"",u=l.children?s.find("*").andSelf():s;u=u.map(function(){var e=t(this);return{el:e,start:n.call(this)}}),o=function(){t.each(r,function(t,n){e[n]&&s[n+"Class"](e[n])})},o(),u=u.map(function(){return this.end=n.call(this.el[0]),this.diff=i(this.start,this.end),this}),s.attr("class",a),u=u.map(function(){var e=this,n=t.Deferred(),i=jQuery.extend({},l,{queue:!1,complete:function(){n.resolve(e)}});return this.el.animate(this.diff,i),n.promise()}),t.when.apply(t,u.get()).done(function(){o(),t.each(arguments,function(){var e=this.el;t.each(this.diff,function(t){e.css(t,"")})}),l.complete.call(s[0])})})},t.fn.extend({_addClass:t.fn.addClass,addClass:function(e,n,i,r){return n?t.effects.animateClass.call(this,{add:e},n,i,r):this._addClass(e)},_removeClass:t.fn.removeClass,removeClass:function(e,n,i,r){return n?t.effects.animateClass.call(this,{remove:e},n,i,r):this._removeClass(e)},_toggleClass:t.fn.toggleClass,toggleClass:function(n,i,r,o,s){return"boolean"==typeof i||i===e?r?t.effects.animateClass.call(this,i?{add:n}:{remove:n},r,o,s):this._toggleClass(n,i):t.effects.animateClass.call(this,{toggle:n},i,r,o)},switchClass:function(e,n,i,r,o){return t.effects.animateClass.call(this,{add:n,remove:e},i,r,o)}})}(),function(){function r(e,n,i,r){return t.isPlainObject(e)&&(n=e,e=e.effect),e={effect:e},null==n&&(n={}),t.isFunction(n)&&(r=n,i=null,n={}),("number"==typeof n||t.fx.speeds[n])&&(r=i,i=n,n={}),t.isFunction(i)&&(r=i,i=null),n&&t.extend(e,n),i=i||n.duration,e.duration=t.fx.off?0:"number"==typeof i?i:i in t.fx.speeds?t.fx.speeds[i]:t.fx.speeds._default,e.complete=r||n.complete,e}function o(e){return!e||"number"==typeof e||t.fx.speeds[e]?!0:"string"!=typeof e||t.effects.effect[e]?!1:n&&t.effects[e]?!1:!0}t.extend(t.effects,{version:"1.9.2",save:function(t,e){for(var n=0;n<e.length;n++)null!==e[n]&&t.data(i+e[n],t[0].style[e[n]])},restore:function(t,n){var r,o;for(o=0;o<n.length;o++)null!==n[o]&&(r=t.data(i+n[o]),r===e&&(r=""),t.css(n[o],r))},setMode:function(t,e){return"toggle"===e&&(e=t.is(":hidden")?"show":"hide"),e},getBaseline:function(t,e){var n,i;switch(t[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=t[0]/e.height}switch(t[1]){case"left":i=0;break;case"center":i=.5;break;case"right":i=1;break;default:i=t[1]/e.width}return{x:i,y:n}},createWrapper:function(e){if(e.parent().is(".ui-effects-wrapper"))return e.parent();var n={width:e.outerWidth(!0),height:e.outerHeight(!0),"float":e.css("float")},i=t("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),r={width:e.width(),height:e.height()},o=document.activeElement;try{o.id}catch(s){o=document.body}return e.wrap(i),(e[0]===o||t.contains(e[0],o))&&t(o).focus(),i=e.parent(),"static"===e.css("position")?(i.css({position:"relative"}),e.css({position:"relative"})):(t.extend(n,{position:e.css("position"),zIndex:e.css("z-index")}),t.each(["top","left","bottom","right"],function(t,i){n[i]=e.css(i),isNaN(parseInt(n[i],10))&&(n[i]="auto")}),e.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),e.css(r),i.css(n).show()},removeWrapper:function(e){var n=document.activeElement;return e.parent().is(".ui-effects-wrapper")&&(e.parent().replaceWith(e),(e[0]===n||t.contains(e[0],n))&&t(n).focus()),e},setTransition:function(e,n,i,r){return r=r||{},t.each(n,function(t,n){var o=e.cssUnit(n);o[0]>0&&(r[n]=o[0]*i+o[1])}),r}}),t.fn.extend({effect:function(){function e(e){function n(){t.isFunction(o)&&o.call(r[0]),t.isFunction(e)&&e()}var r=t(this),o=i.complete,s=i.mode;(r.is(":hidden")?"hide"===s:"show"===s)?n():a.call(r[0],i,n)}var i=r.apply(this,arguments),o=i.mode,s=i.queue,a=t.effects.effect[i.effect],l=!a&&n&&t.effects[i.effect];return t.fx.off||!a&&!l?o?this[o](i.duration,i.complete):this.each(function(){i.complete&&i.complete.call(this)}):a?s===!1?this.each(e):this.queue(s||"fx",e):l.call(this,{options:i,duration:i.duration,callback:i.complete,mode:i.mode})},_show:t.fn.show,show:function(t){if(o(t))return this._show.apply(this,arguments);var e=r.apply(this,arguments);return e.mode="show",this.effect.call(this,e)},_hide:t.fn.hide,hide:function(t){if(o(t))return this._hide.apply(this,arguments);var e=r.apply(this,arguments);return e.mode="hide",this.effect.call(this,e)},__toggle:t.fn.toggle,toggle:function(e){if(o(e)||"boolean"==typeof e||t.isFunction(e))return this.__toggle.apply(this,arguments);var n=r.apply(this,arguments);return n.mode="toggle",this.effect.call(this,n)},cssUnit:function(e){var n=this.css(e),i=[];return t.each(["em","px","%","pt"],function(t,e){n.indexOf(e)>0&&(i=[parseFloat(n),e])}),i}})}(),function(){var e={};t.each(["Quad","Cubic","Quart","Quint","Expo"],function(t,n){e[n]=function(e){return Math.pow(e,t+2)}}),t.extend(e,{Sine:function(t){return 1-Math.cos(t*Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Elastic:function(t){return 0===t||1===t?t:-Math.pow(2,8*(t-1))*Math.sin((80*(t-1)-7.5)*Math.PI/15)},Back:function(t){return t*t*(3*t-2)},Bounce:function(t){for(var e,n=4;t<((e=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*e-2)/22-t,2)}}),t.each(e,function(e,n){t.easing["easeIn"+e]=n,t.easing["easeOut"+e]=function(t){return 1-n(1-t)},t.easing["easeInOut"+e]=function(t){return.5>t?n(2*t)/2:1-n(-2*t+2)/2}})}()}(jQuery),function(t){var e=/up|down|vertical/,n=/up|left|vertical|horizontal/;t.effects.effect.blind=function(i,r){var o,s,a,l=t(this),u=["position","top","bottom","left","right","height","width"],c=t.effects.setMode(l,i.mode||"hide"),h=i.direction||"up",p=e.test(h),f=p?"height":"width",d=p?"top":"left",m=n.test(h),g={},v="show"===c;l.parent().is(".ui-effects-wrapper")?t.effects.save(l.parent(),u):t.effects.save(l,u),l.show(),o=t.effects.createWrapper(l).css({overflow:"hidden"}),s=o[f](),a=parseFloat(o.css(d))||0,g[f]=v?s:0,m||(l.css(p?"bottom":"right",0).css(p?"top":"left","auto").css({position:"absolute"}),g[d]=v?a:s+a),v&&(o.css(f,0),m||o.css(d,a+s)),o.animate(g,{duration:i.duration,easing:i.easing,queue:!1,complete:function(){"hide"===c&&l.hide(),t.effects.restore(l,u),t.effects.removeWrapper(l),r()}})}}(jQuery),function(t){t.effects.effect.bounce=function(e,n){var i,r,o,s=t(this),a=["position","top","bottom","left","right","height","width"],l=t.effects.setMode(s,e.mode||"effect"),u="hide"===l,c="show"===l,h=e.direction||"up",p=e.distance,f=e.times||5,d=2*f+(c||u?1:0),m=e.duration/d,g=e.easing,v="up"===h||"down"===h?"top":"left",y="up"===h||"left"===h,b=s.queue(),w=b.length;for((c||u)&&a.push("opacity"),t.effects.save(s,a),s.show(),t.effects.createWrapper(s),p||(p=s["top"===v?"outerHeight":"outerWidth"]()/3),c&&(o={opacity:1},o[v]=0,s.css("opacity",0).css(v,y?2*-p:2*p).animate(o,m,g)),u&&(p/=Math.pow(2,f-1)),o={},o[v]=0,i=0;f>i;i++)r={},r[v]=(y?"-=":"+=")+p,s.animate(r,m,g).animate(o,m,g),p=u?2*p:p/2;u&&(r={opacity:0},r[v]=(y?"-=":"+=")+p,s.animate(r,m,g)),s.queue(function(){u&&s.hide(),t.effects.restore(s,a),t.effects.removeWrapper(s),n()}),w>1&&b.splice.apply(b,[1,0].concat(b.splice(w,d+1))),s.dequeue()}}(jQuery),function(t){t.effects.effect.clip=function(e,n){var i,r,o,s=t(this),a=["position","top","bottom","left","right","height","width"],l=t.effects.setMode(s,e.mode||"hide"),u="show"===l,c=e.direction||"vertical",h="vertical"===c,p=h?"height":"width",f=h?"top":"left",d={};t.effects.save(s,a),s.show(),i=t.effects.createWrapper(s).css({overflow:"hidden"}),r="IMG"===s[0].tagName?i:s,o=r[p](),u&&(r.css(p,0),r.css(f,o/2)),d[p]=u?o:0,d[f]=u?0:o/2,r.animate(d,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){u||s.hide(),t.effects.restore(s,a),t.effects.removeWrapper(s),n()}})}}(jQuery),function(t){t.effects.effect.drop=function(e,n){var i,r=t(this),o=["position","top","bottom","left","right","opacity","height","width"],s=t.effects.setMode(r,e.mode||"hide"),a="show"===s,l=e.direction||"left",u="up"===l||"down"===l?"top":"left",c="up"===l||"left"===l?"pos":"neg",h={opacity:a?1:0};t.effects.save(r,o),r.show(),t.effects.createWrapper(r),i=e.distance||r["top"===u?"outerHeight":"outerWidth"](!0)/2,a&&r.css("opacity",0).css(u,"pos"===c?-i:i),h[u]=(a?"pos"===c?"+=":"-=":"pos"===c?"-=":"+=")+i,r.animate(h,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){"hide"===s&&r.hide(),t.effects.restore(r,o),t.effects.removeWrapper(r),n()}})}}(jQuery),function(t){t.effects.effect.explode=function(e,n){function i(){b.push(this),b.length===h*p&&r()}function r(){f.css({visibility:"visible"}),t(b).remove(),m||f.hide(),n()}var o,s,a,l,u,c,h=e.pieces?Math.round(Math.sqrt(e.pieces)):3,p=h,f=t(this),d=t.effects.setMode(f,e.mode||"hide"),m="show"===d,g=f.show().css("visibility","hidden").offset(),v=Math.ceil(f.outerWidth()/p),y=Math.ceil(f.outerHeight()/h),b=[];for(o=0;h>o;o++)for(l=g.top+o*y,c=o-(h-1)/2,s=0;p>s;s++)a=g.left+s*v,u=s-(p-1)/2,f.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-s*v,top:-o*y}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:v,height:y,left:a+(m?u*v:0),top:l+(m?c*y:0),opacity:m?0:1}).animate({left:a+(m?0:u*v),top:l+(m?0:c*y),opacity:m?1:0},e.duration||500,e.easing,i)}}(jQuery),function(t){t.effects.effect.fade=function(e,n){var i=t(this),r=t.effects.setMode(i,e.mode||"toggle");i.animate({opacity:r},{queue:!1,duration:e.duration,easing:e.easing,complete:n})}}(jQuery),function(t){t.effects.effect.fold=function(e,n){var i,r,o=t(this),s=["position","top","bottom","left","right","height","width"],a=t.effects.setMode(o,e.mode||"hide"),l="show"===a,u="hide"===a,c=e.size||15,h=/([0-9]+)%/.exec(c),p=!!e.horizFirst,f=l!==p,d=f?["width","height"]:["height","width"],m=e.duration/2,g={},v={};t.effects.save(o,s),o.show(),i=t.effects.createWrapper(o).css({overflow:"hidden"}),r=f?[i.width(),i.height()]:[i.height(),i.width()],h&&(c=parseInt(h[1],10)/100*r[u?0:1]),l&&i.css(p?{height:0,width:c}:{height:c,width:0}),g[d[0]]=l?r[0]:c,v[d[1]]=l?r[1]:0,i.animate(g,m,e.easing).animate(v,m,e.easing,function(){u&&o.hide(),t.effects.restore(o,s),t.effects.removeWrapper(o),n()})}}(jQuery),function(t){t.effects.effect.highlight=function(e,n){var i=t(this),r=["backgroundImage","backgroundColor","opacity"],o=t.effects.setMode(i,e.mode||"show"),s={backgroundColor:i.css("backgroundColor")};"hide"===o&&(s.opacity=0),t.effects.save(i,r),i.show().css({backgroundImage:"none",backgroundColor:e.color||"#ffff99"}).animate(s,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){"hide"===o&&i.hide(),t.effects.restore(i,r),n()}})}}(jQuery),function(t){t.effects.effect.pulsate=function(e,n){var i,r=t(this),o=t.effects.setMode(r,e.mode||"show"),s="show"===o,a="hide"===o,l=s||"hide"===o,u=2*(e.times||5)+(l?1:0),c=e.duration/u,h=0,p=r.queue(),f=p.length;for((s||!r.is(":visible"))&&(r.css("opacity",0).show(),h=1),i=1;u>i;i++)r.animate({opacity:h},c,e.easing),h=1-h;r.animate({opacity:h},c,e.easing),r.queue(function(){a&&r.hide(),n()}),f>1&&p.splice.apply(p,[1,0].concat(p.splice(f,u+1))),r.dequeue()}}(jQuery),function(t){t.effects.effect.puff=function(e,n){var i=t(this),r=t.effects.setMode(i,e.mode||"hide"),o="hide"===r,s=parseInt(e.percent,10)||150,a=s/100,l={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()};t.extend(e,{effect:"scale",queue:!1,fade:!0,mode:r,complete:n,percent:o?s:100,from:o?l:{height:l.height*a,width:l.width*a,outerHeight:l.outerHeight*a,outerWidth:l.outerWidth*a}}),i.effect(e)},t.effects.effect.scale=function(e,n){var i=t(this),r=t.extend(!0,{},e),o=t.effects.setMode(i,e.mode||"effect"),s=parseInt(e.percent,10)||(0===parseInt(e.percent,10)?0:"hide"===o?0:100),a=e.direction||"both",l=e.origin,u={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()},c={y:"horizontal"!==a?s/100:1,x:"vertical"!==a?s/100:1};r.effect="size",r.queue=!1,r.complete=n,"effect"!==o&&(r.origin=l||["middle","center"],r.restore=!0),r.from=e.from||("show"===o?{height:0,width:0,outerHeight:0,outerWidth:0}:u),r.to={height:u.height*c.y,width:u.width*c.x,outerHeight:u.outerHeight*c.y,outerWidth:u.outerWidth*c.x},r.fade&&("show"===o&&(r.from.opacity=0,r.to.opacity=1),"hide"===o&&(r.from.opacity=1,r.to.opacity=0)),i.effect(r)},t.effects.effect.size=function(e,n){var i,r,o,s=t(this),a=["position","top","bottom","left","right","width","height","overflow","opacity"],l=["position","top","bottom","left","right","overflow","opacity"],u=["width","height","overflow"],c=["fontSize"],h=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],p=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],f=t.effects.setMode(s,e.mode||"effect"),d=e.restore||"effect"!==f,m=e.scale||"both",g=e.origin||["middle","center"],v=s.css("position"),y=d?a:l,b={height:0,width:0,outerHeight:0,outerWidth:0};"show"===f&&s.show(),i={height:s.height(),width:s.width(),outerHeight:s.outerHeight(),outerWidth:s.outerWidth()},"toggle"===e.mode&&"show"===f?(s.from=e.to||b,s.to=e.from||i):(s.from=e.from||("show"===f?b:i),s.to=e.to||("hide"===f?b:i)),o={from:{y:s.from.height/i.height,x:s.from.width/i.width},to:{y:s.to.height/i.height,x:s.to.width/i.width}},("box"===m||"both"===m)&&(o.from.y!==o.to.y&&(y=y.concat(h),s.from=t.effects.setTransition(s,h,o.from.y,s.from),s.to=t.effects.setTransition(s,h,o.to.y,s.to)),o.from.x!==o.to.x&&(y=y.concat(p),s.from=t.effects.setTransition(s,p,o.from.x,s.from),s.to=t.effects.setTransition(s,p,o.to.x,s.to))),("content"===m||"both"===m)&&o.from.y!==o.to.y&&(y=y.concat(c).concat(u),s.from=t.effects.setTransition(s,c,o.from.y,s.from),s.to=t.effects.setTransition(s,c,o.to.y,s.to)),t.effects.save(s,y),s.show(),t.effects.createWrapper(s),s.css("overflow","hidden").css(s.from),g&&(r=t.effects.getBaseline(g,i),s.from.top=(i.outerHeight-s.outerHeight())*r.y,s.from.left=(i.outerWidth-s.outerWidth())*r.x,s.to.top=(i.outerHeight-s.to.outerHeight)*r.y,s.to.left=(i.outerWidth-s.to.outerWidth)*r.x),s.css(s.from),("content"===m||"both"===m)&&(h=h.concat(["marginTop","marginBottom"]).concat(c),p=p.concat(["marginLeft","marginRight"]),u=a.concat(h).concat(p),s.find("*[width]").each(function(){var n=t(this),i={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()};d&&t.effects.save(n,u),n.from={height:i.height*o.from.y,width:i.width*o.from.x,outerHeight:i.outerHeight*o.from.y,outerWidth:i.outerWidth*o.from.x},n.to={height:i.height*o.to.y,width:i.width*o.to.x,outerHeight:i.height*o.to.y,outerWidth:i.width*o.to.x},o.from.y!==o.to.y&&(n.from=t.effects.setTransition(n,h,o.from.y,n.from),n.to=t.effects.setTransition(n,h,o.to.y,n.to)),o.from.x!==o.to.x&&(n.from=t.effects.setTransition(n,p,o.from.x,n.from),n.to=t.effects.setTransition(n,p,o.to.x,n.to)),n.css(n.from),n.animate(n.to,e.duration,e.easing,function(){d&&t.effects.restore(n,u)})})),s.animate(s.to,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){0===s.to.opacity&&s.css("opacity",s.from.opacity),"hide"===f&&s.hide(),t.effects.restore(s,y),d||("static"===v?s.css({position:"relative",top:s.to.top,left:s.to.left}):t.each(["top","left"],function(t,e){s.css(e,function(e,n){var i=parseInt(n,10),r=t?s.to.left:s.to.top;return"auto"===n?r+"px":i+r+"px"})})),t.effects.removeWrapper(s),n()}})}}(jQuery),function(t){t.effects.effect.shake=function(e,n){var i,r=t(this),o=["position","top","bottom","left","right","height","width"],s=t.effects.setMode(r,e.mode||"effect"),a=e.direction||"left",l=e.distance||20,u=e.times||3,c=2*u+1,h=Math.round(e.duration/c),p="up"===a||"down"===a?"top":"left",f="up"===a||"left"===a,d={},m={},g={},v=r.queue(),y=v.length;for(t.effects.save(r,o),r.show(),t.effects.createWrapper(r),d[p]=(f?"-=":"+=")+l,m[p]=(f?"+=":"-=")+2*l,g[p]=(f?"-=":"+=")+2*l,r.animate(d,h,e.easing),i=1;u>i;i++)r.animate(m,h,e.easing).animate(g,h,e.easing);r.animate(m,h,e.easing).animate(d,h/2,e.easing).queue(function(){"hide"===s&&r.hide(),t.effects.restore(r,o),t.effects.removeWrapper(r),n()}),y>1&&v.splice.apply(v,[1,0].concat(v.splice(y,c+1))),r.dequeue()}}(jQuery),function(t){t.effects.effect.slide=function(e,n){var i,r=t(this),o=["position","top","bottom","left","right","width","height"],s=t.effects.setMode(r,e.mode||"show"),a="show"===s,l=e.direction||"left",u="up"===l||"down"===l?"top":"left",c="up"===l||"left"===l,h={};t.effects.save(r,o),r.show(),i=e.distance||r["top"===u?"outerHeight":"outerWidth"](!0),t.effects.createWrapper(r).css({overflow:"hidden"}),a&&r.css(u,c?isNaN(i)?"-"+i:-i:i),h[u]=(a?c?"+=":"-=":c?"-=":"+=")+i,r.animate(h,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){"hide"===s&&r.hide(),t.effects.restore(r,o),t.effects.removeWrapper(r),n()}})}}(jQuery),function(t){t.effects.effect.transfer=function(e,n){var i=t(this),r=t(e.to),o="fixed"===r.css("position"),s=t("body"),a=o?s.scrollTop():0,l=o?s.scrollLeft():0,u=r.offset(),c={top:u.top-a,left:u.left-l,height:r.innerHeight(),width:r.innerWidth()},h=i.offset(),p=t('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(e.className).css({top:h.top-a,left:h.left-l,height:i.innerHeight(),width:i.innerWidth(),position:o?"fixed":"absolute"}).animate(c,e.duration,e.easing,function(){p.remove(),n()})}}(jQuery),function(t){var e="hidden",n="border-box",i="lineHeight",r='<textarea tabindex="-1" style="position:absolute; top:-9999px; left:-9999px; right:auto; bottom:auto; -moz-box-sizing:content-box; -webkit-box-sizing:content-box; box-sizing:content-box; word-wrap:break-word; height:0 !important; min-height:0 !important; overflow:hidden">',o=["fontFamily","fontSize","fontWeight","fontStyle","letterSpacing","textTransform","wordSpacing","textIndent"],s="oninput",a="onpropertychange",l=t(r)[0];l.setAttribute(s,"return"),t.isFunction(l[s])||a in l?(t(l).css(i,"99px"),"99px"===t(l).css(i)&&o.push(i),t.fn.autosize=function(i){return this.each(function(){function l(){var t,n;c||(c=!0,u.value=p.value,u.style.overflowY=p.style.overflowY,u.style.width=f.css("width"),u.scrollTop=0,u.scrollTop=9e4,t=u.scrollTop,n=e,t>m?(t=m,n="scroll"):d>t&&(t=d),p.style.overflowY=n,p.style.height=t+v+"px",setTimeout(function(){c=!1},1))}var u,c,h,p=this,f=t(p),d=f.height(),m=parseInt(f.css("maxHeight"),10),g=o.length,v=0;if((f.css("box-sizing")===n||f.css("-moz-box-sizing")===n||f.css("-webkit-box-sizing")===n)&&(v=f.outerHeight()-f.height()),!f.data("mirror")&&!f.data("ismirror")){for(u=t(r).data("ismirror",!0).addClass(i||"autosizejs")[0],h="none"===f.css("resize")?"none":"horizontal",f.data("mirror",t(u)).css({overflow:e,overflowY:e,wordWrap:"break-word",resize:h}),m=m&&m>0?m:9e4;g--;)u.style[o[g]]=f.css(o[g]);t("body").append(u),a in p?s in p?p[s]=p.onkeyup=l:p[a]=l:p[s]=l,t(window).resize(l),f.bind("autosize",l),l()}})}):t.fn.autosize=function(){return this}}(jQuery),/**
 * jQuery-csv (jQuery Plugin)
 * version: 0.71 (2012-11-19)
 *
 * This document is licensed as free software under the terms of the
 * MIT License: http://www.opensource.org/licenses/mit-license.php
 *
 * Acknowledgements:
 * The original design and influence to implement this library as a jquery
 * plugin is influenced by jquery-json (http://code.google.com/p/jquery-json/).
 * If you're looking to use native JSON.Stringify but want additional backwards
 * compatibility for browsers that don't support it, I highly recommend you
 * check it out.
 *
 * A special thanks goes out to rwk@acm.org for providing a lot of valuable
 * feedback to the project including the core for the new FSM
 * (Finite State Machine) parsers. If you're looking for a stable TSV parser
 * be sure to take a look at jquery-tsv (http://code.google.com/p/jquery-tsv/).

 * For legal purposes I'll include the "NO WARRANTY EXPRESSED OR IMPLIED.
 * USE AT YOUR OWN RISK.". Which, in 'layman's terms' means, by using this
 * library you are accepting responsibility if it breaks your code.
 *
 * Legal jargon aside, I will do my best to provide a useful and stable core
 * that can effectively be built on.
 *
 * Copyrighted 2012 by Evan Plaice.
 */
RegExp.escape=function(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},function(t){"use strict";t.csv={defaults:{separator:",",delimiter:'"',headers:!0},hooks:{castToScalar:function(t){var e=/\./;if(isNaN(t))return t;if(e.test(t))return parseFloat(t);var n=parseInt(t);return isNaN(n)?null:n}},parsers:{parse:function(t,e){function n(){if(l=0,u="",e.start&&e.state.rowNum<e.start)return a=[],e.state.rowNum++,e.state.colNum=1,void 0;if(void 0===e.onParseEntry)s.push(a);else{var t=e.onParseEntry(a,e.state);t!==!1&&s.push(t)}a=[],e.end&&e.state.rowNum>=e.end&&(c=!0),e.state.rowNum++,e.state.colNum=1}function i(){if(void 0===e.onParseValue)a.push(u);else{var t=e.onParseValue(u,e.state);t!==!1&&a.push(t)}u="",l=0,e.state.colNum++}var r=e.separator,o=e.delimiter;e.state.rowNum||(e.state.rowNum=1),e.state.colNum||(e.state.colNum=1);var s=[],a=[],l=0,u="",c=!1,h=RegExp.escape(r),p=RegExp.escape(o),f=/(D|S|\n|\r|[^DS\r\n]+)/,d=f.source;return d=d.replace(/S/g,h),d=d.replace(/D/g,p),f=RegExp(d,"gm"),t.replace(f,function(t){if(!c)switch(l){case 0:if(t===r){u+="",i();break}if(t===o){l=1;break}if("\n"===t){i(),n();break}if(/^\r$/.test(t))break;u+=t,l=3;break;case 1:if(t===o){l=2;break}u+=t,l=1;break;case 2:if(t===o){u+=t,l=1;break}if(t===r){i();break}if("\n"===t){i(),n();break}if(/^\r$/.test(t))break;throw new Error("CSVDataError: Illegal State [Row:"+e.state.rowNum+"][Col:"+e.state.colNum+"]");case 3:if(t===r){i();break}if("\n"===t){i(),n();break}if(/^\r$/.test(t))break;if(t===o)throw new Error("CSVDataError: Illegal Quote [Row:"+e.state.rowNum+"][Col:"+e.state.colNum+"]");throw new Error("CSVDataError: Illegal Data [Row:"+e.state.rowNum+"][Col:"+e.state.colNum+"]");default:throw new Error("CSVDataError: Unknown State [Row:"+e.state.rowNum+"][Col:"+e.state.colNum+"]")}}),0!==a.length&&(i(),n()),s},splitLines:function(t,e){function n(){if(s=0,e.start&&e.state.rowNum<e.start)return a="",e.state.rowNum++,void 0;if(void 0===e.onParseEntry)o.push(a);else{var t=e.onParseEntry(a,e.state);t!==!1&&o.push(t)}a="",e.end&&e.state.rowNum>=e.end&&(l=!0),e.state.rowNum++}var i=e.separator,r=e.delimiter;e.state.rowNum||(e.state.rowNum=1);var o=[],s=0,a="",l=!1,u=RegExp.escape(i),c=RegExp.escape(r),h=/(D|S|\n|\r|[^DS\r\n]+)/,p=h.source;return p=p.replace(/S/g,u),p=p.replace(/D/g,c),h=RegExp(p,"gm"),t.replace(h,function(t){if(!l)switch(s){case 0:if(t===i){a+=t,s=0;break}if(t===r){a+=t,s=1;break}if("\n"===t){n();break}if(/^\r$/.test(t))break;a+=t,s=3;break;case 1:if(t===r){a+=t,s=2;break}a+=t,s=1;break;case 2:var o=a.substr(a.length-1);if(t===r&&o===r){a+=t,s=1;break}if(t===i){a+=t,s=0;break}if("\n"===t){n();break}if("\r"===t)break;throw new Error("CSVDataError: Illegal state [Row:"+e.state.rowNum+"]");case 3:if(t===i){a+=t,s=0;break}if("\n"===t){n();break}if("\r"===t)break;if(t===r)throw new Error("CSVDataError: Illegal quote [Row:"+e.state.rowNum+"]");throw new Error("CSVDataError: Illegal state [Row:"+e.state.rowNum+"]");default:throw new Error("CSVDataError: Unknown state [Row:"+e.state.rowNum+"]")}}),""!==a&&n(),o},parseEntry:function(t,e){function n(){if(void 0===e.onParseValue)o.push(a);else{var t=e.onParseValue(a,e.state);t!==!1&&o.push(t)}a="",s=0,e.state.colNum++}var i=e.separator,r=e.delimiter;e.state.rowNum||(e.state.rowNum=1),e.state.colNum||(e.state.colNum=1);var o=[],s=0,a="";if(!e.match){var l=RegExp.escape(i),u=RegExp.escape(r),c=/(D|S|\n|\r|[^DS\r\n]+)/,h=c.source;h=h.replace(/S/g,l),h=h.replace(/D/g,u),e.match=RegExp(h,"gm")}return t.replace(e.match,function(t){switch(s){case 0:if(t===i){a+="",n();break}if(t===r){s=1;break}if("\n"===t||"\r"===t)break;a+=t,s=3;break;case 1:if(t===r){s=2;break}a+=t,s=1;break;case 2:if(t===r){a+=t,s=1;break}if(t===i){n();break}if("\n"===t||"\r"===t)break;throw new Error("CSVDataError: Illegal State [Row:"+e.state.rowNum+"][Col:"+e.state.colNum+"]");case 3:if(t===i){n();break}if("\n"===t||"\r"===t)break;if(t===r)throw new Error("CSVDataError: Illegal Quote [Row:"+e.state.rowNum+"][Col:"+e.state.colNum+"]");throw new Error("CSVDataError: Illegal Data [Row:"+e.state.rowNum+"][Col:"+e.state.colNum+"]");default:throw new Error("CSVDataError: Unknown State [Row:"+e.state.rowNum+"][Col:"+e.state.colNum+"]")}}),n(),o}},toArray:function(e,n,i){var n=void 0!==n?n:{},r={};r.callback=void 0!==i&&"function"==typeof i?i:!1,r.separator="separator"in n?n.separator:t.csv.defaults.separator,r.delimiter="delimiter"in n?n.delimiter:t.csv.defaults.delimiter;var o=void 0!==n.state?n.state:{},n={delimiter:r.delimiter,separator:r.separator,onParseEntry:n.onParseEntry,onParseValue:n.onParseValue,state:o},s=t.csv.parsers.parseEntry(e,n);return r.callback?(r.callback("",s),void 0):s},toArrays:function(e,n,i){var n=void 0!==n?n:{},r={};r.callback=void 0!==i&&"function"==typeof i?i:!1,r.separator="separator"in n?n.separator:t.csv.defaults.separator,r.delimiter="delimiter"in n?n.delimiter:t.csv.defaults.delimiter;var o=[],n={delimiter:r.delimiter,separator:r.separator,onParseEntry:n.onParseEntry,onParseValue:n.onParseValue,start:n.start,end:n.end,state:{rowNum:1,colNum:1}};return o=t.csv.parsers.parse(e,n),r.callback?(r.callback("",o),void 0):o},toObjects:function(e,n,i){var n=void 0!==n?n:{},r={};r.callback=void 0!==i&&"function"==typeof i?i:!1,r.separator="separator"in n?n.separator:t.csv.defaults.separator,r.delimiter="delimiter"in n?n.delimiter:t.csv.defaults.delimiter,r.headers="headers"in n?n.headers:t.csv.defaults.headers,n.start="start"in n?n.start:1,r.headers&&n.start++,n.end&&r.headers&&n.end++;var o=[],s=[],n={delimiter:r.delimiter,separator:r.separator,onParseEntry:n.onParseEntry,onParseValue:n.onParseValue,start:n.start,end:n.end,state:{rowNum:1,colNum:1},match:!1},a={delimiter:r.delimiter,separator:r.separator,start:1,end:1,state:{rowNum:1,colNum:1}},l=t.csv.parsers.splitLines(e,a),u=t.csv.toArray(l[0],n),o=t.csv.parsers.splitLines(e,n);n.state.colNum=1,n.state.rowNum=u?2:1;for(var c=0,h=o.length;h>c;c++){var p=t.csv.toArray(o[c],n),f={};for(var d in u)f[u[d]]=p[d];s.push(f),n.state.rowNum++}return r.callback?(r.callback("",s),void 0):s},fromArrays:function(e,n,r){var n=void 0!==n?n:{},o={};if(o.callback=void 0!==r&&"function"==typeof r?r:!1,o.separator="separator"in n?n.separator:t.csv.defaults.separator,o.delimiter="delimiter"in n?n.delimiter:t.csv.defaults.delimiter,o.escaper="escaper"in n?n.escaper:t.csv.defaults.escaper,o.experimental="experimental"in n?n.experimental:!1,!o.experimental)throw new Error("not implemented");var s=[];for(i in e)s.push(e[i]);return o.callback?(o.callback("",s),void 0):s},fromObjects2CSV:function(e,n,r){var n=void 0!==n?n:{},o={};if(o.callback=void 0!==r&&"function"==typeof r?r:!1,o.separator="separator"in n?n.separator:t.csv.defaults.separator,o.delimiter="delimiter"in n?n.delimiter:t.csv.defaults.delimiter,o.experimental="experimental"in n?n.experimental:!1,!o.experimental)throw new Error("not implemented");var s=[];for(i in e)s.push(arrays[i]);return o.callback?(o.callback("",s),void 0):s}},t.csvEntry2Array=t.csv.toArray,t.csv2Array=t.csv.toArrays,t.csv2Dictionary=t.csv.toObjects}(jQuery),/*!
* FitVids 1.0.3
*
* Copyright 2013, Chris Coyier - http://css-tricks.com + Dave Rupert - http://daverupert.com
* Credit to Thierry Koblentz - http://www.alistapart.com/articles/creating-intrinsic-ratios-for-video/
* Released under the WTFPL license - http://sam.zoy.org/wtfpl/
*
* Date: Thu Sept 01 18:00:00 2011 -0500
*/
function(t){"use strict";t.fn.fitVids=function(e){var n={customSelector:null};if(!document.getElementById("fit-vids-style")){var i=document.createElement("div"),r=document.getElementsByTagName("base")[0]||document.getElementsByTagName("script")[0],o="&shy;<style>.fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}</style>";i.className="fit-vids-style",i.id="fit-vids-style",i.style.display="none",i.innerHTML=o,r.parentNode.insertBefore(i,r)}return e&&t.extend(n,e),this.each(function(){var e=["iframe[src*='player.vimeo.com']","iframe[src*='youtube.com']","iframe[src*='youtube-nocookie.com']","iframe[src*='kickstarter.com'][src*='video.html']","object","embed"];n.customSelector&&e.push(n.customSelector);var i=t(this).find(e.join(","));i=i.not("object object"),i.each(function(){var e=t(this);if(!("embed"===this.tagName.toLowerCase()&&e.parent("object").length||e.parent(".fluid-width-video-wrapper").length)){var n="object"===this.tagName.toLowerCase()||e.attr("height")&&!isNaN(parseInt(e.attr("height"),10))?parseInt(e.attr("height"),10):e.height(),i=isNaN(parseInt(e.attr("width"),10))?e.width():parseInt(e.attr("width"),10),r=n/i;if(!e.attr("id")){var o="fitvid"+Math.floor(999999*Math.random());e.attr("id",o)}e.wrap('<div class="fluid-width-video-wrapper"></div>').parent(".fluid-width-video-wrapper").css("padding-top",100*r+"%"),e.removeAttr("height").removeAttr("width")}})})}}(window.jQuery||window.Zepto),function(t){"use strict";function e(){var t=document.documentElement;return"requestFullscreen"in t||"mozRequestFullScreen"in t&&document.mozFullScreenEnabled||"webkitRequestFullScreen"in t}function n(t){t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullScreen&&t.webkitRequestFullScreen()}function i(){return document.fullscreen||document.mozFullScreen||document.webkitIsFullScreen||!1}function r(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen(),t(document).off("fullscreenchange mozfullscreenchange webkitfullscreenchange")}function o(e){t(document).on("fullscreenchange mozfullscreenchange webkitfullscreenchange",function(){e(i())})}t.support.fullscreen=e(),t.fn.fullScreen=function(e){if(!t.support.fullscreen||1!==this.length)return this;if(i())return r(),this;var s=t.extend({background:"#111",callback:t.noop(),fullscreenClass:"fullScreen"},e),a=this,l=t("<div>",{css:{"overflow-y":"auto",background:s.background,width:"100%",height:"100%"}}).insertBefore(a).append(a);return a.addClass(s.fullscreenClass),n(l.get(0)),l.click(function(t){t.target==this&&r()}),a.cancel=function(){return r(),a},o(function(t){t||(a.removeClass(s.fullscreenClass).insertBefore(l),l.remove()),s.callback(t)}),a},t.fn.cancelFullScreen=function(){return r(),this}}(jQuery),function(t,e){"use strict";function n(){if(!i.READY){i.event.determineEventTypes();for(var t in i.gestures)i.gestures.hasOwnProperty(t)&&i.detection.register(i.gestures[t]);i.event.onTouch(i.DOCUMENT,i.EVENT_MOVE,i.detection.detect),i.event.onTouch(i.DOCUMENT,i.EVENT_END,i.detection.detect),i.READY=!0}}var i=function(t,e){return new i.Instance(t,e||{})};i.defaults={stop_browser_behavior:{userSelect:"none",touchAction:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},i.HAS_POINTEREVENTS=t.navigator.pointerEnabled||t.navigator.msPointerEnabled,i.HAS_TOUCHEVENTS="ontouchstart"in t,i.MOBILE_REGEX=/mobile|tablet|ip(ad|hone|od)|android|silk/i,i.NO_MOUSEEVENTS=i.HAS_TOUCHEVENTS&&t.navigator.userAgent.match(i.MOBILE_REGEX),i.EVENT_TYPES={},i.DIRECTION_DOWN="down",i.DIRECTION_LEFT="left",i.DIRECTION_UP="up",i.DIRECTION_RIGHT="right",i.POINTER_MOUSE="mouse",i.POINTER_TOUCH="touch",i.POINTER_PEN="pen",i.EVENT_START="start",i.EVENT_MOVE="move",i.EVENT_END="end",i.DOCUMENT=t.document,i.plugins={},i.READY=!1,i.Instance=function(t,e){var r=this;return n(),this.element=t,this.enabled=!0,this.options=i.utils.extend(i.utils.extend({},i.defaults),e||{}),this.options.stop_browser_behavior&&i.utils.stopDefaultBrowserBehavior(this.element,this.options.stop_browser_behavior),i.event.onTouch(t,i.EVENT_START,function(t){r.enabled&&i.detection.startDetect(r,t)}),this},i.Instance.prototype={on:function(t,e){for(var n=t.split(" "),i=0;i<n.length;i++)this.element.addEventListener(n[i],e,!1);return this},off:function(t,e){for(var n=t.split(" "),i=0;i<n.length;i++)this.element.removeEventListener(n[i],e,!1);return this},trigger:function(t,e){e||(e={});var n=i.DOCUMENT.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e;var r=this.element;return i.utils.hasParent(e.target,r)&&(r=e.target),r.dispatchEvent(n),this},enable:function(t){return this.enabled=t,this}};var r=null,o=!1,s=!1;i.event={bindDom:function(t,e,n){for(var i=e.split(" "),r=0;r<i.length;r++)t.addEventListener(i[r],n,!1)},onTouch:function(t,e,n){var a=this;this.bindDom(t,i.EVENT_TYPES[e],function(l){var u=l.type.toLowerCase();if(!u.match(/mouse/)||!s){u.match(/touch/)||u.match(/pointerdown/)||u.match(/mouse/)&&1===l.which?o=!0:u.match(/mouse/)&&1!==l.which&&(o=!1),u.match(/touch|pointer/)&&(s=!0);var c=0;o&&(i.HAS_POINTEREVENTS&&e!=i.EVENT_END?c=i.PointerEvent.updatePointer(e,l):u.match(/touch/)?c=l.touches.length:s||(c=u.match(/up/)?0:1),c>0&&e==i.EVENT_END?e=i.EVENT_MOVE:c||(e=i.EVENT_END),(c||null===r)&&(r=l),n.call(i.detection,a.collectEventData(t,e,a.getTouchList(r,e),l)),i.HAS_POINTEREVENTS&&e==i.EVENT_END&&(c=i.PointerEvent.updatePointer(e,l))),c||(r=null,o=!1,s=!1,i.PointerEvent.reset())}})},determineEventTypes:function(){var t;t=i.HAS_POINTEREVENTS?i.PointerEvent.getEvents():i.NO_MOUSEEVENTS?["touchstart","touchmove","touchend touchcancel"]:["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"],i.EVENT_TYPES[i.EVENT_START]=t[0],i.EVENT_TYPES[i.EVENT_MOVE]=t[1],i.EVENT_TYPES[i.EVENT_END]=t[2]},getTouchList:function(t){return i.HAS_POINTEREVENTS?i.PointerEvent.getTouchList():t.touches?t.touches:(t.indentifier=1,[t])},collectEventData:function(t,e,n,r){var o=i.POINTER_TOUCH;return(r.type.match(/mouse/)||i.PointerEvent.matchType(i.POINTER_MOUSE,r))&&(o=i.POINTER_MOUSE),{center:i.utils.getCenter(n),timeStamp:(new Date).getTime(),target:r.target,touches:n,eventType:e,pointerType:o,srcEvent:r,preventDefault:function(){this.srcEvent.preventManipulation&&this.srcEvent.preventManipulation(),this.srcEvent.preventDefault&&this.srcEvent.preventDefault()},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return i.detection.stopDetect()}}}},i.PointerEvent={pointers:{},getTouchList:function(){var t=this,e=[];return Object.keys(t.pointers).sort().forEach(function(n){e.push(t.pointers[n])}),e},updatePointer:function(t,e){return t==i.EVENT_END?this.pointers={}:(e.identifier=e.pointerId,this.pointers[e.pointerId]=e),Object.keys(this.pointers).length},matchType:function(t,e){if(!e.pointerType)return!1;var n={};return n[i.POINTER_MOUSE]=e.pointerType==e.MSPOINTER_TYPE_MOUSE||e.pointerType==i.POINTER_MOUSE,n[i.POINTER_TOUCH]=e.pointerType==e.MSPOINTER_TYPE_TOUCH||e.pointerType==i.POINTER_TOUCH,n[i.POINTER_PEN]=e.pointerType==e.MSPOINTER_TYPE_PEN||e.pointerType==i.POINTER_PEN,n[t]},getEvents:function(){return["pointerdown MSPointerDown","pointermove MSPointerMove","pointerup pointercancel MSPointerUp MSPointerCancel"]},reset:function(){this.pointers={}}},i.utils={extend:function(t,n,i){for(var r in n)t[r]!==e&&i||(t[r]=n[r]);return t},hasParent:function(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1},getCenter:function(t){for(var e=[],n=[],i=0,r=t.length;r>i;i++)e.push(t[i].pageX),n.push(t[i].pageY);return{pageX:(Math.min.apply(Math,e)+Math.max.apply(Math,e))/2,pageY:(Math.min.apply(Math,n)+Math.max.apply(Math,n))/2}},getVelocity:function(t,e,n){return{x:Math.abs(e/t)||0,y:Math.abs(n/t)||0}},getAngle:function(t,e){var n=e.pageY-t.pageY,i=e.pageX-t.pageX;return 180*Math.atan2(n,i)/Math.PI},getDirection:function(t,e){var n=Math.abs(t.pageX-e.pageX),r=Math.abs(t.pageY-e.pageY);return n>=r?t.pageX-e.pageX>0?i.DIRECTION_LEFT:i.DIRECTION_RIGHT:t.pageY-e.pageY>0?i.DIRECTION_UP:i.DIRECTION_DOWN},getDistance:function(t,e){var n=e.pageX-t.pageX,i=e.pageY-t.pageY;return Math.sqrt(n*n+i*i)},getScale:function(t,e){return t.length>=2&&e.length>=2?this.getDistance(e[0],e[1])/this.getDistance(t[0],t[1]):1},getRotation:function(t,e){return t.length>=2&&e.length>=2?this.getAngle(e[1],e[0])-this.getAngle(t[1],t[0]):0},isVertical:function(t){return t==i.DIRECTION_UP||t==i.DIRECTION_DOWN},stopDefaultBrowserBehavior:function(t,e){var n,i=["webkit","khtml","moz","Moz","ms","o",""];if(e&&t.style){for(var r=0;r<i.length;r++)for(var o in e)e.hasOwnProperty(o)&&(n=o,i[r]&&(n=i[r]+n.substring(0,1).toUpperCase()+n.substring(1)),t.style[n]=e[o]);"none"==e.userSelect&&(t.onselectstart=function(){return!1}),"none"==e.userDrag&&(t.ondragstart=function(){return!1})}}},i.detection={gestures:[],current:null,previous:null,stopped:!1,startDetect:function(t,e){this.current||(this.stopped=!1,this.current={inst:t,startEvent:i.utils.extend({},e),lastEvent:!1,name:""},this.detect(e))},detect:function(t){if(this.current&&!this.stopped){t=this.extendEventData(t);for(var e=this.current.inst.options,n=0,r=this.gestures.length;r>n;n++){var o=this.gestures[n];if(!this.stopped&&e[o.name]!==!1&&o.handler.call(o,t,this.current.inst)===!1){this.stopDetect();break}}return this.current&&(this.current.lastEvent=t),t.eventType==i.EVENT_END&&!t.touches.length-1&&this.stopDetect(),t}},stopDetect:function(){this.previous=i.utils.extend({},this.current),this.current=null,this.stopped=!0},extendEventData:function(t){var e=this.current.startEvent;if(e&&(t.touches.length!=e.touches.length||t.touches===e.touches)){e.touches=[];for(var n=0,r=t.touches.length;r>n;n++)e.touches.push(i.utils.extend({},t.touches[n]))}var o=t.timeStamp-e.timeStamp,s=t.center.pageX-e.center.pageX,a=t.center.pageY-e.center.pageY,l=i.utils.getVelocity(o,s,a);return i.utils.extend(t,{deltaTime:o,deltaX:s,deltaY:a,velocityX:l.x,velocityY:l.y,distance:i.utils.getDistance(e.center,t.center),angle:i.utils.getAngle(e.center,t.center),interimAngle:this.current.lastEvent&&i.utils.getAngle(this.current.lastEvent.center,t.center),direction:i.utils.getDirection(e.center,t.center),interimDirection:this.current.lastEvent&&i.utils.getDirection(this.current.lastEvent.center,t.center),scale:i.utils.getScale(e.touches,t.touches),rotation:i.utils.getRotation(e.touches,t.touches),startEvent:e}),t},register:function(t){var n=t.defaults||{};return n[t.name]===e&&(n[t.name]=!0),i.utils.extend(i.defaults,n,!0),t.index=t.index||1e3,this.gestures.push(t),this.gestures.sort(function(t,e){return t.index<e.index?-1:t.index>e.index?1:0}),this.gestures}},i.gestures=i.gestures||{},i.gestures.Hold={name:"hold",index:10,defaults:{hold_timeout:500,hold_threshold:1},timer:null,handler:function(t,e){switch(t.eventType){case i.EVENT_START:clearTimeout(this.timer),i.detection.current.name=this.name,this.timer=setTimeout(function(){"hold"==i.detection.current.name&&e.trigger("hold",t)},e.options.hold_timeout);break;case i.EVENT_MOVE:t.distance>e.options.hold_threshold&&clearTimeout(this.timer);break;case i.EVENT_END:clearTimeout(this.timer)}}},i.gestures.Tap={name:"tap",index:100,defaults:{tap_max_touchtime:250,tap_max_distance:10,tap_always:!0,doubletap_distance:20,doubletap_interval:300},handler:function(t,e){if(t.eventType==i.EVENT_END&&"touchcancel"!=t.srcEvent.type){var n=i.detection.previous,r=!1;if(t.deltaTime>e.options.tap_max_touchtime||t.distance>e.options.tap_max_distance)return;n&&"tap"==n.name&&t.timeStamp-n.lastEvent.timeStamp<e.options.doubletap_interval&&t.distance<e.options.doubletap_distance&&(e.trigger("doubletap",t),r=!0),(!r||e.options.tap_always)&&(i.detection.current.name="tap",e.trigger(i.detection.current.name,t))}}},i.gestures.Swipe={name:"swipe",index:40,defaults:{swipe_min_touches:1,swipe_max_touches:1,swipe_velocity:.7},handler:function(t,e){if(t.eventType==i.EVENT_END){if(e.options.swipe_max_touches>0&&t.touches.length<e.options.swipe_min_touches&&t.touches.length>e.options.swipe_max_touches)return;(t.velocityX>e.options.swipe_velocity||t.velocityY>e.options.swipe_velocity)&&(e.trigger(this.name,t),e.trigger(this.name+t.direction,t))}}},i.gestures.Drag={name:"drag",index:50,defaults:{drag_min_distance:10,correct_for_drag_min_distance:!0,drag_max_touches:1,drag_block_horizontal:!1,drag_block_vertical:!1,drag_lock_to_axis:!1,drag_lock_min_distance:25},triggered:!1,handler:function(t,e){if(i.detection.current.name!=this.name&&this.triggered)return e.trigger(this.name+"end",t),this.triggered=!1,void 0;if(!(e.options.drag_max_touches>0&&t.touches.length>e.options.drag_max_touches))switch(t.eventType){case i.EVENT_START:this.triggered=!1;break;case i.EVENT_MOVE:if(t.distance<e.options.drag_min_distance&&i.detection.current.name!=this.name)return;if(i.detection.current.name!=this.name&&(i.detection.current.name=this.name,e.options.correct_for_drag_min_distance)){var n=Math.abs(e.options.drag_min_distance/t.distance);i.detection.current.startEvent.center.pageX+=t.deltaX*n,i.detection.current.startEvent.center.pageY+=t.deltaY*n,t=i.detection.extendEventData(t)}(i.detection.current.lastEvent.drag_locked_to_axis||e.options.drag_lock_to_axis&&e.options.drag_lock_min_distance<=t.distance)&&(t.drag_locked_to_axis=!0);var r=i.detection.current.lastEvent.direction;t.drag_locked_to_axis&&r!==t.direction&&(t.direction=i.utils.isVertical(r)?t.deltaY<0?i.DIRECTION_UP:i.DIRECTION_DOWN:t.deltaX<0?i.DIRECTION_LEFT:i.DIRECTION_RIGHT),this.triggered||(e.trigger(this.name+"start",t),this.triggered=!0),e.trigger(this.name,t),e.trigger(this.name+t.direction,t),(e.options.drag_block_vertical&&i.utils.isVertical(t.direction)||e.options.drag_block_horizontal&&!i.utils.isVertical(t.direction))&&t.preventDefault();break;case i.EVENT_END:this.triggered&&e.trigger(this.name+"end",t),this.triggered=!1}}},i.gestures.Transform={name:"transform",index:45,defaults:{transform_min_scale:.01,transform_min_rotation:1,transform_always_block:!1},triggered:!1,handler:function(t,e){if(i.detection.current.name!=this.name&&this.triggered)return e.trigger(this.name+"end",t),this.triggered=!1,void 0;if(!(t.touches.length<2))switch(e.options.transform_always_block&&t.preventDefault(),t.eventType){case i.EVENT_START:this.triggered=!1;break;case i.EVENT_MOVE:var n=Math.abs(1-t.scale),r=Math.abs(t.rotation);if(n<e.options.transform_min_scale&&r<e.options.transform_min_rotation)return;i.detection.current.name=this.name,this.triggered||(e.trigger(this.name+"start",t),this.triggered=!0),e.trigger(this.name,t),r>e.options.transform_min_rotation&&e.trigger("rotate",t),n>e.options.transform_min_scale&&(e.trigger("pinch",t),e.trigger("pinch"+(t.scale<1?"in":"out"),t));break;case i.EVENT_END:this.triggered&&e.trigger(this.name+"end",t),this.triggered=!1}}},i.gestures.Touch={name:"touch",index:-1/0,defaults:{prevent_default:!1,prevent_mouseevents:!1},handler:function(t,e){return e.options.prevent_mouseevents&&t.pointerType==i.POINTER_MOUSE?(t.stopDetect(),void 0):(e.options.prevent_default&&t.preventDefault(),t.eventType==i.EVENT_START&&e.trigger(this.name,t),void 0)}},i.gestures.Release={name:"release",index:1/0,handler:function(t,e){t.eventType==i.EVENT_END&&e.trigger(this.name,t)}};var a=function(t,n){return n===e?t:(t.event.bindDom=function(t,i,r){n(t).on(i,function(t){var n=t.originalEvent||t;n.pageX===e&&(n.pageX=t.pageX,n.pageY=t.pageY),n.target||(n.target=t.target),n.which===e&&(n.which=n.button),n.preventDefault||(n.preventDefault=t.preventDefault),n.stopPropagation||(n.stopPropagation=t.stopPropagation),r.call(this,n)})},t.Instance.prototype.on=function(t,e){return n(this.element).on(t,e)},t.Instance.prototype.off=function(t,e){return n(this.element).off(t,e)},t.Instance.prototype.trigger=function(t,e){var i=n(this.element);return i.has(e.target).length&&(i=n(e.target)),i.trigger({type:t,gesture:e})},n.fn.hammer=function(e){return this.each(function(){var i=n(this),r=i.data("hammer");r?r&&e&&t.utils.extend(r.options,e):i.data("hammer",new t(this,e||{}))})},void 0)};"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(["jquery"],function(t){a(i,t)}):a(i,t.jQuery||t.Zepto)}(this),function(t){var e,n,i,r,o,s,a,l="Close",u="BeforeClose",c="AfterClose",h="BeforeAppend",p="MarkupParse",f="Open",d="Change",m="mfp",g="."+m,v="mfp-ready",y="mfp-removing",b="mfp-prevent-close",w=function(){},_=!!window.jQuery,x=t(window),S=function(t,n){e.ev.on(m+t+g,n)},k=function(e,n,i,r){var o=document.createElement("div");return o.className="mfp-"+e,i&&(o.innerHTML=i),r?n&&n.appendChild(o):(o=t(o),n&&o.appendTo(n)),o},C=function(n,i){e.ev.triggerHandler(m+n,i),e.st.callbacks&&(n=n.charAt(0).toLowerCase()+n.slice(1),e.st.callbacks[n]&&e.st.callbacks[n].apply(e,t.isArray(i)?i:[i]))},E=function(){(e.st.focus?e.content.find(e.st.focus).eq(0):e.wrap).trigger("focus")},T=function(n){return n===a&&e.currTemplate.closeBtn||(e.currTemplate.closeBtn=t(e.st.closeMarkup.replace("%title%",e.st.tClose)),a=n),e.currTemplate.closeBtn},M=function(){t.magnificPopup.instance||(e=new w,e.init(),t.magnificPopup.instance=e)},P=function(n){if(!t(n).hasClass(b)){var i=e.st.closeOnContentClick,r=e.st.closeOnBgClick;if(i&&r)return!0;if(!e.content||t(n).hasClass("mfp-close")||e.preloader&&n===e.preloader[0])return!0;if(n===e.content[0]||t.contains(e.content[0],n)){if(i)return!0}else if(r&&t.contains(document,n))return!0;return!1}},A=function(){var t=document.createElement("p").style,e=["ms","O","Moz","Webkit"];if(void 0!==t.transition)return!0;for(;e.length;)if(e.pop()+"Transition"in t)return!0;return!1};w.prototype={constructor:w,init:function(){var n=navigator.appVersion;e.isIE7=-1!==n.indexOf("MSIE 7."),e.isIE8=-1!==n.indexOf("MSIE 8."),e.isLowIE=e.isIE7||e.isIE8,e.isAndroid=/android/gi.test(n),e.isIOS=/iphone|ipad|ipod/gi.test(n),e.supportsTransition=A(),e.probablyMobile=e.isAndroid||e.isIOS||/(Opera Mini)|Kindle|webOS|BlackBerry|(Opera Mobi)|(Windows Phone)|IEMobile/i.test(navigator.userAgent),i=t(document.body),r=t(document),e.popupsCache={}},open:function(n){var i;if(n.isObj===!1){e.items=n.items.toArray(),e.index=0;var o,a=n.items;for(i=0;i<a.length;i++)if(o=a[i],o.parsed&&(o=o.el[0]),o===n.el[0]){e.index=i;break}}else e.items=t.isArray(n.items)?n.items:[n.items],e.index=n.index||0;if(e.isOpen)return e.updateItemHTML(),void 0;e.types=[],s="",e.ev=n.mainEl&&n.mainEl.length?n.mainEl.eq(0):r,n.key?(e.popupsCache[n.key]||(e.popupsCache[n.key]={}),e.currTemplate=e.popupsCache[n.key]):e.currTemplate={},e.st=t.extend(!0,{},t.magnificPopup.defaults,n),e.fixedContentPos="auto"===e.st.fixedContentPos?!e.probablyMobile:e.st.fixedContentPos,e.st.modal&&(e.st.closeOnContentClick=!1,e.st.closeOnBgClick=!1,e.st.showCloseBtn=!1,e.st.enableEscapeKey=!1),e.bgOverlay||(e.bgOverlay=k("bg").on("click"+g,function(){e.close()}),e.wrap=k("wrap").attr("tabindex",-1).on("click"+g,function(t){P(t.target)&&e.close()}),e.container=k("container",e.wrap)),e.contentContainer=k("content"),e.st.preloader&&(e.preloader=k("preloader",e.container,e.st.tLoading));var l=t.magnificPopup.modules;for(i=0;i<l.length;i++){var u=l[i];u=u.charAt(0).toUpperCase()+u.slice(1),e["init"+u].call(e)}C("BeforeOpen"),e.st.showCloseBtn&&(e.st.closeBtnInside?(S(p,function(t,e,n,i){n.close_replaceWith=T(i.type)}),s+=" mfp-close-btn-in"):e.wrap.append(T())),e.st.alignTop&&(s+=" mfp-align-top"),e.fixedContentPos?e.wrap.css({overflow:e.st.overflowY,overflowX:"hidden",overflowY:e.st.overflowY}):e.wrap.css({top:x.scrollTop(),position:"absolute"}),(e.st.fixedBgPos===!1||"auto"===e.st.fixedBgPos&&!e.fixedContentPos)&&e.bgOverlay.css({height:r.height(),position:"absolute"}),e.st.enableEscapeKey&&r.on("keyup"+g,function(t){27===t.keyCode&&e.close()}),x.on("resize"+g,function(){e.updateSize()}),e.st.closeOnContentClick||(s+=" mfp-auto-cursor"),s&&e.wrap.addClass(s);var c=e.wH=x.height(),h={};if(e.fixedContentPos&&e._hasScrollBar(c)){var d=e._getScrollbarSize();d&&(h.paddingRight=d)}e.fixedContentPos&&(e.isIE7?t("body, html").css("overflow","hidden"):h.overflow="hidden");var m=e.st.mainClass;e.isIE7&&(m+=" mfp-ie7"),m&&e._addClassToMFP(m),e.updateItemHTML(),C("BuildControls"),t("html").css(h),e.bgOverlay.add(e.wrap).prependTo(document.body),e._lastFocusedEl=document.activeElement,setTimeout(function(){e.content?(e._addClassToMFP(v),E()):e.bgOverlay.addClass(v),r.on("focusin"+g,function(n){return n.target===e.wrap[0]||t.contains(e.wrap[0],n.target)?void 0:(E(),!1)})},16),e.isOpen=!0,e.updateSize(c),C(f)},close:function(){e.isOpen&&(C(u),e.isOpen=!1,e.st.removalDelay&&!e.isLowIE&&e.supportsTransition?(e._addClassToMFP(y),setTimeout(function(){e._close()},e.st.removalDelay)):e._close())},_close:function(){C(l);var n=y+" "+v+" ";if(e.bgOverlay.detach(),e.wrap.detach(),e.container.empty(),e.st.mainClass&&(n+=e.st.mainClass+" "),e._removeClassFromMFP(n),e.fixedContentPos){var i={paddingRight:""};e.isIE7?t("body, html").css("overflow",""):i.overflow="",t("html").css(i)}r.off("keyup"+g+" focusin"+g),e.ev.off(g),e.wrap.attr("class","mfp-wrap").removeAttr("style"),e.bgOverlay.attr("class","mfp-bg"),e.container.attr("class","mfp-container"),!e.st.showCloseBtn||e.st.closeBtnInside&&e.currTemplate[e.currItem.type]!==!0||e.currTemplate.closeBtn&&e.currTemplate.closeBtn.detach(),e._lastFocusedEl&&t(e._lastFocusedEl).trigger("focus"),e.currItem=null,e.content=null,e.currTemplate=null,e.prevHeight=0,C(c)},updateSize:function(t){if(e.isIOS){var n=document.documentElement.clientWidth/window.innerWidth,i=window.innerHeight*n;e.wrap.css("height",i),e.wH=i}else e.wH=t||x.height();e.fixedContentPos||e.wrap.css("height",e.wH),C("Resize")},updateItemHTML:function(){var n=e.items[e.index];e.contentContainer.detach(),e.content&&e.content.detach(),n.parsed||(n=e.parseEl(e.index));var i=n.type;if(C("BeforeChange",[e.currItem?e.currItem.type:"",i]),e.currItem=n,!e.currTemplate[i]){var r=e.st[i]?e.st[i].markup:!1;C("FirstMarkupParse",r),e.currTemplate[i]=r?t(r):!0}o&&o!==n.type&&e.container.removeClass("mfp-"+o+"-holder");var s=e["get"+i.charAt(0).toUpperCase()+i.slice(1)](n,e.currTemplate[i]);e.appendContent(s,i),n.preloaded=!0,C(d,n),o=n.type,e.container.prepend(e.contentContainer),C("AfterChange")},appendContent:function(t,n){e.content=t,t?e.st.showCloseBtn&&e.st.closeBtnInside&&e.currTemplate[n]===!0?e.content.find(".mfp-close").length||e.content.append(T()):e.content=t:e.content="",C(h),e.container.addClass("mfp-"+n+"-holder"),e.contentContainer.append(e.content)},parseEl:function(n){var i=e.items[n],r=i.type;if(i=i.tagName?{el:t(i)}:{data:i,src:i.src},i.el){for(var o=e.types,s=0;s<o.length;s++)if(i.el.hasClass("mfp-"+o[s])){r=o[s];break}i.src=i.el.attr("data-mfp-src"),i.src||(i.src=i.el.attr("href"))}return i.type=r||e.st.type||"inline",i.index=n,i.parsed=!0,e.items[n]=i,C("ElementParse",i),e.items[n]},addGroup:function(t,n){var i=function(i){i.mfpEl=this,e._openClick(i,t,n)};n||(n={});var r="click.magnificPopup";n.mainEl=t,n.items?(n.isObj=!0,t.off(r).on(r,i)):(n.isObj=!1,n.delegate?t.off(r).on(r,n.delegate,i):(n.items=t,t.off(r).on(r,i)))},_openClick:function(n,i,r){var o=void 0!==r.midClick?r.midClick:t.magnificPopup.defaults.midClick;if(o||2!==n.which&&!n.ctrlKey&&!n.metaKey){var s=void 0!==r.disableOn?r.disableOn:t.magnificPopup.defaults.disableOn;if(s)if(t.isFunction(s)){if(!s.call(e))return!0}else if(x.width()<s)return!0;n.type&&(n.preventDefault(),e.isOpen&&n.stopPropagation()),r.el=t(n.mfpEl),r.delegate&&(r.items=i.find(r.delegate)),e.open(r)}},updateStatus:function(t,i){if(e.preloader){n!==t&&e.container.removeClass("mfp-s-"+n),i||"loading"!==t||(i=e.st.tLoading);var r={status:t,text:i};C("UpdateStatus",r),t=r.status,i=r.text,e.preloader.html(i),e.preloader.find("a").on("click",function(t){t.stopImmediatePropagation()}),e.container.addClass("mfp-s-"+t),n=t}},_addClassToMFP:function(t){e.bgOverlay.addClass(t),e.wrap.addClass(t)},_removeClassFromMFP:function(t){this.bgOverlay.removeClass(t),e.wrap.removeClass(t)},_hasScrollBar:function(t){return(e.isIE7?r.height():document.body.scrollHeight)>(t||x.height())},_parseMarkup:function(e,n,i){var r;i.data&&(n=t.extend(i.data,n)),C(p,[e,n,i]),t.each(n,function(t,n){if(void 0===n||n===!1)return!0;if(r=t.split("_"),r.length>1){var i=e.find(g+"-"+r[0]);if(i.length>0){var o=r[1];"replaceWith"===o?i[0]!==n[0]&&i.replaceWith(n):"img"===o?i.is("img")?i.attr("src",n):i.replaceWith('<img src="'+n+'" class="'+i.attr("class")+'" />'):i.attr(r[1],n)}}else e.find(g+"-"+t).html(n)})},_getScrollbarSize:function(){if(void 0===e.scrollbarSize){var t=document.createElement("div");t.id="mfp-sbm",t.style.cssText="width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;",document.body.appendChild(t),e.scrollbarSize=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return e.scrollbarSize}},t.magnificPopup={instance:null,proto:w.prototype,modules:[],open:function(t,e){return M(),t||(t={}),t.isObj=!0,t.index=e||0,this.instance.open(t)},close:function(){return t.magnificPopup.instance.close()},registerModule:function(e,n){n.options&&(t.magnificPopup.defaults[e]=n.options),t.extend(this.proto,n.proto),this.modules.push(e)},defaults:{disableOn:0,key:null,midClick:!1,mainClass:"",preloader:!0,focus:"",closeOnContentClick:!1,closeOnBgClick:!0,closeBtnInside:!0,showCloseBtn:!0,enableEscapeKey:!0,modal:!1,alignTop:!1,removalDelay:0,fixedContentPos:"auto",fixedBgPos:"auto",overflowY:"auto",closeMarkup:'<button title="%title%" type="button" class="mfp-close">&times;</button>',tClose:"Close (Esc)",tLoading:"Loading..."}},t.fn.magnificPopup=function(n){M();var i=t(this);if("string"==typeof n)if("open"===n){var r,o=_?i.data("magnificPopup"):i[0].magnificPopup,s=parseInt(arguments[1],10)||0;o.items?r=o.items[s]:(r=i,o.delegate&&(r=r.find(o.delegate)),r=r.eq(s)),e._openClick({mfpEl:r},i,o)}else e.isOpen&&e[n].apply(e,Array.prototype.slice.call(arguments,1));else _?i.data("magnificPopup",n):i[0].magnificPopup=n,e.addGroup(i,n);return i};var O,N,D,I="inline",L=function(){D&&(N.after(D.addClass(O)).detach(),D=null)};t.magnificPopup.registerModule(I,{options:{hiddenClass:"hide",markup:"",tNotFound:"Content not found"},proto:{initInline:function(){e.types.push(I),S(l+"."+I,function(){L()})},getInline:function(n,i){if(L(),n.src){var r=e.st.inline,o=t(n.src);if(o.length){var s=o[0].parentNode;s&&s.tagName&&(N||(O=r.hiddenClass,N=k(O),O="mfp-"+O),D=o.after(N).detach().removeClass(O)),e.updateStatus("ready")}else e.updateStatus("error",r.tNotFound),o=t("<div>");return n.inlineElement=o,o}return e.updateStatus("ready"),e._parseMarkup(i,{},n),i}}});var $,z="ajax",R=function(){$&&i.removeClass($)};t.magnificPopup.registerModule(z,{options:{settings:null,cursor:"mfp-ajax-cur",tError:'<a href="%url%">The content</a> could not be loaded.'},proto:{initAjax:function(){e.types.push(z),$=e.st.ajax.cursor,S(l+"."+z,function(){R(),e.req&&e.req.abort()})},getAjax:function(n){$&&i.addClass($),e.updateStatus("loading");var r=t.extend({url:n.src,success:function(i,r,o){var s={data:i,xhr:o};C("ParseAjax",s),e.appendContent(t(s.data),z),n.finished=!0,R(),E(),setTimeout(function(){e.wrap.addClass(v)},16),e.updateStatus("ready"),C("AjaxContentAdded")},error:function(){R(),n.finished=n.loadError=!0,e.updateStatus("error",e.st.ajax.tError.replace("%url%",n.src))}},e.st.ajax.settings);return e.req=t.ajax(r),""}}});var B,F=function(n){if(n.data&&void 0!==n.data.title)return n.data.title;var i=e.st.image.titleSrc;if(i){if(t.isFunction(i))return i.call(e,n);if(n.el)return n.el.attr(i)||""}return""};t.magnificPopup.registerModule("image",{options:{markup:'<div class="mfp-figure"><div class="mfp-close"></div><div class="mfp-img"></div><div class="mfp-bottom-bar"><div class="mfp-title"></div><div class="mfp-counter"></div></div></div>',cursor:"mfp-zoom-out-cur",titleSrc:"title",verticalFit:!0,tError:'<a href="%url%">The image</a> could not be loaded.'},proto:{initImage:function(){var t=e.st.image,n=".image";e.types.push("image"),S(f+n,function(){"image"===e.currItem.type&&t.cursor&&i.addClass(t.cursor)}),S(l+n,function(){t.cursor&&i.removeClass(t.cursor),x.off("resize"+g)}),S("Resize"+n,e.resizeImage),e.isLowIE&&S("AfterChange",e.resizeImage)},resizeImage:function(){var t=e.currItem;if(t&&t.img&&e.st.image.verticalFit){var n=0;e.isLowIE&&(n=parseInt(t.img.css("padding-top"),10)+parseInt(t.img.css("padding-bottom"),10)),t.img.css("max-height",e.wH-n)}},_onImageHasSize:function(t){t.img&&(t.hasSize=!0,B&&clearInterval(B),t.isCheckingImgSize=!1,C("ImageHasSize",t),t.imgHidden&&(e.content&&e.content.removeClass("mfp-loading"),t.imgHidden=!1))},findImageSize:function(t){var n=0,i=t.img[0],r=function(o){B&&clearInterval(B),B=setInterval(function(){return i.naturalWidth>0?(e._onImageHasSize(t),void 0):(n>200&&clearInterval(B),n++,3===n?r(10):40===n?r(50):100===n&&r(500),void 0)},o)};r(1)},getImage:function(n,i){var r=0,o=function(){n&&(n.img[0].complete?(n.img.off(".mfploader"),n===e.currItem&&(e._onImageHasSize(n),e.updateStatus("ready")),n.hasSize=!0,n.loaded=!0,C("ImageLoadComplete")):(r++,200>r?setTimeout(o,100):s()))},s=function(){n&&(n.img.off(".mfploader"),n===e.currItem&&(e._onImageHasSize(n),e.updateStatus("error",a.tError.replace("%url%",n.src))),n.hasSize=!0,n.loaded=!0,n.loadError=!0)},a=e.st.image,l=i.find(".mfp-img");if(l.length){var u=document.createElement("img");u.className="mfp-img",n.img=t(u).on("load.mfploader",o).on("error.mfploader",s),u.src=n.src,l.is("img")&&(n.img=n.img.clone()),n.img[0].naturalWidth>0&&(n.hasSize=!0)}return e._parseMarkup(i,{title:F(n),img_replaceWith:n.img},n),e.resizeImage(),n.hasSize?(B&&clearInterval(B),n.loadError?(i.addClass("mfp-loading"),e.updateStatus("error",a.tError.replace("%url%",n.src))):(i.removeClass("mfp-loading"),e.updateStatus("ready")),i):(e.updateStatus("loading"),n.loading=!0,n.hasSize||(n.imgHidden=!0,i.addClass("mfp-loading"),e.findImageSize(n)),i)}}});var V,j=function(){return void 0===V&&(V=void 0!==document.createElement("p").style.MozTransform),V};t.magnificPopup.registerModule("zoom",{options:{enabled:!1,easing:"ease-in-out",duration:300,opener:function(t){return t.is("img")?t:t.find("img")}},proto:{initZoom:function(){var t=e.st.zoom,n=".zoom";if(t.enabled&&e.supportsTransition){var i,r,o=t.duration,s=function(e){var n=e.clone().removeAttr("style").removeAttr("class").addClass("mfp-animated-image"),i="all "+t.duration/1e3+"s "+t.easing,r={position:"fixed",zIndex:9999,left:0,top:0,"-webkit-backface-visibility":"hidden"},o="transition";return r["-webkit-"+o]=r["-moz-"+o]=r["-o-"+o]=r[o]=i,n.css(r),n},a=function(){e.content.css("visibility","visible")};S("BuildControls"+n,function(){if(e._allowZoom()){if(clearTimeout(i),e.content.css("visibility","hidden"),image=e._getItemToZoom(),!image)return a(),void 0;r=s(image),r.css(e._getOffset()),e.wrap.append(r),i=setTimeout(function(){r.css(e._getOffset(!0)),i=setTimeout(function(){a(),setTimeout(function(){r.remove(),image=r=null,C("ZoomAnimationEnded")},16)},o)},16)}}),S(u+n,function(){if(e._allowZoom()){if(clearTimeout(i),e.st.removalDelay=o,!image){if(image=e._getItemToZoom(),!image)return;r=s(image)}r.css(e._getOffset(!0)),e.wrap.append(r),e.content.css("visibility","hidden"),setTimeout(function(){r.css(e._getOffset())},16)}}),S(l+n,function(){e._allowZoom()&&(a(),r&&r.remove())})}},_allowZoom:function(){return"image"===e.currItem.type},_getItemToZoom:function(){return e.currItem.hasSize?e.currItem.img:!1},_getOffset:function(n){var i;i=n?e.currItem.img:e.st.zoom.opener(e.currItem.el||e.currItem);var r=i.offset(),o=parseInt(i.css("padding-top"),10),s=parseInt(i.css("padding-bottom"),10);r.top-=t(window).scrollTop()-o;var a={width:i.width(),height:(_?i.innerHeight():i[0].offsetHeight)-s-o};return j()?a["-moz-transform"]=a.transform="translate("+r.left+"px,"+r.top+"px)":(a.left=r.left,a.top=r.top),a}}});var U="iframe",H="//about:blank",q=function(t){if(e.currTemplate[U]){var n=e.currTemplate[U].find("iframe");n.length&&(t||(n[0].src=H),e.isIE8&&n.css("display",t?"block":"none"))}};t.magnificPopup.registerModule(U,{options:{markup:'<div class="mfp-iframe-scaler"><div class="mfp-close"></div><iframe class="mfp-iframe" src="//about:blank" frameborder="0" allowfullscreen></iframe></div>',srcAction:"iframe_src",patterns:{youtube:{index:"youtube.com",id:"v=",src:"//www.youtube.com/embed/%id%?autoplay=1"},vimeo:{index:"vimeo.com/",id:"/",src:"//player.vimeo.com/video/%id%?autoplay=1"},gmaps:{index:"//maps.google.",src:"%id%&output=embed"}}},proto:{initIframe:function(){e.types.push(U),S("BeforeChange",function(t,e,n){e!==n&&(e===U?q():n===U&&q(!0))
}),S(l+"."+U,function(){q()})},getIframe:function(n,i){var r=n.src,o=e.st.iframe;t.each(o.patterns,function(){return r.indexOf(this.index)>-1?(this.id&&(r="string"==typeof this.id?r.substr(r.lastIndexOf(this.id)+this.id.length,r.length):this.id.call(this,r)),r=this.src.replace("%id%",r),!1):void 0});var s={};return o.srcAction&&(s[o.srcAction]=r),e._parseMarkup(i,s,n),e.updateStatus("ready"),i}}});var W=function(t){var n=e.items.length;return t>n-1?t-n:0>t?n+t:t},J=function(t,e,n){return t.replace("%curr%",e+1).replace("%total%",n)};t.magnificPopup.registerModule("gallery",{options:{enabled:!1,arrowMarkup:'<button title="%title%" type="button" class="mfp-arrow mfp-arrow-%dir%"></button>',preload:[0,2],navigateByImgClick:!0,arrows:!0,tPrev:"Previous (Left arrow key)",tNext:"Next (Right arrow key)",tCounter:"%curr% of %total%"},proto:{initGallery:function(){var n=e.st.gallery,i=".mfp-gallery",o=Boolean(t.fn.mfpFastClick);return e.direction=!0,n&&n.enabled?(s+=" mfp-gallery",S(f+i,function(){n.navigateByImgClick&&e.wrap.on("click"+i,".mfp-img",function(){return e.items.length>1?(e.next(),!1):void 0}),r.on("keydown"+i,function(t){37===t.keyCode?e.prev():39===t.keyCode&&e.next()})}),S("UpdateStatus"+i,function(t,n){n.text&&(n.text=J(n.text,e.currItem.index,e.items.length))}),S(p+i,function(t,i,r,o){var s=e.items.length;r.counter=s>1?J(n.tCounter,o.index,s):""}),S("BuildControls"+i,function(){if(e.items.length>1&&n.arrows&&!e.arrowLeft){var i=n.arrowMarkup,r=e.arrowLeft=t(i.replace("%title%",n.tPrev).replace("%dir%","left")).addClass(b),s=e.arrowRight=t(i.replace("%title%",n.tNext).replace("%dir%","right")).addClass(b),a=o?"mfpFastClick":"click";r[a](function(){e.prev()}),s[a](function(){e.next()}),e.isIE7&&(k("b",r[0],!1,!0),k("a",r[0],!1,!0),k("b",s[0],!1,!0),k("a",s[0],!1,!0)),e.container.append(r.add(s))}}),S(d+i,function(){e._preloadTimeout&&clearTimeout(e._preloadTimeout),e._preloadTimeout=setTimeout(function(){e.preloadNearbyImages(),e._preloadTimeout=null},16)}),S(l+i,function(){r.off(i),e.wrap.off("click"+i),e.arrowLeft&&o&&e.arrowLeft.add(e.arrowRight).destroyMfpFastClick(),e.arrowRight=e.arrowLeft=null}),void 0):!1},next:function(){e.direction=!0,e.index=W(e.index+1),e.updateItemHTML()},prev:function(){e.direction=!1,e.index=W(e.index-1),e.updateItemHTML()},goTo:function(t){e.direction=t>=e.index,e.index=t,e.updateItemHTML()},preloadNearbyImages:function(){var t,n=e.st.gallery.preload,i=Math.min(n[0],e.items.length),r=Math.min(n[1],e.items.length);for(t=1;t<=(e.direction?r:i);t++)e._preloadItem(e.index+t);for(t=1;t<=(e.direction?i:r);t++)e._preloadItem(e.index-t)},_preloadItem:function(n){if(n=W(n),!e.items[n].preloaded){var i=e.items[n];i.parsed||(i=e.parseEl(n)),C("LazyLoad",i),"image"===i.type&&(i.img=t('<img class="mfp-img" />').on("load.mfploader",function(){i.hasSize=!0}).on("error.mfploader",function(){i.hasSize=!0,i.loadError=!0,C("LazyLoadError",i)}).attr("src",i.src)),i.preloaded=!0}}}});var Y="retina";t.magnificPopup.registerModule(Y,{options:{replaceSrc:function(t){return t.src.replace(/\.\w+$/,function(t){return"@2x"+t})},ratio:1},proto:{initRetina:function(){if(window.devicePixelRatio>1){var t=e.st.retina,n=t.ratio;n=isNaN(n)?n():n,n>1&&(S("ImageHasSize."+Y,function(t,e){e.img.css({"max-width":e.img[0].naturalWidth/n,width:"100%"})}),S("ElementParse."+Y,function(e,i){i.src=t.replaceSrc(i,n)}))}}}}),function(){var e=1e3,n="ontouchstart"in window,i=function(){x.off("touchmove"+o+" touchend"+o)},r="mfpFastClick",o="."+r;t.fn.mfpFastClick=function(r){return t(this).each(function(){var s,a=t(this);if(n){var l,u,c,h,p,f;a.on("touchstart"+o,function(t){h=!1,f=1,p=t.originalEvent?t.originalEvent.touches[0]:t.touches[0],u=p.clientX,c=p.clientY,x.on("touchmove"+o,function(t){p=t.originalEvent?t.originalEvent.touches:t.touches,f=p.length,p=p[0],(Math.abs(p.clientX-u)>10||Math.abs(p.clientY-c)>10)&&(h=!0,i())}).on("touchend"+o,function(t){i(),h||f>1||(s=!0,t.preventDefault(),clearTimeout(l),l=setTimeout(function(){s=!1},e),r())})})}a.on("click"+o,function(){s||r()})})},t.fn.destroyMfpFastClick=function(){t(this).off("touchstart"+o+" click"+o),n&&x.off("touchmove"+o+" touchend"+o)}}()}(window.jQuery||window.Zepto),/*! Copyright (c) 2011 Brandon Aaron (http://brandonaaron.net)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Thanks to: http://adomas.org/javascript-mouse-wheel/ for some pointers.
 * Thanks to: Mathias Bank(http://www.mathias-bank.de) for a scope bug fix.
 * Thanks to: Seamus Leahy for adding deltaX and deltaY
 *
 * Version: 3.0.6
 * 
 * Requires: 1.2.2+
 */
function(t){function e(e){var n=e||window.event,i=[].slice.call(arguments,1),r=0,o=0,s=0;return e=t.event.fix(n),e.type="mousewheel",n.wheelDelta&&(r=n.wheelDelta/120),n.detail&&(r=-n.detail/3),s=r,void 0!==n.axis&&n.axis===n.HORIZONTAL_AXIS&&(s=0,o=-1*r),void 0!==n.wheelDeltaY&&(s=n.wheelDeltaY/120),void 0!==n.wheelDeltaX&&(o=-1*n.wheelDeltaX/120),i.unshift(e,r,o,s),(t.event.dispatch||t.event.handle).apply(this,i)}var n=["DOMMouseScroll","mousewheel"];if(t.event.fixHooks)for(var i=n.length;i;)t.event.fixHooks[n[--i]]=t.event.mouseHooks;t.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var t=n.length;t;)this.addEventListener(n[--t],e,!1);else this.onmousewheel=e},teardown:function(){if(this.removeEventListener)for(var t=n.length;t;)this.removeEventListener(n[--t],e,!1);else this.onmousewheel=null}},t.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})}(jQuery),/*!
  SerializeJSON jQuery plugin.
  https://github.com/marioizquierdo/jquery.serializeJSON
  version 1.0.1 (Aug 20, 2012)

  Copyright (c) 2012 Mario Izquierdo
  Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
  and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
*/
function(t){"use strict";t.fn.serializeJSON=function(){var e,n;return e={},n=this.serializeArray(),t.each(n,function(n,i){var r,o,s;r=i.name,o=i.value,s=t.map(r.split("["),function(t){var e;return e=t[t.length-1],"]"===e?t.substring(0,t.length-1):t}),""===s[0]&&s.shift(),t.deepSet(e,s,o)}),e};var e=function(t){return t===Object(t)};t.deepSet=function(n,i,r){if(!i||0===i.length)throw new Error("ArgumentError: keys param expected to be an array with least one key");var o,s,a,l,u,c;o=i[0],s=i[1],void 0!==s&&null!==s?(a=i.slice(1),""===o&&(u=n.length-1,c=n[n.length-1],e(c)&&!c[s]?o=u:(n.push({}),o=u+1)),void 0===n[o]&&(l=""!==s&&isNaN(parseInt(s,10))?{}:[],n[o]=l),t.deepSet(n[o],a,r)):""===o?n.push(r):n[o]=r}}(jQuery),/**
 * Timeago is a jQuery plugin that makes it easy to support automatically
 * updating fuzzy timestamps (e.g. "4 minutes ago" or "about 1 day ago").
 *
 * @name timeago
 * @version 1.1.0
 * @requires jQuery v1.2.3+
 * @author Ryan McGeary
 * @license MIT License - http://www.opensource.org/licenses/mit-license.php
 *
 * For usage and examples, visit:
 * http://timeago.yarp.com/
 *
 * Copyright (c) 2008-2013, Ryan McGeary (ryan -[at]- mcgeary [*dot*] org)
 */
function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){function e(){var e=n(this);return isNaN(e.datetime)||t(this).text(i(e.datetime)),this}function n(e){if(e=t(e),!e.data("timeago")){e.data("timeago",{datetime:o.datetime(e)});var n=t.trim(e.text());!(n.length>0)||o.isTime(e)&&e.attr("title")||e.attr("title",n)}return e.data("timeago")}function i(t){return o.inWords(r(t))}function r(t){return(new Date).getTime()-t.getTime()}t.timeago=function(e){return e instanceof Date?i(e):"string"==typeof e?i(t.timeago.parse(e)):"number"==typeof e?i(new Date(e)):i(t.timeago.datetime(e))};var o=t.timeago;t.extend(t.timeago,{settings:{refreshMillis:6e4,allowFuture:!1,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",wordSeparator:" ",numbers:[]}},inWords:function(e){function n(n,r){var o=t.isFunction(n)?n(r,e):n,s=i.numbers&&i.numbers[r]||r;return o.replace(/%d/i,s)}var i=this.settings.strings,r=i.prefixAgo,o=i.suffixAgo;this.settings.allowFuture&&0>e&&(r=i.prefixFromNow,o=i.suffixFromNow);var s=Math.abs(e)/1e3,a=s/60,l=a/60,u=l/24,c=u/365,h=45>s&&n(i.seconds,Math.round(s))||90>s&&n(i.minute,1)||45>a&&n(i.minutes,Math.round(a))||90>a&&n(i.hour,1)||24>l&&n(i.hours,Math.round(l))||42>l&&n(i.day,1)||30>u&&n(i.days,Math.round(u))||45>u&&n(i.month,1)||365>u&&n(i.months,Math.round(u/30))||1.5>c&&n(i.year,1)||n(i.years,Math.round(c)),p=i.wordSeparator||"";return void 0===i.wordSeparator&&(p=" "),t.trim([r,h,o].join(p))},parse:function(e){var n=t.trim(e);return n=n.replace(/\.\d+/,""),n=n.replace(/-/,"/").replace(/-/,"/"),n=n.replace(/T/," ").replace(/Z/," UTC"),n=n.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),new Date(n)},datetime:function(e){var n=o.isTime(e)?t(e).attr("datetime"):t(e).attr("title");return o.parse(n)},isTime:function(e){return"time"===t(e).get(0).tagName.toLowerCase()}});var s={init:function(){var n=t.proxy(e,this);n();var i=o.settings;i.refreshMillis>0&&setInterval(n,i.refreshMillis)},update:function(n){t(this).data("timeago",{datetime:o.parse(n)}),e.apply(this)}};t.fn.timeago=function(t,e){var n=t?s[t]:s.init;if(!n)throw new Error("Unknown function name '"+t+"' for timeago");return this.each(function(){n.call(this,e)}),this},document.createElement("abbr"),document.createElement("time")}),/*
 * LESS - Leaner CSS v1.4.1
 * http://lesscss.org
 *
 * Copyright (c) 2009-2013, Alexis Sellier
 * Licensed under the Apache 2.0 License.
 *
 * @licence
 */
function(t,e){function n(e){return t.less[e.split("/")[1]]}function i(){"development"===g.env?(g.optimization=0,g.watchTimer=setInterval(function(){g.watchMode&&o(function(t,e,n,i,r){t?m(t,i.href):e&&c(e.toCSS(g),i,r.lastModified)})},g.poll)):g.optimization=3}function r(){for(var t=document.getElementsByTagName("style"),e=0;e<t.length;e++)if(t[e].type.match(k)){var n=new g.tree.parseEnv(g);n.filename=document.location.href.replace(/#.*$/,""),new g.Parser(n).parse(t[e].innerHTML||"",function(n,i){if(n)return m(n,"inline");var r=i.toCSS(g),o=t[e];o.type="text/css",o.styleSheet?o.styleSheet.cssText=r:o.innerHTML=r})}}function o(t,e){for(var n=0;n<g.sheets.length;n++)l(g.sheets[n],t,e,g.sheets.length-(n+1))}function s(t,e){var n,i,r,o,s=a(t),l=a(e),u="";if(s.hostPart!==l.hostPart)return"";for(i=Math.max(l.directories.length,s.directories.length),n=0;i>n&&l.directories[n]===s.directories[n];n++);for(o=l.directories.slice(n),r=s.directories.slice(n),n=0;n<o.length-1;n++)u+="../";for(n=0;n<r.length-1;n++)u+=r[n]+"/";return u}function a(t,e){var n,i,r=/^((?:[a-z-]+:)?\/+?(?:[^\/\?#]*\/)|([\/\\]))?((?:[^\/\\\?#]*[\/\\])*)([^\/\\\?#]*)([#\?].*)?$/,o=t.match(r),s={},a=[];if(!o)throw new Error("Could not parse sheet href - '"+t+"'");if(!o[1]||o[2]){if(i=e.match(r),!i)throw new Error("Could not parse page url - '"+e+"'");o[1]=o[1]||i[1]||"",o[2]||(o[3]=i[3]+o[3])}if(o[3]){for(a=o[3].replace("\\","/").split("/"),n=0;n<a.length;n++)"."===a[n]&&(a.splice(n,1),n-=1);for(n=0;n<a.length;n++)".."===a[n]&&n>0&&(a.splice(n-1,2),n-=2)}return s.hostPart=o[1],s.directories=a,s.path=o[1]+a.join("/"),s.fileUrl=s.path+(o[4]||""),s.url=s.fileUrl+(o[5]||""),s}function l(e,n,i,r){var o,l=a(e.href,t.location.href),p=l.url,d=_&&_.getItem(p),m=_&&_.getItem(p+":timestamp"),v={css:d,timestamp:m},y={relativeUrls:g.relativeUrls,currentDirectory:l.path,filename:p};e instanceof g.tree.parseEnv?(o=new g.tree.parseEnv(e),y.entryPath=o.currentFileInfo.entryPath,y.rootpath=o.currentFileInfo.rootpath,y.rootFilename=o.currentFileInfo.rootFilename):(o=new g.tree.parseEnv(g),o.mime=e.type,y.entryPath=l.path,y.rootpath=g.rootpath||l.path,y.rootFilename=p),o.relativeUrls&&(y.rootpath=g.rootpath?a(g.rootpath+s(l.path,y.entryPath)).path:l.path),h(p,e.type,function(t,s){if(E+=t.replace(/@import .+?;/gi,""),!i&&v&&s&&new Date(s).valueOf()===new Date(v.timestamp).valueOf())c(v.css,e),n(null,null,t,e,{local:!0,remaining:r},p);else try{o.contents[p]=t,o.paths=[l.path],o.currentFileInfo=y,new g.Parser(o).parse(t,function(i,a){if(i)return n(i,null,null,e);try{n(i,a,t,e,{local:!1,lastModified:s,remaining:r},p),o.currentFileInfo.rootFilename===p&&f(document.getElementById("less-error-message:"+u(p)))}catch(i){n(i,null,null,e)}})}catch(a){n(a,null,null,e)}},function(t,i){n({type:"File",message:"'"+i+"' wasn't found ("+t+")"},null,null,e)})}function u(t){return t.replace(/^[a-z-]+:\/+?[^\/]+/,"").replace(/^\//,"").replace(/\.[a-zA-Z]+$/,"").replace(/[^\.\w-]+/g,"-").replace(/\./g,":")}function c(t,e,n){var i=e.href||"",r="less:"+(e.title||u(i)),o=document.getElementById(r),s=!1,a=document.createElement("style");if(a.setAttribute("type","text/css"),e.media&&a.setAttribute("media",e.media),a.id=r,a.styleSheet)try{a.styleSheet.cssText=t}catch(l){throw new Error("Couldn't reassign styleSheet.cssText.")}else a.appendChild(document.createTextNode(t)),s=null!==o&&o.childNodes.length>0&&a.childNodes.length>0&&o.firstChild.nodeValue===a.firstChild.nodeValue;var c=document.getElementsByTagName("head")[0];if(null==o||s===!1){var h=e&&e.nextSibling||null;(h||document.getElementsByTagName("head")[0]).parentNode.insertBefore(a,h)}if(o&&s===!1&&c.removeChild(o),n&&_){d("saving "+i+" to cache.");try{_.setItem(i,t),_.setItem(i+":timestamp",n)}catch(l){d("failed to save")}}}function h(t,e,n,i){function r(e,n,i){e.status>=200&&e.status<300?n(e.responseText,e.getResponseHeader("Last-Modified")):"function"==typeof i&&i(e.status,t)}var o=p(),s=y?g.fileAsync:g.async;"function"==typeof o.overrideMimeType&&o.overrideMimeType("text/css"),o.open("GET",t,s),o.setRequestHeader("Accept",e||"text/x-less, text/css; q=0.9, */*; q=0.5"),o.send(null),y&&!g.fileAsync?0===o.status||o.status>=200&&o.status<300?n(o.responseText):i(o.status,t):s?o.onreadystatechange=function(){4==o.readyState&&r(o,n,i)}:r(o,n,i)}function p(){if(t.XMLHttpRequest)return new XMLHttpRequest;try{return new ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(e){return d("browser doesn't support AJAX."),null}}function f(t){return t&&t.parentNode.removeChild(t)}function d(t){"development"==g.env&&"undefined"!=typeof console&&console.log("less: "+t)}function m(t,n){var i,r,o="less-error-message:"+u(n||""),s='<li><label>{line}</label><pre class="{class}">{content}</pre></li>',a=document.createElement("div"),l=[],h=t.filename||n,p=h.match(/([^\/]+(\?.*)?)$/)[1];a.id=o,a.className="less-error-message",r="<h3>"+(t.type||"Syntax")+"Error: "+(t.message||"There is an error in your .less file")+"</h3>"+'<p>in <a href="'+h+'">'+p+"</a> ";var f=function(t,n,i){t.extract[n]!=e&&l.push(s.replace(/\{line\}/,(parseInt(t.line)||0)+(n-1)).replace(/\{class\}/,i).replace(/\{content\}/,t.extract[n]))};t.extract?(f(t,0,""),f(t,1,"line"),f(t,2,""),r+="on line "+t.line+", column "+(t.column+1)+":</p>"+"<ul>"+l.join("")+"</ul>"):t.stack&&(r+="<br/>"+t.stack.split("\n").slice(1).join("<br/>")),a.innerHTML=r,c([".less-error-message ul, .less-error-message li {","list-style-type: none;","margin-right: 15px;","padding: 4px 0;","margin: 0;","}",".less-error-message label {","font-size: 12px;","margin-right: 15px;","padding: 4px 0;","color: #cc7777;","}",".less-error-message pre {","color: #dd6666;","padding: 4px 0;","margin: 0;","display: inline-block;","}",".less-error-message pre.line {","color: #ff0000;","}",".less-error-message h3 {","font-size: 20px;","font-weight: bold;","padding: 15px 0 5px 0;","margin: 0;","}",".less-error-message a {","color: #10a","}",".less-error-message .error {","color: red;","font-weight: bold;","padding-bottom: 2px;","border-bottom: 1px dashed red;","}"].join("\n"),{title:"error-message"}),a.style.cssText=["font-family: Arial, sans-serif","border: 1px solid #e00","background-color: #eee","border-radius: 5px","-webkit-border-radius: 5px","-moz-border-radius: 5px","color: #e00","padding: 15px","margin-bottom: 15px"].join(";"),"development"==g.env&&(i=setInterval(function(){document.body&&(document.getElementById(o)?document.body.replaceChild(a,document.getElementById(o)):document.body.insertBefore(a,document.body.firstChild),clearInterval(i))},10))}var g,v;"object"==typeof environment&&"[object Environment]"==={}.toString.call(environment)?(g="undefined"==typeof t?{}:t.less={},v=g.tree={},g.mode="rhino"):"undefined"==typeof t?(g=exports,v=n("./tree"),g.mode="node"):("undefined"==typeof t.less&&(t.less={}),g=t.less,v=t.less.tree={},g.mode="browser"),g.Parser=function(t){function e(){w=S[b],_=y,k=y}function i(){S[b]=w,y=_,k=y}function r(){y>k&&(S[b]=S[b].slice(y-k),k=y)}function o(t){var e=t.charCodeAt(0);return 32===e||10===e||9===e}function s(t){var e,n;if(t instanceof Function)return t.call(C.parsers);if("string"==typeof t)e=m.charAt(y)===t?t:null,n=1,r();else{if(r(),!(e=t.exec(S[b])))return null;n=e[0].length}return e?(a(n),"string"==typeof e?e:1===e.length?e[0]:e):void 0}function a(t){for(var e=y,n=b,i=y+S[b].length,r=y+=t;i>y&&o(m.charAt(y));)y++;return S[b]=S[b].slice(t+(y-r)),k=y,0===S[b].length&&b<S.length-1&&b++,e!==y||n!==b}function l(t,e){var n=s(t);return n?n:(u(e||("string"==typeof t?"expected '"+t+"' got '"+m.charAt(y)+"'":"unexpected token")),void 0)}function u(t,e){var n=new Error(t);throw n.index=y,n.type=e||"Syntax",n}function c(t){return"string"==typeof t?m.charAt(y)===t:t.test(S[b])?!0:!1}function h(t,e){return t.filename&&e.currentFileInfo.filename&&t.filename!==e.currentFileInfo.filename?C.imports.contents[t.filename]:m}function p(t,e){for(var n=t,i=-1;n>=0&&"\n"!==e.charAt(n);n--)i++;return{line:"number"==typeof t?(e.slice(0,t).match(/\n/g)||"").length:null,column:i}}function f(t,e,i){var r=i.currentFileInfo.filename;return"browser"!==g.mode&&"rhino"!==g.mode&&(r=n("path").resolve(r)),{lineNumber:p(t,e).line+1,fileName:r}}function d(t,e){var n=h(t,e),i=p(t.index,n),r=i.line,o=i.column,s=n.split("\n");this.type=t.type||"Syntax",this.message=t.message,this.filename=t.filename||e.currentFileInfo.filename,this.index=t.index,this.line="number"==typeof r?r+1:null,this.callLine=t.call&&p(t.call,n).line+1,this.callExtract=s[p(t.call,n).line],this.stack=t.stack,this.column=o,this.extract=[s[r-1],s[r],s[r+1]]}var m,y,b,w,_,x,S,k,C;t instanceof v.parseEnv||(t=new v.parseEnv(t));var E=this.imports={paths:t.paths||[],queue:[],files:t.files,contents:t.contents,mime:t.mime,error:null,push:function(e,n,i){var r=this;this.queue.push(e),g.Parser.importer(e,n,function(t,n,o){r.queue.splice(r.queue.indexOf(e),1);var s=o in r.files;r.files[o]=n,t&&!r.error&&(r.error=t),i(t,n,s)},t)}};return d.prototype=new Error,d.prototype.constructor=d,this.env=t=t||{},this.optimization="optimization"in this.env?this.env.optimization:1,C={imports:E,parse:function(e,i){var r,o,a,l=null;if(y=b=k=x=0,m=e.replace(/\r\n/g,"\n"),m=m.replace(/^\uFEFF/,""),S=function(e){for(var n,i,r,o,s=0,a=/(?:@\{[\w-]+\}|[^"'`\{\}\/\(\)\\])+/g,u=/\/\*(?:[^*]|\*+[^\/*])*\*+\/|\/\/.*/g,c=/"((?:[^"\\\r\n]|\\.)*)"|'((?:[^'\\\r\n]|\\.)*)'|`((?:[^`]|\\.)*)`/g,h=0,p=e[0],f=0;f<m.length;)if(a.lastIndex=f,(n=a.exec(m))&&n.index===f&&(f+=n[0].length,p.push(n[0])),r=m.charAt(f),u.lastIndex=c.lastIndex=f,(n=c.exec(m))&&n.index===f)f+=n[0].length,p.push(n[0]);else if(i||"/"!==r||(o=m.charAt(f+1),"/"!==o&&"*"!==o||!(n=u.exec(m))||n.index!==f)){switch(r){case"{":if(!i){h++,p.push(r);break}case"}":if(!i){h--,p.push(r),e[++s]=p=[];break}case"(":if(!i){i=!0,p.push(r);break}case")":if(i){i=!1,p.push(r);break}default:p.push(r)}f++}else f+=n[0].length,p.push(n[0]);return 0!=h&&(l=new d({index:f-1,type:"Parse",message:h>0?"missing closing `}`":"missing opening `{`",filename:t.currentFileInfo.filename},t)),e.map(function(t){return t.join("")})}([[]]),l)return i(new d(l,t));try{r=new v.Ruleset([],s(this.parsers.primary)),r.root=!0,r.firstRoot=!0}catch(u){return i(new d(u,t))}if(r.toCSS=function(e){return function(i,r){i=i||{};var o=new v.evalEnv(i);"object"!=typeof r||Array.isArray(r)||(r=Object.keys(r).map(function(t){var e=r[t];return e instanceof v.Value||(e instanceof v.Expression||(e=new v.Expression([e])),e=new v.Value([e])),new v.Rule("@"+t,e,!1,0)}),o.frames=[new v.Ruleset(null,r)]);try{var s=e.call(this,o);(new v.joinSelectorVisitor).run(s),(new v.processExtendsVisitor).run(s);var a=s.toCSS({compress:Boolean(i.compress),dumpLineNumbers:t.dumpLineNumbers,strictUnits:Boolean(i.strictUnits)})}catch(l){throw new d(l,t)}return i.yuicompress&&"node"===g.mode?n("ycssmin").cssmin(a,i.maxLineLen):i.compress?a.replace(/(\s)+/g,"$1"):a}}(r.eval),y<m.length-1){y=x,a=m.split("\n"),o=(m.slice(0,y).match(/\n/g)||"").length+1;for(var c=y,h=-1;c>=0&&"\n"!==m.charAt(c);c--)h++;l={type:"Parse",message:"Unrecognised input",index:y,filename:t.currentFileInfo.filename,line:o,column:h,extract:[a[o-2],a[o-1],a[o]]}}var p=function(e){e=l||e||C.imports.error,e?(e instanceof d||(e=new d(e,t)),i(e)):i(null,r)};t.processImports!==!1?new v.importVisitor(this.imports,p).run(r):p()},parsers:{primary:function(){for(var t,e=[];(t=s(this.extendRule)||s(this.mixin.definition)||s(this.rule)||s(this.ruleset)||s(this.mixin.call)||s(this.comment)||s(this.directive))||s(/^[\s\n]+/)||s(/^;+/);)t&&e.push(t);return e},comment:function(){var t;if("/"===m.charAt(y))return"/"===m.charAt(y+1)?new v.Comment(s(/^\/\/.*/),!0):(t=s(/^\/\*(?:[^*]|\*+[^\/*])*\*+\/\n?/))?new v.Comment(t):void 0},entities:{quoted:function(){var e,n,i=y,r=y;return"~"===m.charAt(i)&&(i++,n=!0),'"'===m.charAt(i)||"'"===m.charAt(i)?(n&&s("~"),(e=s(/^"((?:[^"\\\r\n]|\\.)*)"|'((?:[^'\\\r\n]|\\.)*)'/))?new v.Quoted(e[0],e[1]||e[2],n,r,t.currentFileInfo):void 0):void 0},keyword:function(){var t;return(t=s(/^[_A-Za-z-][_A-Za-z0-9-]*/))?v.colors.hasOwnProperty(t)?new v.Color(v.colors[t].slice(1)):new v.Keyword(t):void 0},call:function(){var e,n,i,r,o=y;if(e=/^([\w-]+|%|progid:[\w\.]+)\(/.exec(S[b])){if(e=e[1],n=e.toLowerCase(),"url"===n)return null;if(y+=e.length,"alpha"===n&&(r=s(this.alpha),"undefined"!=typeof r))return r;if(s("("),i=s(this.entities.arguments),s(")"))return e?new v.Call(e,i,o,t.currentFileInfo):void 0}},arguments:function(){for(var t,e=[];(t=s(this.entities.assignment)||s(this.expression))&&(e.push(t),s(",")););return e},literal:function(){return s(this.entities.dimension)||s(this.entities.color)||s(this.entities.quoted)||s(this.entities.unicodeDescriptor)},assignment:function(){var t,e;return(t=s(/^\w+(?=\s?=)/i))&&s("=")&&(e=s(this.entity))?new v.Assignment(t,e):void 0},url:function(){var e;if("u"===m.charAt(y)&&s(/^url\(/))return e=s(this.entities.quoted)||s(this.entities.variable)||s(/^(?:(?:\\[\(\)'"])|[^\(\)'"])+/)||"",l(")"),new v.URL(null!=e.value||e instanceof v.Variable?e:new v.Anonymous(e),t.currentFileInfo)},variable:function(){var e,n=y;return"@"===m.charAt(y)&&(e=s(/^@@?[\w-]+/))?new v.Variable(e,n,t.currentFileInfo):void 0},variableCurly:function(){var e,n=y;return"@"===m.charAt(y)&&(e=s(/^@\{([\w-]+)\}/))?new v.Variable("@"+e[1],n,t.currentFileInfo):void 0},color:function(){var t;return"#"===m.charAt(y)&&(t=s(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})/))?new v.Color(t[1]):void 0},dimension:function(){var t,e=m.charCodeAt(y);if(!(e>57||43>e||47===e||44==e))return(t=s(/^([+-]?\d*\.?\d+)(%|[a-z]+)?/))?new v.Dimension(t[1],t[2]):void 0},unicodeDescriptor:function(){var t;return(t=s(/^U\+[0-9a-fA-F?]+(\-[0-9a-fA-F?]+)?/))?new v.UnicodeDescriptor(t[0]):void 0},javascript:function(){var t,e,n=y;return"~"===m.charAt(n)&&(n++,e=!0),"`"===m.charAt(n)?(e&&s("~"),(t=s(/^`([^`]*)`/))?new v.JavaScript(t[1],y,e):void 0):void 0}},variable:function(){var t;return"@"===m.charAt(y)&&(t=s(/^(@[\w-]+)\s*:/))?t[1]:void 0},extend:function(t){var e,n,i,r=y,o=[];if(s(t?/^&:extend\(/:/^:extend\(/)){do{for(i=null,e=[];;){if(i=s(/^(all)(?=\s*(\)|,))/))break;if(n=s(this.element),!n)break;e.push(n)}i=i&&i[1],o.push(new v.Extend(new v.Selector(e),i,r))}while(s(","));return l(/^\)/),t&&l(/^;/),o}},extendRule:function(){return this.extend(!0)},mixin:{call:function(){var n,r,o,a=[],u=y,h=m.charAt(y),p=!1;if("."===h||"#"===h){for(e();n=s(/^[#.](?:[\w-]|\\(?:[A-Fa-f0-9]{1,6} ?|[^A-Fa-f0-9]))+/);)a.push(new v.Element(r,n,y)),r=s(">");return s("(")&&(o=this.mixin.args.call(this,!0).args,l(")")),o=o||[],s(this.important)&&(p=!0),a.length>0&&(s(";")||c("}"))?new v.mixin.Call(a,o,u,t.currentFileInfo,p):(i(),void 0)}},args:function(t){for(var e,n,i,r,o,a,c=[],h=[],p=[],f={args:null,variadic:!1};;){if(t)a=s(this.expression);else{if(s(this.comment),"."===m.charAt(y)&&s(/^\.{3}/)){f.variadic=!0,s(";")&&!e&&(e=!0),(e?h:p).push({variadic:!0});break}a=s(this.entities.variable)||s(this.entities.literal)||s(this.entities.keyword)}if(!a)break;r=null,a.throwAwayComments&&a.throwAwayComments(),o=a;var d=null;if(t){if(1==a.value.length)var d=a.value[0]}else d=a;if(d&&d instanceof v.Variable)if(s(":"))c.length>0&&(e&&u("Cannot mix ; and , as delimiter types"),n=!0),o=l(this.expression),r=i=d.name;else{if(!t&&s(/^\.{3}/)){f.variadic=!0,s(";")&&!e&&(e=!0),(e?h:p).push({name:a.name,variadic:!0});break}t||(i=r=d.name,o=null)}o&&c.push(o),p.push({name:r,value:o}),s(",")||(s(";")||e)&&(n&&u("Cannot mix ; and , as delimiter types"),e=!0,c.length>1&&(o=new v.Value(c)),h.push({name:i,value:o}),i=null,c=[],n=!1)}return f.args=e?h:p,f},definition:function(){var t,n,r,o,a=[],u=!1;if(!("."!==m.charAt(y)&&"#"!==m.charAt(y)||c(/^[^{]*\}/))&&(e(),n=s(/^([#.](?:[\w-]|\\(?:[A-Fa-f0-9]{1,6} ?|[^A-Fa-f0-9]))+)\s*\(/))){t=n[1];var h=this.mixin.args.call(this,!1);if(a=h.args,u=h.variadic,s(")")||(x=y,i()),s(this.comment),s(/^when/)&&(o=l(this.conditions,"expected condition")),r=s(this.block))return new v.mixin.Definition(t,a,r,o,u);i()}}},entity:function(){return s(this.entities.literal)||s(this.entities.variable)||s(this.entities.url)||s(this.entities.call)||s(this.entities.keyword)||s(this.entities.javascript)||s(this.comment)},end:function(){return s(";")||c("}")},alpha:function(){var t;if(s(/^\(opacity=/i))return(t=s(/^\d+/)||s(this.entities.variable))?(l(")"),new v.Alpha(t)):void 0},element:function(){var t,e,n;return e=s(this.combinator),t=s(/^(?:\d+\.\d+|\d+)%/)||s(/^(?:[.#]?|:*)(?:[\w-]|[^\x00-\x9f]|\\(?:[A-Fa-f0-9]{1,6} ?|[^A-Fa-f0-9]))+/)||s("*")||s("&")||s(this.attribute)||s(/^\([^()@]+\)/)||s(/^[\.#](?=@)/)||s(this.entities.variableCurly),t||s("(")&&(n=s(this.selector))&&s(")")&&(t=new v.Paren(n)),t?new v.Element(e,t,y):void 0},combinator:function(){var t=m.charAt(y);if(">"===t||"+"===t||"~"===t||"|"===t){for(y++;m.charAt(y).match(/\s/);)y++;return new v.Combinator(t)}return m.charAt(y-1).match(/\s/)?new v.Combinator(" "):new v.Combinator(null)},selector:function(){for(var t,e,n,i=[],r=[];((n=s(this.extend))||(t=s(this.element)))&&(n?r.push.apply(r,n):(r.length&&u("Extend can only be used at the end of selector"),e=m.charAt(y),i.push(t),t=null),"{"!==e&&"}"!==e&&";"!==e&&","!==e&&")"!==e););return i.length>0?new v.Selector(i,r):(r.length&&u("Extend must be used to extend a selector, it cannot be used on its own"),void 0)},attribute:function(){var t,e,n;if(s("["))return(t=s(this.entities.variableCurly)||s(this.entities.quoted))||(t=l(/^(?:[_A-Za-z0-9-\*]*\|)?(?:[_A-Za-z0-9-]|\\.)+/)),(n=s(/^[|~*$^<>]?=/)||(n=s(/^[<>]/)))&&(e=s(this.entities.quoted)||s(/^[\w-]+/)||s(this.entities.variableCurly)),l("]"),new v.Attribute(t,n,e)},block:function(){var t;return s("{")&&(t=s(this.primary))&&s("}")?t:void 0},ruleset:function(){var n,r,o,a=[];for(e(),t.dumpLineNumbers&&(o=f(y,m,t));(n=s(this.selector))&&(a.push(n),s(this.comment),s(","));)s(this.comment);if(a.length>0&&(r=s(this.block))){var l=new v.Ruleset(a,r,t.strictImports);return t.dumpLineNumbers&&(l.debugInfo=o),l}x=y,i()},rule:function(n){var r,o,a,l=m.charAt(y);if(e(),"."!==l&&"#"!==l&&"&"!==l&&(r=s(this.variable)||s(this.property))){if(o=n||!t.compress&&"@"!==r.charAt(0)?s(this.anonymousValue)||s(this.value):s(this.value)||s(this.anonymousValue),a=s(this.important),o&&s(this.end))return new v.Rule(r,o,a,_,t.currentFileInfo);if(x=y,i(),o&&!n)return this.rule(!0)}},anonymousValue:function(){var t;return(t=/^([^@+\/'"*`(;{}-]*);/.exec(S[b]))?(y+=t[0].length-1,new v.Anonymous(t[1])):void 0},"import":function(){var n,r,o=y;e();var a=s(/^@import?\s+/),l=(a?s(this.importOptions):null)||{};return a&&(n=s(this.entities.quoted)||s(this.entities.url))&&(r=s(this.mediaFeatures),s(";"))?(r=r&&new v.Value(r),new v.Import(n,r,l,o,t.currentFileInfo)):(i(),void 0)},importOptions:function(){var t,e,n,i={};if(!s("("))return null;do if(t=s(this.importOption)){switch(e=t,n=!0,e){case"css":e="less",n=!1;break;case"once":e="multiple",n=!1}if(i[e]=n,!s(","))break}while(t);return l(")"),i},importOption:function(){var t=s(/^(less|css|multiple|once)/);return t?t[1]:void 0},mediaFeature:function(){var e,n,i=[];do if(e=s(this.entities.keyword))i.push(e);else if(s("(")){if(n=s(this.property),e=s(this.value),!s(")"))return null;if(n&&e)i.push(new v.Paren(new v.Rule(n,e,null,y,t.currentFileInfo,!0)));else{if(!e)return null;i.push(new v.Paren(e))}}while(e);return i.length>0?new v.Expression(i):void 0},mediaFeatures:function(){var t,e=[];do if(t=s(this.mediaFeature)){if(e.push(t),!s(","))break}else if((t=s(this.entities.variable))&&(e.push(t),!s(",")))break;while(t);return e.length>0?e:null},media:function(){var e,n,i,r;return t.dumpLineNumbers&&(r=f(y,m,t)),s(/^@media/)&&(e=s(this.mediaFeatures),n=s(this.block))?(i=new v.Media(n,e),t.dumpLineNumbers&&(i.debugInfo=r),i):void 0},directive:function(){var n,r,o,a,l,u,c;if("@"===m.charAt(y)){if(r=s(this["import"])||s(this.media))return r;if(e(),n=s(/^@[a-z-]+/)){switch(a=n,"-"==n.charAt(1)&&n.indexOf("-",2)>0&&(a="@"+n.slice(n.indexOf("-",2)+1)),a){case"@font-face":l=!0;break;case"@viewport":case"@top-left":case"@top-left-corner":case"@top-center":case"@top-right":case"@top-right-corner":case"@bottom-left":case"@bottom-left-corner":case"@bottom-center":case"@bottom-right":case"@bottom-right-corner":case"@left-top":case"@left-middle":case"@left-bottom":case"@right-top":case"@right-middle":case"@right-bottom":l=!0;break;case"@page":case"@document":case"@supports":case"@keyframes":l=!0,u=!0;break;case"@namespace":c=!0}if(u&&(n+=" "+(s(/^[^{]+/)||"").trim()),l){if(o=s(this.block))return new v.Directive(n,o)}else if((r=c?s(this.expression):s(this.entity))&&s(";")){var h=new v.Directive(n,r);return t.dumpLineNumbers&&(h.debugInfo=f(y,m,t)),h}i()}}},value:function(){for(var t,e=[];(t=s(this.expression))&&(e.push(t),s(",")););return e.length>0?new v.Value(e):void 0},important:function(){return"!"===m.charAt(y)?s(/^! *important/):void 0},sub:function(){var t,e;return s("(")&&(t=s(this.addition))?(e=new v.Expression([t]),l(")"),e.parens=!0,e):void 0},multiplication:function(){var t,e,n,i,r;if(t=s(this.operand)){for(r=o(m.charAt(y-1));!c(/^\/[*\/]/)&&(n=s("/")||s("*"))&&(e=s(this.operand));)t.parensInOp=!0,e.parensInOp=!0,i=new v.Operation(n,[i||t,e],r),r=o(m.charAt(y-1));return i||t}},addition:function(){var t,e,n,i,r;if(t=s(this.multiplication)){for(r=o(m.charAt(y-1));(n=s(/^[-+]\s+/)||!r&&(s("+")||s("-")))&&(e=s(this.multiplication));)t.parensInOp=!0,e.parensInOp=!0,i=new v.Operation(n,[i||t,e],r),r=o(m.charAt(y-1));return i||t}},conditions:function(){var t,e,n,i=y;if(t=s(this.condition)){for(;s(",")&&(e=s(this.condition));)n=new v.Condition("or",n||t,e,i);return n||t}},condition:function(){var t,e,n,i,r=y,o=!1;return s(/^not/)&&(o=!0),l("("),(t=s(this.addition)||s(this.entities.keyword)||s(this.entities.quoted))?((i=s(/^(?:>=|=<|[<=>])/))?(e=s(this.addition)||s(this.entities.keyword)||s(this.entities.quoted))?n=new v.Condition(i,t,e,r,o):u("expected expression"):n=new v.Condition("=",t,new v.Keyword("true"),r,o),l(")"),s(/^and/)?new v.Condition("and",n,s(this.condition)):n):void 0},operand:function(){var t,e=m.charAt(y+1);"-"!==m.charAt(y)||"@"!==e&&"("!==e||(t=s("-"));var n=s(this.sub)||s(this.entities.dimension)||s(this.entities.color)||s(this.entities.variable)||s(this.entities.call);return t&&(n.parensInOp=!0,n=new v.Negative(n)),n},expression:function(){for(var t,e,n=[];t=s(this.addition)||s(this.entity);)n.push(t),!c(/^\/[\/*]/)&&(e=s("/"))&&n.push(new v.Anonymous(e));return n.length>0?new v.Expression(n):void 0},property:function(){var t;return(t=s(/^(\*?-?[_a-z0-9-]+)\s*:/))?t[1]:void 0}}}},("browser"===g.mode||"rhino"===g.mode)&&(g.Parser.importer=function(t,e,n,i){!/^([a-z-]+:)?\//.test(t)&&e.currentDirectory&&(t=e.currentDirectory+t);var r=i.toSheet(t);r.processImports=!1,r.currentFileInfo=e,l(r,function(t,e,i,r,o,s){n.call(null,t,e,s)},!0)}),function(i){function r(t){return i.functions.hsla(t.h,t.s,t.l,t.a)}function o(t,e){return t instanceof i.Dimension&&t.unit.is("%")?parseFloat(t.value*e/100):s(t)}function s(t){if(t instanceof i.Dimension)return parseFloat(t.unit.is("%")?t.value/100:t.value);if("number"==typeof t)return t;throw{error:"RuntimeError",message:"color functions take numbers as parameters"}}function a(t){return Math.min(1,Math.max(0,t))}i.functions={rgb:function(t,e,n){return this.rgba(t,e,n,1)},rgba:function(t,e,n,r){var a=[t,e,n].map(function(t){return o(t,256)});return r=s(r),new i.Color(a,r)},hsl:function(t,e,n){return this.hsla(t,e,n,1)},hsla:function(t,e,n,i){function r(t){return t=0>t?t+1:t>1?t-1:t,1>6*t?l+6*(o-l)*t:1>2*t?o:2>3*t?l+6*(o-l)*(2/3-t):l}t=s(t)%360/360,e=a(s(e)),n=a(s(n)),i=a(s(i));var o=.5>=n?n*(e+1):n+e-n*e,l=2*n-o;return this.rgba(255*r(t+1/3),255*r(t),255*r(t-1/3),i)},hsv:function(t,e,n){return this.hsva(t,e,n,1)},hsva:function(t,e,n,i){t=360*(s(t)%360/360),e=s(e),n=s(n),i=s(i);var r,o;r=Math.floor(t/60%6),o=t/60-r;var a=[n,n*(1-e),n*(1-o*e),n*(1-(1-o)*e)],l=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]];return this.rgba(255*a[l[r][0]],255*a[l[r][1]],255*a[l[r][2]],i)},hue:function(t){return new i.Dimension(Math.round(t.toHSL().h))},saturation:function(t){return new i.Dimension(Math.round(100*t.toHSL().s),"%")},lightness:function(t){return new i.Dimension(Math.round(100*t.toHSL().l),"%")},hsvhue:function(t){return new i.Dimension(Math.round(t.toHSV().h))},hsvsaturation:function(t){return new i.Dimension(Math.round(100*t.toHSV().s),"%")},hsvvalue:function(t){return new i.Dimension(Math.round(100*t.toHSV().v),"%")},red:function(t){return new i.Dimension(t.rgb[0])},green:function(t){return new i.Dimension(t.rgb[1])},blue:function(t){return new i.Dimension(t.rgb[2])},alpha:function(t){return new i.Dimension(t.toHSL().a)},luma:function(t){return new i.Dimension(Math.round(100*t.luma()*t.alpha),"%")},saturate:function(t,e){var n=t.toHSL();return n.s+=e.value/100,n.s=a(n.s),r(n)},desaturate:function(t,e){var n=t.toHSL();return n.s-=e.value/100,n.s=a(n.s),r(n)},lighten:function(t,e){var n=t.toHSL();return n.l+=e.value/100,n.l=a(n.l),r(n)},darken:function(t,e){var n=t.toHSL();return n.l-=e.value/100,n.l=a(n.l),r(n)},fadein:function(t,e){var n=t.toHSL();return n.a+=e.value/100,n.a=a(n.a),r(n)},fadeout:function(t,e){var n=t.toHSL();return n.a-=e.value/100,n.a=a(n.a),r(n)},fade:function(t,e){var n=t.toHSL();return n.a=e.value/100,n.a=a(n.a),r(n)},spin:function(t,e){var n=t.toHSL(),i=(n.h+e.value)%360;return n.h=0>i?360+i:i,r(n)},// Copyright (c) 2006-2009 Hampton Catlin, Nathan Weizenbaum, and Chris Eppstein
mix:function(t,e,n){n||(n=new i.Dimension(50));var r=n.value/100,o=2*r-1,s=t.toHSL().a-e.toHSL().a,a=((-1==o*s?o:(o+s)/(1+o*s))+1)/2,l=1-a,u=[t.rgb[0]*a+e.rgb[0]*l,t.rgb[1]*a+e.rgb[1]*l,t.rgb[2]*a+e.rgb[2]*l],c=t.alpha*r+e.alpha*(1-r);return new i.Color(u,c)},greyscale:function(t){return this.desaturate(t,new i.Dimension(100))},contrast:function(t,e,n,i){if(!t.rgb)return null;if("undefined"==typeof n&&(n=this.rgba(255,255,255,1)),"undefined"==typeof e&&(e=this.rgba(0,0,0,1)),e.luma()>n.luma()){var r=n;n=e,e=r}return i="undefined"==typeof i?.43:s(i),t.luma()*t.alpha<i?n:e},e:function(t){return new i.Anonymous(t instanceof i.JavaScript?t.evaluated:t)},escape:function(t){return new i.Anonymous(encodeURI(t.value).replace(/=/g,"%3D").replace(/:/g,"%3A").replace(/#/g,"%23").replace(/;/g,"%3B").replace(/\(/g,"%28").replace(/\)/g,"%29"))},"%":function(t){for(var e=Array.prototype.slice.call(arguments,1),n=t.value,r=0;r<e.length;r++)n=n.replace(/%[sda]/i,function(t){var n=t.match(/s/i)?e[r].value:e[r].toCSS();return t.match(/[A-Z]$/)?encodeURIComponent(n):n});return n=n.replace(/%%/g,"%"),new i.Quoted('"'+n+'"',n)},unit:function(t,e){return new i.Dimension(t.value,e?e.toCSS():"")},convert:function(t,e){return t.convertTo(e.value)},round:function(t,e){var n="undefined"==typeof e?0:e.value;return this._math(function(t){return t.toFixed(n)},null,t)},pi:function(){return new i.Dimension(Math.PI)},mod:function(t,e){return new i.Dimension(t.value%e.value,t.unit)},pow:function(t,e){if("number"==typeof t&&"number"==typeof e)t=new i.Dimension(t),e=new i.Dimension(e);else if(!(t instanceof i.Dimension&&e instanceof i.Dimension))throw{type:"Argument",message:"arguments must be numbers"};return new i.Dimension(Math.pow(t.value,e.value),t.unit)},_math:function(t,e,n){if(n instanceof i.Dimension)return new i.Dimension(t(parseFloat(n.value)),null==e?n.unit:e);if("number"==typeof n)return t(n);throw{type:"Argument",message:"argument must be a number"}},argb:function(t){return new i.Anonymous(t.toARGB())},percentage:function(t){return new i.Dimension(100*t.value,"%")},color:function(t){if(t instanceof i.Quoted)return new i.Color(t.value.slice(1));throw{type:"Argument",message:"argument must be a string"}},iscolor:function(t){return this._isa(t,i.Color)},isnumber:function(t){return this._isa(t,i.Dimension)},isstring:function(t){return this._isa(t,i.Quoted)},iskeyword:function(t){return this._isa(t,i.Keyword)},isurl:function(t){return this._isa(t,i.URL)},ispixel:function(t){return this.isunit(t,"px")},ispercentage:function(t){return this.isunit(t,"%")},isem:function(t){return this.isunit(t,"em")},isunit:function(t,e){return t instanceof i.Dimension&&t.unit.is(e.value||e)?i.True:i.False},_isa:function(t,e){return t instanceof e?i.True:i.False},multiply:function(t,e){var n=t.rgb[0]*e.rgb[0]/255,i=t.rgb[1]*e.rgb[1]/255,r=t.rgb[2]*e.rgb[2]/255;return this.rgb(n,i,r)},screen:function(t,e){var n=255-(255-t.rgb[0])*(255-e.rgb[0])/255,i=255-(255-t.rgb[1])*(255-e.rgb[1])/255,r=255-(255-t.rgb[2])*(255-e.rgb[2])/255;return this.rgb(n,i,r)},overlay:function(t,e){var n=t.rgb[0]<128?2*t.rgb[0]*e.rgb[0]/255:255-2*(255-t.rgb[0])*(255-e.rgb[0])/255,i=t.rgb[1]<128?2*t.rgb[1]*e.rgb[1]/255:255-2*(255-t.rgb[1])*(255-e.rgb[1])/255,r=t.rgb[2]<128?2*t.rgb[2]*e.rgb[2]/255:255-2*(255-t.rgb[2])*(255-e.rgb[2])/255;return this.rgb(n,i,r)},softlight:function(t,e){var n=e.rgb[0]*t.rgb[0]/255,i=n+t.rgb[0]*(255-(255-t.rgb[0])*(255-e.rgb[0])/255-n)/255;n=e.rgb[1]*t.rgb[1]/255;var r=n+t.rgb[1]*(255-(255-t.rgb[1])*(255-e.rgb[1])/255-n)/255;n=e.rgb[2]*t.rgb[2]/255;var o=n+t.rgb[2]*(255-(255-t.rgb[2])*(255-e.rgb[2])/255-n)/255;return this.rgb(i,r,o)},hardlight:function(t,e){var n=e.rgb[0]<128?2*e.rgb[0]*t.rgb[0]/255:255-2*(255-e.rgb[0])*(255-t.rgb[0])/255,i=e.rgb[1]<128?2*e.rgb[1]*t.rgb[1]/255:255-2*(255-e.rgb[1])*(255-t.rgb[1])/255,r=e.rgb[2]<128?2*e.rgb[2]*t.rgb[2]/255:255-2*(255-e.rgb[2])*(255-t.rgb[2])/255;return this.rgb(n,i,r)},difference:function(t,e){var n=Math.abs(t.rgb[0]-e.rgb[0]),i=Math.abs(t.rgb[1]-e.rgb[1]),r=Math.abs(t.rgb[2]-e.rgb[2]);return this.rgb(n,i,r)},exclusion:function(t,e){var n=t.rgb[0]+e.rgb[0]*(255-t.rgb[0]-t.rgb[0])/255,i=t.rgb[1]+e.rgb[1]*(255-t.rgb[1]-t.rgb[1])/255,r=t.rgb[2]+e.rgb[2]*(255-t.rgb[2]-t.rgb[2])/255;return this.rgb(n,i,r)},average:function(t,e){var n=(t.rgb[0]+e.rgb[0])/2,i=(t.rgb[1]+e.rgb[1])/2,r=(t.rgb[2]+e.rgb[2])/2;return this.rgb(n,i,r)},negation:function(t,e){var n=255-Math.abs(255-e.rgb[0]-t.rgb[0]),i=255-Math.abs(255-e.rgb[1]-t.rgb[1]),r=255-Math.abs(255-e.rgb[2]-t.rgb[2]);return this.rgb(n,i,r)},tint:function(t,e){return this.mix(this.rgb(255,255,255),t,e)},shade:function(t,e){return this.mix(this.rgb(0,0,0),t,e)},extract:function(t,e){return e=e.value-1,t.value[e]},"data-uri":function(e,r){if("undefined"!=typeof t)return new i.URL(r||e,this.currentFileInfo).eval(this.env);var o=e.value,s=r&&r.value,a=n("fs"),l=n("path"),u=!1;if(arguments.length<2&&(s=o),this.env.isPathRelative(s)&&(s=this.currentFileInfo.relativeUrls?l.join(this.currentFileInfo.currentDirectory,s):l.join(this.currentFileInfo.entryPath,s)),arguments.length<2){var c;try{c=n("mime")}catch(h){c=i._mime}o=c.lookup(s);var p=c.charsets.lookup(o);u=["US-ASCII","UTF-8"].indexOf(p)<0,u&&(o+=";base64")}else u=/;base64$/.test(o);var f=a.readFileSync(s),d=32,m=parseInt(f.length/1024,10);if(m>=d){if(this.env.ieCompat!==!1)return this.env.silent||console.warn("Skipped data-uri embedding of %s because its size (%dKB) exceeds IE8-safe %dKB!",s,m,d),new i.URL(r||e,this.currentFileInfo).eval(this.env);this.env.silent||console.warn("WARNING: Embedding %s (%dKB) exceeds IE8's data-uri size limit of %dKB!",s,m,d)}f=u?f.toString("base64"):encodeURIComponent(f);var g="'data:"+o+","+f+"'";return new i.URL(new i.Anonymous(g))}},i._mime={_types:{".htm":"text/html",".html":"text/html",".gif":"image/gif",".jpg":"image/jpeg",".jpeg":"image/jpeg",".png":"image/png"},lookup:function(t){var r=n("path").extname(t),o=i._mime._types[r];if(o===e)throw new Error('Optional dependency "mime" is required for '+r);return o},charsets:{lookup:function(t){return t&&/^text\//.test(t)?"UTF-8":""}}};for(var l=[{name:"ceil"},{name:"floor"},{name:"sqrt"},{name:"abs"},{name:"tan",unit:""},{name:"sin",unit:""},{name:"cos",unit:""},{name:"atan",unit:"rad"},{name:"asin",unit:"rad"},{name:"acos",unit:"rad"}],u=function(t,e){return function(n){return null!=e&&(n=n.unify()),this._math(Math[t],e,n)}},c=0;c<l.length;c++)i.functions[l[c].name]=u(l[c].name,l[c].unit);i.functionCall=function(t,e){this.env=t,this.currentFileInfo=e},i.functionCall.prototype=i.functions}(n("./tree")),function(t){t.colors={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}}(n("./tree")),function(t){t.Alpha=function(t){this.value=t},t.Alpha.prototype={type:"Alpha",accept:function(t){this.value=t.visit(this.value)},eval:function(t){return this.value.eval&&(this.value=this.value.eval(t)),this},toCSS:function(){return"alpha(opacity="+(this.value.toCSS?this.value.toCSS():this.value)+")"}}}(n("../tree")),function(t){t.Anonymous=function(t){this.value=t.value||t},t.Anonymous.prototype={type:"Anonymous",toCSS:function(){return this.value},eval:function(){return this},compare:function(t){if(!t.toCSS)return-1;var e=this.toCSS(),n=t.toCSS();return e===n?0:n>e?-1:1}}}(n("../tree")),function(t){t.Assignment=function(t,e){this.key=t,this.value=e},t.Assignment.prototype={type:"Assignment",accept:function(t){this.value=t.visit(this.value)},toCSS:function(){return this.key+"="+(this.value.toCSS?this.value.toCSS():this.value)},eval:function(e){return this.value.eval?new t.Assignment(this.key,this.value.eval(e)):this}}}(n("../tree")),function(t){t.Call=function(t,e,n,i){this.name=t,this.args=e,this.index=n,this.currentFileInfo=i},t.Call.prototype={type:"Call",accept:function(t){this.args=t.visit(this.args)},eval:function(e){var n,i,r=this.args.map(function(t){return t.eval(e)}),o=this.name.toLowerCase();if(o in t.functions)try{if(i=new t.functionCall(e,this.currentFileInfo),n=i[o].apply(i,r),null!=n)return n}catch(s){throw{type:s.type||"Runtime",message:"error evaluating function `"+this.name+"`"+(s.message?": "+s.message:""),index:this.index,filename:this.currentFileInfo.filename}}return new t.Anonymous(this.name+"("+r.map(function(t){return t.toCSS(e)}).join(", ")+")")},toCSS:function(t){return this.eval(t).toCSS()}}}(n("../tree")),function(t){t.Color=function(t,e){this.rgb=Array.isArray(t)?t:6==t.length?t.match(/.{2}/g).map(function(t){return parseInt(t,16)}):t.split("").map(function(t){return parseInt(t+t,16)}),this.alpha="number"==typeof e?e:1},t.Color.prototype={type:"Color",eval:function(){return this},luma:function(){return.2126*this.rgb[0]/255+.7152*this.rgb[1]/255+.0722*this.rgb[2]/255},toCSS:function(t,e){var n=t&&t.compress&&!e;if(this.alpha<1)return"rgba("+this.rgb.map(function(t){return Math.round(t)}).concat(this.alpha).join(","+(n?"":" "))+")";var i=this.rgb.map(function(t){return t=Math.round(t),t=(t>255?255:0>t?0:t).toString(16),1===t.length?"0"+t:t}).join("");return n&&(i=i.split(""),i=i[0]==i[1]&&i[2]==i[3]&&i[4]==i[5]?i[0]+i[2]+i[4]:i.join("")),"#"+i},operate:function(e,n,i){var r=[];i instanceof t.Color||(i=i.toColor());for(var o=0;3>o;o++)r[o]=t.operate(e,n,this.rgb[o],i.rgb[o]);return new t.Color(r,this.alpha+i.alpha)},toHSL:function(){var t,e,n=this.rgb[0]/255,i=this.rgb[1]/255,r=this.rgb[2]/255,o=this.alpha,s=Math.max(n,i,r),a=Math.min(n,i,r),l=(s+a)/2,u=s-a;if(s===a)t=e=0;else{switch(e=l>.5?u/(2-s-a):u/(s+a),s){case n:t=(i-r)/u+(r>i?6:0);break;case i:t=(r-n)/u+2;break;case r:t=(n-i)/u+4}t/=6}return{h:360*t,s:e,l:l,a:o}},toHSV:function(){var t,e,n=this.rgb[0]/255,i=this.rgb[1]/255,r=this.rgb[2]/255,o=this.alpha,s=Math.max(n,i,r),a=Math.min(n,i,r),l=s,u=s-a;if(e=0===s?0:u/s,s===a)t=0;else{switch(s){case n:t=(i-r)/u+(r>i?6:0);break;case i:t=(r-n)/u+2;break;case r:t=(n-i)/u+4}t/=6}return{h:360*t,s:e,v:l,a:o}},toARGB:function(){var t=[Math.round(255*this.alpha)].concat(this.rgb);return"#"+t.map(function(t){return t=Math.round(t),t=(t>255?255:0>t?0:t).toString(16),1===t.length?"0"+t:t}).join("")},compare:function(t){return t.rgb?t.rgb[0]===this.rgb[0]&&t.rgb[1]===this.rgb[1]&&t.rgb[2]===this.rgb[2]&&t.alpha===this.alpha?0:-1:-1}}}(n("../tree")),function(t){t.Comment=function(t,e){this.value=t,this.silent=!!e},t.Comment.prototype={type:"Comment",toCSS:function(t){return t.compress?"":this.value},eval:function(){return this}}}(n("../tree")),function(t){t.Condition=function(t,e,n,i,r){this.op=t.trim(),this.lvalue=e,this.rvalue=n,this.index=i,this.negate=r},t.Condition.prototype={type:"Condition",accept:function(t){this.lvalue=t.visit(this.lvalue),this.rvalue=t.visit(this.rvalue)},eval:function(t){var e,n=this.lvalue.eval(t),i=this.rvalue.eval(t),r=this.index,e=function(t){switch(t){case"and":return n&&i;case"or":return n||i;default:if(n.compare)e=n.compare(i);else{if(!i.compare)throw{type:"Type",message:"Unable to perform comparison",index:r};e=i.compare(n)}switch(e){case-1:return"<"===t||"=<"===t;case 0:return"="===t||">="===t||"=<"===t;case 1:return">"===t||">="===t}}}(this.op);return this.negate?!e:e}}}(n("../tree")),function(t){t.Dimension=function(n,i){this.value=parseFloat(n),this.unit=i&&i instanceof t.Unit?i:new t.Unit(i?[i]:e)},t.Dimension.prototype={type:"Dimension",accept:function(t){this.unit=t.visit(this.unit)},eval:function(){return this},toColor:function(){return new t.Color([this.value,this.value,this.value])},toCSS:function(t){if(t&&t.strictUnits&&!this.unit.isSingular())throw new Error("Multiple units in dimension. Correct the units or use the unit function. Bad unit: "+this.unit.toString());var e=this.value,n=String(e);if(0!==e&&1e-6>e&&e>-1e-6&&(n=e.toFixed(20).replace(/0+$/,"")),t&&t.compress){if(0===e&&!this.unit.isAngle())return n;e>0&&1>e&&(n=n.substr(1))}return n+this.unit.toCSS(t)},operate:function(e,n,i){var r=t.operate(e,n,this.value,i.value),o=this.unit.clone();if("+"===n||"-"===n)if(0===o.numerator.length&&0===o.denominator.length)o.numerator=i.unit.numerator.slice(0),o.denominator=i.unit.denominator.slice(0);else if(0==i.unit.numerator.length&&0==o.denominator.length);else{if(i=i.convertTo(this.unit.usedUnits()),e.strictUnits&&i.unit.toString()!==o.toString())throw new Error("Incompatible units. Change the units or use the unit function. Bad units: '"+o.toString()+"' and '"+i.unit.toString()+"'.");r=t.operate(e,n,this.value,i.value)}else"*"===n?(o.numerator=o.numerator.concat(i.unit.numerator).sort(),o.denominator=o.denominator.concat(i.unit.denominator).sort(),o.cancel()):"/"===n&&(o.numerator=o.numerator.concat(i.unit.denominator).sort(),o.denominator=o.denominator.concat(i.unit.numerator).sort(),o.cancel());return new t.Dimension(r,o)},compare:function(e){if(e instanceof t.Dimension){var n=this.unify(),i=e.unify(),r=n.value,o=i.value;return o>r?-1:r>o?1:i.unit.isEmpty()||0===n.unit.compare(i.unit)?0:-1}return-1},unify:function(){return this.convertTo({length:"m",duration:"s",angle:"rad"})},convertTo:function(e){var n,i,r,o,s=this.value,a=this.unit.clone(),l={};if("string"==typeof e){for(n in t.UnitConversions)t.UnitConversions[n].hasOwnProperty(e)&&(l={},l[n]=e);e=l}for(i in e)e.hasOwnProperty(i)&&(o=e[i],r=t.UnitConversions[i],a.map(function(t,e){return r.hasOwnProperty(t)?(e?s/=r[t]/r[o]:s*=r[t]/r[o],o):t}));return a.cancel(),new t.Dimension(s,a)}},t.UnitConversions={length:{m:1,cm:.01,mm:.001,"in":.0254,pt:.0254/72,pc:12*(.0254/72)},duration:{s:1,ms:.001},angle:{rad:1/(2*Math.PI),deg:1/360,grad:.0025,turn:1}},t.Unit=function(t,e,n){this.numerator=t?t.slice(0).sort():[],this.denominator=e?e.slice(0).sort():[],this.backupUnit=n},t.Unit.prototype={type:"Unit",clone:function(){return new t.Unit(this.numerator.slice(0),this.denominator.slice(0),this.backupUnit)},toCSS:function(t){return this.numerator.length>=1?this.numerator[0]:this.denominator.length>=1?this.denominator[0]:t&&t.strictUnits||!this.backupUnit?"":this.backupUnit},toString:function(){var t,e=this.numerator.join("*");for(t=0;t<this.denominator.length;t++)e+="/"+this.denominator[t];return e},compare:function(t){return this.is(t.toString())?0:-1},is:function(t){return this.toString()===t},isAngle:function(){return t.UnitConversions.angle.hasOwnProperty(this.toCSS())},isEmpty:function(){return 0==this.numerator.length&&0==this.denominator.length},isSingular:function(){return this.numerator.length<=1&&0==this.denominator.length},map:function(t){var e;for(e=0;e<this.numerator.length;e++)this.numerator[e]=t(this.numerator[e],!1);for(e=0;e<this.denominator.length;e++)this.denominator[e]=t(this.denominator[e],!0)},usedUnits:function(){var e,n,i={};for(n in t.UnitConversions)t.UnitConversions.hasOwnProperty(n)&&(e=t.UnitConversions[n],this.map(function(t){return e.hasOwnProperty(t)&&!i[n]&&(i[n]=t),t}));return i},cancel:function(){var t,e,n,i={};for(e=0;e<this.numerator.length;e++)t=this.numerator[e],n||(n=t),i[t]=(i[t]||0)+1;for(e=0;e<this.denominator.length;e++)t=this.denominator[e],n||(n=t),i[t]=(i[t]||0)-1;this.numerator=[],this.denominator=[];for(t in i)if(i.hasOwnProperty(t)){var r=i[t];if(r>0)for(e=0;r>e;e++)this.numerator.push(t);else if(0>r)for(e=0;-r>e;e++)this.denominator.push(t)}0===this.numerator.length&&0===this.denominator.length&&n&&(this.backupUnit=n),this.numerator.sort(),this.denominator.sort()}}}(n("../tree")),function(t){t.Directive=function(e,n){this.name=e,Array.isArray(n)?(this.ruleset=new t.Ruleset([],n),this.ruleset.allowImports=!0):this.value=n},t.Directive.prototype={type:"Directive",accept:function(t){this.ruleset=t.visit(this.ruleset),this.value=t.visit(this.value)},toCSS:function(t){return this.ruleset?(this.ruleset.root=!0,this.name+(t.compress?"{":" {\n  ")+this.ruleset.toCSS(t).trim().replace(/\n/g,"\n  ")+(t.compress?"}":"\n}\n")):this.name+" "+this.value.toCSS()+";\n"},eval:function(e){var n=this;return this.ruleset&&(e.frames.unshift(this),n=new t.Directive(this.name),n.ruleset=this.ruleset.eval(e),e.frames.shift()),n},variable:function(e){return t.Ruleset.prototype.variable.call(this.ruleset,e)},find:function(){return t.Ruleset.prototype.find.apply(this.ruleset,arguments)},rulesets:function(){return t.Ruleset.prototype.rulesets.apply(this.ruleset)}}}(n("../tree")),function(t){t.Element=function(e,n,i){this.combinator=e instanceof t.Combinator?e:new t.Combinator(e),this.value="string"==typeof n?n.trim():n?n:"",this.index=i},t.Element.prototype={type:"Element",accept:function(t){this.combinator=t.visit(this.combinator),this.value=t.visit(this.value)},eval:function(e){return new t.Element(this.combinator,this.value.eval?this.value.eval(e):this.value,this.index)},toCSS:function(t){var e=this.value.toCSS?this.value.toCSS(t):this.value;return""==e&&"&"==this.combinator.value.charAt(0)?"":this.combinator.toCSS(t||{})+e}},t.Attribute=function(t,e,n){this.key=t,this.op=e,this.value=n},t.Attribute.prototype={type:"Attribute",accept:function(t){this.value=t.visit(this.value)},eval:function(e){return new t.Attribute(this.key.eval?this.key.eval(e):this.key,this.op,this.value&&this.value.eval?this.value.eval(e):this.value)},toCSS:function(t){var e=this.key.toCSS?this.key.toCSS(t):this.key;return this.op&&(e+=this.op,e+=this.value.toCSS?this.value.toCSS(t):this.value),"["+e+"]"}},t.Combinator=function(t){this.value=" "===t?" ":t?t.trim():""},t.Combinator.prototype={type:"Combinator",toCSS:function(t){return{"":""," ":" ",":":" :","+":t.compress?"+":" + ","~":t.compress?"~":" ~ ",">":t.compress?">":" > ","|":t.compress?"|":" | "}[this.value]}}}(n("../tree")),function(t){t.Expression=function(t){this.value=t},t.Expression.prototype={type:"Expression",accept:function(t){this.value=t.visit(this.value)},eval:function(e){var n,i=this.parens&&!this.parensInOp,r=!1;return i&&e.inParenthesis(),this.value.length>1?n=new t.Expression(this.value.map(function(t){return t.eval(e)})):1===this.value.length?(this.value[0].parens&&!this.value[0].parensInOp&&(r=!0),n=this.value[0].eval(e)):n=this,i&&e.outOfParenthesis(),this.parens&&this.parensInOp&&!e.isMathOn()&&!r&&(n=new t.Paren(n)),n},toCSS:function(t){return this.value.map(function(e){return e.toCSS?e.toCSS(t):""}).join(" ")},throwAwayComments:function(){this.value=this.value.filter(function(e){return!(e instanceof t.Comment)})}}}(n("../tree")),function(t){t.Extend=function(t,e,n){switch(this.selector=t,this.option=e,this.index=n,e){case"all":this.allowBefore=!0,this.allowAfter=!0;break;default:this.allowBefore=!1,this.allowAfter=!1}},t.Extend.prototype={type:"Extend",accept:function(t){this.selector=t.visit(this.selector)},eval:function(e){return new t.Extend(this.selector.eval(e),this.option,this.index)},clone:function(){return new t.Extend(this.selector,this.option,this.index)},findSelfSelectors:function(t){var e,n=[];for(e=0;e<t.length;e++)n=n.concat(t[e].elements);this.selfSelectors=[{elements:n}]}}}(n("../tree")),function(t){t.Import=function(t,n,i,r,o){if(this.options=i,this.index=r,this.path=t,this.features=n,this.currentFileInfo=o,this.options.less!==e)this.css=!this.options.less;else{var s=this.getPath();s&&/css([\?;].*)?$/.test(s)&&(this.css=!0)}},t.Import.prototype={type:"Import",accept:function(t){this.features=t.visit(this.features),this.path=t.visit(this.path),this.root=t.visit(this.root)},toCSS:function(t){var e=this.features?" "+this.features.toCSS(t):"";return this.css?"@import "+this.path.toCSS()+e+";\n":""},getPath:function(){if(this.path instanceof t.Quoted){var n=this.path.value;return this.css!==e||/(\.[a-z]*$)|([\?;].*)$/.test(n)?n:n+".less"}return this.path instanceof t.URL?this.path.value.value:null},evalForImport:function(e){return new t.Import(this.path.eval(e),this.features,this.options,this.index,this.currentFileInfo)},evalPath:function(e){var n=this.path.eval(e),i=this.currentFileInfo&&this.currentFileInfo.rootpath;if(i&&!(n instanceof t.URL)){var r=n.value;r&&e.isPathRelative(r)&&(n.value=i+r)}return n},eval:function(e){var n,i=this.features&&this.features.eval(e);if(this.skip)return[];if(this.css){var r=new t.Import(this.evalPath(e),i,this.options,this.index);if(!r.css&&this.error)throw this.error;return r}return n=new t.Ruleset([],this.root.rules.slice(0)),n.evalImports(e),this.features?new t.Media(n.rules,this.features.value):n.rules}}}(n("../tree")),function(t){t.JavaScript=function(t,e,n){this.escaped=n,this.expression=t,this.index=e},t.JavaScript.prototype={type:"JavaScript",eval:function(e){var n,i=this,r={},o=this.expression.replace(/@\{([\w-]+)\}/g,function(n,r){return t.jsify(new t.Variable("@"+r,i.index).eval(e))});try{o=new Function("return ("+o+")")}catch(s){throw{message:"JavaScript evaluation error: `"+o+"`",index:this.index}}for(var a in e.frames[0].variables())r[a.slice(1)]={value:e.frames[0].variables()[a].value,toJS:function(){return this.value.eval(e).toCSS()}};try{n=o.call(r)}catch(s){throw{message:"JavaScript evaluation error: '"+s.name+": "+s.message+"'",index:this.index}}return"string"==typeof n?new t.Quoted('"'+n+'"',n,this.escaped,this.index):Array.isArray(n)?new t.Anonymous(n.join(", ")):new t.Anonymous(n)}}}(n("../tree")),function(t){t.Keyword=function(t){this.value=t},t.Keyword.prototype={type:"Keyword",eval:function(){return this},toCSS:function(){return this.value},compare:function(e){return e instanceof t.Keyword?e.value===this.value?0:1:-1}},t.True=new t.Keyword("true"),t.False=new t.Keyword("false")}(n("../tree")),function(t){t.Media=function(e,n){var i=this.emptySelectors();this.features=new t.Value(n),this.ruleset=new t.Ruleset(i,e),this.ruleset.allowImports=!0},t.Media.prototype={type:"Media",accept:function(t){this.features=t.visit(this.features),this.ruleset=t.visit(this.ruleset)},toCSS:function(t){var e=this.features.toCSS(t);return"@media "+e+(t.compress?"{":" {\n  ")+this.ruleset.toCSS(t).trim().replace(/\n/g,"\n  ")+(t.compress?"}":"\n}\n")},eval:function(e){e.mediaBlocks||(e.mediaBlocks=[],e.mediaPath=[]);var n=new t.Media([],[]);this.debugInfo&&(this.ruleset.debugInfo=this.debugInfo,n.debugInfo=this.debugInfo);var i=!1;e.strictMath||(i=!0,e.strictMath=!0);try{n.features=this.features.eval(e)}finally{i&&(e.strictMath=!1)}return e.mediaPath.push(n),e.mediaBlocks.push(n),e.frames.unshift(this.ruleset),n.ruleset=this.ruleset.eval(e),e.frames.shift(),e.mediaPath.pop(),0===e.mediaPath.length?n.evalTop(e):n.evalNested(e)},variable:function(e){return t.Ruleset.prototype.variable.call(this.ruleset,e)},find:function(){return t.Ruleset.prototype.find.apply(this.ruleset,arguments)},rulesets:function(){return t.Ruleset.prototype.rulesets.apply(this.ruleset)},emptySelectors:function(){var e=new t.Element("","&",0);return[new t.Selector([e])]},evalTop:function(e){var n=this;if(e.mediaBlocks.length>1){var i=this.emptySelectors();n=new t.Ruleset(i,e.mediaBlocks),n.multiMedia=!0}return delete e.mediaBlocks,delete e.mediaPath,n},evalNested:function(e){var n,i,r=e.mediaPath.concat([this]);for(n=0;n<r.length;n++)i=r[n].features instanceof t.Value?r[n].features.value:r[n].features,r[n]=Array.isArray(i)?i:[i];return this.features=new t.Value(this.permute(r).map(function(e){for(e=e.map(function(e){return e.toCSS?e:new t.Anonymous(e)}),n=e.length-1;n>0;n--)e.splice(n,0,new t.Anonymous("and"));return new t.Expression(e)})),new t.Ruleset([],[])},permute:function(t){if(0===t.length)return[];if(1===t.length)return t[0];for(var e=[],n=this.permute(t.slice(1)),i=0;i<n.length;i++)for(var r=0;r<t[0].length;r++)e.push([t[0][r]].concat(n[i]));return e},bubbleSelectors:function(e){this.ruleset=new t.Ruleset(e.slice(0),[this.ruleset])}}}(n("../tree")),function(t){t.mixin={},t.mixin.Call=function(e,n,i,r,o){this.selector=new t.Selector(e),this.arguments=n,this.index=i,this.currentFileInfo=r,this.important=o},t.mixin.Call.prototype={type:"MixinCall",accept:function(t){this.selector=t.visit(this.selector),this.arguments=t.visit(this.arguments)},eval:function(e){var n,i,r,o,s,a,l,u,c=[],h=!1;for(r=this.arguments&&this.arguments.map(function(t){return{name:t.name,value:t.value.eval(e)}}),o=0;o<e.frames.length;o++)if((n=e.frames[o].find(this.selector)).length>0){for(u=!0,s=0;s<n.length;s++){for(i=n[s],l=!1,a=0;a<e.frames.length;a++)if(!(i instanceof t.mixin.Definition)&&i===(e.frames[a].originalRuleset||e.frames[a])){l=!0;break}if(!l&&i.matchArgs(r,e)){if(!i.matchCondition||i.matchCondition(r,e))try{Array.prototype.push.apply(c,i.eval(e,r,this.important).rules)}catch(p){throw{message:p.message,index:this.index,filename:this.currentFileInfo.filename,stack:p.stack}}h=!0}}if(h)return c}throw u?{type:"Runtime",message:"No matching definition was found for `"+this.selector.toCSS().trim()+"("+(r?r.map(function(t){var e="";return t.name&&(e+=t.name+":"),e+=t.value.toCSS?t.value.toCSS():"???"}).join(", "):"")+")`",index:this.index,filename:this.currentFileInfo.filename}:{type:"Name",message:this.selector.toCSS().trim()+" is undefined",index:this.index,filename:this.currentFileInfo.filename}}},t.mixin.Definition=function(e,n,i,r,o){this.name=e,this.selectors=[new t.Selector([new t.Element(null,e)])],this.params=n,this.condition=r,this.variadic=o,this.arity=n.length,this.rules=i,this._lookups={},this.required=n.reduce(function(t,e){return!e.name||e.name&&!e.value?t+1:t},0),this.parent=t.Ruleset.prototype,this.frames=[]},t.mixin.Definition.prototype={type:"MixinDefinition",accept:function(t){this.params=t.visit(this.params),this.rules=t.visit(this.rules),this.condition=t.visit(this.condition)},toCSS:function(){return""},variable:function(t){return this.parent.variable.call(this,t)},variables:function(){return this.parent.variables.call(this)},find:function(){return this.parent.find.apply(this,arguments)},rulesets:function(){return this.parent.rulesets.apply(this)},evalParams:function(e,n,i,r){var o,s,a,l,u,c,h,p,f=new t.Ruleset(null,[]),d=this.params.slice(0);if(n=new t.evalEnv(n,[f].concat(n.frames)),i)for(i=i.slice(0),a=0;a<i.length;a++)if(s=i[a],c=s&&s.name){for(h=!1,l=0;l<d.length;l++)if(!r[l]&&c===d[l].name){r[l]=s.value.eval(e),f.rules.unshift(new t.Rule(c,s.value.eval(e))),h=!0;break}if(h){i.splice(a,1),a--;continue}throw{type:"Runtime",message:"Named argument for "+this.name+" "+i[a].name+" not found"}}for(p=0,a=0;a<d.length;a++)if(!r[a]){if(s=i&&i[p],c=d[a].name)if(d[a].variadic&&i){for(o=[],l=p;l<i.length;l++)o.push(i[l].value.eval(e));f.rules.unshift(new t.Rule(c,new t.Expression(o).eval(e)))}else{if(u=s&&s.value)u=u.eval(e);else{if(!d[a].value)throw{type:"Runtime",message:"wrong number of arguments for "+this.name+" ("+i.length+" for "+this.arity+")"};u=d[a].value.eval(n),f.resetCache()}f.rules.unshift(new t.Rule(c,u)),r[a]=u}if(d[a].variadic&&i)for(l=p;l<i.length;l++)r[l]=i[l].value.eval(e);p++}return f},eval:function(e,n,i){var r,o,s=[],a=this.frames.concat(e.frames),l=this.evalParams(e,new t.evalEnv(e,a),n,s);return l.rules.unshift(new t.Rule("@arguments",new t.Expression(s).eval(e))),r=i?this.parent.makeImportant.apply(this).rules:this.rules.slice(0),o=new t.Ruleset(null,r).eval(new t.evalEnv(e,[this,l].concat(a))),o.originalRuleset=this,o},matchCondition:function(e,n){return this.condition&&!this.condition.eval(new t.evalEnv(n,[this.evalParams(n,new t.evalEnv(n,this.frames.concat(n.frames)),e,[])].concat(n.frames)))?!1:!0},matchArgs:function(t,e){var n,i=t&&t.length||0;if(!this.variadic){if(i<this.required)return!1;if(i>this.params.length)return!1;if(this.required>0&&i>this.params.length)return!1}n=Math.min(i,this.arity);for(var r=0;n>r;r++)if(!this.params[r].name&&!this.params[r].variadic&&t[r].value.eval(e).toCSS()!=this.params[r].value.eval(e).toCSS())return!1;return!0}}}(n("../tree")),function(t){t.Negative=function(t){this.value=t},t.Negative.prototype={type:"Negative",accept:function(t){this.value=t.visit(this.value)},toCSS:function(t){return"-"+this.value.toCSS(t)},eval:function(e){return e.isMathOn()?new t.Operation("*",[new t.Dimension(-1),this.value]).eval(e):new t.Negative(this.value.eval(e))}}}(n("../tree")),function(t){t.Operation=function(t,e,n){this.op=t.trim(),this.operands=e,this.isSpaced=n},t.Operation.prototype={type:"Operation",accept:function(t){this.operands=t.visit(this.operands)},eval:function(e){var n,i=this.operands[0].eval(e),r=this.operands[1].eval(e);if(e.isMathOn()){if(i instanceof t.Dimension&&r instanceof t.Color){if("*"!==this.op&&"+"!==this.op)throw{type:"Operation",message:"Can't substract or divide a color from a number"};n=r,r=i,i=n}if(!i.operate)throw{type:"Operation",message:"Operation on an invalid type"};return i.operate(e,this.op,r)}return new t.Operation(this.op,[i,r],this.isSpaced)},toCSS:function(){var t=this.isSpaced?" ":"";return this.operands[0].toCSS()+t+this.op+t+this.operands[1].toCSS()}},t.operate=function(t,e,n,i){switch(e){case"+":return n+i;case"-":return n-i;case"*":return n*i;case"/":return n/i}}}(n("../tree")),function(t){t.Paren=function(t){this.value=t},t.Paren.prototype={type:"Paren",accept:function(t){this.value=t.visit(this.value)},toCSS:function(t){return"("+this.value.toCSS(t).trim()+")"},eval:function(e){return new t.Paren(this.value.eval(e))}}}(n("../tree")),function(t){t.Quoted=function(t,e,n,i,r){this.escaped=n,this.value=e||"",this.quote=t.charAt(0),this.index=i,this.currentFileInfo=r},t.Quoted.prototype={type:"Quoted",toCSS:function(){return this.escaped?this.value:this.quote+this.value+this.quote},eval:function(e){var n=this,i=this.value.replace(/`([^`]+)`/g,function(i,r){return new t.JavaScript(r,n.index,!0).eval(e).value}).replace(/@\{([\w-]+)\}/g,function(i,r){var o=new t.Variable("@"+r,n.index,n.currentFileInfo).eval(e,!0);return o instanceof t.Quoted?o.value:o.toCSS()});return new t.Quoted(this.quote+i+this.quote,i,this.escaped,this.index)},compare:function(t){if(!t.toCSS)return-1;var e=this.toCSS(),n=t.toCSS();return e===n?0:n>e?-1:1}}}(n("../tree")),function(t){t.Rule=function(e,n,i,r,o,s){this.name=e,this.value=n instanceof t.Value?n:new t.Value([n]),this.important=i?" "+i.trim():"",this.index=r,this.currentFileInfo=o,this.inline=s||!1,this.variable="@"===e.charAt(0)?!0:!1},t.Rule.prototype={type:"Rule",accept:function(t){this.value=t.visit(this.value)
},toCSS:function(t){if(this.variable)return"";try{return this.name+(t.compress?":":": ")+this.value.toCSS(t)+this.important+(this.inline?"":";")}catch(e){throw e.index=this.index,e.filename=this.currentFileInfo.filename,e}},eval:function(e){var n=!1;"font"===this.name&&e.strictMath===!1&&(n=!0,e.strictMath=!0);try{return new t.Rule(this.name,this.value.eval(e),this.important,this.index,this.currentFileInfo,this.inline)}finally{n&&(e.strictMath=!1)}},makeImportant:function(){return new t.Rule(this.name,this.value,"!important",this.index,this.currentFileInfo,this.inline)}}}(n("../tree")),function(t){t.Ruleset=function(t,e,n){this.selectors=t,this.rules=e,this._lookups={},this.strictImports=n},t.Ruleset.prototype={type:"Ruleset",accept:function(t){this.selectors=t.visit(this.selectors),this.rules=t.visit(this.rules)},eval:function(e){var n,i=this.selectors&&this.selectors.map(function(t){return t.eval(e)}),r=new t.Ruleset(i,this.rules.slice(0),this.strictImports);r.originalRuleset=this,r.root=this.root,r.firstRoot=this.firstRoot,r.allowImports=this.allowImports,this.debugInfo&&(r.debugInfo=this.debugInfo),e.frames.unshift(r),e.selectors||(e.selectors=[]),e.selectors.unshift(this.selectors),(r.root||r.allowImports||!r.strictImports)&&r.evalImports(e);for(var o=0;o<r.rules.length;o++)r.rules[o]instanceof t.mixin.Definition&&(r.rules[o].frames=e.frames.slice(0));for(var s=e.mediaBlocks&&e.mediaBlocks.length||0,o=0;o<r.rules.length;o++)r.rules[o]instanceof t.mixin.Call&&(n=r.rules[o].eval(e).filter(function(e){return e instanceof t.Rule&&e.variable?!r.variable(e.name):!0}),r.rules.splice.apply(r.rules,[o,1].concat(n)),o+=n.length-1,r.resetCache());for(var a,o=0;o<r.rules.length;o++)a=r.rules[o],a instanceof t.mixin.Definition||(r.rules[o]=a.eval?a.eval(e):a);if(e.frames.shift(),e.selectors.shift(),e.mediaBlocks)for(var o=s;o<e.mediaBlocks.length;o++)e.mediaBlocks[o].bubbleSelectors(i);return r},evalImports:function(e){var n,i;for(n=0;n<this.rules.length;n++)this.rules[n]instanceof t.Import&&(i=this.rules[n].eval(e),"number"==typeof i.length?(this.rules.splice.apply(this.rules,[n,1].concat(i)),n+=i.length-1):this.rules.splice(n,1,i),this.resetCache())},makeImportant:function(){return new t.Ruleset(this.selectors,this.rules.map(function(t){return t.makeImportant?t.makeImportant():t}),this.strictImports)},matchArgs:function(t){return!t||0===t.length},resetCache:function(){this._rulesets=null,this._variables=null,this._lookups={}},variables:function(){return this._variables?this._variables:this._variables=this.rules.reduce(function(e,n){return n instanceof t.Rule&&n.variable===!0&&(e[n.name]=n),e},{})},variable:function(t){return this.variables()[t]},rulesets:function(){return this.rules.filter(function(e){return e instanceof t.Ruleset||e instanceof t.mixin.Definition})},find:function(e,n){n=n||this;var i,r=[],o=e.toCSS();return o in this._lookups?this._lookups[o]:(this.rulesets().forEach(function(o){if(o!==n)for(var s=0;s<o.selectors.length;s++)if(i=e.match(o.selectors[s])){e.elements.length>o.selectors[s].elements.length?Array.prototype.push.apply(r,o.find(new t.Selector(e.elements.slice(1)),n)):r.push(o);break}}),this._lookups[o]=r)},toCSS:function(e){for(var n,i,r,o=[],s=[],a=[],l=[],u=0;u<this.rules.length;u++)if(r=this.rules[u],r.rules||r instanceof t.Media)l.push(r.toCSS(e));else if(r instanceof t.Directive){var c=r.toCSS(e);if("@charset"===r.name){if(e.charset){r.debugInfo&&(l.push(t.debugInfo(e,r)),l.push(new t.Comment("/* "+c.replace(/\n/g,"")+" */\n").toCSS(e)));continue}e.charset=!0}l.push(c)}else if(r instanceof t.Comment)r.silent||(this.root?l.push(r.toCSS(e)):s.push(r.toCSS(e)));else if(r.toCSS&&!r.variable){if(this.firstRoot&&r instanceof t.Rule)throw{message:"properties must be inside selector blocks, they cannot be in the root.",index:r.index,filename:r.currentFileInfo?r.currentFileInfo.filename:null};s.push(r.toCSS(e))}else r.value&&!r.variable&&s.push(r.value.toString());if(e.compress&&s.length&&(r=s[s.length-1],";"===r.charAt(r.length-1)&&(s[s.length-1]=r.substring(0,r.length-1))),l=l.join(""),this.root)o.push(s.join(e.compress?"":"\n"));else if(s.length>0){i=t.debugInfo(e,this),n=this.paths.map(function(t){return t.map(function(t){return t.toCSS(e)}).join("").trim()}).join(e.compress?",":",\n");for(var u=s.length-1;u>=0;u--)("/*"===s[u].slice(0,2)||-1===a.indexOf(s[u]))&&a.unshift(s[u]);s=a,o.push(i+n+(e.compress?"{":" {\n  ")+s.join(e.compress?"":"\n  ")+(e.compress?"}":"\n}\n"))}return o.push(l),o.join("")+(e.compress?"\n":"")},joinSelectors:function(t,e,n){for(var i=0;i<n.length;i++)this.joinSelector(t,e,n[i])},joinSelector:function(e,n,i){var r,o,s,a,l,u,c,h,p,f,d,m,g,v,y;for(r=0;r<i.elements.length;r++)u=i.elements[r],"&"===u.value&&(a=!0);if(a){for(v=[],l=[[]],r=0;r<i.elements.length;r++)if(u=i.elements[r],"&"!==u.value)v.push(u);else{for(y=[],v.length>0&&this.mergeElementsOnToSelectors(v,l),o=0;o<l.length;o++)if(c=l[o],0==n.length)c.length>0&&(c[0].elements=c[0].elements.slice(0),c[0].elements.push(new t.Element(u.combinator,"",0))),y.push(c);else for(s=0;s<n.length;s++)h=n[s],p=[],f=[],m=!0,c.length>0?(p=c.slice(0),g=p.pop(),d=new t.Selector(g.elements.slice(0),i.extendList),m=!1):d=new t.Selector([],i.extendList),h.length>1&&(f=f.concat(h.slice(1))),h.length>0&&(m=!1,d.elements.push(new t.Element(u.combinator,h[0].elements[0].value,0)),d.elements=d.elements.concat(h[0].elements.slice(1))),m||p.push(d),p=p.concat(f),y.push(p);l=y,v=[]}for(v.length>0&&this.mergeElementsOnToSelectors(v,l),r=0;r<l.length;r++)l[r].length>0&&e.push(l[r])}else if(n.length>0)for(r=0;r<n.length;r++)e.push(n[r].concat(i));else e.push([i])},mergeElementsOnToSelectors:function(e,n){var i,r;if(0==n.length)return n.push([new t.Selector(e)]),void 0;for(i=0;i<n.length;i++)r=n[i],r.length>0?r[r.length-1]=new t.Selector(r[r.length-1].elements.concat(e),r[r.length-1].extendList):r.push(new t.Selector(e))}}}(n("../tree")),function(t){t.Selector=function(t,e){this.elements=t,this.extendList=e||[]},t.Selector.prototype={type:"Selector",accept:function(t){this.elements=t.visit(this.elements),this.extendList=t.visit(this.extendList)},match:function(t){var e,n,i,r,o=this.elements,s=o.length;if(e=t.elements.slice(t.elements.length&&"&"===t.elements[0].value?1:0),n=e.length,i=Math.min(s,n),0===n||n>s)return!1;for(r=0;i>r;r++)if(o[r].value!==e[r].value)return!1;return!0},eval:function(e){return new t.Selector(this.elements.map(function(t){return t.eval(e)}),this.extendList.map(function(t){return t.eval(e)}))},toCSS:function(t){return this._css?this._css:(this._css=""===this.elements[0].combinator.value?" ":"",this._css+=this.elements.map(function(e){return"string"==typeof e?" "+e.trim():e.toCSS(t)}).join(""),this._css)}}}(n("../tree")),function(t){t.UnicodeDescriptor=function(t){this.value=t},t.UnicodeDescriptor.prototype={type:"UnicodeDescriptor",toCSS:function(){return this.value},eval:function(){return this}}}(n("../tree")),function(t){t.URL=function(t,e){this.value=t,this.currentFileInfo=e},t.URL.prototype={type:"Url",accept:function(t){this.value=t.visit(this.value)},toCSS:function(){return"url("+this.value.toCSS()+")"},eval:function(e){var n,i=this.value.eval(e);return n=this.currentFileInfo&&this.currentFileInfo.rootpath,n&&"string"==typeof i.value&&e.isPathRelative(i.value)&&(i.quote||(n=n.replace(/[\(\)'"\s]/g,function(t){return"\\"+t})),i.value=n+i.value),new t.URL(i,null)}}}(n("../tree")),function(t){t.Value=function(t){this.value=t},t.Value.prototype={type:"Value",accept:function(t){this.value=t.visit(this.value)},eval:function(e){return 1===this.value.length?this.value[0].eval(e):new t.Value(this.value.map(function(t){return t.eval(e)}))},toCSS:function(t){return this.value.map(function(e){return e.toCSS(t)}).join(t.compress?",":", ")}}}(n("../tree")),function(t){t.Variable=function(t,e,n){this.name=t,this.index=e,this.currentFileInfo=n},t.Variable.prototype={type:"Variable",eval:function(e){var n,i,r=this.name;if(0==r.indexOf("@@")&&(r="@"+new t.Variable(r.slice(1)).eval(e).value),this.evaluating)throw{type:"Name",message:"Recursive variable definition for "+r,filename:this.currentFileInfo.file,index:this.index};if(this.evaluating=!0,n=t.find(e.frames,function(t){return(i=t.variable(r))?i.value.eval(e):void 0}))return this.evaluating=!1,n;throw{type:"Name",message:"variable "+r+" is undefined",filename:this.currentFileInfo.filename,index:this.index}}}}(n("../tree")),function(t){t.debugInfo=function(e,n){var i="";if(e.dumpLineNumbers&&!e.compress)switch(e.dumpLineNumbers){case"comments":i=t.debugInfo.asComment(n);break;case"mediaquery":i=t.debugInfo.asMediaQuery(n);break;case"all":i=t.debugInfo.asComment(n)+t.debugInfo.asMediaQuery(n)}return i},t.debugInfo.asComment=function(t){return"/* line "+t.debugInfo.lineNumber+", "+t.debugInfo.fileName+" */\n"},t.debugInfo.asMediaQuery=function(t){return"@media -sass-debug-info{filename{font-family:"+("file://"+t.debugInfo.fileName).replace(/([.:/\\])/g,function(t){return"\\"==t&&(t="/"),"\\"+t})+"}line{font-family:\\00003"+t.debugInfo.lineNumber+"}}\n"},t.find=function(t,e){for(var n,i=0;i<t.length;i++)if(n=e.call(t,t[i]))return n;return null},t.jsify=function(t){return Array.isArray(t.value)&&t.value.length>1?"["+t.value.map(function(t){return t.toCSS(!1)}).join(", ")+"]":t.toCSS(!1)}}(n("./tree")),function(t){var e=["paths","optimization","files","contents","relativeUrls","strictImports","dumpLineNumbers","compress","processImports","syncImport","mime","currentFileInfo"];t.parseEnv=function(t){if(i(t,this,e),this.contents||(this.contents={}),this.files||(this.files={}),!this.currentFileInfo){var n=t&&t.filename||"input",r=n.replace(/[^\/\\]*$/,"");t&&(t.filename=null),this.currentFileInfo={filename:n,relativeUrls:this.relativeUrls,rootpath:t&&t.rootpath||"",currentDirectory:r,entryPath:r,rootFilename:n}}},t.parseEnv.prototype.toSheet=function(e){var n=new t.parseEnv(this);return n.href=e,n.type=this.mime,n};var n=["silent","verbose","compress","yuicompress","ieCompat","strictMath","strictUnits"];t.evalEnv=function(t,e){i(t,this,n),this.frames=e||[]},t.evalEnv.prototype.inParenthesis=function(){this.parensStack||(this.parensStack=[]),this.parensStack.push(!0)},t.evalEnv.prototype.outOfParenthesis=function(){this.parensStack.pop()},t.evalEnv.prototype.isMathOn=function(){return this.strictMath?this.parensStack&&this.parensStack.length:!0},t.evalEnv.prototype.isPathRelative=function(t){return!/^(?:[a-z-]+:|\/)/.test(t)};var i=function(t,e,n){if(t)for(var i=0;i<n.length;i++)t.hasOwnProperty(n[i])&&(e[n[i]]=t[n[i]])}}(n("./tree")),function(t){t.visitor=function(t){this._implementation=t},t.visitor.prototype={visit:function(t){if(t instanceof Array)return this.visitArray(t);if(!t||!t.type)return t;var e,n,i="visit"+t.type,r=this._implementation[i];return r&&(e={visitDeeper:!0},n=r.call(this._implementation,t,e),this._implementation.isReplacing&&(t=n)),(!e||e.visitDeeper)&&t&&t.accept&&t.accept(this),i+="Out",this._implementation[i]&&this._implementation[i](t),t},visitArray:function(t){var e,n=[];for(e=0;e<t.length;e++){var i=this.visit(t[e]);i instanceof Array?n=n.concat(i):n.push(i)}return this._implementation.isReplacing?n:t}}}(n("./tree")),function(t){t.importVisitor=function(e,n,i){this._visitor=new t.visitor(this),this._importer=e,this._finish=n,this.env=i||new t.evalEnv,this.importCount=0},t.importVisitor.prototype={isReplacing:!0,run:function(t){var e;try{this._visitor.visit(t)}catch(n){e=n}this.isFinished=!0,0===this.importCount&&this._finish(e)},visitImport:function(e,n){var i,r=this;if(!e.css){try{i=e.evalForImport(this.env)}catch(o){o.filename||(o.index=e.index,o.filename=e.currentFileInfo.filename),e.css=!0,e.error=o}if(i&&!i.css){e=i,this.importCount++;var s=new t.evalEnv(this.env,this.env.frames.slice(0));this._importer.push(e.getPath(),e.currentFileInfo,function(n,i,o){n&&!n.filename&&(n.index=e.index,n.filename=e.currentFileInfo.filename),o&&!e.options.multiple&&(e.skip=o);var a=function(t){r.importCount--,0===r.importCount&&r.isFinished&&r._finish(t)};i?(e.root=i,new t.importVisitor(r._importer,a,s).run(i)):a()})}}return n.visitDeeper=!1,e},visitRule:function(t,e){return e.visitDeeper=!1,t},visitDirective:function(t){return this.env.frames.unshift(t),t},visitDirectiveOut:function(){this.env.frames.shift()},visitMixinDefinition:function(t){return this.env.frames.unshift(t),t},visitMixinDefinitionOut:function(){this.env.frames.shift()},visitRuleset:function(t){return this.env.frames.unshift(t),t},visitRulesetOut:function(){this.env.frames.shift()},visitMedia:function(t){return this.env.frames.unshift(t.ruleset),t},visitMediaOut:function(){this.env.frames.shift()}}}(n("./tree")),function(t){t.joinSelectorVisitor=function(){this.contexts=[[]],this._visitor=new t.visitor(this)},t.joinSelectorVisitor.prototype={run:function(t){return this._visitor.visit(t)},visitRule:function(t,e){e.visitDeeper=!1},visitMixinDefinition:function(t,e){e.visitDeeper=!1},visitRuleset:function(t){var e=this.contexts[this.contexts.length-1],n=[];this.contexts.push(n),t.root||(t.joinSelectors(n,e,t.selectors),t.paths=n)},visitRulesetOut:function(){this.contexts.length=this.contexts.length-1},visitMedia:function(t){var e=this.contexts[this.contexts.length-1];t.ruleset.root=0===e.length||e[0].multiMedia}}}(n("./tree")),function(t){t.extendFinderVisitor=function(){this._visitor=new t.visitor(this),this.contexts=[],this.allExtendsStack=[[]]},t.extendFinderVisitor.prototype={run:function(t){return t=this._visitor.visit(t),t.allExtends=this.allExtendsStack[0],t},visitRule:function(t,e){e.visitDeeper=!1},visitMixinDefinition:function(t,e){e.visitDeeper=!1},visitRuleset:function(e){if(!e.root){var n,i,r,o,s=[];for(n=0;n<e.rules.length;n++)e.rules[n]instanceof t.Extend&&s.push(e.rules[n]);for(n=0;n<e.paths.length;n++){var a=e.paths[n],l=a[a.length-1];for(o=l.extendList.slice(0).concat(s).map(function(t){return t.clone()}),i=0;i<o.length;i++)this.foundExtends=!0,r=o[i],r.findSelfSelectors(a),r.ruleset=e,0===i&&(r.firstExtendOnThisSelectorPath=!0),this.allExtendsStack[this.allExtendsStack.length-1].push(r)}this.contexts.push(e.selectors)}},visitRulesetOut:function(t){t.root||(this.contexts.length=this.contexts.length-1)},visitMedia:function(t){t.allExtends=[],this.allExtendsStack.push(t.allExtends)},visitMediaOut:function(){this.allExtendsStack.length=this.allExtendsStack.length-1},visitDirective:function(t){t.allExtends=[],this.allExtendsStack.push(t.allExtends)},visitDirectiveOut:function(){this.allExtendsStack.length=this.allExtendsStack.length-1}},t.processExtendsVisitor=function(){this._visitor=new t.visitor(this)},t.processExtendsVisitor.prototype={run:function(e){var n=new t.extendFinderVisitor;return n.run(e),n.foundExtends?(e.allExtends=e.allExtends.concat(this.doExtendChaining(e.allExtends,e.allExtends)),this.allExtendsStack=[e.allExtends],this._visitor.visit(e)):e},doExtendChaining:function(e,n,i){var r,o,s,a,l,u,c,h,p=[],f=this;for(i=i||0,r=0;r<e.length;r++)for(o=0;o<n.length;o++)u=e[r],c=n[o],this.inInheritanceChain(c,u)||(l=[c.selfSelectors[0]],s=f.findMatch(u,l),s.length&&u.selfSelectors.forEach(function(e){a=f.extendSelector(s,l,e),h=new t.Extend(c.selector,c.option,0),h.selfSelectors=a,a[a.length-1].extendList=[h],p.push(h),h.ruleset=c.ruleset,h.parents=[c,u],c.firstExtendOnThisSelectorPath&&(h.firstExtendOnThisSelectorPath=!0,c.ruleset.paths.push(a))}));if(p.length){if(this.extendChainCount++,i>100){var d="{unable to calculate}",m="{unable to calculate}";try{d=p[0].selfSelectors[0].toCSS(),m=p[0].selector.toCSS()}catch(g){}throw{message:"extend circular reference detected. One of the circular extends is currently:"+d+":extend("+m+")"}}return p.concat(f.doExtendChaining(p,n,i+1))}return p},inInheritanceChain:function(t,e){if(t===e)return!0;if(e.parents){if(this.inInheritanceChain(t,e.parents[0]))return!0;if(this.inInheritanceChain(t,e.parents[1]))return!0}return!1},visitRule:function(t,e){e.visitDeeper=!1},visitMixinDefinition:function(t,e){e.visitDeeper=!1},visitSelector:function(t,e){e.visitDeeper=!1},visitRuleset:function(t){if(!t.root){var e,n,i,r,o=this.allExtendsStack[this.allExtendsStack.length-1],s=[],a=this;for(i=0;i<o.length;i++)for(n=0;n<t.paths.length;n++)r=t.paths[n],r[r.length-1].extendList.length||(e=this.findMatch(o[i],r),e.length&&o[i].selfSelectors.forEach(function(t){s.push(a.extendSelector(e,r,t))}));t.paths=t.paths.concat(s)}},findMatch:function(t,e){var n,i,r,o,s,a,l,u=this,c=t.selector.elements,h=[],p=[];for(n=0;n<e.length;n++)for(i=e[n],r=0;r<i.elements.length;r++)for(o=i.elements[r],(t.allowBefore||0==n&&0==r)&&h.push({pathIndex:n,index:r,matched:0,initialCombinator:o.combinator}),a=0;a<h.length;a++)l=h[a],s=o.combinator.value,""==s&&0===r&&(s=" "),!u.isElementValuesEqual(c[l.matched].value,o.value)||l.matched>0&&c[l.matched].combinator.value!==s?l=null:l.matched++,l&&(l.finished=l.matched===c.length,l.finished&&!t.allowAfter&&(r+1<i.elements.length||n+1<e.length)&&(l=null)),l?l.finished&&(l.length=c.length,l.endPathIndex=n,l.endPathElementIndex=r+1,h.length=0,p.push(l)):(h.splice(a,1),a--);return p},isElementValuesEqual:function(e,n){return"string"==typeof e||"string"==typeof n?e===n:e instanceof t.Attribute?e.op!==n.op||e.key!==n.key?!1:e.value&&n.value?(e=e.value.value||e.value,n=n.value.value||n.value,e===n):e.value||n.value?!1:!0:!1},extendSelector:function(e,n,i){var r,o,s,a,l=0,u=0,c=[];for(r=0;r<e.length;r++)a=e[r],o=n[a.pathIndex],s=new t.Element(a.initialCombinator,i.elements[0].value,i.elements[0].index),a.pathIndex>l&&u>0&&(c[c.length-1].elements=c[c.length-1].elements.concat(n[l].elements.slice(u)),u=0,l++),c=c.concat(n.slice(l,a.pathIndex)),c.push(new t.Selector(o.elements.slice(u,a.index).concat([s]).concat(i.elements.slice(1)))),l=a.endPathIndex,u=a.endPathElementIndex,u>=o.elements.length&&(u=0,l++);return l<n.length&&u>0&&(c[c.length-1].elements=c[c.length-1].elements.concat(n[l].elements.slice(u)),u=0,l++),c=c.concat(n.slice(l,n.length))},visitRulesetOut:function(){},visitMedia:function(t){var e=t.allExtends.concat(this.allExtendsStack[this.allExtendsStack.length-1]);e=e.concat(this.doExtendChaining(e,t.allExtends)),this.allExtendsStack.push(e)},visitMediaOut:function(){this.allExtendsStack.length=this.allExtendsStack.length-1},visitDirective:function(t){var e=t.allExtends.concat(this.allExtendsStack[this.allExtendsStack.length-1]);e=e.concat(this.doExtendChaining(e,t.allExtends)),this.allExtendsStack.push(e)},visitDirectiveOut:function(){this.allExtendsStack.length=this.allExtendsStack.length-1}}}(n("./tree"));var y=/^(file|chrome(-extension)?|resource|qrc|app):/.test(location.protocol);if(g.env=g.env||("127.0.0.1"==location.hostname||"0.0.0.0"==location.hostname||"localhost"==location.hostname||location.port.length>0||y?"development":"production"),g.async=g.async||!1,g.fileAsync=g.fileAsync||!1,g.poll=g.poll||(y?1e3:1500),g.functions)for(var b in g.functions)g.tree.functions[b]=g.functions[b];var w=/!dumpLineNumbers:(comments|mediaquery|all)/.exec(location.hash);w&&(g.dumpLineNumbers=w[1]),g.watch=function(){return g.watchMode||(g.env="development",i()),this.watchMode=!0},g.unwatch=function(){return clearInterval(g.watchTimer),this.watchMode=!1},/!watch/.test(location.hash)&&g.watch();var _=null;if("development"!=g.env)try{_="undefined"==typeof t.localStorage?null:t.localStorage}catch(x){}var S=document.getElementsByTagName("link"),k=/^text\/(x-)?less$/;g.sheets=[];for(var C=0;C<S.length;C++)("stylesheet/less"===S[C].rel||S[C].rel.match(/stylesheet/)&&S[C].type.match(k))&&g.sheets.push(S[C]);var E="";g.modifyVars=function(t){var e=E;for(var n in t)e+=("@"===n.slice(0,1)?"":"@")+n+": "+(";"===t[n].slice(-1)?t[n]:t[n]+";");new g.Parser(new g.tree.parseEnv(g)).parse(e,function(t,e){t?m(t,"session_cache"):c(e.toCSS(g),g.sheets[g.sheets.length-1])})},g.refresh=function(t){var e,n;e=n=new Date,o(function(t,i,r,o,s){return t?m(t,o.href):(s.local?d("loading "+o.href+" from cache."):(d("parsed "+o.href+" successfully."),c(i.toCSS(g),o,s.lastModified)),d("css for "+o.href+" generated in "+(new Date-n)+"ms"),0===s.remaining&&d("css generated in "+(new Date-e)+"ms"),n=new Date,void 0)},t),r()},g.refreshStyles=r,g.refresh("development"===g.env),"function"==typeof define&&define.amd&&define(function(){return g})}(window),function(t){var e="undefined";!function(t,e){"undefined"!=typeof module?module.exports=e():"function"==typeof define&&"object"==typeof define.amd?define(e):this[t]=e()}("log",function(){function n(n){return typeof console===e?h:console[n]===t?console.log!==t?i(console,"log"):h:i(console,n)}function i(e,n){var i=e[n];if(i.bind!==t)return e[n].bind(e);if(Function.prototype.bind===t)return r(i,e);try{return Function.prototype.bind.call(e[n],e)}catch(o){return r(i,e)}}function r(t,e){return function(){Function.prototype.apply.apply(t,[e,arguments])}}function o(t){for(var e=0;e<p.length;e++)c[p[e]]=t(p[e])}function s(){return typeof window!==e&&window.document!==t&&window.document.cookie!==t}function a(){try{return typeof window!==e&&window.localStorage!==t}catch(n){return!1}}function l(t){var e;for(var n in c.levels)if(c.levels.hasOwnProperty(n)&&c.levels[n]===t){e=n;break}if(a())window.localStorage.loglevel=e;else{if(!s())return;window.document.cookie="loglevel="+e+";"}}function u(){var t;if(a()&&(t=window.localStorage.loglevel),!t&&s()){var e=f.exec(window.document.cookie)||[];t=e[1]}c.setLevel(c.levels[t]||c.levels.WARN)}var c={},h=function(){},p=["trace","debug","info","warn","error"],f=/loglevel=([^;]+)/;return c.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},c.setLevel=function(i){if("number"==typeof i&&i>=0&&i<=c.levels.SILENT){if(l(i),i===c.levels.SILENT)return o(function(){return h}),void 0;if(typeof console===e)return o(function(t){return function(){typeof console!==e&&(c.setLevel(i),c[t].apply(c,arguments))}}),"No console available for logging";o(function(t){return i<=c.levels[t.toUpperCase()]?n(t):h})}else{if("string"!=typeof i||c.levels[i.toUpperCase()]===t)throw"log.setLevel() called with invalid level: "+i;c.setLevel(c.levels[i.toUpperCase()])}},c.enableAll=function(){c.setLevel(c.levels.TRACE)},c.disableAll=function(){c.setLevel(c.levels.SILENT)},u(),c})}(),function(){function t(t){this.tokens=[],this.tokens.links={},this.options=t||a.defaults,this.rules=l.normal,this.options.gfm&&(this.rules=this.options.tables?l.tables:l.gfm)}function e(t,e){if(this.options=e||a.defaults,this.links=t,this.rules=u.normal,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.gfm?this.rules=this.options.breaks?u.breaks:u.gfm:this.options.pedantic&&(this.rules=u.pedantic)}function n(t){this.tokens=[],this.token=null,this.options=t||a.defaults}function i(t,e){return t.replace(e?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function r(t,e){return t=t.source,e=e||"",function n(i,r){return i?(r=r.source||r,r=r.replace(/(^|[^\[])\^/g,"$1"),t=t.replace(i,r),n):new RegExp(t,e)}}function o(){}function s(t){for(var e,n,i=1;i<arguments.length;i++){e=arguments[i];for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t}function a(e,r,o){if(o||"function"==typeof r){o||(o=r,r=null),r=s({},a.defaults,r||{});var l,u,c=r.highlight,h=0;try{l=t.lex(e,r)}catch(p){return o(p)}u=l.length;var f=function(){var t,e;try{t=n.parse(l,r)}catch(i){e=i}return r.highlight=c,e?o(e):o(null,t)};if(!c||c.length<3)return f();if(delete r.highlight,!u)return f();for(;h<l.length;h++)!function(t){return"code"!==t.type?--u||f():c(t.text,t.lang,function(e,n){return null==n||n===t.text?--u||f():(t.text=n,t.escaped=!0,--u||f(),void 0)})}(l[h])}else try{return r&&(r=s({},a.defaults,r)),n.parse(t.lex(e,r),r)}catch(p){if(p.message+="\nPlease report this to https://github.com/chjj/marked.",(r||a.defaults).silent)return"<p>An error occured:</p><pre>"+i(p.message+"",!0)+"</pre>";throw p}}var l={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:o,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:o,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,blockquote:/^( *>[^\n]+(\n[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment|closed|closing) *(?:\n{2,}|\s*$)/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:o,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/};l.bullet=/(?:[*+-]|\d+\.)/,l.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,l.item=r(l.item,"gm")(/bull/g,l.bullet)(),l.list=r(l.list)(/bull/g,l.bullet)("hr",/\n+(?=(?: *[-*_]){3,} *(?:\n+|$))/)(),l._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|@)\\b",l.html=r(l.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,l._tag)(),l.paragraph=r(l.paragraph)("hr",l.hr)("heading",l.heading)("lheading",l.lheading)("blockquote",l.blockquote)("tag","<"+l._tag)("def",l.def)(),l.normal=s({},l),l.gfm=s({},l.normal,{fences:/^ *(`{3,}|~{3,}) *(\S+)? *\n([\s\S]+?)\s*\1 *(?:\n+|$)/,paragraph:/^/}),l.gfm.paragraph=r(l.paragraph)("(?!","(?!"+l.gfm.fences.source.replace("\\1","\\2")+"|"+l.list.source.replace("\\1","\\3")+"|")(),l.tables=s({},l.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),t.rules=l,t.lex=function(e,n){var i=new t(n);return i.lex(e)},t.prototype.lex=function(t){return t=t.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(t,!0)},t.prototype.token=function(t,e){for(var n,i,r,o,s,a,u,c,h,t=t.replace(/^ +$/gm,"");t;)if((r=this.rules.newline.exec(t))&&(t=t.substring(r[0].length),r[0].length>1&&this.tokens.push({type:"space"})),r=this.rules.code.exec(t))t=t.substring(r[0].length),r=r[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?r:r.replace(/\n+$/,"")});else if(r=this.rules.fences.exec(t))t=t.substring(r[0].length),this.tokens.push({type:"code",lang:r[2],text:r[3]});else if(r=this.rules.heading.exec(t))t=t.substring(r[0].length),this.tokens.push({type:"heading",depth:r[1].length,text:r[2]});else if(e&&(r=this.rules.nptable.exec(t))){for(t=t.substring(r[0].length),a={type:"table",header:r[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:r[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:r[3].replace(/\n$/,"").split("\n")},c=0;c<a.align.length;c++)a.align[c]=/^ *-+: *$/.test(a.align[c])?"right":/^ *:-+: *$/.test(a.align[c])?"center":/^ *:-+ *$/.test(a.align[c])?"left":null;for(c=0;c<a.cells.length;c++)a.cells[c]=a.cells[c].split(/ *\| */);this.tokens.push(a)}else if(r=this.rules.lheading.exec(t))t=t.substring(r[0].length),this.tokens.push({type:"heading",depth:"="===r[2]?1:2,text:r[1]});else if(r=this.rules.hr.exec(t))t=t.substring(r[0].length),this.tokens.push({type:"hr"});else if(r=this.rules.blockquote.exec(t))t=t.substring(r[0].length),this.tokens.push({type:"blockquote_start"}),r=r[0].replace(/^ *> ?/gm,""),this.token(r,e),this.tokens.push({type:"blockquote_end"});else if(r=this.rules.list.exec(t)){for(t=t.substring(r[0].length),o=r[2],this.tokens.push({type:"list_start",ordered:o.length>1}),r=r[0].match(this.rules.item),n=!1,h=r.length,c=0;h>c;c++)a=r[c],u=a.length,a=a.replace(/^ *([*+-]|\d+\.) +/,""),~a.indexOf("\n ")&&(u-=a.length,a=this.options.pedantic?a.replace(/^ {1,4}/gm,""):a.replace(new RegExp("^ {1,"+u+"}","gm"),"")),this.options.smartLists&&c!==h-1&&(s=l.bullet.exec(r[c+1])[0],o===s||o.length>1&&s.length>1||(t=r.slice(c+1).join("\n")+t,c=h-1)),i=n||/\n\n(?!\s*$)/.test(a),c!==h-1&&(n="\n"===a.charAt(a.length-1),i||(i=n)),this.tokens.push({type:i?"loose_item_start":"list_item_start"}),this.token(a,!1),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"})}else if(r=this.rules.html.exec(t))t=t.substring(r[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:"pre"===r[1]||"script"===r[1]||"style"===r[1],text:r[0]});else if(e&&(r=this.rules.def.exec(t)))t=t.substring(r[0].length),this.tokens.links[r[1].toLowerCase()]={href:r[2],title:r[3]};else if(e&&(r=this.rules.table.exec(t))){for(t=t.substring(r[0].length),a={type:"table",header:r[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:r[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:r[3].replace(/(?: *\| *)?\n$/,"").split("\n")},c=0;c<a.align.length;c++)a.align[c]=/^ *-+: *$/.test(a.align[c])?"right":/^ *:-+: *$/.test(a.align[c])?"center":/^ *:-+ *$/.test(a.align[c])?"left":null;for(c=0;c<a.cells.length;c++)a.cells[c]=a.cells[c].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(a)}else if(e&&(r=this.rules.paragraph.exec(t)))t=t.substring(r[0].length),this.tokens.push({type:"paragraph",text:"\n"===r[1].charAt(r[1].length-1)?r[1].slice(0,-1):r[1]});else if(r=this.rules.text.exec(t))t=t.substring(r[0].length),this.tokens.push({type:"text",text:r[0]});else if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0));return this.tokens};var u={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:o,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)(?:\{(attributes)\})?/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\](?:\{(attributes)\})?/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:__|[\s\S])+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:o,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/};u._inside=/(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/,u._href=/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/,u._attributes=/\{[^\}]*\}/,u.link=r(u.link)("inside",u._inside)("href",u._href)("attributes",u._attributes)(),u.reflink=r(u.reflink)("inside",u._inside)("attributes",u._attributes)(),u.normal=s({},u),u.pedantic=s({},u.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),u.gfm=s({},u.normal,{escape:r(u.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:r(u.text)("]|","~]|")("|","|https?://|")()}),u.breaks=s({},u.gfm,{br:r(u.br)("{2,}","*")(),text:r(u.gfm.text)("{2,}","*")()}),e.rules=u,e.output=function(t,n,i){var r=new e(n,i);return r.output(t)},e.prototype.output=function(t){for(var e,n,r,o,s="";t;)if(o=this.rules.escape.exec(t))t=t.substring(o[0].length),s+=o[1];else if(o=this.rules.autolink.exec(t))t=t.substring(o[0].length),"@"===o[2]?(n=":"===o[1].charAt(6)?this.mangle(o[1].substring(7)):this.mangle(o[1]),r=this.mangle("mailto:")+n):(n=i(o[1]),r=n),s+='<a href="'+r+'">'+n+"</a>";else if(o=this.rules.url.exec(t))t=t.substring(o[0].length),n=i(o[1]),r=n,s+='<a href="'+r+'">'+n+"</a>";else if(o=this.rules.tag.exec(t))t=t.substring(o[0].length),s+=this.options.sanitize?i(o[0]):o[0];else if(o=this.rules.link.exec(t))t=t.substring(o[0].length),s+=this.outputLink(o,{href:o[2],title:o[3],attributes:o[4]});else if((o=this.rules.reflink.exec(t))||(o=this.rules.nolink.exec(t))){if(t=t.substring(o[0].length),e=(o[2]||o[1]).replace(/\s+/g," "),e=this.links[e.toLowerCase()],!e||!e.href){s+=o[0].charAt(0),t=o[0].substring(1)+t;continue}e.attributes=o[3],s+=this.outputLink(o,e)}else if(o=this.rules.strong.exec(t))t=t.substring(o[0].length),s+="<strong>"+this.output(o[2]||o[1])+"</strong>";else if(o=this.rules.em.exec(t))t=t.substring(o[0].length),s+="<em>"+this.output(o[2]||o[1])+"</em>";else if(o=this.rules.code.exec(t))t=t.substring(o[0].length),s+="<code>"+i(o[2],!0)+"</code>";else if(o=this.rules.br.exec(t))t=t.substring(o[0].length),s+="<br>";else if(o=this.rules.del.exec(t))t=t.substring(o[0].length),s+="<del>"+this.output(o[1])+"</del>";else if(o=this.rules.text.exec(t))t=t.substring(o[0].length),s+=i(this.smartypants(o[0]));else if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0));return s},e.prototype.outputLink=function(t,e){if("!"!==t[0].charAt(0)){var n=e.attributes?JSON.parse(e.attributes):{};e.title&&(n.title=e.title);var r='<a href="'+i(e.href)+'"';for(var o in n)this.options.sanitize&&/^on/i.test(o)||n.hasOwnProperty(o)&&(r+=" "+o+"="+'"'+i(n[o])+'"');return r+=">"+this.output(t[1])+"</a>"}return e.href.indexOf("/embed/")>=0||e.href.indexOf("//player.vimeo.com/video/")>=0?this.outputIframe(t,e):/\.mp4$/.test(e.href)?this.outputVideo(t,e):this.outputImage(t,e)},e.prototype.outputIframe=function(t,e){return'<iframe width="420" height="315" src="'+i(e.href)+'"'+(e.title?' title="'+i(e.title)+'"':"")+' frameborder="0"'+" webkitallowfullscreen mozallowfullscreen allowfullscreen"+"></iframe>"},e.prototype.outputVideo=function(t,e){return'<video width="420" height="315" controls><source src="'+i(e.href)+'"'+' type="video/mp4"><a href="'+i(e.href)+'">'+this.output(t[1])+"</a></video>"
},e.prototype.outputImage=function(t,e){return'<img src="'+i(e.href)+'" alt="'+i(t[1])+'"'+(e.title?' title="'+i(e.title)+'"':"")+">"},e.prototype.smartypants=function(t){return this.options.smartypants?t.replace(/--/g,"—").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):t},e.prototype.mangle=function(t){for(var e,n="",i=t.length,r=0;i>r;r++)e=t.charCodeAt(r),Math.random()>.5&&(e="x"+e.toString(16)),n+="&#"+e+";";return n},n.parse=function(t,e){var i=new n(e);return i.parse(t)},n.prototype.parse=function(t){this.inline=new e(t.links,this.options),this.tokens=t.reverse();for(var n="";this.next();)n+=this.tok();return n},n.prototype.next=function(){return this.token=this.tokens.pop()},n.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},n.prototype.parseText=function(){for(var t=this.token.text;"text"===this.peek().type;)t+="\n"+this.next().text;return this.inline.output(t)},n.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return"<hr>\n";case"heading":return"<h"+this.token.depth+' id="'+this.token.text.toLowerCase().replace(/[^\w]+/g,"-")+'">'+this.inline.output(this.token.text)+"</h"+this.token.depth+">\n";case"code":if(this.options.highlight){var t=this.options.highlight(this.token.text,this.token.lang);null!=t&&t!==this.token.text&&(this.token.escaped=!0,this.token.text=t)}return this.token.escaped||(this.token.text=i(this.token.text,!0)),"<pre><code"+(this.token.lang?' class="'+this.options.langPrefix+this.token.lang+'"':"")+">"+this.token.text+"</code></pre>\n";case"table":var e,n,r,o,s,a="";for(a+="<thead>\n<tr>\n",n=0;n<this.token.header.length;n++)e=this.inline.output(this.token.header[n]),a+="<th",this.token.align[n]&&(a+=' style="text-align:'+this.token.align[n]+'"'),a+=">"+e+"</th>\n";for(a+="</tr>\n</thead>\n",a+="<tbody>\n",n=0;n<this.token.cells.length;n++){for(r=this.token.cells[n],a+="<tr>\n",s=0;s<r.length;s++)o=this.inline.output(r[s]),a+="<td",this.token.align[s]&&(a+=' style="text-align:'+this.token.align[s]+'"'),a+=">"+o+"</td>\n";a+="</tr>\n"}return a+="</tbody>\n","<table>\n"+a+"</table>\n";case"blockquote_start":for(var a="";"blockquote_end"!==this.next().type;)a+=this.tok();return"<blockquote>\n"+a+"</blockquote>\n";case"list_start":for(var l=this.token.ordered?"ol":"ul",a="";"list_end"!==this.next().type;)a+=this.tok();return"<"+l+">\n"+a+"</"+l+">\n";case"list_item_start":for(var a="";"list_item_end"!==this.next().type;)a+="text"===this.token.type?this.parseText():this.tok();return"<li>"+a+"</li>\n";case"loose_item_start":for(var a="";"list_item_end"!==this.next().type;)a+=this.tok();return"<li>"+a+"</li>\n";case"html":return this.token.pre||this.options.pedantic?this.token.text:this.inline.output(this.token.text);case"paragraph":return"<p>"+this.inline.output(this.token.text)+"</p>\n";case"text":return"<p>"+this.parseText()+"</p>\n"}},o.exec=o,a.options=a.setOptions=function(t){return s(a.defaults,t),a},a.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,smartLists:!1,silent:!1,highlight:null,langPrefix:"lang-",smartypants:!1},a.Parser=n,a.parser=n.parse,a.Lexer=t,a.lexer=t.lex,a.InlineLexer=e,a.inlineLexer=e.output,a.parse=a,"object"==typeof exports?module.exports=a:"function"==typeof define&&define.amd?define(function(){return a}):this.marked=a}.call(function(){return this||("undefined"!=typeof window?window:global)}()),function(t){function e(t,e){return function(n){return l(t.call(this,n),e)}}function n(t){return function(e){return this.lang().ordinal(t.call(this,e))}}function i(){}function r(t){s(this,t)}function o(t){var e=this._data={},n=t.years||t.year||t.y||0,i=t.months||t.month||t.M||0,r=t.weeks||t.week||t.w||0,o=t.days||t.day||t.d||0,s=t.hours||t.hour||t.h||0,l=t.minutes||t.minute||t.m||0,u=t.seconds||t.second||t.s||0,c=t.milliseconds||t.millisecond||t.ms||0;this._milliseconds=c+1e3*u+6e4*l+36e5*s,this._days=o+7*r,this._months=i+12*n,e.milliseconds=c%1e3,u+=a(c/1e3),e.seconds=u%60,l+=a(u/60),e.minutes=l%60,s+=a(l/60),e.hours=s%24,o+=a(s/24),o+=7*r,e.days=o%30,i+=a(o/30),e.months=i%12,n+=a(i/12),e.years=n}function s(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function a(t){return 0>t?Math.ceil(t):Math.floor(t)}function l(t,e){for(var n=t+"";n.length<e;)n="0"+n;return n}function u(t,e,n){var i,r=e._milliseconds,o=e._days,s=e._months;r&&t._d.setTime(+t+r*n),o&&t.date(t.date()+o*n),s&&(i=t.date(),t.date(1).month(t.month()+s*n).date(Math.min(i,t.daysInMonth())))}function c(t){return"[object Array]"===Object.prototype.toString.call(t)}function h(t,e){var n,i=Math.min(t.length,e.length),r=Math.abs(t.length-e.length),o=0;for(n=0;i>n;n++)~~t[n]!==~~e[n]&&o++;return o+r}function p(t,e){return e.abbr=t,L[t]||(L[t]=new i),L[t].set(e),L[t]}function f(t){return t?(!L[t]&&$&&require("./lang/"+t),L[t]):O.fn._lang}function d(t){return t.match(/\[.*\]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function m(t){var e,n,i=t.match(R);for(e=0,n=i.length;n>e;e++)i[e]=re[i[e]]?re[i[e]]:d(i[e]);return function(r){var o="";for(e=0;n>e;e++)o+="function"==typeof i[e].call?i[e].call(r,t):i[e];return o}}function g(t,e){function n(e){return t.lang().longDateFormat(e)||e}for(var i=5;i--&&B.test(e);)e=e.replace(B,n);return ee[e]||(ee[e]=m(e)),ee[e](t)}function v(t){switch(t){case"DDDD":return j;case"YYYY":return U;case"YYYYY":return H;case"S":case"SS":case"SSS":case"DDD":return V;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":case"a":case"A":return q;case"X":return Y;case"Z":case"ZZ":return W;case"T":return J;case"MM":case"DD":case"YY":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":return F;default:return new RegExp(t.replace("\\",""))}}function y(t,e,n){var i,r=n._a;switch(t){case"M":case"MM":r[1]=null==e?0:~~e-1;break;case"MMM":case"MMMM":i=f(n._l).monthsParse(e),null!=i?r[1]=i:n._isValid=!1;break;case"D":case"DD":case"DDD":case"DDDD":null!=e&&(r[2]=~~e);break;case"YY":r[0]=~~e+(~~e>68?1900:2e3);break;case"YYYY":case"YYYYY":r[0]=~~e;break;case"a":case"A":n._isPm="pm"===(e+"").toLowerCase();break;case"H":case"HH":case"h":case"hh":r[3]=~~e;break;case"m":case"mm":r[4]=~~e;break;case"s":case"ss":r[5]=~~e;break;case"S":case"SS":case"SSS":r[6]=~~(1e3*("0."+e));break;case"X":n._d=new Date(1e3*parseFloat(e));break;case"Z":case"ZZ":n._useUTC=!0,i=(e+"").match(Q),i&&i[1]&&(n._tzh=~~i[1]),i&&i[2]&&(n._tzm=~~i[2]),i&&"+"===i[0]&&(n._tzh=-n._tzh,n._tzm=-n._tzm)}null==e&&(n._isValid=!1)}function b(t){var e,n,i=[];if(!t._d){for(e=0;7>e;e++)t._a[e]=i[e]=null==t._a[e]?2===e?1:0:t._a[e];i[3]+=t._tzh||0,i[4]+=t._tzm||0,n=new Date(0),t._useUTC?(n.setUTCFullYear(i[0],i[1],i[2]),n.setUTCHours(i[3],i[4],i[5],i[6])):(n.setFullYear(i[0],i[1],i[2]),n.setHours(i[3],i[4],i[5],i[6])),t._d=n}}function w(t){var e,n,i=t._f.match(R),r=t._i;for(t._a=[],e=0;e<i.length;e++)n=(v(i[e]).exec(r)||[])[0],n&&(r=r.slice(r.indexOf(n)+n.length)),re[i[e]]&&y(i[e],n,t);t._isPm&&t._a[3]<12&&(t._a[3]+=12),t._isPm===!1&&12===t._a[3]&&(t._a[3]=0),b(t)}function _(t){for(var e,n,i,o,a=99;t._f.length;){if(e=s({},t),e._f=t._f.pop(),w(e),n=new r(e),n.isValid()){i=n;break}o=h(e._a,n.toArray()),a>o&&(a=o,i=n)}s(t,i)}function x(t){var e,n=t._i;if(K.exec(n)){for(t._f="YYYY-MM-DDT",e=0;4>e;e++)if(X[e][1].exec(n)){t._f+=X[e][0];break}W.exec(n)&&(t._f+=" Z"),w(t)}else t._d=new Date(n)}function S(e){var n=e._i,i=z.exec(n);n===t?e._d=new Date:i?e._d=new Date(+i[1]):"string"==typeof n?x(e):c(n)?(e._a=n.slice(0),b(e)):e._d=n instanceof Date?new Date(+n):new Date(n)}function k(t,e,n,i,r){return r.relativeTime(e||1,!!n,t,i)}function C(t,e,n){var i=I(Math.abs(t)/1e3),r=I(i/60),o=I(r/60),s=I(o/24),a=I(s/365),l=45>i&&["s",i]||1===r&&["m"]||45>r&&["mm",r]||1===o&&["h"]||22>o&&["hh",o]||1===s&&["d"]||25>=s&&["dd",s]||45>=s&&["M"]||345>s&&["MM",I(s/30)]||1===a&&["y"]||["yy",a];return l[2]=e,l[3]=t>0,l[4]=n,k.apply({},l)}function E(t,e,n){var i=n-e,r=n-t.day();return r>i&&(r-=7),i-7>r&&(r+=7),Math.ceil(O(t).add("d",r).dayOfYear()/7)}function T(t){var e=t._i,n=t._f;return null===e||""===e?null:("string"==typeof e&&(t._i=e=f().preparse(e)),O.isMoment(e)?(t=s({},e),t._d=new Date(+e._d)):n?c(n)?_(t):w(t):S(t),new r(t))}function M(t,e){O.fn[t]=O.fn[t+"s"]=function(t){var n=this._isUTC?"UTC":"";return null!=t?(this._d["set"+n+e](t),this):this._d["get"+n+e]()}}function P(t){O.duration.fn[t]=function(){return this._data[t]}}function A(t,e){O.duration.fn["as"+t]=function(){return+this/e}}for(var O,N,D="2.0.0",I=Math.round,L={},$="undefined"!=typeof module&&module.exports,z=/^\/?Date\((\-?\d+)/i,R=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYY|YYYY|YY|a|A|hh?|HH?|mm?|ss?|SS?S?|X|zz?|ZZ?|.)/g,B=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,F=/\d\d?/,V=/\d{1,3}/,j=/\d{3}/,U=/\d{1,4}/,H=/[+\-]?\d{1,6}/,q=/[0-9]*[a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF]+\s*?[\u0600-\u06FF]+/i,W=/Z|[\+\-]\d\d:?\d\d/i,J=/T/i,Y=/[\+\-]?\d+(\.\d{1,3})?/,K=/^\s*\d{4}-\d\d-\d\d((T| )(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,G="YYYY-MM-DDTHH:mm:ssZ",X=[["HH:mm:ss.S",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],Q=/([\+\-]|\d\d)/gi,Z="Month|Date|Hours|Minutes|Seconds|Milliseconds".split("|"),te={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},ee={},ne="DDD w W M D d".split(" "),ie="M D H h m s w W".split(" "),re={M:function(){return this.month()+1},MMM:function(t){return this.lang().monthsShort(this,t)},MMMM:function(t){return this.lang().months(this,t)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(t){return this.lang().weekdaysMin(this,t)},ddd:function(t){return this.lang().weekdaysShort(this,t)},dddd:function(t){return this.lang().weekdays(this,t)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return l(this.year()%100,2)},YYYY:function(){return l(this.year(),4)},YYYYY:function(){return l(this.year(),5)},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return~~(this.milliseconds()/100)},SS:function(){return l(~~(this.milliseconds()/10),2)},SSS:function(){return l(this.milliseconds(),3)},Z:function(){var t=-this.zone(),e="+";return 0>t&&(t=-t,e="-"),e+l(~~(t/60),2)+":"+l(~~t%60,2)},ZZ:function(){var t=-this.zone(),e="+";return 0>t&&(t=-t,e="-"),e+l(~~(10*t/6),4)},X:function(){return this.unix()}};ne.length;)N=ne.pop(),re[N+"o"]=n(re[N]);for(;ie.length;)N=ie.pop(),re[N+N]=e(re[N],2);for(re.DDDD=e(re.DDD,3),i.prototype={set:function(t){var e,n;for(n in t)e=t[n],"function"==typeof e?this[n]=e:this["_"+n]=e},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(t){return this._months[t.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(t){return this._monthsShort[t.month()]},monthsParse:function(t){var e,n,i;for(this._monthsParse||(this._monthsParse=[]),e=0;12>e;e++)if(this._monthsParse[e]||(n=O([2e3,e]),i="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[e]=new RegExp(i.replace(".",""),"i")),this._monthsParse[e].test(t))return e},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(t){return this._weekdays[t.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(t){return this._weekdaysShort[t.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(t){return this._weekdaysMin[t.day()]},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(t){var e=this._longDateFormat[t];return!e&&this._longDateFormat[t.toUpperCase()]&&(e=this._longDateFormat[t.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t]=e),e},meridiem:function(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[last] dddd [at] LT",sameElse:"L"},calendar:function(t,e){var n=this._calendar[t];return"function"==typeof n?n.apply(e):n},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(t,e,n,i){var r=this._relativeTime[n];return"function"==typeof r?r(t,e,n,i):r.replace(/%d/i,t)},pastFuture:function(t,e){var n=this._relativeTime[t>0?"future":"past"];return"function"==typeof n?n(e):n.replace(/%s/i,e)},ordinal:function(t){return this._ordinal.replace("%d",t)},_ordinal:"%d",preparse:function(t){return t},postformat:function(t){return t},week:function(t){return E(t,this._week.dow,this._week.doy)},_week:{dow:0,doy:6}},O=function(t,e,n){return T({_i:t,_f:e,_l:n,_isUTC:!1})},O.utc=function(t,e,n){return T({_useUTC:!0,_isUTC:!0,_l:n,_i:t,_f:e})},O.unix=function(t){return O(1e3*t)},O.duration=function(t,e){var n,i=O.isDuration(t),r="number"==typeof t,s=i?t._data:r?{}:t;return r&&(e?s[e]=t:s.milliseconds=t),n=new o(s),i&&t.hasOwnProperty("_lang")&&(n._lang=t._lang),n},O.version=D,O.defaultFormat=G,O.lang=function(t,e){return t?(e?p(t,e):L[t]||f(t),O.duration.fn._lang=O.fn._lang=f(t),void 0):O.fn._lang._abbr},O.langData=function(t){return t&&t._lang&&t._lang._abbr&&(t=t._lang._abbr),f(t)},O.isMoment=function(t){return t instanceof r},O.isDuration=function(t){return t instanceof o},O.fn=r.prototype={clone:function(){return O(this)},valueOf:function(){return+this._d},unix:function(){return Math.floor(+this._d/1e3)},toString:function(){return this.format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._d},toJSON:function(){return O.utc(this).format("YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var t=this;return[t.year(),t.month(),t.date(),t.hours(),t.minutes(),t.seconds(),t.milliseconds()]},isValid:function(){return null==this._isValid&&(this._isValid=this._a?!h(this._a,(this._isUTC?O.utc(this._a):O(this._a)).toArray()):!isNaN(this._d.getTime())),!!this._isValid},utc:function(){return this._isUTC=!0,this},local:function(){return this._isUTC=!1,this},format:function(t){var e=g(this,t||O.defaultFormat);return this.lang().postformat(e)},add:function(t,e){var n;return n="string"==typeof t?O.duration(+e,t):O.duration(t,e),u(this,n,1),this},subtract:function(t,e){var n;return n="string"==typeof t?O.duration(+e,t):O.duration(t,e),u(this,n,-1),this},diff:function(t,e,n){var i,r,o=this._isUTC?O(t).utc():O(t).local(),s=6e4*(this.zone()-o.zone());return e&&(e=e.replace(/s$/,"")),"year"===e||"month"===e?(i=432e5*(this.daysInMonth()+o.daysInMonth()),r=12*(this.year()-o.year())+(this.month()-o.month()),r+=(this-O(this).startOf("month")-(o-O(o).startOf("month")))/i,"year"===e&&(r/=12)):(i=this-o-s,r="second"===e?i/1e3:"minute"===e?i/6e4:"hour"===e?i/36e5:"day"===e?i/864e5:"week"===e?i/6048e5:i),n?r:a(r)},from:function(t,e){return O.duration(this.diff(t)).lang(this.lang()._abbr).humanize(!e)},fromNow:function(t){return this.from(O(),t)},calendar:function(){var t=this.diff(O().startOf("day"),"days",!0),e=-6>t?"sameElse":-1>t?"lastWeek":0>t?"lastDay":1>t?"sameDay":2>t?"nextDay":7>t?"nextWeek":"sameElse";return this.format(this.lang().calendar(e,this))},isLeapYear:function(){var t=this.year();return 0===t%4&&0!==t%100||0===t%400},isDST:function(){return this.zone()<O([this.year()]).zone()||this.zone()<O([this.year(),5]).zone()},day:function(t){var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null==t?e:this.add({d:t-e})},startOf:function(t){switch(t=t.replace(/s$/,"")){case"year":this.month(0);case"month":this.date(1);case"week":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t&&this.day(0),this},endOf:function(t){return this.startOf(t).add(t.replace(/s?$/,"s"),1).subtract("ms",1)},isAfter:function(t,e){return e="undefined"!=typeof e?e:"millisecond",+this.clone().startOf(e)>+O(t).startOf(e)},isBefore:function(t,e){return e="undefined"!=typeof e?e:"millisecond",+this.clone().startOf(e)<+O(t).startOf(e)},isSame:function(t,e){return e="undefined"!=typeof e?e:"millisecond",+this.clone().startOf(e)===+O(t).startOf(e)},zone:function(){return this._isUTC?0:this._d.getTimezoneOffset()},daysInMonth:function(){return O.utc([this.year(),this.month()+1,0]).date()},dayOfYear:function(t){var e=I((O(this).startOf("day")-O(this).startOf("year"))/864e5)+1;return null==t?e:this.add("d",t-e)},isoWeek:function(t){var e=E(this,1,4);return null==t?e:this.add("d",7*(t-e))},week:function(t){var e=this.lang().week(this);return null==t?e:this.add("d",7*(t-e))},lang:function(e){return e===t?this._lang:(this._lang=f(e),this)}},N=0;N<Z.length;N++)M(Z[N].toLowerCase().replace(/s$/,""),Z[N]);M("year","FullYear"),O.fn.days=O.fn.day,O.fn.weeks=O.fn.week,O.fn.isoWeeks=O.fn.isoWeek,O.duration.fn=o.prototype={weeks:function(){return a(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+2592e6*this._months},humanize:function(t){var e=+this,n=C(e,!t,this.lang());return t&&(n=this.lang().pastFuture(e,n)),this.lang().postformat(n)},lang:O.fn.lang};for(N in te)te.hasOwnProperty(N)&&(A(N,te[N]),P(N.toLowerCase()));A("Weeks",6048e5),O.lang("en",{ordinal:function(t){var e=t%10,n=1===~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th";return t+n}}),$&&(module.exports=O),"undefined"==typeof ender&&(this.moment=O),"function"==typeof define&&define.amd&&define("moment",[],function(){return O})}.call(this),function(t){function e(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function n(t){return"undefined"==typeof t}var i={},r=t.TraceKit,o=[].slice,s="?";i.noConflict=function(){return t.TraceKit=r,i},i.wrap=function(t){function e(){try{return t.apply(this,arguments)}catch(e){throw i.report(e),e}}return e},i.report=function(){function n(t){l(),p.push(t)}function r(t){for(var e=p.length-1;e>=0;--e)p[e]===t&&p.splice(e,1)}function s(t,n){var r=null;if(!n||i.collectWindowErrors){for(var s in p)if(e(p,s))try{p[s].apply(null,[t].concat(o.call(arguments,2)))}catch(a){r=a}if(r)throw r}}function a(t,e,n){var r=null;if(d)i.computeStackTrace.augmentStackTraceWithInitialElement(d,e,n,t),r=d,d=null,f=null;else{var o={url:e,line:n};o.func=i.computeStackTrace.guessFunctionName(o.url,o.line),o.context=i.computeStackTrace.gatherContext(o.url,o.line),r={mode:"onerror",message:t,url:document.location.href,stack:[o],useragent:navigator.userAgent}}return s(r,"from window.onerror"),c?c.apply(this,arguments):!1}function l(){h!==!0&&(c=t.onerror,t.onerror=a,h=!0)}function u(e){var n=o.call(arguments,1);if(d){if(f===e)return;var r=d;d=null,f=null,s.apply(null,[r,null].concat(n))}var a=i.computeStackTrace(e);throw d=a,f=e,t.setTimeout(function(){f===e&&(d=null,f=null,s.apply(null,[a,null].concat(n)))},a.incomplete?2e3:0),e}var c,h,p=[],f=null,d=null;return u.subscribe=n,u.unsubscribe=r,u}(),i.computeStackTrace=function(){function r(e){function n(){try{return new t.XMLHttpRequest}catch(e){return new t.ActiveXObject("Microsoft.XMLHTTP")}}if(!i.remoteFetching)return"";try{var r=n();return r.open("GET",e,!1),r.send(""),r.responseText}catch(o){return""}}function o(t){if(!e(x,t)){var n="";-1!==t.indexOf(document.domain)&&(n=r(t)),x[t]=n?n.split("\n"):[]}return x[t]}function a(t,e){var i,r=/function ([^(]*)\(([^)]*)\)/,a=/['"]?([0-9A-Za-z$_]+)['"]?\s*[:=]\s*(function|eval|new Function)/,l="",u=10,c=o(t);if(!c.length)return s;for(var h=0;u>h;++h)if(l=c[e-h]+l,!n(l)){if(i=a.exec(l))return i[1];if(i=r.exec(l))return i[1]}return s}function l(t,e){var r=o(t);if(!r.length)return null;var s=[],a=Math.floor(i.linesOfContext/2),l=a+i.linesOfContext%2,u=Math.max(0,e-a-1),c=Math.min(r.length,e+l-1);e-=1;for(var h=u;c>h;++h)n(r[h])||s.push(r[h]);return s.length>0?s:null}function u(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#]/g,"\\$&")}function c(t){return u(t).replace("<","(?:<|&lt;)").replace(">","(?:>|&gt;)").replace("&","(?:&|&amp;)").replace('"','(?:"|&quot;)').replace(/\s+/g,"\\s+")}function h(t,e){for(var n,i,r=0,s=e.length;s>r;++r)if((n=o(e[r])).length&&(n=n.join("\n"),i=t.exec(n)))return{url:e[r],line:n.substring(0,i.index).split("\n").length,column:i.index-n.lastIndexOf("\n",i.index)-1};return null}function p(t,e,n){var i,r=o(e),s=new RegExp("\\b"+u(t)+"\\b");return n-=1,r&&r.length>n&&(i=s.exec(r[n]))?i.index:null}function f(e){for(var n,i,r,o,s=[t.location.href],a=document.getElementsByTagName("script"),l=""+e,p=/^function(?:\s+([\w$]+))?\s*\(([\w\s,]*)\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/,f=/^function on([\w$]+)\s*\(event\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/,d=0;d<a.length;++d){var m=a[d];m.src&&s.push(m.src)}if(r=p.exec(l)){var g=r[1]?"\\s+"+r[1]:"",v=r[2].split(",").join("\\s*,\\s*");n=u(r[3]).replace(/;$/,";?"),i=new RegExp("function"+g+"\\s*\\(\\s*"+v+"\\s*\\)\\s*{\\s*"+n+"\\s*}")}else i=new RegExp(u(l).replace(/\s+/g,"\\s+"));if(o=h(i,s))return o;if(r=f.exec(l)){var y=r[1];if(n=c(r[2]),i=new RegExp("on"+y+"=[\\'\"]\\s*"+n+"\\s*[\\'\"]","i"),o=h(i,s[0]))return o;if(i=new RegExp(n),o=h(i,s))return o}return null}function d(t){if(!t.stack)return null;for(var e,n,i=/^\s*at (?:((?:\[object object\])?\S+) )?\(?((?:file|http|https):.*?):(\d+)(?::(\d+))?\)?\s*$/i,r=/^\s*(\S*)(?:\((.*?)\))?@((?:file|http|https).*?):(\d+)(?::(\d+))?\s*$/i,o=t.stack.split("\n"),u=[],c=/^(.*) is undefined$/.exec(t.message),h=0,f=o.length;f>h;++h){if(e=r.exec(o[h]))n={url:e[3],func:e[1]||s,args:e[2]?e[2].split(","):"",line:+e[4],column:e[5]?+e[5]:null};else{if(!(e=i.exec(o[h])))continue;n={url:e[2],func:e[1]||s,line:+e[3],column:e[4]?+e[4]:null}}!n.func&&n.line&&(n.func=a(n.url,n.line)),n.line&&(n.context=l(n.url,n.line)),u.push(n)}return u[0]&&u[0].line&&!u[0].column&&c&&(u[0].column=p(c[1],u[0].url,u[0].line)),u.length?{mode:"stack",name:t.name,message:t.message,url:document.location.href,stack:u,useragent:navigator.userAgent}:null}function m(t){for(var e,n=t.stacktrace,i=/ line (\d+), column (\d+) in (?:<anonymous function: ([^>]+)>|([^\)]+))\((.*)\) in (.*):\s*$/i,r=n.split("\n"),o=[],s=0,u=r.length;u>s;s+=2)if(e=i.exec(r[s])){var c={line:+e[1],column:+e[2],func:e[3]||e[4],args:e[5]?e[5].split(","):[],url:e[6]};if(!c.func&&c.line&&(c.func=a(c.url,c.line)),c.line)try{c.context=l(c.url,c.line)}catch(h){}c.context||(c.context=[r[s+1]]),o.push(c)}return o.length?{mode:"stacktrace",name:t.name,message:t.message,url:document.location.href,stack:o,useragent:navigator.userAgent}:null}function g(n){var i=n.message.split("\n");if(i.length<4)return null;var r,s,u,p,f=/^\s*Line (\d+) of linked script ((?:file|http|https)\S+)(?:: in function (\S+))?\s*$/i,d=/^\s*Line (\d+) of inline#(\d+) script in ((?:file|http|https)\S+)(?:: in function (\S+))?\s*$/i,m=/^\s*Line (\d+) of function script\s*$/i,g=[],v=document.getElementsByTagName("script"),y=[];for(s in v)e(v,s)&&!v[s].src&&y.push(v[s]);for(s=2,u=i.length;u>s;s+=2){var b=null;if(r=f.exec(i[s]))b={url:r[2],func:r[3],line:+r[1]};else if(r=d.exec(i[s])){b={url:r[3],func:r[4]};var w=+r[1],_=y[r[2]-1];if(_&&(p=o(b.url))){p=p.join("\n");var x=p.indexOf(_.innerText);x>=0&&(b.line=w+p.substring(0,x).split("\n").length)}}else if(r=m.exec(i[s])){var S=t.location.href.replace(/#.*$/,""),k=r[1],C=new RegExp(c(i[s+1]));p=h(C,[S]),b={url:S,line:p?p.line:k,func:""}}if(b){b.func||(b.func=a(b.url,b.line));var E=l(b.url,b.line),T=E?E[Math.floor(E.length/2)]:null;b.context=E&&T.replace(/^\s*/,"")===i[s+1].replace(/^\s*/,"")?E:[i[s+1]],g.push(b)}}return g.length?{mode:"multiline",name:n.name,message:i[0],url:document.location.href,stack:g,useragent:navigator.userAgent}:null}function v(t,e,n,i){var r={url:e,line:n};if(r.url&&r.line){t.incomplete=!1,r.func||(r.func=a(r.url,r.line)),r.context||(r.context=l(r.url,r.line));var o=/ '([^']+)' /.exec(i);if(o&&(r.column=p(o[1],r.url,r.line)),t.stack.length>0&&t.stack[0].url===r.url){if(t.stack[0].line===r.line)return!1;if(!t.stack[0].line&&t.stack[0].func===r.func)return t.stack[0].line=r.line,t.stack[0].context=r.context,!1}return t.stack.unshift(r),t.partial=!0,!0}return t.incomplete=!0,!1}function y(t,e){for(var n,r,o,l=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,u=[],c={},h=!1,d=y.caller;d&&!h;d=d.caller)if(d!==b&&d!==i.report){if(r={url:null,func:s,line:null,column:null},d.name?r.func=d.name:(n=l.exec(d.toString()))&&(r.func=n[1]),o=f(d)){r.url=o.url,r.line=o.line,r.func===s&&(r.func=a(r.url,r.line));var m=/ '([^']+)' /.exec(t.message||t.description);m&&(r.column=p(m[1],o.url,o.line))}c[""+d]?h=!0:c[""+d]=!0,u.push(r)}e&&u.splice(0,e);var g={mode:"callers",name:t.name,message:t.message,url:document.location.href,stack:u,useragent:navigator.userAgent};return v(g,t.sourceURL||t.fileName,t.line||t.lineNumber,t.message||t.description),g}function b(t,e){var n=null;e=null==e?0:+e;try{if(n=m(t))return n}catch(i){if(_)throw i}try{if(n=d(t))return n}catch(i){if(_)throw i}try{if(n=g(t))return n}catch(i){if(_)throw i}try{if(n=y(t,e+1))return n}catch(i){if(_)throw i}return{mode:"failed"}}function w(t){t=(null==t?0:+t)+1;try{throw new Error}catch(e){return b(e,t+1)}return null}var _=!1,x={};return b.augmentStackTraceWithInitialElement=v,b.guessFunctionName=a,b.gatherContext=l,b.ofCaller=w,b}(),i.remoteFetching||(i.remoteFetching=!0),i.collectWindowErrors||(i.collectWindowErrors=!0),(!i.linesOfContext||i.linesOfContext<1)&&(i.linesOfContext=7),t.TraceKit=i}(window),function(t,e){"use strict";function n(t,e){var n,i;e=e||{},t="raven"+t.substr(0,1).toUpperCase()+t.substr(1),document.createEvent?(n=document.createEvent("HTMLEvents"),n.initEvent(t,!0,!0)):(n=document.createEventObject(),n.eventType=t);for(i in e)e.hasOwnProperty(i)&&(n[i]=e[i]);if(document.createEvent)document.dispatchEvent(n);else try{document.fireEvent("on"+n.eventType.toLowerCase(),n)}catch(r){}}function i(t){this.name="RavenConfigError",this.message=t}function r(t){var e=O.exec(t),n={},r=7;try{for(;r--;)n[A[r]]=e[r]||""}catch(o){throw new i("Invalid DSN: "+t)}if(n.pass)throw new i("Do not specify your private key in the DSN!");return n}function o(t){return"undefined"==typeof t}function s(t){return"function"==typeof t}function a(t){return"string"==typeof t}function l(t,e){var n,i;if(o(t.length))for(n in t)t.hasOwnProperty(n)&&e.call(null,n,t[n]);else if(i=t.length)for(n=0;i>n;n++)e.call(null,n,t[n])}function u(){if(N)return N;var t=["sentry_version=4","sentry_client=raven-js/"+P.VERSION];return S&&t.push("sentry_key="+S),N="?"+t.join("&")}function c(t,e){var i=[];t.stack&&t.stack.length&&l(t.stack,function(t,e){var n=h(e);n&&i.push(n)}),n("handle",{stackInfo:t,options:e}),f(t.name,t.message,t.url,t.lineno,i,e)}function h(t){if(t.url){var e,n={filename:t.url,lineno:t.line,colno:t.column,"function":t.func||"?"},i=p(t);if(i){var r=["pre_context","context_line","post_context"];for(e=3;e--;)n[r[e]]=i[e]}return n.in_app=!(!T.includePaths.test(n.filename)||/(Raven|TraceKit)\./.test(n["function"])||/raven\.(min\.)js$/.test(n.filename)),n}}function p(t){if(t.context&&T.fetchContext){for(var e=t.context,n=~~(e.length/2),i=e.length,r=!1;i--;)if(e[i].length>300){r=!0;break}if(r){if(o(t.column))return;return[[],e[n].substr(t.column,50),[]]}return[e.slice(0,n),e[n],e.slice(n+1)]}}function f(t,e,n,i,r,o){var s,a;e&&(T.ignoreErrors.test(e)||(r&&r.length?(s={frames:r},n=n||r[0].filename):n&&(s={frames:[{filename:n,lineno:i}]}),T.ignoreUrls&&T.ignoreUrls.test(n)||(!T.whitelistUrls||T.whitelistUrls.test(n))&&(a=i?e+" at "+i:e,g(d({exception:{type:t,value:e},stacktrace:s,culprit:n,message:a},o)))))}function d(t,e){return e?(l(e,function(e,n){t[e]=n}),t):t}function m(){var t={url:document.location.href,headers:{"User-Agent":navigator.userAgent}};return document.referrer&&(t.headers.Referer=document.referrer),t}function g(t){y()&&(t=d({project:k,logger:T.logger,site:T.site,platform:"javascript",request:m()},t),t.tags=d(T.tags,t.tags),t.extra=d(T.extra,t.extra),t.tags||delete t.tags,t.extra||delete t.extra,x&&(t.user=x),s(T.dataCallback)&&(t=T.dataCallback(t)),(!s(T.shouldSendCallback)||T.shouldSendCallback(t))&&v(t))}function v(t){var e=new Image,i=_+u()+"&sentry_data="+encodeURIComponent(JSON.stringify(t));e.onload=function(){n("success",{data:t,src:i})},e.onerror=e.onabort=function(){n("failure",{data:t,src:i})},e.src=i}function y(){return E?_?!0:(t.console&&console.error&&console.error("Error: Raven has not been configured."),!1):!1}function b(t){for(var e=[],n=t.length;n--;)e[n]=a(t[n])?t[n].replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1"):t[n].source;return new RegExp(e.join("|"),"i")}var w,_,x,S,k,C=t.Raven,E=!(!t.JSON||!t.JSON.stringify),T={logger:"javascript",ignoreErrors:[],ignoreUrls:[],whitelistUrls:[],includePaths:[],collectWindowErrors:!0,tags:{},extra:{}},M=TraceKit.noConflict();M.remoteFetching=!1;var P={VERSION:"1.1.2",TraceKit:M,afterLoad:function(){var e=t.RavenConfig;e&&this.config(e.dsn,e.config).install()},noConflict:function(){return t.Raven=C,P},config:function(t,e){var n=r(t),i=n.path.lastIndexOf("/"),o=n.path.substr(1,i);return e&&l(e,function(t,e){T[t]=e}),T.ignoreErrors.push("Script error."),T.ignoreErrors.push("Script error"),T.ignoreErrors=b(T.ignoreErrors),T.ignoreUrls=T.ignoreUrls.length?b(T.ignoreUrls):!1,T.whitelistUrls=T.whitelistUrls.length?b(T.whitelistUrls):!1,T.includePaths=b(T.includePaths),S=n.user,k=~~n.path.substr(i+1),_="//"+n.host+(n.port?":"+n.port:"")+"/"+o+"api/"+k+"/store/",n.protocol&&(_=n.protocol+":"+_),T.fetchContext&&(M.remoteFetching=!0),T.linesOfContext&&(M.linesOfContext=T.linesOfContext),M.collectWindowErrors=!!T.collectWindowErrors,P},install:function(){return y()?(M.report.subscribe(c),P):void 0},context:function(t,n,i){return s(t)&&(i=n||[],n=t,t=e),P.wrap(t,n).apply(this,i)},wrap:function(t,n){function i(){for(var e=[],i=arguments.length;i--;)e[i]=P.wrap(t,arguments[i]);try{return n.apply(this,e)}catch(r){throw P.captureException(r,t),r}}if(o(n)&&!s(t))return t;if(s(t)&&(n=t,t=e),!s(n))return n;if(n.__raven__)return n;for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r]);return i.__raven__=!0,i},uninstall:function(){return M.report.unsubscribe(c),P},captureException:function(t,e){if(a(t))return P.captureMessage(t,e);w=t;try{M.report(t,e)}catch(n){if(t!==n)throw n}return P},captureMessage:function(t,e){return g(d({message:t},e)),P},setUser:function(t){return x=t,P},lastException:function(){return w}},A="source protocol user pass host port path".split(" "),O=/^(?:(\w+):)?\/\/(\w+)(:\w+)?@([\w\.-]+)(?::(\d+))?(\/.*)/;i.prototype=new Error,i.prototype.constructor=i;var N;P.afterLoad(),t.Raven=P,"function"==typeof define&&define.amd&&define("raven",[],function(){return P.noConflict()})}(window),require=function(t,e,n){function i(n,o){if(!e[n]){if(!t[n]){var s="function"==typeof require&&require;if(!o&&s)return s(n,!0);if(r)return r(n,!0);throw new Error("Cannot find module '"+n+"'")}var a=e[n]={exports:{}};t[n][0].call(a.exports,function(e){var r=t[n][1][e];return i(r?r:e)},a,a.exports)}return e[n].exports}for(var r="function"==typeof require&&require,o=0;o<n.length;o++)i(n[o]);return i}({qs:[function(t,e){e.exports=t("4aD1+I")},{}],"4aD1+I":[function(t,e,n){function i(){return Object.create?Object.create(null):{}}function r(t,e){if(0==t[e].length)return t[e]=i();var n=i();for(var r in t[e])y.call(t[e],r)&&(n[r]=t[e][r]);return t[e]=n,n}function o(t,e,n,i){var s=t.shift();if(s){var a=e[n]=e[n]||[];"]"==s?w(a)?""!=i&&a.push(i):"object"==typeof a?a[_(a).length]=i:a=e[n]=[e[n],i]:~b(s,"]")?(s=s.substr(0,s.length-1),!k.test(s)&&w(a)&&(a=r(e,n)),o(t,a,s,i)):(!k.test(s)&&w(a)&&(a=r(e,n)),o(t,a,s,i))}else w(e[n])?e[n].push(i):e[n]="object"==typeof e[n]?i:"undefined"==typeof e[n]?i:[e[n],i]}function s(t,e,n){if(~b(e,"]")){var r=e.split("[");r.length,o(r,t,"base",n)}else{if(!k.test(e)&&w(t.base)){var s=i();for(var a in t.base)s[a]=t.base[a];t.base=s}d(t.base,e,n)}return t}function a(t){if("object"!=typeof t)return t;if(w(t)){var e=[];for(var n in t)y.call(t,n)&&e.push(t[n]);return e}for(var i in t)t[i]=a(t[i]);return t}function l(t){if(!Object.create)return t;if(w(t))return t;if(t&&"object"!=typeof t)return t;for(var e in t)y.call(t,e)&&(t[e]=l(t[e]));return t.__proto__=Object.prototype,t}function u(t){var e={base:{}};return x(_(t),function(n){s(e,n,t[n])}),a(e.base)}function c(t){var e=S(String(t).split("&"),function(t,e){var n=b(e,"="),i=m(e),r=e.substr(0,i||n),o=e.substr(i||n,e.length),o=o.substr(b(o,"=")+1,o.length);
return""==r&&(r=e,o=""),""==r?t:s(t,g(r),g(o))},{base:i()}).base;return l(a(e))}function h(t,e){if(!e)throw new TypeError("stringify expects an object");return e+"="+encodeURIComponent(t)}function p(t,e){var n=[];if(!e)throw new TypeError("stringify expects an object");for(var i=0;i<t.length;i++)n.push(C(t[i],e+"["+i+"]"));return n.join("&")}function f(t,e){for(var n,i=[],r=_(t),o=0,s=r.length;s>o;++o)n=r[o],""!=n&&(null==t[n]?i.push(encodeURIComponent(n)+"="):i.push(C(t[n],e?e+"["+encodeURIComponent(n)+"]":encodeURIComponent(n))));return i.join("&")}function d(t,e,n){var i=t[e];void 0===i?t[e]=n:w(i)?i.push(n):t[e]=[i,n]}function m(t){for(var e,n,i=t.length,r=0;i>r;++r)if(n=t[r],"]"==n&&(e=!1),"["==n&&(e=!0),"="==n&&!e)return r}function g(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(e){return t}}var v=Object.prototype.toString,y=Object.prototype.hasOwnProperty,b="function"==typeof Array.prototype.indexOf?function(t,e){return t.indexOf(e)}:function(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1},w=Array.isArray||function(t){return"[object Array]"==v.call(t)},_=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e},x="function"==typeof Array.prototype.forEach?function(t,e){return t.forEach(e)}:function(t,e){for(var n=0;n<t.length;n++)e(t[n])},S=function(t,e,n){if("function"==typeof t.reduce)return t.reduce(e,n);for(var i=n,r=0;r<t.length;r++)i=e(i,t[r]);return i},k=/^[0-9]+$/;n.parse=function(t){return null==t||""==t?{}:"object"==typeof t?u(t):c(t)};var C=n.stringify=function(t,e){return w(t)?p(t,e):"[object Object]"==v.call(t)?f(t,e):"string"==typeof t?h(t,e):e+"="+encodeURIComponent(String(t))}},{}]},{},[]);var tim=function n(t){"use strict";function e(){f=new RegExp(g.start+"\\s*("+g.path+")\\s*"+g.end,"gi")}function i(t){var n;if(t){for(n in t)t.hasOwnProperty(n)&&(g[n]=t[n]);e()}return g}function r(t,e){var n;switch(typeof t){case"string":if(e===m)return v[t]||"";e===!1?delete v[t]:v[t]=e;break;case"object":for(n in t)t.hasOwnProperty(n)&&r(n,t[n]);break;case"boolean":t||(v={})}return v}function o(t,e){var n;for(n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function s(t,e){return t[1]-e[1]}function a(t,e,n){var i=y[t];return i||(i=y[t]=[]),i.push([e,n||0]),i.sort(s),e}function l(t,e){var n,i,r,o,s=y[t];if(s){for(n=[e],i=2,r=arguments.length;r>i;i++)n.push(arguments[i]);for(i=0,r=s.length;r>i;i++)if(n[0]=e,o=s[i][0].apply(null,n),e!==m&&o!==m&&(e=o),p){p=!1;break}}return e}function u(t,e){return("function"==typeof e?a:l).apply(null,arguments)}function c(t,e){for(var n,i,r,s,a,u,c,p,d,m,v,y,b;null!==(n=f.exec(t));){if(i=n[1],r=l("token",i,e,t),s=n.index,a=f.lastIndex,u=t.slice(0,s),c=t.slice(a),"function"==typeof r&&(r=r.call(e)),"boolean"!=typeof r&&"object"!=typeof r)t=u+r+c;else{if(p="",d=g.start+"/"+i+g.end,m=c.indexOf(d),!(m>=0))throw"tim: '"+i+"' not closed";if(c=c.slice(0,m),"boolean"==typeof r)p=r?c:"";else{for(v in r)r.hasOwnProperty(v)&&(f.lastIndex=0,y=o({_key:v,_content:r[v]},r[v]),y=l("loopData",y,b,i),b=h(c,y),p+=l("loop",b,i,y));p=l("loopEnd",p,i,y)}t=u+p+t.slice(a+c.length+d.length)}f.lastIndex=0}return t}function h(t,e){var n;return d||(d=1,l("init")),t=l("templateBefore",t),t.indexOf(g.start)<0&&(n=r(t),n&&(t=n)),t=l("template",t),t&&e!==m&&(t=c(t,e)),t=l("templateAfter",t)}var p,f,d,m,g={start:"{{",end:"}}",path:"[a-z0-9_][\\.a-z0-9_]*"},v={},y={};return t?i(t):e(),u.stop=function(){p=!0},h.settings=i,h.templates=r,h.parser=n,h.filter=u,a("token",function(t,e,n){for(var i=t.split("."),r=i.length,o=e,s=0;r>s;s++){if(o=o[i[s]],o===m)throw"tim: '"+i[s]+"' not found"+(s?" in "+n:"");if(s===r-1)return o}}),window&&window.document&&(h.dom=function(t){t=t||{};for(var e,n,i=t.type||g.type||"text/tim",o=t.attr||g.attr||"class",s=window.document,a=!!s.querySelectorAll,l=a?s.querySelectorAll("script[type='"+i+"']"):s.getElementsByTagName("script"),u=0,c=l.length,h={};c>u;u++)e=l[u],n="class"===o?e.className:e.getAttribute(o),n&&(a||e.type===i)&&(h[n]=e.innerHTML);return r(h),h},a("init",function(){h.dom()})),h}(),TWEEN=TWEEN||function(){var t=[];return{REVISION:"6",getAll:function(){return t},removeAll:function(){t=[]},add:function(e){t.push(e)},remove:function(e){var n=t.indexOf(e);-1!==n&&t.splice(n,1)},update:function(e){for(var n=0,i=t.length,e=void 0!==e?e:Date.now();i>n;)t[n].update(e)?n++:(t.splice(n,1),i--)}}}();TWEEN.Tween=function(t){var e=t,n={},i={},r=1e3,o=0,s=null,a=TWEEN.Easing.Linear.None,l=TWEEN.Interpolation.Linear,u=null,c=null,h=null;this.to=function(t,e){return null!==e&&(r=e),i=t,this},this.start=function(t){TWEEN.add(this),s=void 0!==t?t:Date.now(),s+=o;for(var r in i)if(null!==e[r]){if(i[r]instanceof Array){if(0===i[r].length)continue;i[r]=[e[r]].concat(i[r])}n[r]=e[r]}return this},this.stop=function(){return TWEEN.remove(this),this},this.delay=function(t){return o=t,this},this.easing=function(t){return a=t,this},this.interpolation=function(t){return l=t,this},this.chain=function(t){return u=t,this},this.onUpdate=function(t){return c=t,this},this.onComplete=function(t){return h=t,this},this.update=function(t){if(s>t)return!0;var o=(t-s)/r;o=o>1?1:o;var p=a(o);for(var f in n){var d=n[f],m=i[f];e[f]=m instanceof Array?l(m,p):d+(m-d)*p}return null!==c&&c.call(e,p),1==o?(null!==h&&h.call(e),null!==u&&u.start(),!1):!0}},TWEEN.Easing={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2)}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){var e,n=.1,i=.4;return 0===t?0:1===t?1:(!n||1>n?(n=1,e=i/4):e=i*Math.asin(1/n)/(2*Math.PI),-(n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*2*Math.PI/i)))},Out:function(t){var e,n=.1,i=.4;return 0===t?0:1===t?1:(!n||1>n?(n=1,e=i/4):e=i*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*t)*Math.sin((t-e)*2*Math.PI/i)+1)},InOut:function(t){var e,n=.1,i=.4;return 0===t?0:1===t?1:(!n||1>n?(n=1,e=i/4):e=i*Math.asin(1/n)/(2*Math.PI),(t*=2)<1?-.5*n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*2*Math.PI/i):.5*n*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*2*Math.PI/i)+1)}},Back:{In:function(t){var e=1.70158;return t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?.5*t*t*((e+1)*t-e):.5*((t-=2)*t*((e+1)*t+e)+2)}},Bounce:{In:function(t){return 1-TWEEN.Easing.Bounce.Out(1-t)},Out:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return.5>t?.5*TWEEN.Easing.Bounce.In(2*t):.5*TWEEN.Easing.Bounce.Out(2*t-1)+.5}}},TWEEN.Interpolation={Linear:function(t,e){var n=t.length-1,i=n*e,r=Math.floor(i),o=TWEEN.Interpolation.Utils.Linear;return 0>e?o(t[0],t[1],i):e>1?o(t[n],t[n-1],n-i):o(t[r],t[r+1>n?n:r+1],i-r)},Bezier:function(t,e){var n,i=0,r=t.length-1,o=Math.pow,s=TWEEN.Interpolation.Utils.Bernstein;for(n=0;r>=n;n++)i+=o(1-e,r-n)*o(e,n)*t[n]*s(r,n);return i},CatmullRom:function(t,e){var n=t.length-1,i=n*e,r=Math.floor(i),o=TWEEN.Interpolation.Utils.CatmullRom;return t[0]===t[n]?(0>e&&(r=Math.floor(i=n*(1+e))),o(t[(r-1+n)%n],t[r],t[(r+1)%n],t[(r+2)%n],i-r)):0>e?t[0]-(o(t[0],t[0],t[1],t[1],-i)-t[0]):e>1?t[n]-(o(t[n],t[n],t[n-1],t[n-1],i-n)-t[n]):o(t[r?r-1:0],t[r],t[r+1>n?n:r+1],t[r+2>n?n:r+2],i-r)},Utils:{Linear:function(t,e,n){return(e-t)*n+t},Bernstein:function(t,e){var n=TWEEN.Interpolation.Utils.Factorial;return n(t)/n(e)/n(t-e)},Factorial:function(){var t=[1];return function(e){var n,i=1;if(t[e])return t[e];for(n=e;n>1;n--)i*=n;return t[e]=i}}(),CatmullRom:function(t,e,n,i,r){var o=.5*(n-t),s=.5*(i-e),a=r*r,l=r*a;return(2*e-2*n+o+s)*l+(-3*e+3*n-2*o-s)*a+o*r+e}}},!function(t,e){"use strict";function n(t,e){var n,i,r=t.toLowerCase();for(e=[].concat(e),n=0;n<e.length;n+=1)if(i=e[n]){if(i.test&&i.test(t))return!0;if(i.toLowerCase()===r)return!0}}var i=e.prototype.trim,r=e.prototype.trimRight,o=e.prototype.trimLeft,s=function(t){return 1*t||0},a=function(t,e){if(1>e)return"";for(var n="";e>0;)1&e&&(n+=t),e>>=1,t+=t;return n},l=[].slice,u=function(t){return null==t?"\\s":t.source?t.source:"["+d.escapeRegExp(t)+"]"},c={lt:"<",gt:">",quot:'"',amp:"&",apos:"'"},h={};for(var p in c)h[c[p]]=p;h["'"]="#39";// Copyright (c) Alexandru Marasteanu <alexaholic [at) gmail (dot] com>
var f=function(){function t(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}var n=a,i=function(){return i.cache.hasOwnProperty(arguments[0])||(i.cache[arguments[0]]=i.parse(arguments[0])),i.format.call(null,i.cache[arguments[0]],arguments)};return i.format=function(i,r){var o,s,a,l,u,c,h,p=1,d=i.length,m="",g=[];for(s=0;d>s;s++)if(m=t(i[s]),"string"===m)g.push(i[s]);else if("array"===m){if(l=i[s],l[2])for(o=r[p],a=0;a<l[2].length;a++){if(!o.hasOwnProperty(l[2][a]))throw new Error(f('[_.sprintf] property "%s" does not exist',l[2][a]));o=o[l[2][a]]}else o=l[1]?r[l[1]]:r[p++];if(/[^s]/.test(l[8])&&"number"!=t(o))throw new Error(f("[_.sprintf] expecting number but found %s",t(o)));switch(l[8]){case"b":o=o.toString(2);break;case"c":o=e.fromCharCode(o);break;case"d":o=parseInt(o,10);break;case"e":o=l[7]?o.toExponential(l[7]):o.toExponential();break;case"f":o=l[7]?parseFloat(o).toFixed(l[7]):parseFloat(o);break;case"o":o=o.toString(8);break;case"s":o=(o=e(o))&&l[7]?o.substring(0,l[7]):o;break;case"u":o=Math.abs(o);break;case"x":o=o.toString(16);break;case"X":o=o.toString(16).toUpperCase()}o=/[def]/.test(l[8])&&l[3]&&o>=0?"+"+o:o,c=l[4]?"0"==l[4]?"0":l[4].charAt(1):" ",h=l[6]-e(o).length,u=l[6]?n(c,h):"",g.push(l[5]?o+u:u+o)}return g.join("")},i.cache={},i.parse=function(t){for(var e=t,n=[],i=[],r=0;e;){if(null!==(n=/^[^\x25]+/.exec(e)))i.push(n[0]);else if(null!==(n=/^\x25{2}/.exec(e)))i.push("%");else{if(null===(n=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(e)))throw new Error("[_.sprintf] huh?");if(n[2]){r|=1;var o=[],s=n[2],a=[];if(null===(a=/^([a-z_][a-z_\d]*)/i.exec(s)))throw new Error("[_.sprintf] huh?");for(o.push(a[1]);""!==(s=s.substring(a[0].length));)if(null!==(a=/^\.([a-z_][a-z_\d]*)/i.exec(s)))o.push(a[1]);else{if(null===(a=/^\[(\d+)\]/.exec(s)))throw new Error("[_.sprintf] huh?");o.push(a[1])}n[2]=o}else r|=2;if(3===r)throw new Error("[_.sprintf] mixing positional and named placeholders is not (yet) supported");i.push(n)}e=e.substring(n[0].length)}return i},i}(),d={VERSION:"2.3.0",isBlank:function(t){return null==t&&(t=""),/^\s*$/.test(t)},stripTags:function(t){return null==t?"":e(t).replace(/<\/?[^>]+>/g,"")},capitalize:function(t){return t=null==t?"":e(t),t.charAt(0).toUpperCase()+t.slice(1)},chop:function(t,n){return null==t?[]:(t=e(t),n=~~n,n>0?t.match(new RegExp(".{1,"+n+"}","g")):[t])},clean:function(t){return d.strip(t).replace(/\s+/g," ")},count:function(t,n){if(null==t||null==n)return 0;t=e(t),n=e(n);for(var i=0,r=0,o=n.length;;){if(r=t.indexOf(n,r),-1===r)break;i++,r+=o}return i},chars:function(t){return null==t?[]:e(t).split("")},swapCase:function(t){return null==t?"":e(t).replace(/\S/g,function(t){return t===t.toUpperCase()?t.toLowerCase():t.toUpperCase()})},escapeHTML:function(t){return null==t?"":e(t).replace(/[&<>"']/g,function(t){return"&"+h[t]+";"})},unescapeHTML:function(t){return null==t?"":e(t).replace(/\&([^;]+);/g,function(t,n){var i;return n in c?c[n]:(i=n.match(/^#x([\da-fA-F]+)$/))?e.fromCharCode(parseInt(i[1],16)):(i=n.match(/^#(\d+)$/))?e.fromCharCode(~~i[1]):t})},escapeRegExp:function(t){return null==t?"":e(t).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")},splice:function(t,e,n,i){var r=d.chars(t);return r.splice(~~e,~~n,i),r.join("")},insert:function(t,e,n){return d.splice(t,e,0,n)},include:function(t,n){return""===n?!0:null==t?!1:-1!==e(t).indexOf(n)},join:function(){var t=l.call(arguments),e=t.shift();return null==e&&(e=""),t.join(e)},lines:function(t){return null==t?[]:e(t).split("\n")},reverse:function(t){return d.chars(t).reverse().join("")},startsWith:function(t,n){return""===n?!0:null==t||null==n?!1:(t=e(t),n=e(n),t.length>=n.length&&t.slice(0,n.length)===n)},endsWith:function(t,n){return""===n?!0:null==t||null==n?!1:(t=e(t),n=e(n),t.length>=n.length&&t.slice(t.length-n.length)===n)},succ:function(t){return null==t?"":(t=e(t),t.slice(0,-1)+e.fromCharCode(t.charCodeAt(t.length-1)+1))},titleize:function(t){return null==t?"":(t=e(t).toLowerCase(),t.replace(/(?:^|\s|-)\S/g,function(t){return t.toUpperCase()}))},camelize:function(t){return d.trim(t).replace(/[-_\s]+(.)?/g,function(t,e){return e?e.toUpperCase():""})},underscored:function(t){return d.trim(t).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},dasherize:function(t){return d.trim(t).replace(/([A-Z])/g,"-$1").replace(/[-_\s]+/g,"-").toLowerCase()},classify:function(t){return d.titleize(e(t).replace(/[\W_]/g," ")).replace(/\s/g,"")},humanize:function(t){return d.capitalize(d.underscored(t).replace(/_id$/,"").replace(/_/g," "))},trim:function(t,n){return null==t?"":!n&&i?i.call(t):(n=u(n),e(t).replace(new RegExp("^"+n+"+|"+n+"+$","g"),""))},ltrim:function(t,n){return null==t?"":!n&&o?o.call(t):(n=u(n),e(t).replace(new RegExp("^"+n+"+"),""))},rtrim:function(t,n){return null==t?"":!n&&r?r.call(t):(n=u(n),e(t).replace(new RegExp(n+"+$"),""))},truncate:function(t,n,i){return null==t?"":(t=e(t),i=i||"...",n=~~n,t.length>n?t.slice(0,n)+i:t)},prune:function(t,n,i){if(null==t)return"";if(t=e(t),n=~~n,i=null!=i?e(i):"...",t.length<=n)return t;var r=function(t){return t.toUpperCase()!==t.toLowerCase()?"A":" "},o=t.slice(0,n+1).replace(/.(?=\W*\w*$)/g,r);return o=o.slice(o.length-2).match(/\w\w/)?o.replace(/\s*\S+$/,""):d.rtrim(o.slice(0,o.length-1)),(o+i).length>t.length?t:t.slice(0,o.length)+i},words:function(t,e){return d.isBlank(t)?[]:d.trim(t,e).split(e||/\s+/)},pad:function(t,n,i,r){t=null==t?"":e(t),n=~~n;var o=0;switch(i?i.length>1&&(i=i.charAt(0)):i=" ",r){case"right":return o=n-t.length,t+a(i,o);case"both":return o=n-t.length,a(i,Math.ceil(o/2))+t+a(i,Math.floor(o/2));default:return o=n-t.length,a(i,o)+t}},lpad:function(t,e,n){return d.pad(t,e,n)},rpad:function(t,e,n){return d.pad(t,e,n,"right")},lrpad:function(t,e,n){return d.pad(t,e,n,"both")},sprintf:f,vsprintf:function(t,e){return e.unshift(t),f.apply(null,e)},toNumber:function(t,e){return t?(t=d.trim(t),t.match(/^-?\d+(?:\.\d+)?$/)?s(s(t).toFixed(~~e)):0/0):0},numberFormat:function(t,e,n,i){if(isNaN(t)||null==t)return"";t=t.toFixed(~~e),i="string"==typeof i?i:",";var r=t.split("."),o=r[0],s=r[1]?(n||".")+r[1]:"";return o.replace(/(\d)(?=(?:\d{3})+$)/g,"$1"+i)+s},strRight:function(t,n){if(null==t)return"";t=e(t),n=null!=n?e(n):n;var i=n?t.indexOf(n):-1;return~i?t.slice(i+n.length,t.length):t},strRightBack:function(t,n){if(null==t)return"";t=e(t),n=null!=n?e(n):n;var i=n?t.lastIndexOf(n):-1;return~i?t.slice(i+n.length,t.length):t},strLeft:function(t,n){if(null==t)return"";t=e(t),n=null!=n?e(n):n;var i=n?t.indexOf(n):-1;return~i?t.slice(0,i):t},strLeftBack:function(t,e){if(null==t)return"";t+="",e=null!=e?""+e:e;var n=t.lastIndexOf(e);return~n?t.slice(0,n):t},toSentence:function(t,e,n,i){e=e||", ",n=n||" and ";var r=t.slice(),o=r.pop();return t.length>2&&i&&(n=d.rtrim(e)+n),r.length?r.join(e)+n+o:o},toSentenceSerial:function(){var t=l.call(arguments);return t[3]=!0,d.toSentence.apply(d,t)},slugify:function(t){if(null==t)return"";var n="ąàáäâãåæăćęèéëêìíïîłńòóöôõøśșțùúüûñçżź",i="aaaaaaaaaceeeeeiiiilnoooooosstuuuunczz",r=new RegExp(u(n),"g");return t=e(t).toLowerCase().replace(r,function(t){var e=n.indexOf(t);return i.charAt(e)||"-"}),d.dasherize(t.replace(/[^\w\s-]/g,""))},surround:function(t,e){return[e,t,e].join("")},quote:function(t,e){return d.surround(t,e||'"')},unquote:function(t,e){return e=e||'"',t[0]===e&&t[t.length-1]===e?t.slice(1,t.length-1):t},exports:function(){var t={};for(var e in this)this.hasOwnProperty(e)&&!e.match(/^(?:include|contains|reverse)$/)&&(t[e]=this[e]);return t},repeat:function(t,n,i){if(null==t)return"";if(n=~~n,null==i)return a(e(t),n);for(var r=[];n>0;r[--n]=t);return r.join(i)},naturalCmp:function(t,n){if(t==n)return 0;if(!t)return-1;if(!n)return 1;for(var i=/(\.\d+)|(\d+)|(\D+)/g,r=e(t).toLowerCase().match(i),o=e(n).toLowerCase().match(i),s=Math.min(r.length,o.length),a=0;s>a;a++){var l=r[a],u=o[a];if(l!==u){var c=parseInt(l,10);if(!isNaN(c)){var h=parseInt(u,10);if(!isNaN(h)&&c-h)return c-h}return u>l?-1:1}}return r.length===o.length?r.length-o.length:n>t?-1:1},levenshtein:function(t,n){if(null==t&&null==n)return 0;if(null==t)return e(n).length;if(null==n)return e(t).length;t=e(t),n=e(n);for(var i,r,o=[],s=0;s<=n.length;s++)for(var a=0;a<=t.length;a++)r=s&&a?t.charAt(a-1)===n.charAt(s-1)?i:Math.min(o[a],o[a-1],i)+1:s+a,i=o[a],o[a]=r;return o.pop()},toBoolean:function(t,e,i){return"number"==typeof t&&(t=""+t),"string"!=typeof t?!!t:(t=d.trim(t),n(t,e||["true","1"])?!0:n(t,i||["false","0"])?!1:void 0)}};d.strip=d.trim,d.lstrip=d.ltrim,d.rstrip=d.rtrim,d.center=d.lrpad,d.rjust=d.lpad,d.ljust=d.rpad,d.contains=d.include,d.q=d.quote,d.toBool=d.toBoolean,"undefined"!=typeof exports&&("undefined"!=typeof module&&module.exports&&(module.exports=d),exports._s=d),"function"==typeof define&&define.amd&&define("underscore.string",[],function(){return d}),t._=t._||{},t._.string=t._.str=d}(this,String),require=function(t,e,n){function i(n,o){if(!e[n]){if(!t[n]){var s="function"==typeof require&&require;if(!o&&s)return s(n,!0);if(r)return r(n,!0);throw new Error("Cannot find module '"+n+"'")}var a=e[n]={exports:{}};t[n][0].call(a.exports,function(e){var r=t[n][1][e];return i(r?r:e)},a,a.exports)}return e[n].exports}for(var r="function"==typeof require&&require,o=0;o<n.length;o++)i(n[o]);return i}({uslug:[function(t,e){e.exports=t("86C44g")},{}],"86C44g":[function(t,e){e.exports=t("./lib/uslug")},{"./lib/uslug":1}],2:[function(t,e,n){n.L=[65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,170,181,186,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,384,385,386,387,388,389,390,391,392,393,394,395,396,397,398,399,400,401,402,403,404,405,406,407,408,409,410,411,412,413,414,415,416,417,418,419,420,421,422,423,424,425,426,427,428,429,430,431,432,433,434,435,436,437,438,439,440,441,442,443,444,445,446,447,448,449,450,451,452,453,454,455,456,457,458,459,460,461,462,463,464,465,466,467,468,469,470,471,472,473,474,475,476,477,478,479,480,481,482,483,484,485,486,487,488,489,490,491,492,493,494,495,496,497,498,499,500,501,502,503,504,505,506,507,508,509,510,511,512,513,514,515,516,517,518,519,520,521,522,523,524,525,526,527,528,529,530,531,532,533,534,535,536,537,538,539,540,541,542,543,544,545,546,547,548,549,550,551,552,553,554,555,556,557,558,559,560,561,562,563,564,565,566,567,568,569,570,571,572,573,574,575,576,577,578,579,580,581,582,583,584,585,586,587,588,589,590,591,592,593,594,595,596,597,598,599,600,601,602,603,604,605,606,607,608,609,610,611,612,613,614,615,616,617,618,619,620,621,622,623,624,625,626,627,628,629,630,631,632,633,634,635,636,637,638,639,640,641,642,643,644,645,646,647,648,649,650,651,652,653,654,655,656,657,658,659,660,661,662,663,664,665,666,667,668,669,670,671,672,673,674,675,676,677,678,679,680,681,682,683,684,685,686,687,688,689,690,691,692,693,694,695,696,697,698,699,700,701,702,703,704,705,710,711,712,713,714,715,716,717,718,719,720,721,736,737,738,739,740,748,750,880,881,882,883,884,886,887,890,891,892,893,902,904,905,906,908,910,911,912,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,931,932,933,934,935,936,937,938,939,940,941,942,943,944,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960,961,962,963,964,965,966,967,968,969,970,971,972,973,974,975,976,977,978,979,980,981,982,983,984,985,986,987,988,989,990,991,992,993,994,995,996,997,998,999,1e3,1001,1002,1003,1004,1005,1006,1007,1008,1009,1010,1011,1012,1013,1015,1016,1017,1018,1019,1020,1021,1022,1023,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,1072,1073,1074,1075,1076,1077,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103,1104,1105,1106,1107,1108,1109,1110,1111,1112,1113,1114,1115,1116,1117,1118,1119,1120,1121,1122,1123,1124,1125,1126,1127,1128,1129,1130,1131,1132,1133,1134,1135,1136,1137,1138,1139,1140,1141,1142,1143,1144,1145,1146,1147,1148,1149,1150,1151,1152,1153,1162,1163,1164,1165,1166,1167,1168,1169,1170,1171,1172,1173,1174,1175,1176,1177,1178,1179,1180,1181,1182,1183,1184,1185,1186,1187,1188,1189,1190,1191,1192,1193,1194,1195,1196,1197,1198,1199,1200,1201,1202,1203,1204,1205,1206,1207,1208,1209,1210,1211,1212,1213,1214,1215,1216,1217,1218,1219,1220,1221,1222,1223,1224,1225,1226,1227,1228,1229,1230,1231,1232,1233,1234,1235,1236,1237,1238,1239,1240,1241,1242,1243,1244,1245,1246,1247,1248,1249,1250,1251,1252,1253,1254,1255,1256,1257,1258,1259,1260,1261,1262,1263,1264,1265,1266,1267,1268,1269,1270,1271,1272,1273,1274,1275,1276,1277,1278,1279,1280,1281,1282,1283,1284,1285,1286,1287,1288,1289,1290,1291,1292,1293,1294,1295,1296,1297,1298,1299,1300,1301,1302,1303,1304,1305,1306,1307,1308,1309,1310,1311,1312,1313,1314,1315,1316,1317,1318,1319,1329,1330,1331,1332,1333,1334,1335,1336,1337,1338,1339,1340,1341,1342,1343,1344,1345,1346,1347,1348,1349,1350,1351,1352,1353,1354,1355,1356,1357,1358,1359,1360,1361,1362,1363,1364,1365,1366,1369,1377,1378,1379,1380,1381,1382,1383,1384,1385,1386,1387,1388,1389,1390,1391,1392,1393,1394,1395,1396,1397,1398,1399,1400,1401,1402,1403,1404,1405,1406,1407,1408,1409,1410,1411,1412,1413,1414,1415,1488,1489,1490,1491,1492,1493,1494,1495,1496,1497,1498,1499,1500,1501,1502,1503,1504,1505,1506,1507,1508,1509,1510,1511,1512,1513,1514,1520,1521,1522,1568,1569,1570,1571,1572,1573,1574,1575,1576,1577,1578,1579,1580,1581,1582,1583,1584,1585,1586,1587,1588,1589,1590,1591,1592,1593,1594,1595,1596,1597,1598,1599,1600,1601,1602,1603,1604,1605,1606,1607,1608,1609,1610,1646,1647,1649,1650,1651,1652,1653,1654,1655,1656,1657,1658,1659,1660,1661,1662,1663,1664,1665,1666,1667,1668,1669,1670,1671,1672,1673,1674,1675,1676,1677,1678,1679,1680,1681,1682,1683,1684,1685,1686,1687,1688,1689,1690,1691,1692,1693,1694,1695,1696,1697,1698,1699,1700,1701,1702,1703,1704,1705,1706,1707,1708,1709,1710,1711,1712,1713,1714,1715,1716,1717,1718,1719,1720,1721,1722,1723,1724,1725,1726,1727,1728,1729,1730,1731,1732,1733,1734,1735,1736,1737,1738,1739,1740,1741,1742,1743,1744,1745,1746,1747,1749,1765,1766,1774,1775,1786,1787,1788,1791,1808,1810,1811,1812,1813,1814,1815,1816,1817,1818,1819,1820,1821,1822,1823,1824,1825,1826,1827,1828,1829,1830,1831,1832,1833,1834,1835,1836,1837,1838,1839,1869,1870,1871,1872,1873,1874,1875,1876,1877,1878,1879,1880,1881,1882,1883,1884,1885,1886,1887,1888,1889,1890,1891,1892,1893,1894,1895,1896,1897,1898,1899,1900,1901,1902,1903,1904,1905,1906,1907,1908,1909,1910,1911,1912,1913,1914,1915,1916,1917,1918,1919,1920,1921,1922,1923,1924,1925,1926,1927,1928,1929,1930,1931,1932,1933,1934,1935,1936,1937,1938,1939,1940,1941,1942,1943,1944,1945,1946,1947,1948,1949,1950,1951,1952,1953,1954,1955,1956,1957,1969,1994,1995,1996,1997,1998,1999,2e3,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023,2024,2025,2026,2036,2037,2042,2048,2049,2050,2051,2052,2053,2054,2055,2056,2057,2058,2059,2060,2061,2062,2063,2064,2065,2066,2067,2068,2069,2074,2084,2088,2112,2113,2114,2115,2116,2117,2118,2119,2120,2121,2122,2123,2124,2125,2126,2127,2128,2129,2130,2131,2132,2133,2134,2135,2136,2308,2309,2310,2311,2312,2313,2314,2315,2316,2317,2318,2319,2320,2321,2322,2323,2324,2325,2326,2327,2328,2329,2330,2331,2332,2333,2334,2335,2336,2337,2338,2339,2340,2341,2342,2343,2344,2345,2346,2347,2348,2349,2350,2351,2352,2353,2354,2355,2356,2357,2358,2359,2360,2361,2365,2384,2392,2393,2394,2395,2396,2397,2398,2399,2400,2401,2417,2418,2419,2420,2421,2422,2423,2425,2426,2427,2428,2429,2430,2431,2437,2438,2439,2440,2441,2442,2443,2444,2447,2448,2451,2452,2453,2454,2455,2456,2457,2458,2459,2460,2461,2462,2463,2464,2465,2466,2467,2468,2469,2470,2471,2472,2474,2475,2476,2477,2478,2479,2480,2482,2486,2487,2488,2489,2493,2510,2524,2525,2527,2528,2529,2544,2545,2565,2566,2567,2568,2569,2570,2575,2576,2579,2580,2581,2582,2583,2584,2585,2586,2587,2588,2589,2590,2591,2592,2593,2594,2595,2596,2597,2598,2599,2600,2602,2603,2604,2605,2606,2607,2608,2610,2611,2613,2614,2616,2617,2649,2650,2651,2652,2654,2674,2675,2676,2693,2694,2695,2696,2697,2698,2699,2700,2701,2703,2704,2705,2707,2708,2709,2710,2711,2712,2713,2714,2715,2716,2717,2718,2719,2720,2721,2722,2723,2724,2725,2726,2727,2728,2730,2731,2732,2733,2734,2735,2736,2738,2739,2741,2742,2743,2744,2745,2749,2768,2784,2785,2821,2822,2823,2824,2825,2826,2827,2828,2831,2832,2835,2836,2837,2838,2839,2840,2841,2842,2843,2844,2845,2846,2847,2848,2849,2850,2851,2852,2853,2854,2855,2856,2858,2859,2860,2861,2862,2863,2864,2866,2867,2869,2870,2871,2872,2873,2877,2908,2909,2911,2912,2913,2929,2947,2949,2950,2951,2952,2953,2954,2958,2959,2960,2962,2963,2964,2965,2969,2970,2972,2974,2975,2979,2980,2984,2985,2986,2990,2991,2992,2993,2994,2995,2996,2997,2998,2999,3e3,3001,3024,3077,3078,3079,3080,3081,3082,3083,3084,3086,3087,3088,3090,3091,3092,3093,3094,3095,3096,3097,3098,3099,3100,3101,3102,3103,3104,3105,3106,3107,3108,3109,3110,3111,3112,3114,3115,3116,3117,3118,3119,3120,3121,3122,3123,3125,3126,3127,3128,3129,3133,3160,3161,3168,3169,3205,3206,3207,3208,3209,3210,3211,3212,3214,3215,3216,3218,3219,3220,3221,3222,3223,3224,3225,3226,3227,3228,3229,3230,3231,3232,3233,3234,3235,3236,3237,3238,3239,3240,3242,3243,3244,3245,3246,3247,3248,3249,3250,3251,3253,3254,3255,3256,3257,3261,3294,3296,3297,3313,3314,3333,3334,3335,3336,3337,3338,3339,3340,3342,3343,3344,3346,3347,3348,3349,3350,3351,3352,3353,3354,3355,3356,3357,3358,3359,3360,3361,3362,3363,3364,3365,3366,3367,3368,3369,3370,3371,3372,3373,3374,3375,3376,3377,3378,3379,3380,3381,3382,3383,3384,3385,3386,3389,3406,3424,3425,3450,3451,3452,3453,3454,3455,3461,3462,3463,3464,3465,3466,3467,3468,3469,3470,3471,3472,3473,3474,3475,3476,3477,3478,3482,3483,3484,3485,3486,3487,3488,3489,3490,3491,3492,3493,3494,3495,3496,3497,3498,3499,3500,3501,3502,3503,3504,3505,3507,3508,3509,3510,3511,3512,3513,3514,3515,3517,3520,3521,3522,3523,3524,3525,3526,3585,3586,3587,3588,3589,3590,3591,3592,3593,3594,3595,3596,3597,3598,3599,3600,3601,3602,3603,3604,3605,3606,3607,3608,3609,3610,3611,3612,3613,3614,3615,3616,3617,3618,3619,3620,3621,3622,3623,3624,3625,3626,3627,3628,3629,3630,3631,3632,3634,3635,3648,3649,3650,3651,3652,3653,3654,3713,3714,3716,3719,3720,3722,3725,3732,3733,3734,3735,3737,3738,3739,3740,3741,3742,3743,3745,3746,3747,3749,3751,3754,3755,3757,3758,3759,3760,3762,3763,3773,3776,3777,3778,3779,3780,3782,3804,3805,3840,3904,3905,3906,3907,3908,3909,3910,3911,3913,3914,3915,3916,3917,3918,3919,3920,3921,3922,3923,3924,3925,3926,3927,3928,3929,3930,3931,3932,3933,3934,3935,3936,3937,3938,3939,3940,3941,3942,3943,3944,3945,3946,3947,3948,3976,3977,3978,3979,3980,4096,4097,4098,4099,4100,4101,4102,4103,4104,4105,4106,4107,4108,4109,4110,4111,4112,4113,4114,4115,4116,4117,4118,4119,4120,4121,4122,4123,4124,4125,4126,4127,4128,4129,4130,4131,4132,4133,4134,4135,4136,4137,4138,4159,4176,4177,4178,4179,4180,4181,4186,4187,4188,4189,4193,4197,4198,4206,4207,4208,4213,4214,4215,4216,4217,4218,4219,4220,4221,4222,4223,4224,4225,4238,4256,4257,4258,4259,4260,4261,4262,4263,4264,4265,4266,4267,4268,4269,4270,4271,4272,4273,4274,4275,4276,4277,4278,4279,4280,4281,4282,4283,4284,4285,4286,4287,4288,4289,4290,4291,4292,4293,4304,4305,4306,4307,4308,4309,4310,4311,4312,4313,4314,4315,4316,4317,4318,4319,4320,4321,4322,4323,4324,4325,4326,4327,4328,4329,4330,4331,4332,4333,4334,4335,4336,4337,4338,4339,4340,4341,4342,4343,4344,4345,4346,4348,4352,4353,4354,4355,4356,4357,4358,4359,4360,4361,4362,4363,4364,4365,4366,4367,4368,4369,4370,4371,4372,4373,4374,4375,4376,4377,4378,4379,4380,4381,4382,4383,4384,4385,4386,4387,4388,4389,4390,4391,4392,4393,4394,4395,4396,4397,4398,4399,4400,4401,4402,4403,4404,4405,4406,4407,4408,4409,4410,4411,4412,4413,4414,4415,4416,4417,4418,4419,4420,4421,4422,4423,4424,4425,4426,4427,4428,4429,4430,4431,4432,4433,4434,4435,4436,4437,4438,4439,4440,4441,4442,4443,4444,4445,4446,4447,4448,4449,4450,4451,4452,4453,4454,4455,4456,4457,4458,4459,4460,4461,4462,4463,4464,4465,4466,4467,4468,4469,4470,4471,4472,4473,4474,4475,4476,4477,4478,4479,4480,4481,4482,4483,4484,4485,4486,4487,4488,4489,4490,4491,4492,4493,4494,4495,4496,4497,4498,4499,4500,4501,4502,4503,4504,4505,4506,4507,4508,4509,4510,4511,4512,4513,4514,4515,4516,4517,4518,4519,4520,4521,4522,4523,4524,4525,4526,4527,4528,4529,4530,4531,4532,4533,4534,4535,4536,4537,4538,4539,4540,4541,4542,4543,4544,4545,4546,4547,4548,4549,4550,4551,4552,4553,4554,4555,4556,4557,4558,4559,4560,4561,4562,4563,4564,4565,4566,4567,4568,4569,4570,4571,4572,4573,4574,4575,4576,4577,4578,4579,4580,4581,4582,4583,4584,4585,4586,4587,4588,4589,4590,4591,4592,4593,4594,4595,4596,4597,4598,4599,4600,4601,4602,4603,4604,4605,4606,4607,4608,4609,4610,4611,4612,4613,4614,4615,4616,4617,4618,4619,4620,4621,4622,4623,4624,4625,4626,4627,4628,4629,4630,4631,4632,4633,4634,4635,4636,4637,4638,4639,4640,4641,4642,4643,4644,4645,4646,4647,4648,4649,4650,4651,4652,4653,4654,4655,4656,4657,4658,4659,4660,4661,4662,4663,4664,4665,4666,4667,4668,4669,4670,4671,4672,4673,4674,4675,4676,4677,4678,4679,4680,4682,4683,4684,4685,4688,4689,4690,4691,4692,4693,4694,4696,4698,4699,4700,4701,4704,4705,4706,4707,4708,4709,4710,4711,4712,4713,4714,4715,4716,4717,4718,4719,4720,4721,4722,4723,4724,4725,4726,4727,4728,4729,4730,4731,4732,4733,4734,4735,4736,4737,4738,4739,4740,4741,4742,4743,4744,4746,4747,4748,4749,4752,4753,4754,4755,4756,4757,4758,4759,4760,4761,4762,4763,4764,4765,4766,4767,4768,4769,4770,4771,4772,4773,4774,4775,4776,4777,4778,4779,4780,4781,4782,4783,4784,4786,4787,4788,4789,4792,4793,4794,4795,4796,4797,4798,4800,4802,4803,4804,4805,4808,4809,4810,4811,4812,4813,4814,4815,4816,4817,4818,4819,4820,4821,4822,4824,4825,4826,4827,4828,4829,4830,4831,4832,4833,4834,4835,4836,4837,4838,4839,4840,4841,4842,4843,4844,4845,4846,4847,4848,4849,4850,4851,4852,4853,4854,4855,4856,4857,4858,4859,4860,4861,4862,4863,4864,4865,4866,4867,4868,4869,4870,4871,4872,4873,4874,4875,4876,4877,4878,4879,4880,4882,4883,4884,4885,4888,4889,4890,4891,4892,4893,4894,4895,4896,4897,4898,4899,4900,4901,4902,4903,4904,4905,4906,4907,4908,4909,4910,4911,4912,4913,4914,4915,4916,4917,4918,4919,4920,4921,4922,4923,4924,4925,4926,4927,4928,4929,4930,4931,4932,4933,4934,4935,4936,4937,4938,4939,4940,4941,4942,4943,4944,4945,4946,4947,4948,4949,4950,4951,4952,4953,4954,4992,4993,4994,4995,4996,4997,4998,4999,5e3,5001,5002,5003,5004,5005,5006,5007,5024,5025,5026,5027,5028,5029,5030,5031,5032,5033,5034,5035,5036,5037,5038,5039,5040,5041,5042,5043,5044,5045,5046,5047,5048,5049,5050,5051,5052,5053,5054,5055,5056,5057,5058,5059,5060,5061,5062,5063,5064,5065,5066,5067,5068,5069,5070,5071,5072,5073,5074,5075,5076,5077,5078,5079,5080,5081,5082,5083,5084,5085,5086,5087,5088,5089,5090,5091,5092,5093,5094,5095,5096,5097,5098,5099,5100,5101,5102,5103,5104,5105,5106,5107,5108,5121,5122,5123,5124,5125,5126,5127,5128,5129,5130,5131,5132,5133,5134,5135,5136,5137,5138,5139,5140,5141,5142,5143,5144,5145,5146,5147,5148,5149,5150,5151,5152,5153,5154,5155,5156,5157,5158,5159,5160,5161,5162,5163,5164,5165,5166,5167,5168,5169,5170,5171,5172,5173,5174,5175,5176,5177,5178,5179,5180,5181,5182,5183,5184,5185,5186,5187,5188,5189,5190,5191,5192,5193,5194,5195,5196,5197,5198,5199,5200,5201,5202,5203,5204,5205,5206,5207,5208,5209,5210,5211,5212,5213,5214,5215,5216,5217,5218,5219,5220,5221,5222,5223,5224,5225,5226,5227,5228,5229,5230,5231,5232,5233,5234,5235,5236,5237,5238,5239,5240,5241,5242,5243,5244,5245,5246,5247,5248,5249,5250,5251,5252,5253,5254,5255,5256,5257,5258,5259,5260,5261,5262,5263,5264,5265,5266,5267,5268,5269,5270,5271,5272,5273,5274,5275,5276,5277,5278,5279,5280,5281,5282,5283,5284,5285,5286,5287,5288,5289,5290,5291,5292,5293,5294,5295,5296,5297,5298,5299,5300,5301,5302,5303,5304,5305,5306,5307,5308,5309,5310,5311,5312,5313,5314,5315,5316,5317,5318,5319,5320,5321,5322,5323,5324,5325,5326,5327,5328,5329,5330,5331,5332,5333,5334,5335,5336,5337,5338,5339,5340,5341,5342,5343,5344,5345,5346,5347,5348,5349,5350,5351,5352,5353,5354,5355,5356,5357,5358,5359,5360,5361,5362,5363,5364,5365,5366,5367,5368,5369,5370,5371,5372,5373,5374,5375,5376,5377,5378,5379,5380,5381,5382,5383,5384,5385,5386,5387,5388,5389,5390,5391,5392,5393,5394,5395,5396,5397,5398,5399,5400,5401,5402,5403,5404,5405,5406,5407,5408,5409,5410,5411,5412,5413,5414,5415,5416,5417,5418,5419,5420,5421,5422,5423,5424,5425,5426,5427,5428,5429,5430,5431,5432,5433,5434,5435,5436,5437,5438,5439,5440,5441,5442,5443,5444,5445,5446,5447,5448,5449,5450,5451,5452,5453,5454,5455,5456,5457,5458,5459,5460,5461,5462,5463,5464,5465,5466,5467,5468,5469,5470,5471,5472,5473,5474,5475,5476,5477,5478,5479,5480,5481,5482,5483,5484,5485,5486,5487,5488,5489,5490,5491,5492,5493,5494,5495,5496,5497,5498,5499,5500,5501,5502,5503,5504,5505,5506,5507,5508,5509,5510,5511,5512,5513,5514,5515,5516,5517,5518,5519,5520,5521,5522,5523,5524,5525,5526,5527,5528,5529,5530,5531,5532,5533,5534,5535,5536,5537,5538,5539,5540,5541,5542,5543,5544,5545,5546,5547,5548,5549,5550,5551,5552,5553,5554,5555,5556,5557,5558,5559,5560,5561,5562,5563,5564,5565,5566,5567,5568,5569,5570,5571,5572,5573,5574,5575,5576,5577,5578,5579,5580,5581,5582,5583,5584,5585,5586,5587,5588,5589,5590,5591,5592,5593,5594,5595,5596,5597,5598,5599,5600,5601,5602,5603,5604,5605,5606,5607,5608,5609,5610,5611,5612,5613,5614,5615,5616,5617,5618,5619,5620,5621,5622,5623,5624,5625,5626,5627,5628,5629,5630,5631,5632,5633,5634,5635,5636,5637,5638,5639,5640,5641,5642,5643,5644,5645,5646,5647,5648,5649,5650,5651,5652,5653,5654,5655,5656,5657,5658,5659,5660,5661,5662,5663,5664,5665,5666,5667,5668,5669,5670,5671,5672,5673,5674,5675,5676,5677,5678,5679,5680,5681,5682,5683,5684,5685,5686,5687,5688,5689,5690,5691,5692,5693,5694,5695,5696,5697,5698,5699,5700,5701,5702,5703,5704,5705,5706,5707,5708,5709,5710,5711,5712,5713,5714,5715,5716,5717,5718,5719,5720,5721,5722,5723,5724,5725,5726,5727,5728,5729,5730,5731,5732,5733,5734,5735,5736,5737,5738,5739,5740,5743,5744,5745,5746,5747,5748,5749,5750,5751,5752,5753,5754,5755,5756,5757,5758,5759,5761,5762,5763,5764,5765,5766,5767,5768,5769,5770,5771,5772,5773,5774,5775,5776,5777,5778,5779,5780,5781,5782,5783,5784,5785,5786,5792,5793,5794,5795,5796,5797,5798,5799,5800,5801,5802,5803,5804,5805,5806,5807,5808,5809,5810,5811,5812,5813,5814,5815,5816,5817,5818,5819,5820,5821,5822,5823,5824,5825,5826,5827,5828,5829,5830,5831,5832,5833,5834,5835,5836,5837,5838,5839,5840,5841,5842,5843,5844,5845,5846,5847,5848,5849,5850,5851,5852,5853,5854,5855,5856,5857,5858,5859,5860,5861,5862,5863,5864,5865,5866,5888,5889,5890,5891,5892,5893,5894,5895,5896,5897,5898,5899,5900,5902,5903,5904,5905,5920,5921,5922,5923,5924,5925,5926,5927,5928,5929,5930,5931,5932,5933,5934,5935,5936,5937,5952,5953,5954,5955,5956,5957,5958,5959,5960,5961,5962,5963,5964,5965,5966,5967,5968,5969,5984,5985,5986,5987,5988,5989,5990,5991,5992,5993,5994,5995,5996,5998,5999,6e3,6016,6017,6018,6019,6020,6021,6022,6023,6024,6025,6026,6027,6028,6029,6030,6031,6032,6033,6034,6035,6036,6037,6038,6039,6040,6041,6042,6043,6044,6045,6046,6047,6048,6049,6050,6051,6052,6053,6054,6055,6056,6057,6058,6059,6060,6061,6062,6063,6064,6065,6066,6067,6103,6108,6176,6177,6178,6179,6180,6181,6182,6183,6184,6185,6186,6187,6188,6189,6190,6191,6192,6193,6194,6195,6196,6197,6198,6199,6200,6201,6202,6203,6204,6205,6206,6207,6208,6209,6210,6211,6212,6213,6214,6215,6216,6217,6218,6219,6220,6221,6222,6223,6224,6225,6226,6227,6228,6229,6230,6231,6232,6233,6234,6235,6236,6237,6238,6239,6240,6241,6242,6243,6244,6245,6246,6247,6248,6249,6250,6251,6252,6253,6254,6255,6256,6257,6258,6259,6260,6261,6262,6263,6272,6273,6274,6275,6276,6277,6278,6279,6280,6281,6282,6283,6284,6285,6286,6287,6288,6289,6290,6291,6292,6293,6294,6295,6296,6297,6298,6299,6300,6301,6302,6303,6304,6305,6306,6307,6308,6309,6310,6311,6312,6314,6320,6321,6322,6323,6324,6325,6326,6327,6328,6329,6330,6331,6332,6333,6334,6335,6336,6337,6338,6339,6340,6341,6342,6343,6344,6345,6346,6347,6348,6349,6350,6351,6352,6353,6354,6355,6356,6357,6358,6359,6360,6361,6362,6363,6364,6365,6366,6367,6368,6369,6370,6371,6372,6373,6374,6375,6376,6377,6378,6379,6380,6381,6382,6383,6384,6385,6386,6387,6388,6389,6400,6401,6402,6403,6404,6405,6406,6407,6408,6409,6410,6411,6412,6413,6414,6415,6416,6417,6418,6419,6420,6421,6422,6423,6424,6425,6426,6427,6428,6480,6481,6482,6483,6484,6485,6486,6487,6488,6489,6490,6491,6492,6493,6494,6495,6496,6497,6498,6499,6500,6501,6502,6503,6504,6505,6506,6507,6508,6509,6512,6513,6514,6515,6516,6528,6529,6530,6531,6532,6533,6534,6535,6536,6537,6538,6539,6540,6541,6542,6543,6544,6545,6546,6547,6548,6549,6550,6551,6552,6553,6554,6555,6556,6557,6558,6559,6560,6561,6562,6563,6564,6565,6566,6567,6568,6569,6570,6571,6593,6594,6595,6596,6597,6598,6599,6656,6657,6658,6659,6660,6661,6662,6663,6664,6665,6666,6667,6668,6669,6670,6671,6672,6673,6674,6675,6676,6677,6678,6688,6689,6690,6691,6692,6693,6694,6695,6696,6697,6698,6699,6700,6701,6702,6703,6704,6705,6706,6707,6708,6709,6710,6711,6712,6713,6714,6715,6716,6717,6718,6719,6720,6721,6722,6723,6724,6725,6726,6727,6728,6729,6730,6731,6732,6733,6734,6735,6736,6737,6738,6739,6740,6823,6917,6918,6919,6920,6921,6922,6923,6924,6925,6926,6927,6928,6929,6930,6931,6932,6933,6934,6935,6936,6937,6938,6939,6940,6941,6942,6943,6944,6945,6946,6947,6948,6949,6950,6951,6952,6953,6954,6955,6956,6957,6958,6959,6960,6961,6962,6963,6981,6982,6983,6984,6985,6986,6987,7043,7044,7045,7046,7047,7048,7049,7050,7051,7052,7053,7054,7055,7056,7057,7058,7059,7060,7061,7062,7063,7064,7065,7066,7067,7068,7069,7070,7071,7072,7086,7087,7104,7105,7106,7107,7108,7109,7110,7111,7112,7113,7114,7115,7116,7117,7118,7119,7120,7121,7122,7123,7124,7125,7126,7127,7128,7129,7130,7131,7132,7133,7134,7135,7136,7137,7138,7139,7140,7141,7168,7169,7170,7171,7172,7173,7174,7175,7176,7177,7178,7179,7180,7181,7182,7183,7184,7185,7186,7187,7188,7189,7190,7191,7192,7193,7194,7195,7196,7197,7198,7199,7200,7201,7202,7203,7245,7246,7247,7258,7259,7260,7261,7262,7263,7264,7265,7266,7267,7268,7269,7270,7271,7272,7273,7274,7275,7276,7277,7278,7279,7280,7281,7282,7283,7284,7285,7286,7287,7288,7289,7290,7291,7292,7293,7401,7402,7403,7404,7406,7407,7408,7409,7424,7425,7426,7427,7428,7429,7430,7431,7432,7433,7434,7435,7436,7437,7438,7439,7440,7441,7442,7443,7444,7445,7446,7447,7448,7449,7450,7451,7452,7453,7454,7455,7456,7457,7458,7459,7460,7461,7462,7463,7464,7465,7466,7467,7468,7469,7470,7471,7472,7473,7474,7475,7476,7477,7478,7479,7480,7481,7482,7483,7484,7485,7486,7487,7488,7489,7490,7491,7492,7493,7494,7495,7496,7497,7498,7499,7500,7501,7502,7503,7504,7505,7506,7507,7508,7509,7510,7511,7512,7513,7514,7515,7516,7517,7518,7519,7520,7521,7522,7523,7524,7525,7526,7527,7528,7529,7530,7531,7532,7533,7534,7535,7536,7537,7538,7539,7540,7541,7542,7543,7544,7545,7546,7547,7548,7549,7550,7551,7552,7553,7554,7555,7556,7557,7558,7559,7560,7561,7562,7563,7564,7565,7566,7567,7568,7569,7570,7571,7572,7573,7574,7575,7576,7577,7578,7579,7580,7581,7582,7583,7584,7585,7586,7587,7588,7589,7590,7591,7592,7593,7594,7595,7596,7597,7598,7599,7600,7601,7602,7603,7604,7605,7606,7607,7608,7609,7610,7611,7612,7613,7614,7615,7680,7681,7682,7683,7684,7685,7686,7687,7688,7689,7690,7691,7692,7693,7694,7695,7696,7697,7698,7699,7700,7701,7702,7703,7704,7705,7706,7707,7708,7709,7710,7711,7712,7713,7714,7715,7716,7717,7718,7719,7720,7721,7722,7723,7724,7725,7726,7727,7728,7729,7730,7731,7732,7733,7734,7735,7736,7737,7738,7739,7740,7741,7742,7743,7744,7745,7746,7747,7748,7749,7750,7751,7752,7753,7754,7755,7756,7757,7758,7759,7760,7761,7762,7763,7764,7765,7766,7767,7768,7769,7770,7771,7772,7773,7774,7775,7776,7777,7778,7779,7780,7781,7782,7783,7784,7785,7786,7787,7788,7789,7790,7791,7792,7793,7794,7795,7796,7797,7798,7799,7800,7801,7802,7803,7804,7805,7806,7807,7808,7809,7810,7811,7812,7813,7814,7815,7816,7817,7818,7819,7820,7821,7822,7823,7824,7825,7826,7827,7828,7829,7830,7831,7832,7833,7834,7835,7836,7837,7838,7839,7840,7841,7842,7843,7844,7845,7846,7847,7848,7849,7850,7851,7852,7853,7854,7855,7856,7857,7858,7859,7860,7861,7862,7863,7864,7865,7866,7867,7868,7869,7870,7871,7872,7873,7874,7875,7876,7877,7878,7879,7880,7881,7882,7883,7884,7885,7886,7887,7888,7889,7890,7891,7892,7893,7894,7895,7896,7897,7898,7899,7900,7901,7902,7903,7904,7905,7906,7907,7908,7909,7910,7911,7912,7913,7914,7915,7916,7917,7918,7919,7920,7921,7922,7923,7924,7925,7926,7927,7928,7929,7930,7931,7932,7933,7934,7935,7936,7937,7938,7939,7940,7941,7942,7943,7944,7945,7946,7947,7948,7949,7950,7951,7952,7953,7954,7955,7956,7957,7960,7961,7962,7963,7964,7965,7968,7969,7970,7971,7972,7973,7974,7975,7976,7977,7978,7979,7980,7981,7982,7983,7984,7985,7986,7987,7988,7989,7990,7991,7992,7993,7994,7995,7996,7997,7998,7999,8e3,8001,8002,8003,8004,8005,8008,8009,8010,8011,8012,8013,8016,8017,8018,8019,8020,8021,8022,8023,8025,8027,8029,8031,8032,8033,8034,8035,8036,8037,8038,8039,8040,8041,8042,8043,8044,8045,8046,8047,8048,8049,8050,8051,8052,8053,8054,8055,8056,8057,8058,8059,8060,8061,8064,8065,8066,8067,8068,8069,8070,8071,8072,8073,8074,8075,8076,8077,8078,8079,8080,8081,8082,8083,8084,8085,8086,8087,8088,8089,8090,8091,8092,8093,8094,8095,8096,8097,8098,8099,8100,8101,8102,8103,8104,8105,8106,8107,8108,8109,8110,8111,8112,8113,8114,8115,8116,8118,8119,8120,8121,8122,8123,8124,8126,8130,8131,8132,8134,8135,8136,8137,8138,8139,8140,8144,8145,8146,8147,8150,8151,8152,8153,8154,8155,8160,8161,8162,8163,8164,8165,8166,8167,8168,8169,8170,8171,8172,8178,8179,8180,8182,8183,8184,8185,8186,8187,8188,8305,8319,8336,8337,8338,8339,8340,8341,8342,8343,8344,8345,8346,8347,8348,8450,8455,8458,8459,8460,8461,8462,8463,8464,8465,8466,8467,8469,8473,8474,8475,8476,8477,8484,8486,8488,8490,8491,8492,8493,8495,8496,8497,8498,8499,8500,8501,8502,8503,8504,8505,8508,8509,8510,8511,8517,8518,8519,8520,8521,8526,8579,8580,11264,11265,11266,11267,11268,11269,11270,11271,11272,11273,11274,11275,11276,11277,11278,11279,11280,11281,11282,11283,11284,11285,11286,11287,11288,11289,11290,11291,11292,11293,11294,11295,11296,11297,11298,11299,11300,11301,11302,11303,11304,11305,11306,11307,11308,11309,11310,11312,11313,11314,11315,11316,11317,11318,11319,11320,11321,11322,11323,11324,11325,11326,11327,11328,11329,11330,11331,11332,11333,11334,11335,11336,11337,11338,11339,11340,11341,11342,11343,11344,11345,11346,11347,11348,11349,11350,11351,11352,11353,11354,11355,11356,11357,11358,11360,11361,11362,11363,11364,11365,11366,11367,11368,11369,11370,11371,11372,11373,11374,11375,11376,11377,11378,11379,11380,11381,11382,11383,11384,11385,11386,11387,11388,11389,11390,11391,11392,11393,11394,11395,11396,11397,11398,11399,11400,11401,11402,11403,11404,11405,11406,11407,11408,11409,11410,11411,11412,11413,11414,11415,11416,11417,11418,11419,11420,11421,11422,11423,11424,11425,11426,11427,11428,11429,11430,11431,11432,11433,11434,11435,11436,11437,11438,11439,11440,11441,11442,11443,11444,11445,11446,11447,11448,11449,11450,11451,11452,11453,11454,11455,11456,11457,11458,11459,11460,11461,11462,11463,11464,11465,11466,11467,11468,11469,11470,11471,11472,11473,11474,11475,11476,11477,11478,11479,11480,11481,11482,11483,11484,11485,11486,11487,11488,11489,11490,11491,11492,11499,11500,11501,11502,11520,11521,11522,11523,11524,11525,11526,11527,11528,11529,11530,11531,11532,11533,11534,11535,11536,11537,11538,11539,11540,11541,11542,11543,11544,11545,11546,11547,11548,11549,11550,11551,11552,11553,11554,11555,11556,11557,11568,11569,11570,11571,11572,11573,11574,11575,11576,11577,11578,11579,11580,11581,11582,11583,11584,11585,11586,11587,11588,11589,11590,11591,11592,11593,11594,11595,11596,11597,11598,11599,11600,11601,11602,11603,11604,11605,11606,11607,11608,11609,11610,11611,11612,11613,11614,11615,11616,11617,11618,11619,11620,11621,11631,11648,11649,11650,11651,11652,11653,11654,11655,11656,11657,11658,11659,11660,11661,11662,11663,11664,11665,11666,11667,11668,11669,11670,11680,11681,11682,11683,11684,11685,11686,11688,11689,11690,11691,11692,11693,11694,11696,11697,11698,11699,11700,11701,11702,11704,11705,11706,11707,11708,11709,11710,11712,11713,11714,11715,11716,11717,11718,11720,11721,11722,11723,11724,11725,11726,11728,11729,11730,11731,11732,11733,11734,11736,11737,11738,11739,11740,11741,11742,11823,12293,12294,12337,12338,12339,12340,12341,12347,12348,12353,12354,12355,12356,12357,12358,12359,12360,12361,12362,12363,12364,12365,12366,12367,12368,12369,12370,12371,12372,12373,12374,12375,12376,12377,12378,12379,12380,12381,12382,12383,12384,12385,12386,12387,12388,12389,12390,12391,12392,12393,12394,12395,12396,12397,12398,12399,12400,12401,12402,12403,12404,12405,12406,12407,12408,12409,12410,12411,12412,12413,12414,12415,12416,12417,12418,12419,12420,12421,12422,12423,12424,12425,12426,12427,12428,12429,12430,12431,12432,12433,12434,12435,12436,12437,12438,12445,12446,12447,12449,12450,12451,12452,12453,12454,12455,12456,12457,12458,12459,12460,12461,12462,12463,12464,12465,12466,12467,12468,12469,12470,12471,12472,12473,12474,12475,12476,12477,12478,12479,12480,12481,12482,12483,12484,12485,12486,12487,12488,12489,12490,12491,12492,12493,12494,12495,12496,12497,12498,12499,12500,12501,12502,12503,12504,12505,12506,12507,12508,12509,12510,12511,12512,12513,12514,12515,12516,12517,12518,12519,12520,12521,12522,12523,12524,12525,12526,12527,12528,12529,12530,12531,12532,12533,12534,12535,12536,12537,12538,12540,12541,12542,12543,12549,12550,12551,12552,12553,12554,12555,12556,12557,12558,12559,12560,12561,12562,12563,12564,12565,12566,12567,12568,12569,12570,12571,12572,12573,12574,12575,12576,12577,12578,12579,12580,12581,12582,12583,12584,12585,12586,12587,12588,12589,12593,12594,12595,12596,12597,12598,12599,12600,12601,12602,12603,12604,12605,12606,12607,12608,12609,12610,12611,12612,12613,12614,12615,12616,12617,12618,12619,12620,12621,12622,12623,12624,12625,12626,12627,12628,12629,12630,12631,12632,12633,12634,12635,12636,12637,12638,12639,12640,12641,12642,12643,12644,12645,12646,12647,12648,12649,12650,12651,12652,12653,12654,12655,12656,12657,12658,12659,12660,12661,12662,12663,12664,12665,12666,12667,12668,12669,12670,12671,12672,12673,12674,12675,12676,12677,12678,12679,12680,12681,12682,12683,12684,12685,12686,12704,12705,12706,12707,12708,12709,12710,12711,12712,12713,12714,12715,12716,12717,12718,12719,12720,12721,12722,12723,12724,12725,12726,12727,12728,12729,12730,12784,12785,12786,12787,12788,12789,12790,12791,12792,12793,12794,12795,12796,12797,12798,12799,13312,19893,19968,40907,40960,40961,40962,40963,40964,40965,40966,40967,40968,40969,40970,40971,40972,40973,40974,40975,40976,40977,40978,40979,40980,40981,40982,40983,40984,40985,40986,40987,40988,40989,40990,40991,40992,40993,40994,40995,40996,40997,40998,40999,41e3,41001,41002,41003,41004,41005,41006,41007,41008,41009,41010,41011,41012,41013,41014,41015,41016,41017,41018,41019,41020,41021,41022,41023,41024,41025,41026,41027,41028,41029,41030,41031,41032,41033,41034,41035,41036,41037,41038,41039,41040,41041,41042,41043,41044,41045,41046,41047,41048,41049,41050,41051,41052,41053,41054,41055,41056,41057,41058,41059,41060,41061,41062,41063,41064,41065,41066,41067,41068,41069,41070,41071,41072,41073,41074,41075,41076,41077,41078,41079,41080,41081,41082,41083,41084,41085,41086,41087,41088,41089,41090,41091,41092,41093,41094,41095,41096,41097,41098,41099,41100,41101,41102,41103,41104,41105,41106,41107,41108,41109,41110,41111,41112,41113,41114,41115,41116,41117,41118,41119,41120,41121,41122,41123,41124,41125,41126,41127,41128,41129,41130,41131,41132,41133,41134,41135,41136,41137,41138,41139,41140,41141,41142,41143,41144,41145,41146,41147,41148,41149,41150,41151,41152,41153,41154,41155,41156,41157,41158,41159,41160,41161,41162,41163,41164,41165,41166,41167,41168,41169,41170,41171,41172,41173,41174,41175,41176,41177,41178,41179,41180,41181,41182,41183,41184,41185,41186,41187,41188,41189,41190,41191,41192,41193,41194,41195,41196,41197,41198,41199,41200,41201,41202,41203,41204,41205,41206,41207,41208,41209,41210,41211,41212,41213,41214,41215,41216,41217,41218,41219,41220,41221,41222,41223,41224,41225,41226,41227,41228,41229,41230,41231,41232,41233,41234,41235,41236,41237,41238,41239,41240,41241,41242,41243,41244,41245,41246,41247,41248,41249,41250,41251,41252,41253,41254,41255,41256,41257,41258,41259,41260,41261,41262,41263,41264,41265,41266,41267,41268,41269,41270,41271,41272,41273,41274,41275,41276,41277,41278,41279,41280,41281,41282,41283,41284,41285,41286,41287,41288,41289,41290,41291,41292,41293,41294,41295,41296,41297,41298,41299,41300,41301,41302,41303,41304,41305,41306,41307,41308,41309,41310,41311,41312,41313,41314,41315,41316,41317,41318,41319,41320,41321,41322,41323,41324,41325,41326,41327,41328,41329,41330,41331,41332,41333,41334,41335,41336,41337,41338,41339,41340,41341,41342,41343,41344,41345,41346,41347,41348,41349,41350,41351,41352,41353,41354,41355,41356,41357,41358,41359,41360,41361,41362,41363,41364,41365,41366,41367,41368,41369,41370,41371,41372,41373,41374,41375,41376,41377,41378,41379,41380,41381,41382,41383,41384,41385,41386,41387,41388,41389,41390,41391,41392,41393,41394,41395,41396,41397,41398,41399,41400,41401,41402,41403,41404,41405,41406,41407,41408,41409,41410,41411,41412,41413,41414,41415,41416,41417,41418,41419,41420,41421,41422,41423,41424,41425,41426,41427,41428,41429,41430,41431,41432,41433,41434,41435,41436,41437,41438,41439,41440,41441,41442,41443,41444,41445,41446,41447,41448,41449,41450,41451,41452,41453,41454,41455,41456,41457,41458,41459,41460,41461,41462,41463,41464,41465,41466,41467,41468,41469,41470,41471,41472,41473,41474,41475,41476,41477,41478,41479,41480,41481,41482,41483,41484,41485,41486,41487,41488,41489,41490,41491,41492,41493,41494,41495,41496,41497,41498,41499,41500,41501,41502,41503,41504,41505,41506,41507,41508,41509,41510,41511,41512,41513,41514,41515,41516,41517,41518,41519,41520,41521,41522,41523,41524,41525,41526,41527,41528,41529,41530,41531,41532,41533,41534,41535,41536,41537,41538,41539,41540,41541,41542,41543,41544,41545,41546,41547,41548,41549,41550,41551,41552,41553,41554,41555,41556,41557,41558,41559,41560,41561,41562,41563,41564,41565,41566,41567,41568,41569,41570,41571,41572,41573,41574,41575,41576,41577,41578,41579,41580,41581,41582,41583,41584,41585,41586,41587,41588,41589,41590,41591,41592,41593,41594,41595,41596,41597,41598,41599,41600,41601,41602,41603,41604,41605,41606,41607,41608,41609,41610,41611,41612,41613,41614,41615,41616,41617,41618,41619,41620,41621,41622,41623,41624,41625,41626,41627,41628,41629,41630,41631,41632,41633,41634,41635,41636,41637,41638,41639,41640,41641,41642,41643,41644,41645,41646,41647,41648,41649,41650,41651,41652,41653,41654,41655,41656,41657,41658,41659,41660,41661,41662,41663,41664,41665,41666,41667,41668,41669,41670,41671,41672,41673,41674,41675,41676,41677,41678,41679,41680,41681,41682,41683,41684,41685,41686,41687,41688,41689,41690,41691,41692,41693,41694,41695,41696,41697,41698,41699,41700,41701,41702,41703,41704,41705,41706,41707,41708,41709,41710,41711,41712,41713,41714,41715,41716,41717,41718,41719,41720,41721,41722,41723,41724,41725,41726,41727,41728,41729,41730,41731,41732,41733,41734,41735,41736,41737,41738,41739,41740,41741,41742,41743,41744,41745,41746,41747,41748,41749,41750,41751,41752,41753,41754,41755,41756,41757,41758,41759,41760,41761,41762,41763,41764,41765,41766,41767,41768,41769,41770,41771,41772,41773,41774,41775,41776,41777,41778,41779,41780,41781,41782,41783,41784,41785,41786,41787,41788,41789,41790,41791,41792,41793,41794,41795,41796,41797,41798,41799,41800,41801,41802,41803,41804,41805,41806,41807,41808,41809,41810,41811,41812,41813,41814,41815,41816,41817,41818,41819,41820,41821,41822,41823,41824,41825,41826,41827,41828,41829,41830,41831,41832,41833,41834,41835,41836,41837,41838,41839,41840,41841,41842,41843,41844,41845,41846,41847,41848,41849,41850,41851,41852,41853,41854,41855,41856,41857,41858,41859,41860,41861,41862,41863,41864,41865,41866,41867,41868,41869,41870,41871,41872,41873,41874,41875,41876,41877,41878,41879,41880,41881,41882,41883,41884,41885,41886,41887,41888,41889,41890,41891,41892,41893,41894,41895,41896,41897,41898,41899,41900,41901,41902,41903,41904,41905,41906,41907,41908,41909,41910,41911,41912,41913,41914,41915,41916,41917,41918,41919,41920,41921,41922,41923,41924,41925,41926,41927,41928,41929,41930,41931,41932,41933,41934,41935,41936,41937,41938,41939,41940,41941,41942,41943,41944,41945,41946,41947,41948,41949,41950,41951,41952,41953,41954,41955,41956,41957,41958,41959,41960,41961,41962,41963,41964,41965,41966,41967,41968,41969,41970,41971,41972,41973,41974,41975,41976,41977,41978,41979,41980,41981,41982,41983,41984,41985,41986,41987,41988,41989,41990,41991,41992,41993,41994,41995,41996,41997,41998,41999,42e3,42001,42002,42003,42004,42005,42006,42007,42008,42009,42010,42011,42012,42013,42014,42015,42016,42017,42018,42019,42020,42021,42022,42023,42024,42025,42026,42027,42028,42029,42030,42031,42032,42033,42034,42035,42036,42037,42038,42039,42040,42041,42042,42043,42044,42045,42046,42047,42048,42049,42050,42051,42052,42053,42054,42055,42056,42057,42058,42059,42060,42061,42062,42063,42064,42065,42066,42067,42068,42069,42070,42071,42072,42073,42074,42075,42076,42077,42078,42079,42080,42081,42082,42083,42084,42085,42086,42087,42088,42089,42090,42091,42092,42093,42094,42095,42096,42097,42098,42099,42100,42101,42102,42103,42104,42105,42106,42107,42108,42109,42110,42111,42112,42113,42114,42115,42116,42117,42118,42119,42120,42121,42122,42123,42124,42192,42193,42194,42195,42196,42197,42198,42199,42200,42201,42202,42203,42204,42205,42206,42207,42208,42209,42210,42211,42212,42213,42214,42215,42216,42217,42218,42219,42220,42221,42222,42223,42224,42225,42226,42227,42228,42229,42230,42231,42232,42233,42234,42235,42236,42237,42240,42241,42242,42243,42244,42245,42246,42247,42248,42249,42250,42251,42252,42253,42254,42255,42256,42257,42258,42259,42260,42261,42262,42263,42264,42265,42266,42267,42268,42269,42270,42271,42272,42273,42274,42275,42276,42277,42278,42279,42280,42281,42282,42283,42284,42285,42286,42287,42288,42289,42290,42291,42292,42293,42294,42295,42296,42297,42298,42299,42300,42301,42302,42303,42304,42305,42306,42307,42308,42309,42310,42311,42312,42313,42314,42315,42316,42317,42318,42319,42320,42321,42322,42323,42324,42325,42326,42327,42328,42329,42330,42331,42332,42333,42334,42335,42336,42337,42338,42339,42340,42341,42342,42343,42344,42345,42346,42347,42348,42349,42350,42351,42352,42353,42354,42355,42356,42357,42358,42359,42360,42361,42362,42363,42364,42365,42366,42367,42368,42369,42370,42371,42372,42373,42374,42375,42376,42377,42378,42379,42380,42381,42382,42383,42384,42385,42386,42387,42388,42389,42390,42391,42392,42393,42394,42395,42396,42397,42398,42399,42400,42401,42402,42403,42404,42405,42406,42407,42408,42409,42410,42411,42412,42413,42414,42415,42416,42417,42418,42419,42420,42421,42422,42423,42424,42425,42426,42427,42428,42429,42430,42431,42432,42433,42434,42435,42436,42437,42438,42439,42440,42441,42442,42443,42444,42445,42446,42447,42448,42449,42450,42451,42452,42453,42454,42455,42456,42457,42458,42459,42460,42461,42462,42463,42464,42465,42466,42467,42468,42469,42470,42471,42472,42473,42474,42475,42476,42477,42478,42479,42480,42481,42482,42483,42484,42485,42486,42487,42488,42489,42490,42491,42492,42493,42494,42495,42496,42497,42498,42499,42500,42501,42502,42503,42504,42505,42506,42507,42508,42512,42513,42514,42515,42516,42517,42518,42519,42520,42521,42522,42523,42524,42525,42526,42527,42538,42539,42560,42561,42562,42563,42564,42565,42566,42567,42568,42569,42570,42571,42572,42573,42574,42575,42576,42577,42578,42579,42580,42581,42582,42583,42584,42585,42586,42587,42588,42589,42590,42591,42592,42593,42594,42595,42596,42597,42598,42599,42600,42601,42602,42603,42604,42605,42606,42623,42624,42625,42626,42627,42628,42629,42630,42631,42632,42633,42634,42635,42636,42637,42638,42639,42640,42641,42642,42643,42644,42645,42646,42647,42656,42657,42658,42659,42660,42661,42662,42663,42664,42665,42666,42667,42668,42669,42670,42671,42672,42673,42674,42675,42676,42677,42678,42679,42680,42681,42682,42683,42684,42685,42686,42687,42688,42689,42690,42691,42692,42693,42694,42695,42696,42697,42698,42699,42700,42701,42702,42703,42704,42705,42706,42707,42708,42709,42710,42711,42712,42713,42714,42715,42716,42717,42718,42719,42720,42721,42722,42723,42724,42725,42775,42776,42777,42778,42779,42780,42781,42782,42783,42786,42787,42788,42789,42790,42791,42792,42793,42794,42795,42796,42797,42798,42799,42800,42801,42802,42803,42804,42805,42806,42807,42808,42809,42810,42811,42812,42813,42814,42815,42816,42817,42818,42819,42820,42821,42822,42823,42824,42825,42826,42827,42828,42829,42830,42831,42832,42833,42834,42835,42836,42837,42838,42839,42840,42841,42842,42843,42844,42845,42846,42847,42848,42849,42850,42851,42852,42853,42854,42855,42856,42857,42858,42859,42860,42861,42862,42863,42864,42865,42866,42867,42868,42869,42870,42871,42872,42873,42874,42875,42876,42877,42878,42879,42880,42881,42882,42883,42884,42885,42886,42887,42888,42891,42892,42893,42894,42896,42897,42912,42913,42914,42915,42916,42917,42918,42919,42920,42921,43002,43003,43004,43005,43006,43007,43008,43009,43011,43012,43013,43015,43016,43017,43018,43020,43021,43022,43023,43024,43025,43026,43027,43028,43029,43030,43031,43032,43033,43034,43035,43036,43037,43038,43039,43040,43041,43042,43072,43073,43074,43075,43076,43077,43078,43079,43080,43081,43082,43083,43084,43085,43086,43087,43088,43089,43090,43091,43092,43093,43094,43095,43096,43097,43098,43099,43100,43101,43102,43103,43104,43105,43106,43107,43108,43109,43110,43111,43112,43113,43114,43115,43116,43117,43118,43119,43120,43121,43122,43123,43138,43139,43140,43141,43142,43143,43144,43145,43146,43147,43148,43149,43150,43151,43152,43153,43154,43155,43156,43157,43158,43159,43160,43161,43162,43163,43164,43165,43166,43167,43168,43169,43170,43171,43172,43173,43174,43175,43176,43177,43178,43179,43180,43181,43182,43183,43184,43185,43186,43187,43250,43251,43252,43253,43254,43255,43259,43274,43275,43276,43277,43278,43279,43280,43281,43282,43283,43284,43285,43286,43287,43288,43289,43290,43291,43292,43293,43294,43295,43296,43297,43298,43299,43300,43301,43312,43313,43314,43315,43316,43317,43318,43319,43320,43321,43322,43323,43324,43325,43326,43327,43328,43329,43330,43331,43332,43333,43334,43360,43361,43362,43363,43364,43365,43366,43367,43368,43369,43370,43371,43372,43373,43374,43375,43376,43377,43378,43379,43380,43381,43382,43383,43384,43385,43386,43387,43388,43396,43397,43398,43399,43400,43401,43402,43403,43404,43405,43406,43407,43408,43409,43410,43411,43412,43413,43414,43415,43416,43417,43418,43419,43420,43421,43422,43423,43424,43425,43426,43427,43428,43429,43430,43431,43432,43433,43434,43435,43436,43437,43438,43439,43440,43441,43442,43471,43520,43521,43522,43523,43524,43525,43526,43527,43528,43529,43530,43531,43532,43533,43534,43535,43536,43537,43538,43539,43540,43541,43542,43543,43544,43545,43546,43547,43548,43549,43550,43551,43552,43553,43554,43555,43556,43557,43558,43559,43560,43584,43585,43586,43588,43589,43590,43591,43592,43593,43594,43595,43616,43617,43618,43619,43620,43621,43622,43623,43624,43625,43626,43627,43628,43629,43630,43631,43632,43633,43634,43635,43636,43637,43638,43642,43648,43649,43650,43651,43652,43653,43654,43655,43656,43657,43658,43659,43660,43661,43662,43663,43664,43665,43666,43667,43668,43669,43670,43671,43672,43673,43674,43675,43676,43677,43678,43679,43680,43681,43682,43683,43684,43685,43686,43687,43688,43689,43690,43691,43692,43693,43694,43695,43697,43701,43702,43705,43706,43707,43708,43709,43712,43714,43739,43740,43741,43777,43778,43779,43780,43781,43782,43785,43786,43787,43788,43789,43790,43793,43794,43795,43796,43797,43798,43808,43809,43810,43811,43812,43813,43814,43816,43817,43818,43819,43820,43821,43822,43968,43969,43970,43971,43972,43973,43974,43975,43976,43977,43978,43979,43980,43981,43982,43983,43984,43985,43986,43987,43988,43989,43990,43991,43992,43993,43994,43995,43996,43997,43998,43999,44e3,44001,44002,44032,55203,55216,55217,55218,55219,55220,55221,55222,55223,55224,55225,55226,55227,55228,55229,55230,55231,55232,55233,55234,55235,55236,55237,55238,55243,55244,55245,55246,55247,55248,55249,55250,55251,55252,55253,55254,55255,55256,55257,55258,55259,55260,55261,55262,55263,55264,55265,55266,55267,55268,55269,55270,55271,55272,55273,55274,55275,55276,55277,55278,55279,55280,55281,55282,55283,55284,55285,55286,55287,55288,55289,55290,55291,63744,63745,63746,63747,63748,63749,63750,63751,63752,63753,63754,63755,63756,63757,63758,63759,63760,63761,63762,63763,63764,63765,63766,63767,63768,63769,63770,63771,63772,63773,63774,63775,63776,63777,63778,63779,63780,63781,63782,63783,63784,63785,63786,63787,63788,63789,63790,63791,63792,63793,63794,63795,63796,63797,63798,63799,63800,63801,63802,63803,63804,63805,63806,63807,63808,63809,63810,63811,63812,63813,63814,63815,63816,63817,63818,63819,63820,63821,63822,63823,63824,63825,63826,63827,63828,63829,63830,63831,63832,63833,63834,63835,63836,63837,63838,63839,63840,63841,63842,63843,63844,63845,63846,63847,63848,63849,63850,63851,63852,63853,63854,63855,63856,63857,63858,63859,63860,63861,63862,63863,63864,63865,63866,63867,63868,63869,63870,63871,63872,63873,63874,63875,63876,63877,63878,63879,63880,63881,63882,63883,63884,63885,63886,63887,63888,63889,63890,63891,63892,63893,63894,63895,63896,63897,63898,63899,63900,63901,63902,63903,63904,63905,63906,63907,63908,63909,63910,63911,63912,63913,63914,63915,63916,63917,63918,63919,63920,63921,63922,63923,63924,63925,63926,63927,63928,63929,63930,63931,63932,63933,63934,63935,63936,63937,63938,63939,63940,63941,63942,63943,63944,63945,63946,63947,63948,63949,63950,63951,63952,63953,63954,63955,63956,63957,63958,63959,63960,63961,63962,63963,63964,63965,63966,63967,63968,63969,63970,63971,63972,63973,63974,63975,63976,63977,63978,63979,63980,63981,63982,63983,63984,63985,63986,63987,63988,63989,63990,63991,63992,63993,63994,63995,63996,63997,63998,63999,64e3,64001,64002,64003,64004,64005,64006,64007,64008,64009,64010,64011,64012,64013,64014,64015,64016,64017,64018,64019,64020,64021,64022,64023,64024,64025,64026,64027,64028,64029,64030,64031,64032,64033,64034,64035,64036,64037,64038,64039,64040,64041,64042,64043,64044,64045,64048,64049,64050,64051,64052,64053,64054,64055,64056,64057,64058,64059,64060,64061,64062,64063,64064,64065,64066,64067,64068,64069,64070,64071,64072,64073,64074,64075,64076,64077,64078,64079,64080,64081,64082,64083,64084,64085,64086,64087,64088,64089,64090,64091,64092,64093,64094,64095,64096,64097,64098,64099,64100,64101,64102,64103,64104,64105,64106,64107,64108,64109,64112,64113,64114,64115,64116,64117,64118,64119,64120,64121,64122,64123,64124,64125,64126,64127,64128,64129,64130,64131,64132,64133,64134,64135,64136,64137,64138,64139,64140,64141,64142,64143,64144,64145,64146,64147,64148,64149,64150,64151,64152,64153,64154,64155,64156,64157,64158,64159,64160,64161,64162,64163,64164,64165,64166,64167,64168,64169,64170,64171,64172,64173,64174,64175,64176,64177,64178,64179,64180,64181,64182,64183,64184,64185,64186,64187,64188,64189,64190,64191,64192,64193,64194,64195,64196,64197,64198,64199,64200,64201,64202,64203,64204,64205,64206,64207,64208,64209,64210,64211,64212,64213,64214,64215,64216,64217,64256,64257,64258,64259,64260,64261,64262,64275,64276,64277,64278,64279,64285,64287,64288,64289,64290,64291,64292,64293,64294,64295,64296,64298,64299,64300,64301,64302,64303,64304,64305,64306,64307,64308,64309,64310,64312,64313,64314,64315,64316,64318,64320,64321,64323,64324,64326,64327,64328,64329,64330,64331,64332,64333,64334,64335,64336,64337,64338,64339,64340,64341,64342,64343,64344,64345,64346,64347,64348,64349,64350,64351,64352,64353,64354,64355,64356,64357,64358,64359,64360,64361,64362,64363,64364,64365,64366,64367,64368,64369,64370,64371,64372,64373,64374,64375,64376,64377,64378,64379,64380,64381,64382,64383,64384,64385,64386,64387,64388,64389,64390,64391,64392,64393,64394,64395,64396,64397,64398,64399,64400,64401,64402,64403,64404,64405,64406,64407,64408,64409,64410,64411,64412,64413,64414,64415,64416,64417,64418,64419,64420,64421,64422,64423,64424,64425,64426,64427,64428,64429,64430,64431,64432,64433,64467,64468,64469,64470,64471,64472,64473,64474,64475,64476,64477,64478,64479,64480,64481,64482,64483,64484,64485,64486,64487,64488,64489,64490,64491,64492,64493,64494,64495,64496,64497,64498,64499,64500,64501,64502,64503,64504,64505,64506,64507,64508,64509,64510,64511,64512,64513,64514,64515,64516,64517,64518,64519,64520,64521,64522,64523,64524,64525,64526,64527,64528,64529,64530,64531,64532,64533,64534,64535,64536,64537,64538,64539,64540,64541,64542,64543,64544,64545,64546,64547,64548,64549,64550,64551,64552,64553,64554,64555,64556,64557,64558,64559,64560,64561,64562,64563,64564,64565,64566,64567,64568,64569,64570,64571,64572,64573,64574,64575,64576,64577,64578,64579,64580,64581,64582,64583,64584,64585,64586,64587,64588,64589,64590,64591,64592,64593,64594,64595,64596,64597,64598,64599,64600,64601,64602,64603,64604,64605,64606,64607,64608,64609,64610,64611,64612,64613,64614,64615,64616,64617,64618,64619,64620,64621,64622,64623,64624,64625,64626,64627,64628,64629,64630,64631,64632,64633,64634,64635,64636,64637,64638,64639,64640,64641,64642,64643,64644,64645,64646,64647,64648,64649,64650,64651,64652,64653,64654,64655,64656,64657,64658,64659,64660,64661,64662,64663,64664,64665,64666,64667,64668,64669,64670,64671,64672,64673,64674,64675,64676,64677,64678,64679,64680,64681,64682,64683,64684,64685,64686,64687,64688,64689,64690,64691,64692,64693,64694,64695,64696,64697,64698,64699,64700,64701,64702,64703,64704,64705,64706,64707,64708,64709,64710,64711,64712,64713,64714,64715,64716,64717,64718,64719,64720,64721,64722,64723,64724,64725,64726,64727,64728,64729,64730,64731,64732,64733,64734,64735,64736,64737,64738,64739,64740,64741,64742,64743,64744,64745,64746,64747,64748,64749,64750,64751,64752,64753,64754,64755,64756,64757,64758,64759,64760,64761,64762,64763,64764,64765,64766,64767,64768,64769,64770,64771,64772,64773,64774,64775,64776,64777,64778,64779,64780,64781,64782,64783,64784,64785,64786,64787,64788,64789,64790,64791,64792,64793,64794,64795,64796,64797,64798,64799,64800,64801,64802,64803,64804,64805,64806,64807,64808,64809,64810,64811,64812,64813,64814,64815,64816,64817,64818,64819,64820,64821,64822,64823,64824,64825,64826,64827,64828,64829,64848,64849,64850,64851,64852,64853,64854,64855,64856,64857,64858,64859,64860,64861,64862,64863,64864,64865,64866,64867,64868,64869,64870,64871,64872,64873,64874,64875,64876,64877,64878,64879,64880,64881,64882,64883,64884,64885,64886,64887,64888,64889,64890,64891,64892,64893,64894,64895,64896,64897,64898,64899,64900,64901,64902,64903,64904,64905,64906,64907,64908,64909,64910,64911,64914,64915,64916,64917,64918,64919,64920,64921,64922,64923,64924,64925,64926,64927,64928,64929,64930,64931,64932,64933,64934,64935,64936,64937,64938,64939,64940,64941,64942,64943,64944,64945,64946,64947,64948,64949,64950,64951,64952,64953,64954,64955,64956,64957,64958,64959,64960,64961,64962,64963,64964,64965,64966,64967,65008,65009,65010,65011,65012,65013,65014,65015,65016,65017,65018,65019,65136,65137,65138,65139,65140,65142,65143,65144,65145,65146,65147,65148,65149,65150,65151,65152,65153,65154,65155,65156,65157,65158,65159,65160,65161,65162,65163,65164,65165,65166,65167,65168,65169,65170,65171,65172,65173,65174,65175,65176,65177,65178,65179,65180,65181,65182,65183,65184,65185,65186,65187,65188,65189,65190,65191,65192,65193,65194,65195,65196,65197,65198,65199,65200,65201,65202,65203,65204,65205,65206,65207,65208,65209,65210,65211,65212,65213,65214,65215,65216,65217,65218,65219,65220,65221,65222,65223,65224,65225,65226,65227,65228,65229,65230,65231,65232,65233,65234,65235,65236,65237,65238,65239,65240,65241,65242,65243,65244,65245,65246,65247,65248,65249,65250,65251,65252,65253,65254,65255,65256,65257,65258,65259,65260,65261,65262,65263,65264,65265,65266,65267,65268,65269,65270,65271,65272,65273,65274,65275,65276,65313,65314,65315,65316,65317,65318,65319,65320,65321,65322,65323,65324,65325,65326,65327,65328,65329,65330,65331,65332,65333,65334,65335,65336,65337,65338,65345,65346,65347,65348,65349,65350,65351,65352,65353,65354,65355,65356,65357,65358,65359,65360,65361,65362,65363,65364,65365,65366,65367,65368,65369,65370,65382,65383,65384,65385,65386,65387,65388,65389,65390,65391,65392,65393,65394,65395,65396,65397,65398,65399,65400,65401,65402,65403,65404,65405,65406,65407,65408,65409,65410,65411,65412,65413,65414,65415,65416,65417,65418,65419,65420,65421,65422,65423,65424,65425,65426,65427,65428,65429,65430,65431,65432,65433,65434,65435,65436,65437,65438,65439,65440,65441,65442,65443,65444,65445,65446,65447,65448,65449,65450,65451,65452,65453,65454,65455,65456,65457,65458,65459,65460,65461,65462,65463,65464,65465,65466,65467,65468,65469,65470,65474,65475,65476,65477,65478,65479,65482,65483,65484,65485,65486,65487,65490,65491,65492,65493,65494,65495,65498,65499,65500,65536,65537,65538,65539,65540,65541,65542,65543,65544,65545,65546,65547,65549,65550,65551,65552,65553,65554,65555,65556,65557,65558,65559,65560,65561,65562,65563,65564,65565,65566,65567,65568,65569,65570,65571,65572,65573,65574,65576,65577,65578,65579,65580,65581,65582,65583,65584,65585,65586,65587,65588,65589,65590,65591,65592,65593,65594,65596,65597,65599,65600,65601,65602,65603,65604,65605,65606,65607,65608,65609,65610,65611,65612,65613,65616,65617,65618,65619,65620,65621,65622,65623,65624,65625,65626,65627,65628,65629,65664,65665,65666,65667,65668,65669,65670,65671,65672,65673,65674,65675,65676,65677,65678,65679,65680,65681,65682,65683,65684,65685,65686,65687,65688,65689,65690,65691,65692,65693,65694,65695,65696,65697,65698,65699,65700,65701,65702,65703,65704,65705,65706,65707,65708,65709,65710,65711,65712,65713,65714,65715,65716,65717,65718,65719,65720,65721,65722,65723,65724,65725,65726,65727,65728,65729,65730,65731,65732,65733,65734,65735,65736,65737,65738,65739,65740,65741,65742,65743,65744,65745,65746,65747,65748,65749,65750,65751,65752,65753,65754,65755,65756,65757,65758,65759,65760,65761,65762,65763,65764,65765,65766,65767,65768,65769,65770,65771,65772,65773,65774,65775,65776,65777,65778,65779,65780,65781,65782,65783,65784,65785,65786,66176,66177,66178,66179,66180,66181,66182,66183,66184,66185,66186,66187,66188,66189,66190,66191,66192,66193,66194,66195,66196,66197,66198,66199,66200,66201,66202,66203,66204,66208,66209,66210,66211,66212,66213,66214,66215,66216,66217,66218,66219,66220,66221,66222,66223,66224,66225,66226,66227,66228,66229,66230,66231,66232,66233,66234,66235,66236,66237,66238,66239,66240,66241,66242,66243,66244,66245,66246,66247,66248,66249,66250,66251,66252,66253,66254,66255,66256,66304,66305,66306,66307,66308,66309,66310,66311,66312,66313,66314,66315,66316,66317,66318,66319,66320,66321,66322,66323,66324,66325,66326,66327,66328,66329,66330,66331,66332,66333,66334,66352,66353,66354,66355,66356,66357,66358,66359,66360,66361,66362,66363,66364,66365,66366,66367,66368,66370,66371,66372,66373,66374,66375,66376,66377,66432,66433,66434,66435,66436,66437,66438,66439,66440,66441,66442,66443,66444,66445,66446,66447,66448,66449,66450,66451,66452,66453,66454,66455,66456,66457,66458,66459,66460,66461,66464,66465,66466,66467,66468,66469,66470,66471,66472,66473,66474,66475,66476,66477,66478,66479,66480,66481,66482,66483,66484,66485,66486,66487,66488,66489,66490,66491,66492,66493,66494,66495,66496,66497,66498,66499,66504,66505,66506,66507,66508,66509,66510,66511,66560,66561,66562,66563,66564,66565,66566,66567,66568,66569,66570,66571,66572,66573,66574,66575,66576,66577,66578,66579,66580,66581,66582,66583,66584,66585,66586,66587,66588,66589,66590,66591,66592,66593,66594,66595,66596,66597,66598,66599,66600,66601,66602,66603,66604,66605,66606,66607,66608,66609,66610,66611,66612,66613,66614,66615,66616,66617,66618,66619,66620,66621,66622,66623,66624,66625,66626,66627,66628,66629,66630,66631,66632,66633,66634,66635,66636,66637,66638,66639,66640,66641,66642,66643,66644,66645,66646,66647,66648,66649,66650,66651,66652,66653,66654,66655,66656,66657,66658,66659,66660,66661,66662,66663,66664,66665,66666,66667,66668,66669,66670,66671,66672,66673,66674,66675,66676,66677,66678,66679,66680,66681,66682,66683,66684,66685,66686,66687,66688,66689,66690,66691,66692,66693,66694,66695,66696,66697,66698,66699,66700,66701,66702,66703,66704,66705,66706,66707,66708,66709,66710,66711,66712,66713,66714,66715,66716,66717,67584,67585,67586,67587,67588,67589,67592,67594,67595,67596,67597,67598,67599,67600,67601,67602,67603,67604,67605,67606,67607,67608,67609,67610,67611,67612,67613,67614,67615,67616,67617,67618,67619,67620,67621,67622,67623,67624,67625,67626,67627,67628,67629,67630,67631,67632,67633,67634,67635,67636,67637,67639,67640,67644,67647,67648,67649,67650,67651,67652,67653,67654,67655,67656,67657,67658,67659,67660,67661,67662,67663,67664,67665,67666,67667,67668,67669,67840,67841,67842,67843,67844,67845,67846,67847,67848,67849,67850,67851,67852,67853,67854,67855,67856,67857,67858,67859,67860,67861,67872,67873,67874,67875,67876,67877,67878,67879,67880,67881,67882,67883,67884,67885,67886,67887,67888,67889,67890,67891,67892,67893,67894,67895,67896,67897,68096,68112,68113,68114,68115,68117,68118,68119,68121,68122,68123,68124,68125,68126,68127,68128,68129,68130,68131,68132,68133,68134,68135,68136,68137,68138,68139,68140,68141,68142,68143,68144,68145,68146,68147,68192,68193,68194,68195,68196,68197,68198,68199,68200,68201,68202,68203,68204,68205,68206,68207,68208,68209,68210,68211,68212,68213,68214,68215,68216,68217,68218,68219,68220,68352,68353,68354,68355,68356,68357,68358,68359,68360,68361,68362,68363,68364,68365,68366,68367,68368,68369,68370,68371,68372,68373,68374,68375,68376,68377,68378,68379,68380,68381,68382,68383,68384,68385,68386,68387,68388,68389,68390,68391,68392,68393,68394,68395,68396,68397,68398,68399,68400,68401,68402,68403,68404,68405,68416,68417,68418,68419,68420,68421,68422,68423,68424,68425,68426,68427,68428,68429,68430,68431,68432,68433,68434,68435,68436,68437,68448,68449,68450,68451,68452,68453,68454,68455,68456,68457,68458,68459,68460,68461,68462,68463,68464,68465,68466,68608,68609,68610,68611,68612,68613,68614,68615,68616,68617,68618,68619,68620,68621,68622,68623,68624,68625,68626,68627,68628,68629,68630,68631,68632,68633,68634,68635,68636,68637,68638,68639,68640,68641,68642,68643,68644,68645,68646,68647,68648,68649,68650,68651,68652,68653,68654,68655,68656,68657,68658,68659,68660,68661,68662,68663,68664,68665,68666,68667,68668,68669,68670,68671,68672,68673,68674,68675,68676,68677,68678,68679,68680,69635,69636,69637,69638,69639,69640,69641,69642,69643,69644,69645,69646,69647,69648,69649,69650,69651,69652,69653,69654,69655,69656,69657,69658,69659,69660,69661,69662,69663,69664,69665,69666,69667,69668,69669,69670,69671,69672,69673,69674,69675,69676,69677,69678,69679,69680,69681,69682,69683,69684,69685,69686,69687,69763,69764,69765,69766,69767,69768,69769,69770,69771,69772,69773,69774,69775,69776,69777,69778,69779,69780,69781,69782,69783,69784,69785,69786,69787,69788,69789,69790,69791,69792,69793,69794,69795,69796,69797,69798,69799,69800,69801,69802,69803,69804,69805,69806,69807,73728,73729,73730,73731,73732,73733,73734,73735,73736,73737,73738,73739,73740,73741,73742,73743,73744,73745,73746,73747,73748,73749,73750,73751,73752,73753,73754,73755,73756,73757,73758,73759,73760,73761,73762,73763,73764,73765,73766,73767,73768,73769,73770,73771,73772,73773,73774,73775,73776,73777,73778,73779,73780,73781,73782,73783,73784,73785,73786,73787,73788,73789,73790,73791,73792,73793,73794,73795,73796,73797,73798,73799,73800,73801,73802,73803,73804,73805,73806,73807,73808,73809,73810,73811,73812,73813,73814,73815,73816,73817,73818,73819,73820,73821,73822,73823,73824,73825,73826,73827,73828,73829,73830,73831,73832,73833,73834,73835,73836,73837,73838,73839,73840,73841,73842,73843,73844,73845,73846,73847,73848,73849,73850,73851,73852,73853,73854,73855,73856,73857,73858,73859,73860,73861,73862,73863,73864,73865,73866,73867,73868,73869,73870,73871,73872,73873,73874,73875,73876,73877,73878,73879,73880,73881,73882,73883,73884,73885,73886,73887,73888,73889,73890,73891,73892,73893,73894,73895,73896,73897,73898,73899,73900,73901,73902,73903,73904,73905,73906,73907,73908,73909,73910,73911,73912,73913,73914,73915,73916,73917,73918,73919,73920,73921,73922,73923,73924,73925,73926,73927,73928,73929,73930,73931,73932,73933,73934,73935,73936,73937,73938,73939,73940,73941,73942,73943,73944,73945,73946,73947,73948,73949,73950,73951,73952,73953,73954,73955,73956,73957,73958,73959,73960,73961,73962,73963,73964,73965,73966,73967,73968,73969,73970,73971,73972,73973,73974,73975,73976,73977,73978,73979,73980,73981,73982,73983,73984,73985,73986,73987,73988,73989,73990,73991,73992,73993,73994,73995,73996,73997,73998,73999,74e3,74001,74002,74003,74004,74005,74006,74007,74008,74009,74010,74011,74012,74013,74014,74015,74016,74017,74018,74019,74020,74021,74022,74023,74024,74025,74026,74027,74028,74029,74030,74031,74032,74033,74034,74035,74036,74037,74038,74039,74040,74041,74042,74043,74044,74045,74046,74047,74048,74049,74050,74051,74052,74053,74054,74055,74056,74057,74058,74059,74060,74061,74062,74063,74064,74065,74066,74067,74068,74069,74070,74071,74072,74073,74074,74075,74076,74077,74078,74079,74080,74081,74082,74083,74084,74085,74086,74087,74088,74089,74090,74091,74092,74093,74094,74095,74096,74097,74098,74099,74100,74101,74102,74103,74104,74105,74106,74107,74108,74109,74110,74111,74112,74113,74114,74115,74116,74117,74118,74119,74120,74121,74122,74123,74124,74125,74126,74127,74128,74129,74130,74131,74132,74133,74134,74135,74136,74137,74138,74139,74140,74141,74142,74143,74144,74145,74146,74147,74148,74149,74150,74151,74152,74153,74154,74155,74156,74157,74158,74159,74160,74161,74162,74163,74164,74165,74166,74167,74168,74169,74170,74171,74172,74173,74174,74175,74176,74177,74178,74179,74180,74181,74182,74183,74184,74185,74186,74187,74188,74189,74190,74191,74192,74193,74194,74195,74196,74197,74198,74199,74200,74201,74202,74203,74204,74205,74206,74207,74208,74209,74210,74211,74212,74213,74214,74215,74216,74217,74218,74219,74220,74221,74222,74223,74224,74225,74226,74227,74228,74229,74230,74231,74232,74233,74234,74235,74236,74237,74238,74239,74240,74241,74242,74243,74244,74245,74246,74247,74248,74249,74250,74251,74252,74253,74254,74255,74256,74257,74258,74259,74260,74261,74262,74263,74264,74265,74266,74267,74268,74269,74270,74271,74272,74273,74274,74275,74276,74277,74278,74279,74280,74281,74282,74283,74284,74285,74286,74287,74288,74289,74290,74291,74292,74293,74294,74295,74296,74297,74298,74299,74300,74301,74302,74303,74304,74305,74306,74307,74308,74309,74310,74311,74312,74313,74314,74315,74316,74317,74318,74319,74320,74321,74322,74323,74324,74325,74326,74327,74328,74329,74330,74331,74332,74333,74334,74335,74336,74337,74338,74339,74340,74341,74342,74343,74344,74345,74346,74347,74348,74349,74350,74351,74352,74353,74354,74355,74356,74357,74358,74359,74360,74361,74362,74363,74364,74365,74366,74367,74368,74369,74370,74371,74372,74373,74374,74375,74376,74377,74378,74379,74380,74381,74382,74383,74384,74385,74386,74387,74388,74389,74390,74391,74392,74393,74394,74395,74396,74397,74398,74399,74400,74401,74402,74403,74404,74405,74406,74407,74408,74409,74410,74411,74412,74413,74414,74415,74416,74417,74418,74419,74420,74421,74422,74423,74424,74425,74426,74427,74428,74429,74430,74431,74432,74433,74434,74435,74436,74437,74438,74439,74440,74441,74442,74443,74444,74445,74446,74447,74448,74449,74450,74451,74452,74453,74454,74455,74456,74457,74458,74459,74460,74461,74462,74463,74464,74465,74466,74467,74468,74469,74470,74471,74472,74473,74474,74475,74476,74477,74478,74479,74480,74481,74482,74483,74484,74485,74486,74487,74488,74489,74490,74491,74492,74493,74494,74495,74496,74497,74498,74499,74500,74501,74502,74503,74504,74505,74506,74507,74508,74509,74510,74511,74512,74513,74514,74515,74516,74517,74518,74519,74520,74521,74522,74523,74524,74525,74526,74527,74528,74529,74530,74531,74532,74533,74534,74535,74536,74537,74538,74539,74540,74541,74542,74543,74544,74545,74546,74547,74548,74549,74550,74551,74552,74553,74554,74555,74556,74557,74558,74559,74560,74561,74562,74563,74564,74565,74566,74567,74568,74569,74570,74571,74572,74573,74574,74575,74576,74577,74578,74579,74580,74581,74582,74583,74584,74585,74586,74587,74588,74589,74590,74591,74592,74593,74594,74595,74596,74597,74598,74599,74600,74601,74602,74603,74604,74605,74606,77824,77825,77826,77827,77828,77829,77830,77831,77832,77833,77834,77835,77836,77837,77838,77839,77840,77841,77842,77843,77844,77845,77846,77847,77848,77849,77850,77851,77852,77853,77854,77855,77856,77857,77858,77859,77860,77861,77862,77863,77864,77865,77866,77867,77868,77869,77870,77871,77872,77873,77874,77875,77876,77877,77878,77879,77880,77881,77882,77883,77884,77885,77886,77887,77888,77889,77890,77891,77892,77893,77894,77895,77896,77897,77898,77899,77900,77901,77902,77903,77904,77905,77906,77907,77908,77909,77910,77911,77912,77913,77914,77915,77916,77917,77918,77919,77920,77921,77922,77923,77924,77925,77926,77927,77928,77929,77930,77931,77932,77933,77934,77935,77936,77937,77938,77939,77940,77941,77942,77943,77944,77945,77946,77947,77948,77949,77950,77951,77952,77953,77954,77955,77956,77957,77958,77959,77960,77961,77962,77963,77964,77965,77966,77967,77968,77969,77970,77971,77972,77973,77974,77975,77976,77977,77978,77979,77980,77981,77982,77983,77984,77985,77986,77987,77988,77989,77990,77991,77992,77993,77994,77995,77996,77997,77998,77999,78e3,78001,78002,78003,78004,78005,78006,78007,78008,78009,78010,78011,78012,78013,78014,78015,78016,78017,78018,78019,78020,78021,78022,78023,78024,78025,78026,78027,78028,78029,78030,78031,78032,78033,78034,78035,78036,78037,78038,78039,78040,78041,78042,78043,78044,78045,78046,78047,78048,78049,78050,78051,78052,78053,78054,78055,78056,78057,78058,78059,78060,78061,78062,78063,78064,78065,78066,78067,78068,78069,78070,78071,78072,78073,78074,78075,78076,78077,78078,78079,78080,78081,78082,78083,78084,78085,78086,78087,78088,78089,78090,78091,78092,78093,78094,78095,78096,78097,78098,78099,78100,78101,78102,78103,78104,78105,78106,78107,78108,78109,78110,78111,78112,78113,78114,78115,78116,78117,78118,78119,78120,78121,78122,78123,78124,78125,78126,78127,78128,78129,78130,78131,78132,78133,78134,78135,78136,78137,78138,78139,78140,78141,78142,78143,78144,78145,78146,78147,78148,78149,78150,78151,78152,78153,78154,78155,78156,78157,78158,78159,78160,78161,78162,78163,78164,78165,78166,78167,78168,78169,78170,78171,78172,78173,78174,78175,78176,78177,78178,78179,78180,78181,78182,78183,78184,78185,78186,78187,78188,78189,78190,78191,78192,78193,78194,78195,78196,78197,78198,78199,78200,78201,78202,78203,78204,78205,78206,78207,78208,78209,78210,78211,78212,78213,78214,78215,78216,78217,78218,78219,78220,78221,78222,78223,78224,78225,78226,78227,78228,78229,78230,78231,78232,78233,78234,78235,78236,78237,78238,78239,78240,78241,78242,78243,78244,78245,78246,78247,78248,78249,78250,78251,78252,78253,78254,78255,78256,78257,78258,78259,78260,78261,78262,78263,78264,78265,78266,78267,78268,78269,78270,78271,78272,78273,78274,78275,78276,78277,78278,78279,78280,78281,78282,78283,78284,78285,78286,78287,78288,78289,78290,78291,78292,78293,78294,78295,78296,78297,78298,78299,78300,78301,78302,78303,78304,78305,78306,78307,78308,78309,78310,78311,78312,78313,78314,78315,78316,78317,78318,78319,78320,78321,78322,78323,78324,78325,78326,78327,78328,78329,78330,78331,78332,78333,78334,78335,78336,78337,78338,78339,78340,78341,78342,78343,78344,78345,78346,78347,78348,78349,78350,78351,78352,78353,78354,78355,78356,78357,78358,78359,78360,78361,78362,78363,78364,78365,78366,78367,78368,78369,78370,78371,78372,78373,78374,78375,78376,78377,78378,78379,78380,78381,78382,78383,78384,78385,78386,78387,78388,78389,78390,78391,78392,78393,78394,78395,78396,78397,78398,78399,78400,78401,78402,78403,78404,78405,78406,78407,78408,78409,78410,78411,78412,78413,78414,78415,78416,78417,78418,78419,78420,78421,78422,78423,78424,78425,78426,78427,78428,78429,78430,78431,78432,78433,78434,78435,78436,78437,78438,78439,78440,78441,78442,78443,78444,78445,78446,78447,78448,78449,78450,78451,78452,78453,78454,78455,78456,78457,78458,78459,78460,78461,78462,78463,78464,78465,78466,78467,78468,78469,78470,78471,78472,78473,78474,78475,78476,78477,78478,78479,78480,78481,78482,78483,78484,78485,78486,78487,78488,78489,78490,78491,78492,78493,78494,78495,78496,78497,78498,78499,78500,78501,78502,78503,78504,78505,78506,78507,78508,78509,78510,78511,78512,78513,78514,78515,78516,78517,78518,78519,78520,78521,78522,78523,78524,78525,78526,78527,78528,78529,78530,78531,78532,78533,78534,78535,78536,78537,78538,78539,78540,78541,78542,78543,78544,78545,78546,78547,78548,78549,78550,78551,78552,78553,78554,78555,78556,78557,78558,78559,78560,78561,78562,78563,78564,78565,78566,78567,78568,78569,78570,78571,78572,78573,78574,78575,78576,78577,78578,78579,78580,78581,78582,78583,78584,78585,78586,78587,78588,78589,78590,78591,78592,78593,78594,78595,78596,78597,78598,78599,78600,78601,78602,78603,78604,78605,78606,78607,78608,78609,78610,78611,78612,78613,78614,78615,78616,78617,78618,78619,78620,78621,78622,78623,78624,78625,78626,78627,78628,78629,78630,78631,78632,78633,78634,78635,78636,78637,78638,78639,78640,78641,78642,78643,78644,78645,78646,78647,78648,78649,78650,78651,78652,78653,78654,78655,78656,78657,78658,78659,78660,78661,78662,78663,78664,78665,78666,78667,78668,78669,78670,78671,78672,78673,78674,78675,78676,78677,78678,78679,78680,78681,78682,78683,78684,78685,78686,78687,78688,78689,78690,78691,78692,78693,78694,78695,78696,78697,78698,78699,78700,78701,78702,78703,78704,78705,78706,78707,78708,78709,78710,78711,78712,78713,78714,78715,78716,78717,78718,78719,78720,78721,78722,78723,78724,78725,78726,78727,78728,78729,78730,78731,78732,78733,78734,78735,78736,78737,78738,78739,78740,78741,78742,78743,78744,78745,78746,78747,78748,78749,78750,78751,78752,78753,78754,78755,78756,78757,78758,78759,78760,78761,78762,78763,78764,78765,78766,78767,78768,78769,78770,78771,78772,78773,78774,78775,78776,78777,78778,78779,78780,78781,78782,78783,78784,78785,78786,78787,78788,78789,78790,78791,78792,78793,78794,78795,78796,78797,78798,78799,78800,78801,78802,78803,78804,78805,78806,78807,78808,78809,78810,78811,78812,78813,78814,78815,78816,78817,78818,78819,78820,78821,78822,78823,78824,78825,78826,78827,78828,78829,78830,78831,78832,78833,78834,78835,78836,78837,78838,78839,78840,78841,78842,78843,78844,78845,78846,78847,78848,78849,78850,78851,78852,78853,78854,78855,78856,78857,78858,78859,78860,78861,78862,78863,78864,78865,78866,78867,78868,78869,78870,78871,78872,78873,78874,78875,78876,78877,78878,78879,78880,78881,78882,78883,78884,78885,78886,78887,78888,78889,78890,78891,78892,78893,78894,92160,92161,92162,92163,92164,92165,92166,92167,92168,92169,92170,92171,92172,92173,92174,92175,92176,92177,92178,92179,92180,92181,92182,92183,92184,92185,92186,92187,92188,92189,92190,92191,92192,92193,92194,92195,92196,92197,92198,92199,92200,92201,92202,92203,92204,92205,92206,92207,92208,92209,92210,92211,92212,92213,92214,92215,92216,92217,92218,92219,92220,92221,92222,92223,92224,92225,92226,92227,92228,92229,92230,92231,92232,92233,92234,92235,92236,92237,92238,92239,92240,92241,92242,92243,92244,92245,92246,92247,92248,92249,92250,92251,92252,92253,92254,92255,92256,92257,92258,92259,92260,92261,92262,92263,92264,92265,92266,92267,92268,92269,92270,92271,92272,92273,92274,92275,92276,92277,92278,92279,92280,92281,92282,92283,92284,92285,92286,92287,92288,92289,92290,92291,92292,92293,92294,92295,92296,92297,92298,92299,92300,92301,92302,92303,92304,92305,92306,92307,92308,92309,92310,92311,92312,92313,92314,92315,92316,92317,92318,92319,92320,92321,92322,92323,92324,92325,92326,92327,92328,92329,92330,92331,92332,92333,92334,92335,92336,92337,92338,92339,92340,92341,92342,92343,92344,92345,92346,92347,92348,92349,92350,92351,92352,92353,92354,92355,92356,92357,92358,92359,92360,92361,92362,92363,92364,92365,92366,92367,92368,92369,92370,92371,92372,92373,92374,92375,92376,92377,92378,92379,92380,92381,92382,92383,92384,92385,92386,92387,92388,92389,92390,92391,92392,92393,92394,92395,92396,92397,92398,92399,92400,92401,92402,92403,92404,92405,92406,92407,92408,92409,92410,92411,92412,92413,92414,92415,92416,92417,92418,92419,92420,92421,92422,92423,92424,92425,92426,92427,92428,92429,92430,92431,92432,92433,92434,92435,92436,92437,92438,92439,92440,92441,92442,92443,92444,92445,92446,92447,92448,92449,92450,92451,92452,92453,92454,92455,92456,92457,92458,92459,92460,92461,92462,92463,92464,92465,92466,92467,92468,92469,92470,92471,92472,92473,92474,92475,92476,92477,92478,92479,92480,92481,92482,92483,92484,92485,92486,92487,92488,92489,92490,92491,92492,92493,92494,92495,92496,92497,92498,92499,92500,92501,92502,92503,92504,92505,92506,92507,92508,92509,92510,92511,92512,92513,92514,92515,92516,92517,92518,92519,92520,92521,92522,92523,92524,92525,92526,92527,92528,92529,92530,92531,92532,92533,92534,92535,92536,92537,92538,92539,92540,92541,92542,92543,92544,92545,92546,92547,92548,92549,92550,92551,92552,92553,92554,92555,92556,92557,92558,92559,92560,92561,92562,92563,92564,92565,92566,92567,92568,92569,92570,92571,92572,92573,92574,92575,92576,92577,92578,92579,92580,92581,92582,92583,92584,92585,92586,92587,92588,92589,92590,92591,92592,92593,92594,92595,92596,92597,92598,92599,92600,92601,92602,92603,92604,92605,92606,92607,92608,92609,92610,92611,92612,92613,92614,92615,92616,92617,92618,92619,92620,92621,92622,92623,92624,92625,92626,92627,92628,92629,92630,92631,92632,92633,92634,92635,92636,92637,92638,92639,92640,92641,92642,92643,92644,92645,92646,92647,92648,92649,92650,92651,92652,92653,92654,92655,92656,92657,92658,92659,92660,92661,92662,92663,92664,92665,92666,92667,92668,92669,92670,92671,92672,92673,92674,92675,92676,92677,92678,92679,92680,92681,92682,92683,92684,92685,92686,92687,92688,92689,92690,92691,92692,92693,92694,92695,92696,92697,92698,92699,92700,92701,92702,92703,92704,92705,92706,92707,92708,92709,92710,92711,92712,92713,92714,92715,92716,92717,92718,92719,92720,92721,92722,92723,92724,92725,92726,92727,92728,110592,110593,119808,119809,119810,119811,119812,119813,119814,119815,119816,119817,119818,119819,119820,119821,119822,119823,119824,119825,119826,119827,119828,119829,119830,119831,119832,119833,119834,119835,119836,119837,119838,119839,119840,119841,119842,119843,119844,119845,119846,119847,119848,119849,119850,119851,119852,119853,119854,119855,119856,119857,119858,119859,119860,119861,119862,119863,119864,119865,119866,119867,119868,119869,119870,119871,119872,119873,119874,119875,119876,119877,119878,119879,119880,119881,119882,119883,119884,119885,119886,119887,119888,119889,119890,119891,119892,119894,119895,119896,119897,119898,119899,119900,119901,119902,119903,119904,119905,119906,119907,119908,119909,119910,119911,119912,119913,119914,119915,119916,119917,119918,119919,119920,119921,119922,119923,119924,119925,119926,119927,119928,119929,119930,119931,119932,119933,119934,119935,119936,119937,119938,119939,119940,119941,119942,119943,119944,119945,119946,119947,119948,119949,119950,119951,119952,119953,119954,119955,119956,119957,119958,119959,119960,119961,119962,119963,119964,119966,119967,119970,119973,119974,119977,119978,119979,119980,119982,119983,119984,119985,119986,119987,119988,119989,119990,119991,119992,119993,119995,119997,119998,119999,12e4,120001,120002,120003,120005,120006,120007,120008,120009,120010,120011,120012,120013,120014,120015,120016,120017,120018,120019,120020,120021,120022,120023,120024,120025,120026,120027,120028,120029,120030,120031,120032,120033,120034,120035,120036,120037,120038,120039,120040,120041,120042,120043,120044,120045,120046,120047,120048,120049,120050,120051,120052,120053,120054,120055,120056,120057,120058,120059,120060,120061,120062,120063,120064,120065,120066,120067,120068,120069,120071,120072,120073,120074,120077,120078,120079,120080,120081,120082,120083,120084,120086,120087,120088,120089,120090,120091,120092,120094,120095,120096,120097,120098,120099,120100,120101,120102,120103,120104,120105,120106,120107,120108,120109,120110,120111,120112,120113,120114,120115,120116,120117,120118,120119,120120,120121,120123,120124,120125,120126,120128,120129,120130,120131,120132,120134,120138,120139,120140,120141,120142,120143,120144,120146,120147,120148,120149,120150,120151,120152,120153,120154,120155,120156,120157,120158,120159,120160,120161,120162,120163,120164,120165,120166,120167,120168,120169,120170,120171,120172,120173,120174,120175,120176,120177,120178,120179,120180,120181,120182,120183,120184,120185,120186,120187,120188,120189,120190,120191,120192,120193,120194,120195,120196,120197,120198,120199,120200,120201,120202,120203,120204,120205,120206,120207,120208,120209,120210,120211,120212,120213,120214,120215,120216,120217,120218,120219,120220,120221,120222,120223,120224,120225,120226,120227,120228,120229,120230,120231,120232,120233,120234,120235,120236,120237,120238,120239,120240,120241,120242,120243,120244,120245,120246,120247,120248,120249,120250,120251,120252,120253,120254,120255,120256,120257,120258,120259,120260,120261,120262,120263,120264,120265,120266,120267,120268,120269,120270,120271,120272,120273,120274,120275,120276,120277,120278,120279,120280,120281,120282,120283,120284,120285,120286,120287,120288,120289,120290,120291,120292,120293,120294,120295,120296,120297,120298,120299,120300,120301,120302,120303,120304,120305,120306,120307,120308,120309,120310,120311,120312,120313,120314,120315,120316,120317,120318,120319,120320,120321,120322,120323,120324,120325,120326,120327,120328,120329,120330,120331,120332,120333,120334,120335,120336,120337,120338,120339,120340,120341,120342,120343,120344,120345,120346,120347,120348,120349,120350,120351,120352,120353,120354,120355,120356,120357,120358,120359,120360,120361,120362,120363,120364,120365,120366,120367,120368,120369,120370,120371,120372,120373,120374,120375,120376,120377,120378,120379,120380,120381,120382,120383,120384,120385,120386,120387,120388,120389,120390,120391,120392,120393,120394,120395,120396,120397,120398,120399,120400,120401,120402,120403,120404,120405,120406,120407,120408,120409,120410,120411,120412,120413,120414,120415,120416,120417,120418,120419,120420,120421,120422,120423,120424,120425,120426,120427,120428,120429,120430,120431,120432,120433,120434,120435,120436,120437,120438,120439,120440,120441,120442,120443,120444,120445,120446,120447,120448,120449,120450,120451,120452,120453,120454,120455,120456,120457,120458,120459,120460,120461,120462,120463,120464,120465,120466,120467,120468,120469,120470,120471,120472,120473,120474,120475,120476,120477,120478,120479,120480,120481,120482,120483,120484,120485,120488,120489,120490,120491,120492,120493,120494,120495,120496,120497,120498,120499,120500,120501,120502,120503,120504,120505,120506,120507,120508,120509,120510,120511,120512,120514,120515,120516,120517,120518,120519,120520,120521,120522,120523,120524,120525,120526,120527,120528,120529,120530,120531,120532,120533,120534,120535,120536,120537,120538,120540,120541,120542,120543,120544,120545,120546,120547,120548,120549,120550,120551,120552,120553,120554,120555,120556,120557,120558,120559,120560,120561,120562,120563,120564,120565,120566,120567,120568,120569,120570,120572,120573,120574,120575,120576,120577,120578,120579,120580,120581,120582,120583,120584,120585,120586,120587,120588,120589,120590,120591,120592,120593,120594,120595,120596,120598,120599,120600,120601,120602,120603,120604,120605,120606,120607,120608,120609,120610,120611,120612,120613,120614,120615,120616,120617,120618,120619,120620,120621,120622,120623,120624,120625,120626,120627,120628,120630,120631,120632,120633,120634,120635,120636,120637,120638,120639,120640,120641,120642,120643,120644,120645,120646,120647,120648,120649,120650,120651,120652,120653,120654,120656,120657,120658,120659,120660,120661,120662,120663,120664,120665,120666,120667,120668,120669,120670,120671,120672,120673,120674,120675,120676,120677,120678,120679,120680,120681,120682,120683,120684,120685,120686,120688,120689,120690,120691,120692,120693,120694,120695,120696,120697,120698,120699,120700,120701,120702,120703,120704,120705,120706,120707,120708,120709,120710,120711,120712,120714,120715,120716,120717,120718,120719,120720,120721,120722,120723,120724,120725,120726,120727,120728,120729,120730,120731,120732,120733,120734,120735,120736,120737,120738,120739,120740,120741,120742,120743,120744,120746,120747,120748,120749,120750,120751,120752,120753,120754,120755,120756,120757,120758,120759,120760,120761,120762,120763,120764,120765,120766,120767,120768,120769,120770,120772,120773,120774,120775,120776,120777,120778,120779,131072,173782,173824,177972,177984,178205,194560,194561,194562,194563,194564,194565,194566,194567,194568,194569,194570,194571,194572,194573,194574,194575,194576,194577,194578,194579,194580,194581,194582,194583,194584,194585,194586,194587,194588,194589,194590,194591,194592,194593,194594,194595,194596,194597,194598,194599,194600,194601,194602,194603,194604,194605,194606,194607,194608,194609,194610,194611,194612,194613,194614,194615,194616,194617,194618,194619,194620,194621,194622,194623,194624,194625,194626,194627,194628,194629,194630,194631,194632,194633,194634,194635,194636,194637,194638,194639,194640,194641,194642,194643,194644,194645,194646,194647,194648,194649,194650,194651,194652,194653,194654,194655,194656,194657,194658,194659,194660,194661,194662,194663,194664,194665,194666,194667,194668,194669,194670,194671,194672,194673,194674,194675,194676,194677,194678,194679,194680,194681,194682,194683,194684,194685,194686,194687,194688,194689,194690,194691,194692,194693,194694,194695,194696,194697,194698,194699,194700,194701,194702,194703,194704,194705,194706,194707,194708,194709,194710,194711,194712,194713,194714,194715,194716,194717,194718,194719,194720,194721,194722,194723,194724,194725,194726,194727,194728,194729,194730,194731,194732,194733,194734,194735,194736,194737,194738,194739,194740,194741,194742,194743,194744,194745,194746,194747,194748,194749,194750,194751,194752,194753,194754,194755,194756,194757,194758,194759,194760,194761,194762,194763,194764,194765,194766,194767,194768,194769,194770,194771,194772,194773,194774,194775,194776,194777,194778,194779,194780,194781,194782,194783,194784,194785,194786,194787,194788,194789,194790,194791,194792,194793,194794,194795,194796,194797,194798,194799,194800,194801,194802,194803,194804,194805,194806,194807,194808,194809,194810,194811,194812,194813,194814,194815,194816,194817,194818,194819,194820,194821,194822,194823,194824,194825,194826,194827,194828,194829,194830,194831,194832,194833,194834,194835,194836,194837,194838,194839,194840,194841,194842,194843,194844,194845,194846,194847,194848,194849,194850,194851,194852,194853,194854,194855,194856,194857,194858,194859,194860,194861,194862,194863,194864,194865,194866,194867,194868,194869,194870,194871,194872,194873,194874,194875,194876,194877,194878,194879,194880,194881,194882,194883,194884,194885,194886,194887,194888,194889,194890,194891,194892,194893,194894,194895,194896,194897,194898,194899,194900,194901,194902,194903,194904,194905,194906,194907,194908,194909,194910,194911,194912,194913,194914,194915,194916,194917,194918,194919,194920,194921,194922,194923,194924,194925,194926,194927,194928,194929,194930,194931,194932,194933,194934,194935,194936,194937,194938,194939,194940,194941,194942,194943,194944,194945,194946,194947,194948,194949,194950,194951,194952,194953,194954,194955,194956,194957,194958,194959,194960,194961,194962,194963,194964,194965,194966,194967,194968,194969,194970,194971,194972,194973,194974,194975,194976,194977,194978,194979,194980,194981,194982,194983,194984,194985,194986,194987,194988,194989,194990,194991,194992,194993,194994,194995,194996,194997,194998,194999,195e3,195001,195002,195003,195004,195005,195006,195007,195008,195009,195010,195011,195012,195013,195014,195015,195016,195017,195018,195019,195020,195021,195022,195023,195024,195025,195026,195027,195028,195029,195030,195031,195032,195033,195034,195035,195036,195037,195038,195039,195040,195041,195042,195043,195044,195045,195046,195047,195048,195049,195050,195051,195052,195053,195054,195055,195056,195057,195058,195059,195060,195061,195062,195063,195064,195065,195066,195067,195068,195069,195070,195071,195072,195073,195074,195075,195076,195077,195078,195079,195080,195081,195082,195083,195084,195085,195086,195087,195088,195089,195090,195091,195092,195093,195094,195095,195096,195097,195098,195099,195100,195101]
},{}],3:[function(t,e,n){n.N=[48,49,50,51,52,53,54,55,56,57,178,179,185,188,189,190,1632,1633,1634,1635,1636,1637,1638,1639,1640,1641,1776,1777,1778,1779,1780,1781,1782,1783,1784,1785,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,2406,2407,2408,2409,2410,2411,2412,2413,2414,2415,2534,2535,2536,2537,2538,2539,2540,2541,2542,2543,2548,2549,2550,2551,2552,2553,2662,2663,2664,2665,2666,2667,2668,2669,2670,2671,2790,2791,2792,2793,2794,2795,2796,2797,2798,2799,2918,2919,2920,2921,2922,2923,2924,2925,2926,2927,2930,2931,2932,2933,2934,2935,3046,3047,3048,3049,3050,3051,3052,3053,3054,3055,3056,3057,3058,3174,3175,3176,3177,3178,3179,3180,3181,3182,3183,3192,3193,3194,3195,3196,3197,3198,3302,3303,3304,3305,3306,3307,3308,3309,3310,3311,3430,3431,3432,3433,3434,3435,3436,3437,3438,3439,3440,3441,3442,3443,3444,3445,3664,3665,3666,3667,3668,3669,3670,3671,3672,3673,3792,3793,3794,3795,3796,3797,3798,3799,3800,3801,3872,3873,3874,3875,3876,3877,3878,3879,3880,3881,3882,3883,3884,3885,3886,3887,3888,3889,3890,3891,4160,4161,4162,4163,4164,4165,4166,4167,4168,4169,4240,4241,4242,4243,4244,4245,4246,4247,4248,4249,4969,4970,4971,4972,4973,4974,4975,4976,4977,4978,4979,4980,4981,4982,4983,4984,4985,4986,4987,4988,5870,5871,5872,6112,6113,6114,6115,6116,6117,6118,6119,6120,6121,6128,6129,6130,6131,6132,6133,6134,6135,6136,6137,6160,6161,6162,6163,6164,6165,6166,6167,6168,6169,6470,6471,6472,6473,6474,6475,6476,6477,6478,6479,6608,6609,6610,6611,6612,6613,6614,6615,6616,6617,6618,6784,6785,6786,6787,6788,6789,6790,6791,6792,6793,6800,6801,6802,6803,6804,6805,6806,6807,6808,6809,6992,6993,6994,6995,6996,6997,6998,6999,7e3,7001,7088,7089,7090,7091,7092,7093,7094,7095,7096,7097,7232,7233,7234,7235,7236,7237,7238,7239,7240,7241,7248,7249,7250,7251,7252,7253,7254,7255,7256,7257,8304,8308,8309,8310,8311,8312,8313,8320,8321,8322,8323,8324,8325,8326,8327,8328,8329,8528,8529,8530,8531,8532,8533,8534,8535,8536,8537,8538,8539,8540,8541,8542,8543,8544,8545,8546,8547,8548,8549,8550,8551,8552,8553,8554,8555,8556,8557,8558,8559,8560,8561,8562,8563,8564,8565,8566,8567,8568,8569,8570,8571,8572,8573,8574,8575,8576,8577,8578,8581,8582,8583,8584,8585,9312,9313,9314,9315,9316,9317,9318,9319,9320,9321,9322,9323,9324,9325,9326,9327,9328,9329,9330,9331,9332,9333,9334,9335,9336,9337,9338,9339,9340,9341,9342,9343,9344,9345,9346,9347,9348,9349,9350,9351,9352,9353,9354,9355,9356,9357,9358,9359,9360,9361,9362,9363,9364,9365,9366,9367,9368,9369,9370,9371,9450,9451,9452,9453,9454,9455,9456,9457,9458,9459,9460,9461,9462,9463,9464,9465,9466,9467,9468,9469,9470,9471,10102,10103,10104,10105,10106,10107,10108,10109,10110,10111,10112,10113,10114,10115,10116,10117,10118,10119,10120,10121,10122,10123,10124,10125,10126,10127,10128,10129,10130,10131,11517,12295,12321,12322,12323,12324,12325,12326,12327,12328,12329,12344,12345,12346,12690,12691,12692,12693,12832,12833,12834,12835,12836,12837,12838,12839,12840,12841,12881,12882,12883,12884,12885,12886,12887,12888,12889,12890,12891,12892,12893,12894,12895,12928,12929,12930,12931,12932,12933,12934,12935,12936,12937,12977,12978,12979,12980,12981,12982,12983,12984,12985,12986,12987,12988,12989,12990,12991,42528,42529,42530,42531,42532,42533,42534,42535,42536,42537,42726,42727,42728,42729,42730,42731,42732,42733,42734,42735,43056,43057,43058,43059,43060,43061,43216,43217,43218,43219,43220,43221,43222,43223,43224,43225,43264,43265,43266,43267,43268,43269,43270,43271,43272,43273,43472,43473,43474,43475,43476,43477,43478,43479,43480,43481,43600,43601,43602,43603,43604,43605,43606,43607,43608,43609,44016,44017,44018,44019,44020,44021,44022,44023,44024,44025,65296,65297,65298,65299,65300,65301,65302,65303,65304,65305,65799,65800,65801,65802,65803,65804,65805,65806,65807,65808,65809,65810,65811,65812,65813,65814,65815,65816,65817,65818,65819,65820,65821,65822,65823,65824,65825,65826,65827,65828,65829,65830,65831,65832,65833,65834,65835,65836,65837,65838,65839,65840,65841,65842,65843,65856,65857,65858,65859,65860,65861,65862,65863,65864,65865,65866,65867,65868,65869,65870,65871,65872,65873,65874,65875,65876,65877,65878,65879,65880,65881,65882,65883,65884,65885,65886,65887,65888,65889,65890,65891,65892,65893,65894,65895,65896,65897,65898,65899,65900,65901,65902,65903,65904,65905,65906,65907,65908,65909,65910,65911,65912,65930,66336,66337,66338,66339,66369,66378,66513,66514,66515,66516,66517,66720,66721,66722,66723,66724,66725,66726,66727,66728,66729,67672,67673,67674,67675,67676,67677,67678,67679,67862,67863,67864,67865,67866,67867,68160,68161,68162,68163,68164,68165,68166,68167,68221,68222,68440,68441,68442,68443,68444,68445,68446,68447,68472,68473,68474,68475,68476,68477,68478,68479,69216,69217,69218,69219,69220,69221,69222,69223,69224,69225,69226,69227,69228,69229,69230,69231,69232,69233,69234,69235,69236,69237,69238,69239,69240,69241,69242,69243,69244,69245,69246,69714,69715,69716,69717,69718,69719,69720,69721,69722,69723,69724,69725,69726,69727,69728,69729,69730,69731,69732,69733,69734,69735,69736,69737,69738,69739,69740,69741,69742,69743,74752,74753,74754,74755,74756,74757,74758,74759,74760,74761,74762,74763,74764,74765,74766,74767,74768,74769,74770,74771,74772,74773,74774,74775,74776,74777,74778,74779,74780,74781,74782,74783,74784,74785,74786,74787,74788,74789,74790,74791,74792,74793,74794,74795,74796,74797,74798,74799,74800,74801,74802,74803,74804,74805,74806,74807,74808,74809,74810,74811,74812,74813,74814,74815,74816,74817,74818,74819,74820,74821,74822,74823,74824,74825,74826,74827,74828,74829,74830,74831,74832,74833,74834,74835,74836,74837,74838,74839,74840,74841,74842,74843,74844,74845,74846,74847,74848,74849,74850,119648,119649,119650,119651,119652,119653,119654,119655,119656,119657,119658,119659,119660,119661,119662,119663,119664,119665,120782,120783,120784,120785,120786,120787,120788,120789,120790,120791,120792,120793,120794,120795,120796,120797,120798,120799,120800,120801,120802,120803,120804,120805,120806,120807,120808,120809,120810,120811,120812,120813,120814,120815,120816,120817,120818,120819,120820,120821,120822,120823,120824,120825,120826,120827,120828,120829,120830,120831,127232,127233,127234,127235,127236,127237,127238,127239,127240,127241,127242]},{}],4:[function(t,e,n){n.Z=[32,160,5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288]},{}],1:[function(t,e){!function(){var n=t("./L").L,i=t("./N").N,r=t("./Z").Z,o=t("unorm"),s=function(t){return~n.indexOf(t)?"L":~i.indexOf(t)?"N":~r.indexOf(t)?"Z":void 0};e.exports=function(t,e){t=t||"",e=e||{};for(var n=e.allowedChars||"-_~",i="boolean"==typeof e.lower?e.lower:!0,r="boolean"==typeof e.spaces?e.spaces:!1,a=[],l=o.nfkc(t),u=0;u<l.length;u++){var c=l[u],h=c.charCodeAt(0);if(h>=19968&&40959>=h)a.push(c);else if(-1==n.indexOf(c)){var p=s(h);p&&~"LN".indexOf(p)&&a.push(c),p&&~"Z".indexOf(p)&&a.push(" ")}else a.push(c)}var f=a.join("").replace(/^\s+|\s+$/g,"").replace(/\s+/g," ");return r||(f=f.replace(/[\s\-]+/g,"-")),i&&(f=f.toLowerCase()),f}}()},{"./L":2,"./N":3,"./Z":4,unorm:5}],5:[function(require,module,exports){!function(){/*
 * UnicodeNormalizer 1.0.0
 * Copyright (c) 2008 Matsuza
 * Dual licensed under the MIT (MIT-LICENSE.txt) and GPL (GPL-LICENSE.txt) licenses.
 * $Date: 2008-06-05 16:44:17 +0200 (Thu, 05 Jun 2008) $
 * $Rev: 13309 $
 */
(function(){var DEFAULT_FEATURE=[null,0,{}],CACHE_THRESHOLD=10,SBase=44032,LBase=4352,VBase=4449,TBase=4519,LCount=19,VCount=21,TCount=28,NCount=VCount*TCount,SCount=LCount*NCount,UChar=function(t,e){this.codepoint=t,this.feature=e};UChar.fromCharCode=function(cp,needFeature){function fromCache(t,e,n){if(!ctx.cache){ctx.cache={},ctx.counter=[];for(var i=0;255>=i;++i)ctx.counter[i]=0}var r=ctx.cache[e];return r||(r=t(e,n),r.feature&&++ctx.counter[255&e>>8]>CACHE_THRESHOLD&&(ctx.cache[e]=r)),r}function fromData(next,cp,needFeature){var hash=65280&cp,dunit=UChar.udata[hash];null==dunit?dunit=UChar.udata[hash]={}:"string"==typeof dunit&&(dunit=UChar.udata[hash]=eval("("+dunit+")"));var f=dunit[cp];return f?new UChar(cp,f):new UChar(cp,DEFAULT_FEATURE)}function fromCpOnly(t,e,n){return n?t(e,n):new UChar(e,null)}function fromRuleBasedJamo(t,e,n){if(LBase>e||e>=LBase+LCount&&SBase>e||e>SBase+SCount)return t(e,n);if(e>=LBase&&LBase+LCount>e){for(var i={},r=(e-LBase)*VCount,o=0;VCount>o;++o)i[VBase+o]=SBase+TCount*(o+r);return new UChar(e,[,,i])}var s=e-SBase,a=s%TCount,l=[];if(0!=a)l[0]=[SBase+s-a,TBase+a];else{l[0]=[LBase+Math.floor(s/NCount),VBase+Math.floor(s%NCount/TCount)],l[2]={};for(var o=1;TCount>o;++o)l[2][TBase+o]=e+o}return new UChar(e,l)}function fromCpFilter(t,e,n){return 60>e||e>13311&&42607>e?new UChar(e,DEFAULT_FEATURE):t(e,n)}var ctx=arguments.callee;if(!ctx.strategy){var strategies=[fromCpFilter,fromCache,fromCpOnly,fromRuleBasedJamo,fromData];for(UChar.fromCharCode.strategy=null;strategies.length>0;)ctx.strategy=function(t,e){return function(n,i){return e(t,n,i)}}(ctx.strategy,strategies.pop(),cp,needFeature)}return ctx.strategy(cp,needFeature)},UChar.isHighSurrogate=function(t){return t>=55296&&56319>=t},UChar.isLowSurrogate=function(t){return t>=56320&&57343>=t},UChar.prototype.prepFeature=function(){this.feature||(this.feature=UChar.fromCharCode(this.codepoint,!0).feature)},UChar.prototype.toString=function(){if(this.codepoint<65536)return String.fromCharCode(this.codepoint);var t=this.codepoint-65536;return String.fromCharCode(Math.floor(t/1024)+55296,t%1024+56320)},UChar.prototype.getDecomp=function(){return this.prepFeature(),this.feature[0]||null},UChar.prototype.isCompatibility=function(){return this.prepFeature(),!!this.feature[1]&&256&this.feature[1]},UChar.prototype.isExclude=function(){return this.prepFeature(),!!this.feature[1]&&512&this.feature[1]},UChar.prototype.getCanonicalClass=function(){return this.prepFeature(),this.feature[1]?255&this.feature[1]:0},UChar.prototype.getComposite=function(t){if(this.prepFeature(),!this.feature[2])return null;var e=this.feature[2][t.codepoint];return null!=e?UChar.fromCharCode(e):null};var UCharIterator=function(t){this.str=t,this.cursor=0};UCharIterator.prototype.next=function(){if(this.str&&this.cursor<this.str.length){var t,e=this.str.charCodeAt(this.cursor++);return UChar.isHighSurrogate(e)&&this.cursor<this.str.length&&UChar.isLowSurrogate(t=this.str.charCodeAt(this.cursor))&&(e=1024*(e-55296)+(t-56320)+65536,++this.cursor),UChar.fromCharCode(e)}return this.str=null,null};var RecursDecompIterator=function(t,e){this.it=t,this.canonical=e,this.resBuf=[]};RecursDecompIterator.prototype.next=function(){function t(e,n){var i=n.getDecomp();if(!i||e&&n.isCompatibility())return[n];for(var r=[],o=0;o<i.length;++o)for(var s=t(e,UChar.fromCharCode(i[o])),a=0;a<s.length;++a)r.push(s[a]);return r}if(0==this.resBuf.length){var e=this.it.next();if(!e)return null;this.resBuf=t(this.canonical,e)}return this.resBuf.shift()};var DecompIterator=function(t){this.it=t,this.resBuf=[]};DecompIterator.prototype.next=function(){var t;if(0==this.resBuf.length)do{var e=this.it.next();if(!e)break;t=e.getCanonicalClass();var n=this.resBuf.length;if(0!=t)for(;n>0;--n){var i=this.resBuf[n-1],r=i.getCanonicalClass();if(t>=r)break}this.resBuf.splice(n,0,e)}while(0!=t);return this.resBuf.shift()};var CompIterator=function(t){this.it=t,this.procBuf=[],this.resBuf=[],this.lastClass=null};CompIterator.prototype.next=function(){for(;0==this.resBuf.length;){var t=this.it.next();if(!t){this.resBuf=this.procBuf,this.procBuf=[];break}if(0==this.procBuf.length)this.lastClass=t.getCanonicalClass(),this.procBuf.push(t);else{var e=this.procBuf[0],n=e.getComposite(t),i=t.getCanonicalClass();n&&(this.lastClass<i||0==this.lastClass)?this.procBuf[0]=n:(0==i&&(this.resBuf=this.procBuf,this.procBuf=[]),this.lastClass=i,this.procBuf.push(t))}}return this.resBuf.shift()};var createIterator=function(t,e){switch(t){case"NFD":return new DecompIterator(new RecursDecompIterator(new UCharIterator(e),!0));case"NFKD":return new DecompIterator(new RecursDecompIterator(new UCharIterator(e),!1));case"NFC":return new CompIterator(new DecompIterator(new RecursDecompIterator(new UCharIterator(e),!0)));case"NFKC":return new CompIterator(new DecompIterator(new RecursDecompIterator(new UCharIterator(e),!1)))}throw t+" is invalid"},normalize=function(t,e){for(var n,i=createIterator(t,e),r="";n=i.next();)r+=n.toString();return r},nfd=function(t){return normalize("NFD",t)},nfkd=function(t){return normalize("NFKD",t)},nfc=function(t){return normalize("NFC",t)},nfkc=function(t){return normalize("NFKC",t)};this.UNorm=this.UNorm||{};var ns=this.UNorm;ns.UChar=UChar,ns.normalize=normalize,ns.createIterator=createIterator,ns.nfd=nfd,ns.nfkd=nfkd,ns.nfc=nfc,ns.nfkc=nfkc}).call(this);var UNorm=this.UNorm;/*
 * UnicodeNormalizer 1.0.0
 * Copyright (c) 2008 Matsuza
 * Dual licensed under the MIT (MIT-LICENSE.txt) and GPL (GPL-LICENSE.txt) licenses.
 * $Date: 2008-06-05 16:34:31 +0200 (Thu, 05 Jun 2008) $
 * $Rev: 13307 $
 */
if(!this.UNorm||!this.UNorm.UChar)throw"must include unorm.js prior to unormdata.js";UNorm.UChar.udata={0:"{60:[,,{824:8814}],61:[,,{824:8800}],62:[,,{824:8815}],65:[,,{768:192,769:193,770:194,771:195,772:256,774:258,775:550,776:196,777:7842,778:197,780:461,783:512,785:514,803:7840,805:7680,808:260}],66:[,,{775:7682,803:7684,817:7686}],67:[,,{769:262,770:264,775:266,780:268,807:199}],68:[,,{775:7690,780:270,803:7692,807:7696,813:7698,817:7694}],69:[,,{768:200,769:201,770:202,771:7868,772:274,774:276,775:278,776:203,777:7866,780:282,783:516,785:518,803:7864,807:552,808:280,813:7704,816:7706}],70:[,,{775:7710}],71:[,,{769:500,770:284,772:7712,774:286,775:288,780:486,807:290}],72:[,,{770:292,775:7714,776:7718,780:542,803:7716,807:7720,814:7722}],73:[,,{768:204,769:205,770:206,771:296,772:298,774:300,775:304,776:207,777:7880,780:463,783:520,785:522,803:7882,808:302,816:7724}],74:[,,{770:308}],75:[,,{769:7728,780:488,803:7730,807:310,817:7732}],76:[,,{769:313,780:317,803:7734,807:315,813:7740,817:7738}],77:[,,{769:7742,775:7744,803:7746}],78:[,,{768:504,769:323,771:209,775:7748,780:327,803:7750,807:325,813:7754,817:7752}],79:[,,{768:210,769:211,770:212,771:213,772:332,774:334,775:558,776:214,777:7886,779:336,780:465,783:524,785:526,795:416,803:7884,808:490}],80:[,,{769:7764,775:7766}],82:[,,{769:340,775:7768,780:344,783:528,785:530,803:7770,807:342,817:7774}],83:[,,{769:346,770:348,775:7776,780:352,803:7778,806:536,807:350}],84:[,,{775:7786,780:356,803:7788,806:538,807:354,813:7792,817:7790}],85:[,,{768:217,769:218,770:219,771:360,772:362,774:364,776:220,777:7910,778:366,779:368,780:467,783:532,785:534,795:431,803:7908,804:7794,808:370,813:7798,816:7796}],86:[,,{771:7804,803:7806}],87:[,,{768:7808,769:7810,770:372,775:7814,776:7812,803:7816}],88:[,,{775:7818,776:7820}],89:[,,{768:7922,769:221,770:374,771:7928,772:562,775:7822,776:376,777:7926,803:7924}],90:[,,{769:377,770:7824,775:379,780:381,803:7826,817:7828}],97:[,,{768:224,769:225,770:226,771:227,772:257,774:259,775:551,776:228,777:7843,778:229,780:462,783:513,785:515,803:7841,805:7681,808:261}],98:[,,{775:7683,803:7685,817:7687}],99:[,,{769:263,770:265,775:267,780:269,807:231}],100:[,,{775:7691,780:271,803:7693,807:7697,813:7699,817:7695}],101:[,,{768:232,769:233,770:234,771:7869,772:275,774:277,775:279,776:235,777:7867,780:283,783:517,785:519,803:7865,807:553,808:281,813:7705,816:7707}],102:[,,{775:7711}],103:[,,{769:501,770:285,772:7713,774:287,775:289,780:487,807:291}],104:[,,{770:293,775:7715,776:7719,780:543,803:7717,807:7721,814:7723,817:7830}],105:[,,{768:236,769:237,770:238,771:297,772:299,774:301,776:239,777:7881,780:464,783:521,785:523,803:7883,808:303,816:7725}],106:[,,{770:309,780:496}],107:[,,{769:7729,780:489,803:7731,807:311,817:7733}],108:[,,{769:314,780:318,803:7735,807:316,813:7741,817:7739}],109:[,,{769:7743,775:7745,803:7747}],110:[,,{768:505,769:324,771:241,775:7749,780:328,803:7751,807:326,813:7755,817:7753}],111:[,,{768:242,769:243,770:244,771:245,772:333,774:335,775:559,776:246,777:7887,779:337,780:466,783:525,785:527,795:417,803:7885,808:491}],112:[,,{769:7765,775:7767}],114:[,,{769:341,775:7769,780:345,783:529,785:531,803:7771,807:343,817:7775}],115:[,,{769:347,770:349,775:7777,780:353,803:7779,806:537,807:351}],116:[,,{775:7787,776:7831,780:357,803:7789,806:539,807:355,813:7793,817:7791}],117:[,,{768:249,769:250,770:251,771:361,772:363,774:365,776:252,777:7911,778:367,779:369,780:468,783:533,785:535,795:432,803:7909,804:7795,808:371,813:7799,816:7797}],118:[,,{771:7805,803:7807}],119:[,,{768:7809,769:7811,770:373,775:7815,776:7813,778:7832,803:7817}],120:[,,{775:7819,776:7821}],121:[,,{768:7923,769:253,770:375,771:7929,772:563,775:7823,776:255,777:7927,778:7833,803:7925}],122:[,,{769:378,770:7825,775:380,780:382,803:7827,817:7829}],160:[[32],256],168:[[32,776],256,{768:8173,769:901,834:8129}],170:[[97],256],175:[[32,772],256],178:[[50],256],179:[[51],256],180:[[32,769],256],181:[[956],256],184:[[32,807],256],185:[[49],256],186:[[111],256],188:[[49,8260,52],256],189:[[49,8260,50],256],190:[[51,8260,52],256],192:[[65,768]],193:[[65,769]],194:[[65,770],,{768:7846,769:7844,771:7850,777:7848}],195:[[65,771]],196:[[65,776],,{772:478}],197:[[65,778],,{769:506}],198:[,,{769:508,772:482}],199:[[67,807],,{769:7688}],200:[[69,768]],201:[[69,769]],202:[[69,770],,{768:7872,769:7870,771:7876,777:7874}],203:[[69,776]],204:[[73,768]],205:[[73,769]],206:[[73,770]],207:[[73,776],,{769:7726}],209:[[78,771]],210:[[79,768]],211:[[79,769]],212:[[79,770],,{768:7890,769:7888,771:7894,777:7892}],213:[[79,771],,{769:7756,772:556,776:7758}],214:[[79,776],,{772:554}],216:[,,{769:510}],217:[[85,768]],218:[[85,769]],219:[[85,770]],220:[[85,776],,{768:475,769:471,772:469,780:473}],221:[[89,769]],224:[[97,768]],225:[[97,769]],226:[[97,770],,{768:7847,769:7845,771:7851,777:7849}],227:[[97,771]],228:[[97,776],,{772:479}],229:[[97,778],,{769:507}],230:[,,{769:509,772:483}],231:[[99,807],,{769:7689}],232:[[101,768]],233:[[101,769]],234:[[101,770],,{768:7873,769:7871,771:7877,777:7875}],235:[[101,776]],236:[[105,768]],237:[[105,769]],238:[[105,770]],239:[[105,776],,{769:7727}],241:[[110,771]],242:[[111,768]],243:[[111,769]],244:[[111,770],,{768:7891,769:7889,771:7895,777:7893}],245:[[111,771],,{769:7757,772:557,776:7759}],246:[[111,776],,{772:555}],248:[,,{769:511}],249:[[117,768]],250:[[117,769]],251:[[117,770]],252:[[117,776],,{768:476,769:472,772:470,780:474}],253:[[121,769]],255:[[121,776]]}",256:"{256:[[65,772]],257:[[97,772]],258:[[65,774],,{768:7856,769:7854,771:7860,777:7858}],259:[[97,774],,{768:7857,769:7855,771:7861,777:7859}],260:[[65,808]],261:[[97,808]],262:[[67,769]],263:[[99,769]],264:[[67,770]],265:[[99,770]],266:[[67,775]],267:[[99,775]],268:[[67,780]],269:[[99,780]],270:[[68,780]],271:[[100,780]],274:[[69,772],,{768:7700,769:7702}],275:[[101,772],,{768:7701,769:7703}],276:[[69,774]],277:[[101,774]],278:[[69,775]],279:[[101,775]],280:[[69,808]],281:[[101,808]],282:[[69,780]],283:[[101,780]],284:[[71,770]],285:[[103,770]],286:[[71,774]],287:[[103,774]],288:[[71,775]],289:[[103,775]],290:[[71,807]],291:[[103,807]],292:[[72,770]],293:[[104,770]],296:[[73,771]],297:[[105,771]],298:[[73,772]],299:[[105,772]],300:[[73,774]],301:[[105,774]],302:[[73,808]],303:[[105,808]],304:[[73,775]],306:[[73,74],256],307:[[105,106],256],308:[[74,770]],309:[[106,770]],310:[[75,807]],311:[[107,807]],313:[[76,769]],314:[[108,769]],315:[[76,807]],316:[[108,807]],317:[[76,780]],318:[[108,780]],319:[[76,183],256],320:[[108,183],256],323:[[78,769]],324:[[110,769]],325:[[78,807]],326:[[110,807]],327:[[78,780]],328:[[110,780]],329:[[700,110],256],332:[[79,772],,{768:7760,769:7762}],333:[[111,772],,{768:7761,769:7763}],334:[[79,774]],335:[[111,774]],336:[[79,779]],337:[[111,779]],340:[[82,769]],341:[[114,769]],342:[[82,807]],343:[[114,807]],344:[[82,780]],345:[[114,780]],346:[[83,769],,{775:7780}],347:[[115,769],,{775:7781}],348:[[83,770]],349:[[115,770]],350:[[83,807]],351:[[115,807]],352:[[83,780],,{775:7782}],353:[[115,780],,{775:7783}],354:[[84,807]],355:[[116,807]],356:[[84,780]],357:[[116,780]],360:[[85,771],,{769:7800}],361:[[117,771],,{769:7801}],362:[[85,772],,{776:7802}],363:[[117,772],,{776:7803}],364:[[85,774]],365:[[117,774]],366:[[85,778]],367:[[117,778]],368:[[85,779]],369:[[117,779]],370:[[85,808]],371:[[117,808]],372:[[87,770]],373:[[119,770]],374:[[89,770]],375:[[121,770]],376:[[89,776]],377:[[90,769]],378:[[122,769]],379:[[90,775]],380:[[122,775]],381:[[90,780]],382:[[122,780]],383:[[115],256,{775:7835}],416:[[79,795],,{768:7900,769:7898,771:7904,777:7902,803:7906}],417:[[111,795],,{768:7901,769:7899,771:7905,777:7903,803:7907}],431:[[85,795],,{768:7914,769:7912,771:7918,777:7916,803:7920}],432:[[117,795],,{768:7915,769:7913,771:7919,777:7917,803:7921}],439:[,,{780:494}],452:[[68,381],256],453:[[68,382],256],454:[[100,382],256],455:[[76,74],256],456:[[76,106],256],457:[[108,106],256],458:[[78,74],256],459:[[78,106],256],460:[[110,106],256],461:[[65,780]],462:[[97,780]],463:[[73,780]],464:[[105,780]],465:[[79,780]],466:[[111,780]],467:[[85,780]],468:[[117,780]],469:[[220,772]],470:[[252,772]],471:[[220,769]],472:[[252,769]],473:[[220,780]],474:[[252,780]],475:[[220,768]],476:[[252,768]],478:[[196,772]],479:[[228,772]],480:[[550,772]],481:[[551,772]],482:[[198,772]],483:[[230,772]],486:[[71,780]],487:[[103,780]],488:[[75,780]],489:[[107,780]],490:[[79,808],,{772:492}],491:[[111,808],,{772:493}],492:[[490,772]],493:[[491,772]],494:[[439,780]],495:[[658,780]],496:[[106,780]],497:[[68,90],256],498:[[68,122],256],499:[[100,122],256],500:[[71,769]],501:[[103,769]],504:[[78,768]],505:[[110,768]],506:[[197,769]],507:[[229,769]],508:[[198,769]],509:[[230,769]],510:[[216,769]],511:[[248,769]],66045:[,220]}",512:"{512:[[65,783]],513:[[97,783]],514:[[65,785]],515:[[97,785]],516:[[69,783]],517:[[101,783]],518:[[69,785]],519:[[101,785]],520:[[73,783]],521:[[105,783]],522:[[73,785]],523:[[105,785]],524:[[79,783]],525:[[111,783]],526:[[79,785]],527:[[111,785]],528:[[82,783]],529:[[114,783]],530:[[82,785]],531:[[114,785]],532:[[85,783]],533:[[117,783]],534:[[85,785]],535:[[117,785]],536:[[83,806]],537:[[115,806]],538:[[84,806]],539:[[116,806]],542:[[72,780]],543:[[104,780]],550:[[65,775],,{772:480}],551:[[97,775],,{772:481}],552:[[69,807],,{774:7708}],553:[[101,807],,{774:7709}],554:[[214,772]],555:[[246,772]],556:[[213,772]],557:[[245,772]],558:[[79,775],,{772:560}],559:[[111,775],,{772:561}],560:[[558,772]],561:[[559,772]],562:[[89,772]],563:[[121,772]],658:[,,{780:495}],688:[[104],256],689:[[614],256],690:[[106],256],691:[[114],256],692:[[633],256],693:[[635],256],694:[[641],256],695:[[119],256],696:[[121],256],728:[[32,774],256],729:[[32,775],256],730:[[32,778],256],731:[[32,808],256],732:[[32,771],256],733:[[32,779],256],736:[[611],256],737:[[108],256],738:[[115],256],739:[[120],256],740:[[661],256]}",768:"{768:[,230],769:[,230],770:[,230],771:[,230],772:[,230],773:[,230],774:[,230],775:[,230],776:[,230,{769:836}],777:[,230],778:[,230],779:[,230],780:[,230],781:[,230],782:[,230],783:[,230],784:[,230],785:[,230],786:[,230],787:[,230],788:[,230],789:[,232],790:[,220],791:[,220],792:[,220],793:[,220],794:[,232],795:[,216],796:[,220],797:[,220],798:[,220],799:[,220],800:[,220],801:[,202],802:[,202],803:[,220],804:[,220],805:[,220],806:[,220],807:[,202],808:[,202],809:[,220],810:[,220],811:[,220],812:[,220],813:[,220],814:[,220],815:[,220],816:[,220],817:[,220],818:[,220],819:[,220],820:[,1],821:[,1],822:[,1],823:[,1],824:[,1],825:[,220],826:[,220],827:[,220],828:[,220],829:[,230],830:[,230],831:[,230],832:[[768],230],833:[[769],230],834:[,230],835:[[787],230],836:[[776,769],230],837:[,240],838:[,230],839:[,220],840:[,220],841:[,220],842:[,230],843:[,230],844:[,230],845:[,220],846:[,220],848:[,230],849:[,230],850:[,230],851:[,220],852:[,220],853:[,220],854:[,220],855:[,230],856:[,232],857:[,220],858:[,220],859:[,230],860:[,233],861:[,234],862:[,234],863:[,233],864:[,234],865:[,234],866:[,233],867:[,230],868:[,230],869:[,230],870:[,230],871:[,230],872:[,230],873:[,230],874:[,230],875:[,230],876:[,230],877:[,230],878:[,230],879:[,230],884:[[697]],890:[[32,837],256],894:[[59]],900:[[32,769],256],901:[[168,769]],902:[[913,769]],903:[[183]],904:[[917,769]],905:[[919,769]],906:[[921,769]],908:[[927,769]],910:[[933,769]],911:[[937,769]],912:[[970,769]],913:[,,{768:8122,769:902,772:8121,774:8120,787:7944,788:7945,837:8124}],917:[,,{768:8136,769:904,787:7960,788:7961}],919:[,,{768:8138,769:905,787:7976,788:7977,837:8140}],921:[,,{768:8154,769:906,772:8153,774:8152,776:938,787:7992,788:7993}],927:[,,{768:8184,769:908,787:8008,788:8009}],929:[,,{788:8172}],933:[,,{768:8170,769:910,772:8169,774:8168,776:939,788:8025}],937:[,,{768:8186,769:911,787:8040,788:8041,837:8188}],938:[[921,776]],939:[[933,776]],940:[[945,769],,{837:8116}],941:[[949,769]],942:[[951,769],,{837:8132}],943:[[953,769]],944:[[971,769]],945:[,,{768:8048,769:940,772:8113,774:8112,787:7936,788:7937,834:8118,837:8115}],949:[,,{768:8050,769:941,787:7952,788:7953}],951:[,,{768:8052,769:942,787:7968,788:7969,834:8134,837:8131}],953:[,,{768:8054,769:943,772:8145,774:8144,776:970,787:7984,788:7985,834:8150}],959:[,,{768:8056,769:972,787:8000,788:8001}],961:[,,{787:8164,788:8165}],965:[,,{768:8058,769:973,772:8161,774:8160,776:971,787:8016,788:8017,834:8166}],969:[,,{768:8060,769:974,787:8032,788:8033,834:8182,837:8179}],970:[[953,776],,{768:8146,769:912,834:8151}],971:[[965,776],,{768:8162,769:944,834:8167}],972:[[959,769]],973:[[965,769]],974:[[969,769],,{837:8180}],976:[[946],256],977:[[952],256],978:[[933],256,{769:979,776:980}],979:[[978,769]],980:[[978,776]],981:[[966],256],982:[[960],256],1008:[[954],256],1009:[[961],256],1010:[[962],256],1012:[[920],256],1013:[[949],256],1017:[[931],256]}",1024:"{1024:[[1045,768]],1025:[[1045,776]],1027:[[1043,769]],1030:[,,{776:1031}],1031:[[1030,776]],1036:[[1050,769]],1037:[[1048,768]],1038:[[1059,774]],1040:[,,{774:1232,776:1234}],1043:[,,{769:1027}],1045:[,,{768:1024,774:1238,776:1025}],1046:[,,{774:1217,776:1244}],1047:[,,{776:1246}],1048:[,,{768:1037,772:1250,774:1049,776:1252}],1049:[[1048,774]],1050:[,,{769:1036}],1054:[,,{776:1254}],1059:[,,{772:1262,774:1038,776:1264,779:1266}],1063:[,,{776:1268}],1067:[,,{776:1272}],1069:[,,{776:1260}],1072:[,,{774:1233,776:1235}],1075:[,,{769:1107}],1077:[,,{768:1104,774:1239,776:1105}],1078:[,,{774:1218,776:1245}],1079:[,,{776:1247}],1080:[,,{768:1117,772:1251,774:1081,776:1253}],1081:[[1080,774]],1082:[,,{769:1116}],1086:[,,{776:1255}],1091:[,,{772:1263,774:1118,776:1265,779:1267}],1095:[,,{776:1269}],1099:[,,{776:1273}],1101:[,,{776:1261}],1104:[[1077,768]],1105:[[1077,776]],1107:[[1075,769]],1110:[,,{776:1111}],1111:[[1110,776]],1116:[[1082,769]],1117:[[1080,768]],1118:[[1091,774]],1140:[,,{783:1142}],1141:[,,{783:1143}],1142:[[1140,783]],1143:[[1141,783]],1155:[,230],1156:[,230],1157:[,230],1158:[,230],1159:[,230],1217:[[1046,774]],1218:[[1078,774]],1232:[[1040,774]],1233:[[1072,774]],1234:[[1040,776]],1235:[[1072,776]],1238:[[1045,774]],1239:[[1077,774]],1240:[,,{776:1242}],1241:[,,{776:1243}],1242:[[1240,776]],1243:[[1241,776]],1244:[[1046,776]],1245:[[1078,776]],1246:[[1047,776]],1247:[[1079,776]],1250:[[1048,772]],1251:[[1080,772]],1252:[[1048,776]],1253:[[1080,776]],1254:[[1054,776]],1255:[[1086,776]],1256:[,,{776:1258}],1257:[,,{776:1259}],1258:[[1256,776]],1259:[[1257,776]],1260:[[1069,776]],1261:[[1101,776]],1262:[[1059,772]],1263:[[1091,772]],1264:[[1059,776]],1265:[[1091,776]],1266:[[1059,779]],1267:[[1091,779]],1268:[[1063,776]],1269:[[1095,776]],1272:[[1067,776]],1273:[[1099,776]]}",1280:"{1415:[[1381,1410],256],1425:[,220],1426:[,230],1427:[,230],1428:[,230],1429:[,230],1430:[,220],1431:[,230],1432:[,230],1433:[,230],1434:[,222],1435:[,220],1436:[,230],1437:[,230],1438:[,230],1439:[,230],1440:[,230],1441:[,230],1442:[,220],1443:[,220],1444:[,220],1445:[,220],1446:[,220],1447:[,220],1448:[,230],1449:[,230],1450:[,220],1451:[,230],1452:[,230],1453:[,222],1454:[,228],1455:[,230],1456:[,10],1457:[,11],1458:[,12],1459:[,13],1460:[,14],1461:[,15],1462:[,16],1463:[,17],1464:[,18],1465:[,19],1466:[,19],1467:[,20],1468:[,21],1469:[,22],1471:[,23],1473:[,24],1474:[,25],1476:[,230],1477:[,220],1479:[,18]}",1536:"{1552:[,230],1553:[,230],1554:[,230],1555:[,230],1556:[,230],1557:[,230],1558:[,230],1559:[,230],1560:[,30],1561:[,31],1562:[,32],1570:[[1575,1619]],1571:[[1575,1620]],1572:[[1608,1620]],1573:[[1575,1621]],1574:[[1610,1620]],1575:[,,{1619:1570,1620:1571,1621:1573}],1608:[,,{1620:1572}],1610:[,,{1620:1574}],1611:[,27],1612:[,28],1613:[,29],1614:[,30],1615:[,31],1616:[,32],1617:[,33],1618:[,34],1619:[,230],1620:[,230],1621:[,220],1622:[,220],1623:[,230],1624:[,230],1625:[,230],1626:[,230],1627:[,230],1628:[,220],1629:[,230],1630:[,230],1648:[,35],1653:[[1575,1652],256],1654:[[1608,1652],256],1655:[[1735,1652],256],1656:[[1610,1652],256],1728:[[1749,1620]],1729:[,,{1620:1730}],1730:[[1729,1620]],1746:[,,{1620:1747}],1747:[[1746,1620]],1749:[,,{1620:1728}],1750:[,230],1751:[,230],1752:[,230],1753:[,230],1754:[,230],1755:[,230],1756:[,230],1759:[,230],1760:[,230],1761:[,230],1762:[,230],1763:[,220],1764:[,230],1767:[,230],1768:[,230],1770:[,220],1771:[,230],1772:[,230],1773:[,220]}",1792:"{1809:[,36],1840:[,230],1841:[,220],1842:[,230],1843:[,230],1844:[,220],1845:[,230],1846:[,230],1847:[,220],1848:[,220],1849:[,220],1850:[,230],1851:[,220],1852:[,220],1853:[,230],1854:[,220],1855:[,230],1856:[,230],1857:[,230],1858:[,220],1859:[,230],1860:[,220],1861:[,230],1862:[,220],1863:[,230],1864:[,220],1865:[,230],1866:[,230],2027:[,230],2028:[,230],2029:[,230],2030:[,230],2031:[,230],2032:[,230],2033:[,230],2034:[,220],2035:[,230]}",2304:"{2344:[,,{2364:2345}],2345:[[2344,2364]],2352:[,,{2364:2353}],2353:[[2352,2364]],2355:[,,{2364:2356}],2356:[[2355,2364]],2364:[,7],2381:[,9],2385:[,230],2386:[,220],2387:[,230],2388:[,230],2392:[[2325,2364],512],2393:[[2326,2364],512],2394:[[2327,2364],512],2395:[[2332,2364],512],2396:[[2337,2364],512],2397:[[2338,2364],512],2398:[[2347,2364],512],2399:[[2351,2364],512],2492:[,7],2503:[,,{2494:2507,2519:2508}],2507:[[2503,2494]],2508:[[2503,2519]],2509:[,9],2524:[[2465,2492],512],2525:[[2466,2492],512],2527:[[2479,2492],512]}",2560:"{2611:[[2610,2620],512],2614:[[2616,2620],512],2620:[,7],2637:[,9],2649:[[2582,2620],512],2650:[[2583,2620],512],2651:[[2588,2620],512],2654:[[2603,2620],512],2748:[,7],2765:[,9],68109:[,220],68111:[,230],68152:[,230],68153:[,1],68154:[,220],68159:[,9]}",2816:"{2876:[,7],2887:[,,{2878:2891,2902:2888,2903:2892}],2888:[[2887,2902]],2891:[[2887,2878]],2892:[[2887,2903]],2893:[,9],2908:[[2849,2876],512],2909:[[2850,2876],512],2962:[,,{3031:2964}],2964:[[2962,3031]],3014:[,,{3006:3018,3031:3020}],3015:[,,{3006:3019}],3018:[[3014,3006]],3019:[[3015,3006]],3020:[[3014,3031]],3021:[,9]}",3072:"{3142:[,,{3158:3144}],3144:[[3142,3158]],3149:[,9],3157:[,84],3158:[,91],3260:[,7],3263:[,,{3285:3264}],3264:[[3263,3285]],3270:[,,{3266:3274,3285:3271,3286:3272}],3271:[[3270,3285]],3272:[[3270,3286]],3274:[[3270,3266],,{3285:3275}],3275:[[3274,3285]],3277:[,9]}",3328:"{3398:[,,{3390:3402,3415:3404}],3399:[,,{3390:3403}],3402:[[3398,3390]],3403:[[3399,3390]],3404:[[3398,3415]],3405:[,9],3530:[,9],3545:[,,{3530:3546,3535:3548,3551:3550}],3546:[[3545,3530]],3548:[[3545,3535],,{3530:3549}],3549:[[3548,3530]],3550:[[3545,3551]]}",3584:"{3635:[[3661,3634],256],3640:[,103],3641:[,103],3642:[,9],3656:[,107],3657:[,107],3658:[,107],3659:[,107],3763:[[3789,3762],256],3768:[,118],3769:[,118],3784:[,122],3785:[,122],3786:[,122],3787:[,122],3804:[[3755,3737],256],3805:[[3755,3745],256]}",3840:"{3852:[[3851],256],3864:[,220],3865:[,220],3893:[,220],3895:[,220],3897:[,216],3907:[[3906,4023],512],3917:[[3916,4023],512],3922:[[3921,4023],512],3927:[[3926,4023],512],3932:[[3931,4023],512],3945:[[3904,4021],512],3953:[,129],3954:[,130],3955:[[3953,3954],512],3956:[,132],3957:[[3953,3956],512],3958:[[4018,3968],512],3959:[[4018,3969],256],3960:[[4019,3968],512],3961:[[4019,3969],256],3962:[,130],3963:[,130],3964:[,130],3965:[,130],3968:[,130],3969:[[3953,3968],512],3970:[,230],3971:[,230],3972:[,9],3974:[,230],3975:[,230],3987:[[3986,4023],512],3997:[[3996,4023],512],4002:[[4001,4023],512],4007:[[4006,4023],512],4012:[[4011,4023],512],4025:[[3984,4021],512],4038:[,220]}",4096:"{4133:[,,{4142:4134}],4134:[[4133,4142]],4151:[,7],4153:[,9],4154:[,9],4237:[,220],4348:[[4316],256]}",4864:"{4959:[,230]}",5888:"{5908:[,9],5940:[,9],6098:[,9],6109:[,230]}",6144:"{6313:[,228]}",6400:"{6457:[,222],6458:[,230],6459:[,220]}",6656:"{6679:[,230],6680:[,220]}",6912:"{6917:[,,{6965:6918}],6918:[[6917,6965]],6919:[,,{6965:6920}],6920:[[6919,6965]],6921:[,,{6965:6922}],6922:[[6921,6965]],6923:[,,{6965:6924}],6924:[[6923,6965]],6925:[,,{6965:6926}],6926:[[6925,6965]],6929:[,,{6965:6930}],6930:[[6929,6965]],6964:[,7],6970:[,,{6965:6971}],6971:[[6970,6965]],6972:[,,{6965:6973}],6973:[[6972,6965]],6974:[,,{6965:6976}],6975:[,,{6965:6977}],6976:[[6974,6965]],6977:[[6975,6965]],6978:[,,{6965:6979}],6979:[[6978,6965]],6980:[,9],7019:[,230],7020:[,220],7021:[,230],7022:[,230],7023:[,230],7024:[,230],7025:[,230],7026:[,230],7027:[,230],7082:[,9]}",7168:"{7223:[,7]}",7424:"{7468:[[65],256],7469:[[198],256],7470:[[66],256],7472:[[68],256],7473:[[69],256],7474:[[398],256],7475:[[71],256],7476:[[72],256],7477:[[73],256],7478:[[74],256],7479:[[75],256],7480:[[76],256],7481:[[77],256],7482:[[78],256],7484:[[79],256],7485:[[546],256],7486:[[80],256],7487:[[82],256],7488:[[84],256],7489:[[85],256],7490:[[87],256],7491:[[97],256],7492:[[592],256],7493:[[593],256],7494:[[7426],256],7495:[[98],256],7496:[[100],256],7497:[[101],256],7498:[[601],256],7499:[[603],256],7500:[[604],256],7501:[[103],256],7503:[[107],256],7504:[[109],256],7505:[[331],256],7506:[[111],256],7507:[[596],256],7508:[[7446],256],7509:[[7447],256],7510:[[112],256],7511:[[116],256],7512:[[117],256],7513:[[7453],256],7514:[[623],256],7515:[[118],256],7516:[[7461],256],7517:[[946],256],7518:[[947],256],7519:[[948],256],7520:[[966],256],7521:[[967],256],7522:[[105],256],7523:[[114],256],7524:[[117],256],7525:[[118],256],7526:[[946],256],7527:[[947],256],7528:[[961],256],7529:[[966],256],7530:[[967],256],7544:[[1085],256],7579:[[594],256],7580:[[99],256],7581:[[597],256],7582:[[240],256],7583:[[604],256],7584:[[102],256],7585:[[607],256],7586:[[609],256],7587:[[613],256],7588:[[616],256],7589:[[617],256],7590:[[618],256],7591:[[7547],256],7592:[[669],256],7593:[[621],256],7594:[[7557],256],7595:[[671],256],7596:[[625],256],7597:[[624],256],7598:[[626],256],7599:[[627],256],7600:[[628],256],7601:[[629],256],7602:[[632],256],7603:[[642],256],7604:[[643],256],7605:[[427],256],7606:[[649],256],7607:[[650],256],7608:[[7452],256],7609:[[651],256],7610:[[652],256],7611:[[122],256],7612:[[656],256],7613:[[657],256],7614:[[658],256],7615:[[952],256],7616:[,230],7617:[,230],7618:[,220],7619:[,230],7620:[,230],7621:[,230],7622:[,230],7623:[,230],7624:[,230],7625:[,230],7626:[,220],7627:[,230],7628:[,230],7629:[,234],7630:[,214],7631:[,220],7632:[,202],7633:[,230],7634:[,230],7635:[,230],7636:[,230],7637:[,230],7638:[,230],7639:[,230],7640:[,230],7641:[,230],7642:[,230],7643:[,230],7644:[,230],7645:[,230],7646:[,230],7647:[,230],7648:[,230],7649:[,230],7650:[,230],7651:[,230],7652:[,230],7653:[,230],7654:[,230],7678:[,230],7679:[,220]}",7680:"{7680:[[65,805]],7681:[[97,805]],7682:[[66,775]],7683:[[98,775]],7684:[[66,803]],7685:[[98,803]],7686:[[66,817]],7687:[[98,817]],7688:[[199,769]],7689:[[231,769]],7690:[[68,775]],7691:[[100,775]],7692:[[68,803]],7693:[[100,803]],7694:[[68,817]],7695:[[100,817]],7696:[[68,807]],7697:[[100,807]],7698:[[68,813]],7699:[[100,813]],7700:[[274,768]],7701:[[275,768]],7702:[[274,769]],7703:[[275,769]],7704:[[69,813]],7705:[[101,813]],7706:[[69,816]],7707:[[101,816]],7708:[[552,774]],7709:[[553,774]],7710:[[70,775]],7711:[[102,775]],7712:[[71,772]],7713:[[103,772]],7714:[[72,775]],7715:[[104,775]],7716:[[72,803]],7717:[[104,803]],7718:[[72,776]],7719:[[104,776]],7720:[[72,807]],7721:[[104,807]],7722:[[72,814]],7723:[[104,814]],7724:[[73,816]],7725:[[105,816]],7726:[[207,769]],7727:[[239,769]],7728:[[75,769]],7729:[[107,769]],7730:[[75,803]],7731:[[107,803]],7732:[[75,817]],7733:[[107,817]],7734:[[76,803],,{772:7736}],7735:[[108,803],,{772:7737}],7736:[[7734,772]],7737:[[7735,772]],7738:[[76,817]],7739:[[108,817]],7740:[[76,813]],7741:[[108,813]],7742:[[77,769]],7743:[[109,769]],7744:[[77,775]],7745:[[109,775]],7746:[[77,803]],7747:[[109,803]],7748:[[78,775]],7749:[[110,775]],7750:[[78,803]],7751:[[110,803]],7752:[[78,817]],7753:[[110,817]],7754:[[78,813]],7755:[[110,813]],7756:[[213,769]],7757:[[245,769]],7758:[[213,776]],7759:[[245,776]],7760:[[332,768]],7761:[[333,768]],7762:[[332,769]],7763:[[333,769]],7764:[[80,769]],7765:[[112,769]],7766:[[80,775]],7767:[[112,775]],7768:[[82,775]],7769:[[114,775]],7770:[[82,803],,{772:7772}],7771:[[114,803],,{772:7773}],7772:[[7770,772]],7773:[[7771,772]],7774:[[82,817]],7775:[[114,817]],7776:[[83,775]],7777:[[115,775]],7778:[[83,803],,{775:7784}],7779:[[115,803],,{775:7785}],7780:[[346,775]],7781:[[347,775]],7782:[[352,775]],7783:[[353,775]],7784:[[7778,775]],7785:[[7779,775]],7786:[[84,775]],7787:[[116,775]],7788:[[84,803]],7789:[[116,803]],7790:[[84,817]],7791:[[116,817]],7792:[[84,813]],7793:[[116,813]],7794:[[85,804]],7795:[[117,804]],7796:[[85,816]],7797:[[117,816]],7798:[[85,813]],7799:[[117,813]],7800:[[360,769]],7801:[[361,769]],7802:[[362,776]],7803:[[363,776]],7804:[[86,771]],7805:[[118,771]],7806:[[86,803]],7807:[[118,803]],7808:[[87,768]],7809:[[119,768]],7810:[[87,769]],7811:[[119,769]],7812:[[87,776]],7813:[[119,776]],7814:[[87,775]],7815:[[119,775]],7816:[[87,803]],7817:[[119,803]],7818:[[88,775]],7819:[[120,775]],7820:[[88,776]],7821:[[120,776]],7822:[[89,775]],7823:[[121,775]],7824:[[90,770]],7825:[[122,770]],7826:[[90,803]],7827:[[122,803]],7828:[[90,817]],7829:[[122,817]],7830:[[104,817]],7831:[[116,776]],7832:[[119,778]],7833:[[121,778]],7834:[[97,702],256],7835:[[383,775]],7840:[[65,803],,{770:7852,774:7862}],7841:[[97,803],,{770:7853,774:7863}],7842:[[65,777]],7843:[[97,777]],7844:[[194,769]],7845:[[226,769]],7846:[[194,768]],7847:[[226,768]],7848:[[194,777]],7849:[[226,777]],7850:[[194,771]],7851:[[226,771]],7852:[[7840,770]],7853:[[7841,770]],7854:[[258,769]],7855:[[259,769]],7856:[[258,768]],7857:[[259,768]],7858:[[258,777]],7859:[[259,777]],7860:[[258,771]],7861:[[259,771]],7862:[[7840,774]],7863:[[7841,774]],7864:[[69,803],,{770:7878}],7865:[[101,803],,{770:7879}],7866:[[69,777]],7867:[[101,777]],7868:[[69,771]],7869:[[101,771]],7870:[[202,769]],7871:[[234,769]],7872:[[202,768]],7873:[[234,768]],7874:[[202,777]],7875:[[234,777]],7876:[[202,771]],7877:[[234,771]],7878:[[7864,770]],7879:[[7865,770]],7880:[[73,777]],7881:[[105,777]],7882:[[73,803]],7883:[[105,803]],7884:[[79,803],,{770:7896}],7885:[[111,803],,{770:7897}],7886:[[79,777]],7887:[[111,777]],7888:[[212,769]],7889:[[244,769]],7890:[[212,768]],7891:[[244,768]],7892:[[212,777]],7893:[[244,777]],7894:[[212,771]],7895:[[244,771]],7896:[[7884,770]],7897:[[7885,770]],7898:[[416,769]],7899:[[417,769]],7900:[[416,768]],7901:[[417,768]],7902:[[416,777]],7903:[[417,777]],7904:[[416,771]],7905:[[417,771]],7906:[[416,803]],7907:[[417,803]],7908:[[85,803]],7909:[[117,803]],7910:[[85,777]],7911:[[117,777]],7912:[[431,769]],7913:[[432,769]],7914:[[431,768]],7915:[[432,768]],7916:[[431,777]],7917:[[432,777]],7918:[[431,771]],7919:[[432,771]],7920:[[431,803]],7921:[[432,803]],7922:[[89,768]],7923:[[121,768]],7924:[[89,803]],7925:[[121,803]],7926:[[89,777]],7927:[[121,777]],7928:[[89,771]],7929:[[121,771]]}",7936:"{7936:[[945,787],,{768:7938,769:7940,834:7942,837:8064}],7937:[[945,788],,{768:7939,769:7941,834:7943,837:8065}],7938:[[7936,768],,{837:8066}],7939:[[7937,768],,{837:8067}],7940:[[7936,769],,{837:8068}],7941:[[7937,769],,{837:8069}],7942:[[7936,834],,{837:8070}],7943:[[7937,834],,{837:8071}],7944:[[913,787],,{768:7946,769:7948,834:7950,837:8072}],7945:[[913,788],,{768:7947,769:7949,834:7951,837:8073}],7946:[[7944,768],,{837:8074}],7947:[[7945,768],,{837:8075}],7948:[[7944,769],,{837:8076}],7949:[[7945,769],,{837:8077}],7950:[[7944,834],,{837:8078}],7951:[[7945,834],,{837:8079}],7952:[[949,787],,{768:7954,769:7956}],7953:[[949,788],,{768:7955,769:7957}],7954:[[7952,768]],7955:[[7953,768]],7956:[[7952,769]],7957:[[7953,769]],7960:[[917,787],,{768:7962,769:7964}],7961:[[917,788],,{768:7963,769:7965}],7962:[[7960,768]],7963:[[7961,768]],7964:[[7960,769]],7965:[[7961,769]],7968:[[951,787],,{768:7970,769:7972,834:7974,837:8080}],7969:[[951,788],,{768:7971,769:7973,834:7975,837:8081}],7970:[[7968,768],,{837:8082}],7971:[[7969,768],,{837:8083}],7972:[[7968,769],,{837:8084}],7973:[[7969,769],,{837:8085}],7974:[[7968,834],,{837:8086}],7975:[[7969,834],,{837:8087}],7976:[[919,787],,{768:7978,769:7980,834:7982,837:8088}],7977:[[919,788],,{768:7979,769:7981,834:7983,837:8089}],7978:[[7976,768],,{837:8090}],7979:[[7977,768],,{837:8091}],7980:[[7976,769],,{837:8092}],7981:[[7977,769],,{837:8093}],7982:[[7976,834],,{837:8094}],7983:[[7977,834],,{837:8095}],7984:[[953,787],,{768:7986,769:7988,834:7990}],7985:[[953,788],,{768:7987,769:7989,834:7991}],7986:[[7984,768]],7987:[[7985,768]],7988:[[7984,769]],7989:[[7985,769]],7990:[[7984,834]],7991:[[7985,834]],7992:[[921,787],,{768:7994,769:7996,834:7998}],7993:[[921,788],,{768:7995,769:7997,834:7999}],7994:[[7992,768]],7995:[[7993,768]],7996:[[7992,769]],7997:[[7993,769]],7998:[[7992,834]],7999:[[7993,834]],8000:[[959,787],,{768:8002,769:8004}],8001:[[959,788],,{768:8003,769:8005}],8002:[[8000,768]],8003:[[8001,768]],8004:[[8000,769]],8005:[[8001,769]],8008:[[927,787],,{768:8010,769:8012}],8009:[[927,788],,{768:8011,769:8013}],8010:[[8008,768]],8011:[[8009,768]],8012:[[8008,769]],8013:[[8009,769]],8016:[[965,787],,{768:8018,769:8020,834:8022}],8017:[[965,788],,{768:8019,769:8021,834:8023}],8018:[[8016,768]],8019:[[8017,768]],8020:[[8016,769]],8021:[[8017,769]],8022:[[8016,834]],8023:[[8017,834]],8025:[[933,788],,{768:8027,769:8029,834:8031}],8027:[[8025,768]],8029:[[8025,769]],8031:[[8025,834]],8032:[[969,787],,{768:8034,769:8036,834:8038,837:8096}],8033:[[969,788],,{768:8035,769:8037,834:8039,837:8097}],8034:[[8032,768],,{837:8098}],8035:[[8033,768],,{837:8099}],8036:[[8032,769],,{837:8100}],8037:[[8033,769],,{837:8101}],8038:[[8032,834],,{837:8102}],8039:[[8033,834],,{837:8103}],8040:[[937,787],,{768:8042,769:8044,834:8046,837:8104}],8041:[[937,788],,{768:8043,769:8045,834:8047,837:8105}],8042:[[8040,768],,{837:8106}],8043:[[8041,768],,{837:8107}],8044:[[8040,769],,{837:8108}],8045:[[8041,769],,{837:8109}],8046:[[8040,834],,{837:8110}],8047:[[8041,834],,{837:8111}],8048:[[945,768],,{837:8114}],8049:[[940]],8050:[[949,768]],8051:[[941]],8052:[[951,768],,{837:8130}],8053:[[942]],8054:[[953,768]],8055:[[943]],8056:[[959,768]],8057:[[972]],8058:[[965,768]],8059:[[973]],8060:[[969,768],,{837:8178}],8061:[[974]],8064:[[7936,837]],8065:[[7937,837]],8066:[[7938,837]],8067:[[7939,837]],8068:[[7940,837]],8069:[[7941,837]],8070:[[7942,837]],8071:[[7943,837]],8072:[[7944,837]],8073:[[7945,837]],8074:[[7946,837]],8075:[[7947,837]],8076:[[7948,837]],8077:[[7949,837]],8078:[[7950,837]],8079:[[7951,837]],8080:[[7968,837]],8081:[[7969,837]],8082:[[7970,837]],8083:[[7971,837]],8084:[[7972,837]],8085:[[7973,837]],8086:[[7974,837]],8087:[[7975,837]],8088:[[7976,837]],8089:[[7977,837]],8090:[[7978,837]],8091:[[7979,837]],8092:[[7980,837]],8093:[[7981,837]],8094:[[7982,837]],8095:[[7983,837]],8096:[[8032,837]],8097:[[8033,837]],8098:[[8034,837]],8099:[[8035,837]],8100:[[8036,837]],8101:[[8037,837]],8102:[[8038,837]],8103:[[8039,837]],8104:[[8040,837]],8105:[[8041,837]],8106:[[8042,837]],8107:[[8043,837]],8108:[[8044,837]],8109:[[8045,837]],8110:[[8046,837]],8111:[[8047,837]],8112:[[945,774]],8113:[[945,772]],8114:[[8048,837]],8115:[[945,837]],8116:[[940,837]],8118:[[945,834],,{837:8119}],8119:[[8118,837]],8120:[[913,774]],8121:[[913,772]],8122:[[913,768]],8123:[[902]],8124:[[913,837]],8125:[[32,787],256],8126:[[953]],8127:[[32,787],256,{768:8141,769:8142,834:8143}],8128:[[32,834],256],8129:[[168,834]],8130:[[8052,837]],8131:[[951,837]],8132:[[942,837]],8134:[[951,834],,{837:8135}],8135:[[8134,837]],8136:[[917,768]],8137:[[904]],8138:[[919,768]],8139:[[905]],8140:[[919,837]],8141:[[8127,768]],8142:[[8127,769]],8143:[[8127,834]],8144:[[953,774]],8145:[[953,772]],8146:[[970,768]],8147:[[912]],8150:[[953,834]],8151:[[970,834]],8152:[[921,774]],8153:[[921,772]],8154:[[921,768]],8155:[[906]],8157:[[8190,768]],8158:[[8190,769]],8159:[[8190,834]],8160:[[965,774]],8161:[[965,772]],8162:[[971,768]],8163:[[944]],8164:[[961,787]],8165:[[961,788]],8166:[[965,834]],8167:[[971,834]],8168:[[933,774]],8169:[[933,772]],8170:[[933,768]],8171:[[910]],8172:[[929,788]],8173:[[168,768]],8174:[[901]],8175:[[96]],8178:[[8060,837]],8179:[[969,837]],8180:[[974,837]],8182:[[969,834],,{837:8183}],8183:[[8182,837]],8184:[[927,768]],8185:[[908]],8186:[[937,768]],8187:[[911]],8188:[[937,837]],8189:[[180]],8190:[[32,788],256,{768:8157,769:8158,834:8159}]}",8192:"{8192:[[8194]],8193:[[8195]],8194:[[32],256],8195:[[32],256],8196:[[32],256],8197:[[32],256],8198:[[32],256],8199:[[32],256],8200:[[32],256],8201:[[32],256],8202:[[32],256],8209:[[8208],256],8215:[[32,819],256],8228:[[46],256],8229:[[46,46],256],8230:[[46,46,46],256],8239:[[32],256],8243:[[8242,8242],256],8244:[[8242,8242,8242],256],8246:[[8245,8245],256],8247:[[8245,8245,8245],256],8252:[[33,33],256],8254:[[32,773],256],8263:[[63,63],256],8264:[[63,33],256],8265:[[33,63],256],8279:[[8242,8242,8242,8242],256],8287:[[32],256],8304:[[48],256],8305:[[105],256],8308:[[52],256],8309:[[53],256],8310:[[54],256],8311:[[55],256],8312:[[56],256],8313:[[57],256],8314:[[43],256],8315:[[8722],256],8316:[[61],256],8317:[[40],256],8318:[[41],256],8319:[[110],256],8320:[[48],256],8321:[[49],256],8322:[[50],256],8323:[[51],256],8324:[[52],256],8325:[[53],256],8326:[[54],256],8327:[[55],256],8328:[[56],256],8329:[[57],256],8330:[[43],256],8331:[[8722],256],8332:[[61],256],8333:[[40],256],8334:[[41],256],8336:[[97],256],8337:[[101],256],8338:[[111],256],8339:[[120],256],8340:[[601],256],8360:[[82,115],256],8400:[,230],8401:[,230],8402:[,1],8403:[,1],8404:[,230],8405:[,230],8406:[,230],8407:[,230],8408:[,1],8409:[,1],8410:[,1],8411:[,230],8412:[,230],8417:[,230],8421:[,1],8422:[,1],8423:[,230],8424:[,220],8425:[,230],8426:[,1],8427:[,1],8428:[,220],8429:[,220],8430:[,220],8431:[,220],8432:[,230]}",8448:"{8448:[[97,47,99],256],8449:[[97,47,115],256],8450:[[67],256],8451:[[176,67],256],8453:[[99,47,111],256],8454:[[99,47,117],256],8455:[[400],256],8457:[[176,70],256],8458:[[103],256],8459:[[72],256],8460:[[72],256],8461:[[72],256],8462:[[104],256],8463:[[295],256],8464:[[73],256],8465:[[73],256],8466:[[76],256],8467:[[108],256],8469:[[78],256],8470:[[78,111],256],8473:[[80],256],8474:[[81],256],8475:[[82],256],8476:[[82],256],8477:[[82],256],8480:[[83,77],256],8481:[[84,69,76],256],8482:[[84,77],256],8484:[[90],256],8486:[[937]],8488:[[90],256],8490:[[75]],8491:[[197]],8492:[[66],256],8493:[[67],256],8495:[[101],256],8496:[[69],256],8497:[[70],256],8499:[[77],256],8500:[[111],256],8501:[[1488],256],8502:[[1489],256],8503:[[1490],256],8504:[[1491],256],8505:[[105],256],8507:[[70,65,88],256],8508:[[960],256],8509:[[947],256],8510:[[915],256],8511:[[928],256],8512:[[8721],256],8517:[[68],256],8518:[[100],256],8519:[[101],256],8520:[[105],256],8521:[[106],256],8531:[[49,8260,51],256],8532:[[50,8260,51],256],8533:[[49,8260,53],256],8534:[[50,8260,53],256],8535:[[51,8260,53],256],8536:[[52,8260,53],256],8537:[[49,8260,54],256],8538:[[53,8260,54],256],8539:[[49,8260,56],256],8540:[[51,8260,56],256],8541:[[53,8260,56],256],8542:[[55,8260,56],256],8543:[[49,8260],256],8544:[[73],256],8545:[[73,73],256],8546:[[73,73,73],256],8547:[[73,86],256],8548:[[86],256],8549:[[86,73],256],8550:[[86,73,73],256],8551:[[86,73,73,73],256],8552:[[73,88],256],8553:[[88],256],8554:[[88,73],256],8555:[[88,73,73],256],8556:[[76],256],8557:[[67],256],8558:[[68],256],8559:[[77],256],8560:[[105],256],8561:[[105,105],256],8562:[[105,105,105],256],8563:[[105,118],256],8564:[[118],256],8565:[[118,105],256],8566:[[118,105,105],256],8567:[[118,105,105,105],256],8568:[[105,120],256],8569:[[120],256],8570:[[120,105],256],8571:[[120,105,105],256],8572:[[108],256],8573:[[99],256],8574:[[100],256],8575:[[109],256],8592:[,,{824:8602}],8594:[,,{824:8603}],8596:[,,{824:8622}],8602:[[8592,824]],8603:[[8594,824]],8622:[[8596,824]],8653:[[8656,824]],8654:[[8660,824]],8655:[[8658,824]],8656:[,,{824:8653}],8658:[,,{824:8655}],8660:[,,{824:8654}]}",8704:"{8707:[,,{824:8708}],8708:[[8707,824]],8712:[,,{824:8713}],8713:[[8712,824]],8715:[,,{824:8716}],8716:[[8715,824]],8739:[,,{824:8740}],8740:[[8739,824]],8741:[,,{824:8742}],8742:[[8741,824]],8748:[[8747,8747],256],8749:[[8747,8747,8747],256],8751:[[8750,8750],256],8752:[[8750,8750,8750],256],8764:[,,{824:8769}],8769:[[8764,824]],8771:[,,{824:8772}],8772:[[8771,824]],8773:[,,{824:8775}],8775:[[8773,824]],8776:[,,{824:8777}],8777:[[8776,824]],8781:[,,{824:8813}],8800:[[61,824]],8801:[,,{824:8802}],8802:[[8801,824]],8804:[,,{824:8816}],8805:[,,{824:8817}],8813:[[8781,824]],8814:[[60,824]],8815:[[62,824]],8816:[[8804,824]],8817:[[8805,824]],8818:[,,{824:8820}],8819:[,,{824:8821}],8820:[[8818,824]],8821:[[8819,824]],8822:[,,{824:8824}],8823:[,,{824:8825}],8824:[[8822,824]],8825:[[8823,824]],8826:[,,{824:8832}],8827:[,,{824:8833}],8828:[,,{824:8928}],8829:[,,{824:8929}],8832:[[8826,824]],8833:[[8827,824]],8834:[,,{824:8836}],8835:[,,{824:8837}],8836:[[8834,824]],8837:[[8835,824]],8838:[,,{824:8840}],8839:[,,{824:8841}],8840:[[8838,824]],8841:[[8839,824]],8849:[,,{824:8930}],8850:[,,{824:8931}],8866:[,,{824:8876}],8872:[,,{824:8877}],8873:[,,{824:8878}],8875:[,,{824:8879}],8876:[[8866,824]],8877:[[8872,824]],8878:[[8873,824]],8879:[[8875,824]],8882:[,,{824:8938}],8883:[,,{824:8939}],8884:[,,{824:8940}],8885:[,,{824:8941}],8928:[[8828,824]],8929:[[8829,824]],8930:[[8849,824]],8931:[[8850,824]],8938:[[8882,824]],8939:[[8883,824]],8940:[[8884,824]],8941:[[8885,824]]}",8960:"{9001:[[12296]],9002:[[12297]]}",9216:"{9312:[[49],256],9313:[[50],256],9314:[[51],256],9315:[[52],256],9316:[[53],256],9317:[[54],256],9318:[[55],256],9319:[[56],256],9320:[[57],256],9321:[[49,48],256],9322:[[49,49],256],9323:[[49,50],256],9324:[[49,51],256],9325:[[49,52],256],9326:[[49,53],256],9327:[[49,54],256],9328:[[49,55],256],9329:[[49,56],256],9330:[[49,57],256],9331:[[50,48],256],9332:[[40,49,41],256],9333:[[40,50,41],256],9334:[[40,51,41],256],9335:[[40,52,41],256],9336:[[40,53,41],256],9337:[[40,54,41],256],9338:[[40,55,41],256],9339:[[40,56,41],256],9340:[[40,57,41],256],9341:[[40,49,48,41],256],9342:[[40,49,49,41],256],9343:[[40,49,50,41],256],9344:[[40,49,51,41],256],9345:[[40,49,52,41],256],9346:[[40,49,53,41],256],9347:[[40,49,54,41],256],9348:[[40,49,55,41],256],9349:[[40,49,56,41],256],9350:[[40,49,57,41],256],9351:[[40,50,48,41],256],9352:[[49,46],256],9353:[[50,46],256],9354:[[51,46],256],9355:[[52,46],256],9356:[[53,46],256],9357:[[54,46],256],9358:[[55,46],256],9359:[[56,46],256],9360:[[57,46],256],9361:[[49,48,46],256],9362:[[49,49,46],256],9363:[[49,50,46],256],9364:[[49,51,46],256],9365:[[49,52,46],256],9366:[[49,53,46],256],9367:[[49,54,46],256],9368:[[49,55,46],256],9369:[[49,56,46],256],9370:[[49,57,46],256],9371:[[50,48,46],256],9372:[[40,97,41],256],9373:[[40,98,41],256],9374:[[40,99,41],256],9375:[[40,100,41],256],9376:[[40,101,41],256],9377:[[40,102,41],256],9378:[[40,103,41],256],9379:[[40,104,41],256],9380:[[40,105,41],256],9381:[[40,106,41],256],9382:[[40,107,41],256],9383:[[40,108,41],256],9384:[[40,109,41],256],9385:[[40,110,41],256],9386:[[40,111,41],256],9387:[[40,112,41],256],9388:[[40,113,41],256],9389:[[40,114,41],256],9390:[[40,115,41],256],9391:[[40,116,41],256],9392:[[40,117,41],256],9393:[[40,118,41],256],9394:[[40,119,41],256],9395:[[40,120,41],256],9396:[[40,121,41],256],9397:[[40,122,41],256],9398:[[65],256],9399:[[66],256],9400:[[67],256],9401:[[68],256],9402:[[69],256],9403:[[70],256],9404:[[71],256],9405:[[72],256],9406:[[73],256],9407:[[74],256],9408:[[75],256],9409:[[76],256],9410:[[77],256],9411:[[78],256],9412:[[79],256],9413:[[80],256],9414:[[81],256],9415:[[82],256],9416:[[83],256],9417:[[84],256],9418:[[85],256],9419:[[86],256],9420:[[87],256],9421:[[88],256],9422:[[89],256],9423:[[90],256],9424:[[97],256],9425:[[98],256],9426:[[99],256],9427:[[100],256],9428:[[101],256],9429:[[102],256],9430:[[103],256],9431:[[104],256],9432:[[105],256],9433:[[106],256],9434:[[107],256],9435:[[108],256],9436:[[109],256],9437:[[110],256],9438:[[111],256],9439:[[112],256],9440:[[113],256],9441:[[114],256],9442:[[115],256],9443:[[116],256],9444:[[117],256],9445:[[118],256],9446:[[119],256],9447:[[120],256],9448:[[121],256],9449:[[122],256],9450:[[48],256]}",10752:"{10764:[[8747,8747,8747,8747],256],10868:[[58,58,61],256],10869:[[61,61],256],10870:[[61,61,61],256],10972:[[10973,824],512]}",11264:"{11388:[[106],256],11389:[[86],256]}",11520:"{11631:[[11617],256],11744:[,230],11745:[,230],11746:[,230],11747:[,230],11748:[,230],11749:[,230],11750:[,230],11751:[,230],11752:[,230],11753:[,230],11754:[,230],11755:[,230],11756:[,230],11757:[,230],11758:[,230],11759:[,230],11760:[,230],11761:[,230],11762:[,230],11763:[,230],11764:[,230],11765:[,230],11766:[,230],11767:[,230],11768:[,230],11769:[,230],11770:[,230],11771:[,230],11772:[,230],11773:[,230],11774:[,230],11775:[,230]}",11776:"{11935:[[27597],256],12019:[[40863],256]}",12032:"{12032:[[19968],256],12033:[[20008],256],12034:[[20022],256],12035:[[20031],256],12036:[[20057],256],12037:[[20101],256],12038:[[20108],256],12039:[[20128],256],12040:[[20154],256],12041:[[20799],256],12042:[[20837],256],12043:[[20843],256],12044:[[20866],256],12045:[[20886],256],12046:[[20907],256],12047:[[20960],256],12048:[[20981],256],12049:[[20992],256],12050:[[21147],256],12051:[[21241],256],12052:[[21269],256],12053:[[21274],256],12054:[[21304],256],12055:[[21313],256],12056:[[21340],256],12057:[[21353],256],12058:[[21378],256],12059:[[21430],256],12060:[[21448],256],12061:[[21475],256],12062:[[22231],256],12063:[[22303],256],12064:[[22763],256],12065:[[22786],256],12066:[[22794],256],12067:[[22805],256],12068:[[22823],256],12069:[[22899],256],12070:[[23376],256],12071:[[23424],256],12072:[[23544],256],12073:[[23567],256],12074:[[23586],256],12075:[[23608],256],12076:[[23662],256],12077:[[23665],256],12078:[[24027],256],12079:[[24037],256],12080:[[24049],256],12081:[[24062],256],12082:[[24178],256],12083:[[24186],256],12084:[[24191],256],12085:[[24308],256],12086:[[24318],256],12087:[[24331],256],12088:[[24339],256],12089:[[24400],256],12090:[[24417],256],12091:[[24435],256],12092:[[24515],256],12093:[[25096],256],12094:[[25142],256],12095:[[25163],256],12096:[[25903],256],12097:[[25908],256],12098:[[25991],256],12099:[[26007],256],12100:[[26020],256],12101:[[26041],256],12102:[[26080],256],12103:[[26085],256],12104:[[26352],256],12105:[[26376],256],12106:[[26408],256],12107:[[27424],256],12108:[[27490],256],12109:[[27513],256],12110:[[27571],256],12111:[[27595],256],12112:[[27604],256],12113:[[27611],256],12114:[[27663],256],12115:[[27668],256],12116:[[27700],256],12117:[[28779],256],12118:[[29226],256],12119:[[29238],256],12120:[[29243],256],12121:[[29247],256],12122:[[29255],256],12123:[[29273],256],12124:[[29275],256],12125:[[29356],256],12126:[[29572],256],12127:[[29577],256],12128:[[29916],256],12129:[[29926],256],12130:[[29976],256],12131:[[29983],256],12132:[[29992],256],12133:[[30000],256],12134:[[30091],256],12135:[[30098],256],12136:[[30326],256],12137:[[30333],256],12138:[[30382],256],12139:[[30399],256],12140:[[30446],256],12141:[[30683],256],12142:[[30690],256],12143:[[30707],256],12144:[[31034],256],12145:[[31160],256],12146:[[31166],256],12147:[[31348],256],12148:[[31435],256],12149:[[31481],256],12150:[[31859],256],12151:[[31992],256],12152:[[32566],256],12153:[[32593],256],12154:[[32650],256],12155:[[32701],256],12156:[[32769],256],12157:[[32780],256],12158:[[32786],256],12159:[[32819],256],12160:[[32895],256],12161:[[32905],256],12162:[[33251],256],12163:[[33258],256],12164:[[33267],256],12165:[[33276],256],12166:[[33292],256],12167:[[33307],256],12168:[[33311],256],12169:[[33390],256],12170:[[33394],256],12171:[[33400],256],12172:[[34381],256],12173:[[34411],256],12174:[[34880],256],12175:[[34892],256],12176:[[34915],256],12177:[[35198],256],12178:[[35211],256],12179:[[35282],256],12180:[[35328],256],12181:[[35895],256],12182:[[35910],256],12183:[[35925],256],12184:[[35960],256],12185:[[35997],256],12186:[[36196],256],12187:[[36208],256],12188:[[36275],256],12189:[[36523],256],12190:[[36554],256],12191:[[36763],256],12192:[[36784],256],12193:[[36789],256],12194:[[37009],256],12195:[[37193],256],12196:[[37318],256],12197:[[37324],256],12198:[[37329],256],12199:[[38263],256],12200:[[38272],256],12201:[[38428],256],12202:[[38582],256],12203:[[38585],256],12204:[[38632],256],12205:[[38737],256],12206:[[38750],256],12207:[[38754],256],12208:[[38761],256],12209:[[38859],256],12210:[[38893],256],12211:[[38899],256],12212:[[38913],256],12213:[[39080],256],12214:[[39131],256],12215:[[39135],256],12216:[[39318],256],12217:[[39321],256],12218:[[39340],256],12219:[[39592],256],12220:[[39640],256],12221:[[39647],256],12222:[[39717],256],12223:[[39727],256],12224:[[39730],256],12225:[[39740],256],12226:[[39770],256],12227:[[40165],256],12228:[[40565],256],12229:[[40575],256],12230:[[40613],256],12231:[[40635],256],12232:[[40643],256],12233:[[40653],256],12234:[[40657],256],12235:[[40697],256],12236:[[40701],256],12237:[[40718],256],12238:[[40723],256],12239:[[40736],256],12240:[[40763],256],12241:[[40778],256],12242:[[40786],256],12243:[[40845],256],12244:[[40860],256],12245:[[40864],256]}",12288:"{12288:[[32],256],12330:[,218],12331:[,228],12332:[,232],12333:[,222],12334:[,224],12335:[,224],12342:[[12306],256],12344:[[21313],256],12345:[[21316],256],12346:[[21317],256],12358:[,,{12441:12436}],12363:[,,{12441:12364}],12364:[[12363,12441]],12365:[,,{12441:12366}],12366:[[12365,12441]],12367:[,,{12441:12368}],12368:[[12367,12441]],12369:[,,{12441:12370}],12370:[[12369,12441]],12371:[,,{12441:12372}],12372:[[12371,12441]],12373:[,,{12441:12374}],12374:[[12373,12441]],12375:[,,{12441:12376}],12376:[[12375,12441]],12377:[,,{12441:12378}],12378:[[12377,12441]],12379:[,,{12441:12380}],12380:[[12379,12441]],12381:[,,{12441:12382}],12382:[[12381,12441]],12383:[,,{12441:12384}],12384:[[12383,12441]],12385:[,,{12441:12386}],12386:[[12385,12441]],12388:[,,{12441:12389}],12389:[[12388,12441]],12390:[,,{12441:12391}],12391:[[12390,12441]],12392:[,,{12441:12393}],12393:[[12392,12441]],12399:[,,{12441:12400,12442:12401}],12400:[[12399,12441]],12401:[[12399,12442]],12402:[,,{12441:12403,12442:12404}],12403:[[12402,12441]],12404:[[12402,12442]],12405:[,,{12441:12406,12442:12407}],12406:[[12405,12441]],12407:[[12405,12442]],12408:[,,{12441:12409,12442:12410}],12409:[[12408,12441]],12410:[[12408,12442]],12411:[,,{12441:12412,12442:12413}],12412:[[12411,12441]],12413:[[12411,12442]],12436:[[12358,12441]],12441:[,8],12442:[,8],12443:[[32,12441],256],12444:[[32,12442],256],12445:[,,{12441:12446}],12446:[[12445,12441]],12447:[[12424,12426],256],12454:[,,{12441:12532}],12459:[,,{12441:12460}],12460:[[12459,12441]],12461:[,,{12441:12462}],12462:[[12461,12441]],12463:[,,{12441:12464}],12464:[[12463,12441]],12465:[,,{12441:12466}],12466:[[12465,12441]],12467:[,,{12441:12468}],12468:[[12467,12441]],12469:[,,{12441:12470}],12470:[[12469,12441]],12471:[,,{12441:12472}],12472:[[12471,12441]],12473:[,,{12441:12474}],12474:[[12473,12441]],12475:[,,{12441:12476}],12476:[[12475,12441]],12477:[,,{12441:12478}],12478:[[12477,12441]],12479:[,,{12441:12480}],12480:[[12479,12441]],12481:[,,{12441:12482}],12482:[[12481,12441]],12484:[,,{12441:12485}],12485:[[12484,12441]],12486:[,,{12441:12487}],12487:[[12486,12441]],12488:[,,{12441:12489}],12489:[[12488,12441]],12495:[,,{12441:12496,12442:12497}],12496:[[12495,12441]],12497:[[12495,12442]],12498:[,,{12441:12499,12442:12500}],12499:[[12498,12441]],12500:[[12498,12442]],12501:[,,{12441:12502,12442:12503}],12502:[[12501,12441]],12503:[[12501,12442]],12504:[,,{12441:12505,12442:12506}],12505:[[12504,12441]],12506:[[12504,12442]],12507:[,,{12441:12508,12442:12509}],12508:[[12507,12441]],12509:[[12507,12442]],12527:[,,{12441:12535}],12528:[,,{12441:12536}],12529:[,,{12441:12537}],12530:[,,{12441:12538}],12532:[[12454,12441]],12535:[[12527,12441]],12536:[[12528,12441]],12537:[[12529,12441]],12538:[[12530,12441]],12541:[,,{12441:12542}],12542:[[12541,12441]],12543:[[12467,12488],256]}",12544:"{12593:[[4352],256],12594:[[4353],256],12595:[[4522],256],12596:[[4354],256],12597:[[4524],256],12598:[[4525],256],12599:[[4355],256],12600:[[4356],256],12601:[[4357],256],12602:[[4528],256],12603:[[4529],256],12604:[[4530],256],12605:[[4531],256],12606:[[4532],256],12607:[[4533],256],12608:[[4378],256],12609:[[4358],256],12610:[[4359],256],12611:[[4360],256],12612:[[4385],256],12613:[[4361],256],12614:[[4362],256],12615:[[4363],256],12616:[[4364],256],12617:[[4365],256],12618:[[4366],256],12619:[[4367],256],12620:[[4368],256],12621:[[4369],256],12622:[[4370],256],12623:[[4449],256],12624:[[4450],256],12625:[[4451],256],12626:[[4452],256],12627:[[4453],256],12628:[[4454],256],12629:[[4455],256],12630:[[4456],256],12631:[[4457],256],12632:[[4458],256],12633:[[4459],256],12634:[[4460],256],12635:[[4461],256],12636:[[4462],256],12637:[[4463],256],12638:[[4464],256],12639:[[4465],256],12640:[[4466],256],12641:[[4467],256],12642:[[4468],256],12643:[[4469],256],12644:[[4448],256],12645:[[4372],256],12646:[[4373],256],12647:[[4551],256],12648:[[4552],256],12649:[[4556],256],12650:[[4558],256],12651:[[4563],256],12652:[[4567],256],12653:[[4569],256],12654:[[4380],256],12655:[[4573],256],12656:[[4575],256],12657:[[4381],256],12658:[[4382],256],12659:[[4384],256],12660:[[4386],256],12661:[[4387],256],12662:[[4391],256],12663:[[4393],256],12664:[[4395],256],12665:[[4396],256],12666:[[4397],256],12667:[[4398],256],12668:[[4399],256],12669:[[4402],256],12670:[[4406],256],12671:[[4416],256],12672:[[4423],256],12673:[[4428],256],12674:[[4593],256],12675:[[4594],256],12676:[[4439],256],12677:[[4440],256],12678:[[4441],256],12679:[[4484],256],12680:[[4485],256],12681:[[4488],256],12682:[[4497],256],12683:[[4498],256],12684:[[4500],256],12685:[[4510],256],12686:[[4513],256],12690:[[19968],256],12691:[[20108],256],12692:[[19977],256],12693:[[22235],256],12694:[[19978],256],12695:[[20013],256],12696:[[19979],256],12697:[[30002],256],12698:[[20057],256],12699:[[19993],256],12700:[[19969],256],12701:[[22825],256],12702:[[22320],256],12703:[[20154],256]}",12800:"{12800:[[40,4352,41],256],12801:[[40,4354,41],256],12802:[[40,4355,41],256],12803:[[40,4357,41],256],12804:[[40,4358,41],256],12805:[[40,4359,41],256],12806:[[40,4361,41],256],12807:[[40,4363,41],256],12808:[[40,4364,41],256],12809:[[40,4366,41],256],12810:[[40,4367,41],256],12811:[[40,4368,41],256],12812:[[40,4369,41],256],12813:[[40,4370,41],256],12814:[[40,4352,4449,41],256],12815:[[40,4354,4449,41],256],12816:[[40,4355,4449,41],256],12817:[[40,4357,4449,41],256],12818:[[40,4358,4449,41],256],12819:[[40,4359,4449,41],256],12820:[[40,4361,4449,41],256],12821:[[40,4363,4449,41],256],12822:[[40,4364,4449,41],256],12823:[[40,4366,4449,41],256],12824:[[40,4367,4449,41],256],12825:[[40,4368,4449,41],256],12826:[[40,4369,4449,41],256],12827:[[40,4370,4449,41],256],12828:[[40,4364,4462,41],256],12829:[[40,4363,4457,4364,4453,4523,41],256],12830:[[40,4363,4457,4370,4462,41],256],12832:[[40,19968,41],256],12833:[[40,20108,41],256],12834:[[40,19977,41],256],12835:[[40,22235,41],256],12836:[[40,20116,41],256],12837:[[40,20845,41],256],12838:[[40,19971,41],256],12839:[[40,20843,41],256],12840:[[40,20061,41],256],12841:[[40,21313,41],256],12842:[[40,26376,41],256],12843:[[40,28779,41],256],12844:[[40,27700,41],256],12845:[[40,26408,41],256],12846:[[40,37329,41],256],12847:[[40,22303,41],256],12848:[[40,26085,41],256],12849:[[40,26666,41],256],12850:[[40,26377,41],256],12851:[[40,31038,41],256],12852:[[40,21517,41],256],12853:[[40,29305,41],256],12854:[[40,36001,41],256],12855:[[40,31069,41],256],12856:[[40,21172,41],256],12857:[[40,20195,41],256],12858:[[40,21628,41],256],12859:[[40,23398,41],256],12860:[[40,30435,41],256],12861:[[40,20225,41],256],12862:[[40,36039,41],256],12863:[[40,21332,41],256],12864:[[40,31085,41],256],12865:[[40,20241,41],256],12866:[[40,33258,41],256],12867:[[40,33267,41],256],12880:[[80,84,69],256],12881:[[50,49],256],12882:[[50,50],256],12883:[[50,51],256],12884:[[50,52],256],12885:[[50,53],256],12886:[[50,54],256],12887:[[50,55],256],12888:[[50,56],256],12889:[[50,57],256],12890:[[51,48],256],12891:[[51,49],256],12892:[[51,50],256],12893:[[51,51],256],12894:[[51,52],256],12895:[[51,53],256],12896:[[4352],256],12897:[[4354],256],12898:[[4355],256],12899:[[4357],256],12900:[[4358],256],12901:[[4359],256],12902:[[4361],256],12903:[[4363],256],12904:[[4364],256],12905:[[4366],256],12906:[[4367],256],12907:[[4368],256],12908:[[4369],256],12909:[[4370],256],12910:[[4352,4449],256],12911:[[4354,4449],256],12912:[[4355,4449],256],12913:[[4357,4449],256],12914:[[4358,4449],256],12915:[[4359,4449],256],12916:[[4361,4449],256],12917:[[4363,4449],256],12918:[[4364,4449],256],12919:[[4366,4449],256],12920:[[4367,4449],256],12921:[[4368,4449],256],12922:[[4369,4449],256],12923:[[4370,4449],256],12924:[[4366,4449,4535,4352,4457],256],12925:[[4364,4462,4363,4468],256],12926:[[4363,4462],256],12928:[[19968],256],12929:[[20108],256],12930:[[19977],256],12931:[[22235],256],12932:[[20116],256],12933:[[20845],256],12934:[[19971],256],12935:[[20843],256],12936:[[20061],256],12937:[[21313],256],12938:[[26376],256],12939:[[28779],256],12940:[[27700],256],12941:[[26408],256],12942:[[37329],256],12943:[[22303],256],12944:[[26085],256],12945:[[26666],256],12946:[[26377],256],12947:[[31038],256],12948:[[21517],256],12949:[[29305],256],12950:[[36001],256],12951:[[31069],256],12952:[[21172],256],12953:[[31192],256],12954:[[30007],256],12955:[[22899],256],12956:[[36969],256],12957:[[20778],256],12958:[[21360],256],12959:[[27880],256],12960:[[38917],256],12961:[[20241],256],12962:[[20889],256],12963:[[27491],256],12964:[[19978],256],12965:[[20013],256],12966:[[19979],256],12967:[[24038],256],12968:[[21491],256],12969:[[21307],256],12970:[[23447],256],12971:[[23398],256],12972:[[30435],256],12973:[[20225],256],12974:[[36039],256],12975:[[21332],256],12976:[[22812],256],12977:[[51,54],256],12978:[[51,55],256],12979:[[51,56],256],12980:[[51,57],256],12981:[[52,48],256],12982:[[52,49],256],12983:[[52,50],256],12984:[[52,51],256],12985:[[52,52],256],12986:[[52,53],256],12987:[[52,54],256],12988:[[52,55],256],12989:[[52,56],256],12990:[[52,57],256],12991:[[53,48],256],12992:[[49,26376],256],12993:[[50,26376],256],12994:[[51,26376],256],12995:[[52,26376],256],12996:[[53,26376],256],12997:[[54,26376],256],12998:[[55,26376],256],12999:[[56,26376],256],13000:[[57,26376],256],13001:[[49,48,26376],256],13002:[[49,49,26376],256],13003:[[49,50,26376],256],13004:[[72,103],256],13005:[[101,114,103],256],13006:[[101,86],256],13007:[[76,84,68],256],13008:[[12450],256],13009:[[12452],256],13010:[[12454],256],13011:[[12456],256],13012:[[12458],256],13013:[[12459],256],13014:[[12461],256],13015:[[12463],256],13016:[[12465],256],13017:[[12467],256],13018:[[12469],256],13019:[[12471],256],13020:[[12473],256],13021:[[12475],256],13022:[[12477],256],13023:[[12479],256],13024:[[12481],256],13025:[[12484],256],13026:[[12486],256],13027:[[12488],256],13028:[[12490],256],13029:[[12491],256],13030:[[12492],256],13031:[[12493],256],13032:[[12494],256],13033:[[12495],256],13034:[[12498],256],13035:[[12501],256],13036:[[12504],256],13037:[[12507],256],13038:[[12510],256],13039:[[12511],256],13040:[[12512],256],13041:[[12513],256],13042:[[12514],256],13043:[[12516],256],13044:[[12518],256],13045:[[12520],256],13046:[[12521],256],13047:[[12522],256],13048:[[12523],256],13049:[[12524],256],13050:[[12525],256],13051:[[12527],256],13052:[[12528],256],13053:[[12529],256],13054:[[12530],256]}",13056:"{13056:[[12450,12497,12540,12488],256],13057:[[12450,12523,12501,12449],256],13058:[[12450,12531,12506,12450],256],13059:[[12450,12540,12523],256],13060:[[12452,12491,12531,12464],256],13061:[[12452,12531,12481],256],13062:[[12454,12457,12531],256],13063:[[12456,12473,12463,12540,12489],256],13064:[[12456,12540,12459,12540],256],13065:[[12458,12531,12473],256],13066:[[12458,12540,12512],256],13067:[[12459,12452,12522],256],13068:[[12459,12521,12483,12488],256],13069:[[12459,12525,12522,12540],256],13070:[[12460,12525,12531],256],13071:[[12460,12531,12510],256],13072:[[12462,12460],256],13073:[[12462,12491,12540],256],13074:[[12461,12517,12522,12540],256],13075:[[12462,12523,12480,12540],256],13076:[[12461,12525],256],13077:[[12461,12525,12464,12521,12512],256],13078:[[12461,12525,12513,12540,12488,12523],256],13079:[[12461,12525,12527,12483,12488],256],13080:[[12464,12521,12512],256],13081:[[12464,12521,12512,12488,12531],256],13082:[[12463,12523,12476,12452,12525],256],13083:[[12463,12525,12540,12493],256],13084:[[12465,12540,12473],256],13085:[[12467,12523,12490],256],13086:[[12467,12540,12509],256],13087:[[12469,12452,12463,12523],256],13088:[[12469,12531,12481,12540,12512],256],13089:[[12471,12522,12531,12464],256],13090:[[12475,12531,12481],256],13091:[[12475,12531,12488],256],13092:[[12480,12540,12473],256],13093:[[12487,12471],256],13094:[[12489,12523],256],13095:[[12488,12531],256],13096:[[12490,12494],256],13097:[[12494,12483,12488],256],13098:[[12495,12452,12484],256],13099:[[12497,12540,12475,12531,12488],256],13100:[[12497,12540,12484],256],13101:[[12496,12540,12524,12523],256],13102:[[12500,12450,12473,12488,12523],256],13103:[[12500,12463,12523],256],13104:[[12500,12467],256],13105:[[12499,12523],256],13106:[[12501,12449,12521,12483,12489],256],13107:[[12501,12451,12540,12488],256],13108:[[12502,12483,12471,12455,12523],256],13109:[[12501,12521,12531],256],13110:[[12504,12463,12479,12540,12523],256],13111:[[12506,12477],256],13112:[[12506,12491,12498],256],13113:[[12504,12523,12484],256],13114:[[12506,12531,12473],256],13115:[[12506,12540,12472],256],13116:[[12505,12540,12479],256],13117:[[12509,12452,12531,12488],256],13118:[[12508,12523,12488],256],13119:[[12507,12531],256],13120:[[12509,12531,12489],256],13121:[[12507,12540,12523],256],13122:[[12507,12540,12531],256],13123:[[12510,12452,12463,12525],256],13124:[[12510,12452,12523],256],13125:[[12510,12483,12495],256],13126:[[12510,12523,12463],256],13127:[[12510,12531,12471,12519,12531],256],13128:[[12511,12463,12525,12531],256],13129:[[12511,12522],256],13130:[[12511,12522,12496,12540,12523],256],13131:[[12513,12460],256],13132:[[12513,12460,12488,12531],256],13133:[[12513,12540,12488,12523],256],13134:[[12516,12540,12489],256],13135:[[12516,12540,12523],256],13136:[[12518,12450,12531],256],13137:[[12522,12483,12488,12523],256],13138:[[12522,12521],256],13139:[[12523,12500,12540],256],13140:[[12523,12540,12502,12523],256],13141:[[12524,12512],256],13142:[[12524,12531,12488,12466,12531],256],13143:[[12527,12483,12488],256],13144:[[48,28857],256],13145:[[49,28857],256],13146:[[50,28857],256],13147:[[51,28857],256],13148:[[52,28857],256],13149:[[53,28857],256],13150:[[54,28857],256],13151:[[55,28857],256],13152:[[56,28857],256],13153:[[57,28857],256],13154:[[49,48,28857],256],13155:[[49,49,28857],256],13156:[[49,50,28857],256],13157:[[49,51,28857],256],13158:[[49,52,28857],256],13159:[[49,53,28857],256],13160:[[49,54,28857],256],13161:[[49,55,28857],256],13162:[[49,56,28857],256],13163:[[49,57,28857],256],13164:[[50,48,28857],256],13165:[[50,49,28857],256],13166:[[50,50,28857],256],13167:[[50,51,28857],256],13168:[[50,52,28857],256],13169:[[104,80,97],256],13170:[[100,97],256],13171:[[65,85],256],13172:[[98,97,114],256],13173:[[111,86],256],13174:[[112,99],256],13175:[[100,109],256],13176:[[100,109,178],256],13177:[[100,109,179],256],13178:[[73,85],256],13179:[[24179,25104],256],13180:[[26157,21644],256],13181:[[22823,27491],256],13182:[[26126,27835],256],13183:[[26666,24335,20250,31038],256],13184:[[112,65],256],13185:[[110,65],256],13186:[[956,65],256],13187:[[109,65],256],13188:[[107,65],256],13189:[[75,66],256],13190:[[77,66],256],13191:[[71,66],256],13192:[[99,97,108],256],13193:[[107,99,97,108],256],13194:[[112,70],256],13195:[[110,70],256],13196:[[956,70],256],13197:[[956,103],256],13198:[[109,103],256],13199:[[107,103],256],13200:[[72,122],256],13201:[[107,72,122],256],13202:[[77,72,122],256],13203:[[71,72,122],256],13204:[[84,72,122],256],13205:[[956,8467],256],13206:[[109,8467],256],13207:[[100,8467],256],13208:[[107,8467],256],13209:[[102,109],256],13210:[[110,109],256],13211:[[956,109],256],13212:[[109,109],256],13213:[[99,109],256],13214:[[107,109],256],13215:[[109,109,178],256],13216:[[99,109,178],256],13217:[[109,178],256],13218:[[107,109,178],256],13219:[[109,109,179],256],13220:[[99,109,179],256],13221:[[109,179],256],13222:[[107,109,179],256],13223:[[109,8725,115],256],13224:[[109,8725,115,178],256],13225:[[80,97],256],13226:[[107,80,97],256],13227:[[77,80,97],256],13228:[[71,80,97],256],13229:[[114,97,100],256],13230:[[114,97,100,8725,115],256],13231:[[114,97,100,8725,115,178],256],13232:[[112,115],256],13233:[[110,115],256],13234:[[956,115],256],13235:[[109,115],256],13236:[[112,86],256],13237:[[110,86],256],13238:[[956,86],256],13239:[[109,86],256],13240:[[107,86],256],13241:[[77,86],256],13242:[[112,87],256],13243:[[110,87],256],13244:[[956,87],256],13245:[[109,87],256],13246:[[107,87],256],13247:[[77,87],256],13248:[[107,937],256],13249:[[77,937],256],13250:[[97,46,109,46],256],13251:[[66,113],256],13252:[[99,99],256],13253:[[99,100],256],13254:[[67,8725,107,103],256],13255:[[67,111,46],256],13256:[[100,66],256],13257:[[71,121],256],13258:[[104,97],256],13259:[[72,80],256],13260:[[105,110],256],13261:[[75,75],256],13262:[[75,77],256],13263:[[107,116],256],13264:[[108,109],256],13265:[[108,110],256],13266:[[108,111,103],256],13267:[[108,120],256],13268:[[109,98],256],13269:[[109,105,108],256],13270:[[109,111,108],256],13271:[[80,72],256],13272:[[112,46,109,46],256],13273:[[80,80,77],256],13274:[[80,82],256],13275:[[115,114],256],13276:[[83,118],256],13277:[[87,98],256],13278:[[86,8725,109],256],13279:[[65,8725,109],256],13280:[[49,26085],256],13281:[[50,26085],256],13282:[[51,26085],256],13283:[[52,26085],256],13284:[[53,26085],256],13285:[[54,26085],256],13286:[[55,26085],256],13287:[[56,26085],256],13288:[[57,26085],256],13289:[[49,48,26085],256],13290:[[49,49,26085],256],13291:[[49,50,26085],256],13292:[[49,51,26085],256],13293:[[49,52,26085],256],13294:[[49,53,26085],256],13295:[[49,54,26085],256],13296:[[49,55,26085],256],13297:[[49,56,26085],256],13298:[[49,57,26085],256],13299:[[50,48,26085],256],13300:[[50,49,26085],256],13301:[[50,50,26085],256],13302:[[50,51,26085],256],13303:[[50,52,26085],256],13304:[[50,53,26085],256],13305:[[50,54,26085],256],13306:[[50,55,26085],256],13307:[[50,56,26085],256],13308:[[50,57,26085],256],13309:[[51,48,26085],256],13310:[[51,49,26085],256],13311:[[103,97,108],256]}",42496:"{42607:[,230],42620:[,230],42621:[,230]}",42752:"{42864:[[42863],256]}",43008:"{43014:[,9],43204:[,9]}",43264:"{43307:[,220],43308:[,220],43309:[,220],43347:[,9]}",53504:"{119134:[[119127,119141],512],119135:[[119128,119141],512],119136:[[119135,119150],512],119137:[[119135,119151],512],119138:[[119135,119152],512],119139:[[119135,119153],512],119140:[[119135,119154],512],119141:[,216],119142:[,216],119143:[,1],119144:[,1],119145:[,1],119149:[,226],119150:[,216],119151:[,216],119152:[,216],119153:[,216],119154:[,216],119163:[,220],119164:[,220],119165:[,220],119166:[,220],119167:[,220],119168:[,220],119169:[,220],119170:[,220],119173:[,230],119174:[,230],119175:[,230],119176:[,230],119177:[,230],119178:[,220],119179:[,220],119210:[,230],119211:[,230],119212:[,230],119213:[,230],119227:[[119225,119141],512],119228:[[119226,119141],512],119229:[[119227,119150],512],119230:[[119228,119150],512],119231:[[119227,119151],512],119232:[[119228,119151],512]}",53760:"{119362:[,230],119363:[,230],119364:[,230]}",54272:"{119808:[[65],256],119809:[[66],256],119810:[[67],256],119811:[[68],256],119812:[[69],256],119813:[[70],256],119814:[[71],256],119815:[[72],256],119816:[[73],256],119817:[[74],256],119818:[[75],256],119819:[[76],256],119820:[[77],256],119821:[[78],256],119822:[[79],256],119823:[[80],256],119824:[[81],256],119825:[[82],256],119826:[[83],256],119827:[[84],256],119828:[[85],256],119829:[[86],256],119830:[[87],256],119831:[[88],256],119832:[[89],256],119833:[[90],256],119834:[[97],256],119835:[[98],256],119836:[[99],256],119837:[[100],256],119838:[[101],256],119839:[[102],256],119840:[[103],256],119841:[[104],256],119842:[[105],256],119843:[[106],256],119844:[[107],256],119845:[[108],256],119846:[[109],256],119847:[[110],256],119848:[[111],256],119849:[[112],256],119850:[[113],256],119851:[[114],256],119852:[[115],256],119853:[[116],256],119854:[[117],256],119855:[[118],256],119856:[[119],256],119857:[[120],256],119858:[[121],256],119859:[[122],256],119860:[[65],256],119861:[[66],256],119862:[[67],256],119863:[[68],256],119864:[[69],256],119865:[[70],256],119866:[[71],256],119867:[[72],256],119868:[[73],256],119869:[[74],256],119870:[[75],256],119871:[[76],256],119872:[[77],256],119873:[[78],256],119874:[[79],256],119875:[[80],256],119876:[[81],256],119877:[[82],256],119878:[[83],256],119879:[[84],256],119880:[[85],256],119881:[[86],256],119882:[[87],256],119883:[[88],256],119884:[[89],256],119885:[[90],256],119886:[[97],256],119887:[[98],256],119888:[[99],256],119889:[[100],256],119890:[[101],256],119891:[[102],256],119892:[[103],256],119894:[[105],256],119895:[[106],256],119896:[[107],256],119897:[[108],256],119898:[[109],256],119899:[[110],256],119900:[[111],256],119901:[[112],256],119902:[[113],256],119903:[[114],256],119904:[[115],256],119905:[[116],256],119906:[[117],256],119907:[[118],256],119908:[[119],256],119909:[[120],256],119910:[[121],256],119911:[[122],256],119912:[[65],256],119913:[[66],256],119914:[[67],256],119915:[[68],256],119916:[[69],256],119917:[[70],256],119918:[[71],256],119919:[[72],256],119920:[[73],256],119921:[[74],256],119922:[[75],256],119923:[[76],256],119924:[[77],256],119925:[[78],256],119926:[[79],256],119927:[[80],256],119928:[[81],256],119929:[[82],256],119930:[[83],256],119931:[[84],256],119932:[[85],256],119933:[[86],256],119934:[[87],256],119935:[[88],256],119936:[[89],256],119937:[[90],256],119938:[[97],256],119939:[[98],256],119940:[[99],256],119941:[[100],256],119942:[[101],256],119943:[[102],256],119944:[[103],256],119945:[[104],256],119946:[[105],256],119947:[[106],256],119948:[[107],256],119949:[[108],256],119950:[[109],256],119951:[[110],256],119952:[[111],256],119953:[[112],256],119954:[[113],256],119955:[[114],256],119956:[[115],256],119957:[[116],256],119958:[[117],256],119959:[[118],256],119960:[[119],256],119961:[[120],256],119962:[[121],256],119963:[[122],256],119964:[[65],256],119966:[[67],256],119967:[[68],256],119970:[[71],256],119973:[[74],256],119974:[[75],256],119977:[[78],256],119978:[[79],256],119979:[[80],256],119980:[[81],256],119982:[[83],256],119983:[[84],256],119984:[[85],256],119985:[[86],256],119986:[[87],256],119987:[[88],256],119988:[[89],256],119989:[[90],256],119990:[[97],256],119991:[[98],256],119992:[[99],256],119993:[[100],256],119995:[[102],256],119997:[[104],256],119998:[[105],256],119999:[[106],256],120000:[[107],256],120001:[[108],256],120002:[[109],256],120003:[[110],256],120005:[[112],256],120006:[[113],256],120007:[[114],256],120008:[[115],256],120009:[[116],256],120010:[[117],256],120011:[[118],256],120012:[[119],256],120013:[[120],256],120014:[[121],256],120015:[[122],256],120016:[[65],256],120017:[[66],256],120018:[[67],256],120019:[[68],256],120020:[[69],256],120021:[[70],256],120022:[[71],256],120023:[[72],256],120024:[[73],256],120025:[[74],256],120026:[[75],256],120027:[[76],256],120028:[[77],256],120029:[[78],256],120030:[[79],256],120031:[[80],256],120032:[[81],256],120033:[[82],256],120034:[[83],256],120035:[[84],256],120036:[[85],256],120037:[[86],256],120038:[[87],256],120039:[[88],256],120040:[[89],256],120041:[[90],256],120042:[[97],256],120043:[[98],256],120044:[[99],256],120045:[[100],256],120046:[[101],256],120047:[[102],256],120048:[[103],256],120049:[[104],256],120050:[[105],256],120051:[[106],256],120052:[[107],256],120053:[[108],256],120054:[[109],256],120055:[[110],256],120056:[[111],256],120057:[[112],256],120058:[[113],256],120059:[[114],256],120060:[[115],256],120061:[[116],256],120062:[[117],256],120063:[[118],256]}",54528:"{120064:[[119],256],120065:[[120],256],120066:[[121],256],120067:[[122],256],120068:[[65],256],120069:[[66],256],120071:[[68],256],120072:[[69],256],120073:[[70],256],120074:[[71],256],120077:[[74],256],120078:[[75],256],120079:[[76],256],120080:[[77],256],120081:[[78],256],120082:[[79],256],120083:[[80],256],120084:[[81],256],120086:[[83],256],120087:[[84],256],120088:[[85],256],120089:[[86],256],120090:[[87],256],120091:[[88],256],120092:[[89],256],120094:[[97],256],120095:[[98],256],120096:[[99],256],120097:[[100],256],120098:[[101],256],120099:[[102],256],120100:[[103],256],120101:[[104],256],120102:[[105],256],120103:[[106],256],120104:[[107],256],120105:[[108],256],120106:[[109],256],120107:[[110],256],120108:[[111],256],120109:[[112],256],120110:[[113],256],120111:[[114],256],120112:[[115],256],120113:[[116],256],120114:[[117],256],120115:[[118],256],120116:[[119],256],120117:[[120],256],120118:[[121],256],120119:[[122],256],120120:[[65],256],120121:[[66],256],120123:[[68],256],120124:[[69],256],120125:[[70],256],120126:[[71],256],120128:[[73],256],120129:[[74],256],120130:[[75],256],120131:[[76],256],120132:[[77],256],120134:[[79],256],120138:[[83],256],120139:[[84],256],120140:[[85],256],120141:[[86],256],120142:[[87],256],120143:[[88],256],120144:[[89],256],120146:[[97],256],120147:[[98],256],120148:[[99],256],120149:[[100],256],120150:[[101],256],120151:[[102],256],120152:[[103],256],120153:[[104],256],120154:[[105],256],120155:[[106],256],120156:[[107],256],120157:[[108],256],120158:[[109],256],120159:[[110],256],120160:[[111],256],120161:[[112],256],120162:[[113],256],120163:[[114],256],120164:[[115],256],120165:[[116],256],120166:[[117],256],120167:[[118],256],120168:[[119],256],120169:[[120],256],120170:[[121],256],120171:[[122],256],120172:[[65],256],120173:[[66],256],120174:[[67],256],120175:[[68],256],120176:[[69],256],120177:[[70],256],120178:[[71],256],120179:[[72],256],120180:[[73],256],120181:[[74],256],120182:[[75],256],120183:[[76],256],120184:[[77],256],120185:[[78],256],120186:[[79],256],120187:[[80],256],120188:[[81],256],120189:[[82],256],120190:[[83],256],120191:[[84],256],120192:[[85],256],120193:[[86],256],120194:[[87],256],120195:[[88],256],120196:[[89],256],120197:[[90],256],120198:[[97],256],120199:[[98],256],120200:[[99],256],120201:[[100],256],120202:[[101],256],120203:[[102],256],120204:[[103],256],120205:[[104],256],120206:[[105],256],120207:[[106],256],120208:[[107],256],120209:[[108],256],120210:[[109],256],120211:[[110],256],120212:[[111],256],120213:[[112],256],120214:[[113],256],120215:[[114],256],120216:[[115],256],120217:[[116],256],120218:[[117],256],120219:[[118],256],120220:[[119],256],120221:[[120],256],120222:[[121],256],120223:[[122],256],120224:[[65],256],120225:[[66],256],120226:[[67],256],120227:[[68],256],120228:[[69],256],120229:[[70],256],120230:[[71],256],120231:[[72],256],120232:[[73],256],120233:[[74],256],120234:[[75],256],120235:[[76],256],120236:[[77],256],120237:[[78],256],120238:[[79],256],120239:[[80],256],120240:[[81],256],120241:[[82],256],120242:[[83],256],120243:[[84],256],120244:[[85],256],120245:[[86],256],120246:[[87],256],120247:[[88],256],120248:[[89],256],120249:[[90],256],120250:[[97],256],120251:[[98],256],120252:[[99],256],120253:[[100],256],120254:[[101],256],120255:[[102],256],120256:[[103],256],120257:[[104],256],120258:[[105],256],120259:[[106],256],120260:[[107],256],120261:[[108],256],120262:[[109],256],120263:[[110],256],120264:[[111],256],120265:[[112],256],120266:[[113],256],120267:[[114],256],120268:[[115],256],120269:[[116],256],120270:[[117],256],120271:[[118],256],120272:[[119],256],120273:[[120],256],120274:[[121],256],120275:[[122],256],120276:[[65],256],120277:[[66],256],120278:[[67],256],120279:[[68],256],120280:[[69],256],120281:[[70],256],120282:[[71],256],120283:[[72],256],120284:[[73],256],120285:[[74],256],120286:[[75],256],120287:[[76],256],120288:[[77],256],120289:[[78],256],120290:[[79],256],120291:[[80],256],120292:[[81],256],120293:[[82],256],120294:[[83],256],120295:[[84],256],120296:[[85],256],120297:[[86],256],120298:[[87],256],120299:[[88],256],120300:[[89],256],120301:[[90],256],120302:[[97],256],120303:[[98],256],120304:[[99],256],120305:[[100],256],120306:[[101],256],120307:[[102],256],120308:[[103],256],120309:[[104],256],120310:[[105],256],120311:[[106],256],120312:[[107],256],120313:[[108],256],120314:[[109],256],120315:[[110],256],120316:[[111],256],120317:[[112],256],120318:[[113],256],120319:[[114],256]}",54784:"{120320:[[115],256],120321:[[116],256],120322:[[117],256],120323:[[118],256],120324:[[119],256],120325:[[120],256],120326:[[121],256],120327:[[122],256],120328:[[65],256],120329:[[66],256],120330:[[67],256],120331:[[68],256],120332:[[69],256],120333:[[70],256],120334:[[71],256],120335:[[72],256],120336:[[73],256],120337:[[74],256],120338:[[75],256],120339:[[76],256],120340:[[77],256],120341:[[78],256],120342:[[79],256],120343:[[80],256],120344:[[81],256],120345:[[82],256],120346:[[83],256],120347:[[84],256],120348:[[85],256],120349:[[86],256],120350:[[87],256],120351:[[88],256],120352:[[89],256],120353:[[90],256],120354:[[97],256],120355:[[98],256],120356:[[99],256],120357:[[100],256],120358:[[101],256],120359:[[102],256],120360:[[103],256],120361:[[104],256],120362:[[105],256],120363:[[106],256],120364:[[107],256],120365:[[108],256],120366:[[109],256],120367:[[110],256],120368:[[111],256],120369:[[112],256],120370:[[113],256],120371:[[114],256],120372:[[115],256],120373:[[116],256],120374:[[117],256],120375:[[118],256],120376:[[119],256],120377:[[120],256],120378:[[121],256],120379:[[122],256],120380:[[65],256],120381:[[66],256],120382:[[67],256],120383:[[68],256],120384:[[69],256],120385:[[70],256],120386:[[71],256],120387:[[72],256],120388:[[73],256],120389:[[74],256],120390:[[75],256],120391:[[76],256],120392:[[77],256],120393:[[78],256],120394:[[79],256],120395:[[80],256],120396:[[81],256],120397:[[82],256],120398:[[83],256],120399:[[84],256],120400:[[85],256],120401:[[86],256],120402:[[87],256],120403:[[88],256],120404:[[89],256],120405:[[90],256],120406:[[97],256],120407:[[98],256],120408:[[99],256],120409:[[100],256],120410:[[101],256],120411:[[102],256],120412:[[103],256],120413:[[104],256],120414:[[105],256],120415:[[106],256],120416:[[107],256],120417:[[108],256],120418:[[109],256],120419:[[110],256],120420:[[111],256],120421:[[112],256],120422:[[113],256],120423:[[114],256],120424:[[115],256],120425:[[116],256],120426:[[117],256],120427:[[118],256],120428:[[119],256],120429:[[120],256],120430:[[121],256],120431:[[122],256],120432:[[65],256],120433:[[66],256],120434:[[67],256],120435:[[68],256],120436:[[69],256],120437:[[70],256],120438:[[71],256],120439:[[72],256],120440:[[73],256],120441:[[74],256],120442:[[75],256],120443:[[76],256],120444:[[77],256],120445:[[78],256],120446:[[79],256],120447:[[80],256],120448:[[81],256],120449:[[82],256],120450:[[83],256],120451:[[84],256],120452:[[85],256],120453:[[86],256],120454:[[87],256],120455:[[88],256],120456:[[89],256],120457:[[90],256],120458:[[97],256],120459:[[98],256],120460:[[99],256],120461:[[100],256],120462:[[101],256],120463:[[102],256],120464:[[103],256],120465:[[104],256],120466:[[105],256],120467:[[106],256],120468:[[107],256],120469:[[108],256],120470:[[109],256],120471:[[110],256],120472:[[111],256],120473:[[112],256],120474:[[113],256],120475:[[114],256],120476:[[115],256],120477:[[116],256],120478:[[117],256],120479:[[118],256],120480:[[119],256],120481:[[120],256],120482:[[121],256],120483:[[122],256],120484:[[305],256],120485:[[567],256],120488:[[913],256],120489:[[914],256],120490:[[915],256],120491:[[916],256],120492:[[917],256],120493:[[918],256],120494:[[919],256],120495:[[920],256],120496:[[921],256],120497:[[922],256],120498:[[923],256],120499:[[924],256],120500:[[925],256],120501:[[926],256],120502:[[927],256],120503:[[928],256],120504:[[929],256],120505:[[1012],256],120506:[[931],256],120507:[[932],256],120508:[[933],256],120509:[[934],256],120510:[[935],256],120511:[[936],256],120512:[[937],256],120513:[[8711],256],120514:[[945],256],120515:[[946],256],120516:[[947],256],120517:[[948],256],120518:[[949],256],120519:[[950],256],120520:[[951],256],120521:[[952],256],120522:[[953],256],120523:[[954],256],120524:[[955],256],120525:[[956],256],120526:[[957],256],120527:[[958],256],120528:[[959],256],120529:[[960],256],120530:[[961],256],120531:[[962],256],120532:[[963],256],120533:[[964],256],120534:[[965],256],120535:[[966],256],120536:[[967],256],120537:[[968],256],120538:[[969],256],120539:[[8706],256],120540:[[1013],256],120541:[[977],256],120542:[[1008],256],120543:[[981],256],120544:[[1009],256],120545:[[982],256],120546:[[913],256],120547:[[914],256],120548:[[915],256],120549:[[916],256],120550:[[917],256],120551:[[918],256],120552:[[919],256],120553:[[920],256],120554:[[921],256],120555:[[922],256],120556:[[923],256],120557:[[924],256],120558:[[925],256],120559:[[926],256],120560:[[927],256],120561:[[928],256],120562:[[929],256],120563:[[1012],256],120564:[[931],256],120565:[[932],256],120566:[[933],256],120567:[[934],256],120568:[[935],256],120569:[[936],256],120570:[[937],256],120571:[[8711],256],120572:[[945],256],120573:[[946],256],120574:[[947],256],120575:[[948],256]}",55040:"{120576:[[949],256],120577:[[950],256],120578:[[951],256],120579:[[952],256],120580:[[953],256],120581:[[954],256],120582:[[955],256],120583:[[956],256],120584:[[957],256],120585:[[958],256],120586:[[959],256],120587:[[960],256],120588:[[961],256],120589:[[962],256],120590:[[963],256],120591:[[964],256],120592:[[965],256],120593:[[966],256],120594:[[967],256],120595:[[968],256],120596:[[969],256],120597:[[8706],256],120598:[[1013],256],120599:[[977],256],120600:[[1008],256],120601:[[981],256],120602:[[1009],256],120603:[[982],256],120604:[[913],256],120605:[[914],256],120606:[[915],256],120607:[[916],256],120608:[[917],256],120609:[[918],256],120610:[[919],256],120611:[[920],256],120612:[[921],256],120613:[[922],256],120614:[[923],256],120615:[[924],256],120616:[[925],256],120617:[[926],256],120618:[[927],256],120619:[[928],256],120620:[[929],256],120621:[[1012],256],120622:[[931],256],120623:[[932],256],120624:[[933],256],120625:[[934],256],120626:[[935],256],120627:[[936],256],120628:[[937],256],120629:[[8711],256],120630:[[945],256],120631:[[946],256],120632:[[947],256],120633:[[948],256],120634:[[949],256],120635:[[950],256],120636:[[951],256],120637:[[952],256],120638:[[953],256],120639:[[954],256],120640:[[955],256],120641:[[956],256],120642:[[957],256],120643:[[958],256],120644:[[959],256],120645:[[960],256],120646:[[961],256],120647:[[962],256],120648:[[963],256],120649:[[964],256],120650:[[965],256],120651:[[966],256],120652:[[967],256],120653:[[968],256],120654:[[969],256],120655:[[8706],256],120656:[[1013],256],120657:[[977],256],120658:[[1008],256],120659:[[981],256],120660:[[1009],256],120661:[[982],256],120662:[[913],256],120663:[[914],256],120664:[[915],256],120665:[[916],256],120666:[[917],256],120667:[[918],256],120668:[[919],256],120669:[[920],256],120670:[[921],256],120671:[[922],256],120672:[[923],256],120673:[[924],256],120674:[[925],256],120675:[[926],256],120676:[[927],256],120677:[[928],256],120678:[[929],256],120679:[[1012],256],120680:[[931],256],120681:[[932],256],120682:[[933],256],120683:[[934],256],120684:[[935],256],120685:[[936],256],120686:[[937],256],120687:[[8711],256],120688:[[945],256],120689:[[946],256],120690:[[947],256],120691:[[948],256],120692:[[949],256],120693:[[950],256],120694:[[951],256],120695:[[952],256],120696:[[953],256],120697:[[954],256],120698:[[955],256],120699:[[956],256],120700:[[957],256],120701:[[958],256],120702:[[959],256],120703:[[960],256],120704:[[961],256],120705:[[962],256],120706:[[963],256],120707:[[964],256],120708:[[965],256],120709:[[966],256],120710:[[967],256],120711:[[968],256],120712:[[969],256],120713:[[8706],256],120714:[[1013],256],120715:[[977],256],120716:[[1008],256],120717:[[981],256],120718:[[1009],256],120719:[[982],256],120720:[[913],256],120721:[[914],256],120722:[[915],256],120723:[[916],256],120724:[[917],256],120725:[[918],256],120726:[[919],256],120727:[[920],256],120728:[[921],256],120729:[[922],256],120730:[[923],256],120731:[[924],256],120732:[[925],256],120733:[[926],256],120734:[[927],256],120735:[[928],256],120736:[[929],256],120737:[[1012],256],120738:[[931],256],120739:[[932],256],120740:[[933],256],120741:[[934],256],120742:[[935],256],120743:[[936],256],120744:[[937],256],120745:[[8711],256],120746:[[945],256],120747:[[946],256],120748:[[947],256],120749:[[948],256],120750:[[949],256],120751:[[950],256],120752:[[951],256],120753:[[952],256],120754:[[953],256],120755:[[954],256],120756:[[955],256],120757:[[956],256],120758:[[957],256],120759:[[958],256],120760:[[959],256],120761:[[960],256],120762:[[961],256],120763:[[962],256],120764:[[963],256],120765:[[964],256],120766:[[965],256],120767:[[966],256],120768:[[967],256],120769:[[968],256],120770:[[969],256],120771:[[8706],256],120772:[[1013],256],120773:[[977],256],120774:[[1008],256],120775:[[981],256],120776:[[1009],256],120777:[[982],256],120778:[[988],256],120779:[[989],256],120782:[[48],256],120783:[[49],256],120784:[[50],256],120785:[[51],256],120786:[[52],256],120787:[[53],256],120788:[[54],256],120789:[[55],256],120790:[[56],256],120791:[[57],256],120792:[[48],256],120793:[[49],256],120794:[[50],256],120795:[[51],256],120796:[[52],256],120797:[[53],256],120798:[[54],256],120799:[[55],256],120800:[[56],256],120801:[[57],256],120802:[[48],256],120803:[[49],256],120804:[[50],256],120805:[[51],256],120806:[[52],256],120807:[[53],256],120808:[[54],256],120809:[[55],256],120810:[[56],256],120811:[[57],256],120812:[[48],256],120813:[[49],256],120814:[[50],256],120815:[[51],256],120816:[[52],256],120817:[[53],256],120818:[[54],256],120819:[[55],256],120820:[[56],256],120821:[[57],256],120822:[[48],256],120823:[[49],256],120824:[[50],256],120825:[[51],256],120826:[[52],256],120827:[[53],256],120828:[[54],256],120829:[[55],256],120830:[[56],256],120831:[[57],256]}",63488:"{194560:[[20029]],194561:[[20024]],194562:[[20033]],194563:[[131362]],194564:[[20320]],194565:[[20398]],194566:[[20411]],194567:[[20482]],194568:[[20602]],194569:[[20633]],194570:[[20711]],194571:[[20687]],194572:[[13470]],194573:[[132666]],194574:[[20813]],194575:[[20820]],194576:[[20836]],194577:[[20855]],194578:[[132380]],194579:[[13497]],194580:[[20839]],194581:[[20877]],194582:[[132427]],194583:[[20887]],194584:[[20900]],194585:[[20172]],194586:[[20908]],194587:[[20917]],194588:[[168415]],194589:[[20981]],194590:[[20995]],194591:[[13535]],194592:[[21051]],194593:[[21062]],194594:[[21106]],194595:[[21111]],194596:[[13589]],194597:[[21191]],194598:[[21193]],194599:[[21220]],194600:[[21242]],194601:[[21253]],194602:[[21254]],194603:[[21271]],194604:[[21321]],194605:[[21329]],194606:[[21338]],194607:[[21363]],194608:[[21373]],194609:[[21375]],194610:[[21375]],194611:[[21375]],194612:[[133676]],194613:[[28784]],194614:[[21450]],194615:[[21471]],194616:[[133987]],194617:[[21483]],194618:[[21489]],194619:[[21510]],194620:[[21662]],194621:[[21560]],194622:[[21576]],194623:[[21608]],194624:[[21666]],194625:[[21750]],194626:[[21776]],194627:[[21843]],194628:[[21859]],194629:[[21892]],194630:[[21892]],194631:[[21913]],194632:[[21931]],194633:[[21939]],194634:[[21954]],194635:[[22294]],194636:[[22022]],194637:[[22295]],194638:[[22097]],194639:[[22132]],194640:[[20999]],194641:[[22766]],194642:[[22478]],194643:[[22516]],194644:[[22541]],194645:[[22411]],194646:[[22578]],194647:[[22577]],194648:[[22700]],194649:[[136420]],194650:[[22770]],194651:[[22775]],194652:[[22790]],194653:[[22810]],194654:[[22818]],194655:[[22882]],194656:[[136872]],194657:[[136938]],194658:[[23020]],194659:[[23067]],194660:[[23079]],194661:[[23000]],194662:[[23142]],194663:[[14062]],194664:[[14076]],194665:[[23304]],194666:[[23358]],194667:[[23358]],194668:[[137672]],194669:[[23491]],194670:[[23512]],194671:[[23527]],194672:[[23539]],194673:[[138008]],194674:[[23551]],194675:[[23558]],194676:[[24403]],194677:[[23586]],194678:[[14209]],194679:[[23648]],194680:[[23662]],194681:[[23744]],194682:[[23693]],194683:[[138724]],194684:[[23875]],194685:[[138726]],194686:[[23918]],194687:[[23915]],194688:[[23932]],194689:[[24033]],194690:[[24034]],194691:[[14383]],194692:[[24061]],194693:[[24104]],194694:[[24125]],194695:[[24169]],194696:[[14434]],194697:[[139651]],194698:[[14460]],194699:[[24240]],194700:[[24243]],194701:[[24246]],194702:[[24266]],194703:[[172946]],194704:[[24318]],194705:[[140081]],194706:[[140081]],194707:[[33281]],194708:[[24354]],194709:[[24354]],194710:[[14535]],194711:[[144056]],194712:[[156122]],194713:[[24418]],194714:[[24427]],194715:[[14563]],194716:[[24474]],194717:[[24525]],194718:[[24535]],194719:[[24569]],194720:[[24705]],194721:[[14650]],194722:[[14620]],194723:[[24724]],194724:[[141012]],194725:[[24775]],194726:[[24904]],194727:[[24908]],194728:[[24910]],194729:[[24908]],194730:[[24954]],194731:[[24974]],194732:[[25010]],194733:[[24996]],194734:[[25007]],194735:[[25054]],194736:[[25074]],194737:[[25078]],194738:[[25104]],194739:[[25115]],194740:[[25181]],194741:[[25265]],194742:[[25300]],194743:[[25424]],194744:[[142092]],194745:[[25405]],194746:[[25340]],194747:[[25448]],194748:[[25475]],194749:[[25572]],194750:[[142321]],194751:[[25634]],194752:[[25541]],194753:[[25513]],194754:[[14894]],194755:[[25705]],194756:[[25726]],194757:[[25757]],194758:[[25719]],194759:[[14956]],194760:[[25935]],194761:[[25964]],194762:[[143370]],194763:[[26083]],194764:[[26360]],194765:[[26185]],194766:[[15129]],194767:[[26257]],194768:[[15112]],194769:[[15076]],194770:[[20882]],194771:[[20885]],194772:[[26368]],194773:[[26268]],194774:[[32941]],194775:[[17369]],194776:[[26391]],194777:[[26395]],194778:[[26401]],194779:[[26462]],194780:[[26451]],194781:[[144323]],194782:[[15177]],194783:[[26618]],194784:[[26501]],194785:[[26706]],194786:[[26757]],194787:[[144493]],194788:[[26766]],194789:[[26655]],194790:[[26900]],194791:[[15261]],194792:[[26946]],194793:[[27043]],194794:[[27114]],194795:[[27304]],194796:[[145059]],194797:[[27355]],194798:[[15384]],194799:[[27425]],194800:[[145575]],194801:[[27476]],194802:[[15438]],194803:[[27506]],194804:[[27551]],194805:[[27578]],194806:[[27579]],194807:[[146061]],194808:[[138507]],194809:[[146170]],194810:[[27726]],194811:[[146620]],194812:[[27839]],194813:[[27853]],194814:[[27751]],194815:[[27926]]}",63744:"{63744:[[35912]],63745:[[26356]],63746:[[36554]],63747:[[36040]],63748:[[28369]],63749:[[20018]],63750:[[21477]],63751:[[40860]],63752:[[40860]],63753:[[22865]],63754:[[37329]],63755:[[21895]],63756:[[22856]],63757:[[25078]],63758:[[30313]],63759:[[32645]],63760:[[34367]],63761:[[34746]],63762:[[35064]],63763:[[37007]],63764:[[27138]],63765:[[27931]],63766:[[28889]],63767:[[29662]],63768:[[33853]],63769:[[37226]],63770:[[39409]],63771:[[20098]],63772:[[21365]],63773:[[27396]],63774:[[29211]],63775:[[34349]],63776:[[40478]],63777:[[23888]],63778:[[28651]],63779:[[34253]],63780:[[35172]],63781:[[25289]],63782:[[33240]],63783:[[34847]],63784:[[24266]],63785:[[26391]],63786:[[28010]],63787:[[29436]],63788:[[37070]],63789:[[20358]],63790:[[20919]],63791:[[21214]],63792:[[25796]],63793:[[27347]],63794:[[29200]],63795:[[30439]],63796:[[32769]],63797:[[34310]],63798:[[34396]],63799:[[36335]],63800:[[38706]],63801:[[39791]],63802:[[40442]],63803:[[30860]],63804:[[31103]],63805:[[32160]],63806:[[33737]],63807:[[37636]],63808:[[40575]],63809:[[35542]],63810:[[22751]],63811:[[24324]],63812:[[31840]],63813:[[32894]],63814:[[29282]],63815:[[30922]],63816:[[36034]],63817:[[38647]],63818:[[22744]],63819:[[23650]],63820:[[27155]],63821:[[28122]],63822:[[28431]],63823:[[32047]],63824:[[32311]],63825:[[38475]],63826:[[21202]],63827:[[32907]],63828:[[20956]],63829:[[20940]],63830:[[31260]],63831:[[32190]],63832:[[33777]],63833:[[38517]],63834:[[35712]],63835:[[25295]],63836:[[27138]],63837:[[35582]],63838:[[20025]],63839:[[23527]],63840:[[24594]],63841:[[29575]],63842:[[30064]],63843:[[21271]],63844:[[30971]],63845:[[20415]],63846:[[24489]],63847:[[19981]],63848:[[27852]],63849:[[25976]],63850:[[32034]],63851:[[21443]],63852:[[22622]],63853:[[30465]],63854:[[33865]],63855:[[35498]],63856:[[27578]],63857:[[36784]],63858:[[27784]],63859:[[25342]],63860:[[33509]],63861:[[25504]],63862:[[30053]],63863:[[20142]],63864:[[20841]],63865:[[20937]],63866:[[26753]],63867:[[31975]],63868:[[33391]],63869:[[35538]],63870:[[37327]],63871:[[21237]],63872:[[21570]],63873:[[22899]],63874:[[24300]],63875:[[26053]],63876:[[28670]],63877:[[31018]],63878:[[38317]],63879:[[39530]],63880:[[40599]],63881:[[40654]],63882:[[21147]],63883:[[26310]],63884:[[27511]],63885:[[36706]],63886:[[24180]],63887:[[24976]],63888:[[25088]],63889:[[25754]],63890:[[28451]],63891:[[29001]],63892:[[29833]],63893:[[31178]],63894:[[32244]],63895:[[32879]],63896:[[36646]],63897:[[34030]],63898:[[36899]],63899:[[37706]],63900:[[21015]],63901:[[21155]],63902:[[21693]],63903:[[28872]],63904:[[35010]],63905:[[35498]],63906:[[24265]],63907:[[24565]],63908:[[25467]],63909:[[27566]],63910:[[31806]],63911:[[29557]],63912:[[20196]],63913:[[22265]],63914:[[23527]],63915:[[23994]],63916:[[24604]],63917:[[29618]],63918:[[29801]],63919:[[32666]],63920:[[32838]],63921:[[37428]],63922:[[38646]],63923:[[38728]],63924:[[38936]],63925:[[20363]],63926:[[31150]],63927:[[37300]],63928:[[38584]],63929:[[24801]],63930:[[20102]],63931:[[20698]],63932:[[23534]],63933:[[23615]],63934:[[26009]],63935:[[27138]],63936:[[29134]],63937:[[30274]],63938:[[34044]],63939:[[36988]],63940:[[40845]],63941:[[26248]],63942:[[38446]],63943:[[21129]],63944:[[26491]],63945:[[26611]],63946:[[27969]],63947:[[28316]],63948:[[29705]],63949:[[30041]],63950:[[30827]],63951:[[32016]],63952:[[39006]],63953:[[20845]],63954:[[25134]],63955:[[38520]],63956:[[20523]],63957:[[23833]],63958:[[28138]],63959:[[36650]],63960:[[24459]],63961:[[24900]],63962:[[26647]],63963:[[29575]],63964:[[38534]],63965:[[21033]],63966:[[21519]],63967:[[23653]],63968:[[26131]],63969:[[26446]],63970:[[26792]],63971:[[27877]],63972:[[29702]],63973:[[30178]],63974:[[32633]],63975:[[35023]],63976:[[35041]],63977:[[37324]],63978:[[38626]],63979:[[21311]],63980:[[28346]],63981:[[21533]],63982:[[29136]],63983:[[29848]],63984:[[34298]],63985:[[38563]],63986:[[40023]],63987:[[40607]],63988:[[26519]],63989:[[28107]],63990:[[33256]],63991:[[31435]],63992:[[31520]],63993:[[31890]],63994:[[29376]],63995:[[28825]],63996:[[35672]],63997:[[20160]],63998:[[33590]],63999:[[21050]],194816:[[27966]],194817:[[28023]],194818:[[27969]],194819:[[28009]],194820:[[28024]],194821:[[28037]],194822:[[146718]],194823:[[27956]],194824:[[28207]],194825:[[28270]],194826:[[15667]],194827:[[28363]],194828:[[28359]],194829:[[147153]],194830:[[28153]],194831:[[28526]],194832:[[147294]],194833:[[147342]],194834:[[28614]],194835:[[28729]],194836:[[28702]],194837:[[28699]],194838:[[15766]],194839:[[28746]],194840:[[28797]],194841:[[28791]],194842:[[28845]],194843:[[132389]],194844:[[28997]],194845:[[148067]],194846:[[29084]],194847:[[148395]],194848:[[29224]],194849:[[29237]],194850:[[29264]],194851:[[149000]],194852:[[29312]],194853:[[29333]],194854:[[149301]],194855:[[149524]],194856:[[29562]],194857:[[29579]],194858:[[16044]],194859:[[29605]],194860:[[16056]],194861:[[16056]],194862:[[29767]],194863:[[29788]],194864:[[29809]],194865:[[29829]],194866:[[29898]],194867:[[16155]],194868:[[29988]],194869:[[150582]],194870:[[30014]],194871:[[150674]],194872:[[30064]],194873:[[139679]],194874:[[30224]],194875:[[151457]],194876:[[151480]],194877:[[151620]],194878:[[16380]],194879:[[16392]],194880:[[30452]],194881:[[151795]],194882:[[151794]],194883:[[151833]],194884:[[151859]],194885:[[30494]],194886:[[30495]],194887:[[30495]],194888:[[30538]],194889:[[16441]],194890:[[30603]],194891:[[16454]],194892:[[16534]],194893:[[152605]],194894:[[30798]],194895:[[30860]],194896:[[30924]],194897:[[16611]],194898:[[153126]],194899:[[31062]],194900:[[153242]],194901:[[153285]],194902:[[31119]],194903:[[31211]],194904:[[16687]],194905:[[31296]],194906:[[31306]],194907:[[31311]],194908:[[153980]],194909:[[154279]],194910:[[154279]],194911:[[31470]],194912:[[16898]],194913:[[154539]],194914:[[31686]],194915:[[31689]],194916:[[16935]],194917:[[154752]],194918:[[31954]],194919:[[17056]],194920:[[31976]],194921:[[31971]],194922:[[32000]],194923:[[155526]],194924:[[32099]],194925:[[17153]],194926:[[32199]],194927:[[32258]],194928:[[32325]],194929:[[17204]],194930:[[156200]],194931:[[156231]],194932:[[17241]],194933:[[156377]],194934:[[32634]],194935:[[156478]],194936:[[32661]],194937:[[32762]],194938:[[32773]],194939:[[156890]],194940:[[156963]],194941:[[32864]],194942:[[157096]],194943:[[32880]],194944:[[144223]],194945:[[17365]],194946:[[32946]],194947:[[33027]],194948:[[17419]],194949:[[33086]],194950:[[23221]],194951:[[157607]],194952:[[157621]],194953:[[144275]],194954:[[144284]],194955:[[33281]],194956:[[33284]],194957:[[36766]],194958:[[17515]],194959:[[33425]],194960:[[33419]],194961:[[33437]],194962:[[21171]],194963:[[33457]],194964:[[33459]],194965:[[33469]],194966:[[33510]],194967:[[158524]],194968:[[33509]],194969:[[33565]],194970:[[33635]],194971:[[33709]],194972:[[33571]],194973:[[33725]],194974:[[33767]],194975:[[33879]],194976:[[33619]],194977:[[33738]],194978:[[33740]],194979:[[33756]],194980:[[158774]],194981:[[159083]],194982:[[158933]],194983:[[17707]],194984:[[34033]],194985:[[34035]],194986:[[34070]],194987:[[160714]],194988:[[34148]],194989:[[159532]],194990:[[17757]],194991:[[17761]],194992:[[159665]],194993:[[159954]],194994:[[17771]],194995:[[34384]],194996:[[34396]],194997:[[34407]],194998:[[34409]],194999:[[34473]],195000:[[34440]],195001:[[34574]],195002:[[34530]],195003:[[34681]],195004:[[34600]],195005:[[34667]],195006:[[34694]],195007:[[17879]],195008:[[34785]],195009:[[34817]],195010:[[17913]],195011:[[34912]],195012:[[34915]],195013:[[161383]],195014:[[35031]],195015:[[35038]],195016:[[17973]],195017:[[35066]],195018:[[13499]],195019:[[161966]],195020:[[162150]],195021:[[18110]],195022:[[18119]],195023:[[35488]],195024:[[35565]],195025:[[35722]],195026:[[35925]],195027:[[162984]],195028:[[36011]],195029:[[36033]],195030:[[36123]],195031:[[36215]],195032:[[163631]],195033:[[133124]],195034:[[36299]],195035:[[36284]],195036:[[36336]],195037:[[133342]],195038:[[36564]],195039:[[36664]],195040:[[165330]],195041:[[165357]],195042:[[37012]],195043:[[37105]],195044:[[37137]],195045:[[165678]],195046:[[37147]],195047:[[37432]],195048:[[37591]],195049:[[37592]],195050:[[37500]],195051:[[37881]],195052:[[37909]],195053:[[166906]],195054:[[38283]],195055:[[18837]],195056:[[38327]],195057:[[167287]],195058:[[18918]],195059:[[38595]],195060:[[23986]],195061:[[38691]],195062:[[168261]],195063:[[168474]],195064:[[19054]],195065:[[19062]],195066:[[38880]],195067:[[168970]],195068:[[19122]],195069:[[169110]],195070:[[38923]],195071:[[38923]]}",64e3:"{64000:[[20999]],64001:[[24230]],64002:[[25299]],64003:[[31958]],64004:[[23429]],64005:[[27934]],64006:[[26292]],64007:[[36667]],64008:[[34892]],64009:[[38477]],64010:[[35211]],64011:[[24275]],64012:[[20800]],64013:[[21952]],64016:[[22618]],64018:[[26228]],64021:[[20958]],64022:[[29482]],64023:[[30410]],64024:[[31036]],64025:[[31070]],64026:[[31077]],64027:[[31119]],64028:[[38742]],64029:[[31934]],64030:[[32701]],64032:[[34322]],64034:[[35576]],64037:[[36920]],64038:[[37117]],64042:[[39151]],64043:[[39164]],64044:[[39208]],64045:[[40372]],64048:[[20398]],64049:[[20711]],64050:[[20813]],64051:[[21193]],64052:[[21220]],64053:[[21329]],64054:[[21917]],64055:[[22022]],64056:[[22120]],64057:[[22592]],64058:[[22696]],64059:[[23652]],64060:[[23662]],64061:[[24724]],64062:[[24936]],64063:[[24974]],64064:[[25074]],64065:[[25935]],64066:[[26082]],64067:[[26257]],64068:[[26757]],64069:[[28023]],64070:[[28186]],64071:[[28450]],64072:[[29038]],64073:[[29227]],64074:[[29730]],64075:[[30865]],64076:[[31038]],64077:[[31049]],64078:[[31048]],64079:[[31056]],64080:[[31062]],64081:[[31069]],64082:[[31117]],64083:[[31118]],64084:[[31296]],64085:[[31361]],64086:[[31680]],64087:[[32244]],64088:[[32265]],64089:[[32321]],64090:[[32626]],64091:[[32773]],64092:[[33261]],64093:[[33401]],64094:[[33401]],64095:[[33879]],64096:[[35088]],64097:[[35222]],64098:[[35585]],64099:[[35641]],64100:[[36051]],64101:[[36104]],64102:[[36790]],64103:[[36920]],64104:[[38627]],64105:[[38911]],64106:[[38971]],64112:[[20006]],64113:[[20917]],64114:[[20840]],64115:[[20352]],64116:[[20805]],64117:[[20864]],64118:[[21191]],64119:[[21242]],64120:[[21917]],64121:[[21845]],64122:[[21913]],64123:[[21986]],64124:[[22618]],64125:[[22707]],64126:[[22852]],64127:[[22868]],64128:[[23138]],64129:[[23336]],64130:[[24274]],64131:[[24281]],64132:[[24425]],64133:[[24493]],64134:[[24792]],64135:[[24910]],64136:[[24840]],64137:[[24974]],64138:[[24928]],64139:[[25074]],64140:[[25140]],64141:[[25540]],64142:[[25628]],64143:[[25682]],64144:[[25942]],64145:[[26228]],64146:[[26391]],64147:[[26395]],64148:[[26454]],64149:[[27513]],64150:[[27578]],64151:[[27969]],64152:[[28379]],64153:[[28363]],64154:[[28450]],64155:[[28702]],64156:[[29038]],64157:[[30631]],64158:[[29237]],64159:[[29359]],64160:[[29482]],64161:[[29809]],64162:[[29958]],64163:[[30011]],64164:[[30237]],64165:[[30239]],64166:[[30410]],64167:[[30427]],64168:[[30452]],64169:[[30538]],64170:[[30528]],64171:[[30924]],64172:[[31409]],64173:[[31680]],64174:[[31867]],64175:[[32091]],64176:[[32244]],64177:[[32574]],64178:[[32773]],64179:[[33618]],64180:[[33775]],64181:[[34681]],64182:[[35137]],64183:[[35206]],64184:[[35222]],64185:[[35519]],64186:[[35576]],64187:[[35531]],64188:[[35585]],64189:[[35582]],64190:[[35565]],64191:[[35641]],64192:[[35722]],64193:[[36104]],64194:[[36664]],64195:[[36978]],64196:[[37273]],64197:[[37494]],64198:[[38524]],64199:[[38627]],64200:[[38742]],64201:[[38875]],64202:[[38911]],64203:[[38923]],64204:[[38971]],64205:[[39698]],64206:[[40860]],64207:[[141386]],64208:[[141380]],64209:[[144341]],64210:[[15261]],64211:[[16408]],64212:[[16441]],64213:[[152137]],64214:[[154832]],64215:[[163539]],64216:[[40771]],64217:[[40846]],195072:[[38953]],195073:[[169398]],195074:[[39138]],195075:[[19251]],195076:[[39209]],195077:[[39335]],195078:[[39362]],195079:[[39422]],195080:[[19406]],195081:[[170800]],195082:[[39698]],195083:[[40000]],195084:[[40189]],195085:[[19662]],195086:[[19693]],195087:[[40295]],195088:[[172238]],195089:[[19704]],195090:[[172293]],195091:[[172558]],195092:[[172689]],195093:[[40635]],195094:[[19798]],195095:[[40697]],195096:[[40702]],195097:[[40709]],195098:[[40719]],195099:[[40726]],195100:[[40763]],195101:[[173568]]}",64256:"{64256:[[102,102],256],64257:[[102,105],256],64258:[[102,108],256],64259:[[102,102,105],256],64260:[[102,102,108],256],64261:[[383,116],256],64262:[[115,116],256],64275:[[1396,1398],256],64276:[[1396,1381],256],64277:[[1396,1387],256],64278:[[1406,1398],256],64279:[[1396,1389],256],64285:[[1497,1460],512],64286:[,26],64287:[[1522,1463],512],64288:[[1506],256],64289:[[1488],256],64290:[[1491],256],64291:[[1492],256],64292:[[1499],256],64293:[[1500],256],64294:[[1501],256],64295:[[1512],256],64296:[[1514],256],64297:[[43],256],64298:[[1513,1473],512],64299:[[1513,1474],512],64300:[[64329,1473],512],64301:[[64329,1474],512],64302:[[1488,1463],512],64303:[[1488,1464],512],64304:[[1488,1468],512],64305:[[1489,1468],512],64306:[[1490,1468],512],64307:[[1491,1468],512],64308:[[1492,1468],512],64309:[[1493,1468],512],64310:[[1494,1468],512],64312:[[1496,1468],512],64313:[[1497,1468],512],64314:[[1498,1468],512],64315:[[1499,1468],512],64316:[[1500,1468],512],64318:[[1502,1468],512],64320:[[1504,1468],512],64321:[[1505,1468],512],64323:[[1507,1468],512],64324:[[1508,1468],512],64326:[[1510,1468],512],64327:[[1511,1468],512],64328:[[1512,1468],512],64329:[[1513,1468],512],64330:[[1514,1468],512],64331:[[1493,1465],512],64332:[[1489,1471],512],64333:[[1499,1471],512],64334:[[1508,1471],512],64335:[[1488,1500],256],64336:[[1649],256],64337:[[1649],256],64338:[[1659],256],64339:[[1659],256],64340:[[1659],256],64341:[[1659],256],64342:[[1662],256],64343:[[1662],256],64344:[[1662],256],64345:[[1662],256],64346:[[1664],256],64347:[[1664],256],64348:[[1664],256],64349:[[1664],256],64350:[[1658],256],64351:[[1658],256],64352:[[1658],256],64353:[[1658],256],64354:[[1663],256],64355:[[1663],256],64356:[[1663],256],64357:[[1663],256],64358:[[1657],256],64359:[[1657],256],64360:[[1657],256],64361:[[1657],256],64362:[[1700],256],64363:[[1700],256],64364:[[1700],256],64365:[[1700],256],64366:[[1702],256],64367:[[1702],256],64368:[[1702],256],64369:[[1702],256],64370:[[1668],256],64371:[[1668],256],64372:[[1668],256],64373:[[1668],256],64374:[[1667],256],64375:[[1667],256],64376:[[1667],256],64377:[[1667],256],64378:[[1670],256],64379:[[1670],256],64380:[[1670],256],64381:[[1670],256],64382:[[1671],256],64383:[[1671],256],64384:[[1671],256],64385:[[1671],256],64386:[[1677],256],64387:[[1677],256],64388:[[1676],256],64389:[[1676],256],64390:[[1678],256],64391:[[1678],256],64392:[[1672],256],64393:[[1672],256],64394:[[1688],256],64395:[[1688],256],64396:[[1681],256],64397:[[1681],256],64398:[[1705],256],64399:[[1705],256],64400:[[1705],256],64401:[[1705],256],64402:[[1711],256],64403:[[1711],256],64404:[[1711],256],64405:[[1711],256],64406:[[1715],256],64407:[[1715],256],64408:[[1715],256],64409:[[1715],256],64410:[[1713],256],64411:[[1713],256],64412:[[1713],256],64413:[[1713],256],64414:[[1722],256],64415:[[1722],256],64416:[[1723],256],64417:[[1723],256],64418:[[1723],256],64419:[[1723],256],64420:[[1728],256],64421:[[1728],256],64422:[[1729],256],64423:[[1729],256],64424:[[1729],256],64425:[[1729],256],64426:[[1726],256],64427:[[1726],256],64428:[[1726],256],64429:[[1726],256],64430:[[1746],256],64431:[[1746],256],64432:[[1747],256],64433:[[1747],256],64467:[[1709],256],64468:[[1709],256],64469:[[1709],256],64470:[[1709],256],64471:[[1735],256],64472:[[1735],256],64473:[[1734],256],64474:[[1734],256],64475:[[1736],256],64476:[[1736],256],64477:[[1655],256],64478:[[1739],256],64479:[[1739],256],64480:[[1733],256],64481:[[1733],256],64482:[[1737],256],64483:[[1737],256],64484:[[1744],256],64485:[[1744],256],64486:[[1744],256],64487:[[1744],256],64488:[[1609],256],64489:[[1609],256],64490:[[1574,1575],256],64491:[[1574,1575],256],64492:[[1574,1749],256],64493:[[1574,1749],256],64494:[[1574,1608],256],64495:[[1574,1608],256],64496:[[1574,1735],256],64497:[[1574,1735],256],64498:[[1574,1734],256],64499:[[1574,1734],256],64500:[[1574,1736],256],64501:[[1574,1736],256],64502:[[1574,1744],256],64503:[[1574,1744],256],64504:[[1574,1744],256],64505:[[1574,1609],256],64506:[[1574,1609],256],64507:[[1574,1609],256],64508:[[1740],256],64509:[[1740],256],64510:[[1740],256],64511:[[1740],256]}",64512:"{64512:[[1574,1580],256],64513:[[1574,1581],256],64514:[[1574,1605],256],64515:[[1574,1609],256],64516:[[1574,1610],256],64517:[[1576,1580],256],64518:[[1576,1581],256],64519:[[1576,1582],256],64520:[[1576,1605],256],64521:[[1576,1609],256],64522:[[1576,1610],256],64523:[[1578,1580],256],64524:[[1578,1581],256],64525:[[1578,1582],256],64526:[[1578,1605],256],64527:[[1578,1609],256],64528:[[1578,1610],256],64529:[[1579,1580],256],64530:[[1579,1605],256],64531:[[1579,1609],256],64532:[[1579,1610],256],64533:[[1580,1581],256],64534:[[1580,1605],256],64535:[[1581,1580],256],64536:[[1581,1605],256],64537:[[1582,1580],256],64538:[[1582,1581],256],64539:[[1582,1605],256],64540:[[1587,1580],256],64541:[[1587,1581],256],64542:[[1587,1582],256],64543:[[1587,1605],256],64544:[[1589,1581],256],64545:[[1589,1605],256],64546:[[1590,1580],256],64547:[[1590,1581],256],64548:[[1590,1582],256],64549:[[1590,1605],256],64550:[[1591,1581],256],64551:[[1591,1605],256],64552:[[1592,1605],256],64553:[[1593,1580],256],64554:[[1593,1605],256],64555:[[1594,1580],256],64556:[[1594,1605],256],64557:[[1601,1580],256],64558:[[1601,1581],256],64559:[[1601,1582],256],64560:[[1601,1605],256],64561:[[1601,1609],256],64562:[[1601,1610],256],64563:[[1602,1581],256],64564:[[1602,1605],256],64565:[[1602,1609],256],64566:[[1602,1610],256],64567:[[1603,1575],256],64568:[[1603,1580],256],64569:[[1603,1581],256],64570:[[1603,1582],256],64571:[[1603,1604],256],64572:[[1603,1605],256],64573:[[1603,1609],256],64574:[[1603,1610],256],64575:[[1604,1580],256],64576:[[1604,1581],256],64577:[[1604,1582],256],64578:[[1604,1605],256],64579:[[1604,1609],256],64580:[[1604,1610],256],64581:[[1605,1580],256],64582:[[1605,1581],256],64583:[[1605,1582],256],64584:[[1605,1605],256],64585:[[1605,1609],256],64586:[[1605,1610],256],64587:[[1606,1580],256],64588:[[1606,1581],256],64589:[[1606,1582],256],64590:[[1606,1605],256],64591:[[1606,1609],256],64592:[[1606,1610],256],64593:[[1607,1580],256],64594:[[1607,1605],256],64595:[[1607,1609],256],64596:[[1607,1610],256],64597:[[1610,1580],256],64598:[[1610,1581],256],64599:[[1610,1582],256],64600:[[1610,1605],256],64601:[[1610,1609],256],64602:[[1610,1610],256],64603:[[1584,1648],256],64604:[[1585,1648],256],64605:[[1609,1648],256],64606:[[32,1612,1617],256],64607:[[32,1613,1617],256],64608:[[32,1614,1617],256],64609:[[32,1615,1617],256],64610:[[32,1616,1617],256],64611:[[32,1617,1648],256],64612:[[1574,1585],256],64613:[[1574,1586],256],64614:[[1574,1605],256],64615:[[1574,1606],256],64616:[[1574,1609],256],64617:[[1574,1610],256],64618:[[1576,1585],256],64619:[[1576,1586],256],64620:[[1576,1605],256],64621:[[1576,1606],256],64622:[[1576,1609],256],64623:[[1576,1610],256],64624:[[1578,1585],256],64625:[[1578,1586],256],64626:[[1578,1605],256],64627:[[1578,1606],256],64628:[[1578,1609],256],64629:[[1578,1610],256],64630:[[1579,1585],256],64631:[[1579,1586],256],64632:[[1579,1605],256],64633:[[1579,1606],256],64634:[[1579,1609],256],64635:[[1579,1610],256],64636:[[1601,1609],256],64637:[[1601,1610],256],64638:[[1602,1609],256],64639:[[1602,1610],256],64640:[[1603,1575],256],64641:[[1603,1604],256],64642:[[1603,1605],256],64643:[[1603,1609],256],64644:[[1603,1610],256],64645:[[1604,1605],256],64646:[[1604,1609],256],64647:[[1604,1610],256],64648:[[1605,1575],256],64649:[[1605,1605],256],64650:[[1606,1585],256],64651:[[1606,1586],256],64652:[[1606,1605],256],64653:[[1606,1606],256],64654:[[1606,1609],256],64655:[[1606,1610],256],64656:[[1609,1648],256],64657:[[1610,1585],256],64658:[[1610,1586],256],64659:[[1610,1605],256],64660:[[1610,1606],256],64661:[[1610,1609],256],64662:[[1610,1610],256],64663:[[1574,1580],256],64664:[[1574,1581],256],64665:[[1574,1582],256],64666:[[1574,1605],256],64667:[[1574,1607],256],64668:[[1576,1580],256],64669:[[1576,1581],256],64670:[[1576,1582],256],64671:[[1576,1605],256],64672:[[1576,1607],256],64673:[[1578,1580],256],64674:[[1578,1581],256],64675:[[1578,1582],256],64676:[[1578,1605],256],64677:[[1578,1607],256],64678:[[1579,1605],256],64679:[[1580,1581],256],64680:[[1580,1605],256],64681:[[1581,1580],256],64682:[[1581,1605],256],64683:[[1582,1580],256],64684:[[1582,1605],256],64685:[[1587,1580],256],64686:[[1587,1581],256],64687:[[1587,1582],256],64688:[[1587,1605],256],64689:[[1589,1581],256],64690:[[1589,1582],256],64691:[[1589,1605],256],64692:[[1590,1580],256],64693:[[1590,1581],256],64694:[[1590,1582],256],64695:[[1590,1605],256],64696:[[1591,1581],256],64697:[[1592,1605],256],64698:[[1593,1580],256],64699:[[1593,1605],256],64700:[[1594,1580],256],64701:[[1594,1605],256],64702:[[1601,1580],256],64703:[[1601,1581],256],64704:[[1601,1582],256],64705:[[1601,1605],256],64706:[[1602,1581],256],64707:[[1602,1605],256],64708:[[1603,1580],256],64709:[[1603,1581],256],64710:[[1603,1582],256],64711:[[1603,1604],256],64712:[[1603,1605],256],64713:[[1604,1580],256],64714:[[1604,1581],256],64715:[[1604,1582],256],64716:[[1604,1605],256],64717:[[1604,1607],256],64718:[[1605,1580],256],64719:[[1605,1581],256],64720:[[1605,1582],256],64721:[[1605,1605],256],64722:[[1606,1580],256],64723:[[1606,1581],256],64724:[[1606,1582],256],64725:[[1606,1605],256],64726:[[1606,1607],256],64727:[[1607,1580],256],64728:[[1607,1605],256],64729:[[1607,1648],256],64730:[[1610,1580],256],64731:[[1610,1581],256],64732:[[1610,1582],256],64733:[[1610,1605],256],64734:[[1610,1607],256],64735:[[1574,1605],256],64736:[[1574,1607],256],64737:[[1576,1605],256],64738:[[1576,1607],256],64739:[[1578,1605],256],64740:[[1578,1607],256],64741:[[1579,1605],256],64742:[[1579,1607],256],64743:[[1587,1605],256],64744:[[1587,1607],256],64745:[[1588,1605],256],64746:[[1588,1607],256],64747:[[1603,1604],256],64748:[[1603,1605],256],64749:[[1604,1605],256],64750:[[1606,1605],256],64751:[[1606,1607],256],64752:[[1610,1605],256],64753:[[1610,1607],256],64754:[[1600,1614,1617],256],64755:[[1600,1615,1617],256],64756:[[1600,1616,1617],256],64757:[[1591,1609],256],64758:[[1591,1610],256],64759:[[1593,1609],256],64760:[[1593,1610],256],64761:[[1594,1609],256],64762:[[1594,1610],256],64763:[[1587,1609],256],64764:[[1587,1610],256],64765:[[1588,1609],256],64766:[[1588,1610],256],64767:[[1581,1609],256]}",64768:"{64768:[[1581,1610],256],64769:[[1580,1609],256],64770:[[1580,1610],256],64771:[[1582,1609],256],64772:[[1582,1610],256],64773:[[1589,1609],256],64774:[[1589,1610],256],64775:[[1590,1609],256],64776:[[1590,1610],256],64777:[[1588,1580],256],64778:[[1588,1581],256],64779:[[1588,1582],256],64780:[[1588,1605],256],64781:[[1588,1585],256],64782:[[1587,1585],256],64783:[[1589,1585],256],64784:[[1590,1585],256],64785:[[1591,1609],256],64786:[[1591,1610],256],64787:[[1593,1609],256],64788:[[1593,1610],256],64789:[[1594,1609],256],64790:[[1594,1610],256],64791:[[1587,1609],256],64792:[[1587,1610],256],64793:[[1588,1609],256],64794:[[1588,1610],256],64795:[[1581,1609],256],64796:[[1581,1610],256],64797:[[1580,1609],256],64798:[[1580,1610],256],64799:[[1582,1609],256],64800:[[1582,1610],256],64801:[[1589,1609],256],64802:[[1589,1610],256],64803:[[1590,1609],256],64804:[[1590,1610],256],64805:[[1588,1580],256],64806:[[1588,1581],256],64807:[[1588,1582],256],64808:[[1588,1605],256],64809:[[1588,1585],256],64810:[[1587,1585],256],64811:[[1589,1585],256],64812:[[1590,1585],256],64813:[[1588,1580],256],64814:[[1588,1581],256],64815:[[1588,1582],256],64816:[[1588,1605],256],64817:[[1587,1607],256],64818:[[1588,1607],256],64819:[[1591,1605],256],64820:[[1587,1580],256],64821:[[1587,1581],256],64822:[[1587,1582],256],64823:[[1588,1580],256],64824:[[1588,1581],256],64825:[[1588,1582],256],64826:[[1591,1605],256],64827:[[1592,1605],256],64828:[[1575,1611],256],64829:[[1575,1611],256],64848:[[1578,1580,1605],256],64849:[[1578,1581,1580],256],64850:[[1578,1581,1580],256],64851:[[1578,1581,1605],256],64852:[[1578,1582,1605],256],64853:[[1578,1605,1580],256],64854:[[1578,1605,1581],256],64855:[[1578,1605,1582],256],64856:[[1580,1605,1581],256],64857:[[1580,1605,1581],256],64858:[[1581,1605,1610],256],64859:[[1581,1605,1609],256],64860:[[1587,1581,1580],256],64861:[[1587,1580,1581],256],64862:[[1587,1580,1609],256],64863:[[1587,1605,1581],256],64864:[[1587,1605,1581],256],64865:[[1587,1605,1580],256],64866:[[1587,1605,1605],256],64867:[[1587,1605,1605],256],64868:[[1589,1581,1581],256],64869:[[1589,1581,1581],256],64870:[[1589,1605,1605],256],64871:[[1588,1581,1605],256],64872:[[1588,1581,1605],256],64873:[[1588,1580,1610],256],64874:[[1588,1605,1582],256],64875:[[1588,1605,1582],256],64876:[[1588,1605,1605],256],64877:[[1588,1605,1605],256],64878:[[1590,1581,1609],256],64879:[[1590,1582,1605],256],64880:[[1590,1582,1605],256],64881:[[1591,1605,1581],256],64882:[[1591,1605,1581],256],64883:[[1591,1605,1605],256],64884:[[1591,1605,1610],256],64885:[[1593,1580,1605],256],64886:[[1593,1605,1605],256],64887:[[1593,1605,1605],256],64888:[[1593,1605,1609],256],64889:[[1594,1605,1605],256],64890:[[1594,1605,1610],256],64891:[[1594,1605,1609],256],64892:[[1601,1582,1605],256],64893:[[1601,1582,1605],256],64894:[[1602,1605,1581],256],64895:[[1602,1605,1605],256],64896:[[1604,1581,1605],256],64897:[[1604,1581,1610],256],64898:[[1604,1581,1609],256],64899:[[1604,1580,1580],256],64900:[[1604,1580,1580],256],64901:[[1604,1582,1605],256],64902:[[1604,1582,1605],256],64903:[[1604,1605,1581],256],64904:[[1604,1605,1581],256],64905:[[1605,1581,1580],256],64906:[[1605,1581,1605],256],64907:[[1605,1581,1610],256],64908:[[1605,1580,1581],256],64909:[[1605,1580,1605],256],64910:[[1605,1582,1580],256],64911:[[1605,1582,1605],256],64914:[[1605,1580,1582],256],64915:[[1607,1605,1580],256],64916:[[1607,1605,1605],256],64917:[[1606,1581,1605],256],64918:[[1606,1581,1609],256],64919:[[1606,1580,1605],256],64920:[[1606,1580,1605],256],64921:[[1606,1580,1609],256],64922:[[1606,1605,1610],256],64923:[[1606,1605,1609],256],64924:[[1610,1605,1605],256],64925:[[1610,1605,1605],256],64926:[[1576,1582,1610],256],64927:[[1578,1580,1610],256],64928:[[1578,1580,1609],256],64929:[[1578,1582,1610],256],64930:[[1578,1582,1609],256],64931:[[1578,1605,1610],256],64932:[[1578,1605,1609],256],64933:[[1580,1605,1610],256],64934:[[1580,1581,1609],256],64935:[[1580,1605,1609],256],64936:[[1587,1582,1609],256],64937:[[1589,1581,1610],256],64938:[[1588,1581,1610],256],64939:[[1590,1581,1610],256],64940:[[1604,1580,1610],256],64941:[[1604,1605,1610],256],64942:[[1610,1581,1610],256],64943:[[1610,1580,1610],256],64944:[[1610,1605,1610],256],64945:[[1605,1605,1610],256],64946:[[1602,1605,1610],256],64947:[[1606,1581,1610],256],64948:[[1602,1605,1581],256],64949:[[1604,1581,1605],256],64950:[[1593,1605,1610],256],64951:[[1603,1605,1610],256],64952:[[1606,1580,1581],256],64953:[[1605,1582,1610],256],64954:[[1604,1580,1605],256],64955:[[1603,1605,1605],256],64956:[[1604,1580,1605],256],64957:[[1606,1580,1581],256],64958:[[1580,1581,1610],256],64959:[[1581,1580,1610],256],64960:[[1605,1580,1610],256],64961:[[1601,1605,1610],256],64962:[[1576,1581,1610],256],64963:[[1603,1605,1605],256],64964:[[1593,1580,1605],256],64965:[[1589,1605,1605],256],64966:[[1587,1582,1610],256],64967:[[1606,1580,1610],256],65008:[[1589,1604,1746],256],65009:[[1602,1604,1746],256],65010:[[1575,1604,1604,1607],256],65011:[[1575,1603,1576,1585],256],65012:[[1605,1581,1605,1583],256],65013:[[1589,1604,1593,1605],256],65014:[[1585,1587,1608,1604],256],65015:[[1593,1604,1610,1607],256],65016:[[1608,1587,1604,1605],256],65017:[[1589,1604,1609],256],65018:[[1589,1604,1609,32,1575,1604,1604,1607,32,1593,1604,1610,1607,32,1608,1587,1604,1605],256],65019:[[1580,1604,32,1580,1604,1575,1604,1607],256],65020:[[1585,1740,1575,1604],256]}",65024:"{65040:[[44],256],65041:[[12289],256],65042:[[12290],256],65043:[[58],256],65044:[[59],256],65045:[[33],256],65046:[[63],256],65047:[[12310],256],65048:[[12311],256],65049:[[8230],256],65056:[,230],65057:[,230],65058:[,230],65059:[,230],65060:[,230],65061:[,230],65062:[,230],65072:[[8229],256],65073:[[8212],256],65074:[[8211],256],65075:[[95],256],65076:[[95],256],65077:[[40],256],65078:[[41],256],65079:[[123],256],65080:[[125],256],65081:[[12308],256],65082:[[12309],256],65083:[[12304],256],65084:[[12305],256],65085:[[12298],256],65086:[[12299],256],65087:[[12296],256],65088:[[12297],256],65089:[[12300],256],65090:[[12301],256],65091:[[12302],256],65092:[[12303],256],65095:[[91],256],65096:[[93],256],65097:[[8254],256],65098:[[8254],256],65099:[[8254],256],65100:[[8254],256],65101:[[95],256],65102:[[95],256],65103:[[95],256],65104:[[44],256],65105:[[12289],256],65106:[[46],256],65108:[[59],256],65109:[[58],256],65110:[[63],256],65111:[[33],256],65112:[[8212],256],65113:[[40],256],65114:[[41],256],65115:[[123],256],65116:[[125],256],65117:[[12308],256],65118:[[12309],256],65119:[[35],256],65120:[[38],256],65121:[[42],256],65122:[[43],256],65123:[[45],256],65124:[[60],256],65125:[[62],256],65126:[[61],256],65128:[[92],256],65129:[[36],256],65130:[[37],256],65131:[[64],256],65136:[[32,1611],256],65137:[[1600,1611],256],65138:[[32,1612],256],65140:[[32,1613],256],65142:[[32,1614],256],65143:[[1600,1614],256],65144:[[32,1615],256],65145:[[1600,1615],256],65146:[[32,1616],256],65147:[[1600,1616],256],65148:[[32,1617],256],65149:[[1600,1617],256],65150:[[32,1618],256],65151:[[1600,1618],256],65152:[[1569],256],65153:[[1570],256],65154:[[1570],256],65155:[[1571],256],65156:[[1571],256],65157:[[1572],256],65158:[[1572],256],65159:[[1573],256],65160:[[1573],256],65161:[[1574],256],65162:[[1574],256],65163:[[1574],256],65164:[[1574],256],65165:[[1575],256],65166:[[1575],256],65167:[[1576],256],65168:[[1576],256],65169:[[1576],256],65170:[[1576],256],65171:[[1577],256],65172:[[1577],256],65173:[[1578],256],65174:[[1578],256],65175:[[1578],256],65176:[[1578],256],65177:[[1579],256],65178:[[1579],256],65179:[[1579],256],65180:[[1579],256],65181:[[1580],256],65182:[[1580],256],65183:[[1580],256],65184:[[1580],256],65185:[[1581],256],65186:[[1581],256],65187:[[1581],256],65188:[[1581],256],65189:[[1582],256],65190:[[1582],256],65191:[[1582],256],65192:[[1582],256],65193:[[1583],256],65194:[[1583],256],65195:[[1584],256],65196:[[1584],256],65197:[[1585],256],65198:[[1585],256],65199:[[1586],256],65200:[[1586],256],65201:[[1587],256],65202:[[1587],256],65203:[[1587],256],65204:[[1587],256],65205:[[1588],256],65206:[[1588],256],65207:[[1588],256],65208:[[1588],256],65209:[[1589],256],65210:[[1589],256],65211:[[1589],256],65212:[[1589],256],65213:[[1590],256],65214:[[1590],256],65215:[[1590],256],65216:[[1590],256],65217:[[1591],256],65218:[[1591],256],65219:[[1591],256],65220:[[1591],256],65221:[[1592],256],65222:[[1592],256],65223:[[1592],256],65224:[[1592],256],65225:[[1593],256],65226:[[1593],256],65227:[[1593],256],65228:[[1593],256],65229:[[1594],256],65230:[[1594],256],65231:[[1594],256],65232:[[1594],256],65233:[[1601],256],65234:[[1601],256],65235:[[1601],256],65236:[[1601],256],65237:[[1602],256],65238:[[1602],256],65239:[[1602],256],65240:[[1602],256],65241:[[1603],256],65242:[[1603],256],65243:[[1603],256],65244:[[1603],256],65245:[[1604],256],65246:[[1604],256],65247:[[1604],256],65248:[[1604],256],65249:[[1605],256],65250:[[1605],256],65251:[[1605],256],65252:[[1605],256],65253:[[1606],256],65254:[[1606],256],65255:[[1606],256],65256:[[1606],256],65257:[[1607],256],65258:[[1607],256],65259:[[1607],256],65260:[[1607],256],65261:[[1608],256],65262:[[1608],256],65263:[[1609],256],65264:[[1609],256],65265:[[1610],256],65266:[[1610],256],65267:[[1610],256],65268:[[1610],256],65269:[[1604,1570],256],65270:[[1604,1570],256],65271:[[1604,1571],256],65272:[[1604,1571],256],65273:[[1604,1573],256],65274:[[1604,1573],256],65275:[[1604,1575],256],65276:[[1604,1575],256]}",65280:"{65281:[[33],256],65282:[[34],256],65283:[[35],256],65284:[[36],256],65285:[[37],256],65286:[[38],256],65287:[[39],256],65288:[[40],256],65289:[[41],256],65290:[[42],256],65291:[[43],256],65292:[[44],256],65293:[[45],256],65294:[[46],256],65295:[[47],256],65296:[[48],256],65297:[[49],256],65298:[[50],256],65299:[[51],256],65300:[[52],256],65301:[[53],256],65302:[[54],256],65303:[[55],256],65304:[[56],256],65305:[[57],256],65306:[[58],256],65307:[[59],256],65308:[[60],256],65309:[[61],256],65310:[[62],256],65311:[[63],256],65312:[[64],256],65313:[[65],256],65314:[[66],256],65315:[[67],256],65316:[[68],256],65317:[[69],256],65318:[[70],256],65319:[[71],256],65320:[[72],256],65321:[[73],256],65322:[[74],256],65323:[[75],256],65324:[[76],256],65325:[[77],256],65326:[[78],256],65327:[[79],256],65328:[[80],256],65329:[[81],256],65330:[[82],256],65331:[[83],256],65332:[[84],256],65333:[[85],256],65334:[[86],256],65335:[[87],256],65336:[[88],256],65337:[[89],256],65338:[[90],256],65339:[[91],256],65340:[[92],256],65341:[[93],256],65342:[[94],256],65343:[[95],256],65344:[[96],256],65345:[[97],256],65346:[[98],256],65347:[[99],256],65348:[[100],256],65349:[[101],256],65350:[[102],256],65351:[[103],256],65352:[[104],256],65353:[[105],256],65354:[[106],256],65355:[[107],256],65356:[[108],256],65357:[[109],256],65358:[[110],256],65359:[[111],256],65360:[[112],256],65361:[[113],256],65362:[[114],256],65363:[[115],256],65364:[[116],256],65365:[[117],256],65366:[[118],256],65367:[[119],256],65368:[[120],256],65369:[[121],256],65370:[[122],256],65371:[[123],256],65372:[[124],256],65373:[[125],256],65374:[[126],256],65375:[[10629],256],65376:[[10630],256],65377:[[12290],256],65378:[[12300],256],65379:[[12301],256],65380:[[12289],256],65381:[[12539],256],65382:[[12530],256],65383:[[12449],256],65384:[[12451],256],65385:[[12453],256],65386:[[12455],256],65387:[[12457],256],65388:[[12515],256],65389:[[12517],256],65390:[[12519],256],65391:[[12483],256],65392:[[12540],256],65393:[[12450],256],65394:[[12452],256],65395:[[12454],256],65396:[[12456],256],65397:[[12458],256],65398:[[12459],256],65399:[[12461],256],65400:[[12463],256],65401:[[12465],256],65402:[[12467],256],65403:[[12469],256],65404:[[12471],256],65405:[[12473],256],65406:[[12475],256],65407:[[12477],256],65408:[[12479],256],65409:[[12481],256],65410:[[12484],256],65411:[[12486],256],65412:[[12488],256],65413:[[12490],256],65414:[[12491],256],65415:[[12492],256],65416:[[12493],256],65417:[[12494],256],65418:[[12495],256],65419:[[12498],256],65420:[[12501],256],65421:[[12504],256],65422:[[12507],256],65423:[[12510],256],65424:[[12511],256],65425:[[12512],256],65426:[[12513],256],65427:[[12514],256],65428:[[12516],256],65429:[[12518],256],65430:[[12520],256],65431:[[12521],256],65432:[[12522],256],65433:[[12523],256],65434:[[12524],256],65435:[[12525],256],65436:[[12527],256],65437:[[12531],256],65438:[[12441],256],65439:[[12442],256],65440:[[12644],256],65441:[[12593],256],65442:[[12594],256],65443:[[12595],256],65444:[[12596],256],65445:[[12597],256],65446:[[12598],256],65447:[[12599],256],65448:[[12600],256],65449:[[12601],256],65450:[[12602],256],65451:[[12603],256],65452:[[12604],256],65453:[[12605],256],65454:[[12606],256],65455:[[12607],256],65456:[[12608],256],65457:[[12609],256],65458:[[12610],256],65459:[[12611],256],65460:[[12612],256],65461:[[12613],256],65462:[[12614],256],65463:[[12615],256],65464:[[12616],256],65465:[[12617],256],65466:[[12618],256],65467:[[12619],256],65468:[[12620],256],65469:[[12621],256],65470:[[12622],256],65474:[[12623],256],65475:[[12624],256],65476:[[12625],256],65477:[[12626],256],65478:[[12627],256],65479:[[12628],256],65482:[[12629],256],65483:[[12630],256],65484:[[12631],256],65485:[[12632],256],65486:[[12633],256],65487:[[12634],256],65490:[[12635],256],65491:[[12636],256],65492:[[12637],256],65493:[[12638],256],65494:[[12639],256],65495:[[12640],256],65498:[[12641],256],65499:[[12642],256],65500:[[12643],256],65504:[[162],256],65505:[[163],256],65506:[[172],256],65507:[[175],256],65508:[[166],256],65509:[[165],256],65510:[[8361],256],65512:[[9474],256],65513:[[8592],256],65514:[[8593],256],65515:[[8594],256],65516:[[8595],256],65517:[[9632],256],65518:[[9675],256]}"};
var root="object"==typeof exports?exports:{};"object"==typeof window&&(window.unorm=root),root.nfc=UNorm.nfc,root.nfd=UNorm.nfd,root.nfkc=UNorm.nfkc,root.nfkd=UNorm.nfkd}()},{}]},{},[]),function(t){if("function"==typeof bootstrap)bootstrap("when",t);else if("object"==typeof exports)module.exports=t();else if("function"==typeof define&&define.amd)define(t);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeWhen=t}else"undefined"!=typeof window?window.When=t():global.When=t()}(function(){var t;return function(t,e,n){function i(n,o){if(!e[n]){if(!t[n]){var s="function"==typeof require&&require;if(!o&&s)return s(n,!0);if(r)return r(n,!0);throw new Error("Cannot find module '"+n+"'")}var a=e[n]={exports:{}};t[n][0].call(a.exports,function(e){var r=t[n][1][e];return i(r?r:e)},a,a.exports)}return e[n].exports}for(var r="function"==typeof require&&require,o=0;o<n.length;o++)i(n[o]);return i}({1:[function(t,e){var n=t("when");n.fn=t("when/function"),n.nodefn=t("when/node/function"),n.sequence=t("when/sequence"),n.pipeline=t("when/pipeline"),n.parallel=t("when/parallel"),e.exports=n},{"when/function":2,"when/sequence":3,"when/parallel":4,"when/node/function":5,"when/pipeline":6,when:7}],2:[function(e,n){!function(){/** @license MIT License (c) copyright 2013 original author or authors */
!function(t){t(function(t){function e(t,e){return n(t,this,e)}function n(t,e,n){return s.all(n||[],function(n){return t.apply(e,n)})}function i(t){return n(t,this,a.call(arguments,1))}function r(t){var e=a.call(arguments,1);return function(){return n(t,this,e.concat(a.call(arguments)))}}function o(t){var e=a.call(arguments,1);return function(){var i,r,o;return i=this,r=a.call(arguments),o=n(t,i,r),s.reduce(e,function(t,e){return e.call(i,t)},o)}}var s,a;return s=t("./when"),a=[].slice,{apply:e,call:i,lift:r,bind:r,compose:o}})}("function"==typeof t&&t.amd?t:function(t){n.exports=t(e)})}()},{"./when":7}],3:[function(e,n){/** @license MIT License (c) copyright 2011-2013 original author or authors */
!function(t){t(function(t){var e,n;return e=t("./when"),n=Array.prototype.slice,function(t){function i(t){return r.push(t),r}var r=[];return e.all(n.call(arguments,1)).then(function(n){return e.reduce(t,function(t,r){return e(r.apply(null,n),i)},r)})}})}("function"==typeof t&&t.amd?t:function(t){n.exports=t(e)})},{"./when":7}],4:[function(e,n){/** @license MIT License (c) copyright 2011-2013 original author or authors */
!function(t){t(function(t){var e,n;return e=t("./when"),n=Array.prototype.slice,function(t){return e.all(n.call(arguments,1)).then(function(n){return e.map(t,function(t){return t.apply(null,n)})})}})}("function"==typeof t&&t.amd?t:function(t){n.exports=t(e)})},{"./when":7}],8:[function(t,e){var n=e.exports={};n.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};if(e){var n=[];return window.addEventListener("message",function(t){if(t.source===window&&"process-tick"===t.data&&(t.stopPropagation(),n.length>0)){var e=n.shift();e()}},!0),function(t){n.push(t),window.postMessage("process-tick","*")}}return function(t){setTimeout(t,0)}}(),n.title="browser",n.browser=!0,n.env={},n.argv=[],n.binding=function(){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(){throw new Error("process.chdir is not supported")}},{}],7:[function(e,n){!function(i){/** @license MIT License (c) copyright 2011-2013 original author or authors */
!function(t,e){"use strict";t(function(t){function n(t,e,n,i){return r(t).then(e,n,i)}function r(t){return t instanceof o?t:s(t)}function o(t,e){this._message=t,this.inspect=e}function s(t){return u(function(e){e(t)})}function a(t){return n(t,f)}function l(){function t(t,r,o){e.resolve=e.resolver.resolve=function(e){return i?s(e):(i=!0,t(e),n)},e.reject=e.resolver.reject=function(t){return i?s(f(t)):(i=!0,r(t),n)},e.notify=e.resolver.notify=function(t){return o(t),t}}var e,n,i;return e={promise:Y,resolve:Y,reject:Y,notify:Y,resolver:{resolve:Y,reject:Y,notify:Y}},e.promise=n=u(t),e}function u(t){return c(t,q.PromiseStatus&&q.PromiseStatus())}function c(t,e){function n(t,e,n,i){function r(r){r._message(t,e,n,i)}c?c.push(r):D(function(){r(u)})}function i(){return u?u.inspect():N()}function r(t){if(c){var n=c;c=Y,D(function(){u=g(l,t),e&&w(u,e),h(n,u)})}}function s(t){r(f(t))}function a(t){if(c){var e=c;D(function(){h(e,m(t))})}}var l,u,c=[];l=new o(n,i),l._status=e;try{t(r,s,a)}catch(p){s(p)}return l}function h(t,e){for(var n=0;n<t.length;n++)t[n](e)}function p(t){return d(new y(t),function(){return A(t)})}function f(t){return d(new b(t),function(){return O(t)})}function d(t,e){return new o(function(e,n,i){try{i(t[e].apply(t,n))}catch(r){i(f(r))}},e)}function m(t){return new o(function(e,n,i,r){var o=n[2];try{r("function"==typeof o?o(t):t)}catch(s){r(s)}})}function g(t,e){if(e===t)return f(new TypeError);if(e instanceof o)return e;try{var n=e===Object(e)&&e.then;return"function"==typeof n?v(n,e):p(e)}catch(i){return f(i)}}function v(t,e){return u(function(n,i){R(t,e,n,i)})}function y(t){this.value=t}function b(t){this.reason=t}function w(t,e){function n(){e.fulfilled()}function i(t){e.rejected(t)}t.then(n,i)}function _(t){return t&&"function"==typeof t.then}function x(t,e,i,r,o){return n(t,function(t){function s(i,r,o){function s(t){f(t)}function a(t){p(t)}var l,u,c,h,p,f,d,m;if(d=t.length>>>0,l=Math.max(0,Math.min(e,d)),c=[],u=d-l+1,h=[],l)for(f=function(t){h.push(t),--u||(p=f=L,r(h))},p=function(t){c.push(t),--l||(p=f=L,i(c))},m=0;d>m;++m)m in t&&n(t[m],a,s,o);else i(c)}return u(s).then(i,r,o)})}function S(t,e,n,i){function r(t){return e?e(t[0]):t[0]}return x(t,1,r,n,i)}function k(t,e,n,i){return M(t,L).then(e,n,i)}function C(){return M(arguments,L)}function E(t){return M(t,A,O)}function T(t,e){return M(t,e)}function M(t,e,i){return n(t,function(t){function r(r,o,s){function a(t,a){n(t,e,i).then(function(t){l[a]=t,--c||r(l)},o,s)}var l,u,c,h;if(c=u=t.length>>>0,l=[],!c)return r(l),void 0;for(h=0;u>h;h++)h in t?a(t[h],h):--c}return c(r)})}function P(t,e){var i=R(z,arguments,1);return n(t,function(t){var r;return r=t.length,i[0]=function(t,i,o){return n(t,function(t){return n(i,function(n){return e(t,n,o,r)})})},$.apply(t,i)})}function A(t){return{state:"fulfilled",value:t}}function O(t){return{state:"rejected",reason:t}}function N(){return{state:"pending"}}function D(t){1===F.push(t)&&B(I)}function I(){h(F),F=[]}function L(t){return t}n.promise=u,n.resolve=s,n.reject=a,n.defer=l,n.join=C,n.all=k,n.map=T,n.reduce=P,n.settle=E,n.any=S,n.some=x,n.isPromise=_,n.isPromiseLike=_,o.prototype={then:function(){var t,e;return t=arguments,e=this._message,c(function(n,i,r){e("when",t,n,r)},this._status&&this._status.observed())},otherwise:function(t){return this.then(Y,t)},ensure:function(t){function e(){return s(t())}return"function"==typeof t?this.then(e,e).yield(this):this},yield:function(t){return this.then(function(){return t})},tap:function(t){return this.then(t).yield(this)},spread:function(t){return this.then(function(e){return k(e,function(e){return t.apply(Y,e)})})},always:function(t,e){return this.then(t,t,e)}},y.prototype.when=function(t){return"function"==typeof t?t(this.value):this.value},b.prototype.when=function(t,e){if("function"==typeof e)return e(this.reason);throw this.reason};var $,z,R,B,F,V,j,U,H,q,W,J,Y;if(W=t,F=[],V=e.setTimeout,q="undefined"!=typeof console?console:n,"object"==typeof i&&i.nextTick)B=i.nextTick;else if(J=e.MutationObserver||e.WebKitMutationObserver)B=function(t,e,n){var i=t.createElement("div");return new e(n).observe(i,{attributes:!0}),function(){i.setAttribute("x","x")}}(document,J,I);else try{B=W("vertx").runOnLoop||W("vertx").runOnContext}catch(K){B=function(t){V(t,0)}}return j=Function.prototype,U=j.call,R=j.bind?U.bind(U):function(t,e){return t.apply(e,z.call(arguments,2))},H=[],z=H.slice,$=H.reduce||function(t){var e,n,i,r,o;if(o=0,e=Object(this),r=e.length>>>0,n=arguments,n.length<=1)for(;;){if(o in e){i=e[o++];break}if(++o>=r)throw new TypeError}else i=n[1];for(;r>o;++o)o in e&&(i=t(i,e[o],o,e));return i},n})}("function"==typeof t&&t.amd?t:function(t){n.exports=t(e)},this)}(e("__browserify_process"))},{__browserify_process:8}],6:[function(e,n){/** @license MIT License (c) copyright 2011-2013 original author or authors */
!function(t){t(function(t){var e,n;return e=t("./when"),n=Array.prototype.slice,function(t){var i=function(t,e){return i=function(t,e){return e(t)},e.apply(null,t)};return e.all(n.call(arguments,1)).then(function(n){return e.reduce(t,function(t,e){return i(t,e)},n)})}})}("function"==typeof t&&t.amd?t:function(t){n.exports=t(e)})},{"./when":7}],5:[function(e,n){/** @license MIT License (c) copyright 2013 original author or authors */
!function(t){t(function(t){function e(t,e){return n(t,this,e)}function n(t,e,n){return l.all(n||[]).then(function(n){var i=l.defer(),r=o(i.resolver);return t.apply(e,n.concat(r)),i.promise})}function i(t){return n(t,this,u.call(arguments,1))}function r(t){var e=u.call(arguments,1);return function(){return n(t,this,e.concat(u.call(arguments)))}}function o(t){return function(e,n){e?t.reject(e):arguments.length>2?t.resolve(u.call(arguments,1)):t.resolve(n)}}function s(t,e){function n(t){return e(null,t)}return l(t,e&&n,e)}function a(t){return function(e){return s(e,t)}}var l,u;return l=t("../when"),u=[].slice,{apply:e,call:i,lift:r,bind:r,createCallback:o,bindCallback:s,liftCallback:a}})}("function"==typeof t&&t.amd?t:function(t){n.exports=t(e)})},{"../when":7}]},{},[1])(1)});var XRegExp;if(XRegExp)throw Error("can't load XRegExp twice in the same frame");!function(){function t(t,n){if(!XRegExp.isRegExp(t))throw TypeError("type RegExp expected");var i=t._xregexp;return t=XRegExp(t.source,e(t)+(n||"")),i&&(t._xregexp={source:i.source,captureNames:i.captureNames?i.captureNames.slice(0):null}),t}function e(t){return(t.global?"g":"")+(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.extended?"x":"")+(t.sticky?"y":"")}function n(t,e,n,i){var r,o,s,u=l.length;a=!0;try{for(;u--;)if(s=l[u],n&s.scope&&(!s.trigger||s.trigger.call(i))&&(s.pattern.lastIndex=e,o=s.pattern.exec(t),o&&o.index===e)){r={output:s.handler.call(i,o,n),match:o};break}}catch(c){throw c}finally{a=!1}return r}function i(t,e,n){if(Array.prototype.indexOf)return t.indexOf(e,n);for(var i=n||0;i<t.length;i++)if(t[i]===e)return i;return-1}XRegExp=function(e,i){var r,s,l,c,h,p=[],f=XRegExp.OUTSIDE_CLASS,m=0;if(XRegExp.isRegExp(e)){if(void 0!==i)throw TypeError("can't supply flags when constructing one RegExp from another");return t(e)}if(a)throw Error("can't call the XRegExp constructor within token definition functions");for(i=i||"",r={hasNamedCapture:!1,captureNames:[],hasFlag:function(t){return i.indexOf(t)>-1},setFlag:function(t){i+=t}};m<e.length;)s=n(e,m,f,r),s?(p.push(s.output),m+=s.match[0].length||1):(l=u.exec.call(d[f],e.slice(m)))?(p.push(l[0]),m+=l[0].length):(c=e.charAt(m),"["===c?f=XRegExp.INSIDE_CLASS:"]"===c&&(f=XRegExp.OUTSIDE_CLASS),p.push(c),m++);return h=RegExp(p.join(""),u.replace.call(i,o,"")),h._xregexp={source:e,captureNames:r.hasNamedCapture?r.captureNames:null},h},XRegExp.version="1.5.0",XRegExp.INSIDE_CLASS=1,XRegExp.OUTSIDE_CLASS=2;var r=/\$(?:(\d\d?|[$&`'])|{([$\w]+)})/g,o=/[^gimy]+|([\s\S])(?=[\s\S]*\1)/g,s=/^(?:[?*+]|{\d+(?:,\d*)?})\??/,a=!1,l=[],u={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:String.prototype.match,replace:String.prototype.replace,split:String.prototype.split},c=void 0===u.exec.call(/()??/,"")[1],h=function(){var t=/^/g;return u.test.call(t,""),!t.lastIndex}(),p=function(){var t=/x/g;return u.replace.call("x",t,""),!t.lastIndex}(),f=void 0!==RegExp.prototype.sticky,d={};d[XRegExp.INSIDE_CLASS]=/^(?:\\(?:[0-3][0-7]{0,2}|[4-7][0-7]?|x[\dA-Fa-f]{2}|u[\dA-Fa-f]{4}|c[A-Za-z]|[\s\S]))/,d[XRegExp.OUTSIDE_CLASS]=/^(?:\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9]\d*|x[\dA-Fa-f]{2}|u[\dA-Fa-f]{4}|c[A-Za-z]|[\s\S])|\(\?[:=!]|[?*+]\?|{\d+(?:,\d*)?}\??)/,XRegExp.addToken=function(e,n,i,r){l.push({pattern:t(e,"g"+(f?"y":"")),handler:n,scope:i||XRegExp.OUTSIDE_CLASS,trigger:r||null})},XRegExp.cache=function(t,e){var n=t+"/"+(e||"");return XRegExp.cache[n]||(XRegExp.cache[n]=XRegExp(t,e))},XRegExp.copyAsGlobal=function(e){return t(e,"g")},XRegExp.escape=function(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},XRegExp.execAt=function(e,n,i,r){n=t(n,"g"+(r&&f?"y":"")),n.lastIndex=i=i||0;var o=n.exec(e);return r?o&&o.index===i?o:null:o},XRegExp.freezeTokens=function(){XRegExp.addToken=function(){throw Error("can't run addToken after freezeTokens")}},XRegExp.isRegExp=function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},XRegExp.iterate=function(e,n,i,r){for(var o,s=t(n,"g"),a=-1;o=s.exec(e);)i.call(r,o,++a,e,s),s.lastIndex===o.index&&s.lastIndex++;n.global&&(n.lastIndex=0)},XRegExp.matchChain=function(e,n){return function i(e,r){var o,s=n[r].regex?n[r]:{regex:n[r]},a=t(s.regex,"g"),l=[];for(o=0;o<e.length;o++)XRegExp.iterate(e[o],a,function(t){l.push(s.backref?t[s.backref]||"":t[0])});return r!==n.length-1&&l.length?i(l,r+1):l}([e],0)},RegExp.prototype.apply=function(t,e){return this.exec(e[0])},RegExp.prototype.call=function(t,e){return this.exec(e)},RegExp.prototype.exec=function(t){var n,r,o=u.exec.apply(this,arguments);if(o){if(!c&&o.length>1&&i(o,"")>-1&&(r=RegExp(this.source,u.replace.call(e(this),"g","")),u.replace.call(t.slice(o.index),r,function(){for(var t=1;t<arguments.length-2;t++)void 0===arguments[t]&&(o[t]=void 0)})),this._xregexp&&this._xregexp.captureNames)for(var s=1;s<o.length;s++)n=this._xregexp.captureNames[s-1],n&&(o[n]=o[s]);!h&&this.global&&!o[0].length&&this.lastIndex>o.index&&this.lastIndex--}return o},h||(RegExp.prototype.test=function(t){var e=u.exec.call(this,t);return e&&this.global&&!e[0].length&&this.lastIndex>e.index&&this.lastIndex--,!!e}),String.prototype.match=function(t){if(XRegExp.isRegExp(t)||(t=RegExp(t)),t.global){var e=u.match.apply(this,arguments);return t.lastIndex=0,e}return t.exec(this)},String.prototype.replace=function(t,e){var n,o,s,a=XRegExp.isRegExp(t);return a&&"string"==typeof e.valueOf()&&-1===e.indexOf("${")&&p?u.replace.apply(this,arguments):(a?t._xregexp&&(n=t._xregexp.captureNames):t+="","function"==typeof e?o=u.replace.call(this,t,function(){if(n){arguments[0]=new String(arguments[0]);for(var i=0;i<n.length;i++)n[i]&&(arguments[0][n[i]]=arguments[i+1])}return a&&t.global&&(t.lastIndex=arguments[arguments.length-2]+arguments[0].length),e.apply(null,arguments)}):(s=this+"",o=u.replace.call(s,t,function(){var t=arguments;return u.replace.call(e,r,function(e,r,o){if(!r){var s=+o;return s<=t.length-3?t[s]:(s=n?i(n,o):-1,s>-1?t[s+1]:e)}switch(r){case"$":return"$";case"&":return t[0];case"`":return t[t.length-1].slice(0,t[t.length-2]);case"'":return t[t.length-1].slice(t[t.length-2]+t[0].length);default:var a="";if(r=+r,!r)return e;for(;r>t.length-3;)a=String.prototype.slice.call(r,-1)+a,r=Math.floor(r/10);return(r?t[r]||"":"$")+a}})})),a&&t.global&&(t.lastIndex=0),o)},String.prototype.split=function(t,e){if(!XRegExp.isRegExp(t))return u.split.apply(this,arguments);var n,i,r=this+"",o=[],s=0;if(void 0===e||0>+e)e=1/0;else if(e=Math.floor(+e),!e)return[];for(t=XRegExp.copyAsGlobal(t);(n=t.exec(r))&&!(t.lastIndex>s&&(o.push(r.slice(s,n.index)),n.length>1&&n.index<r.length&&Array.prototype.push.apply(o,n.slice(1)),i=n[0].length,s=t.lastIndex,o.length>=e));)t.lastIndex===n.index&&t.lastIndex++;return s===r.length?(!u.test.call(t,"")||i)&&o.push(""):o.push(r.slice(s)),o.length>e?o.slice(0,e):o},XRegExp.addToken(/\(\?#[^)]*\)/,function(t){return u.test.call(s,t.input.slice(t.index+t[0].length))?"":"(?:)"}),XRegExp.addToken(/\((?!\?)/,function(){return this.captureNames.push(null),"("}),XRegExp.addToken(/\(\?<([$\w]+)>/,function(t){return this.captureNames.push(t[1]),this.hasNamedCapture=!0,"("}),XRegExp.addToken(/\\k<([\w$]+)>/,function(t){var e=i(this.captureNames,t[1]);return e>-1?"\\"+(e+1)+(isNaN(t.input.charAt(t.index+t[0].length))?"":"(?:)"):t[0]}),XRegExp.addToken(/\[\^?]/,function(t){return"[]"===t[0]?"\\b\\B":"[\\s\\S]"}),XRegExp.addToken(/^\(\?([imsx]+)\)/,function(t){return this.setFlag(t[1]),""}),XRegExp.addToken(/(?:\s+|#.*)+/,function(t){return u.test.call(s,t.input.slice(t.index+t[0].length))?"":"(?:)"},XRegExp.OUTSIDE_CLASS,function(){return this.hasFlag("x")}),XRegExp.addToken(/\./,function(){return"[\\s\\S]"},XRegExp.OUTSIDE_CLASS,function(){return this.hasFlag("s")})}(),function(){}.call(this),function(){var t,e=[].slice;t=this,t.namespace=function(n,i,r){var o,s,a,l,u,c;for(arguments.length<3&&(u=["undefined"!=typeof exports?exports:t].concat(e.call(arguments)),n=u[0],i=u[1],r=u[2]),s=n,c=i.split("."),a=0,l=c.length;l>a;a++)o=c[a],n=n[o]||(n[o]={});return r(n,s)}}.call(this),function(){var t;t={mixin:function(t){return _.extend(this.prototype,t)}},namespace("Kumu",function(e){return e.Mixins=t})}.call(this),function(){this.concern=function(t,e,n){return namespace(t,function(t){return t[e]=function(){return n.apply(arguments[0],arguments)}})}}.call(this),function(){this.extend=function(t,e){return null!=e.classMethods&&_.extend(t,e.classMethods),_.extend(t.prototype,_.omit(e,"classMethods")),t}}.call(this),function(){var t;t=function(){switch("undefined"!=typeof Rails&&null!==Rails?Rails.env:void 0){case"production":case"experience":return"warn";default:return"info"}}(),log.setLevel(t)}.call(this),function(){this.wrap=function(t,e){return t instanceof e?t:e===Array?[t]:new e(t)}}.call(this),function(){var t;t=require("uslug"),String.prototype.pluralize=function(){return pluralize(this)},String.prototype.singularize=function(){var t;return null!=(t=singularize(this))?t:String(this)},String.prototype.camelize=function(){var t;return t=_.string.camelize(this),t.charAt(0).toLowerCase()+t.slice(1)},String.prototype.slugify=function(){return t(this,{allowedChars:"-"})},String.prototype.idify=function(){return this.slugify().replace(/-/g,"")},String.prototype.classify=function(){return _.string.classify(this)},String.prototype.constantize=function(){return window[this]},String.prototype.dasherize=function(){return _.string.dasherize(this)},String.prototype.humanize=function(){return _.string.humanize(this)},String.prototype.titleize=function(){return _.string.titleize(this)},String.prototype.capitalize=function(){return _.string.capitalize(this)},String.prototype.key=function(){return this.camelize()},String.prototype.isBlank=function(){return _.string.isBlank(this)},String.prototype.isPresent=function(){return!_.string.isBlank(this)},String.prototype.trim=function(){return _.string.trim(this)},String.prototype.truncate=function(t){return _.string.truncate(this,t)},String.prototype.startsWith=function(t){return _.string.startsWith(this,t)},String.prototype.endsWith=function(t){return _.string.endsWith(this,t)},String.prototype.contains=function(t){return _.string.contains(this,t)},String.prototype.quote=function(){return _.string.quote(this)},String.prototype.unquote=function(){var t;return t=this,t=_.string.unquote(t,'"'),t=_.string.unquote(t,"'"),String(t)},String.prototype.summary=function(){return this.split(/\n/)[0]},Array.prototype.toSentence=function(){return _.string.toSentence(this)}}.call(this),function(){var t,e,n,i,r,o,s,a,l=[].slice;for(t=function(){function t(t){this.name=t,this.aliases={},this.frames=[],this.benchmarks={}}return _.extend(t.prototype,Backbone.Events),t.enabled=!1,t.api=["on","off","alias","start","stop"],t.now=function(){return(new Date).getTime()},t.prototype.alias=function(t,e){var n;if("object"==typeof arguments[0]){n=arguments[0];for(t in n)e=n[t],this.alias(t,e)}else this.aliases[t]=e;return this},t.prototype.benchmark=function(e,n){var i;return t.enabled?(this.start(),i=e.apply(null,n),this.stop(),i):e.apply(null,n)},t.prototype.benchmarked=function(e){var n;return t.enabled?(n=this,function(){var t;return t=1<=arguments.length?l.call(arguments,0):[],n.benchmark(e,t)}):e},t.prototype.start=function(){var e,n,i,r;if(n=1<=arguments.length?l.call(arguments,0):[],t.enabled)if(0===n.length)this.open();else if(this.frame)for(i=0,r=n.length;r>i;i++)e=n[i],this.frame.start(this.key(e));return this},t.prototype.stop=function(){var e,n,i,r;if(n=1<=arguments.length?l.call(arguments,0):[],t.enabled)if(0===n.length)this.close();else if(this.frame)for(i=0,r=n.length;r>i;i++)e=n[i],this.frame.stop(this.key(e));return this},t.prototype.key=function(t){return this.aliases[t]||t},t.prototype.open=function(){var t,i,r,o,s;if(null==(o=this.cycle)&&(this.cycle=new e),this.frame=new n,this.previousFrame)for(s=this.previousFrame.carryovers,i=0,r=s.length;r>i;i++)t=s[i],this.frame.carryover(t);return this},t.prototype.close=function(){return this.frame.close(),this.cycle.push(this.frame),this.previousFrame=this.frame,this.frame=null,this.cycle.elapsed()?(this.cycle.process(),this.trigger("cycle",this.cycle),this.cycle.reset()):void 0},t}(),e=function(){function e(){this.fps={min:1/0,max:-1/0,current:0,theoretical:0},this.reset()}return e.prototype.reset=function(){return this.benchmarks={},this.startedAt=t.now(),this.frameCount=0,this.frameDurationTotal=0},e.prototype.push=function(e){var n,i,r,o,s;this.duration=t.now()-this.startedAt,this.frameCount+=1,this.frameDurationTotal+=e.duration,o=e.benchmarks,s=[];for(r in o)i=o[r],n=this.benchmarks[r],n?(n.total+=i.total,n.count+=i.count,n.min=Math.min(n.min,i.min),s.push(n.max=Math.max(n.max,i.max))):s.push(this.benchmarks[r]=i);return s},e.prototype.elapsed=function(){return this.duration>=1e3},e.prototype.process=function(){var t,e,n,i;this.fps.current=Math.round(1e3*this.frameCount/this.duration),this.fps.theoretical=Math.round(this.duration/(this.frameDurationTotal/this.frameCount)),this.fps.min=Math.min(this.fps.min,this.fps.current),this.fps.max=Math.max(this.fps.max,this.fps.current),n=this.benchmarks,i=[];for(e in n)t=n[e],t.average=t.total/t.count,i.push(t.duty=100*t.total/this.duration);return i},e.prototype.snapshot=function(){return{min:this.fps.min,max:this.fps.max,current:this.fps.current}},e.prototype.breakdown=function(){var t,e,n,i,r,o,s,a,l,u;o=[],n=[],u=this.benchmarks;for(e in u)t=u[e],n.push(e);for(n.sort(function(t,e){return t.length-e.length}),a=0,l=n.length;l>a;a++)e=n[a],s=o,t=this.benchmarks[e],t.children=[],e.match(":")&&(r=e.match(/(.*):[^:]+$/)[1],i=this.benchmarks[r],i&&(s=i.children)),s.push(t);return this.sort(o),o},e.prototype.sort=function(t){var e,n,i;for(n=0,i=t.length;i>n;n++)e=t[n],this.sort(e.children);return t.sort(function(t,e){return e.duty-t.duty})},e}(),n=function(){function e(){this.startedAt=t.now(),this.stoppedAt=null,this.timestamps={},this.timespans={},this.benchmarks={},this.carryovers=[]}return e.prototype.carryover=function(t){return this.timestamps[t]=this.startedAt},e.prototype.start=function(e){return this.timestamps[e]=t.now()},e.prototype.stop=function(e){var n,i,r;return n=this.timestamps[e],null!=n?((null!=(r=(i=this.timespans)[e])?r:i[e]=[]).push(t.now()-n),delete this.timestamps[e]):void 0},e.prototype.close=function(){var e,n,i,r,o,s;this.stoppedAt=t.now(),this.duration=this.stoppedAt-this.startedAt,r=this.timestamps;for(e in r)i=r[e],this.stop(e),this.carryovers.push(e);o=this.timespans,s=[];for(e in o)n=o[e],s.push(this.benchmarks[e]=this.benchmark(e,n));return s},e.prototype.benchmark=function(t,e){var n,i,r,o;for(n={key:t,count:e.length,min:1/0,max:-1/0,average:0,total:0},r=0,o=e.length;o>r;r++)i=e[r],n.min=Math.min(n.min,i),n.max=Math.max(n.max,i),n.total+=i;return n.average=n.total/n.count,n},e}(),t.global=new t,a=t.api,r=function(e){return t[e]=function(){var n;return(n=t.global)[e].apply(n,arguments)}},o=0,s=a.length;s>o;o++)i=a[o],r(i);namespace("window",function(e){return e.Benchmarks=t})}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};t=function(){function t(t){var n;this.benchmarks=t,this.benchmark=e(this.benchmark,this),this.update=e(this.update,this),this.render=e(this.render,this),this.first=!0,null==(n=this.benchmarks)&&(this.benchmarks=Benchmarks),this.render(),this.benchmarks.on("cycle",this.update)}return t.prototype.render=function(){return this.$benchmarks={},this.el=document.createElement("div"),this.$el=$(this.el),this},t.prototype.update=function(t){var e,n,i,r,o;for(this.$el.empty(),this.$el.append("<div class='benchmark'><span class='value'>"+t.fps.current+"</span><span class='name'>FPS</span></div>"),this.$el.append("<div class='benchmark'><span class='value'>"+t.fps.theoretical+"</span><span class='name'>FPST</span></div>"),r=t.breakdown(),o=[],n=0,i=r.length;i>n;n++)e=r[n],o.push(this.$el.append(this.benchmark(e)));return o},t.prototype.benchmark=function(t){var e,n,i,r,o,s,a;for(i=t.key.match(/:?([^:]+)$/).pop(),r=Math.round(t.duty),e=$("<div />").addClass("benchmark").html("<span class='value'>"+r+"%</span><span class='name'>"+i+"</span></div>"),a=t.children,o=0,s=a.length;s>o;o++)n=a[o],e.append(this.benchmark(n));return e},t}(),namespace("window",function(e){return e.BenchmarksDisplay=t})}.call(this),function(){}.call(this),function(){window.Shortcuts=function(){function t(){}return t._stack=[],t._bindings={},t._releaseBindings={},t._activeKeys={},t._KEYCODES={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,OPT:18,CAPS:20,ESC:27,ESCAPE:27,SPACE:32,SPACEBAR:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,DEL:46,DELETE:46,EQUALS:61,"+":187,PLUS:187,"-":189,MINUS:189,".":190,PERIOD:190,BACKTICK:192,"/":191,"[":219,"\\":220,"]":221,CMD:224},t.code=function(t){return this._encode(t)},t.initialize=function(){return this._registerKeyListeners(),this._registerWindowListeners()},t.push=function(t){return null==t&&(t={reset:!0}),this._stack.push({bindings:this._clone(this._bindings),releaseBindings:this._clone(this._releaseBindings)}),t.reset?(this._bindings={},this._releaseBindings={}):void 0},t.pop=function(){return this.restore(this._stack.pop())},t.restore=function(t){return null==t&&(t=null),t?(this._bindings=t.bindings,this._releaseBindings=t.releaseBindings):this._stack.length>0?(this.restore(this._stack.shift),this._stack=[]):void 0},t._clone=function(t){var e,n;if(null==t||"object"!=typeof t)return t;n=new t.constructor;for(e in t)n[e]=this._clone(t[e]);return n},t.down=function(t,e){return this._bindKeystroke(t,e,null)},t.up=function(t,e){return this._bindKeystroke(t,null,e)},t.bind=function(t,e,n){return this._bindKeystroke(t,e,n)},t._bindKeystroke=function(t,e,n){var i,r,o,s,a,l,u,c,h,p;for(u=t.split(","),p=[],a=0,l=u.length;l>a;a++)r=u[a],i=this._encode(r),e&&(null==(c=(o=this._bindings)[i])&&(o[i]=[]),this._bindings[i].push(e)),n?(null==(h=(s=this._releaseBindings)[i])&&(s[i]=[]),p.push(this._releaseBindings[i].push(n))):p.push(void 0);return p},t._registerKeyListeners=function(){var t=this;return $(document).bind("keydown",function(e){return t._ignored(e)?t._reset():(t._capture(e)&&(t._activeKeys[e.which]=e.which),t._process(e))}).bind("keyup",function(e){return t._ignored(e)?t._reset():(t._processRelease(e),t._capture(e)?delete t._activeKeys[e.which]:void 0)})},t._registerWindowListeners=function(){return $(window).bind("blur",this._reset)},t._process=function(e){var n,i,r,o,s;if(i=t._bindings[t._activeKeystroke(e)]){for(e.preventDefault(),t._reset(),s=[],r=0,o=i.length;o>r;r++)n=i[r],s.push(n.call(null,e));return s}},t._processRelease=function(e){var n,i,r,o;if(i=t._releaseBindings[t._activeKeystroke(e)])for(r=0,o=i.length;o>r;r++)n=i[r],n.call(null,e);return e.which===t._KEYCODES.ESC?t._reset():void 0},t._reset=function(){return t._activeKeys={}},t._activeKeystroke=function(e){var n,i;i=[],e.shiftKey&&i.push(t._KEYCODES.SHIFT),e.altKey&&i.push(t._KEYCODES.ALT),e.ctrlKey&&i.push(t._KEYCODES.CTRL);for(n in t._activeKeys)i.push(n);return t._sort(i).join("+")},t._ignored=function(e){return t._combinationIgnored(e)||t._targetIgnored(e)},t._combinationIgnored=function(t){return t.metaKey},t._targetIgnored=function(e){return $(e.target).is(":input")&&!t._forced(e)},t._capture=function(e){var n;return n=e.which,!(n===t._KEYCODES.SHIFT||n===t._KEYCODES.ALT||n===t._KEYCODES.CTRL||n===t._KEYCODES.CMD||n===t._KEYCODES.CAPS)},t._forced=function(e){return e.ctrlKey||e.which===t._KEYCODES.ESC||t._activeKeys.ESC},t._encode=function(e){var n,i;return n=t._clean(e).map(t._encodeKey),i=t._sort(n).join("+")},t._sort=function(t){return t.sort(function(t,e){return t-e})},t._encodeKey=function(e){return t._KEYCODES[e]||e.charCodeAt(0)},t._clean=function(t){var e;return e=t.split("+"),e=e.map(function(t){return $.trim(t).toUpperCase()})},t}.call(this),window.Shortcuts.initialize()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=[].slice,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};!function(n){var r,o,s,a,l,u,c,h,p,f,d,m,g,v,y,b,w,x;return a=function(){function i(e,n){this.$el=e,this.isReadonly=t(this.isReadonly,this),this.isFlashy=t(this.isFlashy,this),this.isSubtle=t(this.isSubtle,this),this.isList=t(this.isList,this),this.saveOnEnter=t(this.saveOnEnter,this),this.saveOnChange=t(this.saveOnChange,this),this.saveOnBlur=t(this.saveOnBlur,this),this.destroy=t(this.destroy,this),this.cancel=t(this.cancel,this),this.restore=t(this.restore,this),this["delete"]=t(this["delete"],this),this.edit=t(this.edit,this),this.data=t(this.data,this),this.show=t(this.show,this),this.deleted=!1,this.initializeOptions(n),"external"!==this.options.editor&&(this.editor=l.build(this.options.editor,this)),this.value=this.options.value,this.choices=this.options.choices,this.build(),this.show()}return i.prototype.extend=function(t){return n.extend(this.options,t)},i.prototype.trigger=function(){var t,n;return t=1<=arguments.length?e.call(arguments,0):[],(n=this.$el).triggerHandler.apply(n,t),this},i.prototype.refresh=function(){return this.editing?this.edit():this.show()},i.prototype.getValue=function(){return this.data().value()},i.prototype.getChoices=function(){return n.editable.helper.result(this.choices)},i.prototype.show=function(t){var e;return this.editing=!1,e=this.data(t),this.wrapper.display(e),this.trigger("show",e.value())},i.prototype.data=function(t){return new o(t||this.value,this.choices)},i.prototype.edit=function(t){return null==t&&(t={}),this.editor?(this.editing=!0,this.wrapper.edit(this.editor,t),this.trigger("edit",this.editor),t.error?this.error(t.error):void 0):this.trigger("edit")},i.prototype.configure=function(){return this.trigger("configure")},i.prototype.save=function(){var t,e,n,i;return i=this.editor.value(),n=this.validate(i),console.log("Save",i,n),n?(t=jQuery.Event("update"),i=this.parse(i),e=this.getValue(),_.isEqual(i,e)||!i&&!e||this.trigger(t,[i]),t.isDefaultPrevented()?this.edit({value:i}):this.show(i)):this.error("Invalid")},i.prototype.error=function(t){return this.trigger("error",t)},i.prototype.validate=function(t){return this.options.validate(t)},i.prototype.parse=function(t){return this.options.parse(t)},i.prototype.format=function(t){return this.options.format(t)},i.prototype["delete"]=function(){return this.deleted=!0,this.show(),this.trigger("delete",this.value)},i.prototype.restore=function(){return this.deleted=!1,this.trigger("restore")},i.prototype.cancel=function(){return this.trigger("cancel"),this.show()},i.prototype.destroy=function(){return this.wrapper.destroy(),this.$el.tooltip("hide")},i.prototype.saveOnBlur=function(){return this.options.trigger.match(/all|blur/)&&!this.deleted},i.prototype.saveOnChange=function(){return this.options.trigger.match(/all|change/)},i.prototype.saveOnEnter=function(){return this.options.trigger.match(/all|enter/)},i.prototype.can=function(t){return!!this.options.actions.match(RegExp("all|"+t))},i.prototype.isList=function(){return null!=this.data().choices},i.prototype.isSubtle=function(){return"subtle"===this.options.mode},i.prototype.isFlashy=function(){return"flashy"===this.options.mode},i.prototype.isReadonly=function(){return"readonly"===this.options.mode},i.prototype.isLocked=function(){return this.options.locked},i.prototype.initializeOptions=function(t){var e;return e=this.domOptions(),this.options?n.extend(this.options,t):this.options=n.extend({},n.editable.defaults,e,t)},i.prototype.domOptions=function(){var t,e,i,r,o,s,a,l;for(r={},r.value=n.trim(this.$el.text()),l=this.$el.get(0).attributes,s=0,a=l.length;a>s;s++)t=l[s],e=t.nodeName.match(/^data-editable-([a-z\-]+)$/),e&&2===e.length&&(i=e[1],o=t.nodeValue,o="true"===o?!0:o,"as"===i&&(i="editor"),r[i]=o);return r},i.prototype.build=function(){return this.wrapper=new c(this)},i}(),o=function(){function e(e,i){this.selected=t(this.selected,this),this.hasMultipleValues=t(this.hasMultipleValues,this),this.selectedChoiceLabels=t(this.selectedChoiceLabels,this),this.selectedChoices=t(this.selectedChoices,this),this.uniqueChoices=t(this.uniqueChoices,this),this.choices=t(this.choices,this),this.value=t(this.value,this),this._value=n.editable.helper.result(e),this._choices=n.editable.helper.result(i)}return e.prototype.value=function(){return this._value},e.prototype.choices=function(t){return this._choices&&t?n.editable.helper.formalize(this._choices):this._choices},e.prototype.uniqueChoices=function(t){var e;return e=this.choices(t),e&&(e=_.uniq(this.choices(t),!1,function(t){return _.isArray(t)?t[0]:t})),e},e.prototype.selectedChoices=function(){var t=this;return this._choices?n.grep(this.choices(!0),function(e){return t.selected(e[1])}):void 0},e.prototype.selectedChoiceLabels=function(){return this._choices?n.map(this.selectedChoices(),function(t){return t[0]}):void 0},e.prototype.hasMultipleValues=function(){return this._value instanceof Array},e.prototype.selected=function(t){return n.editable.helper.equal(t,this._value)||n.inArray(t,this._value)>=0},e}(),s=function(){function t(t){this.editable=t}return t.prototype.render=function(t){var e,i,r,o,s,a,l;return this.data=t,s=this.data.value(),e=this.data.choices(!0),e&&"number"==typeof s&&(r=this.data.selectedChoiceLabels(),this.data.hasMultipleValues()||(r=r[0])),this.isPresent(s)&&(a=_.isArray(s)?s:[s],i=_.map(a,this.editable.format,this.editable)),null==i&&(i=r||s),o=this.editable.options.separator,i&&0!==i.length?i instanceof Array&&i.length>0&&o&&(i=_.chain(i).map(function(t){return[t,o]}).flatten().initial().value()):i=this.editable.options.placeholder,_.isArray(i)||(i=[i]),this.$el=(l=n("<div></div>").addClass("editable-display").addClass(""+this.editable.options.editor+"-container")).append.apply(l,i),this},t.prototype.isPresent=function(t){return t&&t.length>0&&!(_.isString(t)&&0===n.trim(t).length)},t}(),c=function(){function e(e){this.editable=e,this.onError=t(this.onError,this),this.hasActiveChild=t(this.hasActiveChild,this),this.inDisplay=t(this.inDisplay,this),this.isActive=t(this.isActive,this),this.timeSinceLastBlur=t(this.timeSinceLastBlur,this),this.displayClicksIgnored=t(this.displayClicksIgnored,this),this.beforeBlur=t(this.beforeBlur,this),this.onBlur=t(this.onBlur,this),this.onKeydown=t(this.onKeydown,this),this.onMouseUp=t(this.onMouseUp,this),this.onMouseDown=t(this.onMouseDown,this),this.edit=t(this.edit,this),this.cleanup=t(this.cleanup,this),this.display=t(this.display,this),this.build=t(this.build,this),this.hide=t(this.hide,this),this.show=t(this.show,this),this.$el=this.editable.$el,this.build(),this.listen()}return e.blurTimeout=null,e.prototype.show=function(){return this.$el.show()},e.prototype.hide=function(){return this.$el.hide("fade")},e.prototype.build=function(){var t;return this.displayView=new s(this.editable),this.toolbarView=new u(this.editable),t=["editable"],t.push("editable-"+this.editable.options.editor),"normal"!==this.editable.options.mode&&t.push(this.editable.options.mode),this.$el.addClass(t.join(" ")).tooltip({title:"",trigger:"manual",selector:"editable-editor"}).on("error",this.onError),this},e.prototype.display=function(t){return this.$display=this.displayView.render(t).$el,this.$actions=this.toolbarView.render().$el,this.$el.removeClass("active").empty().append(this.$display,this.$actions),this.cleanup()},e.prototype.cleanup=function(){var t;return null!=(t=this.editor)&&"function"==typeof t.cleanup&&t.cleanup(),0===this.$el.closest(".editable.active").length&&n("body").removeClass("editable-active"),this.$el.tooltip("hide")},e.prototype.edit=function(t,e){var i,r,o,s,a,l,u;return this.editor=t,this.$el.find("> .editable-editor").remove(),"function"==typeof(s=this.editor).beforeRender&&s.beforeRender(),n("body").addClass("editable-active"),this.$el.addClass("active"),o=null!=(l=e.value)?l:this.editable.getValue(),r=null!=(u=e.choices)?u:this.editable.getChoices(),i=this.editor.render(o,r).$el.addClass("editable-editor").addClass(""+this.editable.options.editor+"-editor").toggleClass("locked",this.editable.isLocked()).appendTo(this.$el),i.on("select","input, textarea",function(t){return t.stopPropagation()}),"function"==typeof(a=this.editor).delegateEvents&&a.delegateEvents(),"function"==typeof t.afterRender&&t.afterRender(),"function"==typeof t.focus?t.focus():void 0},e.prototype.listen=function(){return n("body").on("mousedown touchstart",this.onMouseDown).on("mouseup touchend",this.onMouseUp).on("keydown",this.onKeydown)},e.prototype.destroy=function(){return n("body").off("mousedown touchstart",this.onMouseDown).off("mouseup touchend",this.onMouseUp).off("keydown",this.onKeydown)},e.prototype.onMouseDown=function(t){var e,i,r,o;if(1===t.which)return e=n(t.target),this.isActive()&&(o=0===e.closest(this.$el).length,r=0===e.closest("html").length,i=e.closest(".ui-autocomplete").length>0,o&&!i&&!r)?this.onBlur(t):void 0},e.prototype.onMouseUp=function(t){var e;if(1===t.which)return this.editable.isReadonly()||(e=n(t.target),!this.inDisplay(e)||this.displayClicksIgnored(e)||e.is("a"))?void 0:this.editable.edit()},e.prototype.onKeydown=function(t){return this.isActive()&&!this.hasActiveChild()&&27===t.which?(t.stopPropagation(),this.editable.cancel()):void 0},e.prototype.onBlur=function(){var t;return("function"==typeof(t=this.editor).ignoreBlur?t.ignoreBlur():void 0)?void 0:(this.beforeBlur(),this.editable.saveOnBlur()?this.editable.save():this.editable.cancel())},e.prototype.beforeBlur=function(){return e.lastBlurAt=(new Date).getTime()},e.prototype.displayClicksIgnored=function(t){return this.timeSinceLastBlur()<100||n("body").is(".editable-active")&&0===t.closest(".editable.active").length},e.prototype.timeSinceLastBlur=function(){var t;return e.lastBlurAt?(t=(new Date).getTime(),t-e.lastBlurAt):1/0},e.prototype.isActive=function(){return this.$el.is(".active")},e.prototype.inDisplay=function(t){return t.closest(this.$display).length>0},e.prototype.hasActiveChild=function(){return this.$el.find(".editable.active").length>0},e.prototype.onError=function(t,e){return e?(e instanceof Array&&(e=e.join(", ")),this.$el.tooltip("hide").attr("title",e).tooltip("fixTitle").tooltip("show")):void 0},e}(),u=function(){function e(e){this.editable=e,this.deleteConfirmed=t(this.deleteConfirmed,this),this.onDelete=t(this.onDelete,this),this.onConfigure=t(this.onConfigure,this),this.onEdit=t(this.onEdit,this),this.listen=t(this.listen,this),this.render=t(this.render,this)}return e.prototype.render=function(){var t,e;return e=this.editable.editor,t=this.editable.data(),this.$el=n("<div />").addClass("editable-toolbar btn-group"),this.editable.can("edit")&&this.$el.append('<div class="btn editable-edit"><i class="icon icon-pencil" /></div>'),this.editable.can("configure")&&this.$el.append('<div class="btn editable-configure"><i class="icon icon-wrench" /></div>'),this.editable.can("delete")&&t.value()&&this.$el.append('<div class="btn btn-danger editable-delete"><i class="icon icon-remove" /></div>'),this.listen(),this},e.prototype.listen=function(){return this.$el.find(".editable-edit").on("click touchstart",this.onEdit),this.$el.find(".editable-configure").on("click touchstart",this.onConfigure),this.$el.find(".editable-delete").on("click touchstart",this.onDelete)},e.prototype.onEdit=function(t){return t.preventDefault(),this.editable.edit()},e.prototype.onConfigure=function(t){return t.preventDefault(),this.editable.configure()},e.prototype.onDelete=function(t){return t.preventDefault(),this.deleteConfirmed()?this.editable["delete"]():void 0},e.prototype.deleteConfirmed=function(){var t;return t=n.editable.helper.result(this.editable.options["delete-confirmation"]),!t||confirm(t)},e}(),r=function(){function e(e){this.registryName=e,this.register=t(this.register,this),this.exists=t(this.exists,this),this.find=t(this.find,this),this.registry={}}return e.prototype.find=function(t,e){var n;if(null==e&&(e={}),e=_.defaults(e,{strict:!1}),"string"==typeof t){if(n=this.registry[t],e.strict&&!n)throw new Error("EditableError: Cannot find '"+t+"' "+this.registryName)}else n=t;return n},e.prototype.exists=function(t){return!!this.registry[t]},e.prototype.register=function(t,e){return this.registry[t]=e},e}(),l=function(){function e(e){this.editable=e,this.remove=t(this.remove,this),this.find=t(this.find,this),this.can=t(this.can,this)}return e.registry=new r("editor"),e.build=function(t,n){var i;return i=e.registry.find(t)||function(){throw new Error("Editor not defined: "+t)}(),new i(n)},e.prototype.can=function(t){return this.editable.can(t)},e.prototype.find=function(t){return this.$el.find(t)},e.prototype.remove=function(){return this.$el.remove()},e}(),n.editable={editor:{},extension:{},helper:{}},n.editable.extend=function(t,e){var n;
return n=function(){},n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.__super__=e.prototype,t.prototype["super"]=function(t){return this.constructor.__super__[t]},t},n.editable["super"]=function(t,e,n){return t["super"](e).apply(t,n)},n.editable.helper.result=function(t){return t instanceof Function?this.result(t()):t},n.editable.helper.equal=function(t,e){return String(t)===String(e)},n.editable.helper.formalize=function(t){return t&&t.length>0&&!(t[0]instanceof Array)?n.map(t,function(t){return[[t,t]]}):t},n.editable.helper.eachChoice=function(t,e){var i,r,o,s,a,l,u,c;for(u=t.choices(!0),c=[],a=0,l=u.length;l>a;a++)i=u[a],r=i[0],s=i[1],o=n.editable.helper.equal(t.value(),s),c.push(e(s,r,o));return c},n.editable.helper.sortChoicesByPosition=function(t,e){var i;return i=function(t,i){return t instanceof Array&&(t=t[1],i=i[1]),n.inArray(t,e)-n.inArray(i,e)},t.sort(i)},n.editable.editor.Base=l,n.editable.editor.registry=l.registry,n.editable.editor.register=n.proxy(l.registry.register,l.registry),n.editable.editor.List=function(e){function r(){return this.checked=t(this.checked,this),this.makeSortable=t(this.makeSortable,this),this.form=t(this.form,this),this.onChange=t(this.onChange,this),this.choices=t(this.choices,this),this.buildLabel=t(this.buildLabel,this),this.buildInput=t(this.buildInput,this),this.positions=t(this.positions,this),this.value=t(this.value,this),this.focus=t(this.focus,this),this.render=t(this.render,this),w=r.__super__.constructor.apply(this,arguments)}return i(r,e),n.editable.editor.register("list",r),r.defaults={actions:"sort,select,create,update,delete"},r.prototype.render=function(){var t,e,i,r,o,s,a,l,u,c,h,p;for(this.data=this.editable.data(),this.options={via:this.editable.options.via},l=this.editable.options.via,a=(new Date).getTime(),this.$el=n("<ul></ul>"),p=this.data.choices(!0),c=0,h=p.length;h>c;c++)o=p[c],s=o[0],u=o[1],e=this.buildInput(l,u,s),r=this.buildLabel(l,u,s),"radio"===l&&e.attr("name","editable-"+a),t=n("<div></div>").addClass(l).append(e).append(r),i=n("<li></li>").addClass("editable-choice").append(t).appendTo(this.$el);return this.can("sort")&&this.makeSortable(),this},r.prototype.focus=function(){},r.prototype.value=function(){var t;return t=n.map(this.$el.find("input:checked"),function(t){return n(t).data("editable-data").value}),"radio"===this.options.via?t[0]:t},r.prototype.positions=function(){return n.map(this.$el.find(".editable-input"),function(t){return n(t).data("editable-data").value})},r.prototype.buildInput=function(t,e,i){var r,o=this;return r=n("<input />").addClass("editable-input").attr("type",t).attr("checked",this.checked(e)).data("editable-data",{value:e,label:i}).val(e).on("change",function(t){var r,s;return t.stopPropagation(),r=n(t.target).is(":checked")?"select":"deselect",s=o.value(),o.editable.trigger(r,e,i).trigger("change",[s])})},r.prototype.buildLabel=function(t,e,i){var r;return r=n("<span />").attr({"data-value":e,"data-label":i}).addClass("editable-label").append(i)},r.prototype.choices=function(t){return null==t&&(t={}),this.$el.find(".editable-choice .editable-label").editable(t).on("show edit update delete",!1)},r.prototype.onChange=function(t){var e;return e=n(t.target),debug("onchange called with",e,e.is(":checked")),e.is(":checked")?this.editable.trigger("select",e.val()):void 0},r.prototype.form=function(t){var e,i;return null==t&&(t={}),i={mode:"subtle",actions:"edit",placeholder:"<span class='placeholder'>click to add value</span>"},t=_.defaults(t,i),e=n("<li />").addClass("form radio").appendTo(this.$el).editable(t).on("edit update",!1),0===this.$el.find(".editable-choice").length&&e.removeClass("radio").editable("edit"),e},r.prototype.makeSortable=function(){var t=this;return this.$el.sortable().on("sort",function(t){return t.stopPropagation()}).on("sortupdate",function(){var e;return e=t.positions(),"function"!=typeof t.editable.choices&&n.editable.helper.sortChoicesByPosition(t.editable.choices,e),t.editable.trigger("sort",[e])})},r.prototype.checked=function(t){return t===this.data.value()||n.inArray(t,this.data.value())>=0},r}(l),n.editable.editor.Select=function(e){function r(){return this.selected=t(this.selected,this),this.onChange=t(this.onChange,this),this.value=t(this.value,this),this.focus=t(this.focus,this),this.render=t(this.render,this),x=r.__super__.constructor.apply(this,arguments)}return i(r,e),n.editable.editor.register("select",r),r.prototype.render=function(){var t,e,i,r,o,s,a;for(this.data=this.editable.data(),this.$select=this.$el=n("<select></select>"),a=this.data.choices(!0),o=0,s=a.length;s>o;o++)e=a[o],i=e[0],r=e[1],t=n("<option></option>").html(i).val(r).attr("selected",this.selected(r)),this.$el.append(t);return this.$el.on("change",this.onChange),this},r.prototype.focus=function(){return this.$el.focus()},r.prototype.value=function(){return n.trim(this.$el.val())},r.prototype.onChange=function(){return this.editable.saveOnChange()?this.editable.save():void 0},r.prototype.selected=function(t){return n.editable.helper.equal(t,this.data.value())},r}(l),m=function(t){return null==t&&(t={}),this.each(function(){var e,i;return e=n(this),i=e.data("editable"),i?i.extend(t):e.data("editable",new a(e,t)),e})},b=function(){var t;return t=n(this.first()),t.data("editable").getValue()},y=function(t){return this.each(function(){var e;return e=n(this),e.data("editable").show(t),e})},d=function(t){return this.each(function(){var e;return e=n(this),e.data("editable").edit(t),e})},p=function(){return this.each(function(){var t;return t=n(this),t.data("editable").cancel(),t})},g=function(){return this.each(function(){var t;return t=n(this),t.data("editable").refresh(),t})},v=function(){return this.each(function(){var t;return t=n(this),t.data("editable").restore(),t})},f=function(){return this.each(function(){var t,e;return t=n(this),null!=(e=t.data("editable"))&&e.destroy(),t})},h={initialize:m,value:b,show:y,edit:d,cancel:p,refresh:g,destroy:f,restore:v},n.fn.editable=function(t){return h[t]?h[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?n.error("Method "+t+" not available on jQuery.editable"):h.initialize.apply(this,arguments)},n.editable.selector="data-editable-as",n.editable.defaults={validate:function(){return!0},parse:function(t){return t},format:function(t){return t},editor:"string",via:"checkbox",mode:"normal",actions:"edit",trigger:"all",separator:", ",placeholder:'<span class="placeholder"></span>',"delete-confirmation":!1,locked:!1}}(jQuery),$(document).ready(function(){return $.editable.selector?$("["+$.editable.selector+"]:not([data-editable-ignore])").each(function(){return $(this).editable()}):void 0})}.call(this),function(){var t,e;null==(t=this.Format)&&(this.Format={}),null==(e=this.Editor)&&(this.Editor={})}.call(this),function(){$.widget("kumu.editableattr",{options:{selection:null,attribute:null,link:!0,options:{}},edit:function(t){return this.element.editable("edit",t)},refresh:function(){return this.element.editable("refresh")},destroy:function(){var t,e,n;return n=this.options,e=n.entity,t=n.assignment,this.element.off("select deselect update delete",this._events.process),e.attrs.off("change",this._events.update),t&&(t.off("edit",this._events.edit),t.off("destroy",this._events.hide)),this.element.editable("destroy"),$.Widget.prototype.destroy.call(this)},_create:function(){var t,e,n,i,r,o,s,a,l,u;return l=this,n=this.options.attribute=Attributes.resolve(this.options.attribute),e=n.get("name"),o=this.options.entity=this.options.selection.first(),i=o.attrs,t=this.options.assignment,u=t?function(){return t.get("value")}:function(){return o.getAttr(n)},r=function(){return n.choices()},s=this.options.link&&n.isPrompted()?function(t){return AttributesHelper.linked(e,t,{subtle:!0})}:function(t){var e;try{return n.massageValue(t)}catch(i){return e=i,t}},a={actions:"edit,delete",editor:n.editor(),value:u,choices:r,locked:n.get("locked"),format:s,separator:"<br />",placeholder:'<span class="placeholder">Add '+n.label()+"</span>"},able.to("manage","entities")||(a.mode="readonly",a.placeholder=""),a=_.defaults({},this.options.options,a),this.element.editable(a),this._events={edit:function(t){return l.element.editable("edit",t)},process:function(t,e){return l._process(t,e)},update:function(){return i.hasChanged(n)?l.refresh():void 0},hide:function(){return l.element.hide()}},this.element.on("select deselect update delete",this._events.process),i.on("change",this._events.update),null!=t&&t.on("edit",this._events.edit),null!=t?t.on("destroy",this._events.hide):void 0},_onAttrChanged:function(){},_process:function(t,e){var n,i,r,o,s,a,l=this;if(a=this.options,s=a.selection,o=a.entity,i=a.attribute,n=a.assignment,!n)return r=function(){switch(t.type){case"update":return new Commands.Attributes.Set(s,i,e);case"delete":return new Commands.Attributes.Clear(s,i)}}(),execute(r).fail(function(){return l.element.editable("edit",{value:e}),alert("Unable to update "+l.options.attribute.label()+". Please try again.")});switch(t.type){case"update":return n.set("value",e);case"delete":return n.destroy()}}})}.call(this),/*!
 * Sizzle CSS Selector Engine v1.9.2-pre
 * http://sizzlejs.com/
 *
 * Copyright 2013 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2013-12-03
 */
function(t,e){function n(t){return be.test(t+"")}function i(){var t,e=[];return t=function(n,i){return e.push(n+=" ")>E.cacheLength&&delete t[e.shift()],t[n]=i}}function r(t){return t[F]=!0,t}function o(t){var e=D.createElement("div");try{return!!t(e)}catch(n){return!1}finally{e=null}}function s(t,e,n,i){var r,o,s,a,l,u,c,h,p,m;if((e?e.ownerDocument||e:V)!==D&&N(e),e=e||D,n=n||[],!t||"string"!=typeof t)return n;if(1!==(a=e.nodeType)&&9!==a)return[];if(L&&!i){if(r=we.exec(t))if(s=r[1]){if(9===a){if(o=e.getElementById(s),!o||!o.parentNode)return n;if(o.id===s)return n.push(o),n}else if(e.ownerDocument&&(o=e.ownerDocument.getElementById(s))&&B(e,o)&&o.id===s)return n.push(o),n}else{if(r[2])return ee.apply(n,e.getElementsByTagName(t)),n;if((s=r[3])&&j.getElementsByClassName&&e.getElementsByClassName)return ee.apply(n,e.getElementsByClassName(s)),n}if(j.qsa&&(!$||!$.test(t))){if(h=c=F,p=e,m=9===a&&t,1===a&&"object"!==e.nodeName.toLowerCase()){for(u=f(t),(c=e.getAttribute("id"))?h=c.replace(Se,"\\$&"):e.setAttribute("id",h),h="[id='"+h+"'] ",l=u.length;l--;)u[l]=h+d(u[l]);p=de.test(t)&&e.parentNode||e,m=u.join(",")}if(m)try{return ee.apply(n,p.querySelectorAll(m)),n}catch(g){}finally{c||e.removeAttribute("id")}}}return x(t.replace(he,"$1"),e,n,i)}function a(t,e){var n=e&&t,i=n&&(~e.sourceIndex||X)-(~t.sourceIndex||X);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function l(t,n,i){var r;return i?e:(r=t.getAttributeNode(n))&&r.specified?r.value:t[n]===!0?n.toLowerCase():null}function u(t,n,i){var r;return i?e:r=t.getAttribute(n,"type"===n.toLowerCase()?1:2)}function c(t){return function(e){var n=e.nodeName.toLowerCase();return"input"===n&&e.type===t}}function h(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function p(t){return r(function(e){return e=+e,r(function(n,i){for(var r,o=t([],n.length,e),s=o.length;s--;)n[r=o[s]]&&(n[r]=!(i[r]=n[r]))})})}function f(t,e){var n,i,r,o,a,l,u,c=W[t+" "];if(c)return e?0:c.slice(0);for(a=t,l=[],u=E.preFilter;a;){(!n||(i=pe.exec(a)))&&(i&&(a=a.slice(i[0].length)||a),l.push(r=[])),n=!1,(i=fe.exec(a))&&(n=i.shift(),r.push({value:n,type:i[0].replace(he," ")}),a=a.slice(n.length));for(o in E.filter)!(i=ye[o].exec(a))||u[o]&&!(i=u[o](i))||(n=i.shift(),r.push({value:n,type:o,matches:i}),a=a.slice(n.length));if(!n)break}return e?a.length:a?s.error(t):W(t,l).slice(0)}function d(t){for(var e=0,n=t.length,i="";n>e;e++)i+=t[e].value;return i}function m(t,e,n){var i=e.dir,r=n&&"parentNode"===i,o=H++;return e.first?function(e,n,o){for(;e=e[i];)if(1===e.nodeType||r)return t(e,n,o)}:function(e,n,s){var a,l,u,c=U+" "+o;if(s){for(;e=e[i];)if((1===e.nodeType||r)&&t(e,n,s))return!0}else for(;e=e[i];)if(1===e.nodeType||r)if(u=e[F]||(e[F]={}),(l=u[i])&&l[0]===c){if((a=l[1])===!0||a===C)return a===!0}else if(l=u[i]=[c],l[1]=t(e,n,s)||C,l[1]===!0)return!0}}function g(t){return t.length>1?function(e,n,i){for(var r=t.length;r--;)if(!t[r](e,n,i))return!1;return!0}:t[0]}function v(t,e,n,i,r){for(var o,s=[],a=0,l=t.length,u=null!=e;l>a;a++)(o=t[a])&&(!n||n(o,i,r))&&(s.push(o),u&&e.push(a));return s}function y(t,e,n,i,o,s){return i&&!i[F]&&(i=y(i)),o&&!o[F]&&(o=y(o,s)),r(function(r,s,a,l){var u,c,h,p=[],f=[],d=s.length,m=r||_(e||"*",a.nodeType?[a]:a,[]),g=!t||!r&&e?m:v(m,p,t,a,l),y=n?o||(r?t:d||i)?[]:s:g;if(n&&n(g,y,a,l),i)for(u=v(y,f),i(u,[],a,l),c=u.length;c--;)(h=u[c])&&(y[f[c]]=!(g[f[c]]=h));if(r){if(o||t){if(o){for(u=[],c=y.length;c--;)(h=y[c])&&u.push(g[c]=h);o(null,y=[],u,l)}for(c=y.length;c--;)(h=y[c])&&(u=o?ie.call(r,h):p[c])>-1&&(r[u]=!(s[u]=h))}}else y=v(y===s?y.splice(d,y.length):y),o?o(null,s,y,l):ee.apply(s,y)})}function b(t){for(var e,n,i,r=t.length,o=E.relative[t[0].type],s=o||E.relative[" "],a=o?1:0,l=m(function(t){return t===e},s,!0),u=m(function(t){return ie.call(e,t)>-1},s,!0),c=[function(t,n,i){return!o&&(i||n!==A)||((e=n).nodeType?l(t,n,i):u(t,n,i))}];r>a;a++)if(n=E.relative[t[a].type])c=[m(g(c),n)];else{if(n=E.filter[t[a].type].apply(null,t[a].matches),n[F]){for(i=++a;r>i&&!E.relative[t[i].type];i++);return y(a>1&&g(c),a>1&&d(t.slice(0,a-1)).replace(he,"$1"),n,i>a&&b(t.slice(a,i)),r>i&&b(t=t.slice(i)),r>i&&d(t))}c.push(n)}return g(c)}function w(t,e){var n=0,i=e.length>0,o=t.length>0,a=function(r,a,l,u,c){var h,p,f,d=[],m=0,g="0",y=r&&[],b=null!=c,w=A,_=r||o&&E.find.TAG("*",c&&a.parentNode||a),x=U+=null==w?1:Math.random()||.1;for(b&&(A=a!==D&&a,C=n);null!=(h=_[g]);g++){if(o&&h){for(p=0;f=t[p++];)if(f(h,a,l)){u.push(h);break}b&&(U=x,C=++n)}i&&((h=!f&&h)&&m--,r&&y.push(h))}if(m+=g,i&&g!==m){for(p=0;f=e[p++];)f(y,d,a,l);if(r){if(m>0)for(;g--;)y[g]||d[g]||(d[g]=Z.call(u));d=v(d)}ee.apply(u,d),b&&!r&&d.length>0&&m+e.length>1&&s.uniqueSort(u)}return b&&(U=x,A=w),y};return i?r(a):a}function _(t,e,n){for(var i=0,r=e.length;r>i;i++)s(t,e[i],n);return n}function x(t,e,n,i){var r,o,s,a,l,u=f(t);if(!i&&1===u.length){if(o=u[0]=u[0].slice(0),o.length>2&&"ID"===(s=o[0]).type&&9===e.nodeType&&L&&E.relative[o[1].type]){if(e=(E.find.ID(s.matches[0].replace(ke,Ce),e)||[])[0],!e)return n;t=t.slice(o.shift().value.length)}for(r=ye.needsContext.test(t)?0:o.length;r--&&(s=o[r],!E.relative[a=s.type]);)if((l=E.find[a])&&(i=l(s.matches[0].replace(ke,Ce),de.test(o[0].type)&&e.parentNode||e))){if(o.splice(r,1),t=i.length&&d(o),!t)return ee.apply(n,i),n;break}}return P(t,u)(i,e,!L,n,de.test(t)),n}function S(){}var k,C,E,T,M,P,A,O,N,D,I,L,$,z,R,B,F="sizzle"+-new Date,V=t.document,j={},U=0,H=0,q=i(),W=i(),J=i(),Y=!1,K=function(){return 0},G=typeof e,X=1<<31,Q=[],Z=Q.pop,te=Q.push,ee=Q.push,ne=Q.slice,ie=Q.indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(this[e]===t)return e;return-1},re="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",oe="[\\x20\\t\\r\\n\\f]",se="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ae=se.replace("w","w#"),le="\\[!?"+oe+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\1|("+ae+"))"+oe+"*(?:((?:[<>])|[<>*^$|!~]?=)"+oe+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\5|("+ae+")|)|)"+oe+"*\\]",ue="\\["+oe+"*("+se+")"+oe+"*(?:((?:[<>])|[<>*^$|!~]?=)"+oe+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+ae+")|)|)"+oe+"*\\]",ce=":("+se+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+ue.replace(3,8)+")*)|.*)\\)|)",he=new RegExp("^"+oe+"+|((?:^|[^\\\\])(?:\\\\.)*)"+oe+"+$","g"),pe=new RegExp("^"+oe+"*,"+oe+"*"),fe=new RegExp("^"+oe+"*([>+~]|"+oe+")"+oe+"*"),de=new RegExp(oe+"*[+~]"),me=new RegExp("="+oe+"*([^\\]'\"]*)"+oe+"*\\]","g"),ge=new RegExp(ce),ve=new RegExp("^"+ae+"$"),ye={ID:new RegExp("^#("+se+")"),CLASS:new RegExp("^\\.("+se+")"),NAME:new RegExp("^\\[name=['\"]?("+se+")['\"]?\\]"),TAG:new RegExp("^("+se.replace("w","w*")+")"),ATTR:new RegExp("^"+le),PSEUDO:new RegExp("^"+ce),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+oe+"*(even|odd|(([+-]|)(\\d*)n|)"+oe+"*(?:([+-]|)"+oe+"*(\\d+)|))"+oe+"*\\)|)","i"),"boolean":new RegExp("^(?:"+re+")$","i"),needsContext:new RegExp("^"+oe+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+oe+"*((?:-\\d)?\\d*)"+oe+"*\\)|)(?=[^-]|$)","i")},be=/^[^{]+\{\s*\[native \w/,we=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,_e=/^(?:input|select|textarea|button)$/i,xe=/^h\d$/i,Se=/'|\\/g,ke=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,Ce=function(t,e){var n="0x"+e-65536;return n!==n?e:0>n?String.fromCharCode(n+65536):String.fromCharCode(55296|n>>10,56320|1023&n)};try{ee.apply(Q=ne.call(V.childNodes),V.childNodes),Q[V.childNodes.length].nodeType}catch(Ee){ee={apply:Q.length?function(t,e){te.apply(t,ne.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}M=s.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},N=s.setDocument=function(t){var i=t?t.ownerDocument||t:V;return i!==D&&9===i.nodeType&&i.documentElement?(D=i,I=i.documentElement,L=!M(i),j.getElementsByTagName=o(function(t){return t.appendChild(i.createComment("")),!t.getElementsByTagName("*").length}),j.attributes=o(function(t){return t.className="i",!t.getAttribute("className")}),j.getElementsByClassName=o(function(t){return t.innerHTML="<div class='a'></div><div class='a i'></div>",t.firstChild.className="i",2===t.getElementsByClassName("i").length}),j.getByName=o(function(t){t.id=F+0,t.appendChild(D.createElement("a")).setAttribute("name",F),t.appendChild(D.createElement("i")).setAttribute("name",F),I.appendChild(t);var e=i.getElementsByName&&i.getElementsByName(F).length===2+i.getElementsByName(F+0).length;return I.removeChild(t),e}),j.sortDetached=o(function(t){return 1&t.compareDocumentPosition(D.createElement("div"))}),j.getByName?(E.find.ID=function(t,e){if(typeof e.getElementById!==G&&L){var n=e.getElementById(t);return n&&n.parentNode?[n]:[]}},E.filter.ID=function(t){var e=t.replace(ke,Ce);return function(t){return t.getAttribute("id")===e}}):(E.find.ID=function(t,n){if(typeof n.getElementById!==G&&L){var i=n.getElementById(t);return i?i.id===t||typeof i.getAttributeNode!==G&&i.getAttributeNode("id").value===t?[i]:e:[]}},E.filter.ID=function(t){var e=t.replace(ke,Ce);return function(t){var n=typeof t.getAttributeNode!==G&&t.getAttributeNode("id");return n&&n.value===e}}),E.find.TAG=j.getElementsByTagName?function(t,e){return typeof e.getElementsByTagName!==G?e.getElementsByTagName(t):void 0}:function(t,e){var n,i=[],r=0,o=e.getElementsByTagName(t);if("*"===t){for(;n=o[r++];)1===n.nodeType&&i.push(n);return i}return o},E.find.NAME=j.getByName&&function(t,e){return typeof e.getElementsByName!==G?e.getElementsByName(name):void 0},E.find.CLASS=j.getElementsByClassName&&function(t,e){return typeof e.getElementsByClassName!==G&&L?e.getElementsByClassName(t):void 0},z=[],$=[],(j.qsa=n(i.querySelectorAll))&&(o(function(t){t.innerHTML="<select><option selected=''></option></select>",t.querySelectorAll("[selected]").length||$.push("\\["+oe+"*(?:value|"+re+")"),t.querySelectorAll(":checked").length||$.push(":checked")}),o(function(t){var e=D.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("t",""),t.querySelectorAll("[t^='']").length&&$.push("[*^$]="+oe+"*(?:''|\"\")"),t.querySelectorAll(":enabled").length||$.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),$.push(",.*:")})),(j.matchesSelector=n(R=I.webkitMatchesSelector||I.mozMatchesSelector||I.oMatchesSelector||I.msMatchesSelector))&&o(function(t){j.disconnectedMatch=R.call(t,"div"),R.call(t,"[s!='']:x"),z.push("!=",ce)}),$=$.length&&new RegExp($.join("|")),z=z.length&&new RegExp(z.join("|")),B=n(I.contains)||I.compareDocumentPosition?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},K=I.compareDocumentPosition?function(t,e){if(t===e)return Y=!0,0;var n=e.compareDocumentPosition&&t.compareDocumentPosition&&t.compareDocumentPosition(e);return n?1&n||!j.sortDetached&&e.compareDocumentPosition(t)===n?t===i||B(V,t)?-1:e===i||B(V,e)?1:O?ie.call(O,t)-ie.call(O,e):0:4&n?-1:1:t.compareDocumentPosition?-1:1}:function(t,e){var n,r=0,o=t.parentNode,s=e.parentNode,l=[t],u=[e];if(t===e)return Y=!0,0;if(!o||!s)return t===i?-1:e===i?1:o?-1:s?1:O?ie.call(O,t)-ie.call(O,e):0;if(o===s)return a(t,e);for(n=t;n=n.parentNode;)l.unshift(n);for(n=e;n=n.parentNode;)u.unshift(n);for(;l[r]===u[r];)r++;return r?a(l[r],u[r]):l[r]===V?-1:u[r]===V?1:0},D):D},s.matches=function(t,e){return s(t,null,null,e)},s.matchesSelector=function(t,e){if((t.ownerDocument||t)!==D&&N(t),e=e.replace(me,"='$1']"),!(!j.matchesSelector||!L||z&&z.test(e)||$&&$.test(e)))try{var n=R.call(t,e);if(n||j.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(i){}return s(e,D,null,[t]).length>0},s.contains=function(t,e){return(t.ownerDocument||t)!==D&&N(t),B(t,e)},s.attr=function(t,n){(t.ownerDocument||t)!==D&&N(t);var i=E.attrHandle[n.toLowerCase()],r=i&&i(t,n,!L);return r===e?j.attributes||!L?t.getAttribute(n):(r=t.getAttributeNode(n))&&r.specified?r.value:null:r},s.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},s.uniqueSort=function(t){var e,n=[],i=0,r=0;if(Y=!j.detectDuplicates,O=!j.sortStable&&t.slice(0),t.sort(K),Y){for(;e=t[r++];)e===t[r]&&(i=n.push(r));for(;i--;)t.splice(n[i],1)}return t},T=s.getText=function(t){var e,n="",i=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=T(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[i];i++)n+=T(e);return n},E=s.selectors={cacheLength:50,createPseudo:r,match:ye,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=(t[2]||t[3]).replace(ke,Ce),t[2]=/^\[!/.test(t[0])?"!":t[4],t[3]=(t[6]||t[7]||"").replace(ke,Ce),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||s.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&s.error(t[0]),t},PSEUDO:function(t){var e,n=!t[5]&&t[2];return ye.CHILD.test(t[0])?null:(t[4]?t[2]=t[4]:n&&ge.test(n)&&(e=f(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(ke,Ce).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=q[t+" "];return e||(e=new RegExp("(^|"+oe+")"+t+"("+oe+"|$)"))&&q(t,function(t){return e.test(t.className||typeof t.getAttribute!==G&&t.getAttribute("class")||"")})},ATTR:function(t,e,n){return function(i){var r=s.attr(i,t);return null==r?"!="===e:e?(r+="","="===e?r===n:"!="===e?r!==n:"^="===e?n&&0===r.indexOf(n):"*="===e?n&&r.indexOf(n)>-1:"$="===e?n&&r.slice(-n.length)===n:"~="===e?(" "+r+" ").indexOf(n)>-1:"|="===e?r===n||r.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(t,e,n,i,r){var o="nth"!==t.slice(0,3),s="last"!==t.slice(-4),a="of-type"===e;return 1===i&&0===r?function(t){return!!t.parentNode}:function(e,n,l){var u,c,h,p,f,d,m=o!==s?"nextSibling":"previousSibling",g=e.parentNode,v=a&&e.nodeName.toLowerCase(),y=!l&&!a;if(g){if(o){for(;m;){for(h=e;h=h[m];)if(a?h.nodeName.toLowerCase()===v:1===h.nodeType)return!1;d=m="only"===t&&!d&&"nextSibling"}return!0}if(d=[s?g.firstChild:g.lastChild],s&&y){for(c=g[F]||(g[F]={}),u=c[t]||[],f=u[0]===U&&u[1],p=u[0]===U&&u[2],h=f&&g.childNodes[f];h=++f&&h&&h[m]||(p=f=0)||d.pop();)if(1===h.nodeType&&++p&&h===e){c[t]=[U,f,p];break}}else if(y&&(u=(e[F]||(e[F]={}))[t])&&u[0]===U)p=u[1];else for(;(h=++f&&h&&h[m]||(p=f=0)||d.pop())&&((a?h.nodeName.toLowerCase()!==v:1!==h.nodeType)||!++p||(y&&((h[F]||(h[F]={}))[t]=[U,p]),h!==e)););return p-=r,p===i||0===p%i&&p/i>=0}}},PSEUDO:function(t,e){var n,i=E.pseudos[t]||E.setFilters[t.toLowerCase()]||s.error("unsupported pseudo: "+t);return i[F]?i(e):i.length>1?(n=[t,t,"",e],E.setFilters.hasOwnProperty(t.toLowerCase())?r(function(t,n){for(var r,o=i(t,e),s=o.length;s--;)r=ie.call(t,o[s]),t[r]=!(n[r]=o[s])}):function(t){return i(t,0,n)}):i}},pseudos:{not:r(function(t){var e=[],n=[],i=P(t.replace(he,"$1"));return i[F]?r(function(t,e,n,r){for(var o,s=i(t,null,r,[]),a=t.length;a--;)(o=s[a])&&(t[a]=!(e[a]=o))}):function(t,r,o){return e[0]=t,i(e,null,o,n),!n.pop()}}),has:r(function(t){return function(e){return s(t,e).length>0}}),contains:r(function(t){return function(e){return(e.textContent||e.innerText||T(e)).indexOf(t)>-1}}),lang:r(function(t){return ve.test(t||"")||s.error("unsupported lang: "+t),t=t.replace(ke,Ce).toLowerCase(),function(e){var n;do if(n=L?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return n=n.toLowerCase(),n===t||0===n.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===I},focus:function(t){return t===D.activeElement&&(!D.hasFocus||D.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeName>"@"||3===t.nodeType||4===t.nodeType)return!1;return!0},parent:function(t){return!E.pseudos.empty(t)},header:function(t){return xe.test(t.nodeName)},input:function(t){return _e.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||e.toLowerCase()===t.type)},first:p(function(){return[0]}),last:p(function(t,e){return[e-1]}),eq:p(function(t,e,n){return[0>n?n+e:n]}),even:p(function(t,e){for(var n=0;e>n;n+=2)t.push(n);return t}),odd:p(function(t,e){for(var n=1;e>n;n+=2)t.push(n);return t}),lt:p(function(t,e,n){for(var i=0>n?n+e:n;--i>=0;)t.push(i);return t}),gt:p(function(t,e,n){for(var i=0>n?n+e:n;++i<e;)t.push(i);return t})}};for(k in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})E.pseudos[k]=c(k);for(k in{submit:!0,reset:!0})E.pseudos[k]=h(k);P=s.compile=function(t,e){var n,i=[],r=[],o=J[t+" "];if(!o){for(e||(e=f(t)),n=e.length;n--;)o=b(e[n]),o[F]?i.push(o):r.push(o);o=J(t,w(r,i))}return o},E.pseudos.nth=E.pseudos.eq,S.prototype=E.filters=E.pseudos,E.setFilters=new S,j.sortStable=F.split("").sort(K).join("")===F,N(),[0,0].sort(K),j.detectDuplicates=Y,o(function(t){if(t.innerHTML="<a href='#'></a>","#"!==t.firstChild.getAttribute("href"))for(var e="type|href|src|height|width".split("|"),n=e.length;n--;)E.attrHandle[e[n]]=u}),o(function(t){if(null!=t.getAttribute("disabled"))for(var e=re.split("|"),n=e.length;n--;)E.attrHandle[e[n]]=l}),s.tokenize=f,"function"==typeof define&&define.amd?define(function(){return s}):t.Sizzle=s}(window);/*
Copyright 2013 Kumu Systems LLC. All rights reserved.
*/
var Sizzle;Sizzle=window.Sizzle,function(t,e){var n,i,r,o,s,a,l,u,c,h,p;return n=function(){},r=function(t){var e;return 1===(null!=(e=t.selectors)?e.length:void 0)?t.selectors[0]:t},p=function(){return{selector:"union",selectors:[]}},s=function(){return{selector:"intersection",selectors:[]}},c=function(t){var e,n,r,s,a,c;for(e=[],c=t.matches,s=0,a=c.length;a>s;s++)n=c[s],"string"==typeof n&&(n=unescape(n)),e.push(n);return t.matches=e,r=function(){switch(t.type){case"ID":return o;case"TAG":return h;case"CLASS":return u;case"ATTR":return i;case"PSEUDO":return l}}(),r(t)},o=function(t){return{selector:"id",id:t.matches[0]}},h=function(t){var e,n;return n=t.matches[0],"*"===n?{selector:"universal"}:/^(element|connection|loop)$/.test(n)?{selector:"generic",type:n}:(e=/-connection$/.test(n)?"connection type":"element type",{selector:"attribute",attribute:e,operator:"=",value:n.replace("-connection","")})},u=function(t){return{selector:"attribute",attribute:"tags",operator:"~=",value:t.matches[0]}},i=function(t){var e,n,i,r;return r=t.matches,e=r[0],n=r[1],i=r[2],n&&"!"!==n||(i=void 0),"~="===n&&(i=i.slice(1,-1)),{selector:"attribute",attribute:e,operator:n,operator:n,value:i}},l=function(t){var e,n,i;switch(i=t.matches,n=i[0],e=i[1],n){case"not":return{selector:"not",subselector:a(e)};default:return{selector:n,args:e}}},a=n.parse=function(t){var n,i,o,a,l,u,h,f,d;for(o=p(),i=e.tokenize(t),u=0,f=i.length;f>u;u++){for(n=i[u],a=s(),h=0,d=n.length;d>h;h++)l=n[h],a.selectors.push(c(l));o.selectors.push(r(a))}return r(o)},"function"==typeof define&&define.amd?define(function(){return n}):t.Kizzle=n}(window,Sizzle),/*
CastJS v0.0.1
http://github.com/saltybits/castjs

Copyright 2013 Salty Bits
Released under the MIT license

Date: 2013-05-03
*/
function(){var t,e,n,i,r,o,s,a,l,u,c,h,p,f,d,m,g,v,y,b=[].slice;if(i={},t={},l=function(t,n){var r,s,a,l,u;for(l=["defaults","validate","parse","format","compare"],s=0,a=l.length;a>s;s++)r=l[s],null==(u=n[r])&&(n[r]=e.defaults[r]);return i[t]=n,o(t)},r=function(e,n){return t[e]=n},o=function(t){return new n(t,h(t))},h=function(e){return i[e]||i[t[e]]||function(){throw new Error("CastJS Error: Unknown type '"+e+"'")}()},d=function(){var t,e;t=[];for(e in i)t.push(e);return t},u=function(t,e){return h(null!=e?e:p(t))},p=function(t,e){return c(e,function(e){return e.validate(t)})},c=function(t,n){var i,r,s;for(null==t&&(t=e.defaults.precedence||d()),r=0,s=t.length;s>r;r++)if(i=t[r],n(o(i)))return i},n=function(){function t(t,e){this.type=t,this.definition=e}return t.prototype.validate=function(t){return this.definition.validate instanceof RegExp?this.definition.validate.test(t):this.definition.validate(t)},t.prototype.parse=function(t,e){return this.definition.parse(t,s(e,this.definition.defaults))},t.prototype.format=function(t,e){return this.definition.format(t,s(e,this.definition.defaults))},t.prototype.massage=function(t,e){return this.format(this.parse(t,e),e)},t.prototype.compare=function(t,e){return this.definition.compare(this.parse(t),this.parse(e))},t.prototype.sort=function(t){var e;return e=this,t.sort(function(t,n){return e.compare(t,n)})},t}(),"undefined"!=typeof _&&null!==_)for(m=function(t,e,n){return function(i,r,o){var s;return s=t.parse(i),e?e.call(n,s,r,o):s}},a=function(t){return n.prototype[t]=function(e,n,i){return _[t](e,m(this,n,i),i)}},y=["each","map","find","filter","reject","all","any","max","min","sortBy"],g=0,v=y.length;v>g;g++)f=y[g],a(f);s=function(){var t,e,n,i,r,o,s,a;for(t=arguments[0],i=2<=arguments.length?b.call(arguments,1):[],null==t&&(t={}),o=0,s=i.length;s>o;o++)if(n=i[o],null!=n)for(e in n)r=n[e],null==(a=t[e])&&(t[e]=r);return t},e={defaults:{defaults:{},parse:function(t){return t},validate:function(){return!0},format:function(t){return String(t)},compare:function(t,e){return t-e},precedence:null},define:l,alias:r,get:h,as:o,typeOf:p},"undefined"!=typeof module&&null!==module&&(module.exports=e),"undefined"==typeof window||null===window||"undefined"!=typeof ender&&null!==ender||(window.Cast=e),null!=(null!=l?l.amd:void 0)&&l("cast",[],function(){return e})}.call(this),function(){Cast.define("accounting",{})}.call(this),function(){Cast.define("date",{defaults:{format:"YYYY-MM-DD"},validate:function(t){return moment(t).isValid()},parse:function(t){return moment(t).toDate()},format:function(t,e){return moment(t).format(e.format)}})}.call(this),function(){var t;t=/^([-+]?[0-9]*\.?[0-9]+)$/,Cast.define("float",{defaults:{precision:2},validate:t,parse:function(e){return Number(e.match(t)[1])},format:function(t,e){return null!=e.precision?t.toFixed(e.precision):String(t)}})}.call(this),function(){var t;t=/^([+-]?\d+)$/,Cast.define("integer",{validate:t,parse:function(e){return Number(e.match(t)[1])}})}.call(this),function(){Cast.define("json",{validate:function(t){var e;try{return JSON.parse(t)&&!0}catch(n){return e=n,!1}},parse:function(t){return JSON.parse(t)},format:function(t){return JSON.stringify(t)}})}.call(this),function(){Cast.define("markdown",{format:function(t,e){return t?marked(t,e):""}})}.call(this),function(){Cast.define("none",{})}.call(this),function(){Cast.define("number",{validate:function(t){return"NaN"!==String(Number(t))},parse:function(t){return Number(t)}})}.call(this),function(){var t;t=/^(\d*(\.\d+)?)%$/,Cast.define("percentage",{defaults:{precision:0},validate:t,parse:function(e){return Number(e.match(t)[1])/100},format:function(t,e){return""+(100*t).toFixed(e.precision)+"%"}})}.call(this),function(){Cast.define("string",{})}.call(this),function(){Cast.define("url",{defaults:{relative:!1,link:!0,shorten:!0},validate:function(){return!0},parse:function(t,e){return e.relative||/^http/.test(t)?t:t="http://"+t},format:function(t,e){var n;return e.link?(n=e.shorten?t.replace(/^http:\/\//,"").replace(/^https:\/\//,"").replace(/^www\./,""):t,'<a href="'+t+'">'+n+"</a>"):t}})}.call(this),function(){this.Blueprint=function(){function t(e){this.def=e instanceof t?_.clone(e.def):e}return t.translators={},t.translate=function(t,e){var n,i;return null==e&&(e={}),n=e.format||"auto",i=this.translators[n],i(t,e)},t.deduplicate=function(e){return e=new t(e),e.formalize().deduplicate().raw()},t.deduplicateCollection=function(t,e){var n,i,r,o,s,a,l;for(o={},s=[],a=0,l=t.length;l>a;a++)r=t[a],i=e(r),n=o[i],n?_.extend(n,r):(n=_.clone(r),o[i]=n,s.push(n));return s},t.clean=function(e){var n,i,r;if(_.isArray(e)||!_.isObject(e))return e;i={};for(n in e)r=e[n],i[n.toLowerCase()]=t.clean(r);return i},t.prototype.isFormalized=function(){return null!=this.originalDef},t.prototype.attributes=function(){return this.def.attributes||[]},t.prototype.elements=function(){return this.def.elements||[]},t.prototype.connections=function(){return this.def.connections||[]},t.prototype.get=function(t){return this.def[t]},t.prototype.raw=function(){return this.def},t.prototype.toJSON=function(){return _.clone(this.def)},t.prototype.formalize=function(){return this.originalDef=this.def,this.def=_.clone(this.def),null!=this.def.elements&&(this.def.elements=t.formalizeElements(this.def.elements)),null!=this.def.connections&&(this.def.connections=t.formalizeConnections(this.def.connections)),null!=this.def.maps&&(this.def.map=t.formalizeMaps(this.def.maps)),this},t.prototype.deduplicate=function(){return null!=this.def.elements&&(this.def.elements=t.deduplicateElements(this.def.elements)),this},t.prototype.isSimple=function(){return _.isEqual(this.def,_.pick(this.def,"attributes","elements","connections","loops"))},t}()}.call(this),function(){var t,e=[].slice;t=["_id","from","to","direction","delayed","attributes"],Blueprint.formalizeConnections=function(t){var e,n,i,r;for(r=[],n=0,i=t.length;i>n;n++)e=t[n],r.push(Blueprint.formalizeConnection(e));return r},Blueprint.formalizeConnection=function(n){var i,r;return n=Blueprint.clean(n),r=_.pick.apply(_,[n].concat(e.call(t))),i=_.omit.apply(_,[n].concat(e.call(t))),!i["connection type"]&&i.type&&(i["connection type"]=i.type,delete i.type),r.attributes=_.extend({},r.attributes,i),Blueprint.formalizeEntity(r),r}}.call(this),function(){var t,e=[].slice;t=["id","from","to","direction","curvature"],Blueprint.formalizeEdges=function(t){var e,n,i,r;for(r=[],n=0,i=t.length;i>n;n++)e=t[n],r.push(Blueprint.formalizeEdge(e));return r},Blueprint.formalizeEdge=function(n){var i,r,o;return n=Blueprint.clean(n),o={},"object"!=typeof n&&(n={id:n}),r=_.pick.apply(_,[n].concat(e.call(t))),i=n.attributes||_.omit.apply(_,[n].concat(e.call(t))),_.extend(o,r),_.isEmpty(i)||_.extend(o,{attributes:i}),o}}.call(this),function(){var t,e=[].slice;t=["_id","attributes"],Blueprint.formalizeElements=function(t){var e,n,i,r;for(r=[],n=0,i=t.length;i>n;n++)e=t[n],r.push(Blueprint.formalizeElement(e));return r},Blueprint.formalizeElement=function(n){var i,r;return n=Blueprint.clean(n),r=_.pick.apply(_,[n].concat(e.call(t))),i=_.omit.apply(_,[n].concat(e.call(t))),!i["element type"]&&i.type&&(i["element type"]=i.type,delete i.type),r.attributes=_.extend({},i,r.attributes),Blueprint.formalizeEntity(r),r},Blueprint.deduplicateElements=function(t){var e;return e=function(t){return t.attributes.label},Blueprint.deduplicateCollection(t,e)}}.call(this),function(){Blueprint.formalizeEntity=function(t){var e;return e=t.attributes,null!=e.label&&(e.label=String(e.label)),null!=e.id&&(e.id=String(e.id)),t}}.call(this),function(){Blueprint.formalizeMaps=function(){var t,e,n,i,r;for(i=this.get("maps"),r=[],e=0,n=i.length;n>e;e++)t=i[e],r.push(this.formalizeMap(t));return r},Blueprint.formalizeMap=function(t){var e;return e={},null!=t.elements&&(e.elements=Blueprint.formalizeNodes(t.elements)),null!=t.connections&&(e.connections=Blueprint.formalizeEdges(t.connections)),e}}.call(this),function(){var t,e=[].slice;t=["id","pinned","position"],Blueprint.formalizeNodes=function(t){var e,n,i,r;for(r=[],n=0,i=t.length;i>n;n++)e=t[n],r.push(this.formalizeNode(e));return r},Blueprint.formalizeNode=function(n){var i,r,o,s;return n=Blueprint.clean(n),o={},"object"!=typeof n&&(n={id:n}),r=_.pick.apply(_,[n].concat(e.call(t))),i=n.attributes||_.omit.apply(_,[n].concat(e.call(t))),null!=r.position&&null==(s=r.pinned)&&(r.pinned=!0),_.extend(o,r),_.isEmpty(i)||_.extend(o,{attributes:i}),o}}.call(this),function(){}.call(this),function(){var t=[].slice;$.callback=function(){var e,n,i,r;return r=arguments[0],e=2<=arguments.length?t.call(arguments,1):[],i=new $.Deferred,n=function(t,e){return t?i.reject(t):i.resolve(e)},e.push(n),r.apply(null,e),i.promise()}}.call(this),function(){var t,e,n,i,r=[].slice;t=jQuery,i=function(t,n,i){return n?"["+t+n+'"'+e(i)+'"]':"["+t+"]"},e=function(t){return t.replace(/"/g,'\\"')},n=function(){var t,e,n,o;return n=arguments[0],e=arguments[1],t=3<=arguments.length?r.call(arguments,2):[],o=function(){switch(t.length){case 0:return i(e);case 1:return i(e,"=",t[0]);case 2:return i(attributes,t[0],t[1])}}(),this[n](o)},t.fn.findByAttr=function(){return n.call.apply(n,[this,"find"].concat(r.call(arguments)))},t.fn.filterByAttr=function(){return n.call.apply(n,[this,"filter"].concat(r.call(arguments)))}}.call(this),function(){var t,e=[].slice;t=jQuery,t.fn.findByName=function(){var t,n,i,r,o,s;for(r=1<=arguments.length?e.call(arguments,0):[],t=r[0],n=o=0,s=r.length;s>o;n=++o)i=r[n],0===n?t=i:t+="["+i+"]";return this.find('[name="'+t+'"]')}}.call(this),function(){var t;t=jQuery,t.fn.replace=function(t,e){var n;return e instanceof Backbone.View&&(n=e,e=n.render().el),this.find('[data-role="'+t+'"]').replaceWith(e)}}.call(this),function(){$.widget("kumu.toggles",{_create:function(){var t;return t={"change .toggle":this._toggle},this._on(t)},_toggle:function(t){var e,n,i;return n=$(t.target),n.is(":radio")&&(i=n.closest(".toggles-group").find(".toggles"),i.removeClass("active")),e=n.closest(".toggles"),e.toggleClass("active",n.is(":checked"))}})}.call(this),function(){concern("ModelConcerns","Associations",function(){})}.call(this),function(){var t,e,n;e={constructor:function(t,e,n){var i;return null==n&&(n={}),this._super=e.prototype,this._super.constructor.call(this),this._instance=t,this._inverse=n.inverse,this._foreignKey=n.foreignKey||""+this._inverse+"_id",this._nested=null!=(i=n.nested)?i:!1,this._prepareReference(this),this},"new":function(t){return this._prepareModel(t)},build:function(t,e){var n;return null==t&&(t={}),n=this["new"](t),this.add(n,e),n},create:function(t,e){return this._super.create.call(this,this._prepareModel(t),e)},add:function(t,e){return t=_.isArray(t)?t.slice():[t],this._super.add.call(this,this._prepareModels(t),e)},reset:function(t,e){return t=_.isArray(t)?t.slice():[t],(null!=e?e.parse:void 0)&&(t=this._super.parse.call(this,t,e)),this._super.reset.call(this,this._prepareModels(t),e)},_prepareModels:function(t){var e,n,i,r;for(r=[],n=0,i=t.length;i>n;n++)e=t[n],r.push(this._prepareModel(e));return r},_prepareModel:function(t){var e;return t instanceof Backbone.Model?(e=t,this._inverse&&(e[this._inverse]=this._instance),null==this._instance.id||this._nested||e.set(this._foreignKey,this._instance.id)):(this._inverse&&(t[this._inverse]=this._instance),null==this._instance.id||this._nested||(t[this._foreignKey]=this._instance.id),e=this._super._prepareModel.call(this,t),this._inverse&&delete e.attributes[this._inverse]),e.collection=this,this._prepareReference(e),e},_prepareReference:function(t){return this._inverse?t[this._inverse]=this._instance:void 0}},n={},t=function(){function t(){}return t.create=function(t,i){var r,o;return o=(""+i.className+"Collection").constantize(),r=o.extend(e,n),new r(t,o,i)},t}(),namespace("window",function(e){return e.HasManyAssociation=t})}.call(this),function(){var t,e={}.hasOwnProperty,n=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};Backbone.ExtendedView=function(e){function i(){return t=i.__super__.constructor.apply(this,arguments)}return n(i,e),i.prototype.assign=function(t,e){return e.setElement(this.$(t)).render()},i}(Backbone.View)}.call(this),function(){var t,e,n,i,r,o,s={}.hasOwnProperty,a=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};e=Backbone.Collection.prototype.constructor,i=Backbone.Collection.prototype.reset,r=Backbone.Collection.prototype.set,n={index:function(t){return[t.id,t.cid]},constructor:function(n,i){return null==n&&(n=[]),null==i&&(i={}),this._index=new t(this),e.apply(this,arguments),this._index.rebuild()},toJSON:function(t){return this.collect(function(e){return e.toJSON(t)})},get:function(t){var e,n=this;return null!=t?_.isArray(t)?(e=t,_.chain(e).collect(function(t){return n.get(t)}).compact().value()):"object"==typeof t?this._index.get(t.id||t.cid):this._index.get(t):void 0},ids:function(){return _.map(this.models,function(t){return t.id})},cids:function(){return _.map(this.models,function(t){return t.cid})},reset:function(){var t;return this._index.reset(),t=i.apply(this,arguments),this._index.rebuild(),t},set:function(){var t;return this._index.reset(),t=r.apply(this,arguments),this._index.rebuild(),t},build:function(t,e){return t=this._prepareModel(t,e),this.add(t,e),t},associate:function(){return this.invoke("associate")}},_.extend(Backbone.Collection.prototype,n),Backbone.IndexedCollection=function(t){function e(){return o=e.__super__.constructor.apply(this,arguments)}return a(e,t),e}(Backbone.Collection),t=function(){function t(t){this.index={},this.rindex={},this.collection=t,this.listenTo(this.collection,"add",this.add),this.listenTo(this.collection,"change",this.update),this.listenTo(this.collection,"remove",this.remove),this.listenTo(this.collection,"reset",this.rebuild),this.rebuild()}return _.extend(t.prototype,Backbone.Events),t.prototype.modelIndentifiers=function(t){var e;return("function"==typeof(e=this.collection).index?e.index(t):void 0)||this.byId(t)},t.prototype.byId=function(t){return[t.id,t.cid]},t.prototype.get=function(t){return this.index[t]},t.prototype.add=function(t){var e,n,i,r,o;for(n=[],o=this.modelIndentifiers(t),i=0,r=o.length;r>i;i++)e=o[i],e&&(this.index[e]=t,n.push(e));return this.rindex[t.cid]=n},t.prototype.update=function(t){return this.remove(t),this.add(t)},t.prototype.remove=function(t){var e,n,i,r;if(n=this.rindex[t.cid])for(i=0,r=n.length;r>i;i++)e=n[i],delete this.index[e];return delete this.rindex[t.cid]},t.prototype.reset=function(){return delete this.index,delete this.rindex,this.index={},this.rindex={}},t.prototype.rebuild=function(){var t=this;return this.reset(),this.collection.each(function(e){return t.add(e)})},t}()}.call(this),Backbone.sync.pouchdb=function(){function t(t,e,n,i){t.post(e.toJSON(),n,i)}function e(t,e,n,i){t.put(e.toJSON(),n,i)}function n(t,e,n,i){t.remove(e.toJSON(),n,i)}function i(t,e,n,i){return e.id?t.get(e.id,n,i):e.view?(view=_.result(e,"view"),query=_.result(e,"query"),t.query(view,_.extend(n,query),i)):n.view?t.query(n.view,n,i):(t.allDocs(n,i),void 0)}var r=function(r,o,s){function a(t,e){log.trace("sync:complete",r,o,s,t,e),t?("conflict"==t.error&&(log.warn("conflict",o.toJSON(),t,e),Conflicts.process(o)),s.error&&s.error(e),l.reject(o,e,s)):(s.success&&s.success(e),l.resolve(o,e,s))}var l=new $.Deferred,u=_.result(o,"pouch")||_.result(o.collection,"pouch")||_.result(Backbone.sync,"pouch");if(s||(s={}),!u)throw"missing pouch: "+r;o.trigger("request",o,u,s);var c=_.extend({},s);switch(r){case"create":t(u,o,c,a);break;case"update":e(u,o,c,a);break;case"delete":n(u,o,c,a);break;case"read":i(u,o,c,a)}return l.promise()};return r}(),function(){var t,e={}.hasOwnProperty,n=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};Backbone.CouchCollection=function(e){function i(){return t=i.__super__.constructor.apply(this,arguments)}return n(i,e),i.prototype.sync=Backbone.sync.pouchdb,i.prototype.parse=function(t){return t.rows&&_.map(t.rows,function(t){return t.doc||t.value})},i}(Backbone.Collection)}.call(this),function(){var t,e={}.hasOwnProperty,n=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};Backbone.CouchModel=function(e){function i(){return t=i.__super__.constructor.apply(this,arguments)}return n(i,e),i.prototype.idAttribute="_id",i.prototype.validations=Backbone.CouchValidations,i.prototype.sync=Backbone.sync.pouchdb,i.prototype.clone=function(){var t;return t=_.omit(this.toJSON(),"_id","_rev"),new this.constructor(t)},i.prototype.parse=function(t){return null!=t.rev&&(t._rev=t.rev),null!=t.id&&(t._id=t.id),delete t.rev,delete t.id,delete t.ok,t},i.prototype.ordain=function(t){var e,n,i;return this.attributes._id||(null!=t?t._id:void 0)?void 0:(i={Attribute:"attr",Element:"elem",Connection:"conn",Loop:"loop",Map:"map",Node:"node",Edge:"edge",Label:"labl",Perspective:"pers",Lens:"lens"},n=i[this.className]||function(){throw new Error("id prefix undefined for: "+this.className)}.call(this),e=""+n+"-"+uuid(),this.set("_id",e),null!=t&&(t._id=e),e)},i.prototype.save=function(t,e){var n,i,r;return null==t&&(t={}),null==e&&(e={}),this.ordain(t),n=this.now(),null==this.attributes.created_at&&null==(r=t.created_at)&&(t.created_at=n),t.updated_at=n,i=e.success,e.success=function(t,e,n){return t.set({_rev:e._rev},{silent:!0}),"function"==typeof i?i(t,e,n):void 0},Backbone.Model.prototype.save.call(this,t,e)},i.prototype.destroy=function(t){var e,n;return null==t&&(t={}),this._previousCollection=this.collection,null==(n=t.headers)&&(t.headers={}),t.headers["If-Match"]=this.get("_rev"),e=t.success,t.success=function(t,n,i){return(null!=n?n.rev:void 0)&&t.set({_rev:n.rev},{silent:!0}),"function"==typeof e?e(t,n,i):void 0},Backbone.Model.prototype.destroy.call(this,t)},i.prototype.toSnapshot=function(){return _.omit(this.toJSON(),"_rev")},i.prototype.archive=function(){var t;return t=this.save({_archived:!0,archived_at:this.now()}),this.trigger("archive",this),t},i.prototype.isArchived=function(){return!!this.get("_archived")},i.prototype.restore=function(t){var e,n,i;return n=this,delete this.attributes._deleted,i=this.save({},t),this.trigger("restore",this),this._previousCollection&&(e=function(){return n._previousCollection.add(n)},(null!=t?t.wait:void 0)?i.then(e):e()),i},i.prototype.now=function(){return(new Date).toJSON()},i}(Backbone.Model)}.call(this),function(){var t,e,n,i=[].slice;e=function(t){return t.collection||t.className.pluralize().constantize()},n=function(t,n,i,r,o){var s,a,l;return r.presence&&null==i&&o.add(n,"must be present"),!r.uniqueness||(s=e(t),a={},a[n]=i,l=s.where(a),0===l.length||1===l.length&&l[0]===t)?void 0:o.add(n,"must be unique")},Backbone.Validations=function(){function e(){}return e.prototype.perform=function(e,n,i){return this.model=e,this.attributes=n,this.errors=new t(e),this.validate(e,n,i),this.errors.toJSON()},e.prototype.validate=function(){},e.prototype.validates=function(){var t,e,r,o,s,a,l;for(e=2<=arguments.length?i.call(arguments,0,o=arguments.length-1):(o=0,[]),r=arguments[o++],l=[],s=0,a=e.length;a>s;s++)t=e[s],l.push(n(this.model,t,this.attributes[t],r,this.errors));return l},e.prototype.validatesPresenceOf=function(){var t;return t=1<=arguments.length?i.call(arguments,0):[],this.validatesAll(t,{presence:!0})},e.prototype.validatesUniquenessOf=function(){var t;return t=1<=arguments.length?i.call(arguments,0):[],this.validatesAll(t,{uniqueness:!0})},e.prototype.validatesAll=function(t,e){var n,i,r,o;for(o=[],i=0,r=t.length;r>i;i++)n=t[i],o.push(this.validates(n,e));return o},e}(),t=function(){function t(t){this.model=t,this.errors={}}return t.prototype.reset=function(){return this.errors={}},t.prototype.add=function(t,e){var n,i;return(null!=(i=(n=this.errors)[t])?i:n[t]=[]).push(e)},t.prototype.isEmpty=function(){return _.isEmpty(this.errors)},t.prototype.toJSON=function(){return this.isEmpty()?void 0:_.clone(this.errors)},t.prototype.toSentence=function(){var t,e,n,i;n=[],i=this.errors;for(t in i)e=i[t],n.push(""+t+" "+e.toSentence());return n.join("; ")},t}(),Backbone.Model.prototype.validate=function(t,e){var n,i;return n=(""+this.className+"Validations").constantize()||function(){throw new Error("BackboneValidationsError: validations undefined for "+this.className)}.call(this),null==(i=n.instance)&&(n.instance=new n),n.instance.perform(this,t||this.attributes,e)},Backbone.Model.prototype.hasErrors=function(t){return t?this.validationError&&null!=this.validationError[t]:null!=this.validationError},Backbone.Model.prototype.errorMessage=function(t,e){var n,i,r;return n=null!=(r=this.validationError)?r.toSentence():void 0,i="",null!=t&&(i+=t),null!=n&&(i+=n),null!=e&&(i+=e),i}}.call(this),function(){var t,e={}.hasOwnProperty,n=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};Backbone.CouchValidations=function(e){function i(){return t=i.__super__.constructor.apply(this,arguments)}return n(i,e),i.prototype.validate=function(t){return t.isNew()?void 0:this.validatesPresenceOf("_id","_rev")},i}(Backbone.Validations)}.call(this),function(){var t=[].slice;Backbone.Events.forwardEventsFor=function(){var e,n,i,r,o;for(n=1<=arguments.length?t.call(arguments,0):[],o=[],i=0,r=n.length;r>i;i++)e=n[i],o.push(this.listenTo(e,"all",function(){return this.trigger.apply(this,arguments)}));return o},Backbone.Events.stopForwardingEventsFor=function(){var e,n,i,r,o;for(n=1<=arguments.length?t.call(arguments,0):[],o=[],i=0,r=n.length;r>i;i++)e=n[i],o.push(this.stopListening(e,"all"));return o},_.extend(Backbone.Model.prototype,Backbone.Events),_.extend(Backbone.Collection.prototype,Backbone.Events)}.call(this),function(){Backbone.Memento=function(){function t(t){this.model=t,this.update()}return t.prototype.clone=function(){var t;return t=new Backbone.Memento(this.model),t.attributes=this.toJSON(),t},t.prototype.update=function(){return this.attributes=this.capture()},t.prototype.restore=function(){return this.model.set(this.attributes)},t.prototype.hasChanged=function(){return!_.isEqual(this.attributes,this.capture())},t.prototype.get=function(t){return this.attributes[t]},t.prototype.toJSON=function(){return _.clone(this.attributes)},t.prototype.capture=function(){var t;return("function"==typeof(t=this.model).toSnapshot?t.toSnapshot():void 0)||this.model.toJSON()},t}(),Backbone.Model.prototype.toMemento=function(){return new Backbone.Memento(this)}}.call(this),function(){var t;t=Backbone.Model.prototype.save,Backbone.Model.wrap=function(t,e){return wrap(t,e)},Backbone.Model.prototype.conflictClass=function(){return(""+this.className+"Conflict").constantize()},Backbone.Model.prototype.buildConflict=function(t){var e,n;return null==t&&(t={}),e=_.defaults({model:this},t),n=(""+this.className+"Conflict").constantize(),new n(e)},Backbone.Model.prototype.setOnce=function(t,e,n){var i;"object"==typeof t?(i=t,n=e):(i={},i[t]=e);for(t in i)e=i[t],null!=this.attributes[t]&&delete i[t];return Backbone.Model.prototype.set.call(i,null,n)},Backbone.Model.prototype.peek=function(t){var e,n;return log.warn("Model#peek is deprecated, use fetch instead"),t=_.defaults({},t,{parse:!0}),e=this,n=t.success,t.success=function(i){return t.parse&&(i=e.parse(i,t)),n?n(e,i,t):void 0},t.error=function(n){return error&&error(e,n,t),e.trigger("error",e,n,t)},this.sync("read",this,t)},Backbone.Model.prototype.save=function(e,n){var i,r;return r=t.call(this,e,n),r?r:(i=new $.Deferred,i.reject(this,this.validationError,n),i.promise())},Backbone.Model.prototype.hasMany=function(t,e){var n;return null==e&&(e={}),null==(n=e.className)&&(e.className=t.singularize().classify()),this[t]=HasManyAssociation.create(this,e)}}.call(this),function(){Backbone.sync.pouchdb.batch=function(t){var e,n,i,r;if(!t)throw new Error("batch db required");return e=[],n=[],r=function(i,r,o){var s,a,l;return null==o&&(o={}),a=new $.Deferred,s=function(t,e){return log.trace("sync:complete",i,r,t,e),t?("conflict"===t.error&&(log.error("conflict",r.toJSON(),t,e),alert("Unable to save changes due to conflict. Please refresh the page to continue.")),"function"==typeof o.error&&o.error(e),a.reject(r,e,o)):("function"==typeof o.success&&o.success(e),a.resolve(r,e,o))},r.trigger("request",r,t,o),l=r.toJSON(),"delete"===i&&(l._deleted=!0),e.push(l),n.push({model:r,callback:s}),a.promise()},i=function(){var i,r;return r=new $.Deferred,i=function(t,e){var i,o,s,a,l,u,c,h;if(t)return r.reject(t);for(o=!1,s=u=0,c=e.length;c>u;s=++u)l=e[s],h=n[s],a=h.model,i=h.callback,l.error?(o=!0,i(l,void 0)):i(void 0,l);return o?r.reject(l):r.resolve(l)},t.bulkDocs({docs:e},{},i),r.promise()},{sync:r,send:i}}}.call(this),function(){Backbone.Model.prototype.validate=function(t,e){var n,i,r;return n=""+this.className+"Validations",i=n.constantize()||raise("Validation error: "+n+" undefined"),null==(r=i.instance)&&(i.instance=new i),i.instance.perform(this,t||this.attributes,e)}}.call(this),function(){var t,e;t=Backbone.View.prototype.constructor,e=Backbone.View.prototype.remove,Backbone.View.prototype.constructor=function(){return this.subviews={named:[],anonymous:[]},this.render=_.wrap(this.render,function(t){return this.removeSubviews("anonymous"),t.apply(this,Array.prototype.slice.call(arguments,1))}),t.apply(this,arguments)},Backbone.View.prototype.subview=function(t,e){return _.isString(t)?(this[t]=e,this.subviews.named.push(e)):(e=t,this.subviews.anonymous.push(e)),e},Backbone.View.prototype.remove=function(){return this.removeSubviews(),e.apply(this,arguments),this.trigger("remove")},Backbone.View.prototype.getSubviews=function(t){return t?this.subviews[t]:[].concat(this.subviews.named,this.subviews.anonymous)},Backbone.View.prototype.removeSubviews=function(t){var e,n,i,r;if(this.subviews){for(r=this.getSubviews(t),n=0,i=r.length;i>n;n++)e=r[n],this.stopListening(e),e.remove();return this.resetSubviews(t)}},Backbone.View.prototype.resetSubviews=function(t){return t?this.subviews[t].length=0:this.subviews.named.length=this.subviews.anonymous.length=0}}.call(this),function(){}.call(this),FastClick.prototype.deviceIsAndroid=navigator.userAgent.indexOf("Android")>0,FastClick.prototype.deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent),FastClick.prototype.deviceIsIOS4=FastClick.prototype.deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent),FastClick.prototype.deviceIsIOSWithBadTarget=FastClick.prototype.deviceIsIOS&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent),FastClick.prototype.needsClick=function(t){"use strict";switch(t.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(t.disabled)return!0;break;case"input":if(this.deviceIsIOS&&"file"===t.type||t.disabled)return!0;break;case"label":case"video":return!0}return/\bneedsclick\b/.test(t.className)},FastClick.prototype.needsFocus=function(t){"use strict";switch(t.nodeName.toLowerCase()){case"textarea":case"select":return!0;case"input":switch(t.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!t.disabled&&!t.readOnly;default:return/\bneedsfocus\b/.test(t.className)}},FastClick.prototype.sendClick=function(t,e){"use strict";var n,i;document.activeElement&&document.activeElement!==t&&document.activeElement.blur(),i=e.changedTouches[0],n=document.createEvent("MouseEvents"),n.initMouseEvent("click",!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,t.dispatchEvent(n)},FastClick.prototype.focus=function(t){"use strict";var e;this.deviceIsIOS&&t.setSelectionRange&&0!==t.type.indexOf("date")&&"time"!==t.type?(e=t.value.length,t.setSelectionRange(e,e)):t.focus()},FastClick.prototype.updateScrollParent=function(t){"use strict";var e,n;if(e=t.fastClickScrollParent,!e||!e.contains(t)){n=t;do{if(n.scrollHeight>n.offsetHeight){e=n,t.fastClickScrollParent=n;break}n=n.parentElement}while(n)}e&&(e.fastClickLastScrollTop=e.scrollTop)},FastClick.prototype.getTargetElementFromEventTarget=function(t){"use strict";return t.nodeType===Node.TEXT_NODE?t.parentNode:t},FastClick.prototype.onTouchStart=function(t){"use strict";var e,n,i;if(t.targetTouches.length>1)return!0;if(e=this.getTargetElementFromEventTarget(t.target),n=t.targetTouches[0],this.deviceIsIOS){if(i=window.getSelection(),i.rangeCount&&!i.isCollapsed)return!0;if(!this.deviceIsIOS4){if(n.identifier===this.lastTouchIdentifier)return t.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(e)}}return this.trackingClick=!0,this.trackingClickStart=t.timeStamp,this.targetElement=e,this.touchStartX=n.pageX,this.touchStartY=n.pageY,t.timeStamp-this.lastClickTime<200&&t.preventDefault(),!0},FastClick.prototype.touchHasMoved=function(t){"use strict";var e=t.changedTouches[0],n=this.touchBoundary;return Math.abs(e.pageX-this.touchStartX)>n||Math.abs(e.pageY-this.touchStartY)>n?!0:!1},FastClick.prototype.onTouchMove=function(t){"use strict";return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(t.target)||this.touchHasMoved(t))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},FastClick.prototype.findControl=function(t){"use strict";return void 0!==t.control?t.control:t.htmlFor?document.getElementById(t.htmlFor):t.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},FastClick.prototype.onTouchEnd=function(t){"use strict";var e,n,i,r,o,s=this.targetElement;if(!this.trackingClick)return!0;if(t.timeStamp-this.lastClickTime<200)return this.cancelNextClick=!0,!0;if(this.cancelNextClick=!1,this.lastClickTime=t.timeStamp,n=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,this.deviceIsIOSWithBadTarget&&(o=t.changedTouches[0],s=document.elementFromPoint(o.pageX-window.pageXOffset,o.pageY-window.pageYOffset)||s,s.fastClickScrollParent=this.targetElement.fastClickScrollParent),i=s.tagName.toLowerCase(),"label"===i){if(e=this.findControl(s)){if(this.focus(s),this.deviceIsAndroid)return!1;s=e}}else if(this.needsFocus(s))return t.timeStamp-n>100||this.deviceIsIOS&&window.top!==window&&"input"===i?(this.targetElement=null,!1):(this.focus(s),this.deviceIsIOS4&&"select"===i||(this.targetElement=null,t.preventDefault()),!1);return this.deviceIsIOS&&!this.deviceIsIOS4&&(r=s.fastClickScrollParent,r&&r.fastClickLastScrollTop!==r.scrollTop)?!0:(this.needsClick(s)||(t.preventDefault(),this.sendClick(s,t)),!1)},FastClick.prototype.onTouchCancel=function(){"use strict";this.trackingClick=!1,this.targetElement=null},FastClick.prototype.onMouse=function(t){"use strict";return this.targetElement?t.forwardedTouchEvent?!0:t.cancelable?!this.needsClick(this.targetElement)||this.cancelNextClick?(t.stopImmediatePropagation?t.stopImmediatePropagation():t.propagationStopped=!0,t.stopPropagation(),t.preventDefault(),!1):!0:!0:!0},FastClick.prototype.onClick=function(t){"use strict";var e;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===t.target.type&&0===t.detail?!0:(e=this.onMouse(t),e||(this.targetElement=null),e)},FastClick.prototype.destroy=function(){"use strict";var t=this.layer;this.deviceIsAndroid&&(t.removeEventListener("mouseover",this.onMouse,!0),t.removeEventListener("mousedown",this.onMouse,!0),t.removeEventListener("mouseup",this.onMouse,!0)),t.removeEventListener("click",this.onClick,!0),t.removeEventListener("touchstart",this.onTouchStart,!1),t.removeEventListener("touchmove",this.onTouchMove,!1),t.removeEventListener("touchend",this.onTouchEnd,!1),t.removeEventListener("touchcancel",this.onTouchCancel,!1)},FastClick.notNeeded=function(t){"use strict";var e;if("undefined"==typeof window.ontouchstart)return!0;if(/Chrome\/[0-9]+/.test(navigator.userAgent)){if(!FastClick.prototype.deviceIsAndroid)return!0;if(e=document.querySelector("meta[name=viewport]"),e&&-1!==e.content.indexOf("user-scalable=no"))return!0}return"none"===t.style.msTouchAction?!0:!1},FastClick.attach=function(t){"use strict";return new FastClick(t)},"undefined"!=typeof define&&define.amd?define(function(){"use strict";return FastClick}):"undefined"!=typeof module&&module.exports?(module.exports=FastClick.attach,module.exports.FastClick=FastClick):window.FastClick=FastClick,function(){var t,e,n,i={}.hasOwnProperty,r=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t
};t=function(t){function e(t,n){null==n&&(n={}),e.__super__.constructor.call(this),this.options=n,this.transaction=new Transaction,this._flags=[],this._summary={status:"initialize",totals:{elements:{recognized:0,processed:0,saved:0,created:0,updated:0,errors:0},connections:{recognized:0,processed:0,saved:0,created:0,updated:0,errors:0}}},this.source(t)}return r(e,t),e.prototype.className="Import",e.prototype.defaults=function(){return{totalElementsIdentified:0}},e.prototype.summary=function(){return this._summary},e.prototype.counts=function(t){return this._summary.totals[t]},e.prototype.count=function(t,e,n){var i;return i=this.counts(t),null!=n?(i[e]=n,this):i[e]},e.prototype.increment=function(t,e){var n;return n=this.count(t,e)+1,this.count(t,e,n)},e.prototype.source=function(t){return null!=t?(this._source=t,this):this._source},e.prototype.target=function(t){return null!=t?(this._target=t,this):this._target},e.prototype.format=function(t){var e;return null!=t?(this._format=t,this):this._format||("function"==typeof(e=this._source).format?e.format():void 0)||this.impliedFormat()},e.prototype.impliedFormat=function(){var t,e;return t=this.data(),_.isObject(t)?_.isArray(t)||null!=t.sheets?"spreadsheet":"blueprint":_.isString(t)?(e=t.split("\n")[0],e.startsWith("{")?"json":e.contains("	")?"tsv":"csv"):void 0},e.prototype.autoformat=function(){return this._format=void 0,this},e.prototype.as=function(t){return this.format(t)},e.prototype.flags=function(){return this._flags},e.prototype.data=function(){return this._data||this._source},e.prototype.model=function(){return this._model},e.prototype.blueprint=function(){return this._blueprint},e.prototype.handler=function(){var t;return null!=(t=this._handler)?t:this._handler=this.initializeHandler()},e.prototype.initializeHandler=function(){var t,e;return t=this.format(),e=function(){switch(t){case"xlsx":return"XLSXImporter";case"csv":return"CSVImporter";case"spreadsheet":return"SpreadsheetImporter";case"blueprint":case"json":return"BlueprintImporter";default:return raise("Import format not recognized: "+t)}}(),new Imports.Importers[e](this)},e.prototype.process=function(t){var e,n,i,r,o,s,a;return o=this,t=_.defaults({},t,{save:!1}),n=function(){return o.fetch()},r=function(){return o.prepare()},a=function(){return o.validate()},s=function(){return o.translate()},e=function(){return o.build()},i=function(){return t.save?o.save():void 0},n().then(r).then(a).then(s).then(e).then(i).otherwise(function(t){return o.error=t,raise(t)})},e.prototype.fetch=function(){var t,e;return t=this,log.debug("Fetch",this._source),When(("function"==typeof(e=this._source).fetch?e.fetch():void 0)||this._source).then(function(e){return log.debug("Fetch result",e),t._data=e})},e.prototype.prepare=function(){var t;return t=this,When.fn.call(function(){var e,n,i;return e=t.data(),n=t.format(),i=t.handler(),log.debug("Format",n),log.debug("Handler",i),i.prepare(e)}).then(function(e){return log.debug("Model",e),t._model=e})},e.prototype.validate=function(){var t;return t=this,When.fn.call(function(){var e;return e=t.handler(),e.validate(t._model)})},e.prototype.translate=function(){var t;return t=this,When.fn.call(function(){var e;return e=t.handler(),e.translate(t._model)}).then(function(e){return log.debug("Blueprint",e),e=new Blueprint(e),e.formalize(),t._blueprint=e,t.count("elements","recognized",e.elements().length),t.count("connections","recognized",e.connections().length),t.update()})},e.prototype.build=function(){var t;return log.debug("Building",this._blueprint),t=this,When.fn.call(function(){return t.buildBlueprint(t._blueprint)})},e.prototype.save=function(){return this.transaction.execute()},e.prototype.undo=function(){return this.transaction.undo()},e.prototype.cancel=function(){return this.undo()},e.prototype.flag=function(t,e){return null==e&&(e=!0),this._flags.push({key:t,value:e})},e.prototype.isFlagged=function(){return this._flags.length>0},e.prototype.hasFlag=function(t){return _.any(this._flags,function(e){return e.key===t})},e.prototype.update=function(){return this.trigger("progress",this._summary)},e}(Backbone.Model),e=function(e){function i(){return n=i.__super__.constructor.apply(this,arguments)}return r(i,e),i.prototype.className="ImportCollection",i.prototype.model=t,i}(Backbone.Collection),namespace("window",function(n){return n.Import=t,n.ImportCollection=e})}.call(this),function(){extend(Import,{buildAttributes:function(t){var e,n,i,r;if(t){for(r=[],n=0,i=t.length;i>n;n++)e=t[n],r.push(this.buildAttribute(e));return r}},buildAttribute:function(t){var e;return e=Attributes.get(t.name),e?this.transaction.update(e,t):(e=Attributes.build(t),this.transaction.create(e)),e}})}.call(this),function(){extend(Import,{buildBlueprint:function(t){var e,n,i,r,o,s,a;if(t.isFormalized()||raise("Formal blueprint required"),e=this.buildAttributes(t.get("attributes")),r=this.buildElements(t.elements()),i=this.buildConnections(t.connections()),t.isSimple()&&this._target){for(o=this._target,s=0,a=i.length;a>s;s++)n=i[s],r.push(n.from,n.to);return r=_.uniq(r),this.placeElements(o,r),this.placeConnections(o,i)}}})}.call(this),function(){extend(Import,{buildConnections:function(t){var e,n,i,r,o;if(i=[],t)for(r=0,o=t.length;o>r;r++)n=t[r],e=this.buildConnection(n),e&&i.push(e);return i},buildConnection:function(t){var e;return t.from=this.findOrCreateElement(t.from),t.to=this.findOrCreateElement(t.to),e=this.updateConnection(t)||this.createConnection(t),this.finalizeEntity(e,t),e},updateConnection:function(t){var e,n;if(e=Connections.reconcile(t))try{this.transaction.update(e,function(){return e.redirect({from:t.from,to:t.to}),e.mergeAttr(t.attributes)}),this.increment("connections","updated")}catch(i){n=i,log.warn("Conflicting connection",e,t),e=null}return e},createConnection:function(t){var e,n;return e=_.clone(t),e._id=e.id,delete e.id,n=Connections.build(e),this.transaction.create(n),this.increment("connections","created"),n}})}.call(this),function(){extend(Import,{buildElements:function(t){var e,n,i,r;if(t){for(r=[],n=0,i=t.length;i>n;n++)e=t[n],r.push(this.buildElement(e));return r}return[]},buildElement:function(t){var e;return _.isString(t)&&(t={attributes:{label:t}}),e=this.updateElement(t)||this.createElement(t),this.finalizeEntity(e,t),e},findOrCreateElement:function(t){return Elements.reconcile(t)||this.buildElement(t)},updateElement:function(t){var e,n;if(e=Elements.reconcile(t))try{this.transaction.update(e,function(){return e.mergeAttr(t.attributes)}),this.increment("elements","updated")}catch(i){n=i,log.warn("Conflicting element",e,t),e=null}return e},createElement:function(t){var e;return t._id=t.id,delete t.id,e=Elements.build(t),this.transaction.create(e),this.increment("elements","created"),e}})}.call(this),function(){extend(Import,{finalizeEntity:function(t,e){var n,i,r;r=t.getAttrs();for(n in r)i=r[n],Attributes.get(n)||this.buildAttribute({name:n});return t.blueprint=e,t}})}.call(this),function(){extend(Import,{placeElements:function(t,e){var n,i,r,o;for(o=[],i=0,r=e.length;r>i;i++)n=e[i],o.push(this.placeElement(t,n));return o},placeElement:function(t,e){var n;return n=t.nodes.get(e),n||(n=t.addElement(e),this.transaction.create(n)),n},placeConnections:function(t,e){var n,i,r,o;for(o=[],i=0,r=e.length;r>i;i++)n=e[i],o.push(this.placeConnection(t,n));return o},placeConnection:function(t,e){var n;return n=t.edges.get(e),n||(n=t.addConnection(e),this.transaction.create(n)),n}})}.call(this),function(){extend(Import,{buildNodes:function(t,e){var n,i,r,o;for(o=[],i=0,r=e.length;r>i;i++)n=e[i],o.push(t.nodes.add(this.buildNode(n)));return o},buildNode:function(t){var e,n,i;return i={entity_id:t.id,position:t.position,pinned:t.pinned},t.attributes&&(e=_.extend({id:t.id},t.attributes),e=Blueprint.formalizeElement(e),i.entity=this.buildElement(e)),n=new Node(i),n.blueprint=t,n}})}.call(this),function(){}.call(this),function(){var t,e,n,i,r,o,s,a,l,u;l=function(t,e){var n,i,r,o,a;for(null==e&&(e={}),n={ready:!1,type:null,blueprint:{},blanks:0},t=_.string.trim(t)+"\n",r=$.csv.toArrays(t),o=0,a=r.length;a>o;o++)i=r[o],s(n,u(i));return n.blueprint},u=function(t){var e,n,i,r;for(e=[],i=0,r=t.length;r>i;i++)n=t[i],e.push(_.string.trim(n));return e},s=function(t,e,i){return n(e)?(t.blanks+=1,t.blanks>=2?t.ready=!1:void 0):(t.blanks=0,t.ready?a(t,e,i):o(t,e,i))},n=function(t){return 1===t.length&&_.isEmpty(t[0])},o=function(t,n){var i,r,o,s,a,l,u;for(o=t.headers=n,t.attributes=[],t.currentCollection=e(o),a=0,l=o.length;l>a;a++)r=o[a],i=_.string.trim(r),t.attributes.push(i),null==(u=(s=t.blueprint).attributes)&&(s.attributes=[]),t.blueprint.attributes.push({name:i});return t.ready=!0},e=function(t){var e,n;switch(e=t[0],n=t[1],e.toLowerCase()){case"label":return"elements";case"from":return"connections";default:return"elements"}},a=function(e,n,i){var o;return o=n,r(e,o,i),t(e,o,i)},r=function(t,e){var n,i,r,o;return!t.currentEntity||e[0]?(t.currentEntity={},n=null!=(o=(i=t.blueprint)[r=t.currentCollection])?o:i[r]=[],n.push(t.currentEntity)):void 0},t=function(t,e){var n,r,o,s,a,l;for(l=[],r=s=0,a=e.length;a>s;r=++s)o=e[r],n=t.attributes[r],l.push(t.currentEntity[n]=i(o));return l},i=function(t){var e;try{return JSON.parse(t)}catch(n){return e=n,t}},Blueprint.translateCSV=Blueprint.translators.csv=l}.call(this),function(){var t,e,n,i,r,o;o=function(){var t;return t={},e(t),i(t),n(t),r(t),t},e=function(e){var n,i,r,o,s,a,l;for(e.attributes=[],r=(new Attribute).toJSON(),a=Attributes.models,l=[],o=0,s=a.length;s>o;o++)n=a[o],i=t(n.toJSON(),r),l.push(e.attributes.push(i));return l},i=function(t){var e,n,i,r,o,s;for(t.elements=[],o=Elements.models,s=[],i=0,r=o.length;r>i;i++)n=o[i],e=n.toJSON().attributes,e.id=n.id,s.push(t.elements.push(e));return s},n=function(t){var e,n,i,r,o,s;for(t.connections=[],o=Connections.models,s=[],i=0,r=o.length;r>i;i++)n=o[i],e=n.toJSON().attributes,e.id=n.id,e.from=n.from.id,e.to=n.to.id,s.push(t.connections.push(e));return s},r=function(e){var n,i,r,o,s,a,l;for(e.maps=[],i=(new Map).toJSON(),a=Maps.models,l=[],o=0,s=a.length;s>o;o++)r=a[o],n=t(r.toJSON(),i),n.id=r.id,l.push(e.maps.push(n));return l},t=function(t,e){var n,i,r,o;null==e&&(e={}),r={},n=["_conflicts","_doc_id_rev","_id","_rev","created_at","updated_at"];for(i in t)o=t[i],_.include(n,i)||_.isEqual(o,e[i])||(r[i]=o);return r},window.toBlueprint=o}.call(this),function(){var t;t=function(){function t(t){this["import"]=t}return t.prototype.prepare=function(t){var e,n;if(_.isString(t))try{e=JSON.parse(t)}catch(i){n=i,this["import"].flag("json-invalid"),raise("json-invalid")}else e=t;return e},t.prototype.validate=function(){},t.prototype.translate=function(t){return t},t}(),namespace("Imports.Importers",function(e){return e.BlueprintImporter=t})}.call(this),function(){var t;t=function(){function t(t){this["import"]=t,this.attributes=[]}return t.prototype.prepare=function(t){return t},t.prototype.validate=function(t){var e,n,i,r,o,s;for(o=this.sheets(t),s=[],e=i=0,r=o.length;r>i;e=++i)n=o[e],s.push(this.validateSheet(n,e));return s},t.prototype.validateSheet=function(t){var e,n,i,r;switch(r=this.headers(t),n=_.map(r,function(t){return _.str.trim(t).toLowerCase()}),i=n[0],e=this.identifyCollection(n),/(label|from)/i.test(i)||this["import"].flag("irregular"),e){case"elements":if(!_.contains(n,"label"))return this["import"].flag("labels-not-found")}},t.prototype.headers=function(t){var e,n,i;for(n=0,i=t.length;i>n;n++)if(e=t[n],!this.blank(e))return e;return[]},t.prototype.translate=function(t){var e,n,i,r,o;for(this.blueprint={attributes:[],elements:[],connections:[]},o=this.sheets(t),e=i=0,r=o.length;r>i;e=++i)n=o[e],this.reset(),this.context.sheet=n,this.context.sheetNumber=e,this.processSheet(n);return this.blueprint.attributes=this.formalizeAttributes(),this.blueprint},t.prototype.processSheet=function(t){var e,n,i,r;for(e=i=0,r=t.length;r>i;e=++i)n=t[e],this.context.row=n,this.context.rowNumber=e,this.processRow(n);return this.commit()},t.prototype.flush=function(){return this.commit(),this.reset()},t.prototype.reset=function(){return this.context={blanks:0,locked:!1,collection:null,entity:null,sheet:null,sheetNumber:null,rows:[],row:null,rowNumber:null,columns:[],column:null,columnNumber:null,attributes:[],attribute:null,attributeName:null}},t.prototype.processRow=function(t){return this.blank(t)?(this.context.blanks+=1,this.context.blanks>=2?this.flush():void 0):(this.context.blanks=0,this.context.locked?this.processValues(t):this.processHeaders(t))},t.prototype.processHeaders=function(t){var e,n,i,r;for(n=i=0,r=t.length;r>i;n=++i)e=t[n],this.processHeader(e,n);return this.context.collection=this.identifyCollection(this.context.columns),this.context.locked=!0},t.prototype.processHeader=function(t,e){var n,i;return i=this.trim(t),this.blank(i)?0!==e&&(i=this.context.columns[e-1],n=this.context.attributes[e-1]):(n=Attributes.get(i),this.attributes.push(i)),this.context.columns[e]=i,this.context.attributes[e]=n},t.prototype.processValues=function(t){var e,n,i,r,o;for(this.blank(t[0])||this.shift(),o=[],e=i=0,r=t.length;r>i;e=++i)n=t[e],this.context.value=n,this.context.column=this.context.columns[e],this.context.columnNumber=e,this.context.attribute=this.context.attributes[e],this.context.attributeName=this.context.column,o.push(this.processValue(n));return o},t.prototype.processValue=function(t){var e,n,i,r,o;return i=this.context.entity,e=this.context.attribute,n=this.context.attributeName,t=this.parse(this.trim(t)),""!==t?(r=i[n],null!=r?(o=_.isArray(r)?r:[r],o.push(t),i[n]=o):i[n]=t):void 0},t.prototype.identifyCollection=function(t){var e,n;switch(e=t[0],n=t[1],e.toLowerCase()){case"label":return"elements";case"from":return"connections";default:return"elements"}},t.prototype.formalizeAttributes=function(){return _.chain(this.attributes).uniq().reject(function(t){return/from|to/i.test(t)}).map(function(t){return{name:t}}).value()},t.prototype.shift=function(){return this.context.entity&&this.commit(),this.context.entity={}},t.prototype.commit=function(){return _.isEmpty(this.context.entity)?void 0:this.blueprint[this.context.collection].push(this.context.entity)},t.prototype.parse=function(t){var e;if(t.contains("|"))return t.split("|");try{return JSON.parse(t)}catch(n){return e=n,t}},t.prototype.trim=function(t){return _.string.trim(t)},t.prototype.blank=function(t){var e,n,i;for(_.isArray(t)||(t=[t]),n=0,i=t.length;i>n;n++)if(e=t[n],null!=e&&/[^\s]+/.test(e))return!1;return!0},t.prototype.sheets=function(t){return t.sheets||[t]},t}(),namespace("Imports.Importers",function(e){return e.SpreadsheetImporter=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.prepare=function(t){var e,n;try{t=t.replace(/[“”]/g,'""').replace(/[‘’]/g,"'").trim()+"\n",n=$.csv.toArrays(t)}catch(i){e=i,log.error("Unable to parse CSV"),log.error(e),raise("parse-error")}return n},n}(Imports.Importers.SpreadsheetImporter),namespace("Imports.Importers",function(e){return e.CSVImporter=t})}.call(this),function(){var t,e,n,i,r={}.hasOwnProperty,o=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};t=function(){var t,e,i,r;return e=function(e){return zip.useWebWorkers=!1,r(e).then(i).then(t)},r=function(t){var e,n,i,r;return e=When.defer(),r=new zip.Data64URIReader(t),n=function(t){var n;try{return t.getEntries(function(t){return e.resolve(t)})}catch(i){return n=i,log.error(n),e.reject(n)}finally{t.close()}},i=function(t){return e.reject(t)},zip.createReader(r,n,i),e.promise},i=function(t){var e,n;return n={shared:null,worksheets:[]},t=_.filter(t,function(t){return/(sharedStrings|worksheets).*\.xml$/.test(t.filename)}),e=function(t){var e,i;return e=When.defer(),i=function(i){return/sharedStrings/.test(t.filename)?n.shared=i:n.worksheets.push(i),e.resolve()},t.getData(new zip.TextWriter,i),e.promise},When.map(t,e).then(function(){return n})},t=function(t){var e,i,r,o,s,a,l,u;for(r=[],o=$(t.shared).find("si t").map(function(){return $(this).html()}),u=t.worksheets,a=0,l=u.length;l>a;a++)s=u[a],i=[],e=$(s),e.find("sheetData row").each(function(){var t,e,r;return r=[],t=$(this),t.find("c").each(function(){var t,e,i;return t=$(this),i=Number(t.find("v").html()),"s"===t.attr("t")&&(i=o[i]),e=n(t.attr("r")),r[e]=i}),e=Number(t.attr("r"))-1,i[e]=r}),r.push(i);return r},{parse:e}}(),n=function(t){var e,n,i,r,o,s,a,l;for(o=t.match(/[A-Z]+/)[0],r=function(t){return t.charCodeAt(0)-"A".charCodeAt(0)+1},n=0,l=_.string.reverse(o),i=s=0,a=l.length;a>s;i=++s)e=l[i],n+=r(e)*Math.pow(26,i);return n-=1},e=function(e){function n(){return i=n.__super__.constructor.apply(this,arguments)}return o(n,e),n.prototype.prepare=function(e){return t.parse(e).then(function(t){return{sheets:t}})},n}(Imports.Importers.SpreadsheetImporter),namespace("Imports.Importers",function(t){return t.XLSXImporter=e})}.call(this),function(){var t;t=function(t,e){return null==e&&(e={}),JSON.parse(t)},Blueprint.translateJSON=Blueprint.translators.json=t}.call(this),function(){var t;t=function(){function t(t){this.blueprint=t}return t.prototype.fetch=function(){return $.when(this.blueprint)},t}(),namespace("ImportSources",function(e){return e.DirectSource=t})}.call(this),function(){var t;t=function(){function t(t){this.file=t}return t.prototype.fetch=function(){var t,e,n,i,r;switch(t=When.defer(),e=this.method(),i=function(){var n;return n=r.result,"text"===e&&(n=n.replace(/\r\n/g,"\n").replace(/\r/g,"\n")),t.resolve(n)},n=function(){return raise("file-not-readable")},r=new FileReader,r.onload=i,r.onerror=n,e){case"url":r.readAsDataURL(this.file);break;case"binary":r.readAsBinaryString(this.file);break;case"text":r.readAsText(this.file)}return t.promise},t.prototype.format=function(){var t;switch(t=this.file.name.split(".").pop()){case"xlsx":case"csv":case"tsv":case"json":return t;default:switch(this.file.type){case"application/json":return"json";case"text/csv":return"csv";case"text/tsv":return"tsv";default:return"auto"}}},t.prototype.method=function(){return"xlsx"===this.format()?"url":"text"},t}(),namespace("Imports",function(e){return e.FileSource=t})}.call(this),function(){}.call(this),function(){this.JST||(this.JST={}),this.JST["main/templates/accounts/delete"]=function(t){t||(t={});var e,n=[],i=t.safe,r=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<div class="alert-warning">\n  <h4>Warning</h4>\n\n  <p>\n    Projects cannot be recovered once deleted. Are you sure you want to delete this project?\n  </p>\n</div>\n\n<form data-remote>\n  <input type="submit" class="btn btn-block btn-danger" value="Delete Project" />\n</form>\n')}).call(this)}.call(t),t.safe=i,t.escape=r,n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["main/templates/accounts/rename"]=function(t){t||(t={});var e,n=[],i=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?o(t):""},r=t.safe,o=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},o||(o=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<div class="alert-warning">\n  <h4>Warning</h4>\n\n  <p>\n    Renaming the project will break any existing URLs pointing\n    to this project.\n  </p>\n</div>\n\n<form data-remote>\n  <input type="text" class="input-block-level" name="name" value="'),n.push(i(this.name)),n.push('" />\n  <input type="submit" class="btn btn-block btn-danger" value="Rename Project" />\n</form>\n')}).call(this)}.call(t),t.safe=r,t.escape=o,n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["main/templates/accounts/show"]=function(t){t||(t={});var e,n=[],i=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?o(t):""},r=t.safe,o=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},o||(o=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<nav class="sidebar-nav">\n  <button class="sidebar-nav-back btn btn-flat"><i class="icon-chevron-left"></i> Back</button>\n  <div class="sidebar-nav-context">About this Project</div>\n</nav>\n\n<div class="sidebar-content container">\n  <header>\n    <h1 class="sidebar-header">'),n.push(i(this.name)),n.push('</h1>\n  </header>\n\n  <div class="account-description"></div>\n\n  <div class="credits">\n    <section>\n      <div class="name support-heading">'),n.push(i(this.owner.name)),n.push('</div>\n      <div class="username">'),n.push(i(this.owner.username)),n.push('</div>\n    </section>\n\n    <section>\n      <img class="avatar" src="'),n.push(i(this.owner.image)),n.push('" />\n      <a href="#" class="manage-members avatar" title="Add Member" data-ability="manage-members"><i class="icon-plus"></i></a>\n    </section>\n  </div>\n</div>\n')}).call(this)}.call(t),t.safe=r,t.escape=o,n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["main/templates/actionbar/decorate_menu"]=function(t){t||(t={});var e,n=[],i=t.safe,r=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<ul class="nav nav-tabs nav-stacked">\n  <li><a href="#" data-action="decorate" data-collection="elements">Add Element Decoration</a></li>\n\n  <li>\n    <a href="#" data-action="decorate" data-collection="connections">\n      Add Connection Decoration\n    </a>\n  </li>\n\n  <li><a href="#" data-action="edit" data-target="perspective">Edit Existing Decorations</a></li>\n</ul>\n')}).call(this)}.call(t),t.safe=i,t.escape=r,n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["main/templates/actionbar/more_menu"]=function(t){t||(t={});var e,n=[],i=t.safe,r=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<h5>General</h5>\n<ul class="nav nav-tabs nav-stacked">\n  <li><a href="#" data-action="make-default-map">Default to this map</a></li>\n  <li><a href="#" data-action="make-default-account-perspective">Default to this perspective</a></li>\n</ul>\n\n<h5>Current Map</h5>\n<ul class="nav nav-tabs nav-stacked">\n  <li><a href="#" data-action="make-default-view">Default to this location</a></li>\n  <li><a href="#" data-action="make-default-map-perspective">Default to this perspective</a></li>\n  <li><a href="#" data-action="duplicate-map">Duplicate map</a></li>\n  <li><a href="#" data-action="delete-map" class="danger">Delete map</a></li>\n</ul>\n\n'),currentPerspective&&n.push('\n<h5>Current Perspective</h5>\n<ul class="nav nav-tabs nav-stacked">\n  <li><a href="#" data-action="edit-perspective">Edit perspective</a></li>\n  <li><a href="#" data-action="duplicate-perspective">Duplicate perspective</a></li>\n  <li><a href="#" data-action="delete-perspective" class="danger">Delete perspective</a></li>\n</ul>\n'),n.push("\n")}).call(this)}.call(t),t.safe=i,t.escape=r,n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["main/templates/attributes/attribute_value"]=function(t){t||(t={});var e,n=[],i=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?o(t):""},r=t.safe,o=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},o||(o=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push("<li class='attribute-value'>\n  <div class='handle'></div>\n  <div class='content'>\n    <input type='hidden' name='attribute_values[ids][]' value='"),n.push(i(this.id)),n.push("'>\n    <!-- <input type='text' name='attribute_values[values][]' value='"),n.push(i(this.value)),n.push("' size='30' /> -->\n    <textarea name='attribute_values[values][]' rows='1'>"),n.push(i(this.value)),n.push("</textarea>\n    <a href='#' class='delete icon delete-value' tabindex='-1'></a>\n  </div>\n</li>\n")}).call(this)}.call(t),t.safe=r,t.escape=o,n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["main/templates/attributes/edit"]=function(t){t||(t={});var e,n=[],i=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?o(t):""},r=t.safe,o=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},o||(o=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<nav class="sidebar-nav">\n  <button class="sidebar-nav-back btn"><i class="icon-chevron-left"></i> Back</button>\n  <div class="sidebar-nav-context">'),n.push(i(this.attribute.isNew()?"New":"Edit")),n.push(' Attribute</div>\n</nav>\n\n<div class="sidebar-content container">\n  <h1 class="sidebar-header">\n    '),n.push(i(this.attribute.isNew()?"New Attribute":this.attribute.get("name"))),n.push('\n  </h1>\n\n  <form class="form-horizontal" data-remote>\n    <fieldset>\n      <div class="control-group">\n        <div class="control-label">\n          Name\n          <i class="icon-question-sign" data-content="Attribute names are used frequently in selectors and should be kept short and free of special characters if possible."></i>\n        </div>\n        <div class="controls">\n          <input type="text" name="name" />\n        </div>\n      </div>\n\n      <div class="control-group">\n        <div class="control-label">\n          Limit\n          <i class="icon-question-sign" data-content="If desired, you can limit the number of values that can be assigned to a single object."></i>\n        </div>\n        <div class="controls">\n          <select name="limit">\n            <option value="1">One</option>\n            <option value="none">One or More</option>\n          </select>\n        </div>\n      </div>\n\n      <div class="control-group">\n        <div class="control-label">\n          Format\n          <i class="icon-question-sign" data-content="Selecting a format allows us to compare and display the values more naturally."></i>\n        </div>\n        <div class="controls">\n          <select name="format">\n            <option value="string">None</option>\n            <option value="text">Text / Markdown</option>\n            <option value="url">Url</option>\n            <option value="number">Number</option>\n            <option value="percentage">Percentage</option>\n            <option value="currency">Currency</option>\n            <option value="date">Date</option>\n          </select>\n        </div>\n      </div>\n\n      <div class="control-group">\n        <div class="control-label">\n          Prompt\n\n          <i class="icon-question-sign" data-content="Use prompts to autocomplete existing values, or require users to choose from a predefined list."></i>\n        </div>\n        <div class="controls">\n          <select name="prompt">\n            <option value="none">None</option>\n            <option value="autocomplete">Autocomplete</option>\n            <option value="list">List</option>\n          </select>\n        </div>\n      </div>\n\n      <div class="choices-group control-group">\n        <div class="control-label">Choices</div>\n\n        <div class="controls">\n          <div data-role="values"></div>\n        </div>\n      </div>\n    </fieldset>\n\n    <fieldset>\n      <legend>Advanced Settings</legend>\n\n      <div class="control-group">\n        <div class="control-label">\n          Category\n\n          <i class="icon-question-sign" data-content="Use categories to group similar attributes in the profile."></i>\n        </div>\n\n        <div class="controls">\n          <input type="text" name="category" placeholder="Category Name" autocomplete="off" />\n        </div>\n      </div>\n\n      <div class="control-group">\n        <div class="control-label">\n          Label\n\n          <i class="icon-question-sign" data-content="Labels can be used to override the displayed name of the attribute in the profile, while keeping the attribute name itself short and selector friendly."></i>\n        </div>\n\n        <div class="controls">\n          <input type="text" name="label" placeholder="Defaults to Attribute Name" />\n        </div>\n      </div>\n\n      <div class="control-group" style="display:none">\n        <div class="control-label">Tooltip</div>\n\n        <div class="controls">\n          <input type="text" name="tooltip" />\n        </div>\n      </div>\n\n      <div class="control-group">\n        <div class="control-label">\n          Privacy\n\n          <i class="icon-question-sign" data-content="Private atttributes can only be seen by contributors."></i>\n        </div>\n\n        <div class="controls">\n          <label class="checkbox"><input type="checkbox" name="private" value="true" /> Keep this attribute private</label>\n        </div>\n      </div>\n    </fieldset>\n  </form>\n\n  '),this.attribute.isCore()||n.push('\n  <div class="delete-wrapper">\n    <button class="delete-attribute btn btn-danger">Delete this Attribute</button>\n  </div>\n  '),n.push("\n</div>\n")}).call(this)}.call(t),t.safe=r,t.escape=o,n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["main/templates/attributes/index"]=function(t){t||(t={});var e,n=[],i=t.safe,r=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<nav class="sidebar-nav">\n  <a href="#" class="sidebar-nav-back"><i class="icon-chevron-left"></i> Back</a>\n  <!-- <div class="sidebar-nav-context">Attributes</div> -->\n</nav>\n\n<div class="sidebar-content container">\n  <h1 class="sidebar-header">Attributes</h1>\n\n  <ul class="attributes nav nav-tabs nav-stacked">\n    <li><a class="new" href="#"><i class="icon-plus"></i> New Attribute</a></li>\n  </ul>\n</div>\n')}).call(this)}.call(t),t.safe=i,t.escape=r,n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["main/templates/conflicts/editor"]=function(t){t||(t={});var e,n=[],i=t.safe,r=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<div class="blankslate">\n  <h4>Looks like you\'re not the only one working today</h4>\n\n  <p>\n    Some of the changes you\'ve made conflict with work recently done by others. To prevent either of you from losing your work we need your help resolving the differences.\n  </p>\n\n  <p>\n    Don\'t worry, merging conflicts is simple.\n  </p>\n\n  <p>\n    <button class="get-started btn btn-primary">Let\'s Get Started</button>\n  </p>\n\n  <p class="alert">\n    Note: Your changes will not be saved until they\'ve been merged.\n  </p>\n</div>\n\n<div class="conflict-container"></div>\n')}).call(this)}.call(t),t.safe=i,t.escape=r,n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["main/templates/conflicts/index"]=function(t){t||(t={});var e,n=[],i=t.safe,r=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<div class="done container">\n  <h2>Nice work!</h2>\n\n  <p>\n    All outstanding conflicts have been resolved.<br />\n    Now you can get back to the fun stuff.\n  </p>\n\n  <p>\n    <button class="dismiss btn btn-success">Back to Work</button>\n  </p>\n</div>\n\n<div class="work container">\n  <div class="row">\n    <div class="left-column span3"></div>\n    <div class="right-column span9"></div>\n  </div>\n</div>\n')
}).call(this)}.call(t),t.safe=i,t.escape=r,n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["main/templates/conflicts/menu"]=function(t){t||(t={});var e,n=[],i=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?o(t):""},r=t.safe,o=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},o||(o=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,e,r,o;for(n.push('<ul class="nav nav-list">\n  '),o=Conflicts.collections,e=0,r=o.length;r>e;e++)t=o[e],n.push('\n    <li class="nav-header" data-collection="'),n.push(i(t)),n.push('">'),n.push(i(t.capitalize())),n.push("</li>\n  ");n.push('\n\n  <!-- this one just simplifies inserts -->\n  <li class="nav-header" style="display:none"></li>\n</ul>\n\n<!-- <a href="#" class="force" rel="yours-all">Force All</a> -->\n')}).call(this)}.call(t),t.safe=r,t.escape=o,n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["main/templates/conflicts/modal"]=function(t){t||(t={});var e,n=[],i=t.safe,r=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<div class="modal-header">\n  <button type="button" class="close" data-dismiss="modal">&times;</button>\n  <h4 class="title"><i class="icon-merge"></i> Merge Required</h4>\n</div>\n\n<div class="modal-body">\n</div>\n')}).call(this)}.call(t),t.safe=i,t.escape=r,n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["main/templates/conflicts/show"]=function(t){t||(t={});var e,n=[],i=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?o(t):""},r=t.safe,o=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},o||(o=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push("\n"),Conflicts.guidance()&&n.push('\n<h4>Guidance</h4>\n\n<p>\n  Your values are on the left. Theirs are on the right.\n</p>\n\n<p>\n  Review their changes and edit your values as needed.\n  When you\'re done just click "Save and Continue" to save your changes and move on to the next conflict.\n</p>\n\n<hr />\n\n'),n.push("\n\n<h4>"),n.push(i(this.label)),n.push(" <small>"),n.push(i(this.type)),n.push('</small></h4>\n\n<ul class="conflicts unstyled"></ul>\n\n<footer class="conflict-footer">\n  <button class="submit btn btn-primary">Save and Continue</button>\n</footer>\n')}).call(this)}.call(t),t.safe=r,t.escape=o,n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["main/templates/conflicts/value"]=function(t){t||(t={});var e,n=[],i=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?o(t):""},r=t.safe,o=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},o||(o=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<h4 class="conflict-header">\n  '),n.push(i(this.label)),n.push('\n  <a href="#" class="force force-accept pull-right">accept their version</a>\n</h4>\n\n<div class="conflict-editor"></div>\n')}).call(this)}.call(t),t.safe=r,t.escape=o,n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["main/templates/decorations/connections"]=function(t){t||(t={});var e,n=[],i=t.safe,r=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<ul class="nav nav-tabs nav-sleek">\n  <li class="active"><a href="#connectionDecorationsWidth" data-toggle="tab">Width</a></li>\n  <li><a href="#connectionDecorationsColor" data-toggle="tab">Color</a></li>\n</ul>\n\n<div class="tab-content">\n  <!-- SIZE -->\n  <div class="tab-pane active" id="connectionDecorationsWidth">\n    <div class="toggles-group">\n      <!-- size -->\n      <div class="toggles active">\n        <label class="radio">\n          <input type="radio" class="toggle" name="toggle-size" checked />\n          Set a fixed connection width\n        </label>\n\n        <div class="toggled controls" data-property="size"></div>\n      </div>\n\n      <!-- scale -->\n      <div class="toggles">\n        <label class="radio">\n          <input type="radio" class="toggle" name="toggle-size" />\n          Scale connection widths based on attribute values\n        </label>\n\n        <div class="toggled controls" data-property="scale"></div>\n      </div>\n    </div>\n  </div>\n\n  <!-- COLOR -->\n  <div class="tab-pane" id="connectionDecorationsColor">\n    <div class="toggles-group">\n      <!-- size -->\n      <div class="toggles active">\n        <label class="radio">\n          <input type="radio" class="toggle" name="toggle-color" checked />\n          Set a fixed connection color\n        </label>\n\n        <div class="toggled controls" data-property="color" data-type="simple"></div>\n      </div>\n\n      <!-- scale -->\n      <div class="toggles">\n        <label class="radio">\n          <input type="radio" class="toggle" name="toggle-color" />\n          Color connections based on attribute values\n        </label>\n\n        <div class="toggled controls" data-property="color" data-type="scale"></div>\n      </div>\n    </div>\n  </div>\n</div>\n')}).call(this)}.call(t),t.safe=i,t.escape=r,n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["main/templates/decorations/controls/expression"]=function(t){t||(t={});var e,n=[],i=t.safe,r=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){}).call(this)}.call(t),t.safe=i,t.escape=r,n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["main/templates/decorations/controls/slider"]=function(t){t||(t={});var e,n=[],i=t.safe,r=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){}).call(this)}.call(t),t.safe=i,t.escape=r,n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["main/templates/decorations/elements"]=function(t){t||(t={});var e,n=[],i=t.safe,r=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<ul class="nav nav-tabs nav-sleek">\n  <li class="active"><a href="#elementDecorationsSize" data-toggle="tab">Size</a></li>\n  <li><a href="#elementDecorationsColor" data-toggle="tab">Color</a></li>\n  <li><a href="#elementDecorationsExtras" data-toggle="tab">More</a></li>\n</ul>\n\n<div class="tab-content">\n  <!-- SIZE -->\n  <div class="tab-pane active" id="elementDecorationsSize">\n    <div class="toggles-group">\n      <!-- size -->\n      <div class="toggles active">\n        <label class="radio">\n          <input type="radio" class="toggle" name="toggle-size" checked />\n          Set a fixed element size\n        </label>\n\n        <div class="toggled controls" data-property="size"></div>\n      </div>\n\n      <!-- scale -->\n      <div class="toggles">\n        <label class="radio">\n          <input type="radio" class="toggle" name="toggle-size" />\n          Scale elements based on attribute values\n        </label>\n\n        <div class="toggled controls" data-property="scale"></div>\n      </div>\n    </div>\n  </div>\n\n  <!-- COLOR -->\n  <div class="tab-pane" id="elementDecorationsColor">\n    <div class="toggles-group">\n      <!-- size -->\n      <div class="toggles active">\n        <label class="radio">\n          <input type="radio" class="toggle" name="toggle-color" checked />\n          Set a fixed element color\n        </label>\n\n        <div class="toggled controls" data-property="color" data-type="simple"></div>\n      </div>\n\n      <!-- scale -->\n      <div class="toggles">\n        <label class="radio">\n          <input type="radio" class="toggle" name="toggle-color" />\n          Color elements based on attribute values\n        </label>\n\n        <div class="toggled controls" data-property="color" data-type="scale"></div>\n      </div>\n    </div>\n  </div>\n\n  <!-- EXTRAS -->\n  <div class="tab-pane" id="elementDecorationsExtras">\n    <!-- image -->\n    <div class="toggles">\n      <label class="checkbox">\n        <input type="checkbox" class="toggle" /> Add image\n      </label>\n\n      <div class="toggled controls" data-property="image-url" />\n    </div>\n\n    <!-- bullseye -->\n    <div class="toggles">\n      <label class="checkbox">\n        <input type="checkbox" class="toggle" /> Add bullseye\n      </label>\n\n      <div class="toggled controls" data-property="bullseye-color"></div>\n    </div>\n\n    <!-- shadow -->\n    <div class="toggles">\n      <label class="checkbox">\n        <input type="checkbox" class="toggle" /> Add shadow\n      </label>\n\n      <div class="toggled controls">\n        <div class="control" data-property="shadow-color"></div>\n        <div class="control" data-property="shadow-opacity"></div>\n        <div class="control" data-property="shadow-size"></div>\n      </div>\n    </div>\n  </div>\n</div>\n')}).call(this)}.call(t),t.safe=i,t.escape=r,n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["main/templates/decorations/selector"]=function(t){t||(t={});var e,n=[],i=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?o(t):""},r=t.safe,o=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},o||(o=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<div class="toggles-group">\n  <!-- all -->\n  <div>\n    <label class="radio">\n      <input type="radio" class="toggle" name="toggle-selector" value="all" />\n      Decorate <strong>all</strong> '),n.push(i(this.collection)),n.push('\n    </label>\n  </div>\n\n  <!-- selected -->\n  <div class="selection-required">\n    <label class="radio">\n      <input type="radio" class="toggle" name="toggle-selector" value="selected" />\n      Decorate <strong>selected</strong> '),n.push(i(this.collection)),n.push('\n    </label>\n  </div>\n\n  <!-- similar -->\n  <div class="selection-required toggles">\n    <label class="radio">\n      <input type="radio" class="toggle" name="toggle-selector" value="similar" />\n      Decorate <strong>similar</strong> '),n.push(i(this.collection)),n.push(' (by attribute)\n    </label>\n\n    <div class="toggled controls">\n      <div data-role="similar"></div>\n    </div>\n  </div>\n\n  <!-- custom -->\n  <div class="toggles">\n    <label class="radio">\n      <input type="radio" class="toggle" name="toggle-selector" value="custom" />\n      Build a <strong>custom</strong> selector\n    </label>\n\n    <div class="toggled controls">\n      <div data-role="custom"></div>\n    </div>\n  </div>\n</div>\n')}).call(this)}.call(t),t.safe=r,t.escape=o,n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["main/templates/decorations/wizard"]=function(t){t||(t={});var e,n=[],i=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?o(t):""},r=t.safe,o=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},o||(o=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push("<h1>Decorate "),n.push(i(this.collection.capitalize())),n.push('</h1>\n\n<div class="wizard-card" data-cardname="selector">\n  <h3>Select</h3>\n  <div data-role="builder"></div>\n</div>\n\n<div class="wizard-card" data-cardname="declarations">\n  <h3>Decorate</h3>\n  <div data-role="builder"></div>\n</div>\n\n<div class="wizard-card" data-cardname="label">\n  <h3>Label</h3>\n\n  <p>\n    If you\'d like to include this decoration in the legend, please\n    include a label below.\n  </p>\n\n  <input type="text" name="label" placeholder="Label" value="'),n.push(i(this.label)),n.push('" />\n</div>\n')}).call(this)}.call(t),t.safe=r,t.escape=o,n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["main/templates/editors/checkbox"]=function(t){t||(t={});var e,n=[],i=t.safe,r=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<form class="selections-form" action="#">\n  <ul class="unstyled"></ul>\n</form>\n\n<form class="new-form" action="#">\n  <input type="text" placeholder="New Value" />\n  <button class="btn"><i class="icon-plus"></i></button>\n</form>\n\n<div class="actions">\n  <button type="button" class="cancel btn">Cancel</button>\n  <button type="button" class="done btn btn-primary">Done</button>\n</div>\n')}).call(this)}.call(t),t.safe=i,t.escape=r,n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["main/templates/editors/markdown"]=function(t){t||(t={});var e,n=[],i=t.safe,r=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<textarea></textarea>\n\n<footer>\n  <span class="muted">Parsed via Markdown</span>\n\n  <div class="actions">\n    <button type="button" class="cancel btn">Cancel</button>\n    <button type="button" class="done btn btn-primary">Done</button>\n  </div>\n</footer>\n')}).call(this)}.call(t),t.safe=i,t.escape=r,n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["main/templates/editors/multiselect"]=function(t){t||(t={});var e,n=[],i=t.safe,r=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<div class="select"></div>\n\n<!--\n<div class="actions">\n  <button type="button" class="cancel btn">Cancel</button>\n  <button type="button" class="done btn btn-primary">Done</button>\n</div>\n -->\n')}).call(this)}.call(t),t.safe=i,t.escape=r,n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["main/templates/editors/radio"]=function(t){t||(t={});var e,n=[],i=t.safe,r=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<ul class="unstyled">\n  <li class="new-value">\n    <input class="new-value-radio" type="radio" />\n    <input class="new-value-input" type="text" placeholder="New Value" />\n<!--\n    <label class="radio">\n      <input type="radio" />\n      <input type="text" placeholder="New Value" />\n    </label> -->\n  </li>\n</ul>\n\n<div class="actions">\n  <button type="button" class="cancel btn">Cancel</button>\n  <button type="button" class="done btn btn-primary">Done</button>\n</div>\n')}).call(this)}.call(t),t.safe=i,t.escape=r,n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["main/templates/filters/form"]=function(t){t||(t={});var e,n=[],i=t.safe,r=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<div class="elements collection-filter control-group">\n  <div class="control-label">\n    Elements\n\n    <div>\n      <a href="#" class="select" data-value="all">All</a> | <a href="#" class="select" data-value="none">None</a>\n    </div>\n  </div>\n\n  <div class="controls">\n    <ul class="choices unstyled">\n    </ul>\n  </div>\n</div>\n\n<div class="connections collection-filter control-group">\n  <div class="control-label">\n    Connections\n\n    <div>\n      <a href="#" class="select" data-value="all">All</a> | <a href="#" class="select" data-value="none">None</a>\n    </div>\n  </div>\n\n  <div class="controls">\n    <ul class="choices unstyled">\n    </ul>\n  </div>\n</div>\n')}).call(this)}.call(t),t.safe=i,t.escape=r,n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["main/templates/filters/index"]=function(t){t||(t={});var e,n=[],i=t.safe,r=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<h1><i class="icon-filter"></i> Filter</h1>\n\n<div data-role="form"></div>\n')}).call(this)}.call(t),t.safe=i,t.escape=r,n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["main/templates/help/index"]=function(t){t||(t={});var e,n=[],i=t.safe,r=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<ul class="nav nav-tabs nav-sleek">\n  <li class="active"><a href="#helpOverview" data-toggle="tab">Overview</a></li>\n  <li><a href="#helpHelp" data-toggle="tab">Help</a></li>\n  <li><a href="#helpShortcuts" data-toggle="tab">Shortcuts</a></li>\n</ul>\n\n<div class="tab-content">\n  <div class="tab-pane active" id="helpOverview">\n    <iframe src="//player.vimeo.com/video/78870652?title=0&amp;byline=0&amp;portrait=0" width="530" height="298" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>\n  </div>\n\n  <div class="tab-pane" id="helpHelp">\n    <h4>Resources</h4>\n    <ul>\n      <li><a href="https://www.kumu.io/kumu/help" target="_blank">The Help Map</a></li>\n      <li><a href="http://vimeo.com/kumu" target="_blank">Video Tutorials</a></li>\n      <li><a href="mailto:support@kumu.io">Email Us</a></li>\n    </ul>\n\n    <!-- <a id="Intercom" href="mailto:lbccq94r@incoming.intercom.io" class="btn btn-block">Send us a message</a> -->\n  </div>\n\n  <div class="tab-pane" id="helpShortcuts">\n    <div class="row-fluid">\n      <div class="span6">\n        <h4>Basics</h4>\n        <ul class="shortcuts">\n          <li class="shortcut"><span class="keystroke">E</span> New Element</li>\n          <li class="shortcut"><span class="keystroke">C</span> New Connection</li>\n          <li class="shortcut"><span class="keystroke">DELETE</span> Delete Selection</li>\n          <li class="shortcut"><span class="keystroke">SPACE</span> Main Menu</li>\n          <li class="shortcut"><span class="keystroke">TAB</span> Toggle Sidebar</li>\n          <li class="shortcut"><span class="keystroke">]</span> Zoom In</li>\n          <li class="shortcut"><span class="keystroke">[</span> Zoom Out</li>\n          <li class="shortcut"><span class="keystroke">\\</span> Zoom Fit</li>\n          <li class="shortcut"><span class="keystroke">ARROWS</span> Pan</li>\n        </ul>\n      </div>\n\n      <div class="span6">\n        <h4>Focus</h4>\n        <ul class="shortcuts">\n          <li class="shortcut"><span class="keystroke">0-9</span> Set Focus</li>\n          <li class="shortcut"><span class="keystroke">+</span> Expand Focus</li>\n          <li class="shortcut"><span class="keystroke">-</span> Contract Focus</li>\n          <li class="shortcut"><span class="keystroke">`</span> Clear Focus</li>\n        </ul>\n\n        <h4>More</h4>\n        <ul class="shortcuts">\n          <li class="shortcut"><span class="keystroke">ALT+click</span> New Element</li>\n          <li class="shortcut"><span class="keystroke">ALT+drag</span> New Connection</li>\n        </ul>\n      </div>\n    </div>\n  </div>\n</div>\n')}).call(this)}.call(t),t.safe=i,t.escape=r,n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["main/templates/imports/modal"]=function(t){t||(t={});var e,n=[],i=t.safe,r=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<div class="modal-header">\n  <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n  <h4 class="title">Import File</h4>\n</div>\n\n<div class="modal-body">\n  <p class="primary">\n    Imports let you quickly build maps from existing data.\n    The tips below will turn you into a master importer in two minutes flat.\n  </p>\n\n  <h3>Instructions</h3>\n  <p>\n    Please make sure your spreadsheet (.xlsx or .csv) includes the following columns:\n  </p>\n\n  <div class="row-fluid">\n    <div class="span6">\n      <p>\n        <strong>For elements</strong>\n        <ul>\n          <li>Label</li>\n          <li>Type (optional)</li>\n          <li>Description (optional)</li>\n        </ul>\n      </p>\n    </div>\n\n    <div class="span6">\n      <p>\n        <strong>For connections</strong>\n        <ul>\n          <li>From</li>\n          <li>To</li>\n          <li>Type (optional)</li>\n          <li>Label (optional)</li>\n        </ul>\n      </p>\n    </div>\n  </div>\n\n  <h3>How To Master Imports in 5 Simple Steps</h3>\n  <ol>\n    <li><a href="#separate-sheets">Separate elements and connections into their own sheets</a></li>\n    <li><a href="#reserved-attributes">Take advantage of reserved attributes</a></li>\n    <li><a href="#piped-lists">Use pipes to separate | multiple | values</a></li>\n    <li><a href="#selector-friendly">Try to be selector friendly</a></li>\n    <li><a href="#ask-for-help">Ask for help!</a></li>\n  </ol>\n\n  <h4 id="separate-sheets">1. Separate elements and connections into their own sheets</h4>\n  <p>\n    Since elements and connections often have very different sets of attributes,\n    we recommend using one worksheet for each type.  If you prefer keeping everything\n    within a single sheet, you can use two blank lines to signal the start of a new section instead.\n  </p>\n\n  <h4 id="reserved-attributes">2. Take advantage of reserved attributes</h4>\n  <p>\n    Additional attributes can be imported simply by adding new columns.\n    Feel free to track as few or as many as you want. Our reserved attributes\n    aren\'t required, but they can save you time and unlock powerful features.\n  </p>\n\n  <dl>\n    <dt>Type</dt>\n    <dd>\n      Use the type attribute to categorize elements and connections. Common element\n      types include person, project, and company. Common connection types include\n      personal, business, and family.\n      Try to be <a href="#selector-friendly">selector friendly</a> with your types if you can.\n    </dd>\n\n    <dt>Description</dt>\n    <dd>\n      The description is the first thing everyone will read so make sure to provide\n      a short introduction.  If there\'s a compelling story behind the element or\n      connection, the description is the best place to put it.\n    </dd>\n\n    <dt>Tags</dt>\n    <dd>\n      Tags are used to store short pieces of information. Make sure to separate\n      multiple tags using a pipe "|".\n      Try to be <a href="#selector-friendly">selector friendly</a> with your tags if you can.\n    </dd>\n\n    <dt>Image</dt>\n    <dd>Include an image URL and we\'ll display it on the map and in the profile.</dd>\n\n    <dt>Email</dt>\n    <dd>\n      Add an email and we\'ll automatically include their\n      <a href="http://en.gravatar.com/">gravatar</a> on the map and in the profile.\n      Gravatars can be a huge time saver when working with social data.\n    </dd>\n  </dl>\n\n  <h4 id="piped-lists">3. Use pipes to separate multiple values</h4>\n  <p>\n    For columns with multiple values in a single cell\n    (such as tags, skills,hobbies, etc), you need to separate them using\n    the "|" character. If you\'re already separating them using commas,\n    just use find and replace to switch before importing.\n  </p>\n\n  <h4 id="selector-friendly">4. Try to be selector friendly</h4>\n  <p>\n    Selectors provide a simple way to slice up your data.\n    By keeping your attribute names and values selector friendly\n    you\'ll be able to write much shorter queries.\n  </p>\n\n  <p>\n    Use single words for your element types, connection types, and tags.\n    By doing so you\'ll be able to use shorthand selectors such as:\n\n    <ul>\n      <li><code>person</code> To select all elements with type "Person"</li>\n      <li><code>personal-connection</code> To select all connections with type "Personal"</li>\n      <li><code>project.priority</code> To select all projects tagged "priority"</li>\n    </ul>\n  </p>\n\n  <p>\n    If you include special characters or multiple words you\'ll have to use the\n    longhand instead (such as <code>["element type"="Government Sector"]</code>)\n    and that\'s just not nearly as much fun.\n  </p>\n\n  <h4 id="ask-for-help">5. Ask for help!</h4>\n  <p>\n    Still have questions? <a href="mailto:support@kumu.io">Ask us!</a>\n  </p>\n\n  <p class="alert">\n    <strong>Note</strong>\n    If you\'re running into funny character issues, please make sure your file is UTF-8 encoded.\n  </p>\n</div>\n\n<div class="modal-footer">\n  <button class="btn" data-dismiss="modal">Cancel</button>\n  <button class="import-btn btn btn-primary">Select a File</button>\n</div>\n\n')}).call(this)}.call(t),t.safe=i,t.escape=r,n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["main/templates/imports/show"]=function(t){t||(t={});var e,n=[],i=t.safe,r=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<a href="#" class="back-btn close">&times;</a>\n\n<div class="container">\n  <h1 class="sidebar-header"><i class="icon-upload"></i> Import Review</h1>\n\n  <div class="stats">\n    <div class="element-stats stats-group">\n      <span class="count">-</span>\n      <span class="collection">elements</span>\n      <span class="split"></span>\n    </div>\n\n    <div class="connection-stats stats-group">\n      <span class="count">-</span>\n      <span class="collection">connections</span>\n      <span class="split"></span>\n    </div>\n  </div>\n\n  <div class="status">Preparing import...</div>\n\n  <div class="finalize">\n    <ul class="flags"></ul>\n\n    <p>\n      Import ready! Please review the map and click "Save Changes" to finalize the import.\n    </p>\n\n    <div class="actions">\n      <button class="cancel btn">Start Over</button>\n      <button class="save btn btn-primary">Save Changes</button>\n    </div>\n  </div>\n</div>\n')}).call(this)}.call(t),t.safe=i,t.escape=r,n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["main/templates/layout/form"]=function(t){t||(t={});var e,n=[],i=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?o(t):""},r=t.safe,o=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},o||(o=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<div class="body">\n  <header class="sidebar-header">\n    <h1 class="title">Layout Settings</h1>\n  </header>\n\n  <div class="content">\n    <section>\n      <h5>Simulation</h5>\n\n      <div>Cooling: <input type="checkbox" name="cooling" /></div>\n      <div>Friction: <input type="checkbox" name="friction" /></div>\n      <div>Damping: <input type="checkbox" name="damping" /></div>\n\n      <div>Max Force: <input name="maxForce" type="text" value="'),n.push(i(this.maxForce)),n.push('" /></div>\n      <div>Min Velocity: <input name="minVelocity" type="text" value="'),n.push(i(this.minVelocity)),n.push('" /></div>\n    </section>\n\n    <section>\n      <h5>Nodes</h5>\n      <div>Mass: <input name="particleMass" type="text" value="'),n.push(i(this.particleMass)),n.push('" /></div>\n      <div>Gravity: <input name="gravity" type="text" value="'),n.push(i(this.gravity)),n.push('" /></div>\n      <div>Charge: <input name="particleCharge" type="text" value="'),n.push(i(this.particleCharge)),n.push('" /></div>\n      <div>Theta (barnes-hut): <input name="theta" type="text" value="'),n.push(i(this.theta)),n.push('" /></div>\n      <div>Threshold (convergence): <input name="threshold" type="text" value="'),n.push(i(this.threshold)),n.push('" /></div>\n    </section>\n\n    <section>\n      <h5>Edges</h5>\n      <div>Length: <input name="springLength" type="text" value="'),n.push(i(this.springLength)),n.push('" /></div>\n      <div>Strength: <input name="springStrength" type="text" value="'),n.push(i(this.springStrength)),n.push('" /></div>\n      <div>Constant: <input name="springConstant" type="text" value="'),n.push(i(this.springConstant)),n.push('" /></div>\n    </section>\n    \n    <section>\n      <div class="actions center">\n        <div class="buttons">\n          <button class="submit btn btn-primary" name="update">Update</button>\n          <button class="submit btn" name="reset">Update and Reset</button>\n        </div>\n      </div>\n\n      <textarea name="settings"></textarea>\n    </section>\n  </div>\n</div>\n')}).call(this)}.call(t),t.safe=r,t.escape=o,n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["main/templates/lenses/show"]=function(t){t||(t={});var e,n=[],i=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?o(t):""},r=t.safe,o=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},o||(o=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<div class="preview"></div>\n\n<div class="details">\n  <div class="actions btn-group pull-right">\n    <button class="edit btn"><i class="icon-edit"></i></button>\n    <button class="delete btn btn-danger"><i class="icon-remove"></i></button>\n  </div>\n\n  <div class="lens-label">'),n.push(i(this.label)),n.push('</div>\n  <div class="lens-selector">'),n.push(i(this.selector)),n.push("</div>\n</div>\n")}).call(this)}.call(t),t.safe=r,t.escape=o,n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["main/templates/maps/index"]=function(t){t||(t={});var e,n=[],i=t.safe,r=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<div data-ability="manage-maps">\n  <p class="hero">\n    Use maps to <strong>organize</strong> your project\'s data into small <strong>understandable</strong> chunks.  Create as many maps as you need.\n\n    <button class="new-map btn"><i class="icon-plus"></i> Create a New Map</button>\n  </p>\n</div>\n\n<ul class="maps nav nav-tabs nav-stacked"></ul>\n')
}).call(this)}.call(t),t.safe=i,t.escape=r,n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["main/templates/maps/list_item"]=function(t){t||(t={});var e,n=[],i=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?o(t):""},r=t.safe,o=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},o||(o=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<a href="'),n.push(i(this.url)),n.push('">\n  '),n.push(i(this.name)),n.push("\n  "),this["default"]&&n.push("<aside>(default)</aside>"),n.push('\n\n  <i class="icon-chevron-right"></i>\n  <button data-ability="manage-maps" class="more-btn btn">Edit</button>\n</a>\n')}).call(this)}.call(t),t.safe=r,t.escape=o,n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["main/templates/maps/show"]=function(t){t||(t={});var e,n=[],i=t.safe,r=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<header>\n  <h1 class="map-name sidebar-header"></h1>\n  <a href="#" class="edit-perspective" data-ability="manage-perspectives">Edit Perspective</a>\n</header>\n\n<div class="map-description"></div>\n')}).call(this)}.call(t),t.safe=i,t.escape=r,n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["main/templates/members/overview"]=function(t){t||(t={});var e,n=[],i=t.safe,r=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<ul class="members unstyled">\n  <li class="member owner" title="'),n.push(currentAccount.owner.get("username")),n.push('">\n    <img class="member-image" src="'),n.push(currentAccount.owner.avatar()),n.push('" />\n  </li>\n\n  <li data-ability=\'manage-members\'>\n    <a class="new-member" href="#" title="Add Member"><i class="icon-plus"></i></a>\n  </li>\n</ul>\n')}).call(this)}.call(t),t.safe=i,t.escape=r,n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["main/templates/modals/base"]=function(t){t||(t={});var e,n=[],i=t.safe,r=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<div class="modal-header">\n  <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n  <h4 class="title"></h4>\n</div>\n\n<div class="modal-body">\n</div>\n\n<div class="modal-footer">\n  <div class="errors">\n    <p class="error-message pull-left">Unable to complete your request</p>\n\n    <div class="pull-right">\n      <span class="error-code">404</span>\n      <span class="error-status">Not Found</span>\n    </div>\n  </div>\n\n  <i class="icon-spinner icon-2x pull-left"></i>\n\n  <a href="#" class="btn cancel">Cancel</a>\n  <a href="#" class="btn btn-primary submit">Submit</a>\n</div>\n')}).call(this)}.call(t),t.safe=i,t.escape=r,n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["main/templates/modals/loader"]=function(t){t||(t={});var e,n=[],i=t.safe,r=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<div class="spinner"></div>\n')}).call(this)}.call(t),t.safe=i,t.escape=r,n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["main/templates/modals/prompt"]=function(t){t||(t={});var e,n=[],i=t.safe,r=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<form class="form">\n  <input type="text" placeholder="'),n.push(this.placeholder),n.push('" name="value" width="100%" />\n</form>\n')}).call(this)}.call(t),t.safe=i,t.escape=r,n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["main/templates/navigation/index"]=function(t){t||(t={});var e,n=[],i=t.safe,r=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<div class="container">\n  <div class="row-fluid">\n    <div class="span4">\n      <h4>\n        Maps\n\n        <button class="add-map btn" title="Add Map" data-action="new-map" data-dismiss="modal">\n          <i class="icon-plus"></i>\n        </button>\n      </h4>\n\n      <div data-role="maps"></div>\n    </div>\n\n    <div class="offset1 span4">\n      <h4>\n        Perspectives\n\n        <button class="add-perspective btn" title="Add Perspective" data-action="new-perspective" data-dismiss="modal">\n          <i class="icon-plus"></i>\n        </button>\n      </h4>\n\n      <div data-role="perspectives"></div>\n    </div>\n\n    <div class="actions span3">\n      <button class="btn btn-flat" data-action="manage-attributes" data-ability="manage-attributes" data-dismiss="modal">\n        <i class="icon-attributes"></i> Attributes\n      </button>\n\n      <button class="btn btn-flat" data-action="manage-members" data-ability="manage-members" data-dismiss="modal">\n        <i class="icon-group"></i> Members\n      </button>\n\n      <div data-ability="manage-account">\n        <h5>More</h5>\n        <ul>\n          <!-- <li><a href="#" data-action="manage-settings" data-dismiss="modal">Settings</a></li> -->\n          <!-- <li><a href="#">Change Plan</a></li> -->\n          <li><a href="#" data-action="rename-account" data-dismiss="modal">Rename Project</a></li>\n          <!-- <li><a href="#">Transfer Account</a></li> -->\n          <li><a href="#" class="danger" data-action="delete-account" data-dismiss="modal">Delete Project</a></li>\n        </ul>\n      </div>\n    </div>\n  </div>\n</div>\n\n\n')}).call(this)}.call(t),t.safe=i,t.escape=r,n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["main/templates/navigation/map"]=function(t){t||(t={});var e,n=[],i=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?o(t):""},r=t.safe,o=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},o||(o=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<a href="'),n.push(i(this.url)),n.push('" class="closes">\n  '),n.push(i(this.name)),n.push("\n  "),this["default"]&&n.push("<aside>(default)</aside>"),n.push("\n</a>\n")}).call(this)}.call(t),t.safe=r,t.escape=o,n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["main/templates/navigation/modal"]=function(t){t||(t={});var e,n=[],i=t.safe,r=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<div class="modal-header">\n  <a href="/dashboard" class="back-btn btn"><i class="icon-random icon-rotate-180"></i> Switch Projects</a>\n  <button type="button" class="close" data-dismiss="modal">&times;</button>\n  <h4 class="title">Main Menu</h4>\n</div>\n\n<div class="modal-body">\n</div>\n')}).call(this)}.call(t),t.safe=i,t.escape=r,n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["main/templates/navigation/perspective"]=function(t){t||(t={});var e,n=[],i=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?o(t):""},r=t.safe,o=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},o||(o=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<a href="'),n.push(i(this.url)),n.push('" class="closes">\n  '),n.push(i(this.name)),n.push("\n  "),this["default"]&&n.push("<aside>(default)</aside>"),n.push("\n</a>\n")}).call(this)}.call(t),t.safe=r,t.escape=o,n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["main/templates/overlays/finder"]=function(t){t||(t={});var e,n=[],i=t.safe,r=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<div class="toolbar input-prepend input-append-inside">\n  <i class="add-on icon-search"></i>\n\n  <input class="selector-input" type="text" placeholder="Search" autocomplete="off">\n\n  <button type="button" class="build-btn btn btn-flat" title="Build Selector"><i class="icon-build"></i></button>\n</div>\n')}).call(this)}.call(t),t.safe=i,t.escape=r,n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["main/templates/perspectives/active"]=function(t){t||(t={});var e,n=[],i=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?o(t):""},r=t.safe,o=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},o||(o=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<header class="clearfix">\n  <h3 class="support-heading pull-left">About This Perspective</h3>\n  <a href="'),n.push(i(urlFor({perspective:null}))),n.push('" class="btn btn-warning pull-right">Turn Off Perspective</a>\n</header>\n\n<div class="description">\n  '),n.push(marked(this.perspective.get("description")||"No description")),n.push("\n</div>\n")}).call(this)}.call(t),t.safe=r,t.escape=o,n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["main/templates/perspectives/advanced"]=function(t){t||(t={});var e,n=[],i=t.safe,r=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<p>\n  Below the surface perspectives are controlled by stylesheets.\n  Styles are parsed via <a href="http://lesscss.org/" target="_blank">LESS</a>\n\n  so you have the full suite of\n\n  <a href="http://lesscss.org/#-variables" target="_blank">variables</a>,\n  <a href="http://lesscss.org/#-operations" target="_blank">operations</a>, and\n  <a href="http://lesscss.org/#reference" target="_blank">color manipulation functions</a>\n\n  at your disposal.\n</p>\n\n<p>\n  If you\'re comfortable with CSS, we highly recommend using the advanced editor.\n</p>\n\n<div class="editor">\n  <textarea name="style">'),n.push(this.style),n.push('</textarea>\n</div>\n\n<div class="errors alert alert-error"></div>\n\n<footer style="display:none">\n  <div class="help">\n    <a href="https://www.kumu.io/kumu/help#css">Help</a>\n  </div>\n</footer>\n')}).call(this)}.call(t),t.safe=i,t.escape=r,n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["main/templates/perspectives/decorations_form"]=function(t){t||(t={});var e,n=[],i=t.safe,r=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<div class="actions">\n  <button class="btn btn-primary" data-collection="elements">Decorate Elements</a>\n  <button class="btn" data-collection="connections">Decorate Connections</a>\n</div>\n')}).call(this)}.call(t),t.safe=i,t.escape=r,n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["main/templates/perspectives/filters"]=function(t){t||(t={});var e,n=[],i=t.safe,r=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<form class="form-horizontal">\n  <div class="elements collection-filter control-group">\n    <div class="control-label">\n      Elements\n\n      <div>\n        <a href="#" class="select" data-value="all">All</a> | <a href="#" class="select" data-value="none">None</a>\n      </div>\n    </div>\n\n    <div class="controls">\n      <ul class="choices unstyled">\n      </ul>\n    </div>\n  </div>\n\n  <div class="connections collection-filter control-group">\n    <div class="control-label">\n      Connections\n\n      <div>\n        <a href="#" class="select" data-value="all">All</a> | <a href="#" class="select" data-value="none">None</a>\n      </div>\n    </div>\n\n    <div class="controls">\n      <ul class="choices unstyled">\n      </ul>\n    </div>\n  </div>\n</form>\n')}).call(this)}.call(t),t.safe=i,t.escape=r,n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["main/templates/perspectives/index"]=function(t){t||(t={});var e,n=[],i=t.safe,r=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<div data-ability="manage-perspectives">\n  <p class="hero">\n    Perspectives are a great way to extract insights from your maps.\n    Use <strong>filters</strong> to narrow your focus and\n    <strong>decorations</strong> to draw attention to key items.\n\n    <button class="new-perspective btn"><i class="icon-plus"></i> Create a New Perspective</button>\n  </p>\n</div>\n\n<div data-role="list"></div>\n')}).call(this)}.call(t),t.safe=i,t.escape=r,n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["main/templates/perspectives/list_item"]=function(t){t||(t={});var e,n=[],i=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?o(t):""},r=t.safe,o=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},o||(o=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<a href="'),n.push(i(this.url)),n.push('">\n  '),n.push(i(this.name)),n.push("\n  "),this["default"]&&n.push("<aside>(default)</aside>"),n.push('\n\n  <i class="icon-chevron-right"></i>\n\n  '),this.none||n.push('\n  <button data-ability="manage-maps" class="more-btn btn">Edit</button>\n  '),n.push("\n</a>\n")}).call(this)}.call(t),t.safe=r,t.escape=o,n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["main/templates/perspectives/show"]=function(t){t||(t={});var e,n=[],i=t.safe,r=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<nav class="sidebar-nav">\n  <a href="#" class="sidebar-nav-back"><i class="icon-chevron-left"></i> Back</a>\n  <div class="sidebar-nav-context">Edit Perspective</div>\n</nav>\n\n<div class="sidebar-content container">\n  <h1 class="perspective-name sidebar-header"></h1>\n\n  <div class="perspective-description"></div>\n\n  <ul class="nav nav-tabs nav-sleek">\n    <li class="active"><a href="#perspectiveDecorations" data-toggle="tab">Decorations</a></li>\n    <li><a href="#perspectiveFilters" data-toggle="tab">Filters</a></li>\n    <li><a href="#perspectiveAdvanced" data-toggle="tab">Advanced</a></li>\n  </ul>\n\n  <div class="tab-content">\n    <div class="tab-pane active" id="perspectiveDecorations"><div data-role="decorations"></div></div>\n    <div class="tab-pane" id="perspectiveFilters"><div data-role="filters"></div></div>\n    <div class="tab-pane" id="perspectiveAdvanced"><div data-role="advanced"></div></div>\n  </div>\n</div>\n')}).call(this)}.call(t),t.safe=i,t.escape=r,n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["main/templates/profile/attributes/blankslate"]=function(t){t||(t={});var e,n=[],i=t.safe,r=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<div class="hero">\n  <p>\n    Attributes add depth to your maps and lay the foundation for effective perspectives.\n  </p>\n\n  <p>\n    We\'ve defined a small set of core attributes for you already\n    (label, type, description, and tags)... The rest is up to you!\n  </p>\n\n  <button type="button" class="new-attribute btn btn-primary">Create your First Attribute</button>\n</div>\n')}).call(this)}.call(t),t.safe=i,t.escape=r,n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["main/templates/profile/attributes/form"]=function(t){t||(t={});var e,n=[],i=t.safe,r=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<div class="actions">\n  <div class="controls">\n    <button type="button" class="new-attribute btn btn-primary"><i class="icon-plus"></i> New Attribute</button>\n  </div>\n</div>\n\n<div class="inputs">\n  <div class="control-label">\n    <input type="text" name="name" placeholder="Attribute Name" autocomplete="off" />\n  </div>\n\n  <div class="controls">\n    <div class="values">\n      <input type="text" name="value" placeholder="Attribute Value" />\n    </div>\n  </div>\n</div>\n')}).call(this)}.call(t),t.safe=i,t.escape=r,n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["main/templates/profile/attributes/group"]=function(t){t||(t={});var e,n=[],i=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?o(t):""},r=t.safe,o=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},o||(o=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){"General"!==this.name&&(n.push("\n  <legend>"),n.push(i(this.name)),n.push("</legend>\n")),n.push('\n\n<div class="attributes"></div>\n')}).call(this)}.call(t),t.safe=r,t.escape=o,n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["main/templates/profile/attributes/view"]=function(t){t||(t={});var e,n=[],i=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?o(t):""},r=t.safe,o=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},o||(o=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<div class="name control-label">\n  <button type="button" class="settings btn" data-ability="manage-attributes"><i class="icon-wrench"></i></button>\n\n  '),this.icon?(n.push('\n    <i class="icon-'),n.push(i(this.icon)),n.push('" title="'),n.push(i(this.attribute)),n.push('"></i>\n  ')):(n.push("\n    "),this["private"]&&n.push('<i class="icon-eye-close" title="Private"></i>'),n.push("\n    "),n.push(i(this.attribute)),n.push("\n  ")),n.push('\n</div>\n<div class="controls">\n  <div class="values"></div>\n  <p class="new-value placeholder"></p>\n</div>\n')}).call(this)}.call(t),t.safe=r,t.escape=o,n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["main/templates/profiles/connection_profile"]=function(t){t||(t={});var e,n=[],i=t.safe,r=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<a href="#" class="back-btn close">&times;</a>\n\n<div class="sidebar-content container">\n  <header class="profile-header">\n    <h1 class="connection-label title"></h1>\n    <h3 class="connection-type subtitle" data-editable-placeholder="Add Type"></h3>\n  </header>\n\n  <div class="overview">\n    <div class="description" data-editable-placeholder="Add Description"></div>\n  </div>\n\n  <div class="details">\n  <!--   <ul class="profile-nav nav nav-tabs nav-sleek">\n      <li class="active"><a href="#profileAttributes" data-toggle="tab" title="Attributes"><i class="icon-attribute"></i></a></li>\n      <li><a href="#profileAttachments" data-toggle="tab" title="Attachments"><i class="icon-attachment"></i></a></li>\n      <li><a href="#profileNotes" data-toggle="tab" title="Notes"><i class="icon-note"></i></a></li>\n      <li><a href="#profileDiscussions" data-toggle="tab" title="Discussions"><i class="icon-discussion"></i></a></li>\n    </ul>\n\n    <div class="tab-content">\n      <div id="profileAttributes" class="tab-pane active"></div>\n      <div id="profileAttachments" class="tab-pane"></div>\n      <div id="profileNotes" class="tab-pane"></div>\n      <div id="profileDiscussions" class="tab-pane"></div>\n    </div> -->\n  </div>\n</div>\n')}).call(this)}.call(t),t.safe=i,t.escape=r,n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["main/templates/profiles/element_profile"]=function(t){t||(t={});var e,n=[],i=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?o(t):""},r=t.safe,o=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},o||(o=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<a href="#" class="back-btn close">&times;</a>\n\n<div class="sidebar-content container">\n  <header class="profile-header">\n    '),this.image&&(n.push('\n      <img class="profile-image" src="'),n.push(i(this.image)),n.push('" />\n    ')),n.push('\n\n    <h1 class="element-label title">'),n.push(i(this.label)),n.push('</h1>\n    <h3 class="element-type subtitle">'),n.push(i(this.type)),n.push('</h3>\n  </header>\n\n  <div class="overview">\n    <div class="description"></div>\n  </div>\n\n  <div class="details">\n  <!--   <ul class="profile-nav nav nav-tabs nav-sleek">\n      <li class="active"><a href="#profileAttributes" data-toggle="tab" title="Attributes"><i class="icon-attribute"></i></a></li>\n      <li><a href="#profileAttachments" data-toggle="tab" title="Attachments"><i class="icon-attachment"></i></a></li>\n      <li><a href="#profileNotes" data-toggle="tab" title="Notes"><i class="icon-note"></i></a></li>\n      <li><a href="#profileDiscussions" data-toggle="tab" title="Discussions"><i class="icon-discussion"></i></a></li>\n    </ul>\n\n    <div class="tab-content">\n      <div id="profileAttributes" class="tab-pane active"></div>\n      <div id="profileAttachments" class="tab-pane"></div>\n      <div id="profileNotes" class="tab-pane"></div>\n      <div id="profileDiscussions" class="tab-pane"></div>\n    </div> -->\n  </div>\n</div>\n')}).call(this)}.call(t),t.safe=r,t.escape=o,n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["main/templates/profiles/loop_profile"]=function(t){t||(t={});var e,n=[],i=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?o(t):""},r=t.safe,o=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},o||(o=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<a href="#" class="back-btn close">&times;</a>\n\n<div class="sidebar-content container">\n  <header class="profile-header">\n    <h1 class="loop-label title">'),n.push(i(this.label)),n.push('</h1>\n    <h3 class="loop-type subtitle">'),n.push(i(this.type)),n.push('</h3>\n  </header>\n\n  <div class="overview">\n    <div class="description"></div>\n  </div>\n\n  <div class="details">\n  <!--   <ul class="profile-nav nav nav-tabs nav-sleek">\n      <li class="active"><a href="#profileAttributes" data-toggle="tab" title="Attributes"><i class="icon-attribute"></i></a></li>\n      <li><a href="#profileAttachments" data-toggle="tab" title="Attachments"><i class="icon-attachment"></i></a></li>\n      <li><a href="#profileNotes" data-toggle="tab" title="Notes"><i class="icon-note"></i></a></li>\n      <li><a href="#profileDiscussions" data-toggle="tab" title="Discussions"><i class="icon-discussion"></i></a></li>\n    </ul>\n\n    <div class="tab-content">\n      <div id="profileAttributes" class="tab-pane active"></div>\n      <div id="profileAttachments" class="tab-pane"></div>\n      <div id="profileNotes" class="tab-pane"></div>\n      <div id="profileDiscussions" class="tab-pane"></div>\n    </div> -->\n  </div>\n</div>\n')}).call(this)}.call(t),t.safe=r,t.escape=o,n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["main/templates/profiles/multiple_profile"]=function(t){t||(t={});var e,n=[],i=t.safe,r=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<a href="#" class="back-btn close">&times;</a>\n\n<header class="profile-header">\n  <h1 class="sidebar-header">Multiple Selections</h1>\n</header>\n\n<!-- TODO: selection summary -->\n<div class="overview"></div>\n\n<div class="details">\n  <div data-role="tags"></div>\n</div>\n')}).call(this)}.call(t),t.safe=i,t.escape=r,n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["main/templates/settings/index"]=function(t){t||(t={});var e,n=[],i=t.safe,r=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<a href="#" class="back-btn close">&times;</a>\n\n<h1 class="sidebar-header"><i class="icon-cogs"></i> Account Settings</h1>\n\n<div class="container">\n  <ul class="nav nav-tabs nav-stacked">\n    <li><a href="#" class="edit-theme"><i class="icon-tint"></i> Theme <i class="icon-chevron-right"></i></a></li>\n    <li><a href="#" class="edit-layout"><i class="icon-share-this"></i> Layout <i class="icon-chevron-right"></i></a></li>\n  </ul>\n</div>\n')}).call(this)}.call(t),t.safe=i,t.escape=r,n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["main/templates/sidebar/dirty"]=function(t){t||(t={});var e,n=[],i=t.safe,r=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('You have unsaved changes\n\n<button class="cancel btn">Cancel</button>\n<button class="save btn btn-primary">Save</button>\n')}).call(this)}.call(t),t.safe=i,t.escape=r,n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["main/templates/sidebar/paged"]=function(t){t||(t={});var e,n=[],i=t.safe,r=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<a class="back-btn close" href="#">&times;</a>\n\n<div class="content tab-content"></div>\n<div class="navbar" data-toggle="buttons-radio"></div>\n')}).call(this)}.call(t),t.safe=i,t.escape=r,n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["main/templates/theme/edit"]=function(t){t||(t={});var e,n=[],i=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?o(t):""},r=t.safe,o=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},o||(o=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,e,r,o;for(n.push('<a href="#" class="back-btn close">&times;</a>\n\n<h1 class="sidebar-header">Theme</h1>\n\n<div class="container">\n  <section>\n    <p>Adjust the basic appearance of your maps using the options below.</p>\n    \n    '),this.editable||n.push("\n      <p><strong>Note</strong> Because you're not a manager, changes will not be saved.</p>\n    "),n.push('\n  </section>\n\n  <section class="presets">\n    <h5>Presets</h5>\n    \n    <select class="preset" name="preset" placeholder="Apply Preset">\n      <option></option>\n      \n      '),o=this.presets,e=0,r=o.length;r>e;e++)t=o[e],n.push('\n        <option value="'),n.push(i(t)),n.push('">'),n.push(i(t)),n.push("</option>\n      ");n.push('\n    </select>\n  </section>\n\n  <section>\n    <form class="properties form-horizontal">\n      <h5>General Styles</h5>\n      <div class="control-group">\n        <label class="control-label">Background Color</label>\n        <div class="controls"><input type="color" name="backgroundColor" value="'),n.push(i(this.backgroundColor)),n.push('" /></div>\n      </div>\n      \n      \n      <h5>Font Styles</h5>\n      <div class="control-group">\n        <label class="control-label">Size</label>\n        <div class="controls"><input type="number" min="1" name="fontSize" value="'),n.push(i(this.fontSize)),n.push('" /></div>\n      </div>\n      \n      <div class="control-group">\n        <label class="control-label">Color</label>\n        <div class="controls"><input type="color" name="fontColor" value="'),n.push(i(this.fontColor)),n.push('" /></div>\n      </div>\n      \n      <div class="control-group">\n        <label class="control-label">Family</label>\n        <div class="controls"><input type="text" name="fontFamily" value="'),n.push(i(this.fontFamily)),n.push('" /></div>\n      </div>\n      \n      \n      <h5>Element Styles</h5>\n      <div class="control-group">\n        <label class="control-label">Size</label>\n        <div class="controls"><input type="number" min="1" name="elementSize" value="'),n.push(i(this.elementSize)),n.push('" /></div>\n      </div>\n      \n      <div class="control-group">\n        <label class="control-label">Color</label>\n        <div class="controls"><input type="color" name="elementColor" value="'),n.push(i(this.elementColor)),n.push('" /></div>\n      </div>\n      \n      <div class="control-group">\n        <label class="control-label">Stroke Width</label>\n        <div class="controls"><input type="number" min="0" name="elementStrokeWidth" value="'),n.push(i(this.elementStrokeWidth)),n.push('" /></div>\n      </div>\n\n      <div class="control-group">\n        <label class="control-label">Margin</label>\n        <div class="controls"><input type="number" min="0" name="elementMargin" value="'),n.push(i(this.elementMargin)),n.push('" /></div>\n      </div>\n\n      <div class="control-group">\n        <label class="control-label">Padding</label>\n        <div class="controls"><input type="number" min="0" name="elementPadding" value="'),n.push(i(this.elementPadding)),n.push('" /></div>\n      </div>\n\n      <!-- <div class="control-group">\n        <label class="control-label">Label Placement</label>\n        <div class="controls">\n          <select name="elementLabelPlacement">\n            <option value="top">Top</option>\n            <option value="bottom">Bottom</option>\n            <option value="left">Left</option>\n            <option value="right">Right</option>\n            <option value="middle">Middle</option>\n          </select>\n        </div>\n      </div> -->\n      \n      <h5>Connection Styles</h5>\n      <div class="control-group">\n        <label class="control-label">Color</label>\n        <div class="controls"><input type="color" name="connectionColor" value="'),n.push(i(this.connectionColor)),n.push('" /></div>\n      </div>\n      \n      <div class="control-group">\n        <label class="control-label">Opacity</label>\n        <div class="controls"><input type="number" min="0" max="1" step="0.1" name="connectionOpacity" value="'),n.push(i(this.connectionOpacity)),n.push('" /></div>\n      </div>\n      \n      <div class="control-group">\n        <label class="control-label">Length</label>\n        <div class="controls"><input type="number" min="1" step="50" name="connectionLength" value="'),n.push(i(this.connectionLength)),n.push('" /></div>\n      </div>\n      \n      <div class="control-group">\n        <label class="control-label">Width</label>\n        <div class="controls"><input type="number" min="1" name="connectionSize" value="'),n.push(i(this.connectionSize)),n.push('" /></div>\n      </div>\n    </form>\n  </section>\n\n\n  <section>\n    <h5>Behavior</h5>\n\n    <form class="behavior">\n      <label class="checkbox"><input type="checkbox" name="highlightWorkspaceLinks" /> Highlight Workspace Links</label>\n      <label class="checkbox"><input type="checkbox" name="scaleLabels" /> Scale Labels to Element Size</label>\n    </form>\n  </section>\n</div>\n')
}).call(this)}.call(t),t.safe=r,t.escape=o,n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["main/templates/virtualization/index"]=function(t){t||(t={});var e,n=[],i=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?o(t):""},r=t.safe,o=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},o||(o=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,e,r,o;for(n.push('<nav class="sidebar-nav">\n  <button class="sidebar-nav-back btn"><i class="icon-back"></i> Back</button>\n</nav>\n\n<div class="sidebar-content container">\n  <h1 class="sidebar-header"><i class="kicon kicon-cluster"></i> Cluster</h1>\n\n  <p class="hero">\n    Clustering helps you <strong>discover hidden connections</strong> between elements,\n    based on their underlying attributes.\n  </p>\n\n  <form>\n    <p>\n      Cluster <span class="selection">'),n.push(i(this.selection)),n.push('</span> by:\n    </p>\n\n    <select>\n      <option value="">Select an attribute...</option>\n\n      '),o=this.attributes,e=0,r=o.length;r>e;e++)t=o[e],n.push('\n        <option value="'),n.push(i(t.name)),n.push('">'),n.push(i(t.label)),n.push("</option>\n      ");n.push('\n    </select>\n  </form>\n\n  <ul class="virtualizations unstyled"></ul>\n</div>\n')}).call(this)}.call(t),t.safe=r,t.escape=o,n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["main/templates/virtualization/list_item"]=function(t){t||(t={});var e,n=[],i=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?o(t):""},r=t.safe,o=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},o||(o=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<div class="actions">\n  <button class="settings btn btn-link">settings</button>\n  <button class="delete btn btn-danger btn-flat" title="Cancel"><i class="icon-remove"></i></button>\n  <button class="save btn btn-success btn-flat" title="Save"><i class="icon-ok"></i></button>\n</div>\n\n<span class="attribute">'),n.push(i(this.label)),n.push("</span>\n")}).call(this)}.call(t),t.safe=r,t.escape=o,n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["main/templates/welcome/disqus_view"]=function(t){t||(t={});var e,n=[],i=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?o(t):""},r=t.safe,o=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},o||(o=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<div class="disqus_wrapper">\n  <div id="disqus_thread"></div>\n  <script type="text/javascript">\n    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */\n    var disqus_shortname = \''),n.push(i(this.shortname)),n.push("';\n    var disqus_identifier = '"),n.push(i(this.identifier)),n.push("';\n    var disqus_url = '"),n.push(i(this.url)),n.push("';\n    var disqus_title = '"),n.push(i(this.title)),n.push("';\n\n    /* * * DON'T EDIT BELOW THIS LINE * * */\n    (function() {\n      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;\n      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';\n      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);\n    })();\n  </script>\n  <noscript>Please enable JavaScript to view the <a href=\"http://disqus.com/?ref_noscript\">comments powered by Disqus.</a></noscript>\n  <a href=\"http://disqus.com\" class=\"dsq-brlink\">comments powered by <span class=\"logo-disqus\">Disqus</span></a>\n</div>\n")}).call(this)}.call(t),t.safe=r,t.escape=o,n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["main/templates/welcome/embedded_overview"]=function(t){t||(t={});var e,n=[],i=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?o(t):""},r=t.safe,o=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},o||(o=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<div class="welcome-container container">\n  <header class="welcome-header">\n    <select class="perspective-select">\n      <option>Select Perspective</option>\n      <option>One</option>\n    </select>\n\n    <h1 class="map-name">'),n.push(i(currentMap.get("name"))),n.push('</h1>\n  </header>\n\n  <div class="map-description markdown-article markdown-container">\n    '),currentMap.get("description")?(n.push("\n      "),n.push(marked(currentMap.get("description"))),n.push("\n    ")):n.push("\n      <p><em>No description</em></p>\n    "),n.push("\n  </div>\n\n  "),currentPerspective&&(n.push('\n  <section class="perspective-overview">\n    <h2>Perspective: '),n.push(i(currentPerspective.get("name"))),n.push('</h2>\n\n    <div class="perspective-description markdown-container">\n      '),currentPerspective.get("description")?(n.push("\n        "),n.push(marked(currentPerspective.get("description"))),n.push("\n      ")):n.push("\n        <p><em>No description</em></p>\n      "),n.push("\n    </div>\n  </section>\n  ")),n.push('\n</div>\n\n<div data-role="account-overview"></div>\n')}).call(this)}.call(t),t.safe=r,t.escape=o,n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["main/templates/welcome/index"]=function(t){t||(t={});var e,n=[],i=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?o(t):""},r=t.safe,o=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},o||(o=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<nav class="sidebar-nav">\n  <ul class="sidebar-nav-actions">\n    <li><button class="btn btn-flat" data-action="info" title="About"><i class="icon-info"></i></button></li>\n    <li data-ability="manage-attributes manage-members manage-account">\n      <button class="btn btn-flat" data-action="settings" title="Settings"><i class="icon-settings"></i></button>\n    </li>\n  </ul>\n\n  <div class="sidebar-nav-context">\n    <div class="dropdown">\n      <a class="dropdown-toggle" data-toggle="dropdown" href="#">\n        '),n.push(i(currentAccount.get("name"))),n.push('\n        <i class="icon-caret-down"></i>\n      </a>\n      <ul class="dropdown-menu" role="menu">\n        <li data-ability="manage-attributes">\n          <a href="#" data-action="attributes"><i class="icon-attributes"></i> Attributes</a>\n        </li>\n\n        <li data-ability="manage-members">\n          <a href="#" data-action="members"><i class="icon-members"></i> Members</a>\n        </li>\n\n        <li data-ability="manage-settings">\n          <a href="#" data-action="settings"><i class="icon-cog"></i> Settings</a>\n        </li>\n\n        <li class="divider" data-ability="manage-settings"></li>\n        <li><a href="#" data-action="info"><i class="icon-info"></i> About this Project</a></li>\n\n      '),currentUser.isGuest()||n.push('\n        <li><a href="/dashboard"><i class="icon-random"></i> Switch Projects</a></li>\n      '),n.push('\n      </ul>\n    </div>\n  </div>\n</nav>\n\n<div class="sidebar-content container"></div>\n')}).call(this)}.call(t),t.safe=r,t.escape=o,n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["main/templates/welcome/map_overview"]=function(t){t||(t={});var e,n=[],i=t.safe,r=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<h1 class="map-name sidebar-header"></h1>\n\n<div class="map-description"></div>\n')}).call(this)}.call(t),t.safe=i,t.escape=r,n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["main/templates/welcome/perspective_overview"]=function(t){t||(t={});var e,n=[],i=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?o(t):""},r=t.safe,o=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},o||(o=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<h3 class="perspective-name">Perspective: '),n.push(i(currentPerspective.get("name"))),n.push('</h3>\n\n<div class="perspective-description">\n  '),currentPerspective.get("description")?(n.push("\n    "),n.push(marked(currentPerspective.get("description"))),n.push("\n  ")):n.push("\n    <p><em>No description</em></p>\n  "),n.push("\n</div>\n")}).call(this)}.call(t),t.safe=r,t.escape=o,n.join("")}}.call(this),function(){var t;t=function(){function t(){}return t.prototype.actor=function(){return currentUser},t.prototype.to=function(t,e,n){var i,r,o,s,a,l,u,c,h,p,f,d;for(null==n&&(n={}),r=_.result(this,"actor"),a=n.as||this.roleForResource(r,e,n[e]),s=n[e],i=_.uniq(["manage",t]),l=this.effectiveRolesFor(a),u=0,h=l.length;h>u;u++)for(a=l[u],c=0,p=i.length;p>c;c++)if(t=i[c],o=null!=(f=this.abilities[a])?null!=(d=f[t])?d[e]:void 0:void 0,o&&(o===!0||o(r,s)))return!0;return!1},t.prototype.can=function(){return this.to.apply(this,arguments)},t.prototype.flush=function(){var t,e,n,i,r,o,s,a,l;for(t=[],n=["manage","create","read","update","destroy"],l=this.resources,r=0,s=l.length;s>r;r++)for(i=l[r],o=0,a=n.length;a>o;o++)e=n[o],this.can(e,i)&&t.push(""+e+"-"+i);return $("body").attr("data-ability",t.join(" "))},t.prototype.roleForResource=function(t,e,n){var i;return i=this.roles[e],i&&_.isFunction(i)&&(i=i(t,n)),null!=i?i:this.roleForResource(t,"default",n)},t.prototype.effectiveRolesFor=function(t){var e;return[t].concat((null!=(e=this.abilities[t])?e.inherit:void 0)||[])},t}(),window.Able=t}.call(this),function(){var t,e;t="v1",null==(e=this.Api)&&(this.Api={}),Api.version=t,Api.url=function(e){return null==e&&(e=""),"/api/"+t+e},Api.get=function(t){var e;return e=Api.url(t),$.getJSON(e)},Api.getUser=function(t){var e;return e=new $.Deferred,Api.get("/users/"+t).done(function(t){var n;return n=new User(t),e.resolve(n)}).fail(function(){return e.reject.apply(e,arguments)}),e.promise()}}.call(this),function(){var t,e,n,i,r={}.hasOwnProperty,o=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s=[].slice;t=function(t){function e(){return n=e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.className="Account",e.prototype.urlRoot=Api.url("/accounts"),e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments),this.dataset=new Dataset(Elements,Connections,Loops),this.memberships=new MembershipCollection([],{account:this}),this.hasMany("tokens",{inverse:"account"})},e.prototype.toString=function(){return"the account"},e.prototype.isPublic=function(){return this.get("plan").startsWith("public")},e.prototype.slug=function(){return this.get("slug")||this.get("name").slugify()},e.prototype.publicUrl=function(t){return null==t&&(t=""),"/"+this.owner.slug()+"/"+this.slug()+t},e.prototype.endpoint=function(){return this.publicUrl(".couch")},e.prototype.origin=function(){return""+location.protocol+"//"+location.host+this.endpoint()},e.prototype.urlFor=function(){var t,e;return t=1<=arguments.length?s.call(arguments,0):[],t=[this.owner,this].concat(_.compact(t)),e=_.collect(t,function(t){return t.slug()}),"/"+e.join("/")},e.prototype.getSummary=function(){var t;return null!=(t=this.get("description"))?t.summary():void 0},e.prototype.provision=function(){return $.post(this.publicUrl("/sync"))},e}(Backbone.Model),e=function(e){function n(){return i=n.__super__.constructor.apply(this,arguments)}return o(n,e),n.prototype.className="AccountCollection",n.prototype.model=t,n.prototype.url=Api.url("/accounts"),n.prototype["new"]=function(t){return new this.model(t)},n.prototype.build=function(t){var e;return e=this["new"](t),this.add(e),e},n}(Backbone.Collection),namespace("window",function(n){return n.Account=t,n.AccountCollection=e,n.Accounts=new e})}.call(this),function(){var t,e,n,i,r=function(t,e){return function(){return t.apply(e,arguments)}},o={}.hasOwnProperty,s=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},a=[].slice;t=function(t){function e(){return this.autocompletes=r(this.autocompletes,this),n=e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.className="Attribute",e.prototype.paramRoot="attribute",e.prototype.defaults=function(){return{type:"Attribute","private":!1,category:"General",position:null,limit:1,locked:!1,prompt:"none",format:"string",editor:null,core:!1,icon:null,values:[]}},e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments)},e.prototype.is=function(t){return t?this===t||this.id===t||this.cid===t||this.key()===t.toLowerCase():!1},e.prototype.format=function(){return this.get("format")},e.prototype.editor=function(){return this.get("editor")||AttributesHelper.suggestEditor(this)},e.prototype.choices=function(){var t;switch(this.get("prompt")){case"list":return t=_.clone(this.get("values")),0===t.length?this.getUniqueValues():t;case"autocomplete":return this.getUniqueValues();default:return[]}},e.prototype.getUniqueValues=function(){var t,e,n,i,r,o;for(t=this.get("name"),i=[],e=function(){switch(this.key()){case"element type":return Elements.models;case"connection type":return Connections.models;case"loop type":return Loops.models;default:return[].concat(Elements.models,Connections.models,Loops.models)}}.call(this),r=0,o=e.length;o>r;r++)n=e[r],i.push(n.getAttr(t));return _.chain(i).flatten().compact().uniq().value().sort()},e.prototype.getAssignments=function(){var t,e,n,i,r,o,s;for(e=this.get("name"),t={},n=Elements.models.concat(Connections.models),o=0,s=n.length;s>o;o++)i=n[o],r=i.attrs.get(e),null!=r&&(t[i.cid]=r);return t},e.prototype.autocompleteValue=function(){var t,e;return t=this.get("name"),e=new Backbone.CouchCollection,e.view="attributes/values",e.query={startkey:[t],endkey:[t,{}],group:!0},e.fetch().done(function(){return log.info.apply(log,["autocomplete result is"].concat(a.call(arguments)))}).fail(function(){return log.info.apply(log,["autocomplete failed"].concat(a.call(arguments)))})},e.prototype.limit=function(){var t;return t=this.get("limit"),"none"===t?1/0:t},e.prototype.isDivisive=function(){return"none"!==this.get("prompt")},e.prototype.isPrompted=function(){return"none"!==this.get("prompt")},e.prototype.isPrivate=function(){return this.get("private")},e.prototype.isPublic=function(){return!this.isPrivate()},e.prototype.isSortable=function(){return!0},e.prototype.isCore=function(){return this.get("core")},e.prototype.autocompletes=function(){return this.get("autocomplete")},e.prototype.isSingle=function(){return this.get("single")},e.prototype.isMultiple=function(){return!this.get("single")},e.prototype.isPooled=function(){return this.get("pooled")},e.prototype.isShort=function(){return this.get("short")},e.prototype.isLong=function(){return!this.get("short")},e.prototype.canHaveManyValues=function(){return this.isMultiple()},e.prototype.label=function(){return this.get("label")||this.get("name").titleize()},e.prototype.key=function(){return this.get("name").toLowerCase()},e.prototype.slug=function(){return this.get("name").slugify()},e.prototype.singularize=function(){return 1===this.limit()?this.label():this.label().singularize()},e.prototype.pluralize=function(){return 1===this.limit()?this.label().pluralize():this.label()},e.prototype.typed=function(){return Cast.as(this.format())},e.prototype.validateValue=function(t){return this.typed().validate(t)},e.prototype.massageValue=function(t){return this.typed().massage(t)},e.prototype.parseValue=function(t){return this.typed().parse(t)},e.prototype.formatValue=function(t){return this.typed().format(t)},e}(Backbone.CouchModel),e=function(e){function n(){return i=n.__super__.constructor.apply(this,arguments)}return s(n,e),n.prototype.view="resources/all",n.prototype.query={key:"Attribute"},n.prototype.model=t,n.prototype.index=function(t){return[t.id,t.cid,t.slug(),t.key(),t.get("name")]},n.prototype.comparator=function(t){return t.label()},n.prototype.resolve=function(e){var n;return e instanceof t?e:(n=e,Attributes.findByName(n)||new t({name:n}))},n.prototype.build=function(e){var n;return null==e&&(e={}),n=new t(e),this.add(n),n},n.prototype.findOrInitialize=function(t){return this.findByName(t)||this.build({name:t})},n.prototype.findByName=function(t){return this.get(t.toLowerCase())},n.prototype.pluck=function(t){return"label"===t?this.collect(function(t){return t.label()}):n.__super__.pluck.call(this,t)},n.prototype.getCustomAttributes=function(){return this.select(function(t){return!t.isCore()})},n.prototype.getTypeAttributeForCollection=function(t){var e;return e=function(){switch(t){case"elements":return"element type";case"connections":return"connection type";case"loops":return"loop type"}}(),this.get(e)},n.prototype.categorized=function(){var t,e,n,i,r;return t=this.groupBy("category"),i=_.chain(t).keys().without("General","Footnotes").value().sort(),e=[],t.General&&e.push("General"),e.push.apply(e,i),t.Footnotes&&e.push("Footnotes"),r=function(e){var n;return n=t(e),n.sortBy()},n=function(e){var n;return n=_.sortBy(t[e],function(t){var e;return null!=(e=t.get("position"))?e:t.label()}),{name:e,attributes:n}},_.map(e,n)},n}(Backbone.CouchCollection),namespace("window",function(n){return n.Attribute=t,n.AttributeCollection=e,n.Attributes=new e})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.get=function(t){return n.__super__.get.call(this,this._prepareAttr(t))},n.prototype.getAll=function(t){var e;return e=this.get(t),null!=e?_.isArray(e)?e:[e]:[]},n.prototype.has=function(t,e){var n;return t=this._prepareAttr(t),2===arguments.length?(n=this.attributes[t],_.isEqual(n,e)||_.include(n,e)):(e=this.attributes[t],null!=e&&!(""===e||_.isEqual(e,[])||_.isEqual(e,{})))},n.prototype.hasChanged=function(t){return n.__super__.hasChanged.call(this,this._prepareAttr(t))},n.prototype.set=function(t,e,i){var r,o;return o=this._attrsAndOptions.apply(this,arguments),r=o[0],i=o[1],n.__super__.set.call(this,r,i)},n.prototype.unset=function(t,e){return t=this._prepareAttr(t),n.__super__.unset.call(this,t,e)},n.prototype.edit=function(t,e,n){var i;return i=this.get(t),i[e]=n},n.prototype.push=function(t,e,n){var i,r,o,s;o=this._attrsAndOptions.apply(this,arguments),i=o[0],n=o[1],s=[];for(t in i)e=i[t],r=this.attributes[t],_.include(r,e)||(r=_.isArray(r)?r:null!=r?[r]:[],r.push(e),s.push(this.set(t,r,n)));return s},n.prototype.pop=function(t,e){var n,i,r,o,s;o=this._attrsAndOptions.apply(this,arguments),n=o[0],i=o[1],s=[];for(t in n)e=n[t],r=this.attributes[t],_.isArray(r)?(e=_.without(r,e),0===e.length&&(e=null)):e=_.isEqual(r,e)?null:r,null!=e?s.push(this.set(t,e,i)):s.push(this.unset(t,i));return s},n.prototype.merge=function(t,e,n){var i,r,o,s;o=this._attrsAndOptions.apply(this,arguments),i=o[0],n=o[1],s=[];for(t in i)e=i[t],r=this.attributes[t],_.isArray(r)&&(e=_.chain(r).concat(e).uniq().value()),s.push(this.set(t,e,n));return s},n.prototype._attrsAndOptions=function(t,e,n){var i,r;null==n&&(n={}),_.isString(t)?(i={},i[t]=e):t instanceof Attribute?(i={},i[t.get("name")]=e):(i=t,n=e),r={};for(t in i)e=i[t],r[this._prepareAttr(t)]=e;return[r,n]},n.prototype._prepareAttr=function(t){return t instanceof Attribute?t.key():t.toLowerCase()},n}(Backbone.Model),namespace("window",function(e){return e.AttributeModel=t})}.call(this),function(){var t;t=function(){function t(t){var e,n;null==t&&(t={}),t=_.defaults({},t,_.result(this,"defaults"));for(e in t)n=t[e],this[e]=n;this.initialize(t)}return t.prototype.defaults={},t.prototype.initialize=function(){},t}(),namespace("window",function(e){return e.BasicModel=t})}.call(this),function(){var t;t={attributes:function(e){var n,i;return i=function(){var i,r,o;for(o=[],i=0,r=e.length;r>i;i++)n=e[i],o.push(t.attribute(n));return o}(),$.when.apply($,i)},attribute:function(t){var e,n;return n=Attributes.get(t.name),n?(n.set(t),n.changedAttributes()?n.save():$.when(n)):(e=Attributes.build(t),e.save())},map:function(t){var e;return e=Maps.build(t),e.save()},perspective:function(t){var e;return e=Perspectives.build(t),e.save()}},namespace("window",function(e){return e.Bootstrap=t})}.call(this),function(){var t,e,n,i,r,o;t=[{name:"Label",format:"string",editor:"string",prompt:"autocomplete",limit:1,core:!0},{name:"Description",format:"text",limit:1,core:!0},{name:"Element Type",editor:"radio",prompt:"list",limit:1,core:!0},{name:"Connection Type",editor:"radio",prompt:"list",limit:1,core:!0},{name:"Loop Type",editor:"radio",prompt:"list",limit:1,core:!0},{name:"Tags",format:"string",limit:"none",prompt:"autocomplete",core:!0}],r={name:"Map",description:void 0},o={name:"Default Perspective",description:void 0,style:"element[email], element[image] {\n  size: 40;\n}"},e=function(){return Bootstrap.attributes(t)},n=function(){return 0===Maps.length?Bootstrap.map(r):$.when(!0)},i=function(){return 0===Perspectives.length?Bootstrap.perspective(o):$.when(!0)},Bootstrap.foundation=function(){return e().then(n).then(i)},Bootstrap.buildDefaultMap=function(){return Perspectives.build(r)},Bootstrap.buildDefaultPerspective=function(){return Perspectives.build(o)},Bootstrap.foundation.attributes=t,Bootstrap.foundation.defaultMapAttributes=r,Bootstrap.foundation.defaultPerspectiveAttributes=o,Bootstrap.foundationAttributes=e}.call(this),function(){Bootstrap.social=function(){var t,e,n,i,r,o,s,a;for(o=["Twitter","Facebook","LinkedIn"],t=[],n=s=0,a=o.length;a>s;n=++s)r=o[n],i=""+r+" Profile",e=r.toLowerCase(),t.push({name:i,icon:e,format:"url",category:"Social",position:n,limit:1});return Bootstrap.attributes(t)}}.call(this),function(){var t,e,n,i,r={}.hasOwnProperty,o=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};t=function(t){function e(){return n=e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.defaults=function(){return{decorations:{}}},e.prototype.initialize=function(){var t,e;return this.canvas={},this.fresh=!0,this.invalid=!0,this.pickable=null!=(t=this.attributes.pickable)?t:!0,delete this.attributes.pickable,this.locked=null!=(e=this.attributes.locked)?e:!1,delete this.attributes.locked,this.layout={ready:!1,invalid:!0},this.style={ready:!1,invalid:!0},this.display={ready:!1,invalid:!0}},e.prototype.clone=function(){var t;return t=e.__super__.clone.apply(this,arguments),t.entity=this.entity,t},e.prototype.setMap=function(t){return t?(this.map=t,this.set("map_id",t.id)):void 0},e.prototype.getMap=function(){return this.map},e.prototype.setEntity=function(t){return this.beforeEntityChanged(t),this.entity&&this.stopListening(this.entity),this.entity=t,this.set("entity_id",this.entity?this.entity.id:null),this.entity&&this.listenTo(this.entity,"change",this.onEntityModified),this.onEntityChanged(this.entity),this.trigger("change:entity",this,t),this.afterEntityChanged(t)},e.prototype.beforeEntityChanged=function(){},e.prototype.onEntityChanged=function(){},e.prototype.afterEntityChanged=function(){},e.prototype.onEntityModified=function(t){return t.hasChanged("_id")&&this.set("entity_id",t.id,{silent:!0}),this.invalidate()},e.prototype.getLabel=function(){return this.entity.getLabel()},e.prototype.key=function(){return this.entity_id},e.prototype.is=function(t){return t instanceof e?this===t:t instanceof Entity?this.entity?this.entity===t:this.entity_id===t.id:void 0},e.prototype.isNode=function(){return this instanceof Node},e.prototype.isEdge=function(){return this instanceof Edge},e.prototype.isLabel=function(){return this instanceof Label},e.prototype.getPosition=function(){return this.isNode()?this.position:this.from.position.add(this.to.position).divide(2)},e.prototype.invalidate=function(t,e){var n,i,r,o;for(null==t&&(t="all"),null==e&&(e={}),n="invalidate",i=function(){switch(t){case"all":return["style","layout","display"];default:return[t]}}(),r=0,o=i.length;o>r;r++)t=i[r],this[t].invalid=!0,n+=" invalidate:"+t;return e.silent?void 0:this.trigger(n,this)},e.prototype.onSelect=function(){return this.selected=!0,this.invalidate("display")},e.prototype.engage=function(){return this.active=!0,this.pickable=!1,this.lock()},e.prototype.disengage=function(){return this.active=!1,this.pickable=!0,this.unlock()},e.prototype.lock=function(){return this.locked=!0},e.prototype.unlock=function(){return this.locked=!1},e.prototype.select=function(){return this.selected=!0,this.invalidate("display")},e.prototype.deselect=function(t){return t=_.extend({silent:!1},t),this.selected=this.active=this.indirectlyActive=this.highlighted=!1,this.invalidate("display",t)},e.prototype.onMouseEnter=function(){return this.hover=!0,this.invalidate("display")},e.prototype.onMouseLeave=function(){return this.hover=!1,this.invalidate("display")},e}(Backbone.CouchModel),e=function(e){function n(){return i=n.__super__.constructor.apply(this,arguments)}return o(n,e),n.prototype.model=t,n.prototype.index=function(t){return[t.id,t.cid,t.entity.id,t.entity.cid]},n.prototype.findByEntity=function(){return this},n}(Backbone.CouchCollection),namespace("window",function(n){return n.Component=t,n.ComponentCollection=e})}.call(this),function(){var t,e={}.hasOwnProperty,n=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},i=[].slice;window.Entity=function(t){function e(t,n){var i;null==t&&(t={}),null==(i=t.attributes)&&(t.attributes={}),e.__super__.constructor.call(this,t,n)}return n(e,t),e.prototype.className="Entity",e.prototype.initialize=function(){return this.attrs=this.ownAttrs=new AttributeModel(this.attributes.attributes),delete this.attributes.attributes,this.listenTo(this.attrs,"all",function(){var t;return t=1<=arguments.length?i.call(arguments,0):[],/^change/.test(t[0])?(t[1]=this,this.trigger.apply(this,t)):void 0})},e.prototype.toJSON=function(){var t;return t=e.__super__.toJSON.apply(this,arguments),this.attrs&&(t.attributes=this.attrs.toJSON()),t},e.prototype.isElement=function(){return this instanceof Element},e.prototype.isConnection=function(){return function(){return this instanceof Connection}},e.prototype.isLoop=function(){return this instanceof Loop},e.prototype.getCollectionType=function(){return this.className.pluralize().toLowerCase()},e.prototype.getLabelAttribute=function(){return"label"},e.prototype.getTypeAttribute=function(){return""+this.className.toLowerCase()+" type"},e.prototype.getDirectSelector=function(t){var e;return null==t&&(t={informal:!1}),e=t.informal&&this.getInformalID()||this.attrs.get("id")||this.id,"#"+e},e.prototype.getInformalID=function(){var t;return null!=(t=this.getLabel())?t.idify():void 0},e.prototype.getLabel=function(){return this.attrs.get(this.getLabelAttribute())},e.prototype.getFallbackLabel=function(){},e.prototype.getType=function(){return this.attrs.get(this.getTypeAttribute())},e.prototype.getProfileImage=function(){return this.getImage("large")||this.attrs.get("email")&&this.getAvatar({size:200})},e.prototype.getImage=function(t){var e;return"large"===t&&(e=this.attrs.get("image2x")),null==e&&(e=this.attrs.get("image")),e},e.prototype.getAvatar=function(t){return null==t&&(t={}),t=_.extend({size:80},t),this.attrs.has("email")?Gravatar.get(this.attrs.get("email"),t):void 0},e.prototype.isLinked=function(){return!!this.get("proxied_workspace_id")},e.prototype.getProxiedWorkspace=function(){return this.isLinked()?currentAccount.workspaces.get(this.get("proxied_workspace_id")):null},e.prototype.set=function(t,n,i){var r,o,s;return _.isObject(t)&&null!=t.attributes&&null!=this.attrs?(r=t,i=n,o=_.omit(r,"attributes"),e.__super__.set.call(this,o,i),s=r.attributes,this.attrs.set(s,i)):e.__super__.set.apply(this,arguments)},e.prototype.getAttrs=function(t){return null!=t?this.attrs.getAll(t):this.attrs.attributes},e.prototype.getAssignedAttrs=function(){return _.keys(this.attrs.attributes)},e.prototype.setAttr=function(){var t;return(t=this.attrs).set.apply(t,arguments)},e.prototype.editAttr=function(){var t;return(t=this.attrs).edit.apply(t,arguments)},e.prototype.getAttr=function(){var t;return(t=this.attrs).get.apply(t,arguments)},e.prototype.unsetAttr=function(){var t;return(t=this.attrs).unset.apply(t,arguments)},e.prototype.hasAttr=function(){var t;return(t=this.attrs).has.apply(t,arguments)},e.prototype.pushAttr=function(){var t;return(t=this.attrs).push.apply(t,arguments)},e.prototype.popAttr=function(){var t;return(t=this.attrs).pop.apply(t,arguments)},e.prototype.mergeAttr=function(){var t;return(t=this.attrs).merge.apply(t,arguments)},e.prototype.attrHasChanged=function(){var t;return(t=this.attrs).hasChanged.apply(t,arguments)},e}(Backbone.CouchModel),window.EntityCollection=function(e){function i(){return t=i.__super__.constructor.apply(this,arguments)}return n(i,e),i.prototype.model=Entity,i}(Backbone.CouchCollection)}.call(this),function(){var t,e,n=function(t,e){return function(){return t.apply(e,arguments)}},i={}.hasOwnProperty,r=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o=[].slice;t=function(t){function i(){return this.isConnectable=n(this.isConnectable,this),this.isEmpty=n(this.isEmpty,this),this.is=n(this.is,this),this.last=n(this.last,this),this.second=n(this.second,this),this.first=n(this.first,this),this.count=n(this.count,this),this.clear=n(this.clear,this),this.toggle=n(this.toggle,this),this.bindToWorkspace=n(this.bindToWorkspace,this),e=i.__super__.constructor.apply(this,arguments)}return r(i,t),i.prototype.model=Entity,i.union=function(){var t,e;return t=arguments[0],e=2<=arguments.length?o.call(arguments,1):[],new i(_.union.apply(_,_.pluck(e,"models")))},i.intersection=function(){var t;return t=1<=arguments.length?o.call(arguments,0):[],new i(_.intersection.apply(_,_.pluck(t,"models")))},i.prototype.clone=function(){return new this.constructor(this.models)},i.prototype.union=function(){var t;return t=1<=arguments.length?o.call(arguments,0):[],this.reset(_.union.apply(_,_.pluck(t,"models")))},i.prototype.intersection=function(){var t;return t=1<=arguments.length?o.call(arguments,0):[],this.reset(_.intersection.apply(_,_.pluck(t,"models")))},i.prototype.ids=function(){return this.collect(function(t){return t.id})},i.prototype.cids=function(){return this.collect(function(t){return t.cid})},i.prototype.bindToWorkspace=function(){var t=this;return currentWorkspace.elements.bind("remove",function(e){return t.remove(e)}),currentWorkspace.connections.bind("remove",function(e){return t.remove(e)})},i.prototype.toggle=function(t,e){return this.include(t)?this.remove(t,e):this.add(t,e)},i.prototype.clear=function(){return this.isEmpty()?void 0:this.reset()},i.prototype.count=function(){return this.length},i.prototype.first=function(){return this.at(0)},i.prototype.second=function(){return this.at(1)},i.prototype.last=function(){return this.at(this.length-1)},i.prototype.is=function(t){return t?1===this.length&&this.first()===t:0===this.length},i.prototype.isEmpty=function(){return 0===this.length},i.prototype.isConnectable=function(){return(1===this.length||2===this.length)&&this.all(function(t){return t instanceof Node||t instanceof Element})},i.prototype.save=function(){return $.when.apply($,this.invoke("save"))},i}(Backbone.Collection),namespace("window",function(e){return e.SelectionModel=t
})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.model=Component,n.prototype.initialize=function(){return this.on("add",function(t){return t.select()}),this.on("remove",function(t){return t.deselect()}),this.on("reset",function(t,e){var n,i,r,o,s,a,l,u;for(a=e.previousModels,i=0,o=a.length;o>i;i++)n=a[i],n.deselect();for(l=t.models,u=[],r=0,s=l.length;s>r;r++)n=l[r],u.push(n.select());return u})},n.prototype.clone=function(){return new n(this.models)},n.prototype.toEntitySelection=function(){return new EntitySelection(this.getEntities())},n.prototype.select=function(t){switch(t){case"elements":return this.getElements();case"connections":return this.getConnections();default:return n.__super__.select.apply(this,arguments)}},n.prototype.getEntities=function(){return this.map(function(t){return t.entity})},n.prototype.getElements=function(){var t;return t=[],this.each(function(e){return e.isNode()?t.push(e.entity):void 0}),t},n.prototype.getConnections=function(){var t;return t=[],this.each(function(e){return e.isEdge()?t.push(e.entity):void 0}),t},n.prototype.getBounds=function(t){var e;return null==t&&(t={}),_.defaults(t,{neighbors:!1}),e=new Rectangle,this.each(function(n){return n.visible?e.bound(n.bounds(t)):void 0}),e},n.prototype.nodes=function(t){var e;return null==t&&(t={indirect:!1}),e=this.map(function(e){if(e.isNode())return e;if(t.indirect){if(e.isEdge())return[e.from,e.to];if(e.isLabel())return _.map(e.edges,function(t){return[t.from,t.to]})}}),_.chain(e).flatten().uniq().compact().value()},n.prototype.edges=function(){return this.filter(function(t){return t.isEdge()})},n.prototype.labels=function(){return this.filter(function(t){return t.isLabel()})},n.prototype.lock=function(){var t,e,n,i,r;for(i=this.models,r=[],e=0,n=i.length;n>e;e++)t=i[e],r.push(t.lock());return r},n.prototype.unlock=function(){var t,e,n,i,r;for(i=this.models,r=[],e=0,n=i.length;n>e;e++)t=i[e],r.push(t.unlock());return r},n.prototype.isPinned=function(){return _.all(this.nodes(),function(t){return t.get("pinned")})},n.prototype.isLabel=function(){return 1===this.length&&this.first()instanceof Label},n.prototype.label=function(){},n}(SelectionModel),namespace("window",function(e){return e.ComponentSelection=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.defaults=function(){return{model:null,mine:null,theirs:null,old:null,status:"unresolved"}},n.prototype.initialize=function(){return this.initializeDefaults()},n.prototype.initializeDefaults=function(){var t,e;return e=this.model(),e?(t={},this.has("mine")||(t.mine=e.toJSON()),this.has("old")||(t.old=e.syncedAttributes()),this.set(t)):void 0},n.prototype.edit=function(){return this.trigger("edit",this)},n.prototype.model=function(){return this.get("model")},n.prototype.mine=function(){return this.get("mine")},n.prototype.theirs=function(){return this.get("theirs")},n.prototype.old=function(){return this.get("old")},n.prototype.versions=function(){return _.pick(this.attributes,"mine","theirs","old")},n.prototype.current=function(t){return this.model().get(t)},n.prototype.my=function(t){return this.mine()[t]},n.prototype.their=function(t){return this.theirs()[t]},n.prototype.merged=function(t){return this.result[t].value},n.prototype.type=function(){return this.model().className},n.prototype.collection=function(){return this.type().pluralize().toLowerCase()},n.prototype.label=function(){var t;switch(t=this.model(),t.className){case"Map":case"Perspective":return t.get("name");case"Element":case"Connection":case"Loop":return t.getLabel()||t.getFallbackLabel();default:return t.label()}},n.prototype.status=function(){return this.get("status")},n.prototype.conflicted=function(){var t;return null!=(t=this.result)?t.conflict:void 0},n.prototype.resolved=function(){var t;return null!=(t=this.result)?t.resolved:void 0},n.prototype.prepare=function(){return this.has("theirs")?$.when(!0):this.fetch()},n.prototype.fetch=function(){var t;return t=this,this.model().fetch({update:!1}).done(function(e,n){var i;return i=n,log.debug("Conflict fetch",i),t.set("theirs",i)}).fail(function(t,e){return log.error("Conflict unavailable",t,e)})},n.prototype.conflicts=function(t){return this.result.conflicts(t)},n.prototype.automerge=function(){var t;return this.merge(),this.result.resolved?this.resolve():(this.defer(),t=new $.Deferred,t.reject(),t.promise())},n.prototype.merge=function(){return this.result=this.merge3(this.mine(),this.theirs(),this.old()),this.result.favor("mine","type").favor("mine","created_at").favor("theirs","updated_at").favor("theirs","_rev").refresh(),log.debug("Merge result",this.result),this.result},n.prototype.merge3=function(t,e,n){return merge(t,e,n)},n.prototype.defer=function(){return log.warn("Deferring conflicts",this.conflicts("unresolved")),this.set("status","deferred"),this.trigger("defer",this,this.result)},n.prototype.resolve=function(){var t,e,n,i,r=this;return t=this.toJSON(),log.debug("Conflict resolved",this,t),i=this.model(),n=i.toMemento(),i.set(t),this.set("status","resolved"),this.trigger("resolve",this),_.isEqual(t,this.theirs())?(i.resync(),log.debug("Conflict accepted"),$.when(this)):(e=new Commands.Models.Update(i,n),execute(e).done(function(){}).fail(function(){return log.error("Conflict resolution failed",r,t)}))},n.prototype.toJSON=function(t){return this.result.toJSON(t)},n}(Backbone.Model),namespace("window",function(e){return e.Conflict=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.label=function(){return this.model().getLabel()||this.model.getFallbackLabel()},n.prototype.merge3=function(t,e,n){var i;return i=merge.object(t,e,n)},n}(Conflict),namespace("window",function(e){return e.EntityConflict=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n}(EntityConflict),namespace("window",function(e){return e.ConnectionConflict=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n}(EntityConflict),namespace("window",function(e){return e.ElementConflict=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.label=function(){return this.model().get("name")},n.prototype.merge3=function(t,e,n){return merge.object(t,e,n).favor("mine","scale").favor("mine","center").favor("mine","fixed").favor("mine","direction")},n}(Conflict),namespace("window",function(e){return e.MapConflict=t})}.call(this),function(){var t,e,n,i,r,o,s;r=function(t,e,n){var i,r,o,s,a;for(a=["array","object","string"],o=0,s=a.length;s>o;o++)if(r=a[o],i=_["is"+r.capitalize()],i(t)&&i(e)&&(null==n||i(n)))return r},i=function(t,e,n,o){var s;return o=_.defaults({},o,{deep:!0}),s=r(t,e,n)||"simple",/array|object/.test(s)&&!o.deep&&(s="simple"),i[s](t,e,n,o)},i.object=function(e,n,i,r){return null==i&&(i={}),o(e,n,i,r,function(o){var s;return s=_.union(_.keys(e),_.keys(n),_.keys(i)),t(o,{},s,r)})},i.array=function(n,i,r,s){return null==r&&(r=[]),o(n,i,r,s,function(o){var a,l,u;return l=function(){u=[];for(var t=0,e=Math.max(n.length,i.length,r.length);e>=0?e>t:t>e;e>=0?t++:t--)u.push(t);return u}.apply(this),a=function(t,o){return o>=r.length&&e(n[o],i[o])?(t.value=void 0,t.conflict=!0,t.resolved=!1):void 0},t(o,[],l,s,a)})},i.string=function(t,e,n,r){return i.simple(t,e,n,r)},i.simple=function(t,e,i,r){return o(t,e,i,r,function(r){return n(t,e)?(r.conflict=!1,r.resolved=!0,r.value=t):(r.conflict=!0,n(t,i)?(r.resolved=!0,r.value=e):n(e,i)?(r.resolved=!0,r.value=t):void 0)})},t=function(t,e,n,r,o){var s,a,l,u;for(t.deep=!0,t.value=e,l=0,u=n.length;u>l;l++)a=n[l],s=i(t.mine[a],t.theirs[a],t.old[a],r),"function"==typeof o&&o(s,a,t),t.value[a]=s;return t.refresh()},o=function(t,e,n,i,r){var o;return o=new MergeResult({mine:t,theirs:e,old:n,options:i}),r(o),o},n=function(t,e){return _.isEqual(t,e)},e=function(t,e){return!n(t,e)},s=function(t){return _.isArray(t)?t:null!=t?[t]:[]},this.merge=i}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.initialize=function(){},n}(BasicModel),namespace("window",function(e){return e.MergeConflict=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},r=[].slice;t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.defaults=function(){return{value:void 0,conflict:!1,resolved:!1,deep:!1,ignored:!1}},n.prototype.initialize=function(){},n.prototype.at=function(){var t,e,n,i,o,s;for(e=1<=arguments.length?r.call(arguments,0):[],n=this,i=0,o=e.length;o>i;i++)if(t=e[i],!(n=null!=(s=n.value)?s[t]:void 0))return;return n},n.prototype.version=function(t){return this[t]},n.prototype.ignore=function(){var t,e;return t=1<=arguments.length?r.call(arguments,0):[],t.length?null!=(e=this.at.apply(this,t))&&e.ignore():this.ignored=!0,this},n.prototype.force=function(){var t,e,n;return t=arguments[0],e=2<=arguments.length?r.call(arguments,1):[],e.length?null!=(n=this.at.apply(this,e))&&n.force(t):this.deep?this.each(function(e){return e.force(t)}):this.resolve(this.version(t)),this},n.prototype.favor=function(){var t,e,n;return t=arguments[0],e=2<=arguments.length?r.call(arguments,1):[],e.length?null!=(n=this.at.apply(this,e))&&n.favor(t):this.deep?this.each(function(e){return e.favor(t)}):this.resolved||this.resolve(this.version(t)),this},n.prototype.resolve=function(){var t,e,n;switch(t=1<=arguments.length?r.call(arguments,0):[],t.length){case 0:this.resolved=!0;break;case 1:this.value=_.first(t),this.resolved=!0;break;default:e=_.initial(t),n=_.last(t),this.at.apply(this,e).resolve(n)}return this},n.prototype.conflicts=function(t){var e,n,i;return e=[],n=[],i=t?"resolved"===t:void 0,this._conflicts(e,n,i),e},n.prototype._conflicts=function(t,e,n){return this.deep?this.each(function(i,r){var o;return o=i._conflicts(t,e.concat(r),n),t.concat(o)}):!this.conflict||null!=n&&this.resolved!==n?void 0:t.push({path:e,result:this})},n.prototype.each=function(t){return _.each(this.value,t),this},n.prototype.refresh=function(){var t,e;return this.deep&&(t=!1,e=!0,this.each(function(n){return n.ignored?void 0:(n.refresh(),n.conflict&&(t=!0),n.resolved?void 0:e=!1)}),this.conflict=t,this.resolved=e),this},n.prototype.get=function(){var t,e,n,i,o;return t=1<=arguments.length?r.call(arguments,0):[],_.isString(t[0])?(_.isString(_.last(t))?e=t:(e=_.initial(t),n=_.last(t)),this.at.apply(this,e).get(n)):(n=null!=(o=t[0])?o:{},this.deep?(i=_.isArray(this.value)?[]:{},this.each(function(t,e){return t.ignored?void 0:i[e]=t.get(n)}),i):(this.resolved?i=this.value:n.favor?i=this.version(n.favor):raise("Unresolved conflict"),i))},n.prototype.toJSON=function(t){return this.get(t)},n}(BasicModel),namespace("window",function(e){return e.MergeResult=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.label=function(){return this.model().get("name")},n.prototype.merge3=function(t,e,n){return merge.object(t,e,n).favor("mine","filters").favor("mine","style")},n}(Conflict),namespace("window",function(e){return e.PerspectiveConflict=t})}.call(this),function(){var t,e,n=function(t,e){return function(){return t.apply(e,arguments)}},i={}.hasOwnProperty,r=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};window.Connection=function(e){function i(){return this.loadElement=n(this.loadElement,this),this.loadElements=n(this.loadElements,this),this.isFixed=n(this.isFixed,this),t=i.__super__.constructor.apply(this,arguments)}return r(i,e),i.prototype.className="Connection",i.prototype.defaults=function(){return{type:"Connection",direction:"undirected",delayed:!1}},i.prototype.initialize=function(){return i.__super__.initialize.apply(this,arguments),this.hasMany("edges",{inverse:"entity"}),this.associate(),this.on("change:from_id change:to_id",this.loadElements)},i.prototype.associate=function(){var t,e,n,i,r,o,s=this;for(this.from&&this.stopListening(this.from),this.to&&this.stopListening(this.to),o=["from","to"],i=0,r=o.length;r>i;i++)n=o[i],t=this.attributes[n],t?(this[n]=t,this.set(""+n+"_id",t.id),delete this.attributes[n]):this[n]=(e=this.attributes[""+n+"_id"])?Elements.get(e):new Element;return this.from&&this.listenTo(this.from,"change:_id",function(){return s.set("from_id",s.from.id,{silent:!0})}),this.to?this.listenTo(this.to,"change:_id",function(){return s.set("to_id",s.to.id,{silent:!0})}):void 0},i.prototype.toString=function(){return this.getLabel()||this.getFallbackLabel()},i.prototype.buildEdge=function(){return new Edge({entity:this})},i.prototype.getFallbackLabel=function(){var t,e;return t=this.from.toString(),e=this.to.toString(),"directed"===this.get("direction")?"connection from "+t+" to "+e:"connection between "+t+" and "+e},i.prototype.isFixed=function(){return this.from.isFixed()&&this.to.isFixed()},i.prototype.reverse=function(){return this.redirect({from:this.to,to:this.from}),this.trigger("reverse",this),this},i.prototype.redirect=function(t,e){var n;return _.isObject(t)?n=t:(n={},n[t]=e),this.from=n.from||this.from,this.to=n.to||this.to,this.set({from_id:this.from.id,to_id:this.to.id}),this.trigger("redirect",this),this},i.prototype.connects=function(t,e){return this.from===t&&this.to===e||this.from===e&&this.to===t},i.prototype.include=function(t){return this.from===t||this.to===t},i.prototype.neighbor=function(t){return t===this.from?this.to:this.from},i.prototype.loadElements=function(t){return this.loadElement("from",t),this.loadElement("to",t)},i.prototype.loadElement=function(t,e){var n,i;return null==e&&(e={}),i=this.get(""+t+"_id"),!i||this[t]&&!e.force?void 0:(n=Elements.get(i)||raise("Element not found: "+i),n.connections.add(this),this[t]=n)},i}(Entity),window.ConnectionCollection=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return r(n,t),n.prototype.model=Connection,n.prototype.url="/connections",n.prototype.view="resources/all",n.prototype.query={key:"Connection"},n.prototype.findByElements=function(t,e){return this.find(function(n){return n.from===t&&n.to===e})},n.prototype.reconcile=function(t){var e,n;return _.isObject(t)?t instanceof Connection?t:null!=t.id?Connections.get(t.id):null!=t.from&&null!=t.to&&(e=Elements.lookup(t.from),n=Elements.lookup(t.to),e&&n)?Connections.find(function(t){return t.from===e&&t.to===n}):void 0:Connections.get(t)},n}(EntityCollection)}.call(this),function(){var t,e={}.hasOwnProperty,n=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},i=[].slice;window.Dataset=function(e){function r(){return t=r.__super__.constructor.apply(this,arguments)}return n(r,e),r.prototype.initialize=function(t,e,n){return this.elements=t||new ElementCollection,this.connections=e||new ConnectionCollection,this.loops=n||new LoopCollection,this.set("status","initialized"),this.forwardEventsFor(this.elements,this.connections,this.loops)},r.prototype.summary=function(){return""+this.elements.length+"/"+this.connections.length+"/"+this.loops.length},r.prototype.reset=function(){return this.elements.reset(),this.connections.reset(),this.loops.reset()},r.prototype.clean=function(t){var e,n,i,r,o,s;for(null==t&&(t={}),_.defaults(t,{virtual:!0}),o=[this.connections,this.elements,this.loops],s=[],i=0,r=o.length;r>i;i++)e=o[i],s.push(function(){var t,i,r,o;for(r=e.where({virtual:!0}),o=[],t=0,i=r.length;i>t;t++)n=r[t],o.push(e.remove(n));return o}());return s},r.prototype.duplicate=function(){var t;return t=new r,t.elements.reset(this.elements.models),t.connections.reset(this.connections.models),t.loops.reset(this.loops.models),t},r.prototype.entities=function(){var t;return t=[].concat(this.elements.models,this.connections.models,this.loops.models),new EntityCollection(t)},r.prototype.toSelection=function(){var t;return t=[].concat(this.elements.models,this.connections.models,this.loops.models),new EntitySelection(t)},r.prototype.size=function(){return this.entityCount()},r.prototype.entityCount=function(){return this.elements.length+this.connections.length+this.loops.length},r.prototype.each=function(t){return this.entities().each(t)},r.prototype.filter=function(t,e){var n,i,r,o;for(null==e&&(e={}),_.defaults(e,{orphans:!1}),o=[this.elements,this.connections,this.loops],i=0,r=o.length;r>i;i++)n=o[i],this.filterCollection(n,t);return e.orphans&&this.filterOrphanedConnections(),this},r.prototype.collect=function(t){return this.entities().collect(t)},r.prototype.ids=function(){return this.collect(function(t){return t.id})},r.prototype.filterElements=function(t){return this.filterCollection(this.elements,t)},r.prototype.filterConnections=function(t){return this.filterCollection(this.connections,t)},r.prototype.filterOrphanedConnections=function(){var t=this;return this.filterConnections(function(e){return t.elements.include(e.from)&&t.elements.include(e.to)})},r.prototype.select=function(){return this.toSelection()},r.prototype.union=function(){var t;t=1<=arguments.length?i.call(arguments,0):[]},r.prototype.intersection=function(){var t;t=1<=arguments.length?i.call(arguments,0):[]},r.prototype.graph=function(){var t,e,n;return t=this.duplicate(),t.filterOrphanedConnections(),n=function(t){return{entity:t,entity_id:t.id}},e=new Graph,e.elements.reset(t.elements.map(n),{silent:!0}),e.connections.reset(t.connections.map(n),{silent:!0}),e.labels.reset(t.loops.map(n),{silent:!0}),e.refresh(),e},r.prototype.getElement=function(t){return this.elements.get(t)},r.prototype.filterCollection=function(t,e){return t.reset(t.filter(e))},r}(Backbone.Model)}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};window.Edge=function(e){function n(){return t=n.__super__.constructor.apply(this,arguments)}return i(n,e),n.prototype.className="Edge",n.prototype.collectionName="edges",n.prototype.paramRoot="edge",n.prototype.defaults=function(){return{type:"Edge",clockwise:!0}},n.prototype.initialize=function(){var t=this;return n.__super__.initialize.apply(this,arguments),this.entity=new Connection,this.from=new Node,this.to=new Node,this.curvature=this.get("curvature"),this.on("change",function(){return t.curvature=t.get("curvature"),t.invalidate()}),this.associate(),this.entity?void 0:this.setConnection(new Connection)},n.prototype.associate=function(){var t,e,n,i,r,o,s;for(this.map=this.attributes.map||Maps.get(this.attributes.map_id),delete this.attributes.map,t=this.attributes.entity||Connections.get(this.attributes.entity_id),delete this.attributes.entity,t&&this.setConnection(t),o=["from","to"],s=[],i=0,r=o.length;r>i;i++)n=o[i],(e=this.attributes[n])?(this[n]=e,s.push(delete this.attributes[n])):this.map&&this.entity?s.push(this[n]=this.map.nodes.get(this.entity[n].cid)):this.map?s.push(this[n]=this.map.nodes.build()):s.push(void 0);return s},n.prototype.getConnection=function(){return this.entity},n.prototype.setConnection=function(t){return this.setEntity(t)},n.prototype.beforeEntityChanged=function(){var t;return null!=(t=this.entity)?t.edges.remove(this):void 0},n.prototype.onEntityChanged=function(){return this.listenTo(this.entity,"reverse",this.reverse)},n.prototype.afterEntityChanged=function(){return this.entity.edges.add(this)},n.prototype.getDirection=function(){return this.entity.get("direction")},n.prototype.getPrelabel=function(){return this.entity.getAttr("prelabel")||function(){switch(this.entity.getType()){case"++":case"+-":return"+";case"--":case"-+":return"-"}}.call(this)},n.prototype.getPostlabel=function(){return this.entity.getAttr("postlabel")||function(){switch(this.entity.getType()){case"++":case"-+":case"+":return"+";case"--":case"+-":case"-":return"-"}}.call(this)},n.prototype.other=function(t){return t===this.from?this.to:this.from},n.prototype.isDelayed=function(){return this.entity.get("delayed")},n.prototype.invalidate=function(){var t,e;return null!=(t=this.from)&&t.invalidate.apply(t,arguments),null!=(e=this.to)&&e.invalidate.apply(e,arguments),n.__super__.invalidate.apply(this,arguments)},n.prototype.reverse=function(){return this.set("clockwise",!this.get("clockwise")),this.redirect({from:this.to,to:this.from}),this.trigger("reverse",this),this},n.prototype.redirect=function(t,e){var n;return _.isObject(t)?n=t:(n={},n[t]=e),this.from=n.from||this.from,this.to=n.to||this.to,this.invalidate(),this.trigger("redirect",this),this},n.prototype.lock=function(){return this.from.lock(),this.to.lock(),this},n.prototype.unlock=function(){return this.from.unlock(),this.to.unlock(),this},n.prototype.pin=function(){return this.from.pin(),this.to.pin(),this},n.prototype.float=function(){return this.from.float(),this.to.float(),this},n.prototype.isFixed=function(){return this.from.isFixed()&&this.to.isFixed()},n.prototype.isLocked=function(){return this.from.locked&&this.to.locked},n.prototype.isPinned=function(){return this.from.isPinned()&&this.to.isPinned()},n.prototype.isRenderable=function(){return null!=this.style&&null!=this.from.display.position&&null!=this.to.display.position},n.prototype.isLabelled=function(){return null!=this.entity.get("label")},n.prototype.isInverted=function(){return this.display.curvature<0},n.prototype.getWinding=function(){var t;return t=this.get("clockwise"),this.isInverted()&&(t=!t),t?"cw":"ccw"},n.prototype.isFull=function(){return Math.abs(this.display.curvature)>=1},n.prototype.isNegative=function(){return this.display.length-this.from.display.outerRadius-this.to.display.outerRadius-2*this.display.arrows.height<0},n.prototype.include=function(t){return this.from===t||this.to===t},n.prototype.bounds=function(t){var e;return null==t&&(t={}),_.defaults(t,{neighbors:!1}),e=new Rectangle,e.bound(this.display.start.position),e.bound(this.display.apex.position),e.bound(this.display.end.position),t.neighbors&&(e.bound(this.from.bounds()),e.bound(this.to.bounds())),e},n.prototype.hitTarget=function(t){return t.distanceTo(this.display.head.position)<this.display.handleRadius?"head":t.distanceTo(this.display.tail.position)<this.display.handleRadius?"tail":"body"},n.prototype.getPosition=function(){return this.display.apex.position},n.prototype.positionAlong=function(t,e){var n,i,r,o,s,a,l,u,c,h,p;return s="cw"===this.getWinding(),h=this.from.display.outerRadius,p=this.to.display.outerRadius,e>0?h+=e:0>e&&(p-=e),o=this.display.circle.circumference(),n=this.from.display.position.subtract(this.display.circle.center).angle(),r=this.to.display.position.subtract(this.display.circle.center).angle(),a=2*Math.asin(h/(2*this.display.circle.radius)),l=2*Math.asin(p/(2*this.display.circle.radius)),s?(n+=a,r-=l):(n-=a,r+=l),u=Math.abs(n-r),s?(i=n>r?n+t*(2*Math.PI-u):n+t*(r-n),c=i+Math.PI/2):(i=n>r?n+t*(r-n):n-t*(2*Math.PI-u),c=i-Math.PI/2),{position:this.display.circle.pointAtAngle(i),angle:c}},n}(Component),window.EdgeCollection=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.view="map/components",n.prototype.query=function(){return{key:[this.map.id,"Edge"]}},n.prototype.model=Edge,n}(ComponentCollection)}.call(this),function(){var t,e,n=function(t,e){return function(){return t.apply(e,arguments)}},i={}.hasOwnProperty,r=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};window.Element=function(e){function i(){return this.neighbors=n(this.neighbors,this),this.connectionExistsFrom=n(this.connectionExistsFrom,this),this.connectionExistsTo=n(this.connectionExistsTo,this),this.isFixed=n(this.isFixed,this),t=i.__super__.constructor.apply(this,arguments)}return r(i,e),i.prototype.className="Element",i.prototype.paramRoot="element",i.prototype.defaults=function(){return{type:"Element"}},i.prototype.initialize=function(){return i.__super__.initialize.apply(this,arguments),this.hasMany("nodes",{inverse:"entity"}),this.associate(),this.connections=new ConnectionCollection},i.prototype.toString=function(){return this.getLabel()||"Element"},i.prototype.toJSON=function(t){return null==t&&(t={}),_.defaults(t,{ghost:!1}),this.ghost&&t.ghost===!1?_.clone(this.attributes):i.__super__.toJSON.apply(this,arguments)},i.prototype.associate=function(){var t;return t=this.attributes.ghost||Elements.get(this.attributes.ghost_id),delete this.attributes.ghost,t?this.setGhost(t):void 0},i.prototype.setGhost=function(t){return this.ghost&&(this.stopListening(this.ghost),this.stopForwardingEventsFor(this.ghost)),this.ghost=t,this.ghost?(this.attrs=this.ghost.attrs,this.set("ghost_id",this.ghost.id),this.forwardEventsFor(this.ghost)):(this.attrs=this.ownAttrs,this.unset("ghost_id"))},i.prototype.save=function(){var t;return $.when(i.__super__.save.apply(this,arguments),null!=(t=this.ghost)?t.save():void 0)},i.prototype.buildNode=function(t){return null==t&&(t={}),new Node(_.extend(t,{entity:this}))},i.prototype.isFixed=function(){return null!=this.get("position")},i.prototype.connectionExistsTo=function(t){return null!=this.connections.find(function(e){return e.to.id===t.id})},i.prototype.connectionExistsFrom=function(t){return null!=this.connections.find(function(e){return e.from.id===t.id})},i.prototype.neighbors=function(){return this.connections.invoke("neighbor",this)},i.findByLabel=function(t){var e;return e=null,$.ajax({async:!1,url:"/nodes/find",data:{source:"account",label:t},dataType:"json"}).done(function(t){return t?e=new i(t):void 0}),e},i}.call(this,Entity),window.ElementCollection=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return r(n,t),n.prototype.model=Element,n.prototype.path=function(){return"/accounts/"+this.account.id+"/elements"},n.prototype.view="resources/all",n.prototype.query={key:"Element"},n.prototype.lookup=function(t){return this.get(t)||this.findByLabel(t)},n.prototype.exists=function(t){return null!=this.findByLabel(t)},n.prototype.findByLabel=function(t){var e,n;return n=String(t).toLowerCase(),e=function(e){return t=String(e.getLabel()).toLowerCase(),t===n},this.find(e)},n.prototype.labels=function(){return this.chain().collect(function(t){return t.getLabel()}).compact().uniq().value().sort()},n.prototype.buildAttr=function(t){return this.build({attributes:t})},n.prototype.reconcile=function(t){return _.isObject(t)?t instanceof Element?t:null!=t.id?Elements.get(t.id):null!=t.attributes.label?Elements.findByLabel(t.attributes.label):void 0:Elements.get(t)||Elements.findByLabel(t)},n}(EntityCollection)}.call(this),function(){var t,e,n=function(t,e){return function(){return t.apply(e,arguments)}},i={}.hasOwnProperty,r=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};t=function(t){function i(){return this.sharedLabel=n(this.sharedLabel,this),this.isSingleConnection=n(this.isSingleConnection,this),this.isTwoElements=n(this.isTwoElements,this),this.isSingleElement=n(this.isSingleElement,this),this.entities=n(this.entities,this),e=i.__super__.constructor.apply(this,arguments)}return r(i,t),i.prototype.model=Component,i.prototype.entities=function(){var t,e,n,i,r;for(t=[],r=this.models,n=0,i=r.length;i>n;n++)e=r[n],t.push(e);return t},i.prototype.toComponents=function(t){var e;return e=ArrayHelper.keymap(this.cids()),t.select(function(t){return e[t.entity.cid]})},i.prototype.toComponentSelection=function(t){return new ComponentSelection(this.toComponents(t))},i.prototype.isOnlyElements=function(){return this.length>0&&this.all(function(t){return t.isElement()})},i.prototype.isOnlyConnections=function(){return this.length>0&&this.all(function(t){return t instanceof Connection})},i.prototype.isMultipleConnections=function(){return this.length>1&&this.isOnlyConnections()},i.prototype.isSingleElement=function(){return this.isSingleComponent()&&this.isOnlyElements()},i.prototype.isTwoElements=function(){return 2===this.length&&this.isOnlyElements()},i.prototype.isSingleConnection=function(){return this.isSingleComponent()&&this.isOnlyConnections()},i.prototype.includesElements=function(){return this.any(function(t){return t instanceof Element})},i.prototype.includesConnections=function(){return this.any(function(t){return t instanceof Connection})},i.prototype.elements=function(t){var e;return null==t&&(t=!1),e=this.map(function(e){return e instanceof Element?e:t&&e instanceof Connection?[e.from,e.to]:void 0}),_.chain(e).flatten().uniq().compact().value()},i.prototype.connections=function(){return this.filter(function(t){return t instanceof Connection})},i.prototype.loops=function(){return this.filter(function(t){return t instanceof Loop})},i.prototype.attributes=function(){var t,e,n,i,r,o,s,a,l,u,c;for(e={},a=this.models,o=0,s=a.length;s>o;o++){n=a[o],l=n.attrs.toJSON();for(t in l)i=l[t],r=null!=(u=e[t])?u:e[t]={},(null!=(c=r[i])?c:r[i]=[]).push(n)}return e},i.prototype.toString=function(){var t;return 1===this.length?this.first().toString()||"unnamed":(t=this.type(),"mixed"===t?"multiple items":"multiple "+t)},i.prototype.label=function(){return this.toString()},i.prototype.sharedLabel=function(){var t;return 0===this.length?null:(t=this.first().get("label"),this.all(function(e){return e.get("label")===t})?t:null)},i.prototype.counts=function(){var t,e,n,i,r,o;for(n={},t=this.breakdown(),o=["elements","connections","loops"],i=0,r=o.length;r>i;i++)e=o[i],n[e]=t[e].length;return n},i.prototype.breakdown=function(){return{elements:this.elements(),connections:this.connections(),loops:this.loops()}},i.prototype.type=function(){var t,e;return e=null,t=this.counts(),t.elements>0&&t.connections>0?e="mixed":t.elements>0?e=1===t.elements?"element":"elements":t.connections>0&&(e=1===t.connections?"connection":"connections"),e},i.prototype.sharedAttr=function(t,e){var n;return 0===this.length?void 0:(n=null!=e,null==e&&(e=this.first().getAttr(t)),this.all(function(n){return n.hasAttr(t,e)})?e:void 0)},i.prototype.sharedAttrs=function(){var t,e,n,i,r,o,s,a,l,u;if(i=[],this.length>0)for(t=this.first(),n=Attributes.filter(function(t){return t.isDivisive()}),o=0,a=n.length;a>o;o++)for(e=n[o],u=t.getAttrs(e),s=0,l=u.length;l>s;s++)r=u[s],this.sharedAttr(e,r)&&i.push({attribute:e.get("name"),value:r});return i},i.prototype.getDirectSelector=function(t){return this.map(function(e){return e.getDirectSelector(t)}).join(", ")},i}(SelectionModel),namespace("window",function(e){return e.EntitySelection=t})}.call(this),function(){var t;t=function(){function t(t,e,n){this.message=t,this.error=e,this.status=n
}return t.fromXHR=function(e){var n,i,r,o;return r=JSON.parse(e.responseText),i=_.isString(r.errors)?r.errors:r.errors.message,n=r.error,o=r.status,new t(i,n,o)},t.prototype.summary=function(){var t,e;return t=_.compact([this.status,this.error]),e=this.message,_.isEmpty(t)||(e+=" ("+t.join(" ")+")"),e},t}(),namespace("window",function(e){return e.ErrorResponse=t})}.call(this),function(){var t;t=function(){function t(t){this.evaluator=t}return t.prototype.evaluate=function(t,e){var n,i;return null==e&&(e=new EvaluationResult),t instanceof Entity?this.evaluateEntity(t,e):(i=this,n=function(t){return i.evaluateEntity(t,e)},t.each(n)),e},t.prototype.evaluateEntity=function(t,e){var n,i;try{i=this.evaluator.evaluate(t)}catch(r){n=r,i=void 0}return e.value(t,i)},t}(),window.Evaluation=t}.call(this),function(){var t;t=function(){function t(){this._limits={min:1/0,max:-1/0},this._values={},this._entities={}}return t.prototype.value=function(t,e){var n;return null==e&&(e=null),n=t.cid,null!=e?(this._entities[n]=t,e>this._limits.max&&(this._limits.max=e),e<this._limits.min&&(this._limits.min=e),this._values[n]=e):this._values[n]},t.prototype.values=function(t){return null==t&&(t=!0),t?this._values:void 0},t.prototype.domain=function(){return _.values(this._values)},t.prototype.limits=function(){return[this._limits.min,this._limits.max]},t.prototype.to=function(t){return t=Attributes.find(t)||this.createField(t),this.each(function(e,n){return Attributes.set(e,t,n,{virtual:!0})}),this},t.prototype.each=function(t){var e,n,i,r;i=this._values,r=[];for(e in i)n=i[e],r.push(t(this._entities[e],n));return r},t.prototype.createField=function(t){var e;return e=new AttributeField({label:t,core:!1,single:!0,pooled:!1,virtual:!0}),Attributes.fields.add(e),e},t}(),window.EvaluationResult=t}.call(this),function(){var t;t=function(){function t(t){this.attr=Attributes.resolve(t),this.type=this.attr.typed()}return t.prototype.evaluate=function(t){return this.type.parse(t.getAttr(this.attr))},t}(),window.AttributeEvaluator=t}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};t=function(){function t(){this.evaluate=e(this.evaluate,this),this.label=e(this.label,this),this.key=e(this.key,this)}return t.prototype.key=function(){return"label-length"},t.prototype.label=function(){return"Label Length"},t.prototype.evaluate=function(t){var e;return e=t.get("label"),e?e.length:0},t}(),window.LabelLengthEvaluator=t}.call(this),function(){var t,e,n,i,r={}.hasOwnProperty,o=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};e=function(t){function e(){return n=e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.defaults=function(){return{type:"Event",user:null,action:null,command:null,undoable:null}},e.prototype.toJSON=function(){var t;return t={type:"Event",user_id:this.get("user").id}},e.prototype.isUndoable=function(){var t,e,n;return null!=(t=null!=(e=this.get("undoable"))?e:null!=(n=this.get("command"))?n.undoable:void 0)?t:!1},e.prototype.undo=function(){return undo(this.get("command")),this.trigger("undo",this),this.destroy()},e.prototype.summary=function(){return this.get("summary")||""+this.actor()+" "+this.get("action")},e.prototype.actor=function(){return this.get("user")===currentUser?"You":this.get("user").get("username")},e}(Backbone.Model),t=function(t){function n(){return i=n.__super__.constructor.apply(this,arguments)}return o(n,t),n.prototype.model=e,n.prototype.initialize=function(){return this.on("undo",function(t){return this.remove(t)})},n}(Backbone.Collection),namespace("window",function(n){return n.EventModel=e,n.EventCollection=t,n.Events=new t})}.call(this),function(){var t,e;t=function(){function t(){}return t.prototype.execute=function(t,e){var n=this;return null==e&&(e={}),this.busy(function(){return t.execute().done(function(){return t.undoable&&!t.cancelled?n.triggerEvent(t):void 0}).fail(function(t){return t?alert(t):void 0})})},t.prototype.undo=function(t,e){return null==e&&(e={}),this.busy(function(){return t.undo()})},t.prototype.busy=function(t){return map.busy(),t().always(function(){return map.busy(!1)})},t.prototype.triggerEvent=function(t){var e;return e=_.result(t,"summary"),Events.add({user:currentUser,action:e,command:t,undoable:t.undoable})},t}(),e=new t,namespace("window",function(t){return t.executionManager=e,t.execute=function(){return e.execute.apply(e,arguments)},t.undo=function(){return e.undo.apply(e,arguments)}})}.call(this),function(){var t,e,n,i=function(t,e){return function(){return t.apply(e,arguments)}},r={}.hasOwnProperty,o=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};t=function(t){function e(){return this.notify=i(this.notify,this),this.notice=i(this.notice,this),this.alert=i(this.alert,this),n=e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.alert=function(t){return this.notify("alert",t)},e.prototype.notice=function(t){return this.notify("notice",t)},e.prototype.notify=function(t,e){return this.set(t,e,{silent:!0}),this.trigger(t,e)},e}(Backbone.Model),e=new t,namespace("window",function(n){return n.Flash=t,n.flash=e,n.alert=function(){return e.alert.apply(e,arguments)},n.notice=function(){return e.notice.apply(e,arguments)}})}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};t=function(){function t(t,n){this.graph=t,this.distances=n,this.execute=e(this.execute,this)}return t.prototype.execute=function(){var t,e,n,i,r,o,s,a,l,u,c,h,p,f;for(e=this.graph.e,o=function(){p=[];for(var t=0,n=e.length;n>=0?n>t:t>n;n>=0?t++:t--)p.push(t);return p}.apply(this),s=0,u=e.length;u>s;s++)if(n=e[s],0!==n.connections.length)for(a=0,c=e.length;c>a;a++)i=e[a],t=n===i?0:i.connections.length>0&&n.isAdjacentTo(i)?1:1/0,this.distances.set(n,i,t);for(f=[],l=0,h=e.length;h>l;l++)r=e[l],0!==r.connections.length&&f.push(function(){var t,o,s;for(s=[],o=0,t=e.length;t>o;o++)n=e[o],0!==n.connections.length&&s.push(function(){var t,o,s;for(s=[],o=0,t=e.length;t>o;o++)i=e[o],0!==i.connections.length&&s.push(this.distances.set(n,i,Math.min(this.distances.get(n,r)+this.distances.get(r,i),this.distances.get(n,i))));return s}.call(this));return s}.call(this));return f},t}(),namespace("sage.analysis.algorithms",function(e){return e.FloydWarshallAlgorithm=t})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};window.Graph=function(){function e(e,n,i){this.onEdgeRemoved=t(this.onEdgeRemoved,this),this.onEdgeAdded=t(this.onEdgeAdded,this),this.onNodeRemoved=t(this.onNodeRemoved,this),this.onNodeAdded=t(this.onNodeAdded,this),this.filter=t(this.filter,this),this.size=0,this.nodes=e||new NodeCollection,this.edges=n||new EdgeCollection,this.labels=i||new LabelCollection,this.forwardEventsFor(this.nodes,this.edges,this.labels),this.refresh(),this.listen()}return _.extend(e.prototype,Backbone.Events),e.prototype.summary=function(){return""+this.nodes.length+"/"+this.edges.length+"/"+this.labels.length},e.prototype.reset=function(){return this.size=0,this.nodes.reset(),this.edges.reset(),this.labels.reset(),this.trigger("reset")},e.prototype.copy=function(t,e){return this.nodes.reset(t.nodes.models,e),this.edges.reset(t.edges.models,e),this.labels.reset(t.labels.models,e)},e.prototype.flatten=function(){},e.prototype.dataset=function(){var t,e,n,i,r,o,s;for(i={silent:!0},n=new Dataset,t={Node:n.elements,Edge:n.connections,Label:n.loops},s=this.components(),r=0,o=s.length;o>r;r++)e=s[r],t[e.className].add(e.entity,i);return n},e.prototype.isEmpty=function(){return 0===this.size},e.prototype.get=function(t){return t?t instanceof Component?t:t instanceof Entity?this.getByEntity(t):_.isString(t)?this.getByID(t):this.getAll(t):null},e.prototype.getByEntity=function(){var t;return t=target.isLoop()?this.labels:target.isElement()?this.nodes:this.edges,t.filter(function(t){return t.is(target)})},e.prototype.getAll=function(t){var e,n,i;return n=this,e=function(t){return n.get(t)},i=("function"==typeof t.map?t.map(e):void 0)||_.map(t,e),_.flatten(i)},e.prototype.getByID=function(t){var e,n;return n=t.split("-")[0],e=function(){switch(n){case"node":case"elem":return this.nodes;case"edge":case"conn":return this.edges;case"labl":case"loop":return this.labels}}.call(this),e.get(t)},e.prototype.getNeighbors=function(t){return _.chain(t.edges).map(function(e){return e.other(t)}).uniq().value()},e.prototype.include=function(t){return null!=this.get(t)},e.prototype.each=function(t,e){return _.each(this.components(),t,e),this},e.prototype.visit=function(t,e){return this.each(t,e),this},e.prototype.collect=function(t,e){return _.collect(this.components(),t,e)},e.prototype.filter=function(t,e){return this.nodes.reset(this.nodes.filter(t,e)),this.edges.reset(this.edges.filter(t,e)),this.labels.reset(this.labels.filter(t,e)),this.refresh()},e.prototype.select=function(t,e){return _.filter(this.components(),t,e)},e.prototype.getUnderlyingElements=function(){return _.pluck(this.nodes.models,"entity")},e.prototype.getUnderlyingConnections=function(){return _.pluck(this.edges.models,"entity")},e.prototype.getUnderlyingComponents=function(){return this.getUnderlyingElements().concat(this.getUnderlyingConnections())},e.prototype.bounds=function(){var t;return t=new Rectangle,this.visit(function(e){return e.visible?t.bound(e.bounds()):void 0}),t},e.prototype.center=function(){return this.bounds().center()},e.prototype.bump=function(){var t,e,n,i,r,o,s;for(n=100,t=n/2,o=this.nodes.models,s=[],i=0,r=o.length;r>i;i++)e=o[i],e.isFixed()||(e.position.x+=Math.random()*n-t,s.push(e.position.y+=Math.random()*n-t));return s},e.prototype.refresh=function(t){var e,n,i,r,o,s,a,l,u,c,h,p;for(null==t&&(t={}),_.defaults(t,{silent:!1}),log.debug("Graph#refresh",this.summary(),t),c=this.nodes.models,r=0,a=c.length;a>r;r++)i=c[r],this.cacheNode(i);for(h=this.edges.models,o=0,l=h.length;l>o;o++)e=h[o],this.cacheEdge(e);for(p=this.labels.models,s=0,u=p.length;u>s;s++)n=p[s],this.cacheLabel(n);return this.size=this.components().length,t.silent?void 0:this.trigger("refresh")},e.prototype.components=function(){return[].concat(this.nodes.models,this.edges.models,this.labels.models)},e.prototype.cacheNode=function(t){return t.resetEdges()},e.prototype.cacheEdge=function(t){var e,n,i,r,o,s;for(o=["from","to"],s=[],i=0,r=o.length;r>i;i++)n=o[i],e=t[n],e?(_.include(e.edges,t)||e.addEdge(t),s.push(t[n]=e)):(log.error("Expected node to exist in graph but not found (likely due to orphaned connection)"),log.error("Connection",t,n,t.attributes[""+n+"_id"]),s.push(log.error("Graph is",this)));return s},e.prototype.cacheLabel=function(){},e.prototype.listen=function(){return this.nodes.on("add",this.onNodeAdded).on("remove",this.onNodeRemoved),this.edges.on("add",this.onEdgeAdded).on("remove",this.onEdgeRemoved)},e.prototype.onNodeAdded=function(t){return this.cacheNode(t)},e.prototype.onNodeRemoved=function(t){var e,n,i,r,o;for(r=t.edges,o=[],n=0,i=r.length;i>n;n++)e=r[n],o.push(this.edges.remove(e));return o},e.prototype.onEdgeAdded=function(t){return this.cacheEdge(t)},e.prototype.onEdgeRemoved=function(){},e}()}.call(this),function(){var t,e,n=function(t,e){return function(){return t.apply(e,arguments)}},i={}.hasOwnProperty,r=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};t=function(t){function i(){return this.step=n(this.step,this),e=i.__super__.constructor.apply(this,arguments)}return r(i,t),i.prototype.defaults=function(){return{cooling:!1,friction:!1,damping:!0,threshold:.95,theta:.5,maxForce:100,minVelocity:1,gravity:1e-4,particleCharge:100,springLength:140,springStrength:.8,springConstant:1e-4}},i.prototype.initialize=function(){return this.reset()},i.prototype.setGraph=function(t){return this.reset(),null!=this.graph&&this.stopListening(this.graph),this.graph=t,this.addListeners(this.graph)},i.prototype.addListeners=function(t){return this.listenTo(t,"add",this.onComponentAdded),this.listenTo(t,"remove",this.onComponentRemoved),this.listenTo(t,"invalidate",this.onComponentModified),this.listenTo(t,"refresh",this.onGraphRefreshed)},i.prototype.simulate=function(t){var e,n,i,r,o,s,a,l;for(null!=t&&this.setGraph(t),log.info("Simulating",this.attributes,this.graph.nodes.length,this.graph.edges.length),this.simulation=new PhysicsSimulation({coolingEnabled:this.get("cooling"),frictionEnabled:this.get("friction"),dampingEnabled:this.get("damping"),integrator:new LiquidIntegrator(this.get("maxForce"),this.get("minVelocity"))}),this.simulation.behaviors.push(new Attraction(new Vector(0,0),{strength:this.get("gravity"),radius:100})),this.simulation.behaviors.push(new ApproximatedRepulsion(this.get("theta"))),this.simulation.behaviors.push(new SpringBehavior),a=this.graph.nodes.models,i=0,o=a.length;o>i;i++)n=a[i],this.simulation.addParticle(this.particle(n));for(l=this.graph.edges.models,r=0,s=l.length;s>r;r++)e=l[r],this.simulation.addSpring(this.spring(e));return this.simulation.on("step",this.step),this.simulation.start()},i.prototype.enable=function(){return this.enabled=!0,this.simulation.start()},i.prototype.disable=function(){return this.enabled=!1,this.simulation.stop()},i.prototype.toggle=function(){return this.enabled?this.disable():this.enable()},i.prototype.restart=function(t){return this.simulation.restart(t)},i.prototype.pause=function(){var t;return this.paused=!0,null!=(t=this.simulation)?t.pause():void 0},i.prototype.resume=function(t){var e;return this.paused=!1,this.enabled?null!=(e=this.simulation)?e.resume(t):void 0:void 0},i.prototype.reset=function(){var t;return null!=(t=this.simulation)&&t.destroy(),this.enabled=!0,this.paused=!1,this.particleMap={},this.springMap={}},i.prototype.reload=function(){return this.reset(),this.simulate(this.graph)},i.prototype.isEnabled=function(){return this.enabled},i.prototype.isPaused=function(){return this.paused},i.prototype.isStable=function(){return this.stability>=this.get("threshold")},i.prototype.onComponentAdded=function(t){return this.simulation?t.isNode()?this.simulation.addParticle(this.particle(t)):t.isEdge()?this.simulation.addSpring(this.spring(t)):void 0:void 0},i.prototype.onComponentRemoved=function(t){var e,n;if(this.simulation)if(t.isNode()){if(e=this.getParticle(t),null!=e)return this.simulation.removeParticle(e)}else if(t.isEdge()&&(n=this.getSpring(t),null!=n))return this.simulation.removeSpring(n)},i.prototype.onComponentModified=function(t){if(t){if(t.isNode())return this.particle(t);if(t.isEdge())return this.spring(t)}},i.prototype.onGraphRefreshed=function(){return log.info("LiquidForceLayout#onGraphRefreshed",this.graph,this.graph.nodes.models,this.graph.edges.models),this.reset(),this.simulate()},i.prototype.step=function(){var t,e,n,i,r;for(LayoutBenchmarks.start("assignment"),e=0,r=this.simulation.particles,n=0,i=r.length;i>n;n++)t=r[n],(t.fixed||t.stable)&&(e+=1);return this.stability=e/this.simulation.particles.length,LayoutBenchmarks.stop("assignment"),this.trigger("step"),this.isStable()?(this.pause(),this.trigger("done"),this.trigger("stable")):void 0},i.prototype.particle=function(t){var e,n,i,r,o;return this.trigger("initialize",t),null==(r=t.position)&&(t.position=this.randomPosition()),e=null!=(o=(n=this.particleMap)[i=t.cid])?o:n[i]=new Particle,e.node=t,e.position=t.position,e.fixed=t.isFixed(),e.radius=t.style.radius,e.mass=this.calculateMass(t),e.charge=this.calculateCharge(t),e.gravity=this.get("gravity"),e},i.prototype.randomPosition=function(){var t,e;return t=new Vector(0,0),e=10,Vector.around(t,e)},i.prototype.calculateMass=function(t){var e;return e=Math.log(t.degree),e>1?e:1},i.prototype.calculateCharge=function(){return this.get("particleCharge")},i.prototype.spring=function(t){var e,n,i,r;return this.trigger("initialize",t),e=null!=(r=(n=this.springMap)[i=t.cid])?r:n[i]=new Spring,e.from=this.getParticle(t.from),e.to=this.getParticle(t.to),e.length=(t.style.length||this.get("springLength"))+t.from.style.outerRadius,t.to.style.outerRadius,e.strength=t.style.strength||this.get("springStrength"),e.k=this.get("springConstant"),e},i.prototype.getParticle=function(t){return this.particleMap[t.cid]},i.prototype.getSpring=function(t){return this.springMap[t.cid]},i}(Backbone.Model),window.LiquidForceLayout=t}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.defaults=function(){return{origin:null,radius:10}},n.prototype.position=function(){var t;return t=this.get("origin")||getMap().getViewportCenterWorld(),Vector.around(t,this.get("radius"))},n}(Backbone.Model),namespace("window",function(e){return e.LiquidPlacement=t})}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};t=function(){function t(t){this.graph=t,this.reset=e(this.reset,this),this.get=e(this.get,this),this.set=e(this.set,this),this.calculate=e(this.calculate,this),this.reset()}return t.prototype.calculate=function(){var t;return this.reset(),t=new sage.analysis.algorithms.FloydWarshallAlgorithm(this.graph,this),t.execute()},t.prototype.set=function(t,e,n){var i,r,o;return(null!=(o=(i=this.distances)[r=t.key()])?o:i[r]={})[e.key()]=n},t.prototype.get=function(t,e){var n;return n=this.distances[t.key()],null!=n&&null!=n[e.key()]?n[e.key()]:1/0},t.prototype.reset=function(){return this.distances={}},t}(),namespace("sage.analysis",function(e){return e.DistanceTable=t})}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};t=function(){function t(t){this.theta=null!=t?t:.5,this.repulse=e(this.repulse,this),this.accumulate=e(this.accumulate,this),this.apply=e(this.apply,this)}return t.prototype.apply=function(t){var e,n,i,r,o;for(this.accumulate(t.quadtree),r=t.particles,o=[],n=0,i=r.length;i>n;n++)e=r[n],e.fixed?o.push(void 0):o.push(t.quadtree.visit(this.repulse(e)));return o},t.prototype.accumulate=function(t){var e,n,i,r;if(t.charge=0,t.chargeCenter=new Vector(0,0),!t.isLeaf)for(r=t.children,n=0,i=r.length;i>n;n++)e=r[n],null!=e&&(this.accumulate(e),t.charge+=e.charge,t.chargeCenter.x+=e.charge*e.chargeCenter.x,t.chargeCenter.y+=e.charge*e.chargeCenter.y);return t.node&&(t.isLeaf||(t.node.position.x+=Math.random(),t.node.position.y+=Math.random()),t.charge+=t.pointCharge=t.node.charge,t.chargeCenter.x+=t.node.charge*t.node.position.x,t.chargeCenter.y+=t.node.charge*t.node.position.y),t.chargeCenter.x=t.chargeCenter.x/t.charge,t.chargeCenter.y=t.chargeCenter.y/t.charge},t.prototype.repulse=function(t){var e,n;return n=this.theta,e=function(e){var i,r,o;if(e.node!==t){if(o=t.position.subtract(e.chargeCenter),i=1/o.magnitude(),(e.xmax-e.xmin)*i<n)return r=e.charge*i*i,t.force.x+=o.x*r,t.force.y+=o.y*r,!0;if(e.node&&isFinite(i))return r=e.pointCharge*i*i,t.force.x+=o.x*r,t.force.y+=o.y*r}}},t}(),window.ApproximatedRepulsion=t}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};t=function(){function t(t,n){var i;this.source=t,this.options=null!=n?n:{},this.apply=e(this.apply,this),_.defaults(this.options,{strength:.1,radius:100}),null==(i=this.source)&&(this.source=new Vector(0,0))}return t.prototype.apply=function(t){var e,n,i,r,o,s,a,l,u,c;for(r=this.options.radius,o=this.options.strength,u=t.particles,c=[],a=0,l=u.length;l>a;a++)i=u[a],i.fixed||(s=this.source.subtract(i.position),e=(s.magnitude()-r)/r,e>0?(n=o*e,i.force.x+=s.x*n,c.push(i.force.y+=s.y*n)):c.push(void 0));return c},t}(),window.Attraction=t}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};t=function(){function t(t){this.strength=null!=t?t:1,this.apply=e(this.apply,this)}return t.prototype.apply=function(t){var e,n,i,r,o,s,a,l;for(a=t.particles,l=[],o=0,s=a.length;s>o;o++)i=a[o],i.fixed?l.push(void 0):(e=i.position.magnitude(),e>100?(r=i.gravity,null==r&&(r=this.strength),n=r*i.mass/e,i.force.x+=-i.position.x*n,l.push(i.force.y+=-i.position.y*n)):l.push(void 0));return l},t}(),window.Gravity=t}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};t=function(){function t(){this.apply=e(this.apply,this)}return t.prototype.apply=function(t){var e,n,i,r,o,s,a,l,u;for(l=t.particles,u=[],s=0,a=l.length;a>s;s++)i=l[s],u.push(function(){var s,a,l,u;for(l=t.particles,u=[],s=0,a=l.length;a>s;s++)r=l[s],i===r||r.fixed?u.push(void 0):(o=r.position.subtract(i.position),e=o.magnitude(),e>=1?(n=(i.charge+r.charge)/(e*e),r.force.x+=o.x*n,u.push(r.force.y+=o.y*n)):u.push(void 0));return u}());return u},t}(),window.Repulsion=t}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};t=function(){function t(){this.apply=e(this.apply,this)}return t.prototype.apply=function(t){var e,n,i,r,o,s,a,l,u,c;for(u=t.springs,c=[],a=0,l=u.length;l>a;a++)o=u[a],s=o.to.position.subtract(o.from.position),e=s.magnitude()-o.length,n=-o.k*o.strength*e,i=s.x*n,r=s.y*n,o.from.fixed||(o.from.force.x+=-i,o.from.force.y+=-r),o.to.fixed?c.push(void 0):(o.to.force.x+=i,c.push(o.to.force.y+=r));return c},t}(),window.SpringBehavior=t}.call(this),function(){var t;t=function(){function t(){}return t.prototype.update=function(t,e){var n,i,r,o,s,a,l;for(i=e.duration,n=1-e.friction,a=t.particles,l=[],o=0,s=a.length;s>o;o++)r=a[o],r.fixed||(r.velocity.x*=n,r.velocity.y*=n,r.velocity.x+=i*r.force.x/r.mass*e.temperature,r.velocity.y+=i*r.force.y/r.mass*e.temperature,r.position.x+=r.velocity.x,r.position.y+=r.velocity.y,l.push(r.force.reset()));return l},t}(),window.EulerIntegrator=t}.call(this),function(){var t;t=function(){function t(t,e){this.maxForce=null!=t?t:1e3,this.minVelocity=null!=e?e:.3}return t.prototype.update=function(t,e){var n,i,r,o,s,a,l,u,c;for(i=e.duration,n=1-e.friction,u=t.particles,c=[],a=0,l=u.length;l>a;a++)s=u[a],s.fixed||(s.velocity.x*=n*e.damping,s.velocity.y*=n*e.damping,r=s.force.magnitude(),_.isNaN(r)?(s.force.x=0,s.force.y=0):r>this.maxForce&&(o=this.maxForce/r,s.force.x*=o,s.force.y*=o),s.velocity.x+=i*s.force.x/s.mass*e.temperature*e.damping,s.velocity.y+=i*s.force.y/s.mass*e.temperature*e.damping,s.velocity.magnitude()<this.minVelocity?s.stable||(s.stability+=1,s.stable=s.stability>100):(s.stable=!1,s.stability=0,s.position.x+=s.velocity.x,s.position.y+=s.velocity.y),c.push(s.force.reset()));return c},t}(),window.LiquidIntegrator=t}.call(this),function(){var t;t=function(){function t(){this.fixed=!1,this.stable=!1,this.radius=10,this.gravity=1,this.position=new Vector,this.force=new Vector,this.acceleration=new Vector,this.velocity=new Vector,this.mass=1,this.charge=1}return t}(),window.Particle=t}.call(this),function(){var t,e,n=function(t,e){return function(){return t.apply(e,arguments)}},i={}.hasOwnProperty,r=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};t=function(t){function i(){return this.cache=n(this.cache,this),this.step=n(this.step,this),e=i.__super__.constructor.apply(this,arguments)}return r(i,t),i.prototype.defaults=function(){return{coolingEnabled:!0,frictionEnabled:!0,dampingEnabled:!0,quadtreeEnabled:!0,integrator:new EulerIntegrator}},i.prototype.initialize=function(){return this.reset(),this.step=LayoutBenchmarks.benchmarked(this.step),this.on("change",this.cache)},i.prototype.addDefaultBehaviors=function(){},i.prototype.start=function(){return this.running?void 0:(this.running=!0,this.cache(),this.step())},i.prototype.stop=function(){return this.running=!1},i.prototype.pause=function(){return this.stop()},i.prototype.resume=function(t){return null==t&&(t={}),_.defaults(t,{temperature:1}),this.temperature=t.temperature,this.start()},i.prototype.restart=function(t){return this.stop(),this.resume(t)},i.prototype.reset=function(){return this.temperature=1,this.particles=[],this.springs=[],this.constraints=[],this.behaviors=[]},i.prototype.destroy=function(){return this.stop(),this.reset(),this.off()},i.prototype.addParticle=function(t){return this.particles.push(t)},i.prototype.addSpring=function(t){return this.springs.push(t)},i.prototype.removeParticle=function(t){return ArrayHelper.remove(this.particles,t)},i.prototype.removeSpring=function(t){return ArrayHelper.remove(this.springs,t)},i.prototype.cool=function(){return this.temperature*=.995},i.prototype.isRunning=function(){return this.running},i.prototype.isStopped=function(){return!this.running},i.prototype.step=function(){var t,e,n,i,r,o,s,a,l,u;for(LayoutBenchmarks.start("simulation"),n={duration:1,temperature:this.temperature,friction:this.frictionEnabled?1-this.temperature:0,damping:this.dampingEnabled?.9:1},LayoutBenchmarks.start("initialization"),this.quadtreeEnabled&&(this.quadtree=new Quadtree({nodes:this.particles})),LayoutBenchmarks.stop("initialization"),LayoutBenchmarks.start("relaxation"),i=0;10>=i;i++)for(l=this.constraints,r=0,s=l.length;s>r;r++)e=l[r],e.apply(this,n);for(LayoutBenchmarks.stop("relaxation"),LayoutBenchmarks.start("behaviors"),u=this.behaviors,o=0,a=u.length;a>o;o++)t=u[o],t.apply(this,n);return LayoutBenchmarks.stop("behaviors"),LayoutBenchmarks.start("integration"),this.integrator.update(this,n),LayoutBenchmarks.stop("integration"),this.coolingEnabled&&this.cool(),LayoutBenchmarks.stop("simulation"),this.running?(LayoutBenchmarks.start("post"),this.trigger("step",n),LayoutBenchmarks.stop("post"),_.delay(this.step,1e3/60)):void 0},i.prototype.cache=function(){var t,e,n,i;n=this.attributes,i=[];for(t in n)e=n[t],i.push(this[t]=e);return i},i}(Backbone.Model),window.PhysicsSimulation=t}.call(this),function(){var t;t=function(){function t(){this.k=1e-4,this.length=100,this.strength=.1}return t}(),window.Spring=t}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};t=function(){function t(t){var n,i,r,o,s,a,l,u,c;if(null==t&&(t={}),this.visit=e(this.visit,this),this.buildChild=e(this.buildChild,this),this.insertInChild=e(this.insertInChild,this),this.insert=e(this.insert,this),this.isLeaf=!0,this.root=t.root,this.node=null,this.children=[],this.charge=0,this.pointCharge=0,this.chargeCenter=null,n=t.bounds,o=t.nodes,n)this.xmin=n.xmin,this.ymin=n.ymin,this.xmax=n.xmax,this.ymax=n.ymax;else if(o){for(this.xmin=this.ymin=1/0,this.xmax=this.ymax=-1/0,a=0,u=o.length;u>a;a++)r=o[a],r.position.x<this.xmin&&(this.xmin=r.position.x),r.position.x>this.xmax&&(this.xmax=r.position.x),r.position.y<this.ymin&&(this.ymin=r.position.y),r.position.y>this.ymax&&(this.ymax=r.position.y);s=this.xmax-this.xmin,i=this.ymax-this.ymin,s>i?this.ymax=this.ymin+s:this.xmax=this.xmin+i}if(this.xmid=(this.xmin+this.xmax)/2,this.ymid=(this.ymin+this.ymax)/2,null!=o)for(l=0,c=o.length;c>l;l++)r=o[l],this.insert(r)}return t.prototype.insert=function(t){var e;return this.isLeaf?(e=this.node,e?this.node.position.distanceTo(t.position)<.01?this.insertInChild(t):(this.node=null,this.insertInChild(e),this.insertInChild(t)):this.node=t):this.insertInChild(t)},t.prototype.insertInChild=function(t){var e,n,i,r;return this.isLeaf=!1,n=t.position.x>=this.xmid?t.position.y>=this.ymid?0:3:t.position.y>=this.ymid?1:2,e=null!=(r=(i=this.children)[n])?r:i[n]=this.buildChild(n),e.insert(t)},t.prototype.buildChild=function(e){var n;return n=function(){switch(e){case 0:return{xmin:this.xmid,ymin:this.ymid,xmax:this.xmax,ymax:this.ymax};case 1:return{xmin:this.xmin,ymin:this.ymid,xmax:this.xmid,ymax:this.ymax};case 2:return{xmin:this.xmin,ymin:this.ymin,xmax:this.xmid,ymax:this.ymid};case 3:return{xmin:this.xmid,ymin:this.ymin,xmax:this.xmax,ymax:this.ymid}}}.call(this),new t({bounds:n,root:this.root||this})},t.prototype.visit=function(t){var e,n,i,r,o;if(!t(this)){for(r=this.children,o=[],n=0,i=r.length;i>n;n++)e=r[n],null!=e&&o.push(e.visit(t));return o}},t}(),window.Quadtree=t}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};window.Invoice=function(e){function n(){return t=n.__super__.constructor.apply(this,arguments)}return i(n,e),n.prototype.urlRoot="/billing/invoices",n.prototype.paramRoot="invoice",n}(Backbone.Model),window.InvoiceCollection=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.model=Invoice,n.prototype.url="/billing/invoices",n}(Backbone.Collection)}.call(this),function(){var t,e,n,i,r={}.hasOwnProperty,o=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};t=function(t){function e(){return n=e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.className="Label",e.prototype.collectionName="labels",e.prototype.paramRoot="label",e.prototype.defaults=function(){return{type:"Label",position:null,pinned:!1}},e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments),this.entity=new Loop,this.edges=[],this.position=this.has("position")?Vector.copy(this.get("position")):new Vector,this.display.position=this.position.copy(),this.associate()},e.prototype.associate=function(){var t;return this.map=this.attributes.map||Maps.get(this.attributes.map_id),delete this.attributes.map,t=this.attributes.entity||Loops.get(this.attributes.entity_id),delete this.attributes.entity,t&&this.setEntity(t),this.refreshEdges()},e.prototype.onEntityChanged=function(){return this.entity?this.listenTo(this.entity,"change:connections",this.refreshEdges):void 0},e.prototype.refreshEdges=function(){return this.map&&this.entity?(this.edges=this.map.edges.get(this.entity.connections.ids()),this.invalidate()):void 0},e.prototype.getNaturalPosition=function(){var t,e,n,i,r,o,s;if(0===this.edges.length)return new Vector(0,0);for(n=i=0,s=this.edges,r=0,o=s.length;o>r;r++)t=s[r],e=t.getPosition(),n+=e.x,i+=e.y;return new Vector(n/this.edges.length,i/this.edges.length)},e.prototype.isPinned=function(){return this.get("pinned")},e.prototype.isFixed=function(){return this.locked||this.isPinned()},e.prototype.lock=function(){var t,n,i,r,o;for(e.__super__.lock.apply(this,arguments),r=this.edges,o=[],n=0,i=r.length;i>n;n++)t=r[n],o.push(t.lock());return o},e.prototype.unlock=function(){var t,n,i,r,o;for(e.__super__.unlock.apply(this,arguments),r=this.edges,o=[],n=0,i=r.length;i>n;n++)t=r[n],o.push(t.unlock());return o},e.prototype.bounds=function(){return Rectangle.unit().scale(20).translate(this.display.position.x,this.display.position.y)},e.prototype.onMouseEnter=function(){return e.__super__.onMouseEnter.apply(this,arguments),this.invalidateEdges()},e.prototype.onMouseLeave=function(){return e.__super__.onMouseLeave.apply(this,arguments),this.invalidateEdges()},e.prototype.select=function(){return e.__super__.select.apply(this,arguments),this.invalidateEdges()},e.prototype.deselect=function(){return e.__super__.deselect.apply(this,arguments),this.invalidateEdges()},e.prototype.invalidateEdges=function(){var t,e,n,i,r;for(i=this.edges,r=[],e=0,n=i.length;n>e;e++)t=i[e],r.push(t.invalidate("display"));return r},e}(Component),e=function(e){function n(){return i=n.__super__.constructor.apply(this,arguments)}return o(n,e),n.prototype.model=t,n.prototype.view="map/components",n.prototype.query=function(){return{key:[this.map.id,"Label"]}},n}(ComponentCollection),namespace("window",function(n){return n.Label=t,n.LabelCollection=e})}.call(this),function(){var t,e,n,i,r={}.hasOwnProperty,o=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};t=function(t){function e(){return n=e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.className="Loop",e.prototype.paramRoot="loop",e.prototype.defaults=function(){return{type:"Loop",connection_ids:[]}},e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments),this.connections=new ConnectionCollection,this.associate()},e.prototype.associate=function(){var t;return t=this.attributes.connections||Connections.get(this.attributes.connection_ids),this.connections.reset(t),delete this.attributes.connections},e.prototype.toString=function(){return this.getLabel()||"Loop"},e.prototype.toJSON=function(){var t;
return t=e.__super__.toJSON.apply(this,arguments),this.connections&&(t.connection_ids=this.connections.ids()),t},e.prototype.getElements=function(){return this.connections.chain().collect(function(t){return[t.from,t.to]}).flatten().uniq().value()},e.prototype.includeConnection=function(t){return this.connections.include(t)},e.prototype.addConnection=function(t){return this.connections.add(t),this.trigger("change:connections",this,this.connections)},e.prototype.removeConnection=function(t){return this.connections.remove(t),this.trigger("change:connections",this,this.connections)},e.prototype.toggleConnection=function(t){return this.includeConnection(t)?this.removeConnection(t):this.addConnection(t)},e}(Entity),e=function(e){function n(){return i=n.__super__.constructor.apply(this,arguments)}return o(n,e),n.prototype.model=t,n.prototype.view="resources/all",n.prototype.query={key:"Loop"},n.prototype.index=function(t){return[t.id,t.cid,t.getLabel()]},n.prototype.findByLabel=function(t){return this.get(t)},n}(EntityCollection),namespace("window",function(n){return n.Loop=t,n.LoopCollection=e})}.call(this),function(){var t,e,n,i,r={}.hasOwnProperty,o=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};t=function(t){function e(){return n=e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.className="Map",e.prototype.paramRoot="map",e.prototype.defaults=function(){return{type:"Map",description:"",scale:1,center:{x:0,y:0},fixed:!1,direction:"directed"}},e.prototype.initialize=function(){return this.visited=!1,this.ready=!1,this.hasMany("nodes",{inverse:"map"}),this.hasMany("edges",{inverse:"map"}),this.hasMany("labels",{inverse:"map"}),this.initializeScene()},e.prototype.toString=function(){return this.get("name")},e.prototype.initializeScene=function(){var t,e;return this.graph=new Graph(this.nodes,this.edges,this.labels),this.scene=new Scene({theme:Settings.theme,layout:new LiquidForceLayout,placement:new LiquidPlacement,graph:this.graph}),t=this.get("center"),e=this.get("scale"),this.scene.zoomTo(Vector.copy(t),e,{animate:!1}),this.zoomFitOnLoad=_.isEqual(t,{x:0,y:0})&&1===e,this.perspective=null,this.filter=null,this.focus=null},e.prototype.transform=function(t){var e;return null==t&&(t={}),e={},null!=t.scale&&(e.scale=t.scale),null!=t.translation&&(e.translation=Vector.copy(t.translation)),this.scene.transform(e,{animate:!1})},e.prototype.setPerspective=function(t){return this.perspective=t,this.scene.perspective=t},e.prototype.setDefaultPerspective=function(t){return this.set("default_perspective_id",t.id)},e.prototype.getDefaultPerspective=function(){var t,e;return t=this.get("default_perspective_id"),e=this.slug(),Perspectives.get(t)||Perspectives.get(e)||Settings.getDefaultPerspective()},e.prototype.isDefaultPerspective=function(t){return(!t||t.isNew())&&(t=void 0),t===this.getDefaultPerspective()},e.prototype.rebuild=function(){return this.scene.rebuild()},e.prototype.add=function(t){switch(t.className){case"Element":return this.addElement(t);case"Connection":return this.addConnection(t)}},e.prototype.addElement=function(t){return this.nodes.get(t)||this.nodes.build({entity:t})},e.prototype.addConnection=function(t){var e,n,i;return e=this.edges.get(t),e||(n=this.add(t.from),i=this.add(t.to),e=this.edges.build({entity:t,from:n,to:i})),e},e.prototype.addLoop=function(t){return this.labels.get(t)||this.labels.build({entity:t})},e.prototype.load=function(){var t,e,n,i,r,o=this;return this.visited=!0,r=function(){return o.nodes.fetch({silent:!0})},n=function(){return o.edges.fetch({silent:!0})},i=function(){return o.labels.fetch({silent:!0})},t=function(){return o.refresh(),o.ready=!0,o.trigger("load",o)},e=function(){return alert("Unable to load "+o.get("name"))},r().then(n).then(i).then(t,e)},e.prototype.refresh=function(){return this.graph.refresh(),this.scene.rebuild()},e.prototype.isReady=function(){return this.ready},e.prototype.dataset=function(){return this.graph.dataset()},e.prototype.slug=function(){var t;return this.get("slug")||(null!=(t=this.get("name"))?t.slugify():void 0)||""},e.prototype.buildNode=function(t){var e;return t.map_id=this.id,e=new Node(t),e.map=this,e.entity=this.account.elements.get(t.entity_id),this.nodes.add(e),e},e.prototype.buildEdge=function(t){var e;return t.map_id=this.id,e=new Edge(t),e.map=this,e.entity=this.account.connections.get(t.entity_id),e.from=this.nodes.get(t.from_id),e.to=this.nodes.get(t.to_id),this.edges.add(e),e},e.prototype.include=function(t){return null!=this.collectionFor(t).get(t)},e.prototype.collectionFor=function(t){switch(t.className){case"Element":case"Node":return this.nodes;case"Connection":case"Edge":return this.edges;case"Loop":case"Label":return this.labels}},e.prototype.find=function(t){return this.nodes.find(function(e){return e.getLabel()===t})},e.prototype.findEdge=function(t,e,n){var i;return null==n&&(n={strict:!0}),i=n.strict?function(n){return n.from.getLabel()===t&&n.to.getLabel()===e}:function(n){return n.from.getLabel()===t&&n.to.getLabel()===e||n.from.getLabel()===e&&n.to.getLabel()===t},this.edges.find(i)},e.prototype.findNodesByLabel=function(t){return this.nodes.filter(function(e){return e.getLabel()===t})},e.prototype.clean=function(){var t,e,n,i,r;for(i=this.edges.models,r=[],e=0,n=i.length;n>e;e++)t=i[e],t.from&&t.to?r.push(void 0):r.push(t.destroy());return r},e.prototype.build=function(t,e){var n;return n=new Import(t,e),n.target(this),n},e.prototype["import"]=function(t,e){var n,i;return n=this.build(t,e),i=n.process(e),i["import"]=n,i},e.prototype.getWorkingDataset=function(){return this.scene.graph.dataset()},e.prototype.select=function(t){return Selector.select(t,this.getWorkingDataset())},e}(Backbone.CouchModel),e=function(e){function n(){return i=n.__super__.constructor.apply(this,arguments)}return o(n,e),n.prototype.view="resources/all",n.prototype.query={key:"Map"},n.prototype.model=t,n.prototype.index=function(t){return[t.id,t.cid,t.slug()]},n}(Backbone.CouchCollection),namespace("window",function(n){return n.Map=t,n.MapCollection=e,n.Maps=new e})}.call(this),function(){window.Circle=function(){function t(t,e){this.center=t,this.radius=e}return t.throughThreePoints=function(e,n,i){var r,o,s,a,l,u,c,h;return r=Line.throughPoints(e,n),o=Line.throughPoints(n,i),l=r.slope*o.slope*(i.y-e.y)+r.slope*(n.x+i.x)-o.slope*(e.x+n.x),a=2*(r.slope-o.slope),c=l/a,h=-1/r.slope*(c-(e.x+n.x)/2)+(e.y+n.y)/2,s=new Vector(c,h),u=e.subtract(s).magnitude(),new t(s,u)},t.throughPointsAndTangent=function(e,n,i){var r,o,s,a,l,u;return o=Line.throughPoints(e,n),l=Vector.midpoint(e,n),s=o.tangent(l),a=i.tangent(n),r=s.intersection(a),u=r.distanceTo(e),new t(r,u)},t.prototype.circumference=function(){return 2*Math.PI*this.radius},t.prototype.pointAt=function(t,e,n){return null==e&&(e=null),null==n&&(n=null),e&&n?pointAtTimeBetween(t,e,n):pointAtAngle(t)},t.prototype.pointAtAngle=function(t){return new Vector(this.center.x+this.radius*Math.cos(t),this.center.y+this.radius*Math.sin(t))},t.prototype.pointAtTimeBetween=function(t,e,n){var i;return e=e.subtract(this.center).angle(),n=n.subtract(this.center).angle(),i=(e-n)/2,this.pointAtAngle(i)},t}()}.call(this),function(){window.Line=function(){function t(t,e){this.slope=t,this.intercept=e}return t.throughPointWithSlope=function(e,n){var i;return n instanceof Vector&&(n=n.slope()),i=e.y-n*e.x,new t(n,i)},t.throughPoints=function(e,n){return t.throughPointWithSlope(e,n.subtract(e))},t.prototype.equation=function(){return"y = "+this.slope+"x + "+this.intercept},t.prototype.isVertical=function(){},t.prototype.isHorizontal=function(){},t.prototype.y=function(t){return this.slope*t+this.intercept},t.prototype.x=function(t){return(t-this.intercept)/this.slope},t.prototype.intersection=function(t){var e;return e=(t.intercept-this.intercept)/(this.slope-t.slope),new Vector(e,this.y(e))},t.prototype.closestPoint=function(t){return this.intersection(this.tangent(t))},t.prototype.tangent=function(e){var n;return n=0===this.slope?1:1/0===this.slope?0:-1/this.slope,t.throughPointWithSlope(e,n)},t.prototype.endpoints=function(t,e){return[new Vector(t,this.y(t)),new Vector(e,this.y(e))]},t}()}.call(this),Rectangle.unit=function(){return new Rectangle(-.5,-.5,.5,.5)},Rectangle.fromBBox=function(t){return new Rectangle(t.x,t.y,t.x+t.width,t.y+t.height)},Rectangle.withCorners=function(t,e){return new Rectangle(t.x,t.y,e.x,e.y)},Rectangle.prototype.summarize=function(){return[this.xmin,this.ymin,this.xmax,this.ymax].join(", ")},Rectangle.prototype.toString=Rectangle.prototype.summarize,Rectangle.prototype.copy=function(){return new Rectangle(this.xmin,this.ymin,this.xmax,this.ymax)},Rectangle.prototype.bound=function(t,e){if(1==arguments.length){var n=arguments[0];n instanceof Rectangle?(this.bound(n.xmin,n.ymin),this.bound(n.xmax,n.ymax)):this.bound(n.x,n.y)}else this.xmin=this.xmin?Math.min(this.xmin,t):t,this.ymin=this.ymin?Math.min(this.ymin,e):e,this.xmax=this.xmax?Math.max(this.xmax,t):t,this.ymax=this.ymax?Math.max(this.ymax,e):e},Rectangle.prototype.contains=function(t,e){if(1==arguments.length){var n=arguments[0];return n.x>=this.xmin&&n.x<=this.xmax&&n.y>=this.ymin&&n.y<=this.ymax}return t>=this.xmin&&t<=this.xmax&&e>=this.ymin&&e<=this.ymax},Rectangle.prototype.min=function(){return new Vector(this.xmin,this.ymin)},Rectangle.prototype.max=function(){return new Vector(this.xmax,this.ymax)},Rectangle.prototype.width=function(){return this.xmax-this.xmin},Rectangle.prototype.height=function(){return this.ymax-this.ymin},Rectangle.prototype.xmid=function(){return(this.xmin+this.xmax)/2},Rectangle.prototype.ymid=function(){return(this.ymin+this.ymax)/2},Rectangle.prototype.center=function(){return new Vector(this.xmid(),this.ymid())},Rectangle.prototype.scale=function(t){var e=this.width()*t,n=this.height()*t,i=e-this.width(),r=n-this.height();return this.xmin-=i/2,this.ymin-=r/2,this.xmax+=i/2,this.ymax+=r/2,this},Rectangle.prototype.translate=function(t,e){if(1==arguments.length){var n=arguments[0];t=n.x,e=n.y}return this.xmin+=t,this.xmax+=t,this.ymin+=e,this.ymax+=e,this},Vector.copy=function(t){return new Vector(t.x,t.y)},Vector.random=function(){return new Vector(Math.random()-.5,Math.random()-.5)},Vector.up=function(){return new Vector(0,1)},Vector.down=function(){return new Vector(0,-1)},Vector.left=function(){return new Vector(-1,0)},Vector.right=function(){return new Vector(1,0)},Vector.cross=function(t,e){return t.x*e.y-t.y*e.x},Vector.around=function(t,e){var n=2*Math.PI*Math.random();return e=e||100,new Vector(t.x+e*Math.cos(n),t.y+e*Math.sin(n))},Vector.distance=function(t,e){return t.distanceTo(e)},Vector.midpoint=function(t,e){return t.add(e).divide(2)},Vector.subtract=function(t,e){return new Vector(t.x-e.x,t.y-e.y)},Vector.fromOffset=function(t){return new Vector(t.left,t.top)},Vector.prototype.copy=function(){return new Vector(this.x,this.y)},Vector.prototype.summarize=function(){return"X"+this.x+" Y"+this.y},Vector.prototype.update=function(t,e){return this.x=t,this.y=e,this},Vector.prototype.add=function(t){return new Vector(this.x+t.x,this.y+t.y)},Vector.prototype.subtract=function(t){return new Vector(this.x-t.x,this.y-t.y)},Vector.prototype.multiply=function(t){return new Vector(this.x*t,this.y*t)},Vector.prototype.stretch=function(t){return this.multiply(1+Math.min(1,t/this.magnitude()))},Vector.prototype.compress=function(t){return this.multiply(1-Math.min(1,t/this.magnitude()))},Vector.prototype.divide=function(t){return new Vector(this.x/t,this.y/t)},Vector.prototype.negate=function(){return new Vector(-this.x,-this.y)},Vector.prototype.invert=function(){return this.negate()},Vector.prototype.dot=function(t){return this.x*t.x+this.y*t.y},Vector.prototype.rotate=function(t){var e=this.magnitude(),n=this.uv();return new Vector(n.x*Math.cos(t)-n.y*Math.sin(t),n.x*Math.sin(t)+n.y*Math.cos(t)).multiply(e)},Vector.prototype.angleBetween=function(t){return Math.acos(this.dot(t)/(this.magnitude()*t.magnitude()))},Vector.prototype.uv=function(){return this.normalize()},Vector.prototype.direction=function(){return this.uv()},Vector.prototype.slope=function(){return this.y/this.x},Vector.prototype.angle=function(){var t=this.normalize();return Math.atan2(t.y,t.x)},Vector.prototype.degrees=function(){return 180*this.angle()/Math.PI},Vector.prototype.magnitude=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},Vector.prototype.normalize=function(){return this.isOrigin()?this:this.divide(this.magnitude())},Vector.prototype.perpendicular=function(){return new Vector(this.y,-this.x)},Vector.prototype.energy=function(){var t=this.magnitude();return t*t},Vector.prototype.isOrigin=function(){return 0==this.x&&0==this.y},Vector.prototype.equals=function(t){return this.x==t.x&&this.y==t.y},Vector.prototype.up=function(){return this.y>0},Vector.prototype.down=function(){return this.y<0},Vector.prototype.parallelTo=function(t){return Math.abs(this.normalize().dot(t.normalize())-1)<.05},Vector.prototype.distanceTo=function(t){return this.subtract(t).magnitude()},Vector.prototype.reset=function(){this.x=0,this.y=0},Vector.prototype.toJSON=function(){return{x:this.x,y:this.y}},Vector.prototype.toHash=function(){return this.toJSON()},function(){var t,e,n,i,r={}.hasOwnProperty,o=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};t=function(t){function e(){return n=e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.className="Membership",e.prototype.toJSON=function(){var t;return t=e.__super__.toJSON.apply(this,arguments),this.user&&(t.user=this.user.id||this.user.get("username")),t},e.prototype.parse=function(t){return this.user=new User(t.user),t.user=this.user.id,t},e}(Backbone.Model),e=function(e){function n(){return i=n.__super__.constructor.apply(this,arguments)}return o(n,e),n.prototype.className="MembershipCollection",n.prototype.model=t,n.prototype.url=function(){return Api.url("/accounts/"+this.account.id+"/memberships")},n.prototype.initialize=function(t,e){return this.account=e.account},n}(Backbone.Collection),namespace("window",function(n){return n.Membership=t,n.MembershipCollection=e})}.call(this),function(){var t,e,n,i={}.hasOwnProperty,r=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o=[].slice;t=function(){function t(t){this.from=t,this.to=this.from.copy(),this.offset=new Vector,this.previousOffset=new Vector,this.delta=new Vector,this.distance=0,this.extent=0,this.count=0}return t.prototype.update=function(t){return this.to=t,this.offset.x=this.to.x-this.from.x,this.offset.y=this.to.y-this.from.y,this.delta.x=this.offset.x-this.previousOffset.x,this.previousOffset.x=this.offset.x,this.delta.y=this.offset.y-this.previousOffset.y,this.previousOffset.y=this.offset.y,this.distance=Math.sqrt(this.offset.x*this.offset.x+this.offset.y*this.offset.y),this.extent=Math.max(this.extent,this.distance),this.count+=1},t.prototype.intentional=function(){return this.count>=2},t.prototype.accidental=function(){return!this.intentional()},t.prototype.significant=function(){return this.extent>1},t}(),e=function(e){function i(){return n=i.__super__.constructor.apply(this,arguments)}return r(i,e),i.prototype.initialize=function(){return this.mousedown=!1,this.$targets=[],this.timestamps={},this.lastUpdatedAt=0,this.reset()},i.prototype.event=function(t,e){return null==e&&(e=null),null!=e&&_.extend(t,e),t.modifiers=this.eventModifiers(t),t.location=this.eventLocation(t),null!=this.drag&&(t.drag=this.drag),t},i.prototype.enter=function(t){return this.trigger("enter",this.event(t))},i.prototype.leave=function(t){return this.trigger("leave",this.event(t))},i.prototype.down=function(e){var n=this;return this.mousedown=!0,this.event(e),this.timestamp("down"),this.trigger("down",e),this.holdTimeout=setTimeout(function(){return n.hold(e)},i.HOLD_THRESHOLD),this.drag=new t(e.location)},i.prototype.hold=function(t){return this.drag&&this.drag.significant()?void 0:this.trigger("hold",this.event(t))},i.prototype.move=function(t){return this.event(t),this.timestamp("move"),this.trigger("move",t),this.mousedown?(this.drag.update(t.location),this.trigger("drag",t)):void 0},i.prototype.up=function(t){return this.mousedown=!1,this.event(t),clearTimeout(this.holdTimeout),this.timestamp("up"),this.trigger("up",t),this.timeSinceLastClick()<i.DOUBLE_CLICK_THRESHOLD?this.trigger("dblclick",t):this.clickDuration()<i.CLICK_DURATION_THRESHOLD&&this.trigger("click",t),this.drag=null},i.prototype.wheel=function(t,e){return this.trigger("wheel",this.event(t,{wheel:{delta:e}}))},i.prototype.isDown=function(){return this.mousedown},i.prototype.isUp=function(){return!this.mousedown},i.prototype.isMoving=function(){return this.timeSinceLastUpdate()<i.MOVING_THRESHOLD},i.prototype.monitor=function(){var t,e,n,i,r,s;for(n=1<=arguments.length?o.call(arguments,0):[],e=this,s=this.targets.apply(this,n),i=0,r=s.length;r>i;i++)t=s[i],t.on("mouseenter.mouse",function(t){return e.enter(t)}).on("mouseleave.mouse",function(t){return e.leave(t)}).on("mousedown.mouse",function(t){return e.down(t)}).on("mouseup.mouse",function(t){return e.up(t)}).on("mousemove.mouse",function(t){return e.move(t)}).on("mousewheel.mouse",function(t,n,i,r){return e.wheel(t,n,i,r)}),this.$targets.push(t);return this},i.prototype.destroy=function(){var t,e,n,i;for(i=this.$targets,e=0,n=i.length;n>e;e++)t=i[e],t.off(".mouse");return this.$targets=[],this},i.prototype.clickDuration=function(){return this.timestamps.up.current-this.timestamps.down.current},i.prototype.timeSinceLastClick=function(){return this.timeBetween("down")},i.prototype.timeSinceLastUpdate=function(){return this.now()-this.lastUpdatedAt},i.prototype.eventModifiers=function(t){var e;return e=[],t.altKey&&e.push("ALT"),t.shiftKey&&e.push("SHIFT"),t.metaKey&&e.push("META"),e.join("+")},i.prototype.eventLocation=function(t){return new Vector(t.offsetX||t.originalEvent.layerX,t.offsetY||t.originalEvent.layerY)},i.prototype.targets=function(){var t;return t=1<=arguments.length?o.call(arguments,0):[],_.map(t,function(t){var e;return e=t instanceof $?t:$(t)})},i.prototype.reset=function(t){var e,n,i,r;if(t)return this.timestamps[t]={previous:0,current:0};for(i=["down","move","up"],r=[],e=0,n=i.length;n>e;e++)t=i[e],r.push(this.reset(t));return r},i.prototype.timestamp=function(t){var e;return e=this.timestamps[t],e.previous=e.current,e.current=this.lastUpdatedAt=this.now()},i.prototype.timeBetween=function(t){var e;return e=this.timestamps[t],e.current-e.previous},i.prototype.now=function(){return(new Date).getTime()},i}(Backbone.Model),e.CLICK_DURATION_THRESHOLD=200,e.DOUBLE_CLICK_THRESHOLD=300,e.HOLD_THRESHOLD=500,e.MOVING_THRESHOLD=1e3,window.Mouse=e}.call(this),function(){var t,e,n=function(t,e){return function(){return t.apply(e,arguments)}},i={}.hasOwnProperty,r=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};window.Node=function(e){function i(){return this.reposition=n(this.reposition,this),t=i.__super__.constructor.apply(this,arguments)}return r(i,e),i.prototype.className="Node",i.prototype.collectionName="nodes",i.prototype.paramRoot="node",i.prototype.persistedAttributes=["type","_id","_rev","map_id","origin","entity_id","pinned","position"],i.prototype.defaults=function(){return{type:"Node",position:null,pinned:!1,locked:!1}},i.prototype.initialize=function(){var t;return i.__super__.initialize.apply(this,arguments),this.entity=new Element,this.edges=[],this.set({locked:!1},{silent:!0}),t=this.attributes.entity||Elements.get(this.attributes.entity_id),delete this.attributes.entity,t&&this.setElement(t),this.has("position")&&(this.position=Vector.copy(this.get("position"))),this.display.position=new Vector,this.connections=[],this.resetEdges()},i.prototype.resetEdges=function(){return this.edges.length=0,this.degree=0},i.prototype.addEdge=function(t){return this.edges.push(t),this.degree+=1},i.prototype.getElement=function(){return this.entity},i.prototype.setElement=function(t){return this.setEntity(t)},i.prototype.toJSON=function(){return _.omit(this.attributes,"locked","pickable")},i.prototype.reposition=function(t){return this.position=t,this.trigger("change:position")},i.prototype.pin=function(t){return this.set("pinned",!0,t)},i.prototype.float=function(t){return this.set("pinned",!1,t)},i.prototype.isFixed=function(){return this.selected||this.locked||this.isPinned()},i.prototype.isPinned=function(){return this.get("pinned")},i.prototype.isRenderable=function(){return null!=this.position&&null!=this.style},i.prototype.isAdjacentTo=function(t){return _.any(this.connections,function(e){return e.from===t||e.to===t})},i.prototype.bounds=function(t){var e,n,i,r,o;if(null==t&&(t={}),_.defaults(t,{neighbors:!1}),e=Rectangle.unit().scale(this.display.outerRadius).translate(this.display.position.x,this.display.position.y),t.neighbors)for(o=this.edges,i=0,r=o.length;r>i;i++)n=o[i],e.bound(n.other(this).bounds());return e},i.prototype.savePosition=function(){var t=this;return this.set("position",this.position),this.entity.save({position:this.position.toHash()}).done(function(){return t.lastFixedPosition=t.position})},i}(Component),window.NodeCollection=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return r(n,t),n.prototype.view="map/components",n.prototype.query=function(){return{key:[this.map.id,"Node"]}},n.prototype.model=Node,n}(ComponentCollection),namespace("window",function(t){return t.Node=Node,t.NodeCollection=NodeCollection})}.call(this),function(){var t;t=function(){function t(e,n){this.css={property:e,value:n},this.property=t.resolveProperty(e).camelize(),this.parse(n)}return t.registry={},t.aliases={radius:"size","border-color":"stroke-color","border-width":"stroke-width","background-color":"color","background-image":"image-url","background-size":"image-size","label-placement":"text-align",width:"size",pattern:"style"},t.build=function(e,n){var i,r,o,s;return o=n.match(/^([-a-z]+)\((.*)\)$/),o?(s=o[1],i=o[2],r=this.registry[s]||raise("UnknownDeclaration: "+declaration),new r(e,n)):new t(e,n)},t.register=function(t,e){return this.registry[t]=e||this},t.typed=function(t){var e;try{return JSON.parse(t)}catch(n){return e=n,t}},t.parseFunction=function(t){var e;return e=t.match(/([^\(]+)\((.*)\)/),{name:e[1],args:e[2]}},t.resolveProperty=function(t){var e;return null!=(e=this.aliases[t])?e:t},t.prototype.name="simple",t.prototype.refresh=function(){},t.prototype.apply=function(t,e){return t.set(this.property,e,this.evaluate(e))},t.prototype.toCSS=function(){return""+this.css.property+": "+this.css.value+";"},t.prototype.parse=function(e){return this.value=t.typed(e)},t.prototype.evaluate=function(){return this.value},t}(),namespace("window",function(e){return e.StyleDeclaration=t})}.call(this),function(){var t,e={}.hasOwnProperty,n=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};StyleDeclaration.LinearScale=function(e){function i(){return t=i.__super__.constructor.apply(this,arguments)}return n(i,e),i.register("scale-linear"),i.register("scale"),i.prototype.name="linear-scale",i.prototype.parse=function(t){var e,n,i,r,o,s,a,l,u;for(a=StyleDeclaration.parseFunction(t),n=a.name,e=a.args,r=e.split(","),this.expression=r[0].trim().unquote(),this.range=[],l=r.slice(1),u=[],o=0,s=l.length;s>o;o++)t=l[o],i=StyleDeclaration.typed(t.trim()),u.push(this.range.push(i));return u},i.prototype.refresh=function(t,e){var n;return null==e&&(e=t.toSelection()),n=new AttributeEvaluator(this.expression),this.evaluation=new Evaluation(n),this.result=this.evaluation.evaluate(e),this.scale=d3.scale.linear().domain(this.result.limits()).range(this.range)},i.prototype.evaluate=function(t){var e,n;return null==this.result&&raise("Scale must be initialized before evaluating"),e=null!=(n=this.result.value(t))?n:this.calculate(t),null==e||_.isNaN(e)?this.range[0]:this.scale(e)},i.prototype.calculate=function(t){return this.evaluation.evaluate(t,this.result),this.result.value(t)},i}(StyleDeclaration)}.call(this),function(){var t,e={}.hasOwnProperty,n=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};StyleDeclaration.Url=function(e){function i(){return t=i.__super__.constructor.apply(this,arguments)}return n(i,e),i.register("url"),i.prototype.name="url",i.prototype.parse=function(t){var e;return e=t.match(/url\((.*)\)/),this.url=e[1].unquote()},i.prototype.evaluate=function(){return this.url},i}(StyleDeclaration)}.call(this),function(){var t;t=function(){function t(t){this.guide=t}return t.prototype.use=function(t){return this.guide=t},t.prototype.get=function(){var t;return(t=this.guide).get.apply(t,arguments)},t.prototype.isFiltered=function(){var t;return(t=this.guide).isFiltered.apply(t,arguments)},t.prototype.isVisible=function(){var t;return(t=this.guide).isVisible.apply(t,arguments)},t}(),namespace("window",function(e){return e.StylistBase=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.decorate=function(t,e){return e.labels={core:StringHelper.wrapWords(e.entity.getLabel(),{length:0}),pre:e.getPrelabel(),post:e.getPostlabel()},e.style.filtered=this.isFiltered(e),e.style.visible=this.isVisible(e),e.style.visibility=this.get("visibility",e),e.style.opacity=this.get("opacity",e),e.style.color=this.get("color",e),e.style.size=this.get("size",e),e.style.scale=this.get("scale",e),e.style.length=this.get("length",e),e.style.strength=this.get("strength",e),e.style.curvature=this.get("curvature",e),e.style.direction=e.getDirection(),this.path(t,e),this.hitpath(t,e),this.handles(t,e),this.arrows(t,e),this.delay(t,e),this.labels(t,e)},n.prototype.path=function(t,e){var n,i,r,o;return i=null!=(o=(r=e.style).path)?o:r.path={},n=Math.max(3,e.style.size*e.style.scale),i.visible=!0,i.color=e.style.color,i.opacity=e.style.opacity,i.pattern=/normal|solid/.test(this.get("style",e))?"solid":"dashed",i.dashArray="solid"===i.pattern?[]:[n]},n.prototype.hitpath=function(t,e){var n,i,r;return n=null!=(r=(i=e.style).hitpath)?r:i.hitpath={},n.visible=!0,n.opacity=this.get("hitpathOpacity",e)},n.prototype.handles=function(t,e){var n,i,r;return n=null!=(r=(i=e.style).handles)?r:i.handles={},n.radius=e.handleRadius},n.prototype.arrows=function(t,e){var n,i,r;return n=null!=(r=(i=e.style).arrows)?r:i.arrows={},n.visible="visible"===this.get("arrowVisibility",e)&&"undirected"!==e.style.direction,n.color=this.get("arrowColor",e)||e.style.color},n.prototype.delay=function(t,e){var n,i,r;return n=null!=(r=(i=e.style).delay)?r:i.delay={},n.visible="visible"===this.get("delayVisibility",e)&&e.isDelayed(),n.width=this.get("delayWidth",e),n.height=this.get("delayHeight",e),n.fill=this.get("backgroundColor"),n.stroke=this.get("delayColor",e)||e.style.color,n.strokeWidth=this.get("delayStrokeWidth",e)},n.prototype.labels=function(t,e){var n,i,r,o,s,a,l,u,c,h,p,f;for(i=null!=(c=(o=e.style).label)?c:o.label={},i.visible="visible"===this.get("labelVisibility",e),i.opacity=this.get("opacity",e),i.fontSize=this.get("fontSize",e),i.fontFamily=this.get("fontFamily",e),i.fill=this.get("fontColor",e),i.fontWeight=this.get("fontWeight",e),i.fontStyle=this.get("fontStyle",e),i.textDecoration=this.get("textDecoration",e),i.lines=[],h=e.labels.core,n=l=0,u=h.length;u>l;n=++l)r=h[n],i.lines.push({x:0,y:0,text:r});return i=null!=(p=(s=e.style).prelabel)?p:s.prelabel={x:0,y:0},i.text=e.labels.pre,i=null!=(f=(a=e.style).postlabel)?f:a.postlabel={x:0,y:0},i.text=e.labels.post},n}(StylistBase),namespace("window",function(e){return e.EdgeStylist=t})}.call(this),function(){var t;t=function(){function t(){}return t.prototype.extend=function(t,e){var n,i,r,o,s,a;n=null!=(s=(o=t.display)[e])?s:o[e]={},a=t.style[e];for(i in a)r=a[i],n[i]=r;return n},t}(),namespace("window",function(e){return e.TailorBase=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.adjust=function(){},n.prototype.dress=function(t,e){return e.display.visibility=e.style.visibility,e.display.opacity=e.style.opacity,e.display.size=e.style.size,e.display.scale=e.style.scale,e.display.color=e.style.color,e.display.direction=e.style.direction,e.display.curvature=e.style.curvature,this.path(t,e),this.hitpath(t,e),this.arrows(t,e),this.labels(t,e),this.delay(t,e),this.handles(t,e),e.selected||e.hover||e.highlighted?(e.display.scale*=1.2,e.display.path.opacity=1):void 0},n.prototype.path=function(t,e){return this.extend(e,"path")},n.prototype.hitpath=function(t,e){return this.extend(e,"hitpath")},n.prototype.handles=function(t,e){var n;return n=this.extend(e,"handles"),n.visible=!1},n.prototype.arrows=function(t,e){return this.extend(e,"arrows")},n.prototype.delay=function(t,e){var n;return n=this.extend(e,"delay"),n.assignedHeight=n.height},n.prototype.labels=function(t,e){return this.extend(e,"label"),this.extend(e,"prelabel"),this.extend(e,"postlabel")},n.prototype.reconcile=function(t,e){return e.display.path.rgbaColor=ColorsHelper.rgba(e.display.path.color,e.display.path.opacity),e.display.hitpath.rgbaColor=ColorsHelper.rgba(e.display.path.color,e.display.hitpath.opacity),e.display.arrows.rgbaColor=ColorsHelper.rgba(e.display.arrows.color,e.display.path.opacity),e.display.path.width=e.display.size*e.display.scale,e.display.hitpath.width=e.display.path.width+6/Math.max(t.scale,1),e.display.arrows.width=e.display.path.width+Math.max(10,e.display.path.width/2),e.display.arrows.height=Math.max(10,e.display.path.width),e.display.delay.height=e.display.path.width+e.display.delay.assignedHeight,this.reconcileGeometry(t,e),this.reconcileLabels(t,e)},n.prototype.reconcileGeometry=function(t,e){var n,i,r,o;return n=e.from===e.to||"undirected"===e.display.direction||!e.display.arrows.visible,e.display.vector=e.to.display.position.subtract(e.from.display.position),e.display.length=e.display.vector.magnitude(),e.display.height=e.display.curvature*e.display.length/2,e.get("clockwise")||(e.display.height*=-1),e.display.normal=e.display.vector.perpendicular().normalize(),e.display.midpoint=e.from.display.position.add(e.to.display.position).divide(2),e.display.axis=Line.throughPointWithSlope(e.from.display.position,e.display.vector),e.display.locus=Line.throughPointWithSlope(e.display.midpoint,e.display.normal),e.display.circle=Circle.throughThreePoints(e.from.display.position,e.display.midpoint.add(e.display.normal.multiply(e.display.height)),e.to.display.position),e.display.handleRadius=Math.min(10,e.display.length/10),e.display.tail=e.positionAlong(0,e.display.handleRadius),e.display.apex=e.positionAlong(.5),e.display.head=e.positionAlong(1,-e.display.handleRadius),n?(e.display.start=e.positionAlong(0),e.display.end=e.positionAlong(1)):(i="mutual"===e.display.direction,e.display.arrows.head=e.positionAlong(1,-e.display.arrows.height),e.display.arrows.head.angle=Vector.subtract(e.to.display.position,e.display.arrows.head.position).angle(),i?(e.display.arrows.tail=e.positionAlong(0,e.display.arrows.height),e.display.arrows.tail.angle=Vector.subtract(e.from.display.position,e.display.arrows.tail.position).angle()):e.display.arrows.tail=null,r=.8,e.display.start=e.positionAlong(0,i?e.display.arrows.height-r:0),e.display.end=e.positionAlong(1,-e.display.arrows.height+r),e.display.circle=Circle.throughPointsAndTangent(e.display.start.position,e.display.end.position,Line.throughPoints(e.display.end.position,e.to.display.position)),e.display.vector=e.display.start.position.subtract(e.display.end.position),e.display.midpoint=Vector.midpoint(e.display.start.position,e.display.end.position)),e.display.delay.visible?(o=e.positionAlong(.75),e.display.delay.position=o.position,e.display.delay.angle=o.angle):void 0},n.prototype.reconcileLabels=function(t,e){var n,i,r,o,s,a,l;if(e.display.label.visible=e.style.label.visible&&e.display.label.fontSize*t.display.scale>=t.settings.minConnectionFontSize,e.display.label.visible){for(r=.5*(e.display.label.lines.length-1)*e.display.label.fontSize,l=e.display.label.lines,n=s=0,a=l.length;a>s;n=++s)i=l[n],i.x=e.display.apex.position.x,i.y=e.display.apex.position.y-r+n*e.display.label.fontSize;
if(e.display.prelabel.text&&(o=e.display.tail.position.subtract(Vector.subtract(e.display.tail.position,e.display.circle.center).normalize().multiply(8)),e.display.prelabel.x=o.x,e.display.prelabel.y=o.y),e.display.postlabel.text)return o=e.display.head.position.subtract(Vector.subtract(e.display.head.position,e.display.circle.center).normalize().multiply(8)),e.display.postlabel.x=o.x,e.display.postlabel.y=o.y}},n}(TailorBase),namespace("window",function(e){return e.EdgeTailor=t})}.call(this),function(){var t,e,n,i={}.hasOwnProperty,r=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};e=3,t=function(t){function i(){return n=i.__super__.constructor.apply(this,arguments)}return r(i,t),i.prototype.defaults=function(){return{roots:[],degree:3}},i.prototype.refresh=function(t){var e,n,i,r;return null==t&&(t={}),e=null!=(i=t.degree)?i:this.get("degree"),n=null!=(r=t.roots)?r:this.get("roots"),0===n.length&&(n=map.getSelection().nodes({indirect:!0})),this.set({roots:n,degree:e})},i.prototype.reset=function(){return this.set(this.defaults())},i.prototype.is=function(t,e){return _.isEqual(t,this.get("roots"))&&(null==e||e===this.get("degree"))},i.prototype.isActive=function(){return this.get("roots").length>0},i.prototype.extend=function(t){return t=this.get("roots").concat(t),t=_.uniq(t),this.set("roots",t)},i.prototype.expand=function(){var t;return t=this.get("degree")+1,this.set("degree",t)},i.prototype.contract=function(){var t;return t=Math.max(0,this.get("degree")-1),this.set("degree",t)},i.prototype.step=function(){var t;return t=this.get("degree")+1,t>e&&(t=0),this.set("degree",t)},i.prototype.apply=function(t,e){var n,i,r,o,s=this;if(this.isActive()){for(this._visible={},o=this.get("roots"),i=0,r=o.length;r>i;i++)n=o[i],this.visit(t,e,n,0);return t.nodes.each(function(t){return s.isVisible(t)?void 0:e.set("visibility",t,"hidden")})}},i.prototype.visit=function(t,e,n,i){var r,o,s,a,l;if(this.visible(n,i),i<this.get("degree")){for(i+=1,a=t.getNeighbors(n),l=[],o=0,s=a.length;s>o;o++)r=a[o],this.isExhausted(r,i)?l.push(void 0):l.push(this.visit(t,e,r,i));return l}},i.prototype.visible=function(t,e){return this._visible[t.cid]=e},i.prototype.isVisible=function(t){return null!=this._visible[t.cid]},i.prototype.isExhausted=function(t,e){return this._visible[t.cid]<=e},i}(Backbone.Model),namespace("window",function(e){return e.Focus=t})}.call(this),function(){var t;t=function(){function t(t){null!=t&&this.use(t)}return t.prototype.use=function(t){return this.nodeStylist=new NodeStylist(t),this.edgeStylist=new EdgeStylist(t),this.labelStylist=new LabelStylist(t)},t.prototype.decorate=function(t,e){return e instanceof Graph?this.decorateGraph(t,e):(this.applyPerspective(t,e),e.isNode()?this.decorateNode(t,e):e.isEdge()?this.decorateEdge(t,e):e.isLabel()?this.decorateLabel(t,e):void 0)},t.prototype.applyPerspective=function(t,e){return null!=t.perspective?(t.perspective.apply(e.entity,t.guide),e.filtered=t.guide.isFiltered(e)):void 0},t.prototype.decorateGraph=function(t,e){var n,i,r,o,s,a,l,u,c;for(l=e.nodes.models,r=0,s=l.length;s>r;r++)i=l[r],this.decorateNode(t,i);for(u=e.edges.models,c=[],o=0,a=u.length;a>o;o++)n=u[o],c.push(this.decorateEdge(t,n));return c},t.prototype.decorateNode=function(t,e){return this.nodeStylist.decorate(t,e)},t.prototype.decorateEdge=function(t,e){return this.edgeStylist.decorate(t,e)},t.prototype.decorateLabel=function(t,e){return this.labelStylist.decorate(t,e)},t}(),namespace("window",function(e){return e.GraphStylist=t})}.call(this),function(){var t;t=function(){function t(t){null==t&&(t=new StyleGuide),this.setStyle(t)}return t.prototype.setStyle=function(t){return this.style=t,this.nodeTailor=new NodeTailor(this.style),this.edgeTailor=new EdgeTailor(this.style),this.labelTailor=new LabelTailor(this.style)},t.prototype.adjust=function(t,e){return this.invoke("adjust",t,e)},t.prototype.dress=function(t,e){return this.invoke("dress",t,e)},t.prototype.reconcile=function(t,e){return this.invoke("reconcile",t,e)},t.prototype.invoke=function(t,e,n){var i,r,o,s,a,l,u,c,h,p;if(n instanceof Graph){for(c=graph.nodes.models,s=0,l=c.length;l>s;s++)r=c[s],this.invoke(t,e,r);for(h=graph.edges.models,p=[],a=0,u=h.length;u>a;a++)i=h[a],p.push(this.invoke(t,e,i));return p}return o=n.isLabel()?this.labelTailor:n.isNode()?this.nodeTailor:this.edgeTailor,o[t](e,n)},t}(),namespace("window",function(e){return e.GraphTailor=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.decorate=function(t,e){return e.style.visibility=this.get("visibility",e),e.style.opacity=this.get("opacity",e),e.style.size=this.get("size",e),e.style.scale=this.get("scale",e),this.label(t,e)},n.prototype.label=function(t,e){var n,i,r;return n=null!=(r=(i=e.style).label)?r:i.label={},n.visible="visible"===this.get("labelVisibility",e),n.opacity=this.get("opacity",e),n.fontSize=this.get("fontSize",e),n.fontFamily=this.get("fontFamily",e),n.fill=this.get("fontColor",e),n.fontWeight=this.get("fontWeight",e),n.fontStyle=this.get("fontStyle",e),n.textDecoration=this.get("textDecoration",e)},n}(StylistBase),namespace("window",function(e){return e.LabelStylist=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.adjust=function(t,e){return e.isFixed()||(e.position=e.getNaturalPosition()),e.display.position.x=e.position.x,e.display.position.y=e.position.y,e.lines=StringHelper.wrapWords(e.entity.getLabel(),{length:20})},n.prototype.dress=function(t,e){return e.display.visibility=e.style.visibility,e.display.opacity=e.style.opacity,this.label(t,e),e.selected||e.active||e.hover?(e.display.label.fontWeight="bold",e.display.label.fontSize*=1.1):void 0},n.prototype.label=function(t,e){return this.extend(e,"label")},n.prototype.reconcile=function(){},n}(TailorBase),namespace("window",function(e){return e.LabelTailor=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.defaults={label:"Legend",summary:"",settings:{},entries:[]},n.prototype.initialize=function(){return this.initializeSettings(),this.initializeSummary(),this.initializeDimensions()},n.prototype.initializeSettings=function(){return this.settings=_.defaults(this.get("settings"),n.settings)},n.prototype.initializeSummary=function(){return this.set("summary",StringHelper.wrapWords(this.get("summary")||"",{length:this.settings.wrap}))},n.prototype.initializeDimensions=function(){return this.height=this.settings.labelLineHeight+this.settings.summaryLineHeight*this.get("summary").length+this.settings.previewHeight*this.get("entries").length},n}(Backbone.Model),t.settings={fontFamily:'proxima-nova, "Helvetica Neue", sans-serif',labelColor:"#000",labelSize:14,labelLineHeight:16,summaryColor:"#888",summarySize:12,summaryLineHeight:14,previewHeight:20,previewWidth:40,wrap:30},namespace("window",function(e){return e.Legend=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};window.Lens=function(e){function n(){return t=n.__super__.constructor.apply(this,arguments)}return i(n,e),n.prototype.className="Lens",n.prototype.defaults=function(){return{legend:!0,declarations:{}}},n.prototype.initialize=function(){var t=this;return this.on("change:selector",function(){return t.cachedSelector=null,t.cachedDeclarations=null}),this.on("change:declarations",function(){return t.cachedDeclarations=null})},n.prototype.isFilter=function(){var t;return t=_.keys(this.get("declarations")),1===t.length&&"visibility"===t[0]},n.prototype.includeInLegend=function(){return this.get("legend")&&this.get("collection")&&this.get("label")&&!this.isFilter()},n.prototype.selector=function(){var t;return null!=(t=this.cachedSelector)?t:this.cachedSelector=Selector.parse(this.get("selector")||this.getDefaultSelector())},n.prototype.scope=function(){return this.get("collection").singularize()},n.prototype.getDefaultSelector=function(){return this.get("collection").singularize()},n.prototype.hasCustomSelector=function(){var t;return t=this.get("selector"),!!t&&t!==this.scope()},n.prototype.declarations=function(){var t,e,n,i;if(!this.cachedDeclarations){this.cachedDeclarations=[],i=this.get("declarations");for(e in i)n=i[e],t=StyleDeclaration.build(e,n),this.cachedDeclarations.push(t)}return this.cachedDeclarations},n.prototype.refresh=function(t){var e,n,i,r,o;for(this.selection=this.selector().select(t),r=this.declarations(),o=[],n=0,i=r.length;i>n;n++)e=r[n],o.push(e.refresh(t,this.selection));return o},n.prototype.apply=function(t,e){var n,i,r,o,s;if(this.selector().select(e)){for(o=this.declarations(),s=[],i=0,r=o.length;r>i;i++)n=o[i],s.push(n.apply(t,e));return s}},n.prototype.toCSS=function(){return StyleSheet.compile(this)},n}(Backbone.CouchModel),window.LensCollection=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.model=Lens,n}(Backbone.Collection)}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.decorate=function(t,e){return e.label=StringHelper.wrapWords(e.getLabel(),{length:20}),e.style.filtered=this.isFiltered(e),e.style.visible=this.isVisible(e),e.style.visibility=this.get("visibility",e),e.style.opacity=this.get("opacity",e),e.style.size=this.get("size",e),e.style.scale=this.get("scale",e),e.style.radius=e.style.size*e.style.scale,e.style.padding=this.get("padding",e),e.style.margin=this.get("margin",e),"none"===e.style.margin&&(e.style.margin=-e.style.radius),e.style.innerRadius=Math.max(0,e.style.radius-e.style.padding),e.style.outerRadius=e.style.radius+Math.max(0,e.style.margin),this.body(t,e),this.image(t,e),this.label(t,e),this.ring(t,e),this.bullseye(t,e),this.shadow(t,e),this.halo(t,e)},n.prototype.body=function(t,e){var n,i,r;return n=null!=(r=(i=e.style).body)?r:i.body={},n.visible="visible"===this.get("bodyVisibility",e),n.fill=this.get("color",e),n.stroke=this.get("strokeColor",e)||ColorsHelper.darken(n.fill,100),n.strokeWidth=this.get("strokeWidth",e)},n.prototype.image=function(t,e){var n,i,r,o,s,a,l,u;return n=null!=(s=(o=e.style).image)?s:o.image={},i=null!=(a=null!=(l=this.get("imageUrl",e))?l:e.entity.getImage())?a:e.entity.getAvatar({size:80,placeholder:"404"}),r=null!=(u=this.get("imageUrl2x",e))?u:e.entity.getImage("large"),n.visible=i&&"visible"===this.get("imageVisibility",e),n.scale=this.get("imageScale",e),n.url=i,n.url2x=r},n.prototype.label=function(t,e){var n,i,r,o,s,a,l,u,c;for(i=null!=(l=(o=e.style).label)?l:o.label={},i.visible="visible"===this.get("labelVisibility",e),i.placement=this.get("textAlign",e),i.opacity=this.get("opacity",e),i.fontSize=this.get("fontSize",e),i.fontFamily=this.get("fontFamily",e),i.fill=this.get("fontColor",e),i.fontWeight=this.get("fontWeight",e),i.fontStyle=this.get("fontStyle",e),i.textDecoration=this.get("textDecoration",e),this.get("scaleLabels")&&(i.fontSize=i.fontSize+i.fontSize*Math.log(e.style.scale)),i.lines=[],u=e.label,c=[],n=s=0,a=u.length;a>s;n=++s)r=u[n],c.push(i.lines.push({x:0,y:0,text:r}));return c},n.prototype.ring=function(t,e){var n,i,r;return n=null!=(r=(i=e.style).ring)?r:i.ring={},n.color=n.stroke=this.get("ringStroke",e),n.width=n.strokeWidth=this.get("ringStrokeWidth",e),n.visible=!!n.color&&"visible"===this.get("ringVisibility",e)},n.prototype.bullseye=function(t,e){var n,i,r;return n=null!=(r=(i=e.style).bullseye)?r:i.bullseye={},n.color=this.get("bullseyeColor",e),n.opacity=this.get("bullseyeOpacity",e),n.size=this.get("bullseyeSize",e),n.visible=!!n.color&&"visible"===this.get("bullseyeVisibility",e),n.fill=ColorsHelper.rgba(n.color,n.opacity)},n.prototype.shadow=function(t,e){var n,i,r;return n=null!=(r=(i=e.style).shadow)?r:i.shadow={},n.color=this.get("shadowColor",e),n.opacity=this.get("shadowOpacity",e),n.size=this.get("shadowSize",e),n.visible=!!n.color&&"visible"===this.get("shadowVisibility",e),n.fill=ColorsHelper.rgba(n.color,n.opacity)},n.prototype.halo=function(t,e){var n,i,r;return n=null!=(r=(i=e.style).halo)?r:i.halo={},n.visible=!0,n.stroke=this.get("haloColor",e),n.opacity=this.get("haloOpacity",e),n.strokeWidth=e.style.body.strokeWidth,n.radius=e.style.body.radius*this.get("haloOffset",e)},n}(StylistBase),namespace("window",function(e){return e.NodeStylist=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.process=function(t,e){return this.dress(t,e),this.adjust(t,e),this.reconcile(t,e)},n.prototype.adjust=function(t,e){return null==e.position,e.display.position.x=e.position.x,e.display.position.y=e.position.y},n.prototype.dress=function(t,e){return e.display.visibility=e.style.visibility,e.display.opacity=e.style.opacity,e.display.size=e.style.size,e.display.scale=e.style.scale,e.display.padding=e.style.padding,e.display.margin=e.style.margin,this.body(t,e),this.image(t,e),this.label(t,e),this.ring(t,e),this.bullseye(t,e),this.shadow(t,e),this.halo(t,e),(e.selected||e.active||e.hover||e.highlighted)&&(e.display.label.fontWeight="bold"),e.selected||e.active||e.hover?(e.display.ring.visible=!0,e.display.ring.stroke=t.guide.get("selectionColor")):void 0},n.prototype.body=function(t,e){return this.extend(e,"body")},n.prototype.label=function(t,e){return this.extend(e,"label")},n.prototype.image=function(t,e){return this.extend(e,"image")},n.prototype.ring=function(t,e){return this.extend(e,"ring")},n.prototype.bullseye=function(t,e){return this.extend(e,"bullseye")},n.prototype.shadow=function(t,e){return this.extend(e,"shadow")},n.prototype.halo=function(t,e){return this.extend(e,"halo")},n.prototype.reconcile=function(t,e){return e.display.radius=e.display.size*e.display.scale,e.display.innerRadius=Math.max(0,e.display.radius-e.display.padding),e.display.outerRadius=e.display.radius+e.display.body.strokeWidth+e.display.margin,e.display.body.radius=e.display.radius,e.display.body.strokeRadius=e.display.radius+e.display.body.strokeWidth/2-.1,e.display.image.radius=e.display.innerRadius,null!=e.display.image.url2x&&t.display.scale*e.display.image.radius>40&&(e.display.image.url=e.display.image.url2x),e.display.ring.radius=e.display.radius+e.display.body.strokeWidth+3,e.display.bullseye.radius=e.display.bullseye.size*e.display.innerRadius,e.display.shadow.radius=e.display.shadow.size*e.display.outerRadius,this.reconcileLabel(t,e)},n.prototype.reconcileLabel=function(t,e){var n,i,r,o,s,a,l;if(e.display.label.visible=e.style.label.visible&&e.display.label.fontSize*t.display.scale>=t.settings.minFontSize,e.display.label.visible){for(r=function(){switch(e.display.label.placement){case"center":return{x:0,y:-.5*(e.display.label.lines.length-1)*e.display.label.fontSize};default:return{x:0,y:e.display.outerRadius}}}(),a=e.display.label.lines,l=[],n=o=0,s=a.length;s>o;n=++o)i=a[n],i.x=e.display.position.x+r.x,l.push(i.y=e.display.position.y+r.y+n*e.display.label.fontSize);return l}},n}(TailorBase),namespace("window",function(e){return e.NodeTailor=t})}.call(this),function(){var t,e,n,i,r={}.hasOwnProperty,o=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};t=function(t){function e(){return n=e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.className="Perspective",e.prototype.defaults=function(){return{type:"Perspective",filters:{elements:null,connections:null,loops:null}}},e.prototype.initialize=function(){return this.hasMany("lenses",{inverse:"perspective",nested:!0}),this.rebuild(),this.loaded=!0},e.prototype.toString=function(){return this.get("name")},e.prototype.clone=function(){return new e(_.omit(this.toJSON(),"_id"))},e.prototype.slug=function(){var t;return this.get("slug")||(null!=(t=this.get("name"))?t.slugify():void 0)||""},e.prototype.setElementFilter=function(t){var e;return e=this.get("filters"),e.elements=t,this.set("filters",e)},e.prototype.setConnectionFilter=function(t){var e;return e=this.get("filters"),e.connections=t,this.set("filters",e)},e.prototype.fromCSS=function(t){var e,n,i=this;return e=function(t){return i.error=null,i.loaded=!0,i.lenses.reset(t),i.trigger("load",i),i.trigger("reset",i)},n=function(t){return i.error=t},StyleSheet.parse(t).then(e,n)},e.prototype.toCSS=function(){return StyleSheet.compile(this)},e.prototype.compile=function(){return this.set("style",this.toCSS())},e.prototype.rebuild=function(){return this.fromCSS(this.get("style"))},e.prototype.update=function(t){return log.info("Updating perspective"),this.lenses.each(function(e){return e.refresh(t)})},e.prototype.apply=function(t,e){var n=this;return null==e&&(e=new StyleGuide),null!=t.each?t.each(function(t){return n.apply(t,e)}):(t instanceof Component&&(t=t.entity),this.permit(t)?this.lenses.each(function(n){return n.apply(e,t)}):e.set("display",t,"none")),e},e.prototype.getLegend=function(){var t,e;return t=this.lenses.chain().filter(function(t){return t.includeInLegend()}).map(function(t){return t.toJSON()}).value(),e=new Legend({label:this.get("name"),summary:this.getSummary(),entries:t})},e.prototype.getSummary=function(){return(this.get("description")||"").summary()},e.prototype.isHollow=function(){return!(this.get("description")||this.lenses.any(function(t){return t.includeInLegend()}))},e.prototype.getTypeFiltersForCollection=function(t){var e;return e=this.get("filters"),e[t]},e.prototype.permit=function(t,e){var n,i;return t instanceof Entity&&(n=t,t=n.getCollectionType(),e=n.getType()),i=this.getTypeFiltersForCollection(t),!i||_.any(i,function(t){return String(t).toLowerCase()===String(e).toLowerCase()})},e}(Backbone.CouchModel),e=function(e){function n(){return i=n.__super__.constructor.apply(this,arguments)}return o(n,e),n.prototype.model=t,n.prototype.index=function(t){return[t.id,t.cid,t.slug()]},n.prototype.url="/perspectives",n.prototype.view="resources/all",n.prototype.query={key:"Perspective"},n}(Backbone.CouchCollection),namespace("window",function(n){return n.Perspective=t,n.PerspectiveCollection=e,n.Perspectives=new e})}.call(this),function(){var t;t=function(){function t(t){var e;this.style=t,e=new less.Parser,e.parse(t,function(t,e){return e.toCSS()})}return t}()}.call(this),function(){var t,e,n,i,r,o,s,a;r=function(t){var e,n;return null==t&&(t=""),e=new $.Deferred,n=new less.Parser,n.parse(t,function(t,i){return t?(log.error("Unable to parse LESS",t),e.reject(t)):n.parse(i.toCSS(),function(t,n){var i;return t?(log.error("Unable to parse CSS",t),e.reject(t)):(i=o(n.toCSS()),e.resolve(i))})}),e.promise()},o=function(t){var e,n,i,r,o,a,l,u,c,h,p,f,d,m,g,v,y,b,w;for(c=[],l=css.parse(t),e=r=void 0,b=l.stylesheet.rules,m=0,v=b.length;v>m;m++)if(u=b[m],u.comment)o=u.comment.match(/^\s*(elements|connections)\s*:(.*)/),o?(e=o[1].trim(),r=o[2].trim()):r=u.comment.trim();else{for(e||0===u.selectors.length||(h=_.map(u.selectors,s),f=_.uniq(h),/^(element|connection|loop)$/.test(h[0])&&1===f.length&&(e=""+h[0]+"s")),p=u.selectors.join(", "),i={},w=u.declarations,g=0,y=w.length;y>g;g++)n=w[g],a=n.property,d=n.value,i[a]=d;c.push({collection:e,label:r,selector:p,declarations:i}),e=void 0,r=void 0}return c},s=function(t){var e;return e=t.match(/^(?:element|connection|loop)/),e?e[0]:void 0},a=function(t){return/^(element|connection|loop)/.test(t)},e=function(t){return t instanceof Perspective?i(t):t instanceof Lens?n(t):void 0},i=function(t){return t.lenses.map(n).join("\n")},n=function(t){var e,n,i,r,o,s,l;return e=t.get("collection")||"",r=t.get("label")||"",s=t.get("selector")||t.getDefaultSelector(),i=function(){var e,n;e=t.get("declarations"),n=[];for(o in e)l=e[o],n.push("  "+o+": "+l+";");return n}(),n="",e&&!a(s)?n+="/* "+e+": "+r+" */\n":r&&(n+="/* "+r+" */\n"),n+=""+s+" {",0!==i.length&&(n+="\n"+i.join("\n")+"\n"),n+="}\n"},t={parse:r,compile:e},namespace("window",function(e){return e.StyleSheet=t})}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};t=function(){function t(t){null==t&&(t={}),this.fisheye=e(this.fisheye,this),this.apply=e(this.apply,this),_.defaults(t,{radius:300,power:2}),this.radius=t.radius,this.power=t.power,this.exp=Math.exp(this.power)}return t.prototype.apply=function(t,e){return e.isNode()&&t.mouse.position&&t.mouse.timeSinceLastUpdate()<5e3?this.fisheye(t,e,this.radius,this.power,this.exp):void 0},t.prototype.fisheye=function(t,e){var n,i,r;return i=e.display.position.subtract(t.mouse.position),n=i.magnitude(),n<this.radius?(r=this.exp/(this.exp-1)*this.radius*(1-Math.exp(-n/this.radius*this.power))/n,e.display.position.x=t.mouse.position.x+i.x*r,e.display.position.y=t.mouse.position.y+i.y*r,e.display.body.radius=e.display.radius=e.radius*r,e.display.label.fontSize=e.style.label.fontSize*r):void 0},t}(),namespace("window",function(e){return e.FisheyeFilter=t})}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};t=function(){function t(t){this.radius=null!=t?t:300,this.magnify=e(this.magnify,this),this.apply=e(this.apply,this)}return t.prototype.apply=function(t,e){return e.isNode()&&t.mouse.position?this.magnify(t,e,this.radius):void 0},t.prototype.magnify=function(t,e){var n,i,r;return i=e.display.position.subtract(t.mouse.position),n=i.magnitude(),r=n<this.radius?Math.max(1,(this.radius-n)/this.radius/t.scale):1,e.display.body.radius=e.display.radius=e.radius*r,e.display.label.fontSize=e.style.label.fontSize*r},t}(),namespace("window",function(e){return e.MagnifierFilter=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};window.Selector=function(e){function n(){return t=n.__super__.constructor.apply(this,arguments)}return i(n,e),n.prototype.defaults={inverted:!1},n.isExplicit=function(t){return t.startsWith("=")},n.toExplicit=function(t){return"= "+this.toImplicit(t)},n.toImplicit=function(t){return t.replace(/^\s*=\s*/,"")},n.parse=function(t){return SelectorParser.parse(t)},n.select=function(t,e,i){var r;return null==i&&(i=null),e?e instanceof Dataset?(r=t,i=e):r=n.prepare(t,e):r=t,null==i&&(i=currentMap.getWorkingDataset()),r=n.parse(r),r.select(i)},n.prepare=function(t,e){var n,i,r,o;n=function(t){return _.isString(t)?t.replace(/"/g,'\\"'):t},i={};for(r in e)o=e[r],i[r]=n(o);return tim(t,i)},n.prototype.invert=function(t){return null==t&&(t=!0),this.set("inverted",t),this},n.prototype.select=function(t){return t instanceof Entity?this.selectEntity(t):this.selectFromDataset(t)},n.prototype.selectFromDataset=function(t){var e,n,i=this;return null!=this.beforeSelect&&this.beforeSelect(t),n=this.get("inverted")?"reject":"select",e=t.entities(),e=e[n](function(t){return i.selectEntity(t)}),new EntitySelection(e)},n}(Backbone.Model),window.SelectorCollection=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.model=Selector,n}(Backbone.Collection)}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(e){return _.isString(e)?e.toLowerCase():_.isArray(e)?_.map(e,t):e},window.AttributeSelector=function(n){function r(){return e=r.__super__.constructor.apply(this,arguments)}return i(r,n),r.prototype.initialize=function(){return this.attr=Attributes.resolve(this.get("attribute")),this.type=this.attr.typed(),this.operator=this.get("operator"),this.testValue=this.parse(this.get("value"))},r.prototype.selectEntity=function(t){var e,n;switch(n=t.getAttr(this.attr),e=this.parse(n),this.operator){case"=":return _.isEqual(e,this.testValue);case"!=":return!_.isEqual(e,this.testValue);case"~=":return _.isEqual(e,this.testValue)||_.include(e,this.testValue);case"<":return e<this.testValue;case">":return e>this.testValue;case"<=":return e<=this.testValue;case">=":return e>=this.testValue;case"^=":return _.string.startsWith(e,this.testValue);case"$=":return _.string.endsWith(e,this.testValue);case"*=":return _.string.contains(e,this.testValue);case"!":return null==e;default:return null!=e}},r.prototype.parse=function(e){var n;try{return this.type.parse(t(e))}catch(i){return n=i,e}},r}(Selector)}.call(this),function(){var t,e={}.hasOwnProperty,n=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};window.CompoundSelector=function(e){function i(){return t=i.__super__.constructor.apply(this,arguments)}return n(i,e),i.prototype.defaults=function(){return{method:"union",selectors:[]}},i.prototype.select=function(t){return t instanceof Entity?this.selectEntity(t):this.selectFromDataset(t)},i.prototype.selectEntity=function(t){var e;return e="union"===this.get("method")?"any":"all",_[e](this.get("selectors"),function(e){return e.select(t)})},i.prototype.selectFromDataset=function(t){var e,n;return n=_.invoke(this.get("selectors"),"select",t),e=new EntitySelection,e[this.get("method")].apply(e,n),e},i}(Selector)}.call(this),function(){var t,e={}.hasOwnProperty,n=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};window.GenericSelector=function(e){function i(){return t=i.__super__.constructor.apply(this,arguments)}return n(i,e),i.prototype.selectEntity=function(t){switch(this.get("type")){case"element":return t instanceof Element;case"connection":return t instanceof Connection;case"loop":return t instanceof Loop}},i}(Selector)}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.initialize=function(){return this.external=new AttributeSelector({attribute:"id",operator:"=",value:this.get("id")})},n.prototype.selectEntity=function(t){var e;return this.get("id")===(null!=(e=t.id)?e.toLowerCase():void 0)||this.get("id")===t.getInformalID()||this.external.selectEntity(t)},n}(Selector),namespace("window",function(e){return e.IDSelector=t})}.call(this),function(){var t;t={build:function(e){switch(e.selector){case"union":case"intersection":return t.compoundSelector(e);default:return t.selector(e)}},compoundSelector:function(e){var n;return n=_.map(e.selectors,function(e){return t.build(e)}),new CompoundSelector({method:e.selector,selectors:n})},selector:function(t){switch(t.selector){case"universal":return new UniversalSelector;case"generic":return new GenericSelector({type:t.type});case"id":return new IDSelector({id:t.id});case"attribute":return new AttributeSelector({attribute:t.attribute,operator:t.operator,value:t.value});default:return raise("UnknownSelector: "+t.selector)}}},namespace("window",function(e){return e.SelectorFactory=t})}.call(this),function(){var t;t={engine:Kizzle,parse:function(e,n){var i;return null==n&&(n=!0),i=t.engine.parse(e.toLowerCase()),n&&(i=SelectorFactory.build(i)),i}},namespace("window",function(e){return e.SelectorParser=t})}.call(this),function(){var t,e={}.hasOwnProperty,n=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};window.UniversalSelector=function(e){function i(){return t=i.__super__.constructor.apply(this,arguments)}return n(i,e),i.prototype.selectEntity=function(){return!0},i.prototype.selectDataset=function(t){return t.toSelection()},i}(Selector)}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.initialize=function(){return this.listenTo(Perspectives,"destroy",this.onPerspectiveDestroyed)},n.prototype.bootstrap=function(t){var e,n;return n=new User(t.user),n.membership=new Membership(t.membership),e=Accounts.build(t.account),e.owner=new User(t.owner),this.set({user:n,account:e}),Monitor.initialize(),able.flush()},n.prototype.set=function(t,e){var i;return i=_.clone(this.attributes),_.isString(t)?i[t]=e:_.extend(i,t),this.cacheReferences(i),n.__super__.set.apply(this,arguments)},n.prototype.cacheReferences=function(t){return window.currentUser=t.user,window.currentAccount=t.account,window.currentMap=t.map,window.currentPerspective=t.perspective,window.currentScene="undefined"!=typeof currentMap&&null!==currentMap?currentMap.scene:void 0,log.trace("Session is now",currentUser,currentAccount,currentMap,currentPerspective)},n.prototype.onPerspectiveDestroyed=function(t){return t===currentPerspective?this.set("perspective",null):void 0},n}(Backbone.Model),namespace("window",function(e){return e.SessionController=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.className="Settings",n.prototype.proxyImages=!0,n.prototype.defaults=function(){return{_id:"settings",type:"Settings",default_map_id:null,theme:{}}},n.prototype.initialize=function(){return this.theme=StyleGuide.base()},n.prototype.toString=function(){return"settings"},n.prototype.reset=function(){return this.clear(),this.set(this.defaults())},n.prototype.parse=function(t){return this.theme.reset(StyleGuide.base(t.theme)),t},n.prototype.enabled=function(t){switch(t){case"fps":return Env.isDevelopment()||Env.request.param("fps");case"benchmarks":return Env.request.param("benchmark")}},n.prototype.getDefaultMap=function(){return Maps.get(this.get("default_map_id"))||Maps.first()||Bootstrap.buildDefaultMap()},n.prototype.setDefaultMap=function(t){return this.set("default_map_id",null!=t?t.id:void 0)},n.prototype.isDefaultMap=function(t){return t===this.getDefaultMap()},n.prototype.setDefaultPerspective=function(t){return this.set("default_perspective_id",null!=t?t.id:void 0)},n.prototype.getDefaultPerspective=function(){return Perspectives.get(this.get("default_perspective_id"))||Perspectives.first()||Bootstrap.buildDefaultPerspective()},n.prototype.toJSON=function(){var t,e;return t=n.__super__.toJSON.apply(this,arguments),t.theme=(null!=(e=this.theme)?e.toJSON():void 0)||{},t},n}(Backbone.CouchModel),namespace("window",function(e){return e.SettingsModel=t})}.call(this),function(){var t,e=[].slice;t=function(){function t(t){null==t&&(t={}),this.attributes=_.clone(t)}return _.extend(t.prototype,Backbone.Events),t.defaults={base:!0,scaleLabels:!0,highlightWorkspaceLinks:!0,backgroundColor:"#fcfcfa",selectionColor:"#b72a2a",highlightColor:"#ff7243",fontSize:16,fontColor:"#444",fontFamily:'"Helvetica Neue"',fontWeight:"normal",fontStyle:"normal",textAlign:"center",textDecoration:"none",elementDisplay:"map",elementVisibility:"visible",elementSize:5,elementScale:1,elementPadding:1,elementMargin:5,elementColor:"#fff",elementOpacity:1,elementStrokeColor:"#333",elementStrokeWidth:1,elementBodyVisibility:"visible",elementLabelVisibility:"visible",elementTextAlign:"bottom",elementRingVisibility:"visible",elementRingStrokeWidth:1,elementImageVisibility:"visible",elementImageScale:"fill",elementBullseyeVisibility:"visible",elementBullseyeSize:.5,elementBullseyeOpacity:1,elementHaloVisibility:"visible",elementHaloOffset:5,elementShadowVisibility:"visible",elementShadowOpacity:.1,elementShadowSize:3,connectionDisplay:"map",connectionVisibility:"visible",connectionSize:1,connectionScale:1,connectionColor:"#AAAAAA",connectionOpacity:.45,connectionCurvature:.25,connectionLength:110,connectionStrength:.8,connectionStyle:"solid",connectionHitpathOpacity:.1,connectionLabelVisibility:"visible",connectionFontColor:"#888",connectionFontSize:11,connectionArrowVisibility:"visible",connectionDelayVisibility:"visible",connectionDelayWidth:7,connectionDelayHeight:30,connectionDelayStrokeWidth:3,loopDisplay:"map",loopVisibility:"visible",loopOpacity:1,loopShadowVisibility:"visible",loopShadowColor:"blue",loopShadowOpacity:.2,loopLabelVisibility:"visible",loopFontColor:"#000",loopFontSize:20,loopFontWeight:"normal"},t.base=function(e){return null==e&&(e={}),new t(_.defaults(e,t.defaults))
},t.prototype.toJSON=function(){return _.clone(this.attributes)},t.prototype.isBase=function(){return this.attributes.base===!0},t.prototype.clone=function(){return new t(_.clone(this.attributes))},t.prototype.extend=function(){var t,n,i,r,o;for(n=1<=arguments.length?e.call(arguments,0):[],o=[],i=0,r=n.length;r>i;i++)t=n[i],o.push(this.apply(t));return o},t.prototype.copy=function(t){return this.reset(t)},t.prototype.reset=function(e){var n;return n=e instanceof t?_.clone(e.attributes):_.isObject(e)?_.clone(e):_.clone(t.defaults),this.attributes=n||{}},t.prototype.clear=function(){return this.attributes={}},t.prototype.filter=function(t){return t instanceof Graph?this.filterGraph(t):t instanceof Dataset?this.filterDataset(dataset):void 0},t.prototype.filterDataset=function(t){var e,n,i,r,o,s=this;return r=function(t){return"none"===s.get("display",t)},n=t.elements.reject(r),e=t.connections.reject(r),o=t.loops.reject(r),i=new Dataset,i.elements.reset(element,{silent:!0}),i.connections.reset(e,{silent:!0}),i.loops.reset(o,{silent:!0}),i},t.prototype.filterGraph=function(t){var e,n,i,r,o,s,a,l,u=this;return n={},t.each(function(t){return n[t.cid]=u.isFiltered(t)}),i=function(t){return!n[t.cid]},s=function(t){return i(t)},r=function(t){return i(t)&&s(t.from)&&s(t.to)},o=function(t){return i(t)&&_.all(t.edges,r)},l=t.nodes.select(s),e=t.edges.select(r),a=t.labels.select(o),n=new Graph,n.nodes.reset(l,{silent:!0}),n.edges.reset(e,{silent:!0}),n.labels.reset(a,{silent:!0}),n.refresh(),n},t.prototype.isFiltered=function(t){return"none"===this.get("display",t)},t.prototype.isVisible=function(t){return"visible"===this.get("visibility",t)},t.prototype.set=function(){var t,n,i,r,o;return n=arguments[0],i=3<=arguments.length?e.call(arguments,1,o=arguments.length-1):(o=1,[]),r=arguments[o++],i=i[0],t=i?this.keyFor(n,i):n,this.attributes[t]=r,this.trigger("change")},t.prototype.get=function(t,e){var n,i,r,o;return e&&(n=function(){switch(t){case"style":return void 0;case"display":return"displayed";default:return t}}(),i=null!=(r=null!=(o=n&&e[n])?o:this.attributes[this.keyFor(t,e)])?r:this.attributes[this.generalKeyFor(t,e)]),null!=i?i:i=this.attributes[t]},t.prototype.keyFor=function(t,e){var n;return n=e instanceof Entity?e.cid:e.entity.cid,""+n+"/"+t},t.prototype.generalKeyFor=function(t,e){var n;return e instanceof Entity||e instanceof Node?n="element":e instanceof Connection||e instanceof Edge?n="connection":(e instanceof Loop||e instanceof Label)&&(n="loop"),""+n+t.capitalize()},t.prototype.apply=function(e){var n,i,r,o,s;r=e instanceof t?e.attributes:e,s=[];for(i in r)o=r[i],n=this.attributes[i],n&&"object"==typeof n?s.push(_.extend(n,o)):s.push(this.attributes[i]=o);return s},t}(),window.StyleGuide=t}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};window.Subscription=function(n){function r(){return this.cardPresent=e(this.cardPresent,this),t=r.__super__.constructor.apply(this,arguments)}return i(r,n),r.prototype.urlRoot="/subscriptions",r.prototype.paramRoot="subscription",r.prototype.cardPresent=function(){return!!this.get("card_fingerprint")},r}(Backbone.Model)}.call(this),function(){var t,e,n,i,r,o={}.hasOwnProperty,s=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};t="Classic",e=function(t){function e(){return i=e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.idAttribute="name",e}(Backbone.Model),n=function(n){function i(){return r=i.__super__.constructor.apply(this,arguments)}return s(i,n),i.prototype.model=e,i.prototype.comparator="name",i.prototype.build=function(e){var n;return"default"===e&&(e=t),n=_.clone(this.get(e).get("style")),StyleGuide.base(n)},i}(Backbone.Collection),this.Themes=new n,Themes.add({name:"Classic",style:{}}),Themes.add({name:"Blueprint",style:{backgroundColor:"#497ECB",fontFamily:"Courier",fontColor:"#FFFFFF",elementColor:"#FFFFFF",elementStrokeWidth:0,connectionColor:"#FFFFFF",connectionWidth:1,connectionOpacity:.8}}),Themes.add({name:"Dark",style:{backgroundColor:"#444444",fontFamily:"Verdana",fontColor:"#DDDDDD",elementColor:"#DDDDDD",elementStrokeWidth:2,connectionColor:"#DDDDDD",connectionWidth:2}}),Themes.add({name:"Hawaiian",style:{backgroundColor:"#740F00",fontFamily:"Georgia",fontColor:"#FFBB12",elementColor:"#FFBB12",elementStrokeWidth:2,connectionColor:"#FFBB12",connectionWidth:2}}),Themes.add({name:"System Mapping",style:{elementSize:20,elementMargin:0,elementPadding:0,elementBodyVisibility:"hidden",elementLabelPlacement:"center",connectionSize:2,connectionFontColor:"#444",connectionArrowColor:"#000",connectionArrowMargin:3,connectionDelayColor:"#000"}}),Themes.add({name:"Decoration Test",style:{backgroundColor:"white",elementSize:20,elementColor:"yellow",elementStrokeColor:"green",elementStrokeWidth:3,elementImageVisibility:"visible",elementImageUrl:"http://surftherenow.com/wp-content/uploads/2009/03/clark_little_sunset_barrel_wave.jpg",elementBullseyeVisibility:"visible",elementBullseyeSize:.25,elementBullseyeColor:"white",elementBullseyeOpacity:1,elementShadowVisibility:"visible",elementShadowSize:3,elementShadowColor:"magenta",elementShadowOpacity:.1}})}.call(this),function(){var t,e,n,i,r={}.hasOwnProperty,o=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};t=function(t){function e(){return n=e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.className="Token",e.prototype.urlRoot=function(){return Api.url("/accounts/"+this.account.id+"/tokens")},e.prototype.isEmbed=function(){return"embed"===this.get("type")},e.prototype.includeOverview=function(){return!!this.get("overview")},e.prototype.map=function(){return Maps.get(this.get("map"))},e.prototype.perspective=function(){return Perspectives.get(this.get("perspective"))},e.prototype.selection=function(){return this.get("selection")},e}(Backbone.Model),e=function(e){function n(){return i=n.__super__.constructor.apply(this,arguments)}return o(n,e),n.prototype.className="TokenCollection",n.prototype.model=t,n.prototype.url=function(){return Api.url("/accounts/"+this.account.id+"/tokens")},n}(Backbone.Collection),namespace("window",function(n){return n.Token=t,n.TokenCollection=e})}.call(this),function(){var t,e,n=function(t,e){return function(){return t.apply(e,arguments)}},i={}.hasOwnProperty,r=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};window.User=function(e){function i(){return this.slug=n(this.slug,this),t=i.__super__.constructor.apply(this,arguments)}return r(i,e),i.prototype.className="User",i.prototype.urlRoot=Api.url("/users"),i.prototype.slug=function(){return this.get("slug")||this.get("username").slugify()},i.prototype.profileUrl=function(){return"/"+this.slug()},i.prototype.isGuest=function(){return"guest"===this.get("username")},i.prototype.isOwner=function(t){return this.get("username")===t.get("owner")},i.prototype.isObserver=function(){return/guest|observer/.test(this.membership.get("role"))},i.prototype.avatar=function(){return this.get("avatar")||this.image()},i.prototype.image=function(t){return Gravatar.get(this.get("email_digest"),_.extend({},t,{encrypt:!1}))},i}(Backbone.Model),window.UserCollection=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return r(n,t),n.prototype.className="UserCollection",n.prototype.model=User,n.prototype.url=Api.url("/users"),n}(Backbone.Collection)}.call(this),function(){var t,e={}.hasOwnProperty,n=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};this.CouchValidations=function(e){function i(){return t=i.__super__.constructor.apply(this,arguments)}return n(i,e),i.prototype.validate=function(){return this.validates("type",{presence:!0})},i}(Backbone.Validations)}.call(this),function(){var t,e={}.hasOwnProperty,n=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};this.AccountSettingsValidations=function(e){function i(){return t=i.__super__.constructor.apply(this,arguments)}return n(i,e),i}(CouchValidations)}.call(this),function(){var t,e={}.hasOwnProperty,n=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};this.AccountValidations=function(e){function i(){return t=i.__super__.constructor.apply(this,arguments)}return n(i,e),i.prototype.validate=function(){return i.__super__.validate.apply(this,arguments),this.validatesPresenceOf("name")},i}(Backbone.Validations)}.call(this),function(){var t,e={}.hasOwnProperty,n=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};this.AttributeValidations=function(e){function i(){return t=i.__super__.constructor.apply(this,arguments)}return n(i,e),i.prototype.validate=function(){return i.__super__.validate.apply(this,arguments),this.validatesPresenceOf("name")},i}(CouchValidations)}.call(this),function(){var t,e={}.hasOwnProperty,n=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};this.ComponentValidations=function(e){function i(){return t=i.__super__.constructor.apply(this,arguments)}return n(i,e),i.prototype.validate=function(){return i.__super__.validate.apply(this,arguments),this.validatesPresenceOf("type","map_id","entity_id")},i}(CouchValidations)}.call(this),function(){var t,e={}.hasOwnProperty,n=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};this.EntityValidations=function(e){function i(){return t=i.__super__.constructor.apply(this,arguments)}return n(i,e),i.prototype.validate=function(){return i.__super__.validate.apply(this,arguments)},i}(CouchValidations)}.call(this),function(){var t,e={}.hasOwnProperty,n=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};this.ConnectionValidations=function(e){function i(){return t=i.__super__.constructor.apply(this,arguments)}return n(i,e),i.prototype.validate=function(){return i.__super__.validate.apply(this,arguments),this.validatesPresenceOf("from_id","to_id")},i}(EntityValidations)}.call(this),function(){var t,e={}.hasOwnProperty,n=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};this.EdgeValidations=function(e){function i(){return t=i.__super__.constructor.apply(this,arguments)}return n(i,e),i}(ComponentValidations)}.call(this),function(){var t,e={}.hasOwnProperty,n=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};this.ElementValidations=function(e){function i(){return t=i.__super__.constructor.apply(this,arguments)}return n(i,e),i.prototype.validate=function(){return i.__super__.validate.apply(this,arguments)},i}(EntityValidations)}.call(this),function(){var t,e={}.hasOwnProperty,n=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};this.LabelValidations=function(e){function i(){return t=i.__super__.constructor.apply(this,arguments)}return n(i,e),i.prototype.validate=function(){return i.__super__.validate.apply(this,arguments)},i}(ComponentValidations)}.call(this),function(){var t,e={}.hasOwnProperty,n=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};this.LoopValidations=function(e){function i(){return t=i.__super__.constructor.apply(this,arguments)}return n(i,e),i.prototype.validate=function(){return i.__super__.validate.apply(this,arguments)},i}(EntityValidations)}.call(this),function(){var t,e={}.hasOwnProperty,n=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};this.MapValidations=function(e){function i(){return t=i.__super__.constructor.apply(this,arguments)}return n(i,e),i.prototype.validate=function(){return this.validates("name",{presence:!0,uniqueness:!0})},i}(CouchValidations)}.call(this),function(){var t,e={}.hasOwnProperty,n=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};this.MembershipValidations=function(e){function i(){return t=i.__super__.constructor.apply(this,arguments)}return n(i,e),i.prototype.validate=function(){return i.__super__.validate.apply(this,arguments),this.validatesPresenceOf("user","role")},i}(Backbone.Validations)}.call(this),function(){var t,e={}.hasOwnProperty,n=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};this.NodeValidations=function(e){function i(){return t=i.__super__.constructor.apply(this,arguments)}return n(i,e),i.prototype.validate=function(){return i.__super__.validate.apply(this,arguments)},i}(ComponentValidations)}.call(this),function(){var t,e={}.hasOwnProperty,n=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};this.PerspectiveValidations=function(e){function i(){return t=i.__super__.constructor.apply(this,arguments)}return n(i,e),i.prototype.validate=function(){return i.__super__.validate.apply(this,arguments),this.validates("name",{presence:!0,uniqueness:!0})},i}(CouchValidations)}.call(this),function(){var t,e={}.hasOwnProperty,n=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};this.SettingsValidations=function(e){function i(){return t=i.__super__.constructor.apply(this,arguments)}return n(i,e),i.prototype.validate=function(){return i.__super__.validate.apply(this,arguments)},i}(CouchValidations)}.call(this),function(){var t,e={}.hasOwnProperty,n=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};this.TokenValidations=function(e){function i(){return t=i.__super__.constructor.apply(this,arguments)}return n(i,e),i.prototype.validate=function(t,e){return i.__super__.validate.apply(this,arguments),this.validatesPresenceOf("type"),"embed"===e.type?this.validatesPresenceOf("map"):void 0},i}(Backbone.Validations)}.call(this),function(){var t,e,n,i,r={}.hasOwnProperty,o=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};t=function(t){function e(){return n=e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.className="AttributeVirtualization",e.prototype.label=function(){return this.get("attribute").label()},e.prototype.execute=function(){return this.virtualization=new Virtualization(this.get("map"),this.get("elements")),this.virtualization.add(new AttributeVirtualizer(this.get("attribute"))),this.virtualization.execute()},e.prototype.blueprint=function(){return this.virtualization.blueprint},e.prototype.save=function(){return execute(new Commands.Virtualization.Save(this.virtualization))},e.prototype.destroy=function(){var t;return null!=(t=this.virtualization)&&t.undo(),this.trigger("destroy",this)},e}(Backbone.Model),e=function(e){function n(){return i=n.__super__.constructor.apply(this,arguments)}return o(n,e),n.prototype.className="AttributeVirtualizationCollection",n.prototype.model=t,n}(Backbone.Collection),namespace("window",function(n){return n.AttributeVirtualization=t,n.AttributeVirtualizationCollection=e})}.call(this),function(){var t;t=function(){function t(e,n){var i;this.map=e,this.elements=n,this.virtualizers=[],null==(i=this.elements)&&(this.elements=t.getTargetElements(this.map))}return t.getTargetElements=function(t,e){var n;return n=e&&e.length>0?e.getElements():t.select("element").elements()},t.getAttributes=function(){var t;return t=_(["label","connection type","loop type"]),Attributes.chain().reject(function(e){return t.include(e.key())}).collect(function(t){return{label:t.label(),name:t.get("name")}}).value()},t.prototype.getMap=function(){return this.map},t.prototype.getImport=function(){return this["import"]},t.prototype.add=function(t){return this.virtualizers.push(t)},t.prototype.execute=function(){var t,e,n,i,r,o,s,a,l,u,c,h,p;for(this.clean(),t={elements:[],connections:[]},c=this.virtualizers,r=0,a=c.length;a>r;r++)for(i=c[r],h=this.elements,o=0,l=h.length;l>o;o++)for(e=h[o],p=i.extract(e),s=0,u=p.length;u>s;s++)n=p[s],this.addElement(t,n),this.addConnection(t,e,n);return this.blueprint=new Blueprint(t),this.blueprint.formalize().deduplicate(),this["import"]=this.map.build(this.blueprint),this["import"].process()},t.prototype.save=function(){return this["import"].save()},t.prototype.undo=function(){return this["import"].undo()},t.prototype.clean=function(){return this["import"]?this["import"].undo():$.when(!0)},t.prototype.addElement=function(t,e){return t.elements.push(e)},t.prototype.addConnection=function(t,e,n){var i,r,o;return r=e.getLabel(),o=n instanceof Element?n.getLabel():n.label,i={from:r,to:o},t.connections.push(i)},t}(),namespace("window",function(e){return e.Virtualization=t})}.call(this),function(){var t;t=function(){function t(t){this.attr=t,this.type=this.attr.singularize()}return t.prototype.extract=function(t){var e,n,i,r,o;if(i=t.getAttr(this.attr),null!=i)for(e=[],_.isArray(i)||(i=[i]),r=0,o=i.length;o>r;r++)n=i[r],_.isString(n)&&(n=n.trim()),_.isEmpty(n)||e.push({type:this.type,label:n});else e=[];return e},t}(),namespace("window",function(e){return e.AttributeVirtualizer=t})}.call(this),function(){this.ArrayHelper=function(){function t(){}return t.wrap=function(t){return t instanceof Array?t:[t]},t.remove=function(t,e){var n;return n=_.indexOf(t,e),-1!==n&&t.splice(n,1),t},t.keymap=function(t){var e,n,i,r;for(e={},i=0,r=t.length;r>i;i++)n=t[i],e[n]=!0;return e},t}()}.call(this),function(){var t,e;e={text:"markdown",string:"basic",email:"basic",url:"basic",phone:"basic",number:"basic",percentage:"basic",currency:"basic"},t="basic",this.AttributesHelper=function(){function n(){}return n.classNameFor=function(t){var e,n;return n=1===t.limit()?"one":"one-or-more",e=t.format(),""+n+"-"+e},n.suggestEditor=function(n){var i,r,o;return r=n.get("format"),i=function(){switch(n.get("prompt")){case"list":return 1===n.limit()?n.choices().length<12?"radio":"select":n.choices().length<12?"checkbox":"multiselect";case"autocomplete":if(n.limit()>1)return"multiselect"}}(),null==i&&(i=null!=(o=e[r])?o:t),i},n.tag=function(t,e){var n;return 1===arguments.length&&(n=[t,"tags"],e=n[0],t=n[1]),this.linked(t,e,{className:"tag"})},n.linked=function(t,e,n){var i,r,o;return n=_.defaults({},n,{className:""}),r=n.className.split(" "),n.subtle&&r.push("subtle"),null==e&&(e=""),o=Selector.prepare('= ["{{attr}}"~="{{value}}"]',{attr:t,value:e}),i=$("<a />").html(e).attr("href",o),r.length>0&&i.addClass(r.join(" ")),i},n}()}.call(this),function(){this.AutocompleteHelper=function(){function t(){}return t.tags=function(){var t;return t=new AttributeField({name:"tags"}),t.getValues()},t.elementLabels=function(t){return null==t&&(t=Elements),t.map(function(t){return t.attrs.get("label")})},t.elementsWithinAccount=function(){return this.labels(Elements)},t.labels=function(t){return t.map(function(t){return{id:t.id,label:t.attrs.get("label")}})},t}()}.call(this);var ColorsHelper=window.ColorsHelper={};ColorsHelper.rgba=function(t,e){try{var n=chroma.hex(t).rgb();return"rgba("+n[0]+", "+n[1]+","+n[2]+","+e+")"}catch(i){return"rgba(0, 0, 0, 1)"}},ColorsHelper.darken=function(t,e){return ColorsHelper.adjust(t,e,!0)},ColorsHelper.lighten=function(t,e){return ColorsHelper.adjust(t,e,!1)},ColorsHelper.adjust=function(t,e,n){t=t.replace(/^\s*|\s*$/,""),t=t.replace(/^#?([a-f0-9])([a-f0-9])([a-f0-9])$/i,"#$1$1$2$2$3$3");var i=e*(n?-1:1),r=t.match(new RegExp("^rgba?\\(\\s*(\\d|[1-9]\\d|1\\d{2}|2[0-4][0-9]|25[0-5])\\s*,\\s*(\\d|[1-9]\\d|1\\d{2}|2[0-4][0-9]|25[0-5])\\s*,\\s*(\\d|[1-9]\\d|1\\d{2}|2[0-4][0-9]|25[0-5])(?:\\s*,\\s*(0|1|0?\\.\\d+))?\\s*\\)$","i")),o=r&&null!=r[4]?r[4]:null,s=r?[r[1],r[2],r[3]]:t.replace(/^#?([a-f0-9][a-f0-9])([a-f0-9][a-f0-9])([a-f0-9][a-f0-9])/i,function(){return parseInt(arguments[1],16)+","+parseInt(arguments[2],16)+","+parseInt(arguments[3],16)}).split(/,/);return r?"rgb"+(null!==o?"a":"")+"("+Math[n?"max":"min"](parseInt(s[0],10)+i,n?0:255)+", "+Math[n?"max":"min"](parseInt(s[1],10)+i,n?0:255)+", "+Math[n?"max":"min"](parseInt(s[2],10)+i,n?0:255)+(null!==o?", "+o:"")+")":["#",pad(Math[n?"max":"min"](parseInt(s[0],10)+i,n?0:255).toString(16),2),pad(Math[n?"max":"min"](parseInt(s[1],10)+i,n?0:255).toString(16),2),pad(Math[n?"max":"min"](parseInt(s[2],10)+i,n?0:255).toString(16),2)].join("")},ColorsHelper.hslToHex=function(t,e,n){var i="#",r=ColorsHelper.hslToRGBArray(t,e,n);for(var o in r)i+=Math.round(r[o]).toString(16).toUpperCase();return i},ColorsHelper.hslToRGBArray=function(t,e,n){var i,r,o,s,a;return 0==e?o=s=a=n:(r=.5>n?n*(1+e):n+e-n*e,i=2*n-r,o=ColorsHelper.hueToRGB(i,r,t+1/3),s=ColorsHelper.hueToRGB(i,r,t),a=ColorsHelper.hueToRGB(i,r,t-1/3)),[255*o,255*s,255*a]},ColorsHelper.hueToRGB=function(t,e,n){return 0>n&&(n+=1),n>1&&(n-=1),1>6*n?t+6*(e-t)*n:1>2*n?e:2>3*n?t+6*(e-t)*(2/3-n):t};var pad=function(t,e){var n="0";for(t+="";t.length<e;)t=n+t;return t};(function(){this.StringHelper=function(){function t(){}return t.wrapWords=function(t,e){var n,i,r,o,s,a,l,u;if(null==e&&(e={}),e=_.defaults(e,{length:20}),o=0,s=[],t)if(r=t.length,0===e.length||t.match("  "))s=t.split("  ");else if(r>e.length)for(a=u=0;r>=0?r>u:u>r;a=r>=0?++u:--u)n=t[a],l=a-o,i=a===r-1,(i||l>=e.length&&(" "===n||"-"===n))&&((i||"-"===n)&&(a+=1),s.push(t.substring(o,a))," "===n&&(a+=1),o=a);else s.push(t);return s},t.wrap=function(){return t.wrapWords.apply(t,arguments)},t}()}).call(this),function(){this.iframed=function(){return window.self!==window.top}}.call(this),function(){this.getMap=function(){return window.map}}.call(this),function(){var t;this.Monitor=t=function(e){var n;try{return e()}catch(i){throw n=i,t.error(n),n}},t.initialize=function(){var t;return t=currentUser.pick("id","name","username"),t.role=currentUser.membership.get("role"),Raven.setUser(t)},t.wrap=function(e){return function(){return t(e)}},t.event=function(t,e){return log.debug(t,e),Raven.captureMessage(t,e)},t.error=function(t,e){return log.error(t),Raven.captureException(t,e)}}.call(this),function(){this.redirect=function(t){return window.location=t}}.call(this),function(){this.template=function(t){var e;return e=t.replace("::","/templates/"),JST[e]}}.call(this),function(){this.urlFor=function(t){return router.urlFor(t)},this.absoluteUrlFor=function(t){return location.protocol+"//"+location.hostname+t}}.call(this),function(){var t;t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),this.uuid=function(e,n){var i;return null==e&&(e=8),null==n&&(n=62),i=function(){var i,r;for(r=[],i=0;e>=0?e>i:i>e;e>=0?i++:i--)r.push(t[0|Math.random()*n]);return r}(),i.join("")}}.call(this),function(){var t,e={}.hasOwnProperty,n=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};t=function(t){function e(t){var n=this;this.app=t,e.__super__.constructor.call(this),this.qs=require("qs"),$("body").on("click","a[data-push], a[data-push-silent]",function(t){var e,i,r;return 1!==t.which||t.metaKey||t.shiftKey?void 0:(t.preventDefault(),e=$(t.currentTarget),r=e.attr("href"),i=r.replace(Backbone.history.root,""),n.navigate(i,{trigger:!e.is("[data-push-silent]")}))})}return n(e,t),e.prototype.routes={"":"account",":map(/:perspective)":"map"},e.prototype.replace=function(t,e){return null==e&&(e={}),_.defaults(e,{trigger:!0,replace:!1}),this.navigate(t,{trigger:!1})},e.prototype.account=function(t){var e,n;return e=Settings.getDefaultMap(),n=e.getDefaultPerspective(),Session.set({map:e,perspective:n}),this.processCommonParams(t)},e.prototype.map=function(t,e,n){var i;return i=Maps.get(t),e=Perspectives.get(e),null==i&&(i=Settings.getDefaultMap()),null==e&&(e=i.getDefaultPerspective()),Session.set({map:i,perspective:e}),this.processCommonParams(n)},e.prototype.processCommonParams=function(t){return this.processSelection(t.selection||t.s)},e.prototype.processSelection=function(t){var e;return e=function(){var e;return t?(e=atob(t).split(","),map.select(e,{focus:!0})):map.resetSelection()},currentMap.ready?e():(t&&(currentMap.zoomFitOnLoad=!1),currentMap.once("load",e))},e.prototype.urlFor=function(t){var e,n,i,r,o,s,a,l;if(null==t&&(t={}),i=null!=(l=t.map)?l:currentMap,o=t.perspective,!i)return"#";e=i.getDefaultPerspective(),s="#"+(("function"==typeof i.slug?i.slug():void 0)||i),o&&o!==e&&(s+="/"+(("function"==typeof o.slug?o.slug():void 0)||o)),r={};for(n in t)a=t[n],"map"!==n&&"perspective"!==n&&""!==a&&null!=a&&(r[n]=a);return _.isEmpty(r)||(s+="?"+this.qs.stringify(r)),s},e}(Backbone.Router),namespace("Routers",function(e){return e.MapRouter=t})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=[].slice;window.KumuCommand=function(){function n(){this.fail=t(this.fail,this),this.done=t(this.done,this),this.delegateResolution=t(this.delegateResolution,this),this.delegate=t(this.delegate,this),this.delegateResult=t(this.delegateResult,this),this.delegateAction=t(this.delegateAction,this),this.rejectWithResponse=t(this.rejectWithResponse,this),this.abort=t(this.abort,this),this.cancel=t(this.cancel,this),this.reject=t(this.reject,this),this.resolve=t(this.resolve,this),this.undo=t(this.undo,this);var e=this;this.visible=!1,this.undoable=!0,this.executed=!1,this.cancelled=!1,this.subcommands=[],this.delegations=[],this.resolutions=[],this.errors=[],this.catchErrors=!1,this.execute=_.wrap(this.execute,function(t){var n,i;if(e.dfd=new $.Deferred,e.promise=e.dfd.promise(),i=function(){var n;return(n=e.validate())?e.reject(n):(e.executed=!0,t.call(e))},e.catchErrors)try{i()}catch(r){n=r,e.onError(n),e.undo()}else i();return e.promise}),this.undo=_.wrap(this.undo,function(t){var n,i;if(e.dfd=new $.Deferred,e.undoPromise=e.dfd.promise(),i=function(){return t.call(e)},e.catchErrors)try{i()}catch(r){n=r,e.onError(n)}else i();return e.undoPromise}),this.initialize.apply(this,arguments)}return n.prototype.initialize=function(){},n.prototype.validate=function(){},n.prototype.getPromise=function(){return this.promise},n.prototype.getUndoPromise=function(){return this.undoPromise},n.prototype.onError=function(t){return this.reject("Internal error. Please let us know if this happens again."),raise(t)},n.prototype.save=function(t){return t instanceof Backbone.Model?this.saveModel(t):t instanceof Backbone.Collection?this.saveCollection(t):t instanceof Array?this.saveArray(t):void 0},n.prototype.saveModel=function(t){return t.save()},n.prototype.saveCollection=function(t){return t.save()},n.prototype.saveArray=function(t){var e,n;return n=function(){var n,i,r;for(r=[],n=0,i=t.length;i>n;n++)e=t[n],r.push(e.save());return r}(),$.when.apply($,n)},n.prototype.announce=function(t){return app.status.info(t,!0)},n.prototype.undo=function(){var t,e,n,i;for(e=this.subcommands.slice(0).reverse(),n=0,i=e.length;i>n;n++)t=e[n],t.undoCommand();return this.resolve()},n.prototype.resolve=function(){var t,n;return t=1<=arguments.length?e.call(arguments,0):[],(n=this.dfd).resolve.apply(n,t)},n.prototype.reject=function(){var t,n;return t=1<=arguments.length?e.call(arguments,0):[],(n=this.dfd).reject.apply(n,t)},n.prototype.cancel=function(){return this.cancelled=!0,this.reject()},n.prototype.abort=function(t,e,n){return this.undo(),this.dfd.reject(new ErrorResponse(t,e,n))},n.prototype.rejectWithResponse=function(t){return this.reject(ErrorResponse.fromXHR(t))},n.prototype.delegateAction=function(){var t,n,i,r;return r=arguments[0],t=2<=arguments.length?e.call(arguments,1):[],n=function(t,e,n){n.prototype=t.prototype;var i=new n,r=t.apply(i,e);return Object(r)===r?r:i}(r,t,function(){}),i=n.executeCommand(),this.subcommands.push(n),this.delegations.push(i),i},n.prototype.delegateResult=function(){var t,n,i,r=this;return i=arguments[0],t=2<=arguments.length?e.call(arguments,1):[],n=this.delegateAction.apply(this,[i].concat(e.call(t))),n.done(function(){var t;return t=1<=arguments.length?e.call(arguments,0):[],r.resolutions.push(t)}).fail(function(){var t;return t=1<=arguments.length?e.call(arguments,0):[],r.errors.push(t)}),n},n.prototype.delegate=function(){var t,n;return n=arguments[0],t=2<=arguments.length?e.call(arguments,1):[],this.delegateResult.apply(this,[n].concat(e.call(t)))},n.prototype.delegateResolution=function(){return $.when.apply($,this.delegations).then(this.done,this.fail)},n.prototype.done=function(){return this.resolve(this.resolutions)},n.prototype.fail=function(){return this.reject()},n}()}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.initialize=function(t,e,n){return this.setSelection(t),this.setAttribute(e),this.setValue(n)},n.prototype.setSelection=function(t){return this.selection=t instanceof EntitySelection?t.clone():new EntitySelection(t),this.selectionLabel=this.selection.label()},n.prototype.setAttribute=function(t){return this.attribute=t instanceof Attribute?t:Attributes.findByName(t)||new Attribute({name:t})},n.prototype.setValue=function(t){return this.value=t,t&&_.isString(t)?this.truncatedValue=t.truncate(20):void 0},n.prototype.getSelectionLabel=function(){return this.selectionLabel},n.prototype.execute=function(){var t,e,n,i,r=this;for(this.originals={},i=this.selection.models,e=0,n=i.length;n>e;e++)t=i[e],this.originals[t.cid]=_.clone(t.getAttr(this.attribute)),this.update(t);return this.selection.save().done(function(){return r.resolve(r.selection)}).fail(function(){return r.reject()})},n.prototype.undo=function(){var t=this;return this.restore().done(function(){return t.resolve()}).fail(function(){return t.reject()})},n.prototype.restore=function(){var t,e,n,i;for(i=this.selection.models,e=0,n=i.length;n>e;e++)t=i[e],t.setAttr(this.attribute,this.originals[t.cid]);return this.selection.save()},n}(KumuCommand),namespace("Commands.Attributes",function(e){return e.Base=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.summary=function(){return"cleared **"+this.getSelectionLabel()+"**'s "+this.attribute.label().toLowerCase()},n.prototype.update=function(t){return t.unsetAttr(this.attribute)},n}(Commands.Attributes.Base),namespace("Commands.Attributes",function(e){return e.Clear=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.initialize=function(t){return this.attribute=Backbone.Model.wrap(t,Attribute)},n.prototype.summary=function(){return"added a new attribute (**"+this.attribute.label()+"**)"
},n.prototype.execute=function(){var t=this;return Attributes.add(this.attribute),this.attribute.save().done(function(){return t.resolve(t.attribute)}).fail(function(){return t.restore(),t.reject()})},n.prototype.undo=function(){var t=this;return this.restore().done(function(){return t.resolve()}).fail(function(){return t.reject("Unable to undo attribute changes")})},n.prototype.restore=function(){return this.attribute.destroy()},n}(KumuCommand),namespace("Commands.Attributes",function(e){return e.Create=t})}.call(this),function(){var t,e,n=function(t,e){return function(){return t.apply(e,arguments)}},i={}.hasOwnProperty,r=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};t=function(t){function i(){return this.assignAttribute=n(this.assignAttribute,this),e=i.__super__.constructor.apply(this,arguments)}return r(i,t),i.prototype.initialize=function(t,e,n){return this.name=e,this.value=n,this.selection=t.clone()},i.prototype.summary=function(){return this._assign.summary()},i.prototype.execute=function(){var t=this;return this.createAttribute().then(this.assignAttribute).done(function(){return t.resolve(t.attribute)}).fail(function(){return t.reject("Unable to assign attribute")})},i.prototype.createAttribute=function(){var t;return t=Attributes.findByName(this.name),t?$.when(t):(this._create=new Commands.Attributes.Create({name:this.name,category:this.category}),this._create.execute())},i.prototype.assignAttribute=function(t){return this.attribute=t,this._assign=new Commands.Attributes.Set(this.selection,this.attribute,this.value),this._assign.execute()},i.prototype.undo=function(){var t,e,n=this;return $.when(null!=(t=this._create)?t.undo():void 0,null!=(e=this._assign)?e.undo():void 0).done(function(){return n.resolve()}).fail(function(){return n.reject()})},i}(KumuCommand),namespace("Commands.Attributes",function(e){return e.CreateAndAssign=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.initialize=function(t){return this.attribute=t,this.transaction=new Transaction,this.attributeName=this.attribute.get("name")},n.prototype.summary=function(){return"deleted attribute **"+this.attributeName+"**"},n.prototype.execute=function(){var t=this;return this.transaction.destroy(this.attribute,{collection:Attributes}),this.transaction.execute().done(function(){return t.resolve(t.attribute)}).fail(function(){return t.reject("Unable to delete attribute")})},n.prototype.undo=function(){var t=this;return this.transaction.undo().done(function(){return t.resolve(t.attribute)}).fail(function(){return t.reject()})},n}(KumuCommand),namespace("Commands.Attributes",function(e){return e.Destroy=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.initialize=function(t,e,i,r){return this.index=i,n.__super__.initialize.call(this,t,e,r)},n.prototype.summary=function(){return"edited **"+this.getSelectionLabel()+"**'s **"+this.attribute.label()+"** ("+this.truncatedValue+")"},n.prototype.update=function(t){return t.editAttr(this.attribute,this.index,this.value)},n}(Commands.Attributes.Base),namespace("Commands.Attributes",function(e){return e.Edit=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.summary=function(){switch(this.attribute.key()){case"tags":return"untagged **"+this.getSelectionLabel()+"** with **"+this.value+"**";case"notes":return"removed the note **"+this.truncatedValue+"** from **"+this.getSelectionLabel()+"**";default:return"removed **"+this.truncatedValue+"** from **"+this.getSelectionLabel()+"**'s **"+this.attribute.label()+"**"}},n.prototype.update=function(t){return t.popAttr(this.attribute,this.value)},n}(Commands.Attributes.Base),namespace("Commands.Attributes",function(e){return e.Pop=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.summary=function(){var t;switch(t=this.getSelectionLabel(),this.attribute.key()){case"tags":return"tagged **"+t+"** with **"+this.value+"**";case"notes":return"added the note **"+this.truncatedValue+"** to **"+t+"**";default:return"added **"+this.truncatedValue+"** to **"+t+"**'s **"+this.attribute.label()+"**"}},n.prototype.update=function(t){return t.pushAttr(this.attribute,this.value)},n}(Commands.Attributes.Base),namespace("Commands.Attributes",function(e){return e.Push=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.initialize=function(t,e){return this.attribute=t,this.name=e,this.originalName=this.attribute.get("name")},n.prototype.summary=function(){return"renamed attribute **"+this.originalName+"** to **"+this.name+"**"},n.prototype.execute=function(){var t=this;return this.attribute.set("name",this.name),this.attribute.save().done(function(){return t.resolve(t.attribute)}).fail(function(){return t.restore(),t.reject()})},n.prototype.undo=function(){var t=this;return this.restore().done(function(){return t.resolve()}).fail(function(){return t.reject("Unable to undo rename")})},n.prototype.restore=function(){return this.attribute.set("name",this.originalName),this.attribute.save()},n}(KumuCommand),namespace("Commands.Attributes",function(e){return e.Rename=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.summary=function(){var t,e;return e=this.getSelectionLabel(),t=this.attribute.label().toLowerCase(),null!=this.value?this.attribute.limit()>1||"text"===this.attribute.get("format")?"updated **"+e+"**'s "+t:this.attribute.is("label")?"renamed **"+e+"** to **"+this.value+"**":"updated **"+e+"**'s "+t+" to **"+this.truncatedValue+"**":"cleared **"+e+"**'s "+t},n.prototype.update=function(t){return t.setAttr(this.attribute,this.value)},n}(Commands.Attributes.Base),namespace("Commands.Attributes",function(e){return e.Set=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.initialize=function(t,e){return this.attribute=t,this.memento=new Backbone.Memento(this.attribute),this.attributes=_.clone(e)},n.prototype.summary=function(){return"updated attribute **"+this.attribute.get("name")+"**"},n.prototype.execute=function(){var t=this;return this.attribute.save(this.attributes).done(function(){return t.resolve(t.attribute)}).fail(function(){return t.restore(),t.reject()})},n.prototype.undo=function(){var t=this;return this.restore(),this.attribute.save().done(function(){return t.resolve()}).fail(function(){return t.reject("Unable to undo changes")})},n.prototype.restore=function(){return this.memento.restore()},n}(KumuCommand),namespace("Commands.Attributes",function(e){return e.Update=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.initialize=function(t){return this.map=currentMap,this.selection=t.clone(),this.transaction=new Transaction,this.selectionLabel=function(){switch(t.length){case 1:return t.first().getLabel();default:return""+t.length+" items"}}()},n.prototype.summary=function(){return"removed **"+this.selectionLabel+"** from **"+this.map.get("name")+"**"},n.prototype.execute=function(){var t,e,n,i,r,o,s,a,l,u,c,h,p,f=this;for(r=[],e=[],n=[],h=this.selection.models,o=0,l=h.length;l>o;o++)switch(i=h[o],i.className){case"Node":r.push(i),e.push.apply(e,i.edges);break;case"Edge":e.push(i);break;case"Label":n.push(i)}for(e=_.uniq(e),p=[n,e,r],s=0,u=p.length;u>s;s++)for(t=p[s],a=0,c=t.length;c>a;a++)i=t[a],this.transaction.destroy(i);return this.transaction.execute().done(function(){return f.resolve()}).fail(function(){return f.reject("Unable to remove")})},n.prototype.undo=function(){var t=this;return this.transaction.undo().done(function(){return t.resolve()}).fail(function(){return t.reject()})},n}(KumuCommand),namespace("Commands.Components",function(e){return e.Destroy=t})}.call(this),function(){var t,e,n,i,r,o;t=function(t){return t instanceof Backbone.Model?n(t):t instanceof Backbone.Collection?labelForMultiple(t):void 0},n=function(){},e=function(){var t,e;return 1===this.length?(t=this.first(),t.getLabel()||t.getFallbackLabel(options)||"unnamed"):(e=this.type(),"mixed"===e?"multiple items":"multiple "+e)},i=function(t){return t.getLabel()||"unnamed element"},r=function(t){switch(t.length){case 0:return"zero elements";case 1:return this.labelForNode(t[0]);default:return"multiple elements"}},o={labelFor:t,labelForNode:i,labelForNodes:r},_.extend(KumuCommand.prototype,o)}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.initialize=function(t,e){return this.map=t,null==e&&(e={}),_.defaults(e,{connection:{},edge:{}}),this.connection=Backbone.Model.wrap(e.connection,Connection),this.connection.set("original_map_id",this.map.id),this.edge=Backbone.Model.wrap(e.edge,Edge)},n.prototype.summary=function(){return"created a connection"},n.prototype.execute=function(){var t,e,n=this;return Connections.add(this.connection),this.map.edges.add(this.edge),t=function(){return alert("Connection saved"),n.resolve(n.element,n.node)},e=function(){return alert("Unable to create connection"),log.info(n.connection.validationError),log.info(n.edge.validationError),n.undo()},this.connection.save().then(function(){return n.edge.save({entity_id:n.connection.id})}).then(t,e)},n.prototype.undo=function(){var t,e;return null!=(t=this.edge)&&t.destroy(),null!=(e=this.connection)?e.destroy():void 0},n}(KumuCommand),namespace("Commands.Connections",function(e){return e.CreateWithinMap=t})}.call(this),function(){}.call(this),function(){}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.initialize=function(t,e,n){return this.connection=t,this.side=e,this.element=n,this.originalElement=this.connection[this.side]},n.prototype.summary=function(){var t,e,n;return t=this.connection.from.getLabel(),n=this.connection.to.getLabel(),e=this.originalElement.getLabel(),"connected **"+t+"** to **"+n+"** (previously connected to **"+e+"**)"},n.prototype.execute=function(){var t=this;return this.connection.redirect(this.side,this.element),this.connection.save().done(function(){return t.resolve()}).fail(function(){return t.restore(),t.reject("Unable to redirect connection")})},n.prototype.undo=function(){var t=this;return this.restore(),this.connection.save().done(function(){return t.resolve()}).fail(function(){return t.reject("Unable to undo redirection")})},n.prototype.restore=function(){return this.connection.redirect(this.side,this.originalElement)},n}(KumuCommand),namespace("Commands.Connections",function(e){return e.Redirect=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.initialize=function(t){return this.connections=_.clone(t),this.edges=_.chain(this.connections).map(function(t){return t.edges.models}).flatten().value(),this.label=1===this.connections.length?"1 connection":""+this.connections.length+" connections"},n.prototype.summary=function(){return"reversed "+this.label},n.prototype.execute=function(){var t=this;return this.reverseAll(),$.when(this.save(this.connections),this.save(this.edges)).done(function(){return t.resolve(t.connections)}).fail(function(){return t.reverseAll(),t.reject("Unable to save changes")})},n.prototype.undo=function(){var t=this;return this.reverseAll(),$.when(this.save(this.connections),this.save(this.edges)).done(function(){return t.resolve()}).fail(function(){return t.reject()})},n.prototype.reverseAll=function(){var t,e,n,i,r;for(i=this.connections,r=[],e=0,n=i.length;n>e;e++)t=i[e],r.push(t.reverse());return r},n}(KumuCommand),namespace("Commands.Connections",function(e){return e.Reverse=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.initialize=function(t,e,n){return this.prop=e,this.value=n,this.connections=_.clone(t),this.label=1===this.connections.length?"1 connection":""+this.connections.length+" connections"},n.prototype.summary=function(){return"updated "+this.label},n.prototype.execute=function(){var t,e,n,i,r=this;for(this.backup(),i=this.connections,e=0,n=i.length;n>e;e++)t=i[e],t.set(this.prop,this.value);return this.save(this.connections).done(function(){return r.resolve(r.connections)}).fail(function(){return r.restore(),r.reject("Unable to save changes")})},n.prototype.undo=function(){var t=this;return this.restore(),this.save(this.connections).done(function(){return t.resolve()}).fail(function(){return t.reject("Unable to undo update")})},n.prototype.backup=function(){var t,e,n,i,r;for(this.originals={},i=this.connections,r=[],e=0,n=i.length;n>e;e++)t=i[e],r.push(this.originals[t.cid]=t.get(this.prop));return r},n.prototype.restore=function(){var t,e,n,i,r;for(i=this.connections,r=[],e=0,n=i.length;n>e;e++)t=i[e],r.push(t.set(this.prop,this.originals[t.cid]));return r},n}(KumuCommand),namespace("Commands.Connections",function(e){return e.Update=t})}.call(this),function(){var t,e,n=function(t,e){return function(){return t.apply(e,arguments)}},i={}.hasOwnProperty,r=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};t=function(t){function i(){return this.execute=n(this.execute,this),this.summary=n(this.summary,this),e=i.__super__.constructor.apply(this,arguments)}return r(i,t),i.prototype.initialize=function(t,e,n){return this.from=t,this.to=e,null==n&&(n={}),_.defaults(n,{map:currentMap}),this.map=n.map,this.connection=n.connection},i.prototype.summary=function(){return"created connection"},i.prototype.execute=function(){var t,e=this;return t=this.map.edges.build({from:this.from,to:this.to}),t.save().done(function(){return e.resolve(t)}).fail(this.rejectWithResponse)},i}(KumuCommand),namespace("Commands.Edges",function(e){return e.Create=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.initialize=function(t,e){return this.edge=t,this.curvature=e,this.connection=this.edge.getConnection(),this.originalCurvature=this.edge.get("curvature")},n.prototype.summary=function(){var t;return t=this.connection.getFallbackLabel({markdown:!0}),"**reshaped** "+t},n.prototype.execute=function(){var t=this;return this.edge.save({curvature:this.curvature}).done(function(){return t.resolve()}).fail(function(){return t.restore(),t.reject("Unable to save connection")})},n.prototype.undo=function(){var t=this;return this.restore(),this.edge.save().done(function(){return t.resolve()}).fail(function(){return t.reject("Unable to restore curvature")})},n.prototype.restore=function(){return this.edge.set({curvature:this.originalCurvature})},n}(KumuCommand),namespace("Commands.Edges",function(e){return e.Reshape=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.initialize=function(t,e){var n,i,r,o,s;for(this.edges=t,this.direction=e,this.originalDirections={},o=this.edges,s=[],i=0,r=o.length;r>i;i++)n=o[i],s.push(this.originalDirections[n.cid]=n.get("direction"));return s},n.prototype.summary=function(){var t;return 1===this.edges.length?(t=this.edges[0].getConnection(),"changed direction of **"+t.label()+"** to **"+this.direction+"**"):"changed the direction of **"+this.edges.length+" connections** to **"+this.direction+"**"},n.prototype.execute=function(){var t,e,n,i,r=this;for(i=this.edges,e=0,n=i.length;n>e;e++)t=i[e],t.set("direction",this.direction);return $.when.apply($,this.save()).done(function(){return r.resolve()}).fail(function(){return r.restore(),r.reject("Unable to save connection")})},n.prototype.undo=function(){var t=this;return edge.set("direction",this.originalDirections[edge.cid]),$.when.apply($,this.save()).done(function(){return t.resolve()}).fail(function(){return t.reject("Unable to reset direction")})},n.prototype.save=function(){return _.map(this.edges,function(t){return t.save()})},n}(KumuCommand),namespace("Commands.Edges",function(e){return e.SetDirection=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.initialize=function(t,e,n){return this.from=t,this.to=e,this.options=null!=n?n:{},this.connection=new Connection({from:this.from,to:this.to})},n.prototype.summary=function(){return"connected **"+this.from.getLabel()+"** to **"+this.to.getLabel()+"**"},n.prototype.execute=function(){var t=this;return this.connection.save().done(function(){return Connections.add(t.connection),t.resolve(t.connection)}).fail(function(){return t.reject("Unable to add connection")})},n.prototype.undo=function(){var t=this;return this.connection.destroy().then(function(){return t.resolve()}).fail(function(){return t.reject()})},n}(KumuCommand),namespace("Commands.Elements",function(e){return e.Connect=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.initialize=function(t){return this.element=t instanceof Element?t:new Element(t)},n.prototype.summary=function(){return"**created** element **"+this.element.getLabel()+"**"},n.prototype.execute=function(){var t=this;return this.element.save().done(function(){return Elements.add(t.element),t.resolve(t.element)}).fail(function(){return t.reject("Unable to create element")})},n.prototype.undo=function(){var t;return null!=(t=this.element)?t.destroy():void 0},n}(KumuCommand),namespace("Commands.Elements",function(e){return e.Create=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.initialize=function(t,e,n){return null==e&&(e={}),null==n&&(n={}),this.map=t,this.element=wrap(e,Element),this.node=wrap(n,Node),this.transaction=new Transaction},n.prototype.summary=function(){return"added **"+this.element.getLabel()+"** to **"+this.map.get("name")+"**"},n.prototype.execute=function(){var t,e,n=this;return t=function(){var t;return t=new Commands.Elements.Create(n.element),t.execute()},e=function(){var t;return n.node.setElement(n.element),t=new Commands.Nodes.Create(n.map,n.node),t.execute()},t().then(e).done(function(){return n.resolve(n.element,n.node)}).fail(function(){return n.reject("Unable to create element")})},n.prototype.undo=function(){var t,e,n=this;return $.when(null!=(t=this.node)?t.destroy():void 0,null!=(e=this.element)?e.destroy():void 0).done(function(){return n.resolve()}).fail(function(){return n.reject()})},n}(KumuCommand),namespace("Commands.Elements",function(e){return e.CreateAndPlace=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.initialize=function(t,e,n){return this.map=t,this.element=e,null==n&&(n={}),this.attributes=_.clone(n)},n.prototype.summary=function(){return this.createNode.summary()},n.prototype.execute=function(){var t=this;return this.node=new Node(this.attributes),this.node.setElement(this.element),this.createNode=new Commands.Nodes.Create(this.map,this.node),this.createNode.execute().done(function(e){return t.node=e,t.resolve(t.node)}).fail(function(){var e,n;return log.info("place failed",null!=(e=t.element)?e.validationError:void 0,null!=(n=t.node)?n.validationError:void 0),t.undo(),t.reject("Unable to place element")})},n.prototype.undo=function(){var t,e=this;return null!=(t=this.createNode)?t.undo().done(function(){return e.resolve()}).fail(function(){return e.reject()}):void 0},n}(KumuCommand),namespace("Commands.Elements",function(e){return e.Place=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.initialize=function(t){return this.map=t,this.undoable=!1},n.prototype.summary=function(){return"exported blueprint"},n.prototype.execute=function(){var t;return t=toBlueprint(),this.resolve(t)},n}(KumuCommand),namespace("Commands.Exports",function(e){return e.ExportBlueprint=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.initialize=function(t,e,n){return this.map=t,this.label=n,this.selectedNodes=_.clone(e),this.transaction=new Transaction,this.connections=[]},n.prototype.summary=function(){return this.fromLabel=this.labelForNodes(this.selectedNodes),this.toLabel=this.labelForNodes(this.targetNodes),"connected **"+this.fromLabel+"** to **"+this.toLabel+"**"},n.prototype.execute=function(){var t,e,n=this;return e=this.map.findNodesByLabel(this.label),0===e.length?(t=Elements.findByLabel(this.label),t?this.placeAndConnectTo(t):this.connectNew()):this.connectTo(e),this.transaction.execute().done(function(){return n.resolve(n.connections)}).fail(function(){return log.error("Unable to connect",n.map,n.selectedNodes,n.label),n.reject("Unable to add connection")})},n.prototype.connectNew=function(){var t,e;return t=Elements.build({attributes:{label:this.label}}),e=this.map.nodes.build({entity:t}),this.transaction.add("create",t),this.transaction.add("create",e),this.connectTo([e])},n.prototype.placeAndConnectTo=function(t){var e;return e=this.map.nodes.build({entity:t}),this.transaction.add("create",e),this.connectTo([e])},n.prototype.connectTo=function(t){var e,n,i,r,o,s;for(this.targetNodes=t,o=this.selectedNodes,s=[],i=0,r=o.length;r>i;i++)e=o[i],s.push(function(){var t,i,r,o;for(r=this.targetNodes,o=[],t=0,i=r.length;i>t;t++)n=r[t],e!==n&&o.push(this.connectNodes(e,n));return o}.call(this));return s},n.prototype.connectNodes=function(t,e){var n,i;return n=Connections.build({from:t.getElement(),to:e.getElement()}),i=this.map.edges.build({from:t,to:e,entity:n}),this.transaction.add("create",n),this.transaction.add("create",i),this.connections.push(n)},n.prototype.undo=function(){var t=this;return this.transaction.undo().done(function(){return t.resolve()}).fail(function(){return t.reject()})},n}(KumuCommand),namespace("Commands.Forms",function(e){return e.Connect=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.initialize=function(t){this["import"]=t},n.prototype.summary=function(){var t,e;return e=this["import"].target(),t="imported multiple items",e&&(t+=" into **"+e.get("name")+"**"),t},n.prototype.execute=function(){var t=this;return this["import"].save().done(function(){return t.resolve(t["import"])}).fail(function(){return t.reject()})},n.prototype.undo=function(){var t=this;return this["import"].undo().done(function(){return t.resolve(t["import"])}).fail(function(){return t.reject()})},n}(KumuCommand),namespace("Commands.Imports",function(e){return e.Finalize=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.initialize=function(t,e){return this.label=t,this.position=e,this.originalAttributes=_.clone(this.label.pick("pinned","position")),this.originalPosition=this.originalAttributes.position},n.prototype.summary=function(){return"moved label **"+this.label.getLabel()+"**"},n.prototype.execute=function(){var t=this;return this.label.save({pinned:!0,position:this.position}).done(function(){return t.resolve(t.label)}).fail(function(){return t.reject("Unable to save changes")})},n.prototype.undo=function(){var t=this;return this.label.save(this.originalAttributes).done(function(){return t.label.position=null!=t.originalPosition?Vector.copy(t.originalPosition):null,t.resolve()}).fail(function(){return t.reject()})},n}(KumuCommand),namespace("Commands.Labels",function(e){return e.Move=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.initialize=function(t){return this.lens=wrap(t,Lens)},n.prototype.summary=function(){return"updated perspective "+this.lens.perspective.get("name")},n.prototype.execute=function(){var t=this;return this.lens.save().done(function(){return t.resolve(t.lens)}).fail(function(){return t.reject("Unable to create lens")})},n.prototype.undo=function(){return this.lens.destroy()},n}(KumuCommand),namespace("Commands.Lenses",function(e){return e.Create=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.initialize=function(t){return this.lens=t,this.perspective=this.lens.perspective,this.perspectiveName=this.perspective.get("name")},n.prototype.summary=function(){return"updated perspective **"+this.perspectiveName+"**"},n.prototype.execute=function(){var t=this;return this.lens.destroy(),this.compile=new Commands.Perspectives.Compile(this.perspective),this.compile.execute().done(function(){return t.resolve(t.lens)}).fail(function(){return t.reject("Unable to update perspective")})},n.prototype.undo=function(){var t=this;return this.compile.undo().done(function(){return t.resolve(t.lens)}).fail(function(){return t.reject()})},n}(KumuCommand),namespace("Commands.Lenses",function(e){return e.Destroy=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.initialize=function(t,e){return this.lens=t,this.attributes=_.clone(e),this.originalAttributes=this.lens.toJSON(),this.perspective=this.lens.perspective,this.perspectiveName=this.perspective.get("name")},n.prototype.summary=function(){return"updated perspective **"+this.perspectiveName+"**"},n.prototype.execute=function(){var t=this;return this.lens.set(this.attributes),this.compile=new Commands.Perspectives.Compile(this.perspective),this.compile.execute().done(function(){return t.resolve(t.lens)}).fail(function(){return t.reject("Unable to update perspective")})},n.prototype.undo=function(){var t=this;return this.lens.set(this.originalAttributes),this.compile.undo().done(function(){return t.resolve(t.lens)}).fail(function(){return t.reject()})},n}(KumuCommand),namespace("Commands.Lenses",function(e){return e.Update=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.initialize=function(t,e){return this.map=t,this.attributes=_.clone(e),this.transaction=new Transaction},n.prototype.summary=function(){var t;return t=this.lewp.getLabel(),t?"added loop **"+t+"**":"added a new loop"},n.prototype.execute=function(){var t=this;return this.lewp=Loops.build(this.attributes),this.label=this.map.addLoop(this.lewp),this.transaction.add("create",this.lewp),this.transaction.add("create",this.label),this.transaction.execute().done(function(){return t.resolve(t.lewp,t.label)}).fail(function(){return t.reject("Unable to create loop")})},n.prototype.undo=function(){var t=this;return this.transaction.undo().done(function(){return t.resolve()}).fail(function(){return t.reject()})},n}(KumuCommand),namespace("Commands.Loops",function(e){return e.CreateAndPlace=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)
}return i(n,t),n.prototype.initialize=function(t,e){this.lewp=t,this.connection=e},n.prototype.summary=function(){return"updated loop **"+this.lewp.getLabel()+"**"},n.prototype.execute=function(){var t=this;return this.lewp.toggleConnection(this.connection),this.lewp.save().done(function(){return t.resolve(t.lewp,t.connection)}).fail(function(){return t.reject("Unable to update loop")})},n.prototype.undo=function(){var t=this;return this.lewp.toggleConnection(this.connection),this.lewp.save().done(function(){return t.resolve()}).fail(function(){return t.reject()})},n}(KumuCommand),namespace("Commands.Loops",function(e){return e.ToggleConnection=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.initialize=function(t){return this.attributes=_.clone(t)},n.prototype.summary=function(){return"created map **"+this.map.get("name")+"**"},n.prototype.execute=function(){var t=this;return this.map=new Map(this.attributes),this.map.save().done(function(){return Maps.add(t.map),t.resolve(t.map)}).fail(function(){return t.reject("Unable to create map")})},n.prototype.undo=function(){var t=this;return this.map.destroy().done(function(){return t.resolve(t.map)}).fail(function(){return t.reject(t.map)})},n}(KumuCommand),namespace("Commands.Maps",function(e){return e.Create=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.initialize=function(t){return this.map=t,this.undoable=!1,this.transaction=new Transaction},n.prototype.summary=function(){return"deleted map **"+this.map.get("name")+"**"},n.prototype.execute=function(){var t,e,n,i,r,o,s,a,l,u=this;for(a=["labels","edges","nodes"],i=0,o=a.length;o>i;i++)for(n=a[i],t=this.map[n],l=t.models,r=0,s=l.length;s>r;r++)e=l[r],this.transaction.add("destroy",e);return this.transaction.add("destroy",this.map),this.transaction.execute().done(function(){return Session.set("map",Settings.getDefaultMap()),u.resolve(u.map)}).fail(function(){return u.reject("Unable to delete map")})},n}(KumuCommand),namespace("Commands.Maps",function(e){return e.Destroy=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.initialize=function(t,e){return this.map=t,this.name=e,this.transaction=new Transaction},n.prototype.summary=function(){return"created map **"+this.name+"**"},n.prototype.execute=function(){var t=this;return this.duplicateAttributes(),this.duplicateAssociations(),this.initializeScene(),this.transaction.execute().done(function(){return Maps.add(t.copy),t.resolve(t.copy)}).fail(function(){return t.reject("Unable to duplicate map")})},n.prototype.undo=function(){var t=this;return this.transaction.undo().done(function(){return t.resolve(t.copy)}).fail(function(){return t.reject()})},n.prototype.duplicateAttributes=function(){return this.copy=this.map.clone(),this.copy.set("name",this.name),this.transaction.create(this.copy)},n.prototype.duplicateAssociations=function(){var t,e,n,i,r,o,s,a,l,u,c,h;for(r={},this.copy.ordain(),u=["nodes","edges","labels"],h=[],o=0,a=u.length;a>o;o++){for(t=u[o],e=[],c=this.map[t].models,s=0,l=c.length;l>s;s++){switch(i=c[s],n=i.clone(),n.setMap(this.copy),r[i.cid]=n,t){case"edges":n.from=r[i.from.cid],n.to=r[i.to.cid];break;case"labels":n.edges=_.map(i.edges,function(t){return r[t.cid]})}e.push(n),this.transaction.create(n)}h.push(this.copy[t].reset(e))}return h},n.prototype.initializeScene=function(){return this.copy.refresh(),this.copy.ready=!0},n}(KumuCommand),namespace("Commands.Maps",function(e){return e.Duplicate=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.initialize=function(t){return this.map=t,this.originalMap=Settings.getDefaultMap()},n.prototype.summary=function(){return"made **"+this.map.get("name")+"** the default map"},n.prototype.execute=function(){var t=this;return Settings.setDefaultMap(this.map),Settings.save().done(function(){return t.resolve(t.map)}).fail(function(){return t.reject("Unable to save changes")})},n.prototype.undo=function(){var t=this;return Settings.setDefaultMap(this.originalMap),Settings.save().done(function(){return t.resolve(t.map)}).fail(function(){return t.reject()})},n}(KumuCommand),namespace("Commands.Maps",function(e){return e.MakeDefault=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.initialize=function(t){return this.map=t,this.values={scale:this.map.scene.scale,center:this.map.scene.translation.invert().toJSON()},this.originalValues=this.map.pick("scale","center")},n.prototype.summary=function(){return"updated **"+this.map.get("name")+"**'s default view"},n.prototype.execute=function(){var t=this;return this.map.save(this.values).done(function(){return t.resolve(t.map)}).fail(function(){return t.reject(t.map)})},n.prototype.undo=function(){var t=this;return this.map.save(this.originalValues).done(function(){return t.resolve(t.map)}).fail(function(){return t.reject(t.map)})},n}(KumuCommand),namespace("Commands.Maps",function(e){return e.MakeDefaultView=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.execute=function(){var t=this;return prompt("Map Name",function(e,n){return e?t.reject():execute(new Commands.Maps.Create({name:n})).done(function(e){return Session.set("map",e),t.resolve(e)}).fail(function(){return t.reject()})})},n}(KumuCommand),namespace("Commands.Maps",function(e){return e.New=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.initialize=function(t,e){return this.map=t,this.name=e,this.originalName=this.map.get("name")},n.prototype.summary=function(){return"renamed map **"+this.originalName+"** to **"+this.name+"**"},n.prototype.execute=function(){var t=this;return this.map.save({name:this.name}).done(function(){return t.map===currentMap&&t.updateLocation(),t.resolve(t.map)}).fail(function(){return t.reject(t.map)})},n.prototype.undo=function(){var t=this;return this.map.save({name:this.originalName}).done(function(){return t.map===currentMap&&t.updateLocation(),t.resolve(t.map)}).fail(function(){return t.reject(t.map)})},n.prototype.updateLocation=function(){return map.navigate(this.map.slug(),{trigger:!1})},n}(KumuCommand),namespace("Commands.Maps",function(e){return e.Rename=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.initialize=function(t,e,n,i){return this.model=t,e instanceof Backbone.Memento?(this.memento=e.clone(),i=n):(_.isObject(e)?(this.attrs=_.clone(e),i=n):(this.attrs={},this.attrs[e]=n),this.memento=this.model.toMemento()),i=_.defaults({},i,{classify:!0}),this.summary=function(){switch(i.classify){case!0:return"updated "+this.model.className.toLowerCase()+" **"+this.model.toString()+"**";case!1:return"updated **"+this.model.toString()+"**"}}.call(this),_.isString(e)?this.summary+="'s "+e.humanize().toLowerCase():void 0},n.prototype.execute=function(){var t=this;return this.model.save(this.attrs).done(function(){return t.resolve(t.model)}).fail(function(){return t.reject()})},n.prototype.undo=function(){var t=this;return this.model.save(this.memento.toJSON()).done(function(){return t.resolve(t.model)}).fail(function(){return t.reject()})},n.prototype.orig=function(t){return this.memento.get(t)},n}(KumuCommand),namespace("Commands.Models",function(e){return e.Update=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.summary=function(){return"updated **"+this.orig("name")+"**"},n}(Commands.Models.Update),namespace("Commands.Maps",function(e){return e.Update=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.initialize=function(t,e){return this.model=t,e=_.defaults({},e,{classify:!0}),this.summary=function(){switch(e.classify){case!0:return"added "+this.model.className.toLowerCase()+" **"+this.model.toString()+"**";case!1:return"added **"+this.model.toString()+"**"}}.call(this)},n.prototype.execute=function(){var t=this;return this.model.save().done(function(){return t.resolve(t.model)}).fail(function(){return t.reject()})},n.prototype.undo=function(){var t=this;return this.model.destroy().done(function(){return t.resolve(t.model)}).fail(function(){return t.reject()})},n}(KumuCommand),namespace("Commands.Models",function(e){return e.Create=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.initialize=function(t,e){return this.model=t,e=_.defaults({},e,{classify:!0}),this.summary=function(){switch(e.classify){case!0:return"deleted "+this.model.className.toLowerCase()+" **"+this.model.toString()+"**";case!1:return"deleted **"+this.model.toString()+"**"}}.call(this)},n.prototype.execute=function(){var t=this;return this.model.destroy().done(function(){return t.resolve(t.model)}).fail(function(){return t.reject()})},n.prototype.undo=function(){var t=this;return this.model.restore().done(function(){return t.resolve(t.model)}).fail(function(){return t.reject()})},n}(KumuCommand),namespace("Commands.Models",function(e){return e.Destroy=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.initialize=function(t,e){return this.from=t,this.to=e,this.map=currentMap},n.prototype.summary=function(){return"connected **"+this.from.getLabel()+"** to **"+this.to.getLabel()+"**"},n.prototype.execute=function(){var t,e,n=this;return t=function(){return n.connect=new Commands.Elements.Connect(n.from.getElement(),n.to.getElement()),n.connect.execute()},e=function(t){return n.connection=t,n.edge=n.map.edges.build({entity:n.connection}),n.edge.save()},t().then(e).done(function(){return n.resolve(n.connection,n.edge)}).fail(function(){return n.reject("Unable to connect elements")})},n.prototype.undo=function(){var t,e,n=this;return $.when(null!=(t=this.edge)?t.destroy():void 0,null!=(e=this.connection)?e.destroy():void 0).done(function(){return n.resolve()}).fail(function(){return n.reject()})},n}(KumuCommand),namespace("Commands.Nodes",function(e){return e.Connect=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.initialize=function(t,e,n){return this.fromNode=t,this.elementAttributes=e,this.nodeAttributes=n,this.fromElement=this.fromNode.getElement(),this.map=currentMap},n.prototype.summary=function(){return"connected **"+this.fromNode.getLabel()+"** to **"+this.toNode.getLabel()+"**"},n.prototype.execute=function(){var t,e,n=this;return e=function(){var t;return t=new Commands.Elements.CreateAndPlace(n.map,n.elementAttributes,n.nodeAttributes),t.execute().done(function(t,e){n.toElement=t,n.toNode=e})},t=function(){return n.connect=new Commands.Nodes.Connect(n.fromNode,n.toNode),n.connect.execute().done(function(t,e){n.connection=t,n.edge=e})},e().then(t).done(function(t){return n.connection=t,n.resolve(n.connection,n.edge)}).fail(function(){return n.reject("Unable to create connection")})},n.prototype.undo=function(){var t,e,n,i,r=this;return $.when(null!=(t=this.edge)?t.destroy():void 0,null!=(e=this.connection)?e.destroy():void 0,null!=(n=this.toNode)?n.destroy():void 0,null!=(i=this.toElement)?i.destroy():void 0).done(function(){return r.resolve()}).fail(function(){return r.reject()})},n}(KumuCommand),namespace("Commands.Nodes",function(e){return e.ConnectNew=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.initialize=function(t,e){return this.map=t,this.node=wrap(e,Node)},n.prototype.summary=function(){return"added **"+this.node.getLabel()+"** to **"+this.map.get("name")+"**"},n.prototype.execute=function(){var t=this;return this.node.getElement().isNew()&&raise("element must already exist"),this.map.nodes.add(this.node),this.node.save().done(function(){return t.resolve(t.node)}).fail(function(){return t.map.nodes.remove(t.node),t.reject("Unable to create node")})},n.prototype.undo=function(){var t=this;return this.node.destroy().done(function(){return t.resolve(t.node)}).fail(function(){return t.reject()})},n}(KumuCommand),namespace("Commands.Nodes",function(e){return e.Create=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.initialize=function(t,e){var n,i,r,o,s;for(this.nodes=t,this.transaction=new Transaction,this.positions={},o=this.nodes,s=[],i=0,r=o.length;r>i;i++)n=o[i],s.push(this.positions[n.cid]=n.position.subtract(e));return s},n.prototype.summary=function(){var t;return t=function(){switch(this.nodes.length){case 1:return this.nodes[0].entity.getLabel();default:return""+this.nodes.length+" elements"}}.call(this),"moved **"+t+"**"},n.prototype.execute=function(){var t,e,n,i,r=this;for(i=this.nodes,e=0,n=i.length;n>e;e++)t=i[e],t.isPinned()&&this.transaction.update(t,{position:t.position.toJSON()});return this.transaction.execute().done(function(){return r.resolve()}).fail(function(){return r.reject()})},n.prototype.undo=function(){var t,e,n,i,r=this;for(i=this.nodes,e=0,n=i.length;n>e;e++)t=i[e],t.position=this.positions[t.cid];return this.transaction.undo().done(function(){return r.resolve()}).fail(function(){return r.reject()})},n}(KumuCommand),namespace("Commands.Nodes",function(e){return e.Move=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.initialize=function(t,e){this.nodes=t,this.pinned=null!=e?e:!0},n.prototype.summary=function(){var t,e;return t=this.pinned?"pinned":"unpinned",e=1===this.nodes.length?this.nodes[0].getLabel():""+this.nodes.length+" elements",""+t+" **"+e+"**"},n.prototype.execute=function(){var t,e,n,i,r,o=this;for(this.backup(),r=this.nodes,n=0,i=r.length;i>n;n++)e=r[n],t={pinned:this.pinned},this.pinned&&(t.position=e.position.toJSON()),e.set(t);return this.save(this.nodes).done(function(){return o.resolve(o.nodes)}).fail(function(){return o.restore(),o.reject()})},n.prototype.undo=function(){var t=this;return this.restore(),this.save(this.nodes).done(function(){return t.resolve(t.nodes)}).fail(function(){return t.reject()})},n.prototype.backup=function(){var t,e,n,i,r;for(this.original={},i=this.nodes,r=[],e=0,n=i.length;n>e;e++)t=i[e],r.push(this.original[t.cid]={pinned:t.get("pinned"),position:t.get("position")});return r},n.prototype.restore=function(){var t,e,n,i,r;for(i=this.nodes,r=[],e=0,n=i.length;n>e;e++)t=i[e],r.push(t.set(this.original[t.cid]));return r},n}(KumuCommand),namespace("Commands.Nodes",function(e){return e.Pin=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.initialize=function(t){return this.perspective=t,this.name=this.perspective.get("name"),this.originalStyle=this.perspective.get("style")},n.prototype.summary=function(){return"updated perspective **"+this.name+"**"},n.prototype.execute=function(){var t=this;return this.perspective.set("style",this.perspective.toCSS()),this.perspective.save().done(function(){return t.resolve(t.perspective)}).fail(function(){return t.reject("Unable to save perspective")})},n.prototype.undo=function(){var t=this;return this.perspective.set("style",this.originalStyle),this.perspective.rebuild(),this.perspective.save().done(function(){return t.resolve(t.perspective)}).fail(function(){return t.reject()})},n}(KumuCommand),namespace("Commands.Perspectives",function(e){return e.Compile=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.initialize=function(t){return this.attributes=_.clone(t),this.name=this.attributes.name},n.prototype.summary=function(){return"added a new perspective named **"+this.name+"**"},n.prototype.execute=function(){var t=this;return this.perspective=new Perspective(this.attributes),this.perspective.save().done(function(){return Perspectives.add(t.perspective),t.resolve(t.perspective)}).fail(function(){return t.reject("Unable to create perspective")})},n.prototype.undo=function(){var t=this;return this.perspective.destroy().done(function(){return t.resolve(t.perspective)}).fail(function(){return t.reject()})},n}(KumuCommand),namespace("Commands.Perspectives",function(e){return e.Create=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.initialize=function(t){this.perspective=t},n.prototype.summary=function(){return"deleted perspective **"+this.perspective.get("name")+"**"},n.prototype.execute=function(){var t=this;return this.perspective.destroy().done(function(){return t.resolve(t.perspective)}).fail(function(){return t.reject("Unable to delete perspective")})},n.prototype.undo=function(){var t=this;return this.perspective.restore().done(function(){return t.resolve(t.perspective)}).fail(function(){return t.reject()})},n}(KumuCommand),namespace("Commands.Perspectives",function(e){return e.Destroy=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.initialize=function(t,e){this.perspective=t,this.name=e},n.prototype.summary=function(){return"created perspective **"+this.name+"**"},n.prototype.execute=function(){var t=this;return this.copy=this.perspective.clone(),this.copy.set("name",this.name),this.copy.save().done(function(){return Perspectives.add(t.copy),t.resolve(t.copy)}).fail(function(){return t.reject("Unable to duplicate perspective")})},n.prototype.undo=function(){var t=this;return this.copy.destroy().done(function(){return t.resolve(t.copy)}).fail(function(){return t.reject()})},n}(KumuCommand),namespace("Commands.Perspectives",function(e){return e.Duplicate=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.execute=function(){var t=this;return prompt("Perspective Name",function(e,n){return e?t.reject():execute(new Commands.Perspectives.Create({name:n})).done(function(e){return Session.set("perspective",e),t.resolve(e)}).fail(function(){return t.reject()})})},n}(KumuCommand),namespace("Commands.Perspectives",function(e){return e.New=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.summary=function(){return"renamed **"+this.orig("name")+"** perspective"},n}(Commands.Models.Update),namespace("Commands.Perspectives",function(e){return e.Rename=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.summary=function(){return"updated **"+this.orig("name")+"** perspective"},n}(Commands.Models.Update),namespace("Commands.Perspectives",function(e){return e.Update=t})}.call(this),function(){var t,e;e=1,t=function(){function t(){this.id=e++,this.registry={},this.stack=[]}return t.pouch=void 0,t.prototype.getCount=function(){return this.stack.length},t.prototype.create=function(t){return this.add("create",t)},t.prototype.update=function(t,e){var n;return n=_.omit(t.toJSON(),"_id","_rev"),_.isFunction(e)?e(t):t.set(e),this.add("update",t,{previousAttributes:n})},t.prototype.destroy=function(t,e){var n;return null==e&&(e={}),n=e.collection||t.collection,this.add("destroy",t,{collection:n})},t.prototype.add=function(t,e,n){var i;return i={action:t,model:e,options:n,executed:!1},this.register(i),this.stack.push(i),this.length=this.stack.length},t.prototype.register=function(t){var e,n;return n=t.model.cid,e=this.registry[n],e?raise("TransactionError: Conflicting transaction"):this.registry[n]=t},t.prototype.execute=function(){var t,e,n,i,r=this;return this.promise?this.promise:(log.debug("Executing transaction",this),t=new $.Deferred,e=function(t){var e,n,i,o,s;for(r.ordain(),o=r.stack,s=[],n=0,i=o.length;i>n;n++)e=o[n],s.push(r.executeOperation(t,e));return s},n=function(){return log.debug("Transaction complete.",r),log.debug.apply(log,arguments),t.resolve.apply(t,arguments)},i=function(){return log.error("Transaction failed.",r),log.error(arguments),r.undo().always(function(){return t.reject.apply(t,arguments)})},this.batched(e).then(n,i),this.executed=!0,this.promise=t.promise())},t.prototype.ordain=function(){var t,e,n,i,r;for(i=this.stack,r=[],e=0,n=i.length;n>e;e++)t=i[e],"create"===t.action&&r.push(t.model.ordain());return r},t.prototype.executeOperation=function(t,e){var n,i,r;return n=e.action,r=e.model,i=function(){switch(n){case"create":case"update":r.save();break;case"destroy":r.destroy()}return e.executed=!0},this.synced(t,r,i)},t.prototype.undo=function(){var t,e=this;return this.undoPromise?this.undoPromise:(log.debug("Rolling back transaction",this),t=function(t){var e,n,i,r;for(i=this.stack,r=[],n=i.length-1;n>=0;n+=-1)e=i[n],r.push(this.undoOperation(e,t));return r},this.executed?this.undoPromise=this.batched(t):(t.call(this),this.undoPromise=$.when(!0)),this.undoPromise.done(function(){return log.debug("Rollback complete",e),log.debug.apply(log,arguments)}).fail(function(){return alert("Unable to undo changes. Please refresh to continue."),log.error("Rollback failed",e),log.error.apply(log,arguments)}))},t.prototype.undoOperation=function(t,e){var n,i,r,o;return n=t.action,i=t.model,r=t.options,o=function(){var e,o;switch(n){case"create":return i.destroy();case"update":if(i.set(r.previousAttributes),t.executed)return i.save();break;case"destroy":return o=i.restore(),e=r.collection,e.add(i)}},e?this.synced(e,i,o):o.call(this)},t.prototype.batched=function(e){var n,i;return i=_.result(t,"pouch"),n=Backbone.sync.pouchdb.batch(i),e.call(this,n),n.send()},t.prototype.synced=function(t,e,n){var i;return i=e.sync,e.sync=t.sync,n.call(this),e.sync=i},t.prototype.abort=function(){return this.undo()},t.prototype.rollback=function(){return this.undo()},t}(),namespace("window",function(e){return e.Transaction=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.initialize=function(t){this.virtualization=t},n.prototype.summary=function(){var t;return t=this.virtualization.getMap().get("name"),"virtualized into **"+t+"**"},n.prototype.execute=function(){var t=this;return this.virtualization.save().done(function(){return t.resolve()}).fail(function(){return t.reject()})},n.prototype.undo=function(){var t=this;return this.virtualization.undo().done(function(){return t.resolve()}).fail(function(){return t.reject()})},n}(KumuCommand),namespace("Commands.Virtualization",function(e){return e.Save=t})}.call(this),function(){var t;t=function(t){var e,n,i,r;return e=new $.Deferred,n=wrap(t.from,Array),i=t.to,r=t.map||currentMap,execute(new Commands.Forms.Connect(r,n,i)).done(function(t){return e.resolve(t)}).fail(function(){return alert("Unable to add connection"),e.reject()}),e.promise()},namespace("Workflows",function(e){return e.addConnection=t})}.call(this),function(){var t,e,n;n=function(n){var i,r,o,s,a;return o=n.map||currentMap,r=n.label,a=o.findNodesByLabel(r),0===a.length?(i=Elements.findByLabel(r),i?e(o,i):t(o,r)):(s=a[0],i=s.getElement(),$.when(i,s))},e=function(t,e){var n;return n=new $.Deferred,execute(new Commands.Elements.Place(t,e)).done(function(t){return n.resolve(e,t)}).fail(function(){return n.reject()}),n.promise()},t=function(t,e){var n,i;return n=new $.Deferred,i={attributes:{label:e}},execute(new Commands.Elements.CreateAndPlace(t,i)).done(function(t,e){return n.resolve(t,e)}).fail(function(){return n.reject()}),n.promise()},namespace("Workflows",function(t){return t.addElement=n})}.call(this),function(){var t,e;e=function(e){var n,i,r;return n=new $.Deferred,currentPerspective?(i=wrap(e,Lens),r=new Views.Decorations.Wizard({model:i}),r.open(function(e,i){var o,s;return o=function(){return map.refresh(),r.close(),n.resolve(e)},s=function(){return r.close(),alert("Unable to update perspective"),n.reject()},t(e,i).then(o,s)})):(alert("Please activate a perspective first"),n.reject("Please activate a perspective first")),n.promise()},t=function(t,e){var n,i,r;return r=currentPerspective,i=r.toMemento(),t.set(e),r.lenses.add(t),r.compile(),n=new Commands.Models.Update(r,i),execute(n)},namespace("Workflows",function(t){return t.addLens=e})}.call(this),function(){var t;t=function(t){var e,n;return n=t.map,e=t.connections,prompt("Loop Label").then(function(t){var i;return i={connection_ids:_.pluck(e,"id"),attributes:{label:t}},execute(new Commands.Loops.CreateAndPlace(n,i)).done(function(t,e){var n;return n=getMap(),n.refresh(),n.select(e)})})},namespace("Workflows",function(e){return e.addLoop=t})}.call(this),function(){var t;t=function(){return prompt("Map Name",function(t,e){var n,i;return e?(i=new Map({name:e}),n=new Commands.Models.Create(i),execute(n).done(function(t){return Maps.add(t),router.navigate(urlFor({map:t}),{trigger:!0})}).fail(function(){return alert("Unable to create map")})):void 0})},namespace("Workflows",function(e){return e.addMap=t})}.call(this),function(){var t;t=function(t,e,n){var i,r,o,s,a,l;return log.info("Add member",t,e,n),r=new $.Deferred,l=new Membership({role:n,user:e}),l.user=new User({username:e}),t.memberships.add(l),a=function(){return Api.getUser(e)},i=function(t){return l.user=t,l.save()},o=function(){return log.info("Member added",e,l),r.resolve(l)},s=function(){return l.user.isNew()?log.error("User not found",e):log.error("Unable to add member",e),l.destroy(),r.reject(l)},a().then(i).then(o,s),r.promise()},namespace("Workflows",function(e){return e.addMember=t})}.call(this),function(){var t;t=function(){return prompt("Perspective Name",function(t,e){var n,i;return e?(i=new Perspective({name:e}),n=new Commands.Models.Create(i),execute(n).done(function(t){return Perspectives.add(t),router.navigate(urlFor({perspective:t}),{trigger:!0}),sidebar.push(new Views.Perspectives.Show({model:t}))}).fail(function(){return alert("Unable to add perspective")})):void 0})},namespace("Workflows",function(e){return e.addPerspective=t})}.call(this),function(){var t;t=function(t){var e,n;return e=t.map||currentMap,n=t.position,prompt("Element Label").then(function(t){var i,r;return i={attributes:{label:t}},r={pinned:!0,position:n},execute(new Commands.Elements.CreateAndPlace(e,i,r)).done(function(t,e){return getMap().select(e)})})},namespace("Workflows",function(e){return e.createElementAtPosition=t})}.call(this),function(){var t;t=function(t,e,n){var i,r,o,s,a;return null==n&&(n={}),r=new $.Deferred,i={type:"embed",map:t.id,perspective:null!=e?e.id:void 0},n.includeSelection&&(i.selection=getMap().getSelectionPermalink()),n.includeOverview&&(i.overview=!0),n.preserveScene&&(i.scale=null!=(s=t.scene)?s.scale:void 0,i.translation=null!=(a=t.scene)?a.translation.toJSON():void 0),o=new Token(i),o.account=currentAccount,o.save().done(function(){return currentAccount.tokens.add(o),r.resolve(o)}).fail(function(){return r.reject()}),r.promise()},namespace("Workflows",function(e){return e.createEmbedToken=t})}.call(this),function(){var t;t=function(t){return t.destroy().done(function(){return redirect("/dashboard")}).fail(function(){return alert("Unable to delete account")})},namespace("Workflows",function(e){return e.deleteAccount=t})}.call(this),function(){var t;t=function(t){return confirm("Map deletions cannot be undone.  Are you sure you want to delete this map?")?execute(new Commands.Maps.Destroy(t)).fail(function(){return alert("Unable to delete map")}):void 0},namespace("Workflows",function(e){return e.deleteMap=t})}.call(this),function(){var t;t=function(t){var e,n,i,r;return confirm("Are you sure you want to delete this perspective?")?(e=new Commands.Models.Destroy(t),r=t===currentPerspective,n=function(){var e;
return r&&(e=urlFor({perspective:null}),router.navigate(e,{trigger:!0})),t},i=function(){return alert("Unable to delete perspective")},execute(e).then(n,i)):void 0},namespace("Workflows",function(e){return e.deletePerspective=t})}.call(this),function(){var t;t=function(t){var e;return e=""+t.get("name")+" (copy)",prompt("Map Name",e).then(function(e){var n;return n=new Commands.Maps.Duplicate(t,e),execute(n).done(function(t){var e;return e=urlFor({map:t}),router.navigate(e,{trigger:!0})}).fail(function(){return alert("Unable to duplicate map")})})},namespace("Workflows",function(e){return e.duplicateMap=t})}.call(this),function(){var t;t=function(t){var e;return e=""+t.get("name")+" (copy)",prompt("Perspective Name",e).then(function(e){var n,i,r;return n=new Commands.Perspectives.Duplicate(t,e),i=function(t){var e;return e=urlFor({perspective:t}),router.navigate(e,{trigger:!0}),sidebar.push(new Views.Perspectives.Show({model:t})),t},r=function(){return alert("Unable to copy perspective")},execute(n).then(i,r)})},namespace("Workflows",function(e){return e.duplicatePerspective=t})}.call(this),function(){var t;t=function(t,e){var n;return n=new Views.Decorations.Wizard({model:t}),n.open(function(t,i){var r;return r=new Commands.Lenses.Update(t,i),execute(r).done(function(){return"function"==typeof e&&e(),n.close(),map.refresh()}).fail(function(){return alert("Unable to update perspective")})})},namespace("Workflows",function(e){return e.editLens=t})}.call(this),function(){var t;t=function(t){return null==t&&(t=currentPerspective),sidebar.show("edit-perspective")},namespace("Workflows",function(e){return e.editPerspective=t})}.call(this),function(){var t;t=function(){var t;return t=new Views.Modals.Loader,t.show(),loadComponent("embeds").then(function(){return EmbedsApp.initialize(),t.hide()})},namespace("Workflows",function(e){return e.embed=t})}.call(this),function(){var t;t=function(t){var e;return e=new Commands.Maps.MakeDefault(t),execute(e).fail(function(){return alert("Unable to save settings. Please try again.")})},namespace("Workflows",function(e){return e.makeDefaultMap=t})}.call(this),function(){var t;t=function(t,e){var n;return null==e&&(e=Settings),n=new Commands.Models.Update(e,"default_perspective_id",null!=t?t.id:void 0),e===Settings&&(n.summary="changed the default account perspective"),execute(n).fail(function(){return alert("Unable to update the default perspective. Please try again.")})},namespace("Workflows",function(e){return e.makeDefaultPerspective=t})}.call(this),function(){var t;t=function(t){var e;return e=new Commands.Maps.MakeDefaultView(t),execute(e).fail(function(){return alert("Unable to update map. Please try again.")})},namespace("Workflows",function(e){return e.makeDefaultView=t})}.call(this),function(){var t;t=function(){return sidebar.push(new Views.Attributes.Index)},namespace("Workflows",function(e){return e.manageAttributes=t})}.call(this),function(){var t;t=function(){var t;return t=new Views.Modals.Loader,t.show(),loadComponent("members").then(function(){return MembersApp.initialize(currentAccount),t.hide()})},namespace("Workflows",function(e){return e.manageMembers=t})}.call(this),function(){var t,e;e=function(e,n){var i,r;return r=new $.Deferred,i=new Commands.Models.Update(e,{name:n}),i.summary="renamed account to "+n,i.execute().done(function(){return t(e),r.resolve(e)}).fail(function(){return alert("Unable to rename account"),r.reject()}),r.promise()},t=function(t){return t.fetch().then(function(){var e;return e=t.urlFor(),window.redirect(e)})},namespace("Workflows",function(t){return t.renameAccount=e})}.call(this),function(){this.SelectorBuilder={Views:{},template:function(t){return template("main/javascripts/components/selector_builder/templates/"+t)}}}.call(this),function(){var t,e,n,i,r={}.hasOwnProperty,o=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};t=function(t){function e(){return n=e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.toSelector=function(){switch(this.get("attribute")){case"id":return this.toIDSelector();default:return this.toAttributeSelector()}},e.prototype.toIDSelector=function(){return"#"+this.get("value")},e.prototype.toAttributeSelector=function(){var t,e;return t=_.pick(this.attributes,"attribute","operator","value"),null==(e=t.value)&&(t.value=""),Selector.prepare(this.attributeSelectorTemplate(),t)},e.prototype.attributeSelectorTemplate=function(){var t,e,n;return n=this.attributes,t=n.attribute,e=n.operator,t?"!"===e?'[!"{{attribute}}"]':e?'["{{attribute}}"{{operator}}"{{value}}"]':'["{{attribute}}"]':""},e}(Backbone.Model),e=function(e){function n(){return i=n.__super__.constructor.apply(this,arguments)}return o(n,e),n.prototype.model=t,n}(Backbone.Collection),SelectorBuilder.Condition=t,SelectorBuilder.ConditionCollection=e}.call(this),function(){var t,e,n,i,r={}.hasOwnProperty,o=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};t=function(t){function e(){return n=e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.initialize=function(){return this.conditions=new SelectorBuilder.ConditionCollection},e.prototype.toSelector=function(t){var e;return e=this.conditions.map(function(t){return t.toSelector()}).join(""),(null!=t?t.scope:void 0)&&(e=""+t.scope+e),e},e}(Backbone.Model),e=function(e){function n(){return i=n.__super__.constructor.apply(this,arguments)}return o(n,e),n.prototype.model=t,n}(Backbone.Collection),SelectorBuilder.Group=t,SelectorBuilder.GroupCollection=e}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.initialize=function(){return this.groups=new SelectorBuilder.GroupCollection,this.prompts=SelectorBuilder.getPrompts(),this.get("selector")&&this.parse(),this.groups.isEmpty()?this.blankslate():void 0},n.prototype.toSelector=function(){return this.groups.chain().invoke("toSelector",{scope:this.get("scope")}).compact().value().join(", ")},n.prototype.update=function(){return this.set("selector",this.toSelector())},n.prototype.addGroup=function(){var t;return t=new SelectorBuilder.Group,t.conditions.add({}),this.groups.add(t)},n.prototype.select=function(t){var e,n,i,r,o,s;e=new $.Deferred;try{r=Selector.select(t),i=r.breakdown(),i.empty=i.elements.length===(s=i.connections.length)&&s===(o=i.loops.length)&&0===o,e.resolve(i)}catch(a){n=a,e.reject(n)}return e.promise()},n.prototype.parse=function(){var t,e,n,i,r,o,s,a,l,u;if(i=[],r=SelectorBuilder.parse(this.get("selector")),this.set("error",r.error),!r.error){for(u=r.conditions,o=0,a=u.length;a>o;o++){for(e=u[o],n=new SelectorBuilder.Group,s=0,l=e.length;l>s;s++)t=e[s],n.conditions.add(t);i.push(n)}return this.groups.reset(i)}},n.prototype.blankslate=function(){return this.addGroup()},n}(Backbone.Model),SelectorBuilder.Model=t}.call(this),function(){SelectorBuilder.build=function(t){var e;return e=new SelectorBuilder.ModalView({selector:t}),e.render(),e.getPromise()}}.call(this),function(){SelectorBuilder.parse=function(t){var e,n,i,r,o,s,a,l,u,c,h,p;r={};try{o=SelectorParser.parse(t)}catch(f){return e=f,{error:!0,selector:t}}if(n=function(t){var e,i,r,o;if(t instanceof AttributeSelector)return t.pick("attribute","operator","value");if(t instanceof IDSelector)return{attribute:"id",operator:"=",value:t.get("id")};for(r=t.get("selectors"),o=[],e=0,i=r.length;i>e;e++)t=r[e],(t instanceof IDSelector||t instanceof AttributeSelector)&&o.push(n(t));return o},l=[],o instanceof GenericSelector);else if(o instanceof IDSelector||o instanceof AttributeSelector)i=[n(o)],l.push(i);else if(o instanceof CompoundSelector)switch(a=o.get("selectors"),o.get("method")){case"union":for(u=0,h=a.length;h>u;u++)s=a[u],s instanceof GenericSelector||(s instanceof IDSelector||s instanceof AttributeSelector?(i=[n(s)],l.push(i)):s instanceof CompoundSelector&&"intersection"===s.get("method")?(i=n(s),l.push(i)):r.error=!0);break;case"intersection":for(i=[],c=0,p=a.length;p>c;c++)s=a[c],s instanceof GenericSelector||(s instanceof IDSelector||s instanceof AttributeSelector?i.push(n(s)):r.error=!0);l.push(i)}else r.error=!0;return r.conditions=l,r}}.call(this),function(){SelectorBuilder.getPrompts=function(){var t;return t=Attributes.map(function(t){return SelectorBuilder.getPromptFor(t)}),Attributes.get("id")||t.push({attribute:"id",label:"ID"}),_.sortBy(t,"label")},SelectorBuilder.getPromptFor=function(t){var e;return e={attribute:t.key(),label:t.label()},e.operators=[["=","is"],["!=","isn't"],["*=","contains"],["<","is less than"],[">","is greater than"],["","has any value"],["!","is unknown"]],e.choices=function(){return t.choices()},e}}.call(this),function(){this.JST||(this.JST={}),this.JST["main/javascripts/components/selector_builder/templates/builder"]=function(t){t||(t={});var e,n=[],i=t.safe,r=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<ul class="nav nav-tabs nav-sleek">\n  <li class="active"><a class="build-tab" href="#selectorBuilderForm" data-toggle="tab">Build</a></li>\n  <li><a class="preview-tab" href="#selectorBuilderPreview" data-toggle="tab">Preview</a></li>\n</ul>\n \n<div class="tab-content">\n  <div class="tab-pane active" id="selectorBuilderForm"></div>\n  <div class="tab-pane" id="selectorBuilderPreview"></div>\n</div>\n')}).call(this)}.call(t),t.safe=i,t.escape=r,n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["main/javascripts/components/selector_builder/templates/condition"]=function(t){t||(t={});var e,n=[],i=t.safe,r=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<div class="and">and</div>\n\n<div class="property">\n  <select name="property"></select>\n</div>\n\n<div class="operator">\n  <select name="operator"></select>\n</div>\n\n<div class="value">\n  <input type="text" name="value" autocomplete="off" />\n</div>\n\n<div class="actions">\n  <button class="remove btn btn-flat"><i class="icon-ban-circle"></i></button>\n</div>\n')}).call(this)}.call(t),t.safe=i,t.escape=r,n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["main/javascripts/components/selector_builder/templates/form"]=function(t){t||(t={});var e,n=[],i=t.safe,r=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<div class="alert" style="display:none">\n  <strong>Warning</strong> The current selector uses advanced selectors not supported by the builder.\n  We suggest editing the selector by hand instead.\n</div>\n\n<div class="prompts"></div>\n')}).call(this)}.call(t),t.safe=i,t.escape=r,n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["main/javascripts/components/selector_builder/templates/group"]=function(t){t||(t={});var e,n=[],i=t.safe,r=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<!--\n  To keep things simple we render a divider at the top of each intersection\n  and just hide the first one using css.\n-->\n<div class="divider"><div class="divider-label or">or</div></div>\n\n<div class="conditions"></div>\n\n<div class="extend">\n  <button class="new-condition btn-flat"><i class="icon-plus-sign-alt"></i> AND</button>\n  <button class="new-group btn-flat"><i class="icon-plus-sign-alt"></i> OR</button>\n</div>\n')}).call(this)}.call(t),t.safe=i,t.escape=r,n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["main/javascripts/components/selector_builder/templates/modal"]=function(t){t||(t={});var e,n=[],i=t.safe,r=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<div class="modal" tabindex="-1" role="dialog">\n  <div class="modal-body"></div>\n\n  <div class="modal-footer">\n    <button class="cancel btn">Cancel</button>\n    <button class="done btn btn-primary">Done</button>\n  </div>\n</div>\n')}).call(this)}.call(t),t.safe=i,t.escape=r,n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["main/javascripts/components/selector_builder/templates/preview"]=function(t){t||(t={});var e,n=[],i=t.safe,r=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<input type="text" name="selector" />\n\n<div class="matches">\n  <div class="status">\n    <i class="icon-spinner icon-spin icon-large"></i>\n  </div>\n\n  <p class="result"></p>\n</div>\n')}).call(this)}.call(t),t.safe=i,t.escape=r,n.join("")}}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.className="selector-builder",n.prototype.template=SelectorBuilder.template("builder"),n.prototype.events={"show [data-toggle=tab]":"onTab"},n.prototype.initialize=function(t){return this.dfd=new $.Deferred,this.scope=t.scope,this.selector=this.originalSelector=t.selector,this.model=new SelectorBuilder.Model({scope:this.scope,selector:this.selector}),this.form=new SelectorBuilder.Views.Form({model:this.model}),this.preview=new SelectorBuilder.Views.Preview({model:this.model})},n.prototype.render=function(){return this.$el.html(this.template()),this.$el.find("#selectorBuilderForm").html(this.form.render().el),this.$el.find("#selectorBuilderPreview").html(this.preview.render().el),this},n.prototype.getSelector=function(){return this.model.update(),this.model.toSelector()},n.prototype.getPromise=function(){return this.dfd.promise()},n.prototype.onTab=function(t){return $(t.target).is(".preview-tab")?(this.model.update(),this.preview.refresh()):void 0},n.prototype.done=function(){return this.dfd.resolve(this.model.toSelector())},n.prototype.cancel=function(){return this.dfd.reject(this.originalSelector)},n}(Backbone.View),SelectorBuilder.View=t}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.className="condition",n.prototype.template=SelectorBuilder.template("condition"),n.prototype.events={change:"onChange","focus [name=value]":"updateAutocomplete","click .remove":"destroy"},n.prototype.initialize=function(){var t;return t=this.model,this.condition=t.condition,this.prompts=t.prompts,t},n.prototype.render=function(){return this.$el.html(this.template()),this.$property=this.$el.find("[name=property]"),this.$operator=this.$el.find("[name=operator]"),this.$value=this.$el.find("[name=value]"),this.renderProperties(),this.renderOperators(),this.renderValue(),this},n.prototype.onChange=function(t){var e;return e=$(t.target),this.updateCondition(),e.is(this.$operator)&&this.$value.prop("disabled",""===this.condition.get("operator")||"!"===this.condition.get("operator")),e.is(this.$value)?void 0:this.updateAutocomplete()},n.prototype.updateAutocomplete=function(){var t,e=this;return t=_.find(this.prompts,function(t){return t.attribute===e.condition.get("attribute")}),this.$value.typeahead({source:t.choices})},n.prototype.updateCondition=function(){var t;return t={attribute:this.$property.val(),operator:this.$operator.val(),value:this.$value.val()},this.condition.set(t)},n.prototype.renderProperties=function(){var t,e,n,i,r,o,s;for(t=this.addOption(this.$property,{label:""}),o=this.prompts,s=[],i=0,r=o.length;r>i;i++)n=o[i],e={value:n.attribute,label:n.label,selected:n.attribute===this.condition.get("attribute")},s.push(t=this.addOption(this.$property,e));return s},n.prototype.renderOperators=function(){var t,e,n,i,r,o,s,a;for(n=this.prompts[0].operators,this.$operator.empty(),a=[],r=0,o=n.length;o>r;r++)s=n[r],e=s[0],t=s[1],i={value:e,label:t,selected:e===this.condition.get("operator")},a.push(this.addOption(this.$operator,i));return a},n.prototype.renderValue=function(){return this.$value.val(this.condition.get("value"))},n.prototype.addOption=function(t,e){return $("<option />").val(e.value).text(e.label).prop("selected",e.selected).appendTo(t)},n.prototype.destroy=function(){return this.condition.destroy(),this.remove()},n}(Backbone.View),SelectorBuilder.Views.ConditionView=t}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.className="selector-builder-form",n.prototype.template=SelectorBuilder.template("form"),n.prototype.events={"click .new-group":"addGroup"},n.prototype.initialize=function(){return this.listenTo(this.model,"change:error",this.refresh),this.listenTo(this.model.groups,"add",this.renderGroup),this.listenTo(this.model.groups,"reset",this.render)},n.prototype.render=function(){var t,e,n,i;for(this.$el.html(this.template()),this.$prompts=this.$el.find(".prompts"),i=this.model.groups.models,e=0,n=i.length;n>e;e++)t=i[e],this.renderGroup(t);return this},n.prototype.renderGroup=function(t){var e;return e=new SelectorBuilder.Views.GroupView({model:{group:t,prompts:this.model.prompts}}),this.$prompts.append(e.render().el)},n.prototype.addGroup=function(){return this.model.addGroup()},n.prototype.refresh=function(){return this.$el.toggleClass("error",this.model.get("error"))},n}(Backbone.View),SelectorBuilder.Views.Form=t}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.className="group",n.prototype.template=SelectorBuilder.template("group"),n.prototype.events={"click .new-condition":"addCondition"},n.prototype.initialize=function(){var t;return t=this.model,this.group=t.group,this.prompts=t.prompts,this.conditions=this.group.conditions,this.listenTo(this.conditions,"add",this.renderCondition),this.listenTo(this.conditions,"remove",this.destroyIfEmpty)},n.prototype.render=function(){var t,e,n,i;for(this.$el.html(this.template()),this.$conditions=this.$el.find(".conditions"),i=this.conditions.models,e=0,n=i.length;n>e;e++)t=i[e],this.renderCondition(t);return this},n.prototype.renderCondition=function(t){var e;return e=new SelectorBuilder.Views.ConditionView({model:{condition:t,prompts:this.prompts}}),this.$conditions.append(e.render().el)},n.prototype.addCondition=function(){return this.conditions.add({attribute:"",operator:"="})},n.prototype.destroyIfEmpty=function(){return 0===this.conditions.length?(this.group.destroy(),this.remove()):void 0},n}(Backbone.View),SelectorBuilder.Views.GroupView=t}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.template=SelectorBuilder.template("modal"),n.prototype.events={"click .cancel":"cancel","click .done":"done",hidden:"remove"},n.prototype.initialize=function(){return this.builder=new SelectorBuilder.View(this.options)},n.prototype.render=function(){return this.$el.html(this.template()),this.$el.find(".modal-body").html(this.builder.render().el),this.$el.appendTo("body"),this.show()},n.prototype.getPromise=function(){return this.builder.getPromise()},n.prototype.cancel=function(){return this.builder.cancel(),this.hide()},n.prototype.done=function(){return this.builder.done(),this.hide()},n.prototype.show=function(){return this.$el.modal("show")},n.prototype.hide=function(){return this.$el.modal("hide")},n}(Backbone.View),SelectorBuilder.ModalView=t}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.className="selector-builder-preview",n.prototype.template=SelectorBuilder.template("preview"),n.prototype.render=function(){return this.$el.html(this.template()),this.$selector=this.$el.find("[name=selector]"),this},n.prototype.refresh=function(){var t=this;return this.$selector.val(this.model.get("selector")),this.$el.addClass("pending"),this.refreshMatchCounts().always(function(){return t.$el.removeClass("pending")})},n.prototype.refreshMatchCounts=function(){var t=this;return this.model.select(this.model.get("selector")).done(function(e){var n,i,r,o,s,a,l;if(e.empty)r="No matches found";else{for(o=[],l=["elements","connections","loops"],s=0,a=l.length;a>s;s++)n=l[s],i=e[n].length,0!==i&&o.push('<span class="count">'+i+'</span> <span class="collection">'+n+"</span>");r="Matched "+o.toSentence()}return t.$el.find(".matches .result").html(r)})},n}(Backbone.View),SelectorBuilder.Views.Preview=t}.call(this),function(){var t;t=jQuery,t.fn.selectorInput=function(e){return null==e&&(e={}),e=_.defaults(e,{explicit:!1}),this.each(function(){var e;return e=t(this),e.addClass("selector-input")})}}.call(this),function(){}.call(this),function(){}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){this.onSubmit=e(this.onSubmit,this),this.onCancel=e(this.onCancel,this),this.submit=e(this.submit,this),this.cancel=e(this.cancel,this),this.focus=e(this.focus,this),this.close=e(this.close,this);var t=this;n.__super__.constructor.apply(this,arguments),this.$el.on("shown",function(){return t.focus()}).on("hidden",function(){return t.remove()}).on("click",".cancel",function(){return t.cancel()}).on("click",".submit",function(){return t.submit()}).on("submit",function(e){return e.preventDefault(),t.submit()})}return i(n,t),n.prototype.modalTemplate=template("main::modals/base"),n.prototype.cancelText="Cancel",n.prototype.submitText="Submit",n.prototype.render=function(t,e){var n,i;return"function"==typeof this.beforeRender&&this.beforeRender.apply(this,arguments),this.$el.addClass("modal").html(this.modalTemplate()),null==t&&(t=this.title),null==e&&(e=_.isFunction(this.template)?this.template(this.context||this.model):this.template),this.className&&this.$el.addClass(this.className),this.$el.find(".modal-header .title").html(t),this.$el.find(".modal-body").html(e),n=this.$el.find(".cancel"),i=this.$el.find(".submit"),this.cancelText?n.html(this.cancelText):n.remove(),this.submitText?i.html(this.submitText):i.remove(),"function"==typeof this.afterRender?this.afterRender.apply(this,arguments):void 0},n.prototype.show=function(){return this.render(),this.$el.appendTo("body").modal({backdrop:!0,keyboard:!0,show:!0})},n.prototype.hide=function(){return this.$el.modal("hide")},n.prototype.close=function(){return this.hide()},n.prototype.focus=function(){return this.$el.find(".modal-body :input:first").focus()},n.prototype.cancel=function(){return"function"==typeof this.onCancel&&this.onCancel(event),this.$el.trigger("cancel"),this.close()},n.prototype.submit=function(){return this.onSubmit()},n.prototype.onCancel=function(){},n.prototype.onSubmit=function(){return this.close()},n.prototype.isVisible=function(){return this.$el.is(":visible")},n.prototype.pending=function(t){return null==t&&(t=!0),this.$el.removeClass("errors"),this.$el.toggleClass("pending",t)},n.prototype.resolvedWithErrors=function(t){return this.$el.removeClass("pending"),this.showError(t)},n.prototype.showError=function(t){var e,n,i,r;return this.$el.removeClass("pending"),_.isString(t)?i=t:(i=t.message,r=t.status,n=t.error),e=this.$el.find(".modal-footer .errors"),e.find(".error-message").html(null!=i?i:"Unable to complete request"),e.find(".error-code").html(null!=r?r:""),e.find(".error-status").html(null!=n?n:""),this.$el.addClass("errors")},n.prototype.hideErrors=function(){return this.$el.removeClass("errors")},n.prototype.reset=function(){return this.$el.removeClass("pending errors")},n}(Backbone.View),namespace("Views.Modals",function(e){return e.Base=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.id="deleteAccountModal",n.prototype.className="modal-app",n.prototype.title="Delete Project",n.prototype.template=template("main::accounts/delete"),n.prototype.initialize=function(){return this.context={name:currentAccount.get("name")}},n.prototype.onSubmit=function(){return this.$el.find(".btn").addClass("disabled").val("Deleting project..."),Workflows.deleteAccount(currentAccount)},n}(Views.Modals.Base),namespace("Views.Accounts",function(e){return e.DeleteModal=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.id="renameAccountModal",n.prototype.className="modal-app",n.prototype.title="Rename Project",n.prototype.template=template("main::accounts/rename"),n.prototype.initialize=function(){return this.context={name:currentAccount.get("name")}},n.prototype.onSubmit=function(){var t;return t=this.$el.findByName("name").val().trim(),this.$el.find(".btn").addClass("disabled").val("Renaming project..."),Workflows.renameAccount(currentAccount,t)},n}(Views.Modals.Base),namespace("Views.Accounts",function(e){return e.RenameModal=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.className="accounts-show",n.prototype.template=template("main::accounts/show"),n.prototype.events={"click .manage-members":"manageMembers"},n.prototype.initialize=function(){return this.listenTo(currentAccount,"change",this.render)},n.prototype.render=function(){var t;return t={name:currentAccount.get("name"),summary:marked(currentAccount.getSummary()||"*No summary available*"),owner:{name:currentAccount.owner.get("name"),username:currentAccount.owner.get("username"),image:currentAccount.owner.avatar()}},this.$el.html(this.template(t)),this.$el.find(".manage-members").tooltip({placement:"right"}),this.initializeDescription(),this},n.prototype.initializeDescription=function(){var t,e=this;return t={editor:"markdown",format:function(t){return marked(t)},value:function(){return currentAccount.get("description")},placeholder:'<span class="placeholder">Add project description</span>'},able.to("update","account")||(t.mode="readonly",t.placeholder='<span class="placeholder">No description</span>'),this.$description=this.$el.find(".account-description"),this.$description.editable(t).on("update",function(t,n){var i;return i=new Commands.Models.Update(currentAccount,"description",n),execute(i).fail(function(){return e.$description.editable("edit",{value:n}),alert("Unable to save changes. Please try again.")})})},n.prototype.manageMembers=function(){return Workflows.manageMembers()},n}(Backbone.View),namespace("Views.Accounts",function(e){return e.Show=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.tagName="button",n.prototype.className="conflicts-btn btn btn-flat",n.prototype.attributes={title:"Conflicts"},n.prototype.template='<span class="badge badge-important">C</span>',n.prototype.events={click:"open"},n.prototype.initialize=function(){return this.listenTo(Conflicts,"add remove",this.update)},n.prototype.render=function(){return this.$el.html(this.template),Conflicts.length||this.$el.hide(),this},n.prototype.open=function(){return Conflicts.show()},n.prototype.update=function(){return Conflicts.length?this.$el.show("fade"):this.$el.hide("fade")},n}(Backbone.View),namespace("Views.Actionbar",function(e){return e.Conflicts=t})}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){this.closeOnOutsideClick=e(this.closeOnOutsideClick,this);var t=this;n.__super__.constructor.apply(this,arguments),this.$el.on("click",".close",function(){return t.close()})}return i(n,t),n.prototype.popoverTemplate='<div class="arrow"></div>\n\n<h3 class="popover-title">\n  <a href="#" class="close">&times;</a>\n</h3>\n\n<div class="popover-content"></div>',n.prototype.open=function(t){return this.render(),this.$el.addClass("popover-simple").appendTo("body").css("display","block").position({my:"center bottom",at:"center top-15",of:t}),this},n.prototype.close=function(){return $(document).off("click",this.closeOnOutsideClick),this.remove()},n.prototype.render=function(){var t=this;return this.$el.addClass("popover top").html(this.popoverTemplate),this.$el.find(".popover-title").append(this.title),this.$el.find(".popover-content").html(this.template),"function"==typeof this.afterRender&&this.afterRender(),_.defer(function(){return $(document).on("click",t.closeOnOutsideClick)}),this},n.prototype.closeOnOutsideClick=function(t){return $(t.target).closest(".popover").is(this.el)?void 0:this.close()},n}(Backbone.View),namespace("Views.Actionbar",function(e){return e.Popover=t})}.call(this),function(){var t,e,n,i,r={}.hasOwnProperty,o=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};t=function(t){function i(){return n=i.__super__.constructor.apply(this,arguments)}return o(i,t),i.prototype.tagName="button",i.prototype.className="edit-perspective-btn btn btn-flat",i.prototype.attributes={title:"Decorate","data-ability":"manage-perspectives"},i.prototype.template='<i class="icon-perspective"></i>',i.prototype.events={click:"onClick"},i.prototype.render=function(){return this.$el.html(this.template),this
},i.prototype.onClick=function(){var t;return this.$el.tooltip("hide"),t=new e,t.open(this.$el)},i}(Backbone.View),e=function(t){function e(){return i=e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.title="Decorate",e.prototype.className="decorate-menu",e.prototype.template=template("main::actionbar/decorate_menu"),e.prototype.events={"click [data-action=decorate]":"decorate","click [data-action=edit]":"edit"},e.prototype.initialize=function(){return this.selection=map.getSelection().toEntitySelection()},e.prototype.decorate=function(){var t;return t=$(event.target).attr("data-collection"),Workflows.addLens({collection:t}),this.close()},e.prototype.edit=function(){var t;switch(t=$(event.target).attr("data-target")){case"perspective":Workflows.editPerspective()}return this.close()},e}(Views.Actionbar.Popover),namespace("Views.Actionbar",function(e){return e.Decorate=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.tagName="button",n.prototype.className="delay-btn btn btn-flat",n.prototype.attributes={title:"Delay"},n.prototype.template='<i class="icon-delay"></i>',n.prototype.events={click:"toggle"},n.prototype.initialize=function(){return this.selection=map.getSelection(),this.listenTo(this.selection,"all",this.update)},n.prototype.render=function(){return this.$el.html(this.template),this.update(),this},n.prototype.toggle=function(){var t;return this.$el.toggleClass("active"),t=this.$el.is(".active"),execute(new Commands.Connections.Update(this.connections,"delayed",t)).fail(function(){return alert("Unable to save changes")})},n.prototype.update=function(){return this.connections=this.selection.getConnections(),this.$el.toggleClass("disabled",0===this.connections.length).toggleClass("active",this.connections.length>0&&_.all(this.connections,function(t){return t.get("delayed")}))},n}(Backbone.View),namespace("Views.Actionbar",function(e){return e.Delay=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.tagName="button",n.prototype.className="delete-btn btn btn-flat",n.prototype.attributes={title:"Delete"},n.prototype.template='<i class="icon-delete"></i>',n.prototype.events={click:"delete"},n.prototype.initialize=function(){return this.selection=map.getSelection(),this.listenTo(this.selection,"all",this.update)},n.prototype.render=function(){return this.$el.html(this.template),this.update(),this},n.prototype["delete"]=function(){return execute(new Commands.Components.Destroy(this.selection))},n.prototype.update=function(){return this.$el.toggleClass("disabled",0===this.selection.length)},n}(Backbone.View),namespace("Views.Actionbar",function(e){return e.Delete=t})}.call(this),function(){var t,e,n,i,r={}.hasOwnProperty,o=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};t=function(t){function i(){return n=i.__super__.constructor.apply(this,arguments)}return o(i,t),i.prototype.tagName="button",i.prototype.className="direction-btn btn btn-flat",i.prototype.attributes={title:"Direction"},i.prototype.template='<i class="icon-direction"></i>',i.prototype.events={click:"onClick"},i.prototype.initialize=function(){return this.selection=map.getSelection(),this.listenTo(this.selection,"all",this.refresh)},i.prototype.render=function(){return this.$el.html(this.template),this.refresh(),this},i.prototype.refresh=function(){return this.connections=this.selection.getConnections(),this.$el.toggleClass("disabled",0===this.connections.length)},i.prototype.onClick=function(){var t;return this.$el.tooltip("hide"),this.connections.length>0?(t=new e({model:this.connections}),t.open(this.$el)):alert("Please select a connection")},i}(Backbone.View),namespace("Views.Actionbar",function(e){return e.Direction=t}),e=function(t){function e(){return i=e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.title="Direction",e.prototype.className="direction-menu",e.prototype.template='<button class="btn btn-flat" data-direction="undirected">Undirected</button>\n<button class="btn btn-flat" data-direction="directed">Directed</button>\n<button class="btn btn-flat" data-direction="mutual">Mutual</button>\n\n<hr />\n\n<button class="reverse btn btn-flat">Reverse Direction</button>',e.prototype.events={"click .reverse":"onReverse","click [data-direction]":"onDirection"},e.prototype.initialize=function(){return this.connections=this.model},e.prototype.onDirection=function(t){var e;return e=$(t.target).attr("data-direction"),execute(new Commands.Connections.Update(this.connections,"direction",e)).fail(function(){return alert("Unable to save changes")})},e.prototype.onReverse=function(){var t;return t=_.select(this.connections,function(t){return"directed"===t.get("direction")}),0!==t.length?execute(new Commands.Connections.Reverse(t)).fail(function(){return alert("Unable to reverse direction")}):void 0},e}(Views.Actionbar.Popover)}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.tagName="button",n.prototype.className="filter-btn btn btn-flat",n.prototype.attributes={title:"Filter"},n.prototype.template='<i class="icon-filter"></i>',n.prototype.events={click:"onClick"},n.prototype.initialize=function(){return this.listenTo(Session,"change:map",this.reset)},n.prototype.render=function(){return this.$el.html(this.template),this.reset(),this},n.prototype.reset=function(){return this.filter&&(this.stopListening(this.filter),this.filter=null),currentScene&&(this.filter=currentScene.filter,this.listenTo(this.filter,"change:filters",this.refresh)),this.refresh()},n.prototype.refresh=function(){var t,e;return this.filter?(e=this.filter.get("filters"),t=Boolean(e.elements||e.connections||e.loops)):t=!1,this.$el.toggleClass("active",t)},n.prototype.onClick=function(){return Views.Filters.Index.open()},n}(Backbone.View),namespace("Views.Actionbar",function(e){return e.Filter=t})}.call(this),function(){var t,e,n,i,r={}.hasOwnProperty,o=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};t=function(t){function i(){return n=i.__super__.constructor.apply(this,arguments)}return o(i,t),i.prototype.tagName="button",i.prototype.className="focus-btn btn btn-flat",i.prototype.attributes={title:"Focus"},i.prototype.template='<i class="icon-focus"></i>',i.prototype.events={click:"onClick"},i.prototype.initialize=function(){return this.selection=map.getSelection(),this.listenTo(Session,"change:map",this.reset),this.listenTo(this.selection,"add remove reset",this.refresh)},i.prototype.render=function(){return this.$el.html(this.template),this.reset(),this},i.prototype.reset=function(){return this.focus&&(this.stopListening(this.focus),this.focus=null),currentScene&&(this.focus=currentScene.focus,this.listenTo(this.focus,"change",this.refresh)),this.refresh()},i.prototype.refresh=function(){var t,e;return this.focus?(t=this.focus.isActive(),e=t||this.selection.length>0):(t=!1,e=!1),this.$el.toggleClass("active",t),this.$el.toggleClass("disabled",!e)},i.prototype.onClick=function(){var t;return this.$el.tooltip("hide"),this.$el.is(".disabled")?alert("Please select an object to focus on"):(t=new e({model:this.focus}),t.open(this.$el))},i}(Backbone.View),namespace("Views.Actionbar",function(e){return e.Focus=t}),e=function(t){function e(){return i=e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.title="Focus",e.prototype.className="focus-menu",e.prototype.template='<ul class="nav nav-tabs nav-stacked">\n  <li class="degree" data-degree="0"><a href="#">Selected</a></li>\n  <li class="degree" data-degree="1"><a href="#">Direct <aside>1 degree</aside></a></li>\n  <li class="degree" data-degree="2"><a href="#">Indirect <aside>2 degrees</aside></a></li>\n  <li class="degree" data-degree="3"><a href="#">Extended <aside>3 degrees</aside></a></li>\n  <li class="degree custom"><a href="#">Distant <aside><span class="degree"></span> degrees</aside></a></li>\n  <li class="reset"><a href="#">Clear</a></li>\n</ul>',e.prototype.events={"click .degree":"setFocus","click .reset":"reset"},e.prototype.initialize=function(){return this.focus=this.model},e.prototype.afterRender=function(){var t,e;return this.focus.isActive()?(e=this.focus.get("degree"),t=this.$el.find(".custom"),3>=e?t.hide():(t.attr("data-degree",e),t.find(".degree").text(e)),this.$el.find(".degree[data-degree="+e+"]").addClass("active")):this.$el.find(".custom, .reset").hide()},e.prototype.setFocus=function(t){var e;return this.$el.find(".degree").removeClass("active"),e=$(t.currentTarget),e.addClass("active"),this.focus.refresh({degree:Number(e.attr("data-degree"))}),this.close()},e.prototype.reset=function(){return this.focus.reset(),this.close()},e}(Views.Actionbar.Popover)}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.tagName="button",n.prototype.className="help-btn btn btn-flat",n.prototype.attributes={title:"Help"},n.prototype.template='<i class="icon-question"></i>',n.prototype.events={click:"open"},n.prototype.render=function(){return this.$el.html(this.template),this},n.prototype.open=function(){var t;return null==(t=this.modal)&&(this.modal=this.initializeModal()),this.modal.show()},n.prototype.initializeModal=function(){var t;return t=new Views.Help.Modal,t.render(),t},n}(Backbone.View),namespace("Views.Actionbar",function(e){return e.Help=t})}.call(this),function(){var t,e,n,i,r={}.hasOwnProperty,o=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};t=function(t){function i(){return n=i.__super__.constructor.apply(this,arguments)}return o(i,t),i.prototype.tagName="button",i.prototype.className="more-btn btn btn-flat",i.prototype.attributes={title:"More","data-ability":"manage-maps"},i.prototype.template='<i class="icon-more"></i>',i.prototype.events={click:"onClick"},i.prototype.render=function(){return this.$el.html(this.template),this},i.prototype.onClick=function(){var t;return this.$el.tooltip("hide"),t=new e({model:this.focus}),t.open(this.$el)},i}(Backbone.View),namespace("Views.Actionbar",function(e){return e.More=t}),e=function(t){function e(){return i=e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.title="More Actions",e.prototype.className="more-menu",e.prototype.template=template("main::actionbar/more_menu"),e.prototype.events={"click a":"perform"},e.prototype.perform=function(t){var e,n;return e=$(t.currentTarget).attr("data-action"),n=e.camelize(),this[n](),this.close()},e.prototype.makeDefaultMap=function(){return Workflows.makeDefaultMap(currentMap)},e.prototype.makeDefaultAccountPerspective=function(){return Workflows.makeDefaultPerspective(currentPerspective)},e.prototype.makeDefaultView=function(){return Workflows.makeDefaultView(currentMap)},e.prototype.duplicateMap=function(){return Workflows.duplicateMap(currentMap)},e.prototype.deleteMap=function(){return Workflows.deleteMap(currentMap)},e.prototype.makeDefaultMapPerspective=function(){return Workflows.makeDefaultPerspective(currentPerspective,currentMap)},e.prototype.editPerspective=function(){return Workflows.editPerspective(currentPerspective)},e.prototype.duplicatePerspective=function(){return Workflows.duplicatePerspective(currentPerspective)},e.prototype.deletePerspective=function(){return Workflows.deletePerspective(currentPerspective)},e}(Views.Actionbar.Popover)}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.tagName="button",n.prototype.className="nav-btn btn btn-flat",n.prototype.attributes={title:"Menu"},n.prototype.template='<i class="icon-th"></i>',n.prototype.events={click:"onClick"},n.prototype.render=function(){return this.$el.html(this.template),this},n.prototype.onClick=function(){return this.$el.tooltip("hide"),Views.Navigation.open()},n}(Backbone.View),namespace("Views.Actionbar",function(e){return e.Nav=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.tagName="button",n.prototype.className="pin-btn btn btn-flat",n.prototype.attributes={title:"Pin"},n.prototype.template='<i class="icon-map-marker"></i>',n.prototype.events={click:"toggle"},n.prototype.initialize=function(){return this.selection=map.getSelection(),this.listenTo(this.selection,"all",this.update)},n.prototype.render=function(){return this.$el.html(this.template),this.update(),this},n.prototype.toggle=function(){var t=this;if(0!==this.nodes.length)return this.pinned=!this.pinned,this.$el.toggleClass("active",this.pinned),execute(new Commands.Nodes.Pin(this.nodes,this.pinned)).fail(function(){return t.$button.toggleClass("active")})},n.prototype.update=function(){return this.nodes=this.selection.nodes(),this.pinned=_.all(this.nodes,function(t){return t.isPinned()}),this.$el.toggleClass("disabled",0===this.nodes.length).toggleClass("active",this.nodes.length>0&&this.pinned)},n}(Backbone.View),namespace("Views.Actionbar",function(e){return e.Pin=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.tagName="button",n.prototype.className="pull-btn btn btn-flat",n.prototype.attributes={title:"Pull Changes"},n.prototype.template='<i class="icon-pull"></i>',n.prototype.events={click:"pull"},n.prototype.render=function(){return this.$el.html(this.template),this.$icon=this.$el.find("i"),this},n.prototype.pull=function(){var t=this;return this.$icon.addClass("pending"),Dispatch.pull().always(function(){return t.$icon.removeClass("pending")})},n}(Backbone.View),namespace("Views.Actionbar",function(e){return e.Pull=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.tagName="button",n.prototype.className="push-btn btn btn-flat",n.prototype.attributes={title:"Push Changes"},n.prototype.template='<i class="icon-push"></i>',n.prototype.events={click:"push"},n.prototype.render=function(){return this.$el.html(this.template),this.$icon=this.$el.find("i"),this},n.prototype.push=function(){var t=this;return this.$icon.addClass("pending"),Dispatch.push().always(function(){return t.$icon.removeClass("pending")})},n}(Backbone.View),namespace("Views.Actionbar",function(e){return e.Push=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.tagName="button",n.prototype.className="push-btn btn btn-flat",n.prototype.attributes={title:"Reset"},n.prototype.template='<i class="icon-ban-circle"></i>',n.prototype.events={click:"reset"},n.prototype.render=function(){return this.$el.html(this.template),this.$icon=this.$el.find("i"),this},n.prototype.reset=function(){var t=this;return this.$icon.addClass("pending"),map.busy(),reset().always(function(){return t.$icon.removeClass("pending"),window.location.reload()})},n}(Backbone.View),namespace("Views.Actionbar",function(e){return e.Reset=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.tagName="button",n.prototype.className="virtualize-btn btn btn-flat",n.prototype.attributes={title:"Cluster"},n.prototype.template='<i class="kicon kicon-cluster"></i>',n.prototype.events={click:"virtualize"},n.prototype.render=function(){return this.$el.html(this.template),this},n.prototype.virtualize=function(){return sidebar.push(new Views.Virtualization.Index)},n}(Backbone.View),namespace("Views.Actionbar",function(e){return e.Virtualize=t})}.call(this),function(){var t,e,n=function(t,e){return function(){return t.apply(e,arguments)}},i={}.hasOwnProperty,r=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};t=function(t){function i(){return this.renderDivider=n(this.renderDivider,this),this.renderAttribute=n(this.renderAttribute,this),this.renderAttributeCollection=n(this.renderAttributeCollection,this),this.renderBlankSlate=n(this.renderBlankSlate,this),this.renderAttributes=n(this.renderAttributes,this),this.prependField=n(this.prependField,this),this.newAttribute=n(this.newAttribute,this),this.remove=n(this.remove,this),this.render=n(this.render,this),e=i.__super__.constructor.apply(this,arguments)}return r(i,t),i.prototype.tagName="ul",i.prototype.className="attributes",i.prototype.initialize=function(t){return this.selection=t.selection,this.listenTo(Attributes,"add",this.prependField)},i.prototype.render=function(){return this.$el.empty(),this.renderAttributes(),this},i.prototype.remove=function(){return this.stopListening(Attributes),this.$el.remove()},i.prototype.newAttribute=function(){var t,e;return this.$el.trigger("new"),t=this.$el.find(".blankslate").hide(),e=$("<li />").editable({mode:"subtle",trigger:"enter"}).on("edit",function(t,e){return e.placeholder("Attribute Name")}).on("update",function(t,n){return n=$.trim(n),n?Attributes.create(n).then(function(){return e.editable("destroy")}).fail(function(){return e.editable("edit",{error:"Field exists"})}):e.editable("cancel")}).on("cancel",function(){return e.editable("destroy"),t.show()}),this.$el.prepend(e),e.editable("edit")},i.prototype.prependField=function(t){return this.renderAttribute(t,{method:"prepend"})},i.prototype.renderAttributes=function(){var t,e,n,i;return n=this.selection.first(),i=_.chain(Attributes.models).reject(function(t){return t.isCore()}).sortBy(function(t){return t.get("label")}).value(),t=i[!1]||[],e=i[!0]||[],0!==t.length+e.length?(able.to("edit","entity")||(e=[]),t.length>0&&(this.renderAttributeCollection(t),e.length>0&&this.renderDivider()),this.renderAttributeCollection(e)):able.to("edit","entity")?this.renderBlankSlate():void 0},i.prototype.renderBlankSlate=function(){var t,e=this;return t=$("<li class='blankslate placeholder placeholder-primary'><a href='#' data-client='true'>Click to create<br /> your first attribute</a></li>").on("click",function(){return _.defer(e.newAttribute)}).appendTo(this.$el)},i.prototype.renderAttributeCollection=function(t){var e,n,i,r;for(r=[],n=0,i=t.length;i>n;n++)e=t[n],r.push(this.renderAttribute(e));return r},i.prototype.renderAttribute=function(t,e){var n,i;return null==e&&(e={}),_.defaults(e,{method:"append"}),i=new Sidebar.Attributes.AttributeView({model:{selection:this.selection,field:t}}),n=$("<li />").append(i.render().el),this.$el[e.method](n)},i.prototype.renderDivider=function(){return this.$el.append("<li class='divider'><span>Additional Attributes</span></li>")},i}(Backbone.View),namespace("SidebarViews",function(e){return e.AttributesView=t})}.call(this),function(){var t,e,n,i,r,o,s={}.hasOwnProperty,a=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},l=function(t,e){return function(){return t.apply(e,arguments)}};t=function(t){function e(){return i=e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.className="attributes-edit sidebar-view",e.prototype.template=template("main::attributes/edit"),e.prototype.events={change:"onChange","click .delete-attribute":"destroy"},e.prototype.initialize=function(){var t;return this.attribute=this.model,this.memento=this.attribute.toMemento(),t=_.map(this.attribute.get("values"),function(t){return{value:t}}),this.values=new Backbone.IndexedCollection(t),this.valuesView=new n({model:this.values}),this.listenTo(this.attribute,"destroy",this.close),this.listenTo(sidebar,"cancel",this.cancel),this.listenTo(sidebar,"save",this.save),this.listenTo(this.values,"all",this.onChange)},e.prototype.render=function(){return this.$el.html(this.template({attribute:this.attribute})),this.$el.replace("values",this.valuesView.render().el),this.$form=this.$el.find("form"),this.$prompt=this.$form.findByName("prompt"),this.initializeHelp(),this.initializeCategories(),this.initializeForm(),this.update(),this},e.prototype.initializeHelp=function(){return this.$el.find("[data-content]").popover({trigger:"hover",placement:"right",container:"body"})},e.prototype.initializeCategories=function(){var t;return t=_.uniq(Attributes.pluck("category")),this.$form.find("[name=category]").typeahead({source:t})},e.prototype.initializeForm=function(){var t,e,n,i,r,o,s,a;for(o=["name","label","category","tooltip","format","limit","prompt"],e=0,i=o.length;i>e;e++)t=o[e],this.$form.findByName(t).val(this.attribute.get(t));for(s=["locked","private"],a=[],n=0,r=s.length;r>n;n++)t=s[n],a.push(this.$form.findByName(t).attr("checked",this.attribute.get(t)));return a},e.prototype.update=function(){return this.$el.toggleClass("prompt-list","list"===this.$prompt.val())},e.prototype.onChange=function(){return this.trigger("dirty",this),this.update()},e.prototype.toJSON=function(){var t,e,n,i,r;for(e=this.$form.serializeJSON(),"none"!==e.limit&&(e.limit=Number(e.limit)),e.values=_.chain(e.values).compact().uniq().value(),r=["locked","private"],n=0,i=r.length;i>n;n++)t=r[n],e[t]="true"===e[t];return e},e.prototype.cancel=function(){return this.memento.restore(),this.trigger("clean",this),this.render()},e.prototype.save=function(){var t,e,n=this;return t=this.toJSON(),e=new Commands.Attributes.Update(this.attribute,t),execute(e).done(function(){return n.memento.update(),n.trigger("clean",n)}).fail(function(){return alert("Unable to save changes")})},e.prototype.destroy=function(){var t;return t=new Commands.Attributes.Destroy(this.attribute),execute(t).fail(function(){return alert("Unable to delete attribute")})},e.prototype.close=function(){return sidebar.pop(this)},e}(Backbone.View),namespace("Views.Attributes",function(e){return e.Edit=t}),n=function(t){function n(){return this.onSort=l(this.onSort,this),r=n.__super__.constructor.apply(this,arguments)}return a(n,t),n.prototype.template='<ul class="values"></ul>\n\n<label class="checkbox">\n  <input type="checkbox" name="locked" value="true">\n  Users must choose from the list above\n</label>\n\n<button class="new-value btn" href="#"><i class="icon-plus"></i> New Value</button>',n.prototype.events={"click .new-value":"addValue"},n.prototype.initialize=function(){return this.values=this.model,0===this.values.length&&this.values.reset([{},{},{}]),this.listenTo(this.values,"add",this.renderValue)},n.prototype.render=function(){return this.$el.html(this.template),this.$list=this.$el.find(".values"),this.$list.sortable({axis:"y",stop:this.onSort}),this.values.each(this.renderValue,this),this},n.prototype.renderValue=function(t){var n;return n=new e({model:t}),this.$list.append(n.render().el)},n.prototype.addValue=function(){return this.values.add({})},n.prototype.onSort=function(){var t;return t=this.$list.find("li").map(function(){return $(this).attr("data-cid")}).get(),this.values.comparator=function(e){return _.indexOf(t,e.cid)},this.values.sort()},n}(Backbone.View),e=function(t){function e(){return o=e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.tagName="li",e.prototype.className="value",e.prototype.template='<i class="handle icon-reorder"></i>\n<input type="text" value="{{value}}" name="values[]" placeholder="Value" />\n<button class="delete btn btn-flat btn-danger"><i class="icon-ban-circle"></i></button>',e.prototype.events={"click .delete":"destroy"},e.prototype.initialize=function(){return this.value=this.model,this.listenTo(this.value,"destroy",this.remove)},e.prototype.render=function(){return this.$el.attr("data-cid",this.cid).html(tim(this.template,{value:this.value.get("value")||""})),this},e.prototype.destroy=function(){return this.value.destroy()},e}(Backbone.View)}.call(this),function(){var t,e,n,i,r={}.hasOwnProperty,o=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};e=function(e){function i(){return n=i.__super__.constructor.apply(this,arguments)}return o(i,e),i.prototype.className="attributes-index sidebar-view",i.prototype.template=template("main::attributes/index"),i.prototype.events={"click .new":"newAttribute"},i.prototype.initialize=function(){return this.listenTo(Attributes,"add",this.renderAttribute),this.listenTo(Attributes,"reset",this.render)},i.prototype.render=function(){var t,e,n,i;for(this.$el.html(this.template()),this.$list=this.$el.find(".attributes"),i=Attributes.models,e=0,n=i.length;n>e;e++)t=i[e],this.renderAttribute(t);return this},i.prototype.renderAttribute=function(e){var n;return n=new t({model:e}),this.$list.append(n.render().el)},i.prototype.newAttribute=function(){return prompt("Attribute Name",function(t,e){return e?execute(new Commands.Attributes.Create({name:e})).done(function(t){return sidebar.push(new Views.Attributes.Edit({model:t}))}).fail(function(){return alert("Unable to create attribute")}):void 0})},i}(Backbone.View),namespace("Views.Attributes",function(t){return t.Index=e}),t=function(t){function e(){return i=e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.tagName="li",e.prototype.className="attribute",e.prototype.template='<a class="attribute" href="#">{{label}} <i class="icon-chevron-right"></i></a>',e.prototype.events={click:"edit"},e.prototype.initialize=function(){return this.attribute=this.model,this.listenTo(this.attribute,"change",this.render),this.listenTo(this.attribute,"destroy",this.remove)},e.prototype.render=function(){return this.$el.html(tim(this.template,{label:this.attribute.label()})),this},e.prototype.edit=function(){return sidebar.push(new Views.Attributes.Edit({model:this.attribute}))},e}(Backbone.View)}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.className="conflicts-editor",n.prototype.template=template("main::conflicts/editor"),n.prototype.events=function(){return{"click .get-started":"getStarted"}},n.prototype.initialize=function(){return this.edits={},this.listenTo(Conflicts,"edit",this.edit),this.listenTo(Conflicts,"remove",this.onRemove)},n.prototype.render=function(){return this.$el.html(this.template),this.$blankslate=this.$el.find(".blankslate"),this.$conflict=this.$el.find(".conflict-container"),this},n.prototype.refresh=function(){return this.view?(this.$blankslate.hide(),this.$conflict.show()):(this.$conflict.hide(),this.$blankslate.show())},n.prototype.getStarted=function(){return Conflicts.first().edit()},n.prototype.edit=function(t){var e,n,i,r;return t!==this.currentConflict?(this.currentConflict=t,null!=(i=this.view)&&i.$el.hide(),this.view=null!=(r=(e=this.edits)[n=t.cid])?r:e[n]=this.renderView(t),this.view.$el.show(),this.refresh()):void 0},n.prototype.renderView=function(t){var e;return e=new Views.Conflicts.Show({model:t}),e.render(),e.$el.hide().appendTo(this.$conflict),e},n.prototype.onRemove=function(t){return t===this.currentConflict?(this.view.remove(),this.view=this.edits[t.cid]=null,this.refresh()):void 0},n}(Backbone.View),namespace("Views.Conflicts",function(e){return e.Editor=t})}.call(this),function(){"use strict";function t(t,e){this.mv=t,this.type=e,this.classes="left"==e?{chunk:"CodeMirror-merge-l-chunk",start:"CodeMirror-merge-l-chunk-start",end:"CodeMirror-merge-l-chunk-end",insert:"CodeMirror-merge-l-inserted",del:"CodeMirror-merge-l-deleted",connect:"CodeMirror-merge-l-connect"}:{chunk:"CodeMirror-merge-r-chunk",start:"CodeMirror-merge-r-chunk-start",end:"CodeMirror-merge-r-chunk-end",insert:"CodeMirror-merge-r-inserted",del:"CodeMirror-merge-r-deleted",connect:"CodeMirror-merge-r-connect"}}function e(t){function e(e){"full"==e&&(t.svg&&y(t.svg),y(t.copyButtons),s(t.edit,o.marked,t.classes),s(t.orig,l.marked,t.classes),o.from=o.to=l.from=l.to=0),t.diffOutOfDate&&(t.diff=p(t.orig.getValue(),t.edit.getValue()),t.diffOutOfDate=!1,CodeMirror.signal(t.edit,"updateDiff",t.diff)),t.showDifferences&&(a(t.edit,t.diff,o,DIFF_INSERT,t.classes),a(t.orig,t.diff,l,DIFF_DELETE,t.classes)),u(t)}function n(t){clearTimeout(r),r=setTimeout(e,1==t?250:100)}function i(){t.diffOutOfDate||(t.diffOutOfDate=!0,o.from=o.to=l.from=l.to=0),n(!0)}var r,o={from:0,to:0,marked:[]},l={from:0,to:0,marked:[]};return t.edit.on("change",i),t.orig.on("change",i),t.edit.on("viewportChange",n),t.orig.on("viewportChange",n),e(),e}function n(t){t.edit.on("scroll",function(){i(t,DIFF_INSERT)&&u(t)}),t.orig.on("scroll",function(){i(t,DIFF_DELETE)&&u(t)})}function i(t,e){if(t.diffOutOfDate)return!1;if(!t.lockScroll)return!0;var n,i,o=+new Date;if(e==DIFF_INSERT?(n=t.edit,i=t.orig):(n=t.orig,i=t.edit),n.state.scrollSetBy==t&&(n.state.scrollSetAt||0)+50>o)return!1;var s,a,l=n.getScrollInfo(),u=.5*l.clientHeight,c=l.top+u,h=n.lineAtHeight(c,"local"),p=g(t.diff,h,e==DIFF_INSERT),f=r(n,e==DIFF_INSERT?p.edit:p.orig),d=r(i,e==DIFF_INSERT?p.orig:p.edit),m=(c-f.top)/(f.bot-f.top),v=d.top-u+m*(d.bot-d.top);if(v>l.top&&(a=l.top/u)<1)v=v*a+l.top*(1-a);else if((s=l.height-l.clientHeight-l.top)<u){var y=i.getScrollInfo(),b=y.height-y.clientHeight-v;b>s&&(a=s/u)<1&&(v=v*a+(y.height-y.clientHeight-s)*(1-a))}return i.scrollTo(l.left,v),i.state.scrollSetAt=o,i.state.scrollSetBy=t,!0}function r(t,e){var n=e.after;return null==n&&(n=t.lastLine()+1),{top:t.heightAtLine(e.before||0,"local"),bot:t.heightAtLine(n,"local")}}function o(t,e,n){t.lockScroll=e,e&&0!=n&&i(t,DIFF_INSERT)&&u(t),t.lockButton.innerHTML=e?"⇛⇚":"⇛&nbsp;&nbsp;⇚"}function s(t,e,n){for(var i=0;i<e.length;++i){var r=e[i];r instanceof CodeMirror.TextMarker?r.clear():(t.removeLineClass(r,"background",n.chunk),t.removeLineClass(r,"background",n.start),t.removeLineClass(r,"background",n.end))}e.length=0}function a(t,e,n,i,r){var o=t.getViewport();t.operation(function(){n.from==n.to||o.from-n.to>20||n.from-o.to>20?(s(t,n.marked,r),l(t,e,i,n.marked,o.from,o.to,r),n.from=o.from,n.to=o.to):(o.from<n.from&&(l(t,e,i,n.marked,o.from,n.from,r),n.from=o.from),o.to>n.to&&(l(t,e,i,n.marked,n.to,o.to,r),n.to=o.to))})}function l(t,e,n,i,r,o,s){function a(e,n){for(var a=Math.max(r,e),l=Math.min(o,n),u=a;l>u;++u){var c=t.addLineClass(u,"background",s.chunk);u==e&&t.addLineClass(c,"background",s.start),u==n-1&&t.addLineClass(c,"background",s.end),i.push(c)
}e==n&&a==n&&l==n&&(a?i.push(t.addLineClass(a-1,"background",s.end)):i.push(t.addLineClass(a,"background",s.start)))}for(var l=C(0,0),u=C(r,0),c=t.clipPos(C(o-1)),h=n==DIFF_DELETE?s.del:s.insert,p=0,f=0;f<e.length;++f){var g=e[f],v=g[0],y=g[1];if(v==DIFF_EQUAL){var b=l.line+(m(e,f)?0:1);_(l,y);var w=l.line+(d(e,f)?1:0);w>b&&(f&&a(p,b),p=w)}else if(v==n){var E=_(l,y,!0),T=S(u,l),M=x(c,E);k(T,M)||i.push(t.markText(T,M,{className:h})),l=E}}p<=l.line&&a(p,l.line+1)}function u(t){if(t.showDifferences){if(t.svg){y(t.svg);var e=t.gap.offsetWidth;b(t.svg,"width",e,"height",t.gap.offsetHeight)}y(t.copyButtons);var n="left"==t.type,i=t.edit.getViewport(),r=t.orig.getViewport(),o=t.edit.getScrollInfo().top,s=t.orig.getScrollInfo().top;f(t.diff,function(a,l,u,c){if(!(u>i.to||c<i.from||a>r.to||l<r.from)){var h=t.orig.heightAtLine(a,"local")-s,p=h;if(t.svg){var f=t.edit.heightAtLine(u,"local")-o;if(n){var d=h;h=f,f=d}var m=t.orig.heightAtLine(l,"local")-s,g=t.edit.heightAtLine(c,"local")-o;if(n){var d=m;m=g,g=d}var y=" C "+e/2+" "+f+" "+e/2+" "+h+" "+(e+2)+" "+h,w=" C "+e/2+" "+m+" "+e/2+" "+g+" -1 "+g;b(t.svg.appendChild(document.createElementNS(E,"path")),"d","M -1 "+f+y+" L "+(e+2)+" "+m+w+" z","class",t.classes.connect)}var _=t.copyButtons.appendChild(v("div","left"==t.type?"⇝":"⇜","CodeMirror-merge-copy"));_.title="Revert chunk",_.chunk={topEdit:u,botEdit:c,topOrig:a,botOrig:l},_.style.top=p+"px"}})}}function c(t,e){t.diffOutOfDate||t.edit.replaceRange(t.orig.getRange(C(e.topOrig,0),C(e.botOrig,0)),C(e.topEdit,0),C(e.botEdit,0))}function h(t){var e=t.lockButton=v("div",null,"CodeMirror-merge-scrolllock");e.title="Toggle locked scrolling";var n=v("div",[e],"CodeMirror-merge-scrolllock-wrap");CodeMirror.on(e,"click",function(){o(t,!t.lockScroll)}),t.copyButtons=v("div",null,"CodeMirror-merge-copybuttons-"+t.type),CodeMirror.on(t.copyButtons,"click",function(e){var n=e.target||e.srcElement;n.chunk&&c(t,n.chunk)});var i=[t.copyButtons,n],r=document.createElementNS&&document.createElementNS(E,"svg");return r&&!r.createSVGRect&&(r=null),t.svg=r,r&&i.push(r),t.gap=v("div",i,"CodeMirror-merge-gap")}function p(t,e){var n=M.diff_main(t,e);M.diff_cleanupSemantic(n);for(var i=0;i<n.length;++i){var r=n[i];r[1]?i&&n[i-1][0]==r[0]&&(n.splice(i--,1),n[i][1]+=r[1]):n.splice(i--,1)}return n}function f(t,e){for(var n=0,i=0,r=C(0,0),o=C(0,0),s=0;s<t.length;++s){var a=t[s],l=a[0];if(l==DIFF_EQUAL){var u=m(t,s)?0:1,c=r.line+u,h=o.line+u;_(r,a[1],null,o);var p=d(t,s)?1:0,f=r.line+p,g=o.line+p;f>c&&(s&&e(i,h,n,c),n=f,i=g)}else _(l==DIFF_INSERT?r:o,a[1])}(n<=r.line||i<=o.line)&&e(i,o.line+1,n,r.line+1)}function d(t,e){if(e==t.length-1)return!0;var n=t[e+1][1];return 1==n.length||10!=n.charCodeAt(0)?!1:e==t.length-2?!0:(n=t[e+2][1],n.length>1&&10==n.charCodeAt(0))}function m(t,e){if(0==e)return!0;var n=t[e-1][1];return 10!=n.charCodeAt(n.length-1)?!1:1==e?!0:(n=t[e-2][1],10==n.charCodeAt(n.length-1))}function g(t,e,n){var i,r,o,s;return f(t,function(t,a,l,u){var c=n?l:t,h=n?u:a;null==r&&(c>e?(r=l,s=t):h>e&&(r=u,s=a)),e>=h?(i=u,o=a):e>=c&&(i=l,o=t)}),{edit:{before:i,after:r},orig:{before:o,after:s}}}function v(t,e,n,i){var r=document.createElement(t);if(n&&(r.className=n),i&&(r.style.cssText=i),"string"==typeof e)r.appendChild(document.createTextNode(e));else if(e)for(var o=0;o<e.length;++o)r.appendChild(e[o]);return r}function y(t){for(var e=t.childNodes.length;e>0;--e)t.removeChild(t.firstChild)}function b(t){for(var e=1;e<arguments.length;e+=2)t.setAttribute(arguments[e],arguments[e+1])}function w(t,e){e||(e={});for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function _(t,e,n,i){for(var r=n?C(t.line,t.ch):t,o=0;;){var s=e.indexOf("\n",o);if(-1==s)break;++r.line,i&&++i.line,o=s+1}return r.ch=(o?0:r.ch)+(e.length-o),i&&(i.ch=(o?0:i.ch)+(e.length-o)),r}function x(t,e){return(t.line-e.line||t.ch-e.ch)<0?t:e}function S(t,e){return(t.line-e.line||t.ch-e.ch)>0?t:e}function k(t,e){return t.line==e.line&&t.ch==e.ch}var C=CodeMirror.Pos,E="http://www.w3.org/2000/svg";t.prototype={constructor:t,init:function(t,i,r){this.edit=this.mv.edit,this.orig=CodeMirror(t,w({value:i,readOnly:!0},w(r))),this.diff=p(i,r.value),this.diffOutOfDate=!1,this.showDifferences=r.showDifferences!==!1,this.forceUpdate=e(this),o(this,!0,!1),n(this)},setShowDifferences:function(t){t=t!==!1,t!=this.showDifferences&&(this.showDifferences=t,this.forceUpdate("full"))}};var T=CodeMirror.MergeView=function(e,n){if(!(this instanceof T))return new T(e,n);var i=n.origLeft,r=null==n.origRight?n.orig:n.origRight,o=null!=i,s=null!=r,a=1+(o?1:0)+(s?1:0),l=[],c=this.left=null,p=this.right=null;if(o){c=this.left=new t(this,"left");var f=v("div",null,"CodeMirror-merge-pane");l.push(f),l.push(h(c))}var d=v("div",null,"CodeMirror-merge-pane");if(l.push(d),s){p=this.right=new t(this,"right"),l.push(h(p));var m=v("div",null,"CodeMirror-merge-pane");l.push(m)}(s?m:d).className+=" CodeMirror-merge-pane-rightmost",l.push(v("div",null,null,"height: 0; clear: both;"));var g=this.wrap=e.appendChild(v("div",l,"CodeMirror-merge CodeMirror-merge-"+a+"pane"));this.edit=CodeMirror(d,w(n)),c&&c.init(f,i,n),p&&p.init(m,r,n);var y=function(){c&&u(c),p&&u(p)};CodeMirror.on(window,"resize",y);var b=setInterval(function(){for(var t=g.parentNode;t&&t!=document.body;t=t.parentNode);t||(clearInterval(b),CodeMirror.off(window,"resize",y))},5e3)};T.prototype={constuctor:T,editor:function(){return this.edit},rightOriginal:function(){return this.right&&this.right.orig},leftOriginal:function(){return this.left&&this.left.orig},setShowDifferences:function(t){this.right&&this.right.setShowDifferences(t),this.left&&this.left.setShowDifferences(t)}};var M=new diff_match_patch}(),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.className="text-merge-editor",n.prototype.template='<div class="editor"></div>',n.prototype.initialize=function(){return this.result=this.model},n.prototype.render=function(){var t=this;return this.$el.html(this.template),this.$editor=this.$el.find(".editor"),_.defer(function(){return t.initializeCodeMirror()}),this},n.prototype.setValue=function(t){return this.mv.edit.setValue(t)},n.prototype.getValue=function(){return this.mv.edit.getValue()},n.prototype.initializeCodeMirror=function(){var t,e,n;return n=this.short(),n?(t=23,e=!1):(t=150,e=!0),this.mv=CodeMirror.MergeView(this.$editor.get(0),{lineNumbers:!1,lineWrapping:e,showDifferences:!0,mode:"text",value:this.result.mine,orig:this.result.theirs}),this.$editor.find(".CodeMirror-merge, .CodeMirror").height(t),n?this.$editor.find(".CodeMirror-merge-scrolllock").hide():void 0},n.prototype.short=function(){var t,e;return e=[this.result.mine,this.result.theirs],t=function(t){return!t||t.length<50&&!/\n/.test(t)},_.all(e,t)},n}(Backbone.View),namespace("Views.Conflicts",function(e){return e.TextMergeEditor=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.className="conflicts-index",n.prototype.template=template("main::conflicts/index"),n.prototype.events={"click .done .dismiss":"hide"},n.prototype.initialize=function(){return this.menu=new Views.Conflicts.Menu,this.editor=new Views.Conflicts.Editor,this.listenTo(Conflicts,"add remove",this.update)},n.prototype.render=function(){return this.$el.html(this.template),this.$el.find(".left-column").html(this.menu.render().el),this.$el.find(".right-column").html(this.editor.render().el),this.update(),this},n.prototype.update=function(){return this.$el.attr("data-conflict-count",Conflicts.length).toggleClass("empty",0===Conflicts.length)},n.prototype.hide=function(){return Conflicts.hide()},n}(Backbone.View),namespace("Views.Conflicts",function(e){return e.Index=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.className="conflicts-menu",n.prototype.template=template("main::conflicts/menu"),n.prototype.events=function(){return{"click .conflict":"edit"}},n.prototype.initialize=function(){return this.listenTo(Conflicts,"add",this.renderConflict),this.listenTo(Conflicts,"remove",this.removeConflict),this.listenTo(Conflicts,"edit",this.highlightConflict)},n.prototype.render=function(){return this.$el.html(this.template),this.$headers=this.$el.find(".nav-header").hide(),this.$headers.hide(),Conflicts.each(this.renderConflict,this),this},n.prototype.edit=function(t){var e;return e=$(t.currentTarget).attr("data-conflict"),Conflicts.edit(e)},n.prototype.renderConflict=function(t){var e,n,i,r;return i='<li class="conflict" data-conflict="{{cid}}"><a href="#">{{label}}</a></li>',r={cid:t.cid,label:t.label()},n=$(tim(i,r)),e=this.findHeader(t),e.show().next(".nav-header").before(n)},n.prototype.removeConflict=function(t){var e,n,i;return e=this.findConflict(t),n=this.findHeader(t),i=e.prev().is(".nav-header")&&e.next().is(".nav-header"),e.fadeOut(),i?n.fadeOut():void 0},n.prototype.highlightConflict=function(t){var e;return this.$el.find(".conflict").removeClass("active"),e=this.findConflict(t),e.addClass("active")},n.prototype.findHeader=function(t){return this.$headers.filter("[data-collection="+t.collection()+"]")},n.prototype.findConflict=function(t){return this.$el.find(".conflict[data-conflict="+t.cid+"]")},n}(Backbone.View),namespace("Views.Conflicts",function(e){return e.Menu=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.id="conflictsModal",n.prototype.className="modal modal-app",n.prototype.template=template("main::conflicts/modal"),n.prototype.initialize=function(){return this.index=new Views.Conflicts.Index},n.prototype.render=function(){return this.$el.hide().html(this.template()).appendTo("body").modal({backdrop:!0,keyboard:!0}),this.$body=this.$el.find(".modal-body"),this.$body.html(this.index.render().el),this},n.prototype.show=function(){return this.$el.modal("show")},n.prototype.hide=function(){return this.$el.modal("hide")},n}(Backbone.View),namespace("Views.Conflicts",function(e){return e.Modal=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.className="conflicts-show",n.prototype.template=template("main::conflicts/show"),n.prototype.events={"click .submit":"submit"},n.prototype.initialize=function(){return this.conflict=this.model},n.prototype.render=function(){var t,e,n,i,r;for(e={label:this.conflict.label(),type:this.conflict.type()},this.$el.html(this.template(e)),this.$list=this.$el.find(".conflicts"),this.$editor=this.$el.find(".conflict-editor"),r=this.conflict.conflicts("unresolved"),n=0,i=r.length;i>n;n++)t=r[n],this.renderConflictingValue(t);return this},n.prototype.renderConflictingValue=function(t){var e;return e=this.subview(new Views.Conflicts.Value({model:t})),this.$list.append(e.render().el)},n.prototype.submit=function(){var t,e,n,i;for(i=this.getSubviews(),e=0,n=i.length;n>e;e++)t=i[e],t.resolve();return this.conflict.resolve()},n}(Backbone.View),namespace("Views.Conflicts",function(e){return e.Show=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.tagName="li",n.prototype.className="conflict",n.prototype.template=template("main::conflicts/value"),n.prototype.template=Handlebars.compile('<h5 class="conflict-header">\n  {{label}}\n  <a href="#" class="force force-accept pull-right">accept their version</a>\n</h5>\n\n<div class="conflict-editor"></div>'),n.prototype.events={"click .force-accept":"accept"},n.prototype.initialize=function(){var t;return t=this.model,this.label=t.label,this.path=t.path,this.result=t.result,t},n.prototype.render=function(){var t;return t={label:this.label||this.defaultLabel()},this.$el.html(this.template(t)),this.$editor=this.$el.find(".conflict-editor"),this.renderEditor(),this},n.prototype.defaultLabel=function(){return _.chain(this.path).reject(function(t){return/attributes/i.test(t)}).map(function(t){return t.humanize()}).value().join(" / ")},n.prototype.renderEditor=function(){return this.editor=new Views.Conflicts.TextMergeEditor({model:this.result}),this.$editor.html(this.editor.render().el)},n.prototype.accept=function(){return this.editor.setValue(this.result.theirs)},n.prototype.resolve=function(){return this.result.value=this.editor.getValue(),this.result.resolved=!0},n}(Backbone.View),namespace("Views.Conflicts",function(e){return e.Value=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.tagName="form",n.prototype.events={submit:!1},n.prototype.initialize=function(){return this.rules=this.model||{}},n.prototype.render=function(){return this.$el.html(this.template),this.$el.toggles(),this.initializeControls(),this},n.prototype.initializeControls=function(){var t,e,n,i,r,o,s,a,l,u,c;for(this.controls=[],u=this.$el.find("[data-property]").toArray(),c=[],a=0,l=u.length;l>a;a++)n=u[a],t=$(n),r=t.attr("data-property"),o=t.attr("data-type"),s=this.rules[r],s=function(){switch(r){case"color":return i=s&&s.contains("scale("),"simple"===o&&!i||"scale"===o&&i?s:void 0;default:return s}}(),e=this.initializeControl(r,s,o),e.setElement(t),e.render(),this.subview(e),this.controls.push({property:r,control:e}),s?c.push(this.toggleFor(e).prop("checked",!0).trigger("change")):c.push(void 0);return c},n.prototype.initializeControl=function(t,e,n){var i,r,o;return o=this.settings[t],n&&(o=o[n]),_.isArray(o)?(i=o[0],r=o[1]):(i=o,r={}),_.extend(r,{property:t,value:e}),new Views.Decorations[i](r)},n.prototype.toJSON=function(){var t,e,n,i,r,o,s,a,l;for(i=_.clone(this.model),a=this.controls,o=0,s=a.length;s>o;o++)l=a[o],n=l.property,e=l.control,t=this.toggleFor(e),t.is(":checked")?(r=e.val(),null!=r&&""!==r?i[n]=r:delete i[n]):t.is(":checkbox")&&delete i[n];return i},n.prototype.toggleFor=function(t){return t.$el.closest(".toggles").find(".toggle")},n}(Backbone.View),namespace("Views.Decorations",function(e){return e.DecorationBuilder=t})}.call(this),function(){var t,e,n,i={}.hasOwnProperty,r=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};e=50,t=function(t){function i(){return n=i.__super__.constructor.apply(this,arguments)}return r(i,t),i.prototype.className="connection-decorations-builder decorations-builder",i.prototype.template=template("main::decorations/connections"),i.prototype.settings={size:["Slider",{label:"Width",min:1,max:e,placeholder:1}],scale:["Range",{min:1,max:e,placeholder:"1..10",format:"{{value}}x"}],color:{simple:"Color",scale:"ColorScale"}},i}(Views.Decorations.DecorationBuilder),namespace("Views.Decorations",function(e){return e.ConnectionDecorations=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.template='<span class="control-label">Color</span>\n<input type="text" />',n.prototype.initialize=function(t){this.options=t},n.prototype.render=function(){return this.$el.html(this.template),this.$color=this.$el.find("input").harmony(this.options),this},n.prototype.val=function(){return this.$color.val()},n}(Backbone.View),namespace("Views.Decorations",function(e){return e.Color=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.template='<input type="hidden" name="type" />\n\n<div class="control">\n  <span class="control-label">Scale by</span>\n  <select name="expression"></select>\n</div>\n\n<div class="control">\n  <span class="control-label">Between</span>\n  <input type="text" class="color" placeholder="from" />\n  <input type="text" class="color" placeholder="to" />\n</div>',n.prototype.initialize=function(t){var e;this.options=t;try{this.scale=StyleDeclaration.build(this.options.property,this.options.value)}catch(n){e=n,this.scale={}}return _.defaults(this.scale,{type:"linear-scale",expression:"",range:[]})},n.prototype.render=function(){return this.$el.html(this.template),this.$type=this.$el.findByName("type"),this.$type.val(this.scale.type),this.$expression=this.$el.findByName("expression"),this.$expression.expression({value:this.scale.expression}),this.$color0=this.$el.find(".color").eq(0).harmony({value:this.scale.range[0]}),this.$color1=this.$el.find(".color").eq(1).harmony({value:this.scale.range[1]}),this},n.prototype.val=function(){var t;return t={type:this.$type.val(),expression:this.$expression.val(),color0:this.$color0.val(),color1:this.$color1.val()},"linear-scale"===t.type&&(t.type="scale"),tim('{{type}}("{{expression}}", {{color0}}, {{color1}})',t)},n}(Backbone.View),namespace("Views.Decorations",function(e){return e.ColorScale=t})}.call(this),function(){$.widget("kumu.expression",{_create:function(){var t,e,n,i,r,o,s,a,l;for(e=this._attributeExpressions(),i=[],i.push(["","Select an Attribute"]),0===e.length?1===i.length&&i.push(["","No suitable attributes found"]):i.push.apply(i,e),r=a=0,l=i.length;l>a;r=++a)n=i[r],s=n[0],o=n[1],t=$("<option />").val(s).text(o).prop("disabled",!s&&r>0).appendTo(this.element);return null!=this.options.value?this.element.val(this.options.value):void 0},_attributeExpressions:function(){var t;return t=["label","element type","connection type","loop type","description"],Attributes.chain().reject(function(e){return _.include(t,e.key())||1!==e.get("limit")}).map(function(t){return[t.key(),t.label()]}).value()}})}.call(this),function(){var t;t='<ul class="colors" data-scale="Spectral"></ul>\n<ul class="colors" data-scale="Greys"></ul>\n\n<h6>Intensity</h6>\n<ul class="colors" data-scale="YlOrRd"></ul>\n\n<h6>Extremes</h6>\n<ul class="colors" data-scale="RdYlBu"></ul>\n<ul class="colors" data-scale="BrBG"></ul>\n\n<h6>General</h6>\n<ul class="colors" data-scale="Purples"></ul>\n<ul class="colors" data-scale="Blues"></ul>\n<ul class="colors" data-scale="Greens"></ul>\n<ul class="colors" data-scale="Oranges"></ul>\n<ul class="colors" data-scale="Reds"></ul>',$.widget("kumu.harmony",{options:{template:t},destroy:function(){return $("body").off("click",this.handlers.onClickBody),this.element.off("click",this.handlers.onClickInput),this.element.off("keyup",this.handlers.onKeyup),this.element.off("change",this.handlers.onChangeInput),this.menu.remove(),$.Widget.prototype.destroy.call(this)},value:function(t){return 0===arguments.length?this.element.val():(this.element.val(t),this._refresh(),t)},_create:function(){var t;return t=this,null!=this.options.value&&this.element.val(this.options.value),this.handlers={onKeyup:function(){return t._onKeyup()},onClickBody:function(e){return t._closeOnOutsideClick(e)},onClickInput:function(){return t._toggle()},onChangeInput:function(){return t._refresh()},onSelectColor:function(e){return t._select(e)}},this.menu=$('<div class="harmony-picker"></div>').html(this.options.template).on("click",".color",this.handlers.onSelectColor),this.menu.find("[data-scale]").each(function(){return t._initializeScale(this)}),this.element.addClass("harmony").attr("placeholder",this.element.attr("placeholder")||this.options.placeholder).on("click",this.handlers.onClickInput).on("keyup",this.handlers.onKeyup).on("change",this.handlers.onChangeInput),$(document).on("click","body",this.handlers.onClickBody),this._refresh()},_select:function(t){var e;return e=$(t.target).attr("data-color"),this.value(e),this._close()},_refresh:function(){var t,e,n,i,r;if(e=t=this.element.val())try{e=chroma(e),i=e.luminance()>.5?e.darken(50):e.brighten(50),r={"background-color":e.hex(),"border-color":e.hex(),color:i.hex()}}catch(o){n=o,r={"background-color":"","border-color":"red"}}else r={"border-color":"","background-color":""};return this.element.css(r)},_toggle:function(){var t=this;return this.menu.is(":visible")?this._close():_.defer(function(){return t._open()})},_open:function(){return this.menu.appendTo("body").position({my:"top",at:"bottom",of:this.element,collision:"flipfit"}),this.element.select().focus()},_close:function(){return this.menu.detach()},_closeOnOutsideClick:function(t){return this.element.is(t.target)||this.menu.has(t.target).length?void 0:this._close()},_onKeyup:function(){return this._close(),this._refresh()},_initializeScale:function(t){var e,n,i;return e=$(t),i=e.attr("data-scale"),n=this._colors(i),e.append.apply(e,n)},_colors:function(t,e){var n,i;return e=_.defaults({},e,{limit:10,mode:"hsl"}),_.isArray(t)?n=t.length:(n=e.limit,t=chroma.scale(t).mode(e.mode).domain([0,1],n).colors()),i=100/n,_.map(t,function(t){return $("<li />").addClass("color").css({width:""+i+"%","background-color":t}).attr("data-color",t)})}})}.call(this),function(){var t;t={slide:'<div class="slide">\n  <div class="slide-track"></div>\n</div>',thumb:'<div class="slide-thumb">\n  <div class="slide-marker"></div>\n  <div class="slide-label"></div>\n</div>',skirt:'<div class="slide-skirt"></div>'},$.widget("kumu.range",{options:{type:void 0,value:void 0,format:void 0,placeholder:void 0},defaults:{min:0,max:100},value:function(t){var e;if(0!==arguments.length)return this.element.val(t),this._refresh(),t;switch(e=this._values(),this.type){case"single":return e[0];case"double":return e}},_values:function(){var t,e,n,i,r,o=this;switch(this.type){case"single":e=[this.element.val()],e[0]||(e[0]=null!=(n=this.options.placeholder)?n:this.min);break;case"double":e=this.element.val().split(".."),t=(this.options.placeholder||"").split(".."),e[0]||(e[0]=null!=(i=t[0])?i:this.min),e[1]||(e[1]=null!=(r=t[1])?r:this.max)}return _.map(e,function(t){return o._bound(o.min,o.max,Number(t))})},_create:function(){return null!=this.options.value&&this.element.val(this.options.value),this._initializeOptions(),this._render()},_render:function(){return this.slide=$(t.slide),"single"===this.type?this.slide.append(t.thumb):(this.slide.append(this.skirt=$(t.skirt)),this.slide.append(this.thumb0=$(t.thumb)),this.slide.append(this.thumb1=$(t.thumb))),this.thumbs=this.slide.find(".slide-thumb"),this._initializeThumbs(),this._refresh(),this.element.hide().before(this.slide)},_initializeOptions:function(){var t,e,n,i,r,o,s,a,l,u,c,h,p,f,d,m;return null==(s=(t=this.options).min)&&(t.min=null!=(a=this.element.attr("min"))?a:this.defaults.min),null==(l=(e=this.options).max)&&(e.max=null!=(u=this.element.attr("max"))?u:this.defaults.max),null==(c=(n=this.options).precision)&&(n.precision=null!=(h=this.element.attr("data-precision"))?h:this._inferredPrecision()),null==(p=(i=this.options).placeholder)&&(i.placeholder=this.element.attr("placeholder")),null==(f=(r=this.options).format)&&(r.format=this.element.attr("data-format")),null==(d=(o=this.options).type)&&(o.type=null!=(m=this.element.attr("data-type"))?m:this._inferredType()),this.options.type=function(){switch(this.options.type){case"single":case"slider":return"single";case"double":case"range":return"double"}}.call(this),this.type=this.options.type,this.min=Number(this.options.min),this.max=Number(this.options.max),this.precision=Number(this.options.precision)},_inferredType:function(){var t;return t=this.element.val()||this.options.placeholder||"",-1===String(t).indexOf("..")?"single":"double"},_inferredPrecision:function(){var t,e;return e=String(this.options.min).split(".")[1]||"",t=String(this.options.max).split(".")[1]||"",Math.max(e.length,t.length)},_refresh:function(){var t,e,n,i,r,o,s,a;for(s=this._values(),a=[],t=r=0,o=s.length;o>r;t=++r)i=s[t],n=this.thumbs.eq(t),e=this._toPercent(i),n.find(".slide-label").text(this._format(i)),n.css("left",""+e+"%"),"double"===this.type?0===t?a.push(this.skirt.css("left",""+e+"%")):a.push(this.skirt.css("right",""+(100-e)+"%")):a.push(void 0);return a},_format:function(t){var e;return e=this.options.format,this.precision&&(t=t.toFixed(this.precision)),_.isFunction(e)?e(Number(t)):_.isString(e)?e.replace("{{value}}",t):t},_toPercent:function(t){return 100*(t-this.min)/(this.max-this.min)},_initializeThumbs:function(){var t,e,n,i;return t=$(document),n=function(t){var e,n,i;return t.preventDefault(),t.stopPropagation(),i=t.pageX||t.originalEvent.touches[0].pageX,e=this._bound(0,1,(i-this.slide.offset().left)/this.slide.width()),n=this.min+e*(this.max-this.min),this._setValue(this.thumb,n),this._refresh()},i=function(){return this.thumb.removeClass("active"),this.isDragging=!1,this.thumb=null,this._off(t)},e=function(e){return 0===e.which||1===e.which?(this.isDragging=!0,this.thumb=$(e.currentTarget),this.thumb.addClass("active"),this._on(t,{mousemove:n,mouseup:i,touchmove:n,touchend:i})):void 0},this._on(this.slide,{"mousedown .slide-thumb":e,"touchstart .slide-thumb":e})},_setValue:function(t,e){var n;switch(e=e.toFixed(this.precision),this.type){case"single":return this.element.val(e);case"double":return n=this._values(),t.is(this.thumb0)?n[0]=e:n[1]=e,this.element.val(n.join(".."))}},_bound:function(t,e,n){return Math.min(e,Math.max(t,n))}})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.template='<input type="hidden" name="type" />\n\n<div class="control">\n  <span class="control-label">Scale by</span>\n  <select name="expression"></select>\n</div>\n\n<div class="control">\n  <span class="control-label">Between</span>\n  <input type="text" name="range" />\n</div>',n.prototype.initialize=function(t){return this.options=t,this.initializeScale()},n.prototype.initializeScale=function(){var t;try{this.scale=StyleDeclaration.build(this.options.property,this.options.value),this.scale.type=this.scale.name}catch(e){t=e,this.scale={}}return _.defaults(this.scale,{type:"linear-scale",expression:"",range:[]})},n.prototype.render=function(){return this.$el.html(this.template),this.initializeType(),this.initializeExpression(),this.initializeRange(),this},n.prototype.initializeType=function(){return this.$type=this.$el.findByName("type"),this.$type.val(this.scale.type)},n.prototype.initializeExpression=function(){return this.$expression=this.$el.findByName("expression"),this.$expression.expression({value:this.scale.expression})},n.prototype.initializeRange=function(){var t,e;return t={min:"0.1",max:"10.0",placeholder:"0.5..4",format:"{{value}}x"},e=_.defaults({type:"range"},this.options,t),e.value=this.scale.range.join(".."),this.$range=this.$el.findByName("range").range(e)},n.prototype.val=function(){var t;return t={type:this.$type.val(),expression:this.$expression.val()||"",range:this.$range.val().split("..").join(", ")},"linear-scale"===t.type&&(t.type="scale"),tim('{{type}}("{{expression}}", {{range}})',t)},n}(Backbone.View),namespace("Views.Decorations",function(e){return e.Range=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.template='<span class="control-label">Property</span>\n<input type="text" />',n.prototype.initialize=function(t){this.options=t},n.prototype.render=function(){return this.$el.html(this.template),this.$el.find(".control-label").html(this.options.label),this},n.prototype.val=function(){return this.$el.find("input").val()},n}(Backbone.View),namespace("Views.Decorations",function(e){return e.Simple=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.template='<span class="control-label">Size</span>\n<input type="text" />',n.prototype.initialize=function(t){var e,n;return this.options=t,null!=(n=(e=this.options).label)?n:e.label=this.defaultLabel()},n.prototype.defaultLabel=function(){return _.last(this.options.property.split("-")).capitalize()},n.prototype.render=function(){return this.$el.html(this.template),this.initializeLabel(),this.initializeRange(),this},n.prototype.initializeLabel=function(){return this.$el.find(".control-label").html(this.options.label)},n.prototype.initializeRange=function(){var t;return t=_.pick(this.options,"value","min","max","precision","placeholder","format"),this.$range=this.$el.find("input").range(t)},n.prototype.val=function(){return this.$range.val()},n}(Backbone.View),namespace("Views.Decorations",function(e){return e.Slider=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.template='<span class="control-label">Url</span>\n<input type="text" />',n.prototype.initialize=function(t){var e,n;return this.options=t,null!=(n=(e=this.options).value)?n:e.value=""},n.prototype.render=function(){return this.$el.html(this.template),this.initializeValue(),this},n.prototype.initializeValue=function(){return this.$url=this.$el.find("input"),this.$url.val(this.parse(this.options.value))},n.prototype.val=function(){return this.format(this.$url.val())},n.prototype.parse=function(t){return t=t.trim(),t.startsWith("url(")?t.slice(4,-1):t},n.prototype.format=function(t){return t=t.trim(),t.startsWith("url(")?t:"url("+t+")"},n}(Backbone.View),namespace("Views.Decorations",function(e){return e.Url=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.className="decoration-selector-builder",n.prototype.template=template("main::decorations/selector"),n.prototype.initialize=function(){var t;return t=this.model,this.lens=t.lens,this.selection=t.selection,this.subview("similar",new Views.Decorations.SimilarAttributes({model:this.selection})),this.subview("builder",new SelectorBuilder.View({scope:this.lens.scope(),selector:this.lens.get("selector")}))},n.prototype.render=function(){var t;return t={collection:this.lens.get("collection")},this.$el.html(this.template(t)),this.$el.toggles(),this.$el.replace("similar",this.similar),this.$el.replace("custom",this.builder),this.initializeBuilder(),this},n.prototype.initializeBuilder=function(){var t;return t=this.lens.hasCustomSelector()?"custom":"selected",0===this.selection.length&&("selected"===t&&(t="all"),this.$el.find(".selection-required").hide()),this.select(t)
},n.prototype.select=function(t){return this.$el.find(".toggle").prop("checked",!1).change(),this.$el.find(".toggle").filterByAttr("value",t).prop("checked",!0).change(),this},n.prototype.getSelector=function(){var t,e;switch(t=this.$el.find("[name=toggle-selector]:checked"),e=this.$el.find("[name=toggle-selector]:checked").val()){case"all":return this.lens.scope();case"selected":return this.selection.getDirectSelector();case"similar":return this.similar.getSelector();case"custom":return this.builder.getSelector()}},n}(Backbone.View),namespace("Views.Decorations",function(e){return e.DecorationSelectorBuilder=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.className="element-decorations-builder decorations-builder",n.prototype.template=template("main::decorations/elements"),n.prototype.settings={size:["Slider",{label:"Size",min:1,max:100,placeholder:5}],scale:["Range",{min:.1,max:10,placeholder:"0.5..4",format:"{{value}}x"}],color:{simple:"Color",scale:"ColorScale"},"image-url":"Url","bullseye-color":"Color","shadow-color":"Color","shadow-size":["Slider",{min:1,max:5,precision:1,placeholder:2,format:"{{value}}x"}],"shadow-opacity":["Slider",{label:"Opacity",min:0,max:1,precision:2,placeholder:.3,format:function(t){return""+Math.floor(100*t)+"%"}}]},n}(Views.Decorations.DecorationBuilder),namespace("Views.Decorations",function(e){return e.ElementDecorations=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.className="similar-attributes",n.prototype.events={"click .selector":"onClick"},n.prototype.initialize=function(){return this.selection=this.model},n.prototype.render=function(){var t,e,n,i,r,o,s,a;if(i=this.selection.sharedAttrs(),0===i.length)this.$el.html("No attributes in common.");else for(this.$el.empty(),o=0,s=i.length;s>o;o++)a=i[o],e=a.attribute,r=a.value,n=this.buildSelector(e,r),t=$('<a href="#" class="selector tag"></a>').attr("data-selector",n).html(""+r+" <span class='attribute'>("+e.singularize()+")</span>"),this.$el.append(t);return this},n.prototype.buildSelector=function(t,e){var n,i;return n=Attributes.resolve(t),i={attribute:t,value:e},1===n.get("limit")?Selector.prepare('["{{attribute}}"="{{value}}"]',i):Selector.prepare('["{{attribute}}"~="{{value}}"]',i)},n.prototype.getSelector=function(){return this.$el.find(".selector.active").attr("data-selector")},n.prototype.onClick=function(t){var e;return e=$(t.currentTarget),e.addClass("active").siblings().removeClass("active")},n}(Backbone.View),namespace("Views.Decorations",function(e){return e.SimilarAttributes=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.className="decorations-wizard",n.prototype.template=template("main::decorations/wizard"),n.prototype.initialize=function(){var t;return this.lens=this.model,t=function(){switch(this.lens.get("collection")){case"elements":return map.getSelectedElements();case"connections":return map.getSelectedConnections()}}.call(this),this.selection=new EntitySelection(t)},n.prototype.open=function(t){return this.callback=t,this.render(),this.wizard=this.createWizard(),this.wizard.show(),this},n.prototype.close=function(){return this.wizard.close(),this},n.prototype.render=function(){var t;return t={collection:this.lens.get("collection")||"items",label:this.lens.get("label")},this.$el.html(this.template(t)),this.initializeSelector(),this.initializeDeclarations(),this},n.prototype.initializeSelector=function(){var t,e,n;return n={lens:this.lens,selection:this.selection},e=new Views.Decorations.DecorationSelectorBuilder({model:n}),this.subview("selectorBuilder",e),t=this.$el.find("[data-cardname=selector]"),t.replace("builder",this.selectorBuilder)},n.prototype.initializeDeclarations=function(){var t,e,n;return n={model:this.lens.get("declarations")},e=function(){switch(this.lens.get("collection")){case"elements":return new Views.Decorations.ElementDecorations(n);case"connections":return new Views.Decorations.ConnectionDecorations(n)}}.call(this),this.subview("decorationsBuilder",e),t=this.$el.find("[data-cardname=declarations]"),t.replace("builder",this.decorationsBuilder)},n.prototype.createWizard=function(){var t,e=this;return t=this.$el.wizard({width:1e3,showCancel:!0,buttons:{submitText:"Save",submittingText:"Saving..."}}),t.el.addClass("decorations-wizard"),t.el.on("hidden",function(){return t.el.remove(),e.remove()}),t.el.find("form").on("submit",!1),t.el.find(".wizard-nav-item").addClass("already-visited"),t.on("submit",function(){return e.onSubmit()}),t},n.prototype.onSubmit=function(){return this.callback(this.lens,this.toJSON())},n.prototype.toJSON=function(){var t;return t={selector:this.selectorBuilder.getSelector(),declarations:this.decorationsBuilder.toJSON(),label:this.wizard.el.findByName("label").val().trim()}},n}(Backbone.View),namespace("Views.Decorations",function(e){return e.Wizard=t})}.call(this),function(){var t,e={}.hasOwnProperty,n=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};t=function(t){function e(t){this.editable=t,e.__super__.constructor.call(this)}return n(e,t),e.prototype.tagName="div",e.prototype.events={"keypress input":"onKeypress"},e.prototype.render=function(t,e){return this.$input=$('<input type="text" autocomplete="off" />').val(t),this.$el.html(this.$input),(null!=e?e.length:void 0)>0&&this.$input.typeahead({source:e}),this},e.prototype.focus=function(){return this.$input.select().focus()},e.prototype.value=function(){return this.$input.val().trim()},e.prototype.onKeypress=function(t){return 13===t.which?this.editable.save():void 0},e}(Backbone.View),namespace("Views.Editors",function(e){return e.Basic=t}),$.editable.editor.register("basic",t),$.editable.editor.register("string",t)}.call(this),function(){var t,e={}.hasOwnProperty,n=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};t=function(t){function e(t){this.editable=t,e.__super__.constructor.call(this)}return n(e,t),e.prototype.className="checkbox-editor",e.prototype.template=template("main::editors/checkbox"),e.prototype.events={change:"onChange",submit:"addChoice","click .cancel":"cancel","click .done":"done"},e.prototype.render=function(){var t,e,n,i;for(this.existingValue=this.editable.getValue(),this.$el.html(this.template()),this.$selections=this.$el.find(".selections-form"),this.$list=this.$selections.find("ul"),this.$new=this.$el.find(".new-form input"),i=this.editable.getChoices(),e=0,n=i.length;n>e;e++)t=i[e],this.renderChoice(t);return this},e.prototype.renderChoice=function(t){var e,n;return e=$('<li><label class="checkbox"><input type="checkbox" name="value[]" /> '+t+"</label></li>"),n=e.find("input").val(t).prop("checked",_.include(this.existingValue,t)),e.appendTo(this.$list)},e.prototype.addChoice=function(t){var e,n;return t.preventDefault(),n=this.$new.val().trim(),e=this.renderChoice(n),e.find("input").prop("checked",!0),this.$new.val("")},e.prototype.focus=function(){return this.$new.focus()},e.prototype.value=function(){return this.$selections.serializeJSON().value},e.prototype.cancel=function(){return this.editable.cancel()},e.prototype.done=function(){return this.editable.save()},e.prototype.onChange=function(t){return t.stopPropagation()},e}(Backbone.View),namespace("Views.Editors",function(e){return e.Checkbox=t}),$.editable.editor.register("checkbox",t)}.call(this),function(){var t,e={}.hasOwnProperty,n=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};t=function(t){function e(t){this.editable=t,e.__super__.constructor.call(this)}return n(e,t),e.prototype.className="markdown-editor",e.prototype.template=template("main::editors/markdown"),e.prototype.events={"click .done":"done","click .cancel":"cancel","keydown textarea":"onKeydown"},e.prototype.render=function(t){return this.$el.html(this.template()),this.$textarea=this.$el.find("textarea"),this.$textarea.val(t),this},e.prototype.afterRender=function(){return this.$textarea.autosize()},e.prototype.focus=function(){return this.$textarea.focus()},e.prototype.value=function(){return this.$textarea.val().trim()},e.prototype.done=function(){return this.editable.save()},e.prototype.cancel=function(){return this.editable.cancel()},e.prototype.onKeydown=function(t){switch(t.which){case 13:if(t.altKey||t.metaKey||t.shiftKey)return this.done();break;case 9:return t.preventDefault()}},e}(Backbone.View),namespace("Views.Editors",function(e){return e.Markdown=t}),$.editable.editor.register("markdown",t)}.call(this),function(){var t,e={}.hasOwnProperty,n=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};t=function(t){function e(t){this.editable=t,e.__super__.constructor.call(this)}return n(e,t),$.editable.editor.register("multiselect",e),e.prototype.className="multiselect-editor",e.prototype.template=template("main::editors/multiselect"),e.prototype.events={change:"onChange",keydown:"onKeydown"},e.prototype.render=function(){return this.$el.html(this.template),this.$select=this.$el.find(".select"),this},e.prototype.afterRender=function(){var t,e,n;return n=this.editable.getValue(),t=this.editable.getChoices(),e={openOnEnter:!1,multiple:!0,tokenSeparators:["|"]},this.editable.isLocked()?e.data=_.map(t,function(t){return{id:t,text:t}}):e.tags=t,this.$select.select2(e),this.$select.select2("val",n)},e.prototype.cleanup=function(){return this.$select?(this.$select.select2("destroy"),$(".select2-sizer, .select2-drop, .select2-drop-mask").remove()):void 0},e.prototype.focus=function(){return this.$select.select2("open"),this.$select.select2("close")},e.prototype.value=function(){return this.$select.select2("val")},e.prototype.cancel=function(){return this.editable.cancel()},e.prototype.done=function(){return this.editable.save()},e.prototype.onChange=function(t){return t.stopPropagation()},e.prototype.onKeydown=function(t){switch(t.which){case 13:if(t.altKey||t.metaKey||t.shiftKey)return this.done();break;case 9:return t.preventDefault()}},e}(Backbone.View),namespace("Views.Editors",function(e){return e.Multiselect=t})}.call(this),function(){var t,e={}.hasOwnProperty,n=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};t=function(t){function e(t){this.editable=t,e.__super__.constructor.call(this)}return n(e,t),e.prototype.className="radio-editor",e.prototype.template=template("main::editors/radio"),e.prototype.events={"focus .new-value-input":"onFocusNew","keydown .new-value-input":"onKeydown","click .cancel":"cancel","click .done":"done",change:"onChange"},e.prototype.render=function(){var t,e,n,i,r;for(this.name=(new Date).getTime(),this.$el.html(this.template()),this.$list=this.$el.find("ul"),this.$newValue=this.$list.find(".new-value"),this.$newValue.find("input[type=radio]").attr("name",this.name),r=this.editable.getChoices(),n=0,i=r.length;i>n;n++)e=r[n],t=this.renderChoice(e),t.insertBefore(this.$newValue);return this},e.prototype.renderChoice=function(t){var e,n;return e=$('<li><label class="radio"><input type="radio" name="'+this.name+'" /> '+t+"</label></li>"),n=e.find("input").val(t).attr("checked",t===this.editable.getValue()),e},e.prototype.value=function(){var t,e;return t=this.$el.find("input:checked"),e=t.siblings("input[type=text]"),0===e.length?t.val():e.val().trim()},e.prototype.cancel=function(){return this.editable.cancel()},e.prototype.done=function(){return this.editable.save()},e.prototype.onChange=function(t){return t.stopPropagation()},e.prototype.onKeydown=function(t){return 13===t.which?this.done():void 0},e.prototype.onFocusNew=function(){return this.$newValue.find("input[type=radio]").prop("checked",!0)},e}(Backbone.View),namespace("Views.Editors",function(e){return e.Radio=t}),$.editable.editor.register("radio",t)}.call(this),function(){var t,e={}.hasOwnProperty,n=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};t=function(t){function e(t){this.editable=t,e.__super__.constructor.call(this)}return n(e,t),$.editable.editor.register("select",e),e.prototype.className="select-editor",e.prototype.template='<div class="select"></div>',e.prototype.events={change:"onChange"},e.prototype.render=function(){return this.$el.html(this.template),this.$select=this.$el.find(".select"),this},e.prototype.afterRender=function(){var t,e,n,i;return i=this.editable.getValue(),t=this.editable.getChoices(),n={openOnEnter:!1,multiple:!1,data:_.map(t,function(t){return{id:t,text:t}})},this.editable.isLocked()||(e=function(t,e){var n;return n=_.any(e,function(e){return e.text.startsWith(t)}),n?void 0:{id:t,text:t}},n.createSearchChoice=e),this.$select.select2(n),this.$select.select2("val",i)},e.prototype.cleanup=function(){return this.$select?(this.$select.select2("destroy"),$(".select2-sizer, .select2-drop, .select2-drop-mask").remove()):void 0},e.prototype.focus=function(){return this.$select.select2("open")},e.prototype.value=function(){return this.$select.select2("val")},e.prototype.cancel=function(){return this.editable.cancel()},e.prototype.done=function(){return this.editable.save()},e.prototype.onChange=function(t){return t.stopPropagation(),this.done()},e}(Backbone.View),namespace("Views.Editors",function(e){return e.Select=t})}.call(this),function(){var t,e={}.hasOwnProperty,n=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};t=function(t){function e(t){this.editable=t,e.__super__.constructor.call(this),this.builderActive=!1}return n(e,t),e.prototype.tagName="div",e.prototype.className="input-append-inside",e.prototype.template='<input type="text" placeholder="Selector" />\n<button type="button" class="build-btn btn btn-flat" title="Build Selector"><i class="icon-build"></i></button>',e.prototype.events={"click .build-btn":"onBuild","keypress input":"onKeypress"},e.prototype.ignoreBlur=function(){return this.builderActive},e.prototype.render=function(t){return this.$el.html(this.template),this.$input=this.$el.find("input[type=text]"),this.$input.val(t),this},e.prototype.onBuild=function(){var t,e=this;return this.builderActive=!0,t=this.value(),SelectorBuilder.build(t).done(function(t){return e.$input.val(t),e.editable.save()}).always(function(){return e.builderActive=!1})},e.prototype.value=function(){return this.$input.val().trim()},e.prototype.onKeypress=function(t){return 13===t.which?this.editable.save():void 0},e}(Backbone.View),namespace("Views.Editors",function(e){return e.Selector=t}),$.editable.editor.register("selector",t)}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(t){this.editable=t,this.onChange=e(this.onChange,this),n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.render=function(){return this.data=this.editable.data(),this.previousValues=this.data.value()||[],this.$input=$('<input type="text" />').val(this.previousValues.join(", ")),this.$el.html(this.$input),this},n.prototype.afterRender=function(){var t;return t={openOnEnter:!1,tags:this.data.uniqueChoices()},this.$input.select2(t).on("change",this.onChange)},n.prototype.focus=function(){return this.$input.select2("open")},n.prototype.value=function(){var t;return t=this.$input.val(),t?_.map(t.split(","),function(t){return $.trim(t)}):[]},n.prototype.onChange=function(t){var e,n,i;return t.stopPropagation(),i=this.value(),i.length>this.previousValues.length?(n=_.difference(i,this.previousValues),0!==n.length&&this.editable.trigger("select",[n[0]])):(e=_.difference(this.previousValues,i),0!==e.length&&this.editable.trigger("deselect",[e[0]])),this.previousValues=i,this.editable.trigger("change",[i])},n}(Backbone.View),$.editable.editor.register("tag",t)}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(t){this.editable=t,this.onKeydown=e(this.onKeydown,this),n.__super__.constructor.call(this)}return i(n,t),n.prototype.tagName="div",n.prototype.render=function(t){var e;return null!=(e=this.$textarea)&&e.off("keydown",this.onKeydown),this.$textarea=$("<textarea></textarea>").val(t),this.$textarea.on("keydown",this.onKeydown),this.$el.html(this.$textarea),this},n.prototype.focus=function(){return this.$textarea.focus()},n.prototype.value=function(){return this.$textarea.val().trim()},n.prototype.onKeydown=function(t){switch(t.which){case 13:if(t.altKey)return this.editable.save();break;case 9:return t.preventDefault()}},n}(Backbone.View),$.editable.editor.register("text",t)}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.tagName="form",n.prototype.className="filters-form form-horizontal",n.prototype.template=template("main::filters/form"),n.prototype.events={"click .select":"onBulkSelect"},n.prototype.initialize=function(){return this.perspective=this.model},n.prototype.render=function(){var t,e;return this.$el.html(this.template),(t=this.$el.find(".elements .choices")).append.apply(t,this.filtersFor("elements")),(e=this.$el.find(".connections .choices")).append.apply(e,this.filtersFor("connections")),this},n.prototype.filtersFor=function(t){var e,n,i,r,o,s,a,l,u;for(s=Attributes.getTypeAttributeForCollection(t),i=s.choices(),i.push("undefined"),u=[],a=0,l=i.length;l>a;a++)o=i[a],r="undefined"===o?"<em>Undefined</em>":o,n=$('<li><label class="checkbox"><input type="checkbox" /> '+r+"</label></li>"),e=n.find("input").val(o).attr("checked",this.perspective.permit(t,o)),u.push(n);return u},n.prototype.onBulkSelect=function(t){var e,n;return t.preventDefault(),n=$(t.target),e=n.closest(".collection-filter"),e.find("input[type=checkbox]").prop("checked","all"===n.attr("data-value"))},n.prototype.toJSON=function(){var t,e,n,i,r,o,s,a;for(i={},a=["elements","connections"],o=0,s=a.length;s>o;o++)n=a[o],t=this.$el.find("."+n+" .choices").find("[type=checkbox]"),e=t.filter(":checked").toArray(),r=e.length===t.length?null:_.map(e,function(t){return $(t).val()}),i[n]=r;return log.error("filters are",i),i},n}(Backbone.View),namespace("Views.Filters",function(e){return e.Form=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.className="filters-index container",n.prototype.template=template("main::filters/index"),n.open=function(){var t;return t=new n({model:currentScene.filter}),t.render(),$.magnificPopup.open({items:{src:t.$el,type:"inline"},callbacks:{close:function(){return t.submit().done(function(){return t.remove()})}}})},n.prototype.initialize=function(){return this.perspective=this.model,this.form=new Views.Filters.Form({model:this.perspective})},n.prototype.render=function(){return this.$el.html(this.template()),this.$el.find("[data-role=form]").replaceWith(this.form.render().el),this},n.prototype.submit=function(){var t,e,n=this;return t=new $.Deferred,map.busy("Updating filter...",{wait:!1}),e=function(){return n.perspective.set("filters",n.form.toJSON()),map.refresh(),map.busy(!1),t.resolve()},_.delay(e,1e3),t.promise()},n}(Backbone.View),namespace("Views.Filters",function(e){return e.Index=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.template=template("main::help/index"),n.prototype.render=function(){return this.$el.html(this.template),this},n}(Backbone.View),namespace("Views.Help",function(e){return e.Index=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.className="help-modal modal modal-bare",n.prototype.template='<div class="modal-body"></div>',n.prototype.initialize=function(){return this.subview("body",new Views.Help.Index)},n.prototype.render=function(){return this.$el.html(this.template),this.$el.find(".modal-body").html(this.body.render().el),this},n.prototype.show=function(){return this.$el.modal({backdrop:!0,keyboard:!0,show:!0})},n}(Backbone.View),namespace("Views.Help",function(e){return e.Modal=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.className="imports-modal modal",n.prototype.template=template("main::imports/modal"),n.prototype.events={"click .import-btn":"selectFile",hidden:"remove"},n.prototype.render=function(){return this.$el.html(this.template()),this},n.prototype.show=function(){return this.render(),this.$el.modal({backdrop:!0,keyboard:!0,show:!0})},n.prototype.selectFile=function(){var t,e;return t=this.$el,e=$('<input type="file" style="display:none"></input>'),e.appendTo(this.$el),e.one("change",function(){var n,i;return n=e.get(0).files[0],i=new Imports.FileSource(n),map["import"](i),t.modal("hide")}),e.click()},n}(Backbone.View),namespace("Views.Imports",function(e){return e.Modal=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.className="imports-show pending",n.prototype.template=template("main::imports/show"),n.prototype.events={"click .close":"cancel","click .cancel":"cancel","click .save":"save"},n.prototype.initialize=function(){return this.rendered=!1,this["import"]=this.model,this.listenTo(this["import"],"progress",this.update)},n.prototype.render=function(){var t=this;return this.$el.html(this.template()),this.$elementCount=this.$el.find(".element-stats .count"),this.$elementSplit=this.$el.find(".element-stats .split"),this.$connectionCount=this.$el.find(".connection-stats .count"),this.$connectionSplit=this.$el.find(".connection-stats .split"),this.$flags=this.$el.find(".flags"),map.busy({wait:!1}),_.delay(function(){return t.process()},300),this.rendered=!0,this},n.prototype.process=function(){var t=this;return this["import"].process().then(function(){return _.delay(function(){return map.zoomFit()},500)}).otherwise(function(t){return alert("Sorry, there was an error with your import.<br />"+t),log.error("Import failed",t)}).ensure(function(){return map.busy(!1),t.$el.removeClass("pending"),t.update()})},n.prototype.update=function(){var t,e,n,i,r,o,s,a,l,u;if(this.rendered){for(r=this["import"].summary(),n=r.totals.elements,e=r.totals.connections,this.$elementCount.html(n.recognized),this.$elementSplit.html(""+n.created+" created / "+n.updated+" updated"),this.$connectionCount.html(e.recognized),this.$connectionSplit.html(""+e.created+" created / "+e.updated+" updated"),this.$flags.empty(),o={irregular:'<strong>Irregular Format</strong> Your import doesn\'t follow our typical format. Element imports should start with "Label" column and connection imports should start with "From", "To", and "Label" (label is optional).',"labels-not-found":"<strong>Labels not Found</strong> Kumu uses labels to identify elements but we didn't find any in your import. Perhaps you're using another attribute (eg Name) to idenfity elements?"},l=this["import"].flags(),u=[],s=0,a=l.length;a>s;s++)i=l[s],u.push(t=$("<li />").html(o[i.key]).appendTo(this.$flags));return u}},n.prototype.cancel=function(){return this["import"].cancel(),sidebar.pop(this),!1},n.prototype.save=function(){var t=this;return execute(new Commands.Imports.Finalize(this["import"])).fail(function(){return alert("Unable to save import. Please try again.")}).always(function(){return sidebar.pop(t)})},n}(Backbone.View),namespace("Views.Imports",function(e){return e.Show=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.initialize=function(){return this.lens=this.model,this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.painter=new CanvasDisplay.LegendPainter},n.prototype.render=function(){return this.$el.html(this.canvas),this.draw(),this},n.prototype.draw=function(){var t,e;switch(this.clear(),t=this.lens.get("collection"),e=this.lens.get("declarations"),t){case"elements":case"connections":return this.painter.draw(this.ctx,t,e,{x:50,y:10,width:60,height:20})}},n.prototype.clear=function(){return this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)},n.prototype.resize=function(t,e){return this.canvas.width=t,this.canvas.height=e},n}(Backbone.View),namespace("Views.Lenses",function(e){return e.LegendPreview=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.tagName="ul",n.prototype.className="lenses",n.prototype.template=template("main::lenses/show"),n.prototype.events={"click .edit":"onEdit","click .delete":"onDelete"},n.prototype.initialize=function(){return this.lens=this.model,this.preview=new Views.Lenses.LegendPreview({model:this.lens}),this.preview.resize(100,20),this.listenTo(this.lens,"change",this.render),this.listenTo(this.lens,"destroy",this.remove)},n.prototype.render=function(){var t;return this.$el.attr("data-cid",this.lens.cid),t={label:this.lens.get("label")||"",selector:this.lens.get("selector")||this.lens.getDefaultSelector()},this.$el.html(this.template(t)),this.renderPreview(),this},n.prototype.renderPreview=function(){return this.$el.find(".preview").html(this.preview.render().el)},n.prototype.onEdit=function(){return Workflows.editLens(this.lens)},n.prototype.onDelete=function(){return execute(new Commands.Lenses.Destroy(this.lens)).done(function(){return map.refresh()}).fail(function(){return alert("Unable to update perspective")})},n}(Backbone.View),namespace("Views.Lenses",function(e){return e.List=t})}.call(this),function(){var t,e,n,i,r,o={}.hasOwnProperty,s=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};i=function(i){function o(){return r=o.__super__.constructor.apply(this,arguments)}return s(o,i),o.prototype.className="preview",o.prototype.initialize=function(){return this.lens=this.model,this.perspective=new Perspective,this.perspective.lenses.add(this.lens),this.scene=new Scene,this.scene.perspective=this.perspective,this.scene.showcase={foregroundOpacity:1,backgroundOpacity:1,highlighted:{},update:function(){},include:function(){return!0}},this.graph=this.scene.get("graph"),this.preview=function(){switch(this.lens.get("collection")){case"elements":return new e;case"connections":return new t;default:return new n}}.call(this),this.preview.populate(this.graph),this.display=new CanvasDisplay({el:this.el,legend:!1})},o.prototype.render=function(){var t=this;return this.$el.css("position","relative"),this.display.render(),_.defer(function(){return t.resize(),t.refresh()}),this},o.prototype.resize=function(t,e){return t&&e?(this.width=t,this.height=e,this.$el.css({width:t,height:e})):(this.width=this.$el.width(),this.height=this.$el.height()),this.display.resize(this.width,this.height),this.scene.transform({offset:{x:this.width/2,y:this.height/2}})},o.prototype.refresh=function(){return this.scene.guide=Settings.theme.clone(),this.scene.refresh({cull:!1,redecorate:!0}),this.display.draw(this.scene)},o.prototype.zoomFit=function(){return this.scene.bounds={viewport:{screen:{width:function(){return this.width},height:function(){return this.height}}}},this.scene.zoomFit()},o}(Backbone.View),namespace("Views.Lenses",function(t){return t.Preview=i}),n=function(){function t(){}return t.prototype.populate=function(){},t}(),e=function(){function t(){this.element=new Element({attributes:{label:"Label"}}),this.node=new Node({entity:this.element,position:{x:0,y:-10}})}return t.prototype.populate=function(t){return t.nodes.add(this.node)},t}(),t=function(){function t(){var t,e;this.connection=new Connection({direction:"mutual",delayed:!0,attributes:{label:"Label",prelabel:"+",postlabel:"-"}}),t=100,e=20,this.from=new Node({position:{x:-t,y:e}}),this.to=new Node({position:{x:t,y:e}}),this.edge=new Edge({from:this.from,to:this.to,entity:this.connection})}return t.prototype.populate=function(t){return t.nodes.add(this.from),t.nodes.add(this.to),t.edges.add(this.edge)},t}()}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.tagName="li",n.prototype.className="lenses-show lens clearfix",n.prototype.template=template("main::lenses/show"),n.prototype.events={"click .edit":"onEdit","click .delete":"onDelete"},n.prototype.initialize=function(){return this.lens=this.model,this.preview=new Views.Lenses.LegendPreview({model:this.lens}),this.preview.resize(100,20),this.listenTo(this.lens,"change",this.render),this.listenTo(this.lens,"destroy",this.remove)},n.prototype.render=function(){var t;return this.$el.attr("data-cid",this.lens.cid),t={label:this.lens.get("label")||"No label",selector:this.lens.get("selector")||this.lens.getDefaultSelector()},this.$el.html(this.template(t)),this.lens.get("label")||this.$el.find(".lens-label").addClass("placeholder"),this.renderPreview(),this},n.prototype.renderPreview=function(){return this.$el.find(".preview").html(this.preview.render().el)},n.prototype.onEdit=function(){return Workflows.editLens(this.lens)},n.prototype.onDelete=function(){return execute(new Commands.Lenses.Destroy(this.lens)).done(function(){return map.refresh()}).fail(function(){return alert("Unable to update perspective")})},n}(Backbone.View),namespace("Views.Lenses",function(e){return e.Show=t
})}.call(this),function(){concern("MapViewConcerns","API",function(){return MapViewConcerns.Selection(this),_.extend(this,{loadBlueprint:function(t){return this.model.load(t)},width:function(){return this.$el.width()},height:function(){return this.$el.height()},bounds:function(){return new Rectangle(0,0,this.$el.width(),this.$el.height())},center:function(){return new Vector(this.width()/2,this.height()/2)},getViewportWidth:function(){return this.overlays.viewport.width()},getViewportHeight:function(){return this.overlays.viewport.height()},getViewportBounds:function(){return this.overlays.viewport.bounds()},getViewportCenter:function(t){return this.getViewportBounds(t).center()},getViewportCenterWorld:function(t){return this.toWorld(this.getViewportCenter(t))},sidebarWidth:function(){return this.overlays.sidebar.width()},isEmbedded:function(){return this.$el.is(".embedded")},getMap:function(){return this.model.get("map")},getSelection:function(){return this.model.selection},getSelectedNodes:function(){return this.model.selection.nodes()},getSelectedEdges:function(){return this.model.selection.edges()},getSelectedElements:function(){return this.model.selection.getElements()},getSelectedConnections:function(){return this.model.selection.getConnections()},hasSelection:function(){return this.model.selection.length>0},getScene:function(){return currentMap.scene},resetSelection:function(){return 0!==this.model.selection.length?this.model.selection.reset():void 0},screenshot:function(t){var e;return e=this.getScreenshot(t),$.magnificPopup.open({type:"image",items:{src:e,title:'To save, right click on the image then "Save Image As..."'}})},getScreenshot:function(t){return this.display.getScreenshot(t)},focus:function(){return this.display.focus()},refresh:function(){return currentMap.scene.rebuild()},resetInteraction:function(){return this.model.resetInteraction()},find:function(){return finder.find.apply(finder,arguments)},isFocused:function(){return currentMap.scene.isFocused()},refocus:function(){var t;return(t=currentMap.scene).refocus.apply(t,arguments)},expand:function(){return currentMap.scene.expand()},contract:function(){return currentMap.scene.contract()},extend:function(){var t;return(t=currentMap.scene).extend.apply(t,arguments)},clearFocus:function(){return currentMap.scene.clearFocus()},getFocus:function(){return"undefined"!=typeof currentMap&&null!==currentMap?currentMap.scene.focus:void 0},addNode:function(t){return currentMap.scene.graph.nodes.add(t)},addEdge:function(t){return currentMap.scene.graph.edges.add(t)},removeNode:function(t){return currentMap.scene.graph.nodes.remove(t)},removeEdge:function(t){return currentMap.scene.graph.edges.remove(t)},getScale:function(){return currentMap.scene.scale},getTranslation:function(){return currentMap.scene.translation},toWorld:function(){var t;return(t=currentMap.scene).toWorld.apply(t,arguments)},pick:function(t){return currentMap.scene.pick(this.toWorld(t))},zoomIn:function(){return currentMap.scene.zoomIn()},zoomOut:function(){return currentMap.scene.zoomOut()},zoomFit:function(t){return null==t&&(t=null),currentMap.scene.zoomFit(t)},zoomFitOnSelection:function(t,e){return null==e&&(e={neighbors:!0}),null==t&&(t=this.model.selection),currentMap.scene.zoomFit(t.getBounds(e))},zoomAt:function(t,e,n){return currentMap.scene.zoomAt(t,e,n)},pan:function(t,e){return currentMap.scene.pan(t,e)},panLeft:function(){return currentMap.scene.panLeft()},panRight:function(){return currentMap.scene.panRight()},panUp:function(){return currentMap.scene.panUp()},panDown:function(){return currentMap.scene.panDown()},pause:function(){return currentMap.scene.pause()},resume:function(){return currentMap.scene.resume({temperature:.8})},bump:function(){return currentMap.scene.graph.bump()},navigate:function(){var t;return(t=this.router).navigate.apply(t,arguments)},virtualize:function(t){var e;return e=new AttributeVirtualization({map:currentMap,attribute:t}),e.execute(),e}})})}.call(this),function(){concern("MapViewConcerns","Selection",function(){var t,e,n=this;return e=null,t=function(){return map.resetSelection(),!1},this.model.selection.on("add remove reset",function(){var i,r,o,s,a;return s=n.model.selection.toEntitySelection(),i=s.first(),r=e,e=function(){switch(s.length){case 0:return null;case 1:return new Views.Profiles[i.className]({model:i});default:return new Views.Profiles.Multiple({model:s})}}(),e&&(e.$el.on("click","> .close",t),n.sidebar.push(e,{animate:!1})),r&&(r.off("click","> .close",t),n.sidebar.pop(r,{animate:!1}),r=null),o=n.getSelectionPermalink(),a=urlFor({map:currentMap,perspective:currentPerspective,selection:o}),router.navigate(a,{trigger:!1})}),this.getSelectionPermalink=function(){var t;return t=this.model.selection.pluck("_id"),t=_.compact(t),btoa(t.join(","))},this.select=function(t,e){var n,i=this;return null==e&&(e={}),_.defaults(e,{focus:!1}),this.busy(),n=new $.Deferred,_.defer(function(){var r,o,s;return _.isString(t)?(s=t,t=Selector.select(s),o=t.models,r=t.toComponents(currentMap.scene.graph)):r=currentMap.scene.graph.get(t),i.model.selection.reset(r),i.busy(!1),e.focus&&map.zoomFitOnSelection(),n.resolve(i.model.selection.clone())}),n.promise()},this.reveal=function(t,e){var n,i=this;return null==e&&(e={}),_.defaults(e,{focus:!1}),this.busy(),n=new $.Deferred,_.defer(function(){var e,r,o;return _.isString(t)?(o=t,t=Selector.select(o),r=t.models,e=t.toComponents(currentMap.scene.graph)):e=currentMap.scene.graph.get(t),i.busy(!1),t=new ComponentSelection(e),map.zoomFitOnSelection(t,{neighbors:!1}),n.resolve(t)}),n.promise()},this.selectByLabel=function(t){var e;return e=Selector.prepare('[label="{{label}}"]',{label:t}),this.select(e)}})}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};t=function(){function t(t){this.display=t,this.translateDrag=e(this.translateDrag,this),this.extendEvent=e(this.extendEvent,this),this.onMouseWheel=e(this.onMouseWheel,this),this.onMouseHold=e(this.onMouseHold,this),this.onMouseDoubleClick=e(this.onMouseDoubleClick,this),this.onMouseClick=e(this.onMouseClick,this),this.onMouseUp=e(this.onMouseUp,this),this.onMouseDrag=e(this.onMouseDrag,this),this.onMouseDown=e(this.onMouseDown,this),this.onMouseLeaveContainer=e(this.onMouseLeaveContainer,this),this.onMouseEnterContainer=e(this.onMouseEnterContainer,this),this.onMouseLeaveComponent=e(this.onMouseLeaveComponent,this),this.onMouseEnterComponent=e(this.onMouseEnterComponent,this),this.onMouseMove=e(this.onMouseMove,this),this.setTool=e(this.setTool,this),this.listen=e(this.listen,this),this.model=this.display.model,this.keyboard=new Interactions.KeyboardHandler,this.setTool(this.model.get("tool")),this.listen(),ControllerConcerns.Helpers(this),ControllerConcerns.Mouse(this),ControllerConcerns.Touch(this)}return t.prototype.listen=function(){var t,e=this;return this.model.on("change:tool",function(){return e.setTool(e.model.get("tool"))}),t=(new Mouse).monitor(this.display.$el).on("down",this.onMouseDown).on("up",this.onMouseUp).on("move",this.onMouseMove).on("drag",this.onMouseDrag).on("enter",this.onMouseEnterContainer).on("leave",this.onMouseLeaveContainer).on("click",this.onMouseClick).on("dblclick",this.onMouseDoubleClick).on("hold",this.onMouseHold).on("wheel",this.onMouseWheel)},t.prototype.setTool=function(t){var e;return null!=(e=this.tool)&&e.dispose(),this.tool=t,this.tool.activate(this)},t.prototype.onMouseMove=function(t){var e,n,i,r;return this.extendEvent(t),"function"==typeof(i=this.tool).onMouseMove&&i.onMouseMove(t),n=this.model.get("hover"),e=t.component,e!==n&&("function"==typeof(r=this.tool).accept?r.accept(t):void 0)!==!1?(n&&this.onMouseLeaveComponent(t,n),e&&this.onMouseEnterComponent(t,e),this.model.set("hover",e)):void 0},t.prototype.onMouseEnterComponent=function(t,e){var n;return"function"==typeof(n=this.tool).onMouseEnter&&n.onMouseEnter(t),e.onMouseEnter()},t.prototype.onMouseLeaveComponent=function(t,e){var n;return t=_.clone(t),t.component=e,t.entity=e.entity,"function"==typeof(n=this.tool).onMouseLeave&&n.onMouseLeave(t),e.onMouseLeave()},t.prototype.onMouseEnterContainer=function(){},t.prototype.onMouseLeaveContainer=function(t){return this.onMouseUp(t),this.model.resetInteraction()},t.prototype.onMouseDown=function(t){var e,n;return document.onselectstart=function(){return!1},this.extendEvent(t),t.component&&("function"==typeof(e=this.tool).accept?e.accept(t.component):void 0)!==!1&&this.model.set("active",t.component),"function"==typeof(n=this.tool).onMouseDown?n.onMouseDown(t):void 0},t.prototype.onMouseDrag=function(t){var e;return"function"==typeof(e=this.tool).onMouseDrag?e.onMouseDrag(this.extendEvent(t)):void 0},t.prototype.onMouseUp=function(t){var e;return"function"==typeof(e=this.tool).onMouseUp&&e.onMouseUp(this.extendEvent(t)),this.model.set("active",null),document.onselectstart=function(){return!0}},t.prototype.onMouseClick=function(t){var e;return t=this.extendEvent(t),"function"==typeof(e=this.tool).onMouseClick&&e.onMouseClick(t),map.trigger("click",t)},t.prototype.onMouseDoubleClick=function(t){var e;return t=this.extendEvent(t),"function"==typeof(e=this.tool).onMouseDoubleClick&&e.onMouseDoubleClick(t),map.trigger("dblclick",t)},t.prototype.onMouseHold=function(t){var e;return this.extendEvent(t),"function"==typeof(e=this.tool).onMouseHold&&e.onMouseHold(t),map.trigger("hold",t),this.onMouseUp(t)},t.prototype.onMouseWheel=function(t){var e;return t.preventDefault(),"function"==typeof(e=this.tool).onMouseWheel?e.onMouseWheel(this.extendEvent(t)):void 0},t.prototype.extendEvent=function(t,e){var n;return null==e&&(e=null),currentMap?(null!=e&&_.extend(t,e),t.world={location:currentMap.scene.toWorld(t.location)},null!=t.drag&&(t.world.drag=this.translateDrag(t.drag)),t.component=currentMap.scene.pick(t.world.location),t.entity=null!=(n=t.component)?n.entity:void 0,t):t},t.prototype.translateDrag=function(t){return{from:currentMap.scene.toWorld(t.from),to:currentMap.scene.toWorld(t.to),offset:currentMap.scene.toWorldScale(t.offset),delta:currentMap.scene.toWorldScale(t.delta)}},t}(),namespace("Display",function(e){return e.Controller=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n}(Display.Controller),namespace("window",function(e){return e.CanvasController=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.initialize=function(){return this.node=new n.Node,this.edge=new n.Edge,this.label=new n.Label,this.reset()},n.prototype.getController=function(t){return new CanvasController(t)},n.prototype.getLegend=function(){return new n.LegendView},n.prototype.getScreenshot=function(t){var e,n,i,r,o,s,a,l,u,c,h,p,f,d;for(null==t&&(t={}),l=map.getViewportBounds({apparent:!0}),n=document.createElement("canvas"),n.width=u=l.width(),n.height=r=l.height(),i=n.getContext("2d"),d=["backdrop","shadows","underlays","foreground"],p=0,f=d.length;f>p;p++)o=d[p],i.drawImage(this.layers[o],l.xmin,l.ymin,u,r,0,0,u,r);return e=$(".legend"),e.is(":visible")&&(s=e.get(0),a=e.offset(),c=a.left-l.xmin,h=a.top-l.ymin,i.drawImage(s,c,h)),n.toDataURL()},n.prototype.render=function(){var t,e,i,r;for(this.$el.empty(),this.layers={},r=["backdrop","shadows","underlays","foreground"],e=0,i=r.length;i>e;e++)t=r[e],this.prepareLayer(t);return this.mapView=new n.MapView(this,[this.layers.shadows,this.layers.underlays,this.layers.foreground]),this.resize(),this},n.prototype.resize=function(t,e){var n,i,r,o;this.width=t||this.$el.width(),this.height=e||this.$el.height(),r=this.layers,o=[];for(i in r)n=r[i],n.width=t,o.push(n.height=e);return o},n.prototype.reset=function(){return this.node.reset()},n.prototype.draw=function(t){return this.clear(this.layers.backdrop,t.guide.get("backgroundColor")),this.mapView.draw(t)},n.prototype.prepareLayer=function(t){var e;return e=document.createElement("canvas"),e.context=e.getContext("2d"),$(e).addClass(t).css({width:"100%",height:"100%",position:"absolute",top:0,left:0}).appendTo(this.$el),this.layers[t]=e},n.prototype.clear=function(t,e){var n;return null==e&&(e=null),n=t.context,e?(n.fillStyle=e,n.fillRect(0,0,this.width,this.height)):n.clearRect(0,0,this.width,this.height)},n}(Backbone.View),namespace("window",function(e){return e.CanvasDisplay=t})}.call(this),function(){CanvasDisplay.Edge=function(){function t(){}return t.prototype.draw=function(t,e,n){var i,r,o;if(!e.isNegative())return r=t[0],o=t[1],i=t[2],this.drawPath(i,e,n),e.display.arrows.visible&&this.drawArrows(i,e,n),e.display.delay.visible&&this.drawDelay(i,e,n),e.display.handles.visible&&this.drawHandles(i,e,n),e.display.label.visible?this.drawLabels(i,e,n):void 0},t.prototype.drawPath=function(t,e){var n,i,r;return r=e.display.start.position.subtract(e.display.circle.center).angle(),i=e.display.end.position.subtract(e.display.circle.center).angle(),n="ccw"===e.getWinding(),t.beginPath(),t.arc(e.display.circle.center.x,e.display.circle.center.y,e.display.circle.radius,r,i,n),e.display.hitpath.visible&&(t.strokeStyle=e.display.hitpath.rgbaColor,t.lineWidth=e.display.hitpath.width,t.stroke()),e.display.path.visible?("function"==typeof t.setLineDash&&t.setLineDash(e.display.path.dashArray),t.strokeStyle=e.display.path.rgbaColor,t.lineWidth=e.display.path.width,t.stroke(),"function"==typeof t.setLineDash?t.setLineDash([]):void 0):void 0},t.prototype.drawArrows=function(t,e){var n,i,r,o,s,a,l,u,c,h,p,f;for(u=e.display.arrows.width,r=e.display.arrows.height,i=.5*u,l=new Vector(r,0),o=new Vector(0,-i),s=new Vector(0,i),p=["tail","head"],f=[],c=0,h=p.length;h>c;c++)a=p[c],n=e.display.arrows[a],n?(t.save(),t.translate(n.position.x,n.position.y),t.rotate(n.angle),t.beginPath(),t.moveTo(l.x,l.y),t.lineTo(s.x,s.y),t.lineTo(o.x,o.y),t.closePath(),t.fillStyle=e.display.arrows.rgbaColor,t.fill(),f.push(t.restore())):f.push(void 0);return f},t.prototype.drawDelay=function(t,e){var n,i,r,o;return r=e.display.delay.height,o=e.display.delay.width,n=r/2,i=o/2,t.save(),t.translate(e.display.delay.position.x,e.display.delay.position.y),t.rotate(e.display.delay.angle),t.beginPath(),t.rect(-i,-n,o,r),t.fillStyle=e.display.delay.fill,t.fill(),t.beginPath(),t.moveTo(-i,-n),t.lineTo(-i,n),t.moveTo(i,n),t.lineTo(i,-n),t.strokeStyle=e.display.delay.stroke,t.lineWidth=e.display.delay.strokeWidth,t.stroke(),t.restore()},t.prototype.drawHandles=function(t,e){return t.lineWidth=.5,t.beginPath(),t.arc(e.display.apex.position.x,e.display.apex.position.y,e.display.handles.radius,0,2*Math.PI,!1),t.arc(e.display.head.position.x,e.display.head.position.y,e.display.handles.radius,0,2*Math.PI,!1),t.arc(e.display.tail.position.x,e.display.tail.position.y,e.display.handles.radius,0,2*Math.PI,!1),t.stroke()},t.prototype.drawLabels=function(t,e){var n,i,r,o;for(t.fillStyle=e.display.label.fill,t.font=""+e.display.label.fontWeight+" "+e.display.label.fontSize+"px "+e.display.label.fontFamily,t.textAlign="center",t.textBaseline="middle",o=e.display.label.lines,i=0,r=o.length;r>i;i++)n=o[i],t.fillText(n.text,n.x,n.y);return t.font="bold "+e.display.label.fontSize+"px "+e.display.label.fontFamily,e.display.prelabel.text&&t.fillText(e.display.prelabel.text,e.display.prelabel.x,e.display.prelabel.y),e.display.postlabel.text?t.fillText(e.display.postlabel.text,e.display.postlabel.x,e.display.postlabel.y):void 0},t}()}.call(this),function(){CanvasDisplay.Label=function(){function t(){}return t.prototype.draw=function(t,e,n){var i,r,o;return r=t[0],o=t[1],i=t[2],e.display.label.visible?this.drawLabel(i,e,n):void 0},t.prototype.drawLabel=function(t,e){var n,i,r,o,s,a,l;for(n=e.display.label.fontSize,t.fillStyle=e.display.label.fill,t.font=""+e.display.label.fontWeight+" "+n+"px "+e.display.label.fontFamily,t.textAlign="center",t.textBaseline="middle",a=e.lines,l=[],r=o=0,s=a.length;s>o;r=++o)i=a[r],l.push(t.fillText(i,e.display.position.x,e.display.position.y+r*n));return l},t}()}.call(this),function(){CanvasDisplay.Node=function(){function t(){this.reset()}return t.prototype.reset=function(){return this.images={original:{},resized:{}}},t.prototype.draw=function(t,e,n){var i,r,o;return r=t[0],o=t[1],i=t[2],e.display.shadow.visible&&this.drawShadow(r,e,n),e.display.body.visible&&this.drawBody(i,e,n),e.display.ring.visible&&this.drawRing(i,e,n),e.display.image.visible&&this.drawImage(i,e,n),e.display.bullseye.visible&&this.drawBullseye(i,e,n),e.display.label.visible?this.drawLabel(i,e,n):void 0},t.prototype.drawBody=function(t,e){return t.beginPath(),t.arc(e.display.position.x,e.display.position.y,e.display.body.radius,0,2*Math.PI,!1),t.fillStyle=e.display.body.fill,t.fill(),e.display.body.strokeWidth>0?(t.beginPath(),t.arc(e.display.position.x,e.display.position.y,e.display.body.strokeRadius,0,2*Math.PI,!1),t.strokeStyle=e.display.body.stroke,t.lineWidth=e.display.body.strokeWidth,t.stroke()):void 0},t.prototype.drawRing=function(t,e){return t.beginPath(),t.arc(e.display.position.x,e.display.position.y,e.display.ring.radius,0,2*Math.PI,!1),t.strokeStyle=e.display.ring.stroke,t.lineWidth=e.display.ring.strokeWidth,t.stroke()},t.prototype.drawImage=function(t,e){var n,i,r,o,s,a,l,u;return(o=this.getImage(e.display.image.url))?(s=e.display.image.radius,l=2*s,a=function(){switch(e.display.image.scale){case"fit":return l/(o.width>=o.height?o.width:o.height);case"fill":return l/(o.width>=o.height?o.height:o.width)}}(),n=e.display.position.x,i=e.display.position.y,t.save(),t.beginPath(),t.arc(n,i,s,0,2*Math.PI,!1),t.clip(),u=o.width*a,r=o.height*a,t.drawImage(o,n-u/2,i-r/2,u,r),t.restore(),t.beginPath(),t.arc(n,i,s,0,2*Math.PI,!1),t.strokeStyle=e.display.body.fill,t.lineWidth=1.2,t.stroke()):void 0},t.prototype.drawBullseye=function(t,e){return t.beginPath(),t.arc(e.display.position.x,e.display.position.y,e.display.bullseye.radius,0,2*Math.PI,!1),t.fillStyle=e.display.bullseye.fill,t.fill()},t.prototype.drawLabel=function(t,e){var n,i,r,o,s;for(t.fillStyle=e.display.label.fill,t.font=""+e.display.label.fontWeight+" "+e.display.label.fontSize+"px "+e.display.label.fontFamily,t.textAlign="center",t.textBaseline="center"===e.display.label.placement?"middle":"top",o=e.display.label.lines,s=[],i=0,r=o.length;r>i;i++)n=o[i],s.push(t.fillText(n.text,n.x,n.y));return s},t.prototype.drawShadow=function(t,e){return t.beginPath(),t.arc(e.display.position.x,e.display.position.y,e.display.shadow.radius,0,2*Math.PI,!1),t.fillStyle=e.display.shadow.fill,t.fill()},t.prototype.getImage=function(t){var e,n,i,r=this;return e=this.images.original[t],n=this.images.resized[t],e||(e=this.images.original[t]=new Image,e.onload=function(){return r.images.resized[t]=r.resizeImage(e)},i=Settings.proxyImages?"/proxy?url="+encodeURIComponent(t):t,e.src=i),n},t.prototype.resizeImage=function(t,e){var n,i,r,o,s,a;if(t.width&&t.height)return e=_.defaults({},e,{size:200}),s=e.size/Math.max(t.width,t.height),n=document.createElement("canvas"),n.width=a=t.width*s,n.height=r=t.height*s,i=n.getContext("2d"),i.drawImage(t,0,0,a,r),o=new Image,o.width=a,o.height=r,o.src=n.toDataURL("image/png"),o},t}()}.call(this),function(){CanvasDisplay.LegendPainter=function(){function t(){}return t.prototype.draw=function(t,e,n,i){var r,o;switch(null==i&&(i={}),i=_.defaults(i,{width:100,height:20}),null==(r=i.x)&&(i.x=i.width/2),null==(o=i.y)&&(i.y=i.height/2),e){case"elements":return this.drawElementPreview(t,n,i);case"connections":return this.drawConnectionPreview(t,n,i)}},t.prototype.drawElementPreview=function(t,e,n){var i,r,o,s;return i=n.x,r=n.y,o=n.radius||5,n={},n.color=e.color||Settings.theme.get("elementColor"),n.strokeColor=Settings.theme.get("elementStrokeColor"),n.bullseyeColor=e["bullseye-color"],n.shadowColor=e["shadow-color"],e.scale?(s=e.scale,Number(s)?(this.drawNode(t,i,r,5,n),t.textAlign="left",t.textBaseline="middle",t.font="normal 10px verdana",t.fillStyle=Settings.theme.get("fontColor"),t.fillText(""+s+"x",i+10,r)):(this.drawNode(t,i+5,r,8,n),this.drawNode(t,i-2,r+3,5,n),this.drawNode(t,i-7,r+5,3,n))):e["image-url"]?this.drawNode(t,i,r,5,n):this.drawNode(t,i,r,5,n)},t.prototype.drawNode=function(t,e,n,i,r){return r.shadowColor&&(t.globalAlpha=.5,t.fillStyle=r.shadowColor,t.beginPath(),t.arc(e,n,2*i,0,2*Math.PI),t.fill()),t.globalAlpha=1,t.fillStyle=r.color,t.strokeStyle=r.strokeColor,t.lineWidth=.5,t.beginPath(),t.arc(e,n,i,0,2*Math.PI),t.fill(),t.stroke(),r.bullseyeColor?(t.fillStyle=r.bullseyeColor,t.beginPath(),t.arc(e,n,i/2,0,2*Math.PI),t.fill()):void 0},t.prototype.drawConnectionPreview=function(t,e,n){var i,r,o,s,a,l;return i=n.x,r=n.y,l=i-n.width/2,a=i+n.width/2,t.strokeStyle=e.color||Settings.theme.get("connectionColor"),t.lineWidth=Number(e.scale)||1,o=/dashed/.test(e.style||e.pattern),t.setLineDash(o?[t.lineWidth+4]:[]),e.scale?(s=e.scale,Number(s)?(t.lineWidth=Number(s),t.beginPath(),t.moveTo(l,r),t.lineTo(a,r),t.stroke()):(t.lineWidth=1,t.beginPath(),t.moveTo(l,r),t.lineTo(a,r),t.stroke(),t.lineWidth=4,t.beginPath(),t.moveTo(i,r),t.lineTo(a,r),t.stroke())):(t.beginPath(),t.moveTo(l,r),t.lineTo(a,r),t.stroke())},t}()}.call(this),function(){var t,e={}.hasOwnProperty,n=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};CanvasDisplay.LegendView=function(e){function i(){return t=i.__super__.constructor.apply(this,arguments)}return n(i,e),i.prototype.tagName="canvas",i.prototype.className="legend",i.prototype.initialize=function(){var t=this;return this.canvas=this.el,this.ctx=this.canvas.getContext("2d"),this.painter=new CanvasDisplay.LegendPainter,setInterval(function(){return t.draw()},2e3)},i.prototype.render=function(){return this},i.prototype.draw=function(){var t;return t="undefined"!=typeof currentMap&&null!==currentMap?currentMap.scene:void 0,t&&this.legend!==t.legend?(this.legend=t.legend,this.clear(),this.legend?(this.settings=this.legend.settings,this.canvas.width=400,this.canvas.height=this.legend.height,this.ctx.save(),this.drawLabel(),this.drawSummary(),this.drawEntries(),this.ctx.restore(),this.$el.fadeIn()):this.$el.fadeOut()):void 0},i.prototype.clear=function(){return this.ctx.fillStyle=Settings.theme.get("backgroundColor"),this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)},i.prototype.drawLabel=function(){var t;return t=this.legend.get("label"),this.ctx.textAlign="left",this.ctx.textBaseline="top",this.ctx.font=this.font("bold",this.settings.labelSize,this.settings.fontFamily),this.ctx.fillStyle=this.settings.labelColor,this.ctx.fillText(t,0,0),this.ctx.translate(0,this.settings.labelLineHeight)},i.prototype.drawSummary=function(){var t,e,n,i,r;if(e=this.legend.get("summary"),!_.isEmpty(e)){for(this.ctx.font=this.font("normal",this.settings.summarySize,this.settings.fontFamily),this.ctx.fillStyle=this.settings.summaryColor,r=[],n=0,i=e.length;i>n;n++)t=e[n],this.ctx.fillText(t,0,0),r.push(this.ctx.translate(0,this.settings.summaryLineHeight));return r}},i.prototype.drawEntries=function(){var t,e,n,i,r;for(this.ctx.translate(0,this.settings.previewHeight/2),i=this.legend.get("entries"),r=[],e=0,n=i.length;n>e;e++)t=i[e],this.drawEntry(t),r.push(this.ctx.translate(0,this.settings.previewHeight));return r},i.prototype.drawEntry=function(t){var e;return e={x:this.settings.previewWidth/2,y:0,width:this.settings.previewWidth,height:this.settings.previewHeight},this.painter.draw(this.ctx,t.collection,t.declarations,e),this.drawEntryLabel(t)},i.prototype.drawEntryLabel=function(t){var e,n,i;return e=t.label,n=this.settings.previewWidth+10,i=0,this.ctx.textAlign="left",this.ctx.textBaseline="middle",this.ctx.font=this.font("normal",this.settings.summarySize,this.settings.fontFamily),this.ctx.fillStyle=this.settings.summaryColor,this.ctx.fillText(e,n,i)},i.prototype.font=function(t,e,n){return""+t+" "+e+"px "+n},i}(Backbone.View)}.call(this),function(){CanvasDisplay.MapView=function(){function t(t,e){this.display=t,this.stack=e,this.ctxstack=_.map(this.stack,function(t){return t.context})}return t.prototype.draw=function(t){var e,n,i,r,o,s;for(this.prepareStack(t),s=["background","foreground"],r=0,o=s.length;o>r;r++)n=s[r],e=t[n],i=t.showcase[""+n+"Opacity"],this.renderScene(e,{opacity:i});return this.restoreStack()},t.prototype.prepareStack=function(t){var e,n,i,r,o,s;for(o=this.stack,s=[],i=0,r=o.length;r>i;i++)e=o[i],n=e.context,n.save(),this.display.clear(e),s.push(this.applyCamera(n,t));return s},t.prototype.restoreStack=function(){var t,e,n,i,r,o;for(r=this.stack,o=[],n=0,i=r.length;i>n;n++)t=r[n],e=t.context,o.push(e.restore());return o},t.prototype.applyCamera=function(t,e){return t.translate(e.display.offset.x,e.display.offset.y),t.scale(e.display.scale,e.display.scale),t.translate(e.display.translation.x,e.display.translation.y)},t.prototype.renderScene=function(t,e){var n,i,r,o,s,a,l,u,c,h,p,f,d,m,g,v,y;for(null==e&&(e={}),d=this.ctxstack,s=0,c=d.length;c>s;s++)n=d[s],n.globalAlpha=e.opacity;for(m=t.edges,a=0,h=m.length;h>a;a++)i=m[a],this.display.edge.draw(this.ctxstack,i,e);for(g=t.nodes,l=0,p=g.length;p>l;l++)o=g[l],this.display.node.draw(this.ctxstack,o,e);for(v=t.labels,y=[],u=0,f=v.length;f>u;u++)r=v[u],y.push(this.display.label.draw(this.ctxstack,r,e));return y},t}()}.call(this),function(){var t;t=function(t){var e;return e=function(e){return e?void 0:t.escape()},t.on("change:fullscreen",function(n){var i;return n?$.support.fullscreen?t.view.$el.fullScreen({callback:e}):(i="<p>Press ESCAPE to exit presentation mode</p>",i+="<small>CTRL+SHIFT+F to enter fullscreen mode (CMD+SHIFT+F for Macs)</small>",t.trigger("alert",i)):void 0})},namespace("Concerns",function(e){return e.Fullscreen=t})}.call(this),function(){concern("MapViewConcerns","Imports",function(){return this["import"]=function(t){var e,n;return e=currentMap.build(t),n=new Views.Imports.Show({model:e}),sidebar.push(n)}})}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};t=function(){function t(t){this.model=t,this.finalize=e(this.finalize,this),this.update=e(this.update,this),this.start=e(this.start,this),this.accept=e(this.accept,this),this.view=this.model.get("view"),this.map=this.model.get("map"),this.scene=this.map.scene,this.graph=this.scene.graph,this.selection=this.model.selection}return _.extend(t.prototype,Backbone.Events),t.prototype.cursor="default",t.prototype.accept=function(){return!0},t.prototype.start=function(){},t.prototype.update=function(){},t.prototype.finalize=function(){},t}(),namespace("Interactions",function(e){return e.BaseAction=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n}(Interactions.BaseAction),namespace("MouseActions",function(e){return e.Base=t})}.call(this),function(){var t,e,n=function(t,e){return function(){return t.apply(e,arguments)}},i={}.hasOwnProperty,r=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};t=function(t){function i(){return this.start=n(this.start,this),this.accept=n(this.accept,this),e=i.__super__.constructor.apply(this,arguments)}return r(i,t),i.prototype.accept=function(){return!1},i.prototype.start=function(){return this.model.resetInteraction()},i}(MouseActions.Base),namespace("MouseActions",function(e){return e.BasePassive=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.cursor="crosshair",n.prototype.accept=function(t){var e;return null!=(e=t.component)?e.isNode():void 0},n.prototype.start=function(t){return map.resetInteraction(),map.pause(),this.node=new Node({position:t.world.location.toJSON(),pinned:!0}),this.edge=new Edge({from:t.component,to:this.node,direction:"directed"}),this.node.pickable=this.edge.pickable=!1,this.node.opacity=0,map.addNode(this.node),map.addEdge(this.edge),this.behavior=new Behaviors.Nodes.Drag(this.node,{snap:!0})},n.prototype.update=function(t){return this.behavior.update(t)},n.prototype.finalize=function(t){var e,n=this;return e=t.component,e?e.isNode()?execute(new Commands.Nodes.Connect(this.edge.from,e)).always(function(){return n.cleanup()}):this.cancel():(this.node.pickable=!0,this.node.opacity=this.node.size=this.node.scale=null,this.node.invalidate(),prompt("Element Label",function(t,e){var i,r;return e?(i={attributes:{label:e}},r={position:n.node.position.toJSON(),pinned:n.edge.from.isPinned()},execute(new Commands.Nodes.ConnectNew(n.edge.from,i,r)).done(function(t,e){return map.select(e.to)}).always(function(){return n.cleanup()})):n.cleanup()})),map.resume()},n.prototype.cancel=function(){return this.cleanup()},n.prototype.cancelled=function(t){return!t.altKey},n.prototype.cleanup=function(){return this.edge.destroy(),this.node.destroy()},n}(MouseActions.Base),namespace("MouseActions",function(e){return e.Connect=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.cursor="move",n.prototype.accept=function(){return!1},n.prototype.start=function(t){return this.selection.include(t.component)||(this.selection=new ComponentSelection(t.component)),this.selection.lock(),this.selection.isLabel()&&!t.altKey?(this.label=this.selection.first(),this.action="moveLabel",this.targets=[this.label]):(this.action="moveNodes",this.targets=this.selection.nodes({indirect:!0}))},n.prototype.update=function(t){var e,n,i,r,o;for(e=t.world.drag.delta,o=this.targets,i=0,r=o.length;r>i;i++)n=o[i],n.position.x+=e.x,n.position.y+=e.y;return"moveNodes"===this.action?map.resume({temperature:.8}):void 0},n.prototype.finalize=function(t){var e;return t.drag.intentional()&&able.to("manage","maps")&&("moveNodes"===this.action?(e=this.selection.nodes({indirect:!0}),execute(new Commands.Nodes.Move(e,t.world.drag.offset))):execute(new Commands.Labels.Move(this.label,this.label.position.toJSON()))),this.selection.unlock()},n}(MouseActions.Base),namespace("MouseActions",function(e){return e.Move=t})}.call(this),function(){var t,e,n=function(t,e){return function(){return t.apply(e,arguments)}},i={}.hasOwnProperty,r=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};t=function(t){function i(){return this.update=n(this.update,this),e=i.__super__.constructor.apply(this,arguments)}return r(i,t),i.prototype.cursor="-webkit-grabbing",i.prototype.update=function(t){return this.scene.pan(t.world.drag.delta,{animate:!1})},i}(MouseActions.BasePassive),namespace("MouseActions",function(e){return e.Pan=t})}.call(this),function(){var t,e={}.hasOwnProperty,n=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};t=function(t){function e(t,n){this.map=t,this.side=n,e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.accept=function(t){var e;return null!=(e=t.component)?e.isNode():void 0},e.prototype.start=function(t){return map.resetInteraction(),map.pause(),this.edge=t.component,this.connection=this.edge.entity,this.originalNode=this.edge[this.side],this.edge[this.side]=this.node=new Node({pickable:!1,locked:!0,position:t.world.location}),this.edge.engage(),map.addNode(this.node),this.behavior=new Behaviors.Nodes.Drag(this.node,{snap:!0}),this.behavior.update(t)},e.prototype.update=function(t){return this.behavior.update(t)},e.prototype.finalize=function(t){var e,n;return this.node.pickable=!0,this.edge.disengage(),map.resume(),n=t.component,this.cancelled||t.drag.accidental()||!n||!n.isNode()||n===this.originalNode?this.cancel():(e=n.getElement(),this.edge[this.side]=n,this.node.destroy(),execute(new Commands.Connections.Redirect(this.connection,this.side,e)))
},e.prototype.cancel=function(){return this.edge.disengage(),this.edge[this.side]=this.originalNode,this.node.destroy()},e}(MouseActions.Base),namespace("MouseActions",function(e){return e.Redirect=t})}.call(this),function(){var t,e,n=function(t,e){return function(){return t.apply(e,arguments)}},i={}.hasOwnProperty,r=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};t=function(t){function i(){return this.finalize=n(this.finalize,this),this.update=n(this.update,this),this.start=n(this.start,this),this.accept=n(this.accept,this),e=i.__super__.constructor.apply(this,arguments)}return r(i,t),i.prototype.cursor="none",i.prototype.accept=function(){return!1},i.prototype.start=function(t){return this.edge=t.component,this.edge.lock()},i.prototype.update=function(t){var e,n,i;return e=this.edge.display.locus.closestPoint(t.world.location),i=e.subtract(this.edge.display.midpoint),n=i.parallelTo(this.edge.display.normal)?i.magnitude():-i.magnitude(),this.curvature=2*n/this.edge.display.length,Math.abs(this.curvature)<.001&&(this.curvature=.001),this.edge.get("clockwise")||(this.curvature*=-1),this.edge.display.curvature=this.curvature},i.prototype.finalize=function(t){return t.drag.intentional()&&able.to("edit","map")&&execute(new Commands.Edges.Reshape(this.edge,this.curvature)),this.edge.unlock()},i}(MouseActions.Base),namespace("MouseActions",function(e){return e.Reshape=t})}.call(this),function(){var t,e,n,i=function(t,e){return function(){return t.apply(e,arguments)}},r={}.hasOwnProperty,o=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};t=.01,e=function(e){function r(){return this.update=i(this.update,this),this.start=i(this.start,this),n=r.__super__.constructor.apply(this,arguments)}return o(r,e),r.prototype.cursor="-webkit-zoom-in",r.prototype.start=function(t){return this.originalScale=this.scene.scale,this.originalLocation=t.location},r.prototype.update=function(e){var n;return n=1+e.drag.offset.y*t,this.scene.zoomAt(this.originalLocation,this.originalScale*n,{absolute:!0})},r}(MouseActions.BasePassive),namespace("MouseActions",function(t){return t.Zoom=e})}.call(this),function(){var t;t=function(){function t(t){this.map=t}return _.extend(t.prototype,Backbone.Events),t.prototype.cursor="default",t.prototype.accept=function(){return!0},t.prototype.start=function(){},t.prototype.update=function(){},t.prototype.finalize=function(){},t}(),namespace("Behaviors",function(e){return e.Base=t})}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};t=function(){function t(t,n){this.node=t,this.options=null!=n?n:{snap:!0},this.update=e(this.update,this)}return t.prototype.update=function(t){var e,n;return e=this.options.snap&&(null!=(n=t.component)?n.isNode():void 0)?t.component.position:t.world.location,this.node.position.x=e.x,this.node.position.y=e.y},t}(),namespace("MouseBehaviors",function(e){return e.FixNodePositionToMouse=t})}.call(this),function(){var t;t=function(){function t(t,e){this.node=t,this.options=null!=e?e:{snap:!0}}return t.prototype.update=function(t){var e,n;return(null!=(n=t.component)?n.isNode():void 0)?(this.node.size=t.component.display.size,this.node.scale=t.component.display.scale,this.options.snap&&(e=t.component.position)):this.node.size=this.node.scale=1,null==e&&(e=t.world.location),this.node.position.x=e.x,this.node.position.y=e.y,this.node.invalidate()},t}(),namespace("Behaviors.Nodes",function(e){return e.Drag=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.cursor="-webkit-grabbing",n.prototype.accept=function(){return!1},n.prototype.start=function(t){return this.originalLocation=t.world.location,map.resetInteraction()},n.prototype.update=function(t){return map.pan(t.world.location.subtract(this.originalLocation),{animate:!1})},n}(Behaviors.Base),namespace("TouchBehaviors",function(e){return e.Pan=t})}.call(this),function(){var t,e,n,i={}.hasOwnProperty,r=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};t=1,e=function(e){function i(){return n=i.__super__.constructor.apply(this,arguments)}return r(i,e),i.prototype.cursor="-webkit-grabbing",i.prototype.accept=function(){return!1},i.prototype.start=function(t){return this.location=t.center,this.originalScale=map.getScale(),map.resetInteraction()},i.prototype.update=function(e){var n;return 1!==e.gesture.scale?(n=this.originalScale*e.gesture.scale*t,map.zoomAt(this.location,n,{absolute:!0})):void 0},i}(Behaviors.Base),namespace("TouchBehaviors",function(t){return t.Zoom=e})}.call(this),function(){concern("ControllerConcerns","Helpers",function(){return ControllerHelpers.Select(this),ControllerHelpers.QuickZoom(this)})}.call(this),function(){concern("ControllerConcerns","Mouse",function(){})}.call(this),function(){var t;t=.3,concern("ControllerConcerns","Touch",function(){var e,n,i,r,o,s,a,l,u,c,h,p,f,d=this;return e=this.display.$el,f=function(t){var n,i,r,o,s,a,l,u;for(t.preventDefault(),i=e.parent().offset(),r=function(t){return new Vector(t.pageX-i.left,t.pageY-i.top)},l=t.gesture.touches,n=s=0,a=l.length;a>s;n=++s)o=l[n],o.location=r(o),o.world={location:currentMap.scene.toWorld(o.location)},o.component=currentMap.scene.pick(o.world.location),o.entity=null!=(u=t.component)?u.entity:void 0,0===n&&(t.location=o.location,t.world={location:o.world.location},t.component=o.component,t.entity=o.entity);return t.center=r(t.gesture.center),t.world.center=currentMap.scene.toWorld(t.center),t},u=function(t){var e;return f(t),"function"==typeof(e=d.tool).onTouch?e.onTouch(t):void 0},i=function(e){var n;return e.gesture.velocityX<t?(f(e),"function"==typeof(n=d.tool).onTouchDrag?n.onTouchDrag(e):void 0):void 0},a=function(){},s=function(t){var e;return f(t),"function"==typeof(e=d.tool).onTouchRelease?e.onTouchRelease(t):void 0},c=function(t){return f(t)},p=function(t){return f(t)},h=function(t){return f(t)},o=function(t){var e;return f(t),"function"==typeof(e=d.tool).onTouchPinch?e.onTouchPinch(t):void 0},l=function(t){return f(t),d.previousTapTimeout=d.currentTapTimeout,d.currentTapTimeout=setTimeout(function(){var e;return"function"==typeof(e=d.tool).onTouchTap?e.onTouchTap(t):void 0},1e3)},n=function(t){var e;return clearTimeout(d.previousTapTimeout),clearTimeout(d.currentTapTimeout),f(t),"function"==typeof(e=d.tool).onTouchDoubleTap?e.onTouchDoubleTap(t):void 0},r=function(t){var e;return f(t),"function"==typeof(e=d.tool).onTouchHold&&e.onTouchHold(t),map.trigger("hold",t)},e.on("touchstart touchmove touchend",function(t){return t.preventDefault()}),e.hammer({prevent_mouseevents:!0}).on("touch",u).on("drag",i).on("swipe",a).on("release",s).on("transform",c).on("transformstart",p).on("transformend",h).on("pinch",o).on("tap",l).on("doubletap",n).on("hold",r)})}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};t=function(){function t(){this.finalize=e(this.finalize,this),this.update=e(this.update,this)}return _.extend(t.prototype,Backbone.Events),t.prototype.update=function(){},t.prototype.finalize=function(){},t}(),namespace("Gestures",function(e){return e.Base=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n}(Gestures.Base),namespace("MouseGestures",function(e){return e.Base=t})}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};t=function(){function t(t){this.map=t,this.onFlick=e(this.onFlick,this),this.onTap=e(this.onTap,this),this.onEnd=e(this.onEnd,this),this.onZoom=e(this.onZoom,this),this.onPan=e(this.onPan,this),this.onUpdate=e(this.onUpdate,this),this.onStart=e(this.onStart,this),jester(this.map.view.el).start(this.onStart).during(this.onUpdate).end(this.onEnd).tap(this.onTap).flick(this.onFlick)}return t.prototype.onStart=function(t,e){return this.originalEvent=e,this.originalScale=this.graph.scene.scale,e.preventDefault()},t.prototype.onUpdate=function(t,e){switch(this.originalEvent=e,t.numTouches()){case 1:return this.onPan(t);case 2:return this.onZoom(t)}},t.prototype.onPan=function(t){var e,n,i;return e=t.touch(0).delta,n=new Vector(e.x(),e.y()),i=n.divide(this.graph.scene.scale),this.graph.setSceneTranslation(this.graph.scene.translation.add(i)),this.graph.refresh()},t.prototype.onZoom=function(t){var e;return e=t.current.scale(),1!==e?(this.graph.setSceneScale(this.originalScale*e),this.graph.refresh()):void 0},t.prototype.onEnd=function(t,e){return this.originalEvent=e},t.prototype.onTap=function(){var t;return t=this.graph.getEventComponent(this.originalEvent),t?this.graph.selection.reset(t.entity):this.graph.selection.reset()},t.prototype.onFlick=function(t,e){switch(e){case"left":return this.graph.panRight();case"right":return this.graph.panLeft()}},t}(),namespace("Interactions.Gestures",function(e){return e.TouchHandler=t})}.call(this),function(){var t;t=1.2,concern("ControllerHelpers","QuickZoom",function(){var e,n,i,r,o,s=this;return n={location:null,scale:null},r=function(e){return currentMap.scene.zoomTo(e,t)},o=function(){var t,e;return null==(t=n.location)&&(n.location=currentMap.scene.graph.center()),null==(e=n.scale)&&(n.scale=currentMap.scene.zoomFitScale()),currentMap.scene.zoomTo(n.location,n.scale)},e=function(t){return currentMap.scene.centerOn(t)},i=function(){return n.location=currentMap.scene.toWorld(s.display.getCenter()),n.scale=currentMap.scene.scale},this.quickZoom=function(n){var s;return s=currentMap.scene.pick(n),currentMap.scene.scale>=t?s&&s instanceof Node?e(s.position):o():(i(),r(n))}})}.call(this),function(){concern("ControllerHelpers","Select",function(){var t=this;return this.select=function(e,n){return null==n&&(n={}),_.defaults(n,{toggle:!1}),e?n.toggle?t.model.selection.toggle(e):t.model.selection.is(e)||t.model.selection.reset(e):t.model.selection.clear(),t.model.trigger("click",e)}})}.call(this),function(){concern("MapViewConcerns","Interaction",function(){var t;return t=new Interactions.KeyboardHandler(this)})}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};t=function(){function t(){this.addContributorShortcuts=e(this.addContributorShortcuts,this),this.addObserverShortcuts=e(this.addObserverShortcuts,this),Shortcuts.down("TAB",function(t){return t.preventDefault()}),this.addObserverShortcuts(),able.to("edit","map")&&this.addContributorShortcuts()}return t.prototype.addObserverShortcuts=function(){var t,e,n;for(Shortcuts.bind("ESC",function(){return map.reset()}),Shortcuts.bind("TAB",function(){return sidebar.toggle()}),Shortcuts.bind("F",function(){return $(".finder input").focus()}),Shortcuts.bind("B",function(){return map.bump()}),Shortcuts.bind("SPACE",function(){return map.isEmbedded()?void 0:Views.Navigation.toggle()}),Shortcuts.bind("PLUS",function(){return map.expand()}),Shortcuts.bind("MINUS",function(){return map.contract()}),e=function(t){return Shortcuts.bind(""+t,function(){return map.refocus({degree:t})})},t=n=0;9>n;t=++n)e(t);return Shortcuts.bind("BACKTICK",function(){return map.clearFocus()}),Shortcuts.bind("S",function(){return map.stabilize()}),Shortcuts.bind("]",function(){return map.zoomIn()}),Shortcuts.bind("[",function(){return map.zoomOut()}),Shortcuts.bind("\\",function(){return map.zoomFit()}),Shortcuts.bind("UP",function(){return map.panUp()}),Shortcuts.bind("DOWN",function(){return map.panDown()}),Shortcuts.bind("LEFT",function(){return map.panLeft()}),Shortcuts.bind("RIGHT",function(){return map.panRight()}),Shortcuts.bind("ENTER",function(){return self.selection.isSingleComponent()?self.promptOrFollowWorkspaceLink(self.selection.first()):void 0}),Shortcuts.bind("A",function(){return map.select("element")}),Shortcuts.bind("ALT+A",function(){return map.select("connection")}),Shortcuts.bind("ALT+SHIFT+A",function(){return map.select("*")}),Shortcuts.bind("V",function(){return sidebar.push(new Views.Virtualization.Index)}),Shortcuts.bind("ALT+SHIFT+L",function(){return self.sidebar.open(new LayoutSettingsView)})},t.prototype.addContributorShortcuts=function(){return Shortcuts.connecting=function(t){return 1===t.which&&t.altKey},Shortcuts.bind("E",function(){return $(".new-element").click()}),Shortcuts.bind("C",function(){return $(".new-connection").click()}),Shortcuts.bind("L",function(){return $(".new-loop").click()}),Shortcuts.up("R",function(){return app.execute(RenameSelectionWithPromptCommand,graph.selection)}),Shortcuts.down("/",function(){return app.execute(ToggleDirectedCommand,graph.selection)}),Shortcuts.bind("D",function(){return app.execute(ToggleDirectionCommand,graph.selection)}),Shortcuts.down("P",function(){return app.execute(PinCommand,graph.selection,graph)}),Shortcuts.down("SHIFT+P",function(){return app.execute(FloatSelectionCommand,graph.selection,graph)}),Shortcuts.down("W",function(){return new AddToOtherWorkspaceView(graph.selection)}),Shortcuts.down("DEL, BACKSPACE",function(){return execute(new Commands.Components.Destroy(map.getSelection()))}),Shortcuts.bind("Z",function(){return app.undo()}),Shortcuts.bind("SHIFT+Z",function(){return app.redo()})},t}(),namespace("Interactions",function(e){return e.KeyboardHandler=t})}.call(this),function(){concern("SceneConcerns","Picking",function(t){var e,n,i,r,o,s;return i=20,n=10,e=10,o=function(e){var n,r,o,s,a,l;for(o=i/t.display.scale,l=t.labels,s=0,a=l.length;a>s;s++)if(r=l[s],r.pickable&&(n=r.display.position.distanceTo(e),o>=n))return r;return null},s=function(e){var i,r,o,s,a,l;for(r=n/t.display.scale,l=t.nodes,s=0,a=l.length;a>s;s++)if(o=l[s],o.pickable&&(i=o.display.position.distanceTo(e),i<=Math.max(r,o.display.radius)))return o;return null},r=function(n){var i,r,o,s,a,l,u,c,h;for(s=e/t.display.scale,h=t.edges,u=0,c=h.length;c>u;u++)if(r=h[u],r.pickable&&(l=n.subtract(r.display.circle.center),i=Math.abs(r.display.circle.radius-l.magnitude()),i<=.5*Math.max(s,r.display.path.width)&&(a=Vector.cross(r.display.vector,n.subtract(r.display.midpoint))*Vector.cross(r.display.vector,r.display.circle.center.subtract(r.display.midpoint))>0,o=r.isFull()?a:!a)))return r;return null},this.pick=function(t){return o(t)||s(t)||r(t)}})}.call(this),function(){var t,e,n,i,r,o;r=1,t=.1,i=TWEEN.Easing.Cubic.InOut,e=500,n=1e3,o=function(){function o(t){var n=this;this.model=t,this.reset(),this.model.on("change:hover",function(t,i){return n.reset(),i?n.timeout=setTimeout(function(){return n.transition()},e):void 0})}return o.prototype.update=function(t){var e,n,i,r,o,s,a,l,u,c,h,p,f,d,m,g;if(this.highlighted={},this.showcased={},this.hover=this.model.get("hover"),this.active=this.model.get("active"),this.selected=ArrayHelper.keymap(this.model.selection.cids()),this.hover||this.active||this.model.selection.length>0){for(p=t.nodes.models,r=0,l=p.length;l>r;r++)if(i=p[r],this.engaged(i))for(this.showcase(i),f=i.edges,o=0,u=f.length;u>o;o++)e=f[o],this.showcaseEdge(e);for(d=t.edges.models,s=0,c=d.length;c>s;s++)e=d[s],this.engaged(e)&&(this.showcaseEdge(e),this.highlight(e.from),this.highlight(e.to));for(m=t.labels.models,g=[],a=0,h=m.length;h>a;a++)n=m[a],this.engaged(n)?(this.showcase(n),g.push(function(){var t,i,r,o;for(r=n.edges,o=[],i=0,t=r.length;t>i;i++)e=r[i],this.showcaseEdge(e),this.highlight(e),this.highlight(e.from),o.push(this.highlight(e.to));return o}.call(this))):g.push(void 0);return g}return this.showcased=!1},o.prototype.include=function(t){return!this.showcased||this.showcased[t.cid]},o.prototype.highlight=function(t){return this.highlighted[t.cid]=!0},o.prototype.showcase=function(t){return this.showcased[t.cid]=!0},o.prototype.showcaseEdge=function(t){return this.showcase(t)&&this.showcase(t.from)&&this.showcase(t.to)},o.prototype.engaged=function(t){return t.active||t===this.hover||t===this.active||this.selected[t.cid]},o.prototype.reset=function(){var t;return null!=(t=this.tween)&&t.stop(),this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.backgroundOpacity=this.foregroundOpacity=r},o.prototype.transition=function(){var e;return e=this,this.tween=new TWEEN.Tween({opacity:r}).to({opacity:t},n).easing(i).onUpdate(function(){return e.backgroundOpacity=this.opacity}),this.tween.start()},o}(),namespace("window",function(t){return t.Showcase=o})}.call(this),function(){var t,e,n,i=function(t,e){return function(){return t.apply(e,arguments)}},r={}.hasOwnProperty,o=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};t=.1,e=function(e){function r(){return this.onTouchDoubleTap=i(this.onTouchDoubleTap,this),this.onTouchTap=i(this.onTouchTap,this),this.onMouseWheel=i(this.onMouseWheel,this),this.onMouseHold=i(this.onMouseHold,this),this.onMouseDoubleClick=i(this.onMouseDoubleClick,this),this.onMouseClick=i(this.onMouseClick,this),this.onMouseLeave=i(this.onMouseLeave,this),this.onMouseEnter=i(this.onMouseEnter,this),this.accept=i(this.accept,this),this.activate=i(this.activate,this),this.dispose=i(this.dispose,this),n=r.__super__.constructor.apply(this,arguments)}return o(r,e),r.prototype.cursor="default",r.prototype.dispose=function(){},r.prototype.activate=function(t){return this.controller=t,this.display=this.controller.display,this.model=this.display.model,this.map=this.model.get("map"),this.scene=this.map.scene,this.selection=this.model.selection},r.prototype.setCursor=function(t){return this.display.setCursor(t)},r.prototype.accept=function(){return!0},r.prototype.onMouseEnter=function(t){return t.component.lock()},r.prototype.onMouseLeave=function(t){return t.component.unlock()},r.prototype.onMouseClick=function(t){return this.controller.select(t.component,{toggle:t.shiftKey||t.metaKey})},r.prototype.onMouseDoubleClick=function(t){return this.controller.quickZoom(t.world.location)},r.prototype.onMouseHold=function(){},r.prototype.onMouseWheel=function(e){var n;return n=1+e.wheel.delta*t,map.zoomAt(e.location,n)},r.prototype.onTouchTap=function(t){return this.controller.select(t.component)},r.prototype.onTouchDoubleTap=function(t){return this.onMouseDoubleClick(t)},r}(Backbone.Model),namespace("window",function(t){return t.MapTool=e})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.defaultCursor="default",n.prototype.intention=function(t){switch(t.modifiers){case"SHIFT":case"META":return"select";case"ALT":return"connect";case"ALT+SHIFT":return"zoom";case"":return"unknown"}},n.prototype.accept=function(t){return this.action?this.action.accept(t):"zoom"!==this.intention(t)},n.prototype.onMouseMove=function(t){return this.action?void 0:this.setCursor(t.component?"pointer":this.defaultCursor)},n.prototype.onMouseDown=function(t){var e,n,i;return n=t.component,this.action=function(){switch(this.intention(t)){case"zoom":return new MouseActions.Zoom(this.model);case"select":return null;case"connect":if((null!=n?n.isNode():void 0)&&able.to("edit","maps"))return new MouseActions.Connect(this.model);break;default:return n?(n.isEdge()&&able.to("edit","maps")&&(i=n,e=function(){switch(i.hitTarget(t.world.location)){case"head":return new MouseActions.Redirect(this.model,"to");case"tail":return new MouseActions.Redirect(this.model,"from");default:return new MouseActions.Reshape(this.model)}}.call(this)),null!=e?e:e=new MouseActions.Move(this.model)):new MouseActions.Pan(this.model)}}.call(this),this.action?(this.setCursor(this.action.cursor),this.action.start(t)):void 0},n.prototype.onMouseDrag=function(t){var e;return null!=(e=this.action)?e.update(t):void 0},n.prototype.onMouseUp=function(t){var e;return null!=(e=this.action)&&e.finalize(t),this.action=null,this.setCursor(this.defaultCursor)},n.prototype.onMouseClick=function(t){var e,i,r;return able.to("edit","maps")?(t.shiftKey||t.metaKey)&&this.selection.isLabel()&&(null!=(r=t.entity)?r.isConnection():void 0)?(i=this.selection.first().entity,e=t.entity,execute(new Commands.Loops.ToggleConnection(i,e)).fail(function(){return alert("Unable to update loop")})):t.altKey&&!t.component?Workflows.createElementAtPosition({position:t.world.location.toJSON()}):n.__super__.onMouseClick.apply(this,arguments):n.__super__.onMouseClick.apply(this,arguments)},n.prototype.onMouseLeave=function(t){return!this.action||this.action.accept(t)?n.__super__.onMouseLeave.apply(this,arguments):void 0},n.prototype.onMouseHold=function(t){var e,n,i,r;return n=map.getFocus(),t.component?!n.isActive()||t.shiftKey||t.metaKey?(r=new ComponentSelection([t.component]),e=t.component.isNode()?1:0,i={},i.roots=r.nodes({indirect:!0}),map.isFocused()||(i.degree=e),n.set(i)):0===n.get("degree")?n.set({degree:1}):n.extend(t.component):n.isActive()?n.reset():void 0},n.prototype.onMouseGesture=function(){},n.prototype.onTouch=function(){},n.prototype.onTouchDrag=function(t){return this.action||(this.action=new TouchBehaviors.Pan(this.model),this.action.start(t)),this.action.update(t)},n.prototype.onTouchPinch=function(t){return this.action||(this.action=new TouchBehaviors.Zoom(this.model),this.action.start(t)),this.action.update(t)},n.prototype.onTouchRelease=function(t){var e;return null!=(e=this.action)&&e.finalize(t),this.action=null,this.setCursor(this.defaultCursor)},n}(MapTool),namespace("window",function(e){return e.MoveSelectTool=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.initialize=function(){var t;return null!=(t=this.model)?t:this.model=new n.Model},n.prototype.init=function(){return this.initializeRouter(),this.initializeModel(),this.initializeViews(),MapViewConcerns.Imports(this),MapViewConcerns.API(this),this.addWindowListeners(),this.addSessionListeners(),this.render()},n.prototype.initializeRouter=function(){return window.router=this.router=new Routers.MapRouter(this)},n.prototype.initializeModel=function(){return this.model.set("view",this),this.map=this.model},n.prototype.initializeViews=function(){return this.overlays=new OverlaysContainer({model:this.model}),this.sidebar=this.overlays.sidebar,this.viewport=this.overlays.viewport,this.display=new MapDisplay({model:this.model}),window.sidebar=this.sidebar},n.prototype.render=function(){return $("body").css("overflow","hidden"),this.$el.attr("id","map").addClass("map").append(this.display.render().el).append(this.overlays.render().el),this.resize(),this},n.prototype.resize=function(){var t,e,n,i;return t=$(window),n=window.innerHeight,e=t.height(),n&&n!==e?(i=e-n,e=n):i=0,$("body").css({"box-sizing":"border-box","padding-top":i}),this.$el.height(e),this.display.resize(),this.recenter(),this.$el.triggerHandler("resize")},n.prototype.recenter=function(t){return this.updateViewport(),this.display.recenter(t)},n.prototype.updateViewport=function(){return this.display.viewportBounds=this.viewport.update()},n.prototype.busy=function(t,e,n){var i,r,o=this;return _.isFunction(e)&&(n=e,e={}),e=_.defaults({},e,{wait:!0}),t===!1?(this.clearBusyTimeout(),this.overlays.modal.hide()):(i=function(){return o.overlays.modal.show(t,n)},e.wait?null!=(r=this.busyTimeout)?r:this.busyTimeout=setTimeout(i,1e3):(this.clearBusyTimeout(),i()))},n.prototype.clearBusyTimeout=function(){return clearTimeout(this.busyTimeout),this.busyTimeout=null},n.prototype.reset=function(){return this.clearFocus()},n.prototype.addWindowListeners=function(){var t,e=this;return t=_.debounce(function(){return e.resize()},500),$(window).on("resize",t).on("blur",function(){return e.model.set("idle",!0),e.model.trigger("blur")})},n.prototype.addSessionListeners=function(){var t=this;return Dispatch.on("load",function(){var e;return Backbone.history.start({root:currentAccount.urlFor(),pushState:!1}),t.trigger("load"),t.model.set({map:currentMap,perspective:currentPerspective}),Session.on("change:map",function(){return t.model.set("map",currentMap)}),Session.on("change:perspective",function(){return t.model.set("perspective",currentPerspective)}),e=t.model.get("defaultSidebarView"),e&&sidebar.push(e,{animate:!1}),t.recenter(),sidebar.$el.on("toggle",function(){return t.recenter({seamless:!0})}),t.trigger("ready")})},n}(Backbone.View),namespace("window",function(e){return e.MapView=t})}.call(this),function(){var t,e={}.hasOwnProperty,n=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},i=[].slice;MapView.Model=function(e){function r(){return t=r.__super__.constructor.apply(this,arguments)}return n(r,e),r.prototype.defaults=function(){return{view:null,theme:StyleGuide.base(),map:new Map,tool:new MoveSelectTool,display:new CanvasDisplay,perspective:null,mode:"observer",hover:null,active:null,quality:1,selection:[]}},r.prototype.initialize=function(){return this.selection=new ComponentSelection,this.listenTo(this,"all",this.onEvent)},r.prototype.onEvent=function(){var t,e;switch(t=1<=arguments.length?i.call(arguments,0):[],e=t[0]){case"blur":return this.onBlur();case"change:selection":return this.onSelectionChanged();case"change:perspective":return this.onPerspectiveChanged()}},r.prototype.onBlur=function(){return this.resetInteraction()},r.prototype.resetInteraction=function(){return this.set({hover:null,active:null})},r.prototype.load=function(t){return Blueprint.wrap(t).build()},r.prototype.onSelectionChanged=function(){return this.selection.reset(this.get("selection"))},r.prototype.onPerspectiveChanged=function(){var t;return null!=(t=this.get("perspective"))?t.rebuild():void 0},r}(Backbone.Model)}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};t=function(){function t(t){this.update=e(this.update,this),this.cancel=e(this.cancel,this),this.animate=e(this.animate,this),this.animating=e(this.animating,this),this.stop=e(this.stop,this),this.start=e(this.start,this),this.callback=t||this.update}return t.prototype.start=function(){return this.animating()?void 0:this.animate()},t.prototype.stop=function(){return this.animating()?this.cancel():void 0},t.prototype.animating=function(){return null!=this.request},t.prototype.animate=function(){var t;return t=new Date,this.fps=1e3/(t-this.lastCall),this.lastCall=t,this.request=requestAnimationFrame(this.animate),this.callback()},t.prototype.cancel=function(){return cancelAnimationFrame(this.request),this.request=null},t.prototype.update=function(){},t}(),namespace("window",function(e){return e.AnimationLoop=t})}.call(this),function(){concern("SceneConcerns","Conversion",function(t){return t.toScreen=function(t){var e,n;return t instanceof Vector?t.add(this.display.translation).multiply(this.display.scale).add(this.display.offset):t instanceof Rectangle?(n=this.toScreen(t.min()),e=this.toScreen(t.max()),Rectangle.withCorners(n,e)):void 0},t.toWorld=function(t){var e,n;return t instanceof Vector?t.subtract(this.display.offset).divide(this.display.scale).subtract(this.display.translation):t instanceof Rectangle?(n=this.toWorld(t.min()),e=this.toWorld(t.max()),Rectangle.withCorners(n,e)):void 0},t.toWorldScale=function(t){return t instanceof Vector?t.divide(this.display.scale):void 0}})}.call(this),function(){var t;t=function(){function t(){this.stylist=new GraphStylist,this.tailor=new GraphTailor,this.filters=[]}return t.prototype.prepare=function(t){var e,n,i,r,o,s,a,l,u,c,h,p,f;for(this.stylist.use(t.guide),c=t.graph.nodes.models,r=0,a=c.length;a>r;r++)i=c[r],this.style(t,i);for(h=t.graph.edges.models,o=0,l=h.length;l>o;o++)e=h[o],this.style(t,e);for(p=t.graph.labels.models,f=[],s=0,u=p.length;u>s;s++)n=p[s],f.push(this.style(t,n));return f},t.prototype.process=function(t,e){return null==e&&(e={}),_.defaults(e,{cull:!0}),e.redecorate&&(e.style=e.dress=e.adjust=!0),e.cull&&(e.bounds=t.bounds.clipping.copy().scale(1.2)),t.clear(),t.prepare(),this.stylist.use(t.guide),this.processComponents(t,e),t.finalize()},t.prototype.processComponents=function(t,e){return this.processNodes(t,e),this.processEdges(t,e),this.processLabels(t,e)},t.prototype.processNodes=function(t,e){var n,i,r,o,s;for(e.culled=function(t,e){return!t.position||!e.contains(t.position)},e.visible=function(t){return"visible"===t.style.visibility},o=t.graph.nodes.models,s=[],i=0,r=o.length;r>i;i++)n=o[i],this.processComponent(t,n,e),n.culled?(n.display.position.x=n.position.x,s.push(n.display.position.y=n.position.y)):s.push(void 0);return s},t.prototype.processEdges=function(t,e){var n,i,r,o,s;for(e.culled=function(t){return t.from.culled&&t.to.culled},e.visible=function(t){return"visible"===t.style.visibility&&t.from.visible&&t.to.visible},o=t.graph.edges.models,s=[],i=0,r=o.length;r>i;i++)n=o[i],s.push(this.processComponent(t,n,e));return s},t.prototype.processLabels=function(t,e){var n,i,r,o,s;for(e.culled=function(t,e){return!t.position||!e.contains(t.position)},e.visible=function(t){return"visible"===t.style.visibility&&_.all(t.edges,function(t){return t.visible})},o=t.graph.labels.models,s=[],i=0,r=o.length;r>i;i++)n=o[i],s.push(this.processComponent(t,n,e));return s},t.prototype.processComponent=function(t,e,n){return RenderBenchmarks.start("cull"),e.culled=n.cull&&n.culled(e,n.bounds),RenderBenchmarks.stop("cull"),(e.fresh||!e.culled)&&(RenderBenchmarks.start("style"),(e.fresh||e.style.invalid||n.style)&&this.style(t,e),e.visible=n.visible(e),RenderBenchmarks.stop("style"),(e.fresh||e.visible)&&(RenderBenchmarks.start("dress"),(e.fresh||e.display.invalid||n.dress)&&this.dress(t,e),RenderBenchmarks.stop("dress"),RenderBenchmarks.start("adjust"),this.adjust(t,e),RenderBenchmarks.stop("adjust"),RenderBenchmarks.start("filter"),this.filter(t,e),RenderBenchmarks.stop("filter"),RenderBenchmarks.start("animate"),this.animate(t,e),RenderBenchmarks.stop("animate"),this.reconcile(t,e),t.schedule(e))),e.fresh=!1},t.prototype.style=function(t,e){return this.stylist.decorate(t,e),e.style.ready=!0,e.style.invalid=!1,e.invalidate("layout"),e.invalidate("display")},t.prototype.dress=function(t,e){var n;return e.active=t.active===e,e.hover=t.hover===e,e.highlighted=null!=(n=t.showcase)?n.highlighted[e.cid]:void 0,this.tailor.dress(t,e),e.display.invalid=!1},t.prototype.adjust=function(t,e){return this.tailor.adjust(t,e)},t.prototype.filter=function(t,e){var n,i,r,o,s;for(o=this.filters,s=[],i=0,r=o.length;r>i;i++)n=o[i],s.push(n.apply(t,e));return s},t.prototype.animate=function(){},t.prototype.reconcile=function(t,e){return this.tailor.reconcile(t,e),e.display.ready=!0},t}(),namespace("window",function(e){return e.RenderPipeline=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.defaults=function(){return{graph:new Graph,theme:StyleGuide.base()}},n.prototype.initialize=function(){var t;return this.theme=this.get("theme"),this.base=this.get("graph"),this.layout=this.get("layout"),this.placement=this.get("placement"),this.settings={minFontSize:4,minConnectionFontSize:6},this.graph=new Graph,null!=(t=this.layout)&&t.setGraph(this.graph),this.filter=new Perspective,this.focus=new Focus,this.listenTo(this.focus,"change",this.rebuild),this.renderPipeline=new RenderPipeline,this.nodes=[],this.edges=[],this.labels=[],this.background={opacity:1,nodes:[],edges:[],labels:[]},this.foreground={opacity:1,nodes:[],edges:[],labels:[]},SceneConcerns.Transformation(this),SceneConcerns.TransformationHelpers(this),SceneConcerns.Conversion(this),SceneConcerns.Picking(this),this.listenTo(this.base,"add",this.onComponentAdded),this.listenTo(this.base,"remove",this.onComponentRemoved)
},n.prototype.onComponentAdded=function(t){return this.initializeComponent(t),this.graph[t.collectionName].add(t),this.resume()},n.prototype.onComponentRemoved=function(t){return this.graph[t.collectionName].remove(t),this.resume()},n.prototype.initializeComponent=function(t){var e;return t.isNode()&&!t.position?t.position=(null!=(e=this.placement)?e.position(t):void 0)||new Vector(0,0):void 0},n.prototype.all=function(){return this.components},n.prototype.each=function(t){return _.each(this.components,t)},n.prototype.visit=function(t){return this.each(t)},n.prototype.map=function(t){return _.map(this.components,t)},n.prototype.collect=function(t){return this.map(t)},n.prototype.simulate=function(){var t;return null!=(t=this.layout)?t.simulate():void 0},n.prototype.pause=function(){var t;return null!=(t=this.layout)?t.pause():void 0},n.prototype.resume=function(){var t;return null!=(t=this.layout)?t.resume.apply(t,arguments):void 0},n.prototype.clear=function(){return this.nodes.length=this.edges.length=this.labels.length=0,this.background.nodes.length=this.background.edges.length=this.background.labels.length=0,this.foreground.nodes.length=this.foreground.edges.length=this.foreground.labels.length=0},n.prototype.prepare=function(){var t;return null!=(t=this.showcase)?t.update(this.graph):void 0},n.prototype.dress=function(t){return this.renderPipeline.style(this,t),this.renderPipeline.dress(this,t),this.renderPipeline.adjust(this,t),this.renderPipeline.reconcile(this,t)},n.prototype.schedule=function(t){var e,n;return n=!this.showcase||this.showcase.include(t)?this.foreground:this.background,e=t.isLabel()?"labels":t.isNode()?"nodes":"edges",n[e].push(t)},n.prototype.finalize=function(){return this.nodes=this.foreground.nodes.concat(this.background.nodes),this.edges=this.foreground.edges.concat(this.background.edges),this.labels=this.foreground.labels.concat(this.background.labels),this.components=[].concat(this.nodes,this.edges,this.labels)},n.prototype.displaySize=function(t){return t*this.scale},n.prototype.invalidate=function(){return this.base.each(function(t){return t.invalidate()})},n.prototype.getTrueBounds=function(){return this.refresh({cull:!1,force:!0}),this.graph.bounds()},n.prototype.refresh=function(t){return this.renderPipeline.process(this,t)},n.prototype.rebuild=function(){return this.ready=!1,this.pause(),this.graph&&this.stopListening(this.graph),this.dataset&&this.stopListening(this.dataset),this.guide=this.theme.clone(),this.dataset=this.base.dataset(),log.info("Rebuilding from graph, dataset",this.base.summary(),this.dataset.summary()),null!=this.perspective?(this.perspective.update(this.dataset),this.perspective.apply(this.dataset,this.guide),this.legend=this.perspective.isHollow()?null:this.perspective.getLegend()):this.legend=null,this.filter.apply(this.dataset,this.guide),this.graph=this.guide.filter(this.base),this.graph.each(this.initializeComponent,this),this.listenTo(this.graph,"add",this.initializeComponent),this.focus.apply(this.graph,this.guide),this.renderPipeline.prepare(this),this.layout.simulate(this.graph),this.ready=!0,this.resume(),this.focus?log.info(this.focus.attributes):void 0},n.prototype.isFocused=function(){return this.focus.isActive()},n.prototype.refocus=function(){var t;return(t=this.focus).refresh.apply(t,arguments)},n.prototype.expand=function(){return this.focus.expand()},n.prototype.contract=function(){return this.focus.contract()},n.prototype.extend=function(){var t;return(t=this.focus).extend.apply(t,arguments)},n.prototype.clearFocus=function(){return this.focus.reset()},n}(Backbone.Model),namespace("window",function(e){return e.Scene=t})}.call(this),function(){var t,e,n;t=.01,n=TWEEN.Easing.Quadratic.InOut,e=1e3,concern("SceneConcerns","Transformation",function(i){var r,o,s,a,l=this;return i.offset=new Vector(0,0),i.scale=1,i.translation=new Vector(0,0),i.display={offset:i.offset,scale:i.scale,translation:i.translation},i=this,s=function(){return new TWEEN.Tween({scale:i.display.scale}).to({scale:i.scale},e).easing(n).onUpdate(function(){return i.display.scale=this.scale})},a=function(){return new TWEEN.Tween(i.display.translation.copy()).to(i.translation.copy(),e).easing(n).onUpdate(function(){return i.display.translation.x=this.x,i.display.translation.y=this.y})},r=function(e){var n,i,r,o,u,c;for(i=[],e.scale&&(l.scale=Math.max(t,e.scale),i.push(s())),(e.translate||e.translation)&&(l.translation=null!=(u=e.translation)?u:e.translation=l.translation.add(e.translate),i.push(a())),e.offset&&(l.display.offset=l.offset=e.offset),c=[],r=0,o=i.length;o>r;r++)n=i[r],c.push(n.start());return c},o=function(e){var n;return e.scale&&(l.scale=l.display.scale=Math.max(t,e.scale)),(e.translate||e.translation)&&(n=e.translation||l.translation.add(e.translate),l.translation=l.display.translation=n),e.offset?l.offset=l.display.offset=e.offset:void 0},this.transform=function(t,e){return null==e&&(e={animate:!0}),e.animate?r(t):o(t),this.trigger("transform")}})}.call(this),function(){var t,e,n,i;e=.25,n=.25,i=.2,t=1,concern("SceneConcerns","TransformationHelpers",function(){var r;return r=this,this.zoom=function(t,e){return this.transform({scale:this.scale*t},e)},this.zoomTo=function(t,e,n){return this.transform({translation:t.invert(),scale:e},n)},this.zoomAt=function(t,e,n){var i;return null==n&&(n={}),n=_.extend({absolute:!1},n),n.absolute||(e*=this.scale),i=this.toWorld(t),this.transform({scale:e},{animate:!1}),this.transform({translate:this.toWorld(t).subtract(i)},{animate:!1})},this.zoomIn=function(t){return this.zoom(1+n,t)},this.zoomOut=function(t){return this.zoom(1-n,t)},this.zoomFit=function(e){return null==e&&(e=null),null==e&&(e=this.getTrueBounds()),this.zoomTo(e.center(),Math.min(this.zoomFitScale(e),t))},this.zoomFitScale=function(t){var e,n,r,o,s;return null==t&&(t=null),null==t&&(t=this.getTrueBounds()),s=map.getViewportBounds({apparent:!0}),o=s.width()*(1-i),e=s.height()*(1-i),r=o/t.width(),n=e/t.height(),Math.min(r,n)},this.pan=function(t,e){return this.transform({translation:this.translation.add(t)},e)},this.panUp=function(){return this.panVertically(Vector.up())},this.panDown=function(){return this.panVertically(Vector.down())},this.panLeft=function(){return this.panHorizontally(Vector.right())},this.panRight=function(){return this.panHorizontally(Vector.left())},this.panVertically=function(t){return this.panScreen(t.multiply(map.getViewportHeight()*e))},this.panHorizontally=function(t){return this.panScreen(t.multiply(map.getViewportWidth()*e))},this.panScreen=function(t,e){return this.pan(this.toWorldScale(t),e)},this.center=function(t){return null==t&&(t=null),this.centerOn((t||this.graph.bounds()).center())},this.centerOn=function(t,e){return this.transform({translation:t.negate()},e)}})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.className="display content scene",n.prototype.attributes={tabindex:1},n.prototype.initialize=function(){return this.display=this.model.get("display"),this.controller=this.display.getController(this),this.viewport=this.model.get("view").viewport,this.showcase=new Showcase(this.model),this.initializeAnimationLoop(),this.listenTo(this.model,"change:map",this.onMapChange),this.listenTo(this.model,"change:perspective",this.onPerspectiveChange),this.listenTo(this.model,"change:display",this.onDisplayChange)},n.prototype.initializeAnimationLoop=function(){var t,e;return t=this,e=function(){return t.update()},this.loop=new AnimationLoop(e),this.loop.start()},n.prototype.focus=function(){return this.$el.focus()},n.prototype.render=function(){return this.$el.html(this.display.render().el),this},n.prototype.update=function(){return RenderBenchmarks.start(),this.refresh(),TWEEN.update(),RenderBenchmarks.stop()},n.prototype.refreshPerspective=function(){return this.refresh({rebuild:!0,redecorate:!0}),this.scene.resume({temperature:1})},n.prototype.refresh=function(t){return null==t&&(t={}),this.scene&&this.scene.ready?(this.scene.bounds={clipping:this.scene.toWorld(this.clippingBounds),viewport:{screen:this.viewportBounds,world:this.scene.toWorld(this.viewportBounds)}},this.scene.active=this.model.get("active"),this.scene.hover=this.model.get("hover"),t.rebuild&&this.scene.rebuild(),this.scene.refresh(t),RenderBenchmarks.start("render"),this.display.draw(this.scene,t),RenderBenchmarks.stop("render"),this):void 0},n.prototype.getCenter=function(){return this.viewportBounds.center()},n.prototype.getScreenshot=function(t){return this.display.getScreenshot(t)},n.prototype.setViewportBounds=function(t){return this.viewportBounds=t},n.prototype.resize=function(t,e){return t||(t=this.$el.width()),e||(e=this.$el.height()),this.clippingBounds=new Rectangle(0,0,t,e),this.display.resize(t,e)},n.prototype.start=function(){return this.loop.start()},n.prototype.stop=function(){return this.loop.stop()},n.prototype.setCursor=function(t){return this.$el.css("cursor",t)},n.prototype.resetCursor=function(){return this.setCursor("default")},n.prototype.resetShowcase=function(){return this.showcase.reset()},n.prototype.onDisplayChange=function(){},n.prototype.onMapChange=function(){return this.map&&(this.scene.pause(),this.stopListening(this.map),this.stopListening(this.scene)),this.showcase.reset(),this.map=this.model.get("map"),null==this.map.scene&&this.map.initializeScene(),this.scene=this.map.scene,this.scene.showcase=this.showcase,this.scene.perspective=this.model.get("perspective"),this.scene.rebuild(),this.listenTo(this.map,"load",this.onMapLoad),this.listenTo(this.scene,"transform",this.resetShowcase),this.recenter(),this.map.visited?this.scene.resume({temperature:.8}):(map.busy(),this.map.load()),this.refresh()},n.prototype.recenter=function(t){var e,n;if(this.scene)return t=_.defaults({},t,{seamless:!1}),n={offset:this.viewportBounds.center()},t.seamless&&!this.scene.offset.equals({x:0,y:0})&&(e=n.offset.subtract(this.scene.offset).negate(),n.translate=this.scene.toWorldScale(e)),this.scene.transform(n,{animate:!1})},n.prototype.onMapLoad=function(){return this.refresh({rebuild:!0}),map.busy(!1),currentMap.zoomFitOnLoad?_.delay(function(){return map.zoomFit()},1e3):void 0},n.prototype.onPerspectiveChange=function(){var t=this;return this.model.previous("perspective")&&this.stopListening(this.model.previous("perspective")),this.model.has("perspective")&&this.listenTo(this.model.get("perspective"),"reset",function(){return t.refreshPerspective()}),this.scene.perspective=this.model.get("perspective"),this.refreshPerspective()},n}(Backbone.View),namespace("window",function(e){return e.MapDisplay=t})}.call(this),function(){var t,e,n,i,r,o,s={}.hasOwnProperty,a=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};t=function(t){function e(){return i=e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.id="mapsPage",e.prototype.label="Maps",e.prototype.icon="map",e.prototype.className="maps-index",e.prototype.template=template("main::maps/index"),e.prototype.events={"click .new-map":"newMap"},e.prototype.render=function(){return this.$el.html(this.template()),this.list=new n({el:this.$el.find(".maps")}),this.list.render(),this},e.prototype.newMap=function(){var t;return t=new Commands.Maps.New,t.execute()},e}(Backbone.View),n=function(t){function n(){return r=n.__super__.constructor.apply(this,arguments)}return a(n,t),n.prototype.tagName="ul",n.prototype.initialize=function(){return this.listenTo(Maps,"add",this.renderOne),this.listenTo(Maps,"reset",this.render),this.listenTo(Dispatch,"change:map change:defaultmap",this.render)},n.prototype.render=function(){var t,n;return t=Maps.collect(function(t){return new e({model:t}).render().el}),(n=this.$el.empty().addClass("nav nav-tabs nav-stacked")).append.apply(n,t),this},n.prototype.renderOne=function(t){var n;return n=new e({model:t}),this.$el.append(n.render().el)},n}(Backbone.View),e=function(t){function e(){return o=e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.tagName="li",e.prototype.className="map",e.prototype.template=template("main::maps/list_item"),e.prototype.events={"click .more-btn":"more"},e.prototype.initialize=function(){return this.map=this.model,this.listenTo(this.map,"change",this.render),this.listenTo(this.map,"destroy",this.remove)},e.prototype.render=function(){var t;return t={url:urlFor({map:this.map}),name:this.map.get("name"),"default":Settings.isDefaultMap(this.map)},this.$el.html(this.template(t)),this.map===currentMap&&this.$el.addClass("active"),this},e.prototype.more=function(t){return t.preventDefault(),sidebar.push(new Views.Maps.Show({model:this.map}))},e}(Backbone.View),namespace("Views.Maps",function(e){return e.Index=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.className="preview",n.prototype.initialize=function(){return this.display=new CanvasDisplay({el:this.el,legend:!1}),this.scene=new Scene,this.scene.showcase={foregroundOpacity:1,backgroundOpacity:1,update:function(){},include:function(){return!0}},this.graph=this.scene.get("graph"),this.initializeScene(this.scene)},n.prototype.render=function(){return this.$el.css("position","relative"),this.display.render(),this},n.prototype.resize=function(){return this.width=this.$el.width(),this.height=this.$el.height(),this.display.resize(this.width,this.height)},n.prototype.draw=function(t){return this.scene.guide=t,this.updateScene(this.scene),this.scene.refresh({cull:!1,redecorate:!0}),this.display.draw(this.scene)},n}(Backbone.View),namespace("Views.Maps",function(e){return e.Preview=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.className="maps-show",n.prototype.template=template("main::maps/show"),n.prototype.events={"click .edit-perspective":"editPerspective"},n.prototype.initialize=function(){return this.map=this.model},n.prototype.render=function(){return this.$el.html(this.template()),this.initializeName(),this.initializeDescription(),this},n.prototype.initializeName=function(){var t,e=this;return t={actions:"edit",value:function(){return e.map.get("name")}},this.$name=this.$el.find(".map-name"),this.$name.editable(t).on("update",function(t,n){var i;return i=new Commands.Maps.Rename(e.map,n),execute(i).fail(function(){return e.$name.editable("edit",{value:n}),alert("Unable to rename map. Please try again.")})})},n.prototype.initializeDescription=function(){var t,e=this;return t={editor:"markdown",format:function(t){return t?marked(t):'<span class="placeholder">Add Description</span>'},value:function(){return e.map.get("description")},placeholder:'<span class="placeholder">Add map description</span>'},this.$description=this.$el.find(".map-description"),this.$description.editable(t).on("update",function(t,n){var i;return i=new Commands.Maps.Update(e.map,"description",n),execute(i).fail(function(){return e.$description.editable("edit",{value:n}),alert("Unable to update description. Please try again.")})})},n.prototype.editPerspective=function(){return Workflows.editPerspective(currentPerspective)},n}(Backbone.View),namespace("Views.Maps",function(e){return e.Show=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.className="members-overview",n.prototype.template=template("main::members/overview"),n.prototype.events={"click .new-member":"newMember"},n.prototype.initialize=function(){},n.prototype.render=function(){return this.$el.html(this.template()),this.$el.find("[title]").tooltip(),this},n.prototype.newMember=function(){return Workflows.manageMembers()},n}(Backbone.View),namespace("Views.Members",function(e){return e.Overview=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.className="loader modal-bare",n.prototype.template=template("main::modals/loader"),n.prototype.afterRender=function(){return this.spinner=this.$el.find(".spinner").spinner({autoplay:!0})},n.prototype.onSubmit=function(){},n.prototype.onCancel=function(){},n}(Views.Modals.Base),namespace("Views.Modals",function(e){return e.Loader=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.className="prompt",n.prototype.template=template("main::modals/prompt"),n.prototype.initialize=function(){return this.deferred=new $.Deferred,this.promise=this.deferred.promise()},n.prototype.afterRender=function(){return this.$input=this.$el.find("input[name=value]"),this.$input.val(this.model.value)},n.prototype.focus=function(){return this.$input.select().focus()},n.prototype.onSubmit=function(){var t;return t=this.$input.val().trim(),t?(this.resolve(t),this.close()):this.cancel()},n.prototype.onCancel=function(){return this.reject()},n.prototype.resolve=function(t){var e;return"function"==typeof(e=this.model).callback&&e.callback(void 0,t),this.deferred.resolve(t)},n.prototype.reject=function(t){var e;return"function"==typeof(e=this.model).callback&&e.callback(t),this.deferred.reject(t)},n}(Views.Modals.Base),namespace("Views.Modals",function(e){return e.Prompt=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.className="navigation-index",n.prototype.template=template("main::navigation/index"),n.prototype.events={"click [data-action]":"perform"},n.prototype.initialize=function(){return this.maps=new Views.Navigation.MapList,this.perspectives=new Views.Navigation.PerspectiveList},n.prototype.render=function(){return this.$el.html(this.template),this.$el.replace("maps",this.maps),this.$el.replace("perspectives",this.perspectives),this.$el.find(".add-map, .add-perspective").tooltip({placement:"right"}),this},n.prototype.perform=function(t){var e;return e=$(t.currentTarget).attr("data-action").camelize(),this[e]()},n.prototype.newMap=function(){return Workflows.addMap()},n.prototype.newPerspective=function(){return Workflows.addPerspective()},n.prototype.manageAttributes=function(){return map.sidebar.push(new Views.Attributes.Index)},n.prototype.manageMembers=function(){return Workflows.manageMembers()},n.prototype.manageSettings=function(){return map.sidebar.push(new Views.Settings.Index)},n.prototype.renameAccount=function(){var t;return t=new Views.Accounts.RenameModal,t.show()},n.prototype.deleteAccount=function(){var t;return t=new Views.Accounts.DeleteModal,t.show()},n}(Backbone.View),namespace("Views.Navigation",function(e){return e.Index=t})}.call(this),function(){var t,e,n,i,r={}.hasOwnProperty,o=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};t=function(t){function i(){return n=i.__super__.constructor.apply(this,arguments)}return o(i,t),i.prototype.tagName="ul",i.prototype.className="maps nav nav-pills nav-stacked",i.prototype.initialize=function(){return this.listenTo(Maps,"add remove reset",this.render),this.listenTo(Dispatch,"change:map change:defaultmap",this.render)},i.prototype.render=function(){return Maps.each(this.renderOne,this),this},i.prototype.renderOne=function(t){var n;return n=this.subview(new e({model:t})),this.$el.append(n.render().el)},i.prototype.onMapChange=function(){return this.$el.find("li").removeClass("active"),this.$el.find()},i}(Backbone.View),e=function(t){function e(){return i=e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.tagName="li",e.prototype.template=template("main::navigation/map"),e.prototype.initialize=function(){return this.map=this.model},e.prototype.render=function(){var t;return t=this.map.toJSON(),t.url=urlFor({map:this.map}),t["default"]=Settings.isDefaultMap(this.map),this.$el.html(this.template(t)),this.map===currentMap&&this.$el.addClass("active"),this},e.prototype.open=function(){return this},e}(Backbone.View),namespace("Views.Navigation",function(e){return e.MapList=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.id="navigationModal",n.prototype.className="modal modal-large modal-app",n.prototype.template=template("main::navigation/modal"),n.prototype.events={"click .closes":"close"},n.prototype.initialize=function(){return this.index=new Views.Navigation.Index},n.prototype.render=function(){return this.$el.html(this.template()),this.$el.find(".modal-body").html(this.index.render().el),this},n.prototype.open=function(){return this.$el.modal({backdrop:!0,keyboard:!0,show:!0})},n.prototype.close=function(){return this.$el.modal("hide")},n.prototype.isVisible=function(){return this.$el.is(":visible")},n}(Backbone.View),namespace("Views.Navigation",function(e){return e.Modal=t})}.call(this),function(){var t,e,n,i,r={}.hasOwnProperty,o=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};t=function(t){function i(){return n=i.__super__.constructor.apply(this,arguments)}return o(i,t),i.prototype.tagName="ul",i.prototype.className="perspectives nav nav-pills nav-stacked",i.prototype.initialize=function(){return this.listenTo(Perspectives,"add remove reset",this.render),this.listenTo(Dispatch,"change:map change:perspective change:defaultperspective",this.render)},i.prototype.render=function(){return Perspectives.each(this.renderOne,this),this},i.prototype.renderOne=function(t){var n;return n=this.subview(new e({model:t})),this.$el.append(n.render().el)},i}(Backbone.View),e=function(t){function e(){return i=e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.tagName="li",e.prototype.template=template("main::navigation/perspective"),e.prototype.events={"click a":"onClick"},e.prototype.initialize=function(){return this.perspective=this.model},e.prototype.render=function(){var t;return t=this.perspective.toJSON(),t.url=urlFor({perspective:this.perspective}),t["default"]=currentMap.isDefaultPerspective(this.perspective),this.$el.html(this.template(t)),this.perspective===currentPerspective&&this.$el.addClass("active"),this},e.prototype.onClick=function(){return this.perspective.isNew()?_.delay(function(){return Session.set("perspective",null)},100):void 0},e}(Backbone.View),namespace("Views.Navigation",function(e){return e.PerspectiveList=t})}.call(this),function(){var t,e,n,i;e=null,n=function(){return null==e&&(e=t()),e.isVisible()?void 0:e.open()},i=function(){return(null!=e?e.isVisible():void 0)?e.close():n()},t=function(){var t;return t=new Views.Navigation.Modal,t.render(),t},namespace("Views.Navigation",function(t){return t.open=n,t.toggle=i})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.className="form",n.prototype.template='<textarea name="note"></textarea>\n<span class="hint muted">Notes are formatted via <a href="#">Markdown</a></span>\n<img class="avatar" src="{{image}}" /> <button class="btn">Add Note</button>',n.prototype.events={"click .btn":"submit"},n.prototype.initialize=function(){return this.attribute=Attributes.findByName("notes"),this.selection=this.model.selection},n.prototype.render=function(){return this.$el.html(tim(this.template,{image:currentUser.image({size:30})})),this},n.prototype.submit=function(){var t,e=this;return t=this.$el.find("textarea").val().trim(),t?execute(new Commands.Attributes.Push(this.selection,this.attribute,t)).done(function(){return e.$el.find("textarea").val("")}).fail(function(){return error("Unable to save note. Please try again.")}):void 0},n}(Backbone.View),namespace("Views.Notes",function(e){return e.Form=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.className="note",n.prototype.template='<img class="avatar" src="{{createdByAvatar}}" />\n\n<header>\n  <strong>{{createdBy}}</strong> noted\n  <time class="ago" datetime="{{createdAt}}"></time>\n</header>\n\n<div class="body"></div>',n.prototype.initialize=function(){var t;return t=this.model,this.entity=t.entity,this.note=t.note,this.index=t.index,t},n.prototype.render=function(){var t,e,n;return e=this.note,t={},t.createdBy="ryan",t.createdAt="2013-03-25",n={note:marked(e),createdBy:t.createdBy,createdByAvatar:currentUser.image({size:40}),createdAt:moment(t.createdAt).format(),editedBy:t.editedBy,editedByAvatar:null,editedAt:t.editedAt},this.$el.html(tim(this.template,n)),this.$el.find("time").timeago(),this.editable(e),this},n.prototype.editable=function(t){var e,n=this;return e={editor:"text",actions:"edit,delete",value:t},this.$el.find(".body").editable(e).on("update",function(t,e){return execute(new Commands.Attributes.Edit(n.entity,"notes",n.index,e))}).on("delete",function(){return execute(new Commands.Attributes.Pop(n.entity,"notes",n.note)).done(function(){return n.remove()})})},n}(Backbone.View),namespace("Views.Notes",function(e){return e.Show=t})}.call(this),function(){var t,e,n=function(t,e){return function(){return t.apply(e,arguments)}},i={}.hasOwnProperty,r=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};t=function(t){function i(){return this.benchmarks=n(this.benchmarks,this),this.render=n(this.render,this),this.initialize=n(this.initialize,this),e=i.__super__.constructor.apply(this,arguments)}return r(i,t),i.prototype.className="benchmarks-overlay",i.prototype.initialize=function(){return this.$el.on("click","h5",function(t){var e,n;return n=$(t.target),e=n.next(),e.slideToggle()})},i.prototype.render=function(){return this.$el.append(this.benchmarks(DataBenchmarks),this.benchmarks(RenderBenchmarks),this.benchmarks(LayoutBenchmarks),this.benchmarks(InteractionBenchmarks)),this},i.prototype.benchmarks=function(t){var e,n,i;return n=$(new BenchmarksDisplay(t).el).hide(),e=$("<div />").addClass("benchmarks").append("<h5>"+t.name+"</h5>",n),i=_.debounce(function(){return e.css("opacity",.3)},2e3),t.on("cycle",function(){return e.css("opacity",1),i()}),e},i}(Backbone.View),namespace("window",function(e){return e.BenchmarksOverlay=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.className="events",n.prototype.events={"click .undo":"onUndo"},n.prototype.initialize=function(){return this.listenTo(Events,"add",this.onEvent)},n.prototype.render=function(){return this.$el.html('<span class="status-message"></span>\n<button class="undo btn btn-mini"><i class="icon-undo"></i></button>'),this.$status=this.$el.find(".status-message"),this},n.prototype.onUndo=function(){var t,e=this;return t=Events.last(),t.isUndoable()?(t.undo(),this.$el.hide("puff",{},200,function(){return 0!==Events.length?e.onEvent(Events.last()):void 0})):void 0},n.prototype.onEvent=function(t){var e=this;return this.$el.animate({bottom:-100},200,function(){return e.$el.show().toggleClass("undoable",t.isUndoable()),e.$status.html(e.eventSummary(t)),e.$el.animate({bottom:0},200)})},n.prototype.eventSummary=function(t){var e;return e={url:Gravatar.get(t.get("user").get("email_digest"),{size:24,encrypt:!1}),summary:marked(t.summary())},tim('<img src="{{url}}" /> {{summary}}',e)},n}(Backbone.View),namespace("window",function(e){return e.EventsView=t})}.call(this),function(){var t,e,n=function(t,e){return function(){return t.apply(e,arguments)}},i={}.hasOwnProperty,r=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};t=function(t){function i(){return this.search=n(this.search,this),this.onKeydown=n(this.onKeydown,this),e=i.__super__.constructor.apply(this,arguments)}return r(i,t),i.prototype.tagName="form",i.prototype.className="finder",i.prototype.template=template("main::overlays/finder"),i.prototype.events={"focus .selector-input":"onFocus","click .build-btn":"buildSelector",submit:!1},i.prototype.render=function(){var t=this;return this.$el.html(this.template()),this.$input=this.$el.find("input[type=text]").on("keydown",this.onKeydown).typeahead({source:function(){return t.autocomplete()}}),this.$el.find(".build-btn").tooltip({placement:"bottom"}),this.$el.on("submit",!1),this},i.prototype.focus=function(){return this.$input.focus()},i.prototype.onFocus=function(){var t=this;return _.defer(function(){return t.$input.select()})},i.prototype.onKeydown=function(t){var e=this;return 13===t.which?_.delay(function(){return e.search()},200):void 0},i.prototype.autocomplete=function(){var t;return t=currentMap.scene.graph.nodes.chain().collect(function(t){return t.getLabel()}).uniq().compact().value()},i.prototype.search=function(t){var e;return null==t&&(t=this.$input.val().trim()),e=t.startsWith("=")?t.slice(1).trim():'element[label*="'+t+'"]',log.info("search",t,e),map.focus(),map.select(e).done(function(n){var i;return n.length>0?map.isFocused()?(map.extend(n.models),_.delay(function(){return map.zoomFit()},100)):map.zoomFitOnSelection():(i=t.startsWith("=")?'No matches found for "'+e+'"':'No elements found with label matching "'+t+'"',notice(i))}).fail(function(){return alert("Search failed. Please try again.")})},i.prototype.buildSelector=function(){var t,e,n=this;return e=this.$input.val().trim(),Selector.isExplicit(e)?e=Selector.toImplicit(e):e&&(t=e,e=Selector.prepare('["label" = "{{value}}"]',{value:t})),SelectorBuilder.build(e).done(function(t){return n.$input.val("= "+t),n.search()})},i}(Backbone.View),namespace("Views.Map",function(e){return e.Finder=t})}.call(this),function(){var t,e,n=function(t,e){return function(){return t.apply(e,arguments)}},i={}.hasOwnProperty,r=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};t=function(t){function i(){return this.setTimeout=n(this.setTimeout,this),this.clearTimeout=n(this.clearTimeout,this),this.reset=n(this.reset,this),this.show=n(this.show,this),this.onInteraction=n(this.onInteraction,this),this.hide=n(this.hide,this),this.render=n(this.render,this),e=i.__super__.constructor.apply(this,arguments)}return r(i,t),i.prototype.className="status status-bar alert",i.prototype.initialize=function(){var t=this;
return this.map=this.model,$("body").on("keydown mousedown",this.onInteraction),flash.on("alert",function(e){return t.show(e,{error:!0})}).on("notice",function(e){return t.show(e,{error:!1})})},i.prototype.render=function(){return this},i.prototype.hide=function(){return $(this.el).fadeOut(),this.clearTimeout()},i.prototype.onInteraction=function(){var t;return t=(new Date).getTime(),this.lastMessageAt&&t-this.lastMessageAt>500?this.hide():void 0},i.prototype.show=function(t,e){return this.lastMessageAt=(new Date).getTime(),this.reset(),e.error?this.$el.addClass("alert-error"):this.$el.addClass("alert-info"),this.$el.html(t).fadeIn(),this.setTimeout()},i.prototype.reset=function(){return this.$el.hide(),this.$el.removeClass("pending alert-error alert-info"),this.clearTimeout()},i.prototype.clearTimeout=function(){return clearTimeout(this.timeout),this.timeout=null},i.prototype.setTimeout=function(){return this.timeout=setTimeout(this.hide,5e3)},i}(Backbone.View),namespace("Overlays",function(e){return e.FlashView=t})}.call(this),function(){var t,e,n,i,r,o,s={}.hasOwnProperty,a=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};t=function(t){function r(){return i=r.__super__.constructor.apply(this,arguments)}return a(r,t),r.prototype.className="map-footer",r.prototype.render=function(){return map.isEmbedded()||(this.$el.append((new Views.Actionbar.Nav).render().el),this.$el.append('<span class="divider"></span>')),this.$el.append((new n).render().el),this.$el.append((new Views.Actionbar.Decorate).render().el),this.$el.append((new Views.Actionbar.Filter).render().el),this.$el.append((new Views.Actionbar.Focus).render().el),this.$el.append('<span class="divider"></span>'),this.$el.append((new Views.Actionbar.Virtualize).render().el),this.$el.append((new Views.Actionbar.More).render().el),"local"===Dispatch.context&&(this.$el.append('<span class="divider"></span>'),this.$el.append((new Views.Actionbar.Push).render().el),this.$el.append((new Views.Actionbar.Pull).render().el),this.$el.append((new Views.Actionbar.Reset).render().el)),this.$el.append((new e).render().el),this.$el.find("[title]").tooltip({container:"body"}),this},r.prototype.toggleSidebar=function(){return sidebar.toggle()},r}(Backbone.View),n=function(t){function e(){return r=e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.className="action-group",e.prototype.attributes={"data-ability":"manage-maps"},e.prototype.render=function(){return this.$el.append((new Views.Actionbar.Pin).render().el),this.$el.append((new Views.Actionbar.Direction).render().el),this.$el.append((new Views.Actionbar.Delay).render().el),this.$el.append((new Views.Actionbar.Delete).render().el),this.$el.append('<span class="divider"></span>'),this},e}(Backbone.View),e=function(t){function e(){return o=e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.className="pull-right",e.prototype.render=function(){return this.$el.append((new Views.Actionbar.Conflicts).render().el),this.$el.append((new Views.Actionbar.Help).render().el),this},e}(Backbone.View),namespace("Views.Overlays",function(e){return e.Footer=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.className="form connection-form",n.prototype.template='<button class="new-connection btn">Add <span>C</span>onnection</button>\n<input type="text" class="connection" placeholder="Element Name to Connect" autocomplete="off" />',n.prototype.events={"click button":"activate",keydown:"onKeydown",keyup:"onKeyup"},n.prototype.initialize=function(){return this.selection=map.getSelection(),this.listenTo(map,"click",this.reset),this.listenTo(this.selection,"add remove reset",this.update)},n.prototype.render=function(){return this.$el.html(this.template),this.$button=this.$el.find("button"),this.$input=this.$el.find("input").typeahead({source:function(){return Elements.labels()}}),this.update(),this},n.prototype.update=function(){return this.nodes=this.selection.nodes(),this.$button.toggleClass("disabled",0===this.nodes.length)},n.prototype.activate=function(){return 0===this.nodes.length?alert("Please select the element you want to connect"):(notice("Enter element name then press TAB (to chain) or ENTER (to hub)"),this.$el.addClass("active").trigger("activate"),this.$input.focus())},n.prototype.clear=function(){return this.$input.val("")},n.prototype.reset=function(){return this.clear(),this.$el.removeClass("active").trigger("reset")},n.prototype.repeat=function(){return this.$input.focus()},n.prototype.shift=function(t){var e;return e=_.chain(t).map(function(t){return t.to}).uniq().value(),map.select(e),this.$input.focus()},n.prototype.onKeydown=function(t){switch(t.which){case 9:return t.preventDefault();case 27:return this.reset()}},n.prototype.onKeyup=function(t){var e=this;switch(t.which){case 9:return this.submit().then(function(t){return e.shift(t)});case 13:return this.submit(),this.repeat()}},n.prototype.submit=function(){var t;return t=this.$input.val().trim(),this.$input.val(""),t?Workflows.addConnection({from:this.nodes,to:t,map:currentMap}).fail(function(){return alert("Unable to add connection")}):void 0},n}(Backbone.View),namespace("Views.Overlays",function(e){return e.ConnectionFormView=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.tagName="form",n.prototype.className="form element-form",n.prototype.attributes={"data-remote":!0},n.prototype.template='<button class="new-element btn btn-primary">\n  Add <span>E</span>lement\n</button>\n\n<input type="text" class="element" placeholder="Element Name to Create" autocomplete="off" />',n.prototype.events={"click button":"activate",keydown:"onKeydown",keyup:"onKeyup",submit:!1},n.prototype.render=function(){return this.$el.html(this.template),this.$input=this.$el.find("input").typeahead({source:function(){return Elements.labels()}}),this},n.prototype.activate=function(){return notice("Enter element name then TAB (to add more) or ENTER (when finished)"),this.$el.addClass("active").trigger("activate"),this.$input.focus()},n.prototype.reset=function(){return this.resetInput(),this.$el.removeClass("active").trigger("reset")},n.prototype.resetInput=function(){return this.$input.val("").data({id:null,label:null})},n.prototype.repeat=function(){return this.resetInput(),this.$input.focus()},n.prototype.onKeydown=function(t){switch(t.which){case 9:return t.preventDefault();case 27:return this.reset()}},n.prototype.onKeyup=function(t){switch(t.which){case 13:return this.submit(),this.reset(),map.focus();case 9:return this.submit(),this.repeat()}},n.prototype.onSelect=function(){return this.submit(),this.reset(),map.focus()},n.prototype.submit=function(){var t;return t=this.$input.val().trim(),Workflows.addElement({label:t,map:currentMap}).done(function(t,e){return map.select(e,{focus:!0})}).fail(function(){return alert("Unable to add element to map")})},n}(Backbone.View),namespace("Views.Overlays",function(e){return e.ElementFormView=t})}.call(this),function(){var t,e,n=function(t,e){return function(){return t.apply(e,arguments)}},i={}.hasOwnProperty,r=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};t=function(t){function i(){return this.reset=n(this.reset,this),this.onFormActivated=n(this.onFormActivated,this),e=i.__super__.constructor.apply(this,arguments)}return r(i,t),i.prototype.className="forms subtle-overlay",i.prototype.attributes={"data-ability":"manage-maps"},i.prototype.initialize=function(){return this.elementForm=new Views.Overlays.ElementFormView({model:this.model}),this.connectionForm=new Views.Overlays.ConnectionFormView({model:this.model}),this.loopForm=new Views.Overlays.LoopFormView({model:this.model})},i.prototype.render=function(){return this.$el.empty().append(this.elementForm.render().el).append(this.connectionForm.render().el).append(this.loopForm.render().el).on("activate",".form",this.onFormActivated),this},i.prototype.onFormActivated=function(t){var e;return this.$el.addClass("active"),e=$(t.target),e.is(".element-form")?this.connectionForm.reset():this.elementForm.reset(),map.on("click",this.reset)},i.prototype.reset=function(){return this.$el.removeClass("active"),map.off("click",this.reset),this.elementForm.reset(),this.connectionForm.reset()},i}(Backbone.View),namespace("Views.Overlays",function(e){return e.FormView=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.className="loop-form form",n.prototype.template='<button class="new-loop btn">Add <span>L</span>oop</button>',n.prototype.events={"click .new-loop":"onClick"},n.prototype.initialize=function(){return this.selection=map.getSelection(),this.listenTo(this.selection,"add remove reset",this.render)},n.prototype.render=function(){return this.connections=this.selection.getConnections(),this.$el.html(this.template),this.$el.toggleClass("disabled",this.disabled()),this},n.prototype.onClick=function(){return this.disabled()?alert("Please select at least two connections for the loop"):Workflows.addLoop({map:currentMap,connections:this.connections})},n.prototype.disabled=function(){return this.connections.length<2},n}(Backbone.View),namespace("Views.Overlays",function(e){return e.LoopFormView=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.className="fps-overlay",n.prototype.template='<span class="rate"></span><span class="fps">fps</span>',n.prototype.interval=1e3,n.prototype.render=function(){return this.$el.html(this.template),this.$rate=this.$el.find(".rate"),this},n.prototype.animate=function(){var t,e;return e=this,t=function(){return e.update()},setInterval(t,this.interval)},n.prototype.update=function(){return this.$rate.text(0|map.display.loop.fps)},n}(Backbone.View),namespace("Views.Overlays",function(e){return e.FPSView=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.className="import-menu",n.prototype.attributes={"data-ability":"manage-maps"},n.prototype.template='<button class="import-btn btn btn-flat"><i class="icon-upload"></i></button>',n.prototype.events={"click .btn":"open"},n.prototype.render=function(){return this.$el.html(this.template),this},n.prototype.open=function(){var t;return t=new Views.Imports.Modal,t.show()},n}(Backbone.View),namespace("Views.Overlays",function(e){return e.ImportMenuView=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.className="legend-container",n.prototype.initialize=function(){var t;return t=map.model.get("display"),this.view=t.getLegend()},n.prototype.render=function(){return this.$el.html(this.view.render().el),this},n}(Backbone.View),namespace("Views.Overlays",function(e){return e.LegendContainer=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.tagName="a",n.prototype.className="corner-logo logo",n.prototype.attributes={href:"/",title:"Powered by Kumu",target:"_blank"},n.prototype.render=function(){return this},n}(Backbone.View),namespace("Views.Overlays",function(e){return e.Logo=t})}.call(this),function(){var t,e={}.hasOwnProperty,n=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};this.ModalOverlayView=function(e){function i(){return t=i.__super__.constructor.apply(this,arguments)}return n(i,e),i.prototype.className="modal-overlay modal-backdrop",i.prototype.template='<div class="wrapper">\n  <div class="spinner-logo"></div>\n  <div class="message"></div>\n</div>',i.prototype.events={click:"onClick"},i.prototype.render=function(){var t;return this.$el.html(this.template),this.$message=this.$el.find(".message"),t={color:this.model.get("theme").get("fontColor")},this.spinner=this.$el.find(".spinner-logo").spinner(t),this},i.prototype.show=function(t,e){return this.spinner.play(),this.callback=e,t?this.$message.html(t):this.$message.empty(),this.callback&&this.$message.append('<div class="actions"><button class="continue btn btn-inverse" href="#">Cancel</button></div>'),this.$el.show("fade")},i.prototype.hide=function(){return this.spinner.pause(),this.$el.hide("fade")},i.prototype.onClick=function(t){return $(t.target).is(".continue")&&this.callback(),map.busy(!1)},i}(Backbone.View)}.call(this),function(){var t,e,n=function(t,e){return function(){return t.apply(e,arguments)}},i={}.hasOwnProperty,r=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};t=function(t){function i(){return this.onDrop=n(this.onDrop,this),this.onDragLeave=n(this.onDragLeave,this),this.onDragOver=n(this.onDragOver,this),this.onDragEnter=n(this.onDragEnter,this),e=i.__super__.constructor.apply(this,arguments)}return r(i,t),i.prototype.className="overlays",i.prototype.initialize=function(){return this.view=this.model.get("view"),this.sidebar=new Sidebar({model:this.model}),this.viewport=new Viewport({model:this.model})},i.prototype.render=function(){return this.$el.empty(),this.$el.append(this.sidebar.render().el),this.$el.append(this.viewport.render().el),this.$el.append(this.viewport.$proxy),this.renderOverlays(),this.initializeDropzone(),this},i.prototype.renderOverlays=function(){return this.$viewport=this.viewport.$el,this.$core=this.$viewport.find(".map-core"),this.$footer=this.$viewport.find(".map-footer"),this.renderCore(),this.renderFooter()},i.prototype.renderCore=function(){return this.renderModalOverlay(),this.renderLegend(),this.renderToolbars(),this.renderFinder(),this.renderFlashView(),this.renderEventsView(),this.renderImportView(),this.renderLogo(),this.renderFormView(),this.renderFooter(),Settings.enabled("fps")&&this.renderFPS(),Settings.enabled("benchmark")?this.renderBenchmarksView():void 0},i.prototype.renderModalOverlay=function(){return this.modal=new ModalOverlayView({model:this.model}),this.$core.append(this.modal.render().el)},i.prototype.renderLegend=function(){var t;return t=new Views.Overlays.LegendContainer,this.$core.append(t.render().el)},i.prototype.renderToolbars=function(){var t;return t=new MapToolbarsOverlay({model:this.model}),this.$core.append(t.render().el)},i.prototype.renderFinder=function(){var t;return t=new Views.Map.Finder,this.$core.append(t.render().el)},i.prototype.renderFormView=function(){var t;return t=new Views.Overlays.FormView({model:this.view}),this.$core.append(t.render().el)},i.prototype.renderFlashView=function(){var t;return t=new Overlays.FlashView({model:this.model}),this.$core.append(t.render().el)},i.prototype.renderFPS=function(){var t;return t=new Views.Overlays.FPSView,this.$core.append(t.render().el),t.animate()},i.prototype.renderBenchmarksView=function(){var t;return t=new BenchmarksOverlay,this.$core.append(t.render().el)},i.prototype.renderEventsView=function(){var t;return t=new EventsView,this.$core.append(t.render().el)},i.prototype.renderImportView=function(){var t;return t=new Views.Overlays.ImportMenuView,this.$core.append(t.render().el)},i.prototype.renderLogo=function(){var t;return t=new Views.Overlays.Logo,this.$core.append(t.render().el)},i.prototype.renderFooter=function(){var t;return t=new Views.Overlays.Footer,this.$footer.replaceWith(t.render().el)},i.prototype.initializeDropzone=function(){return $(document).on("dragenter",this.onDragEnter).on("dragover",this.onDragOver).on("dragleave",this.onDragLeave).on("drop",this.onDrop)},i.prototype.onDragEnter=function(){return!1},i.prototype.onDragOver=function(){return!1},i.prototype.onDragLeave=function(){return!1},i.prototype.onDrop=function(t){var e,n,i,r;return e=$(t.target).closest(".scene, .import-menu").length>0,e&&able.to("manage","maps")?(t.stopPropagation(),t.preventDefault(),i=t.originalEvent.dataTransfer.files,n=i[0],r=new Imports.FileSource(n),map["import"](r)):void 0},i}(Backbone.View),namespace("window",function(e){return e.OverlaysContainer=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.className=function(){return"toolbar toolbar-"+this.name+" btn-group btn-group-vertical"},n.prototype.events={"click button":"onClick"},n.prototype.initialize=function(){return this.map=this.model},n.prototype.render=function(){var t,e,n,i,r,o;for(n=this.buttons(),i='<button class="btn" data-action="{{action}}" title="{{title}}"><i class="icon {{icon}}" /></button>',r=0,o=n.length;o>r;r++)e=n[r],t=$(tim(i,e)),t.addClass(""+e.action+"-btn"),this.$el.append(t);return n.length<2&&this.$el.removeClass("btn-group btn-group-vertical"),this},n.prototype.onClick=function(t){var e;return e=$(t.currentTarget).attr("data-action"),this[e].call()},n}(Backbone.View),namespace("window",function(e){return e.MapToolbar=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.name="history",n.prototype.buttons=function(){return[{action:"refresh",title:"Refresh",icon:"icon-refresh"}]},n.prototype.refresh=function(){return map.refresh()},n}(MapToolbar),namespace("Overlays",function(e){return e.HistoryToolbar=t})}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};window.LayoutToolbar=function(n){function r(){return this.toggle=e(this.toggle,this),this.buttons=e(this.buttons,this),t=r.__super__.constructor.apply(this,arguments)}return i(r,n),r.prototype.name="layout",r.prototype.buttons=function(){return[{action:"toggle",title:"Toggle Layout",icon:"icon-off"}]},r.prototype.toggle=function(){return this.map.toggleLayout()},r}(MapToolbar)}.call(this),function(){var t,e,n=function(t,e){return function(){return t.apply(e,arguments)}},i={}.hasOwnProperty,r=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};t=function(t){function i(){return this.onClick=n(this.onClick,this),this.initializeToolbars=n(this.initializeToolbars,this),e=i.__super__.constructor.apply(this,arguments)}return r(i,t),i.prototype.className="toolbars",i.prototype.events={"click button":"onClick"},i.prototype.render=function(){return this.addToolbar(ZoomToolbar),this.addToolbar(Overlays.HistoryToolbar),this.addToolbar(PresentationToolbar),this.initializeToolbars(),this},i.prototype.addToolbar=function(t){var e;return e=new t({model:this.model}),this.$el.append(e.render().el)},i.prototype.initializeToolbars=function(){return this.$el.find("[title]").tooltip({placement:"left"})},i.prototype.onClick=function(){},i}(Backbone.View),namespace("window",function(e){return e.MapToolbarsOverlay=t})}.call(this),function(){var t,e={}.hasOwnProperty,n=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};window.PresentationToolbar=function(e){function i(){return t=i.__super__.constructor.apply(this,arguments)}return n(i,e),i.prototype.name="presentation",i.prototype.buttons=function(){var t;return t=[],t.push({action:"screenshot",title:"Screenshot",icon:"icon-screenshot"}),map.isEmbedded()||t.push({action:"embed",title:"Embed",icon:"icon-embed"}),t},i.prototype.screenshot=function(){return map.screenshot()},i.prototype.embed=function(){return Workflows.embed()},i}(MapToolbar)}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};window.ZoomToolbar=function(n){function r(){return this.zoomFit=e(this.zoomFit,this),this.zoomOut=e(this.zoomOut,this),this.zoomIn=e(this.zoomIn,this),this.buttons=e(this.buttons,this),t=r.__super__.constructor.apply(this,arguments)}return i(r,n),r.prototype.name="zoom",r.prototype.buttons=function(){return[{action:"zoomIn",title:"Zoom In",icon:"icon-plus"},{action:"zoomOut",title:"Zoom Out",icon:"icon-minus"},{action:"zoomFit",title:"Zoom Fit",icon:"icon-resize-small"}]},r.prototype.zoomIn=function(){return"undefined"!=typeof currentMap&&null!==currentMap?currentMap.scene.zoomIn():void 0},r.prototype.zoomOut=function(){return"undefined"!=typeof currentMap&&null!==currentMap?currentMap.scene.zoomOut():void 0},r.prototype.zoomFit=function(){return"undefined"!=typeof currentMap&&null!==currentMap?currentMap.scene.zoomFit():void 0},r}(MapToolbar)}.call(this),function(){var t,e,n,i={}.hasOwnProperty,r=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};t=.1,e=function(e){function i(){return n=i.__super__.constructor.apply(this,arguments)}return r(i,e),i.prototype.id="viewport",i.prototype.className="viewport",i.prototype.template='<div class="map-core"></div><div class="map-footer"></div>',i.prototype.initialize=function(){return this.view=this.model.get("view"),this.$proxy=$('<div id="viewport_proxy" class="viewport"></div>')},i.prototype.render=function(){return this.$el.html(this.template),this},i.prototype.update=function(){var t;return t=this.$proxy.offset(),this._bounds=new Rectangle(t.left,t.top,t.left+this.$proxy.width(),t.top+this.$proxy.height()),this._bounds},i.prototype.bounds=function(){return this._bounds},i.prototype.width=function(){return this._bounds.width()},i.prototype.height=function(){return this._bounds.height()},i.prototype.center=function(){return this._bounds.center()},i.prototype.getMaximumScale=function(e){var n,i,r,o,s;return currentMap?(null==e&&(e=currentMap.graph.bounds()),s=this.bounds(),o=s.width()*(1-t),n=s.height()*(1-t),r=o/e.width(),i=n/e.height(),Math.min(r,i)):1},i}(Backbone.View),namespace("window",function(t){return t.Viewport=e})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.className="active-perspective",n.prototype.template=template("main::perspectives/active"),n.prototype.initialize=function(){return this.listenTo(Session,"change:perspective",this.render)},n.prototype.render=function(){return currentPerspective?this.$el.html(this.template({perspective:currentPerspective})):this.$el.empty(),this},n}(Backbone.View),namespace("Views.Perspectives",function(e){return e.ActivePerspectiveView=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.id="perspectiveAdvanced",n.prototype.className="advanced-panel tab-pane",n.prototype.template=template("main::perspectives/advanced"),n.prototype.events={shown:"onShown"},n.prototype.initialize=function(){return this.perspective=this.model,this.listenTo(this.perspective,"change:style",this.updateEditor)},n.prototype.render=function(){return this.$el.html(this.template({style:this.perspective.get("style")})),this.$errors=this.$el.find(".errors"),this.initializeEditor(),this},n.prototype.getStyle=function(){return this.editor.getValue()},n.prototype.onShown=function(){return this.editor.refresh(),this.validate()},n.prototype.initializeEditor=function(){var t,e,n,i=this;return e=this.$el.find("textarea").get(0),t={mode:"less",tabSize:2,lineNumbers:!0},n=_.debounce(function(){return i.updatePerspective()},1500),this.editor=CodeMirror.fromTextArea(e,t),this.editor.on("change",n)},n.prototype.updateEditor=function(){var t,e;return e=this.getStyle(),t=this.perspective.get("style"),t!==e?this.editor.setValue(t):void 0},n.prototype.updatePerspective=function(){var t;return t=this.getStyle(),this.validate(t),this.perspective.set("style",t),this.perspective.rebuild()},n.prototype.validate=function(t){var e,n=this;return e=new $.Deferred,StyleSheet.parse(t).done(function(){return n.hideError(),e.resolve(t)}).fail(function(t){return n.showError(t),e.reject(t)}),e.promise()},n.prototype.showError=function(t){var e;return e=""+t.type+" Error: "+t.message+". Line "+t.line+", column "+t.column+".",this.$errors.html(e).slideDown()},n.prototype.hideError=function(){return this.$errors.slideUp()},n}(Backbone.View),namespace("Views.Perspectives",function(e){return e.Advanced=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.id="perspectiveDecorations",n.prototype.className="decorations-panel tab-pane",n.prototype.initialize=function(){return this.perspective=this.model,this.subview("form",new Views.Perspectives.DecorationsForm({model:this.perspective})),this.subview("list",new Views.Perspectives.DecorationsList({model:this.perspective}))},n.prototype.render=function(){return this.$el.append(this.form.render().el,this.list.render().el),this},n}(Backbone.View),namespace("Views.Perspectives",function(e){return e.Decorations=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.className="decorations-form",n.prototype.template=template("main::perspectives/decorations_form"),n.prototype.events={"click .btn":"decorate"},n.prototype.initialize=function(){return this.perspective=this.model},n.prototype.render=function(){return this.$el.html(this.template),this},n.prototype.decorate=function(t){var e,n,i;return n="lens-"+uuid(),e=$(t.target).attr("data-collection"),i=this.perspective.lenses.build({_id:n,collection:e}),Workflows.editLens(i)},n}(Backbone.View),namespace("Views.Perspectives",function(e){return e.DecorationsForm=t})}.call(this),function(){var t,e,n=function(t,e){return function(){return t.apply(e,arguments)}},i={}.hasOwnProperty,r=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};t=function(t){function i(){return this.onSort=n(this.onSort,this),e=i.__super__.constructor.apply(this,arguments)}return r(i,t),i.prototype.tagName="ul",i.prototype.className="lenses",i.prototype.initialize=function(){return this.perspective=this.model,this.lenses=this.perspective.lenses,this.listenTo(this.lenses,"add",this.renderOne),this.listenTo(this.lenses,"reset",this.render)},i.prototype.render=function(){return this.lenses.each(this.renderOne,this),this.$el.disableSelection(),this.$el.sortable({axis:"y",stop:this.onSort}),this},i.prototype.renderOne=function(t){var e;return e=this.subview(new Views.Lenses.Show({model:t})),this.$el.append(e.render().el)},i.prototype.onSort=function(){var t;return t=this.$el.find("li").map(function(){return $(this).attr("data-cid")}).get(),this.lenses.comparator=function(e){return _.indexOf(t,e.cid)},this.lenses.sort(),execute(new Commands.Perspectives.Compile(this.perspective)).done(function(){return map.refresh()}).fail(function(){return alert("Unable to update perspective")})},i}(Backbone.View),namespace("Views.Perspectives",function(e){return e.DecorationsList=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.id="perspectiveFilters",n.prototype.className="filters-panel tab-pane",n.prototype.template=template("main::perspectives/filters"),n.prototype.events={change:"updatePerspective","click .select":"onBulkSelect"},n.prototype.initialize=function(){return this.perspective=this.model},n.prototype.render=function(){var t,e;return this.$el.html(this.template),(t=this.$el.find(".elements .choices")).append.apply(t,this.filtersFor("elements")),(e=this.$el.find(".connections .choices")).append.apply(e,this.filtersFor("connections")),this},n.prototype.filtersFor=function(t){var e,n,i,r,o,s,a,l,u;for(s=Attributes.getTypeAttributeForCollection(t),i=s.choices(),i.push("undefined"),u=[],a=0,l=i.length;l>a;a++)o=i[a],r="undefined"===o?"<em>Undefined</em>":o,n=$('<li><label class="checkbox"><input type="checkbox" /> '+r+"</label></li>"),e=n.find("input").val(o).attr("checked",this.perspective.permit(t,o)),u.push(n);return u},n.prototype.onBulkSelect=function(t){var e,n;return t.preventDefault(),n=$(t.target),e=n.closest(".collection-filter"),e.find("input[type=checkbox]").prop("checked","all"===n.attr("data-value")),this.updatePerspective()},n.prototype.updatePerspective=function(){return this.perspective.set({filters:this.toJSON()})},n.prototype.toJSON=function(){var t,e,n,i,r,o,s,a;for(i={},a=["elements","connections"],o=0,s=a.length;s>o;o++)n=a[o],t=this.$el.find("."+n+" .choices").find("[type=checkbox]"),e=t.filter(":checked").toArray(),r=e.length===t.length?null:_.map(e,function(t){return $(t).val()}),i[n]=r;return i},n}(Backbone.View),namespace("Views.Perspectives",function(e){return e.Filters=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.className="perspectives-index",n.prototype.template=template("main::perspectives/index"),n.prototype.events={"click .new-perspective":"newPerspective"},n.prototype.initialize=function(){return this.listView=new Views.Perspectives.List},n.prototype.render=function(){return this.$el.html(this.template),this.$el.find("[data-role=list]").replaceWith(this.listView.render().el),this
},n.prototype.newPerspective=function(){return Workflows.addPerspective()},n}(Backbone.View),namespace("Views.Perspectives",function(e){return e.Index=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.tagName="ul",n.prototype.className="perspectives",n.prototype.initialize=function(){return this.listenTo(Perspectives,"reset",this.render),this.listenTo(Perspectives,"add",this.renderOne),this.listenTo(Dispatch,"change:map change:perspective change:defaultperspective",this.render)},n.prototype.render=function(){return this.$el.empty().addClass("nav nav-tabs nav-stacked"),this.renderOne(new Perspective({name:"None"})),Perspectives.each(this.renderOne,this),this},n.prototype.renderOne=function(t){var e;return e=new Views.Perspectives.ListItem({model:t}),this.$el.append(e.render().el)},n}(Backbone.View),namespace("Views.Perspectives",function(e){return e.List=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.tagName="li",n.prototype.className="perspective",n.prototype.template=template("main::perspectives/list_item"),n.prototype.events={"click a":"onClick","click .more-btn":"showPerspective"},n.prototype.initialize=function(){return this.perspective=this.model,this.listenTo(this.perspective,"change",this.render),this.listenTo(this.perspective,"destroy",this.remove)},n.prototype.render=function(){var t;return t={name:this.perspective.get("name")},t["default"]="undefined"!=typeof currentMap&&null!==currentMap?currentMap.isDefaultPerspective(this.perspective):void 0,this.perspective.isNew()?(t.none=!0,t.active="undefined"==typeof currentPerspective||null===currentPerspective,t.url=urlFor({perspective:null})):(t.none=!1,t.active=this.perspective===currentPerspective,t.url=urlFor({perspective:this.perspective})),this.$el.html(this.template(t)),t.active&&this.$el.addClass("active"),this},n.prototype.showPerspective=function(t){return t.preventDefault(),sidebar.push(new Views.Perspectives.Show({model:this.perspective}))},n.prototype.onClick=function(){return this.perspective.isNew()?_.delay(function(){return Session.set("perspective",null)},100):void 0},n}(Backbone.View),namespace("Views.Perspectives",function(e){return e.ListItem=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.className="perspectives-show",n.prototype.template=template("main::perspectives/show"),n.prototype.events={'shown a[data-toggle="tab"]':"onTab"},n.prototype.initialize=function(){return this.perspective=this.model,this.memento=this.perspective.toMemento(),this.listenTo(this.perspective,"change",this.onChange),this.listenTo(this.perspective,"sync",this.onSync),this.listenTo(this.perspective,"destroy",this.dispose),this.listenTo(sidebar,"cancel",this.cancel),this.listenTo(sidebar,"save",this.save),this.subview("decorations",new Views.Perspectives.Decorations({model:this.perspective})),this.subview("filters",new Views.Perspectives.Filters({model:this.perspective})),this.subview("advanced",new Views.Perspectives.Advanced({model:this.perspective}))},n.prototype.render=function(){return this.$el.html(this.template({perspective:this.perspective})),this.$el.replace("decorations",this.decorations),this.$el.replace("filters",this.filters),this.$el.replace("advanced",this.advanced),this.$el.find("[title]").tooltip(),this.initializeName(),this.initializeDescription(),this},n.prototype.initializeName=function(){var t,e=this;return t={actions:"edit",value:function(){return e.perspective.get("name")}},this.$name=this.$el.find(".perspective-name"),this.$name.editable(t).on("update",function(t,n){var i;return i=new Commands.Perspectives.Rename(e.perspective,"name",n),execute(i).fail(function(){return e.$name.editable("edit",{value:n}),alert("Unable to rename perspective. Please try again.")})})},n.prototype.initializeDescription=function(){var t,e=this;return t={editor:"markdown",format:function(t){return marked(t)},value:function(){return e.perspective.get("description")},placeholder:'<span class="placeholder">Add Description</span>'},this.$description=this.$el.find(".perspective-description"),this.$description.editable(t).on("update",function(t,n){var i;return i=new Commands.Perspectives.Update(e.perspective,"description",n),execute(i).fail(function(){return e.$description.editable("edit",{value:n}),alert("Unable to update description. Please try again.")})})},n.prototype.onTab=function(t){var e;return e=$(t.target).attr("href"),"#perspectiveAdvanced"===e?this.advanced.onShown():void 0},n.prototype.onChange=function(){return this.trigger("dirty",this),map.refresh()},n.prototype.onSync=function(){return this.memento.update(),this.trigger("clean",this)},n.prototype.cancel=function(){return this.memento.restore(),this.trigger("clean",this),this.perspective.rebuild(),this.render()},n.prototype.save=function(){var t;return t=new Commands.Models.Update(this.perspective,this.memento),t.summary="updated **"+this.perspective.get("name")+"** perspective",execute(t).fail(function(){return alert("Unable to save changes. Please try again.")})},n.prototype.dispose=function(){return sidebar.pop(this)},n}(Backbone.View),namespace("Views.Perspectives",function(e){return e.Show=t})}.call(this),function(){!function(t){return t.fn.spinner=function(e){var n,i,r;return null==e&&(e={}),this.addClass("spinner-logo"),r=this.get(0),n=_.defaults(e,t.fn.spinner.defaults),i=Spinners.create(r,n),n.center&&i.center(),n.autoplay&&i.play(),i},t.fn.spinner.defaults={autoplay:!1,center:!1,radius:40,height:6,width:1,dashes:53,opacity:1,padding:5,rotation:1700,color:"#000000"}}(jQuery)}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.className="attributes-blankslate",n.prototype.template=template("main::profile/attributes/blankslate"),n.prototype.attributes={"data-ability":"manage-attributes"},n.prototype.events={"click .new-attribute":"newAttribute"},n.prototype.render=function(){return this.$el.html(this.template()),this},n.prototype.newAttribute=function(){var t=this;return prompt("Attribute Name",function(e,n){var i;if(n)return i=new Commands.Attributes.Create({name:n}),execute(i).done(function(e){return t.trigger("add",e)}).fail(function(){return alert("Unable to create attribute")})})},n}(Backbone.View),namespace("Views.Profile.Attributes",function(e){return e.Blankslate=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.className="new-attribute-form control-group",n.prototype.template=template("main::profile/attributes/form"),n.prototype.attributes={"data-ability":"manage-entities"},n.prototype.events={"click .new-attribute":"showForm",keydown:"onKeydown"},n.prototype.initialize=function(){return this.category=this.model.category,this.selection=this.model.selection,this.collection=this.model.collection},n.prototype.render=function(){return this.$el.html(this.template()),this.$name=this.$el.find("[name=name]"),this.$value=this.$el.find("[name=value]"),this.$name.typeahead({source:function(){return Attributes.pluck("label")}}),this},n.prototype.showForm=function(){return this.$el.addClass("active"),this.$name.focus()},n.prototype.restore=function(){return this.$el.removeClass("active")},n.prototype.onKeydown=function(t){var e,n,i=this;switch(t.which){case 27:return this.restore();case 13:if(e=this.$name.val().trim(),n=this.$value.val().trim(),e&&n)return this.$el.addClass("pending"),this.assign(e,n).done(function(){return i.$name.val(""),i.$value.val("")}).always(function(){return i.$el.removeClass("pending")})}},n.prototype.assign=function(t,e){var n=this;return execute(new Commands.Attributes.CreateAndAssign(this.selection,t,e)).done(function(){return n.restore()}).fail(function(){return alert("Unable to assign attribute")})},n}(Backbone.View),namespace("Views.Profile.Attributes",function(e){return e.Form=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.tagName="fieldset",n.prototype.template=template("main::profile/attributes/group"),n.prototype.initialize=function(t){return this.options=t,this.category=this.model.name,this.listenTo(Attributes,"add",function(t){return t.get("category")===this.category?this.renderAttribute(t):void 0})},n.prototype.render=function(){var t,e,n,i,r,o,s;for(i=!0,n=able.to("manage","entities"),r=this.model.selection.first(),e=this.model.attributes,this.$el.html(this.template({name:this.category})),this.$attributes=this.$el.find(".attributes"),o=0,s=e.length;s>o;o++)t=e[o],t.get("core")||(n||t.isPublic()&&r.hasAttr(t))&&(i=!1,this.renderAttribute(t));return n?this.options.form&&this.renderForm():i&&this.$el.empty(),this},n.prototype.renderAttribute=function(t){var e;return e=new Views.Profile.Attributes.View({model:{selection:this.model.selection,attribute:t}}),this.$attributes.append(e.render().el),this.subview(e)},n.prototype.renderForm=function(){var t;return t=new Views.Profile.Attributes.Form({model:{selection:this.model.selection,category:this.category}}),this.$el.append(t.render().el),this.subview(t)},n}(Backbone.View),namespace("Views.Profile.Attributes",function(e){return e.Group=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.className="attributes-container",n.prototype.template='<form class="form-horizontal"></form>',n.prototype.events={submit:!1},n.prototype.initialize=function(){return this.selection=this.model,this.listenTo(Attributes,"destroy",this.onDestroy)},n.prototype.render=function(){var t,e,n,i,r,o,s,a,l,u;if(i=Attributes.getCustomAttributes(),0===i.length)e=this.subview(new Views.Profile.Attributes.Blankslate),this.listenTo(e,"add",this.render),this.$el.html(e.render().el);else for(this.$el.html(this.template),u=Attributes.categorized(),a=0,l=u.length;l>a;a++)n=u[a],o=n.name,t=n.attributes,r={name:o,selection:this.selection,attributes:t},s=this.subview(new Views.Profile.Attributes.Group({model:r,form:"General"===o})),this.$el.find("form").append(s.render().el);return this},n.prototype.onDestroy=function(){return 0===Attributes.getCustomAttributes().length?this.render():void 0},n}(Backbone.View),namespace("Views.Profile.Attributes",function(e){return e.Index=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.className="attribute control-group",n.prototype.template=template("main::profile/attributes/view"),n.prototype.events={"click .new-value":"newValue","click .settings":"settings"},n.prototype.initialize=function(){return this.attribute=this.model.attribute,this.selection=this.model.selection,this.entity=this.selection.first(),this.assignments=new Backbone.IndexedCollection,this.listenTo(this.assignments,"change remove",this.saveChanges),this.listenTo(this.attribute,"change",this.render),this.listenTo(this.attribute,"remove",this.remove)},n.prototype.render=function(){var t,e,n;return this.$el.html(this.template({attribute:this.attribute.label(),icon:this.attribute.get("icon"),"private":this.attribute.isPrivate()})),this.$values=this.$el.find(".values"),this.$newValue=this.$el.find(".new-value"),this.$el.addClass(AttributesHelper.classNameFor(this.attribute)),this.attribute.limit()>1&&!this.attribute.isPrompted()?(this.$newValue.text("Add "+this.attribute.singularize()),n=this.entity.getAttrs(this.attribute),e=_.map(n,function(t){return{value:t}}),this.assignments.reset(e),this.assignments.each(this.renderOne,this)):(this.$newValue.hide(),t=$('<div class="value"></div>'),t.editableattr({selection:this.selection,attribute:this.attribute}),t.appendTo(this.$values)),this},n.prototype.renderOne=function(t){var e;return e=$('<div class="value"></div>'),e.editableattr({selection:this.selection,attribute:this.attribute,assignment:t}),e.appendTo(this.$values)},n.prototype.newValue=function(){var t,e;return e=this.assignments.add({value:void 0}),t=this.renderOne(e),t.editableattr("edit")},n.prototype.saveChanges=function(t){var e,n,i=this;return n=this.assignments.pluck("value"),e=function(){switch(n.length){case 0:return new Commands.Attributes.Clear(this.selection,this.attribute);default:return new Commands.Attributes.Set(this.selection,this.attribute,n)}}.call(this),execute(e).fail(function(){return i.assignments.include(t)?t.trigger("edit"):(i.assignments.add(t),i.renderOne(t)),alert("Unable to update "+i.attribute.label().toLowerCase()+". Please try again.")})},n.prototype.settings=function(){return map.sidebar.push(new Views.Attributes.Edit({model:this.attribute}))},n}(Backbone.View),namespace("Views.Profile.Attributes",function(e){return e.View=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.className="attributes-panel",n.prototype.initialize=function(){return this.subview("tags",new Views.Tags.Editor({model:this.model})),this.subview("attributes",new Views.Profile.Attributes.Index({model:this.model}))},n.prototype.render=function(){return this.$el.empty(),this.$el.append(this.tags.render().el),this.$el.append(this.attributes.render().el),this},n}(Backbone.View),namespace("Views.Profile",function(e){return e.AttributesPanel=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.className="profile profile-connection",n.prototype.template=template("main::profiles/connection_profile"),n.prototype.events={"click .from":"showFrom","click .to":"showTo"},n.prototype.initialize=function(){return this.connection=this.model,this.selection=new EntitySelection(this.connection),this.subview("attributes",new Views.Profile.AttributesPanel({model:this.selection}))},n.prototype.render=function(){return this.$el.html(this.template()),this.$header=this.$el.find(".profile-header"),this.$overview=this.$el.find(".overview"),this.$details=this.$el.find(".details"),this.renderOverview(),this.renderDetails(),this},n.prototype.renderOverview=function(){return this.initializeHeader()},n.prototype.initializeHeader=function(){var t,e;return t=this.connection,e={placeholder:function(){return t.getFallbackLabel().capitalize()}},this.$header.find(".connection-label").editableattr({selection:this.selection,attribute:"label",options:e}),this.$header.find(".connection-type").editableattr({selection:this.selection,attribute:"connection type"}),this.$overview.find(".description").editableattr({selection:this.selection,attribute:"description"})},n.prototype.renderDetails=function(){return this.$details.html(this.attributes.render().el)},n.prototype.getConnection=function(){return this.connection},n.prototype.showFrom=function(){return map.select("#"+this.connection.from.id)},n.prototype.showTo=function(){return map.select("#"+this.connection.to.id)},n}(Backbone.View),namespace("Views.Profiles",function(e){return e.Connection=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.className="element-profile profile",n.prototype.template=template("main::profiles/element_profile"),n.prototype.initialize=function(){return this.element=this.model,this.selection=new EntitySelection(this.element),this.subview("attributes",new Views.Profile.AttributesPanel({model:this.selection}))},n.prototype.render=function(){var t;return t={label:this.element.getLabel(),type:this.element.getType(),image:this.element.getProfileImage()},this.$el.html(this.template(t)),this.$header=this.$el.find(".profile-header"),this.$overview=this.$el.find(".overview"),this.$details=this.$el.find(".details"),this.$el.find(".nav [title]").tooltip(),this.renderOverview(),this.renderDetails(),this},n.prototype.renderOverview=function(){return this.initializeHeader()},n.prototype.initializeHeader=function(){return this.$header.find(".element-label").editableattr({selection:this.selection,attribute:this.element.getLabelAttribute(),link:!1}),this.$header.find(".element-type").editableattr({selection:this.selection,attribute:this.element.getTypeAttribute()}),this.$overview.find(".description").editableattr({selection:this.selection,attribute:"description"})},n.prototype.renderDetails=function(){return this.$details.html(this.attributes.render().el)},n.prototype.getElement=function(){return this.element},n}(Backbone.View),namespace("Views.Profiles",function(e){return e.Element=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.className="loop-profile profile",n.prototype.template=template("main::profiles/loop_profile"),n.prototype.initialize=function(){return this.lewp=this.model,this.selection=new EntitySelection(this.lewp),this.subview("attributes",new Views.Profile.AttributesPanel({model:this.selection}))},n.prototype.render=function(){var t;return t={label:this.lewp.getLabel(),type:this.lewp.getType()},this.$el.html(this.template(t)),this.$header=this.$el.find(".profile-header"),this.$overview=this.$el.find(".overview"),this.$details=this.$el.find(".details"),this.renderOverview(),this.renderDetails(),this},n.prototype.renderOverview=function(){return this.initializeHeader()},n.prototype.initializeHeader=function(){return this.$header.find(".loop-label").editableattr({selection:this.selection,attribute:this.lewp.getLabelAttribute()}),this.$header.find(".loop-type").editableattr({selection:this.selection,attribute:this.lewp.getTypeAttribute()}),this.$overview.find(".description").editableattr({selection:this.selection,attribute:"description"})},n.prototype.renderDetails=function(){return this.$details.html(this.attributes.render().el)},n.prototype.getLoop=function(){return this.lewp},n}(Backbone.View),namespace("Views.Profiles",function(e){return e.Loop=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.className="multiple-profile profile container",n.prototype.template=template("main::profiles/multiple_profile"),n.prototype.initialize=function(){return this.selection=this.model,this.tags=new Views.Tags.GroupEditor({model:this.selection})},n.prototype.render=function(){return this.$el.html(this.template({selection:this.selection})),this.$el.replace("tags",this.tags),this},n}(Backbone.View),namespace("Views.Profiles",function(e){return e.Multiple=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.className="settings-index sidebar-view",n.prototype.template=template("main::settings/index"),n.prototype.events={"click .edit-theme":"editTheme"},n.prototype.render=function(){return this.$el.html(this.template()),this},n.prototype.editTheme=function(){return map.sidebar.push(new Views.Theme.Edit({model:Settings.theme}))},n}(Backbone.View),namespace("Views.Settings",function(e){return e.Index=t})}.call(this),function(){var t,e,n,i,r={}.hasOwnProperty,o=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};t=function(t){function e(){return n=e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.className="theme-edit sidebar-view",e.prototype.template=template("main::theme/edit"),e.prototype.events={"change input, select":"onChange","change .preset":"onPreset"},e.prototype.initialize=function(){var t=this;return this.dirty=!1,this.theme=this.model,this.lastSavedAttributes=this.theme.toJSON(),this.currentAttributes=this.theme.toJSON(),this.requestPreview=_.debounce(function(){return t.preview()},300)},e.prototype.render=function(){var t;return t=this.theme.toJSON(),t.editable=able.to("manage","style"),t.presets=Themes.pluck("name"),this.$el.html(this.template(t)),this.$form=this.$el.find("form.properties"),this.sync(),this},e.prototype.cancel=function(){return this.theme.reset(this.lastSavedAttributes)},e.prototype.preview=function(){return this.theme.extend(this.currentAttributes),map.refresh()},e.prototype.save=function(){return this.lastSavedAttributes=_.clone(this.attributes)},e.prototype.onChange=function(){return this.collect(),this.requestPreview(),this.dirty?void 0:this.dirty=!0},e.prototype.collect=function(){var t;return t={},this.$form.find(":input").each(function(e,n){var i,r,o;return i=$(n),r=i.attr("name"),o=function(){switch(i.attr("type")){case"checkbox":return i.is(":checked");case"number":return Number(i.val());default:return i.val().trim()}}(),log.info(r,o),t[r]=o}),_.extend(this.currentAttributes,t)},e.prototype.sync=function(){var t=this;return this.$form.find(":input").each(function(e,n){var i,r,o;switch(i=$(n),r=i.attr("name"),o=t.currentAttributes[r],i.attr("type")){case"checkbox":return i.attr("checked",o);default:return i.val(o)}})},e.prototype.onPreset=function(){var t,e;return e=this.$el.find("select[name=preset]").val(),e?(t=Themes.build(e),this.currentAttributes=t.toJSON(),this.sync(),this.preview()):void 0},e}(Backbone.View),e=function(t){function e(){return i=e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.template='<div class="btn-group">\n  <button class="cancel btn">Cancel</button>\n  <button class="preview btn">Preview</button>\n  <button class="save btn">Save</button>\n</div>',e.prototype.events={"click .cancel":"cancel","click .preview":"preview","click .save":"save"},e.prototype.render=function(){return this.$el.html(this.template),this},e.prototype.cancel=function(){return this.model.cancel()},e.prototype.preview=function(){return this.model.preview()},e.prototype.save=function(){return this.model.save()},e}(Backbone.View),namespace("Views.Theme",function(e){return e.Edit=t})}.call(this),function(){var t,e,n=function(t,e){return function(){return t.apply(e,arguments)}},i={}.hasOwnProperty,r=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};t=function(t){function i(){return this.onScroll=n(this.onScroll,this),e=i.__super__.constructor.apply(this,arguments)}return r(i,t),i.prototype.id="sidebar",i.prototype.className="sidebar",i.prototype.events={"click .sidebar-nav-back":"back","click .sidebar-view > .back-btn":"back","click .sidebar-handle":"toggle"},i.prototype.initialize=function(){return this.registry={},this.builders={},this.stack=[],this.maximized=!1,this.dirty={},this.dirtyNotice=new i.DirtyNotice,this.initializeBuilders(),SidebarLinkHandler.initialize(this)},i.prototype.is=function(t){return this.view===t},i.prototype.include=function(t){return this.is(t)||_.include(this.stack,t)},i.prototype.initializeBuilders=function(){return this.register("edit-perspective",function(){return new Views.Perspectives.Show({model:currentPerspective})})},i.prototype.register=function(t,e){return this.builders[t]=e},i.prototype.build=function(t){var e;return e=this.builders[t]||raise("Unknown sidebar view, "+t),e()},i.prototype.show=function(t){var e,n;return n=this.build(t),e=this.registry[t],e&&(this.stack=_.without(this.stack,e),e!==n&&e.remove()),this.push(this.registry[t]=n),n},i.prototype.open=function(t,e){var n;return e=_.defaults({},e,{force:!0,animate:!0}),this.dirtyNotice.hide(),this.$el.find(".sidebar-view").removeClass("active"),n=this.view,this.view=t,this.view.render(this),this.view.$el.addClass("sidebar-view active"),this.$el.append(this.view.el),e.animate?(this.view.$el.css({left:-100,opacity:0}),this.view.$el.animate({left:0,opacity:1},500,"swing"),n&&n.$el.animate({opacity:0},500,"swing")):(this.view.$el.css({left:0,opacity:1}),n&&n.$el.css("opacity",0)),this.listenTo(this.view,"dirty",this.onDirty),this.listenTo(this.view,"clean",this.onClean),this.view.$el.find(".sidebar-content").on("scroll",this.onScroll),e.force&&this.maximize(),this.resize()},i.prototype.push=function(t,e){return this.stack.push(t),this.open(t,e)},i.prototype.pop=function(t,e){var n;return null==e&&(e="back"),n=t,this.dirtyNotice.hide(),n.$el.off("scroll",this.onScroll),this.stopListening(n),this.stack=_.without(this.stack,n),this.view=_.last(this.stack),this.view?(n.$el.removeClass("active"),"back"===e?n.$el.animate({left:-100,opacity:0},500,"swing"):n.$el.animate({opacity:0},500,"swing"),this.view.$el.trigger("show"),this.view.$el.addClass("active"),this.view.$el.animate({opacity:1},500,"swing"),this.restoreDirty(this.view)):this.minimize(),_.delay(function(){return t.remove()},500)},i.prototype.reveal=function(t){var e,n,i;for(i=this.stack,n=i.length-1;n>=0;n+=-1){if(e=i[n],e===t)return;this.pop(e)}},i.prototype.back=function(){return this.view?this.pop(this.view,"back"):void 0},i.prototype.close=function(){return this.view?this.pop(this.view,"close"):void 0},i.prototype.render=function(){return this.$handle=$('<a class="sidebar-handle" href="#"><i class="icon-ellipsis-vertical"></i></a>'),this.$swipeHint=$('<div class="swipe-hint">(swipe left for map)</div>'),this.$el.empty(),this.$el.append(this.dirtyNotice.render().el,this.$handle,this.$swipeHint),this.view||this.minimize(),this},i.prototype.resize=function(){return this.$el.triggerHandler("resize")},i.prototype.toggle=function(){return this.maximized?this.minimize():this.maximize()},i.prototype.hide=function(){return this.$el.hide(),this.minimize()},i.prototype.minimize=function(){return this.maximized=!1,this.view&&this.$swipeHint.remove(),map.$el.removeClass("sidebar-open"),this.$el.removeClass("maximized"),this.$el.triggerHandler("minimize"),this.$el.triggerHandler("toggle")},i.prototype.maximize=function(){return this.view?(this.maximized=!0,this.$el.show(),map.$el.addClass("sidebar-open"),this.$el.addClass("maximized"),this.$el.triggerHandler("maximize"),this.$el.triggerHandler("toggle")):void 0},i.prototype.width=function(){return this.maximized?this.$el.width():0},i.prototype.isOpen=function(){return this.maximized},i.prototype.onDirty=function(t,e){var n,i=this;return this.dirty[t.cid]=e||!0,n=function(){return t===i.view&&i.isDirty(t)?i.dirtyNotice.show(e):void 0},_.delay(n,500)},i.prototype.onClean=function(t){return this.dirty[t.cid]=!1,t===this.view?this.dirtyNotice.hide():void 0},i.prototype.isDirty=function(t){return!!this.dirty[t.cid]},i.prototype.restoreDirty=function(t){var e,n;return e=this.dirty[t.cid],e?(_.isString(e)&&(n=e),this.dirtyNotice.show(n)):void 0},i.prototype.onScroll=function(t){var e;return e=$(t.target),e.siblings(".sidebar-nav").toggleClass("scrolled",e.scrollTop()>0)},i}(Backbone.View),namespace("window",function(e){return e.Sidebar=t})}.call(this),function(){var t,e={}.hasOwnProperty,n=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};Sidebar.DirtyNotice=function(e){function i(){return t=i.__super__.constructor.apply(this,arguments)}return n(i,e),i.prototype.className="dirty-notice",i.prototype.template=template("main::sidebar/dirty"),i.prototype.events={"click .cancel":"cancel","click .save":"save"},i.prototype.render=function(){return this.$el.html(this.template()),this},i.prototype.show=function(t){return t||(t="You have unsaved changes"),this.$el.find(".message").html(t),this.$el.slideDown()},i.prototype.hide=function(){return this.$el.slideUp()},i.prototype.cancel=function(){return sidebar.trigger("cancel")},i.prototype.save=function(){return sidebar.trigger("save")},i}(Backbone.View)}.call(this),function(){var t,e,n=function(t,e){return function(){return t.apply(e,arguments)}},i={}.hasOwnProperty,r=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};t=function(t){function i(){return this.submit=n(this.submit,this),this.render=n(this.render,this),e=i.__super__.constructor.apply(this,arguments)}return r(i,t),i.prototype.className="sidebar-view layout-settings-view",i.prototype.template="develop/sidebar/layout_settings_view",i.prototype.events={"click .submit":"submit"},i.prototype.render=function(){var t,e,n,i;for(this.layout=this.graph.layout,this.$el.html($.template(this.template,this.layout.toJSON())),i=["cooling","friction","damping"],e=0,n=i.length;n>e;e++)t=i[e],this.$el.find("input[name="+t+"]").attr("checked",this.layout.get(t));return this},i.prototype.submit=function(t){var e,n,i,r,o,s,a,l;i={},this.$el.find("input[name]").each(function(t,e){var n,r;return n=$(e),r=function(){switch(n.attr("type")){case"text":return Number(n.val());case"checkbox":return n.is(":checked")}}(),i[n.attr("name")]=r,!0}),r="";for(e in i)o=i[e],r+=""+e+": "+o+"\n";if(this.$el.find("textarea").val(r),this.layout.pause(),this.layout.set(i),"reset"===$(t.target).attr("name"))for(l=this.graph.graph.nodes.models,s=0,a=l.length;a>s;s++)n=l[s],n.position=new Vector(100*Math.random()-50,100*Math.random()-50);return this.layout.reload()},i}(Backbone.View),window.LayoutSettingsView=t}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};Sidebar.PagedView=function(t){function n(){this._pages=[],n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.layout=template("main::sidebar/paged"),n.prototype.buttonTemplate='<button class="btn btn-flat" data-toggle="tab" data-target="#{{id}}">\n  <i class="icon-{{icon}}"></i> {{label}}\n</button>',n.prototype.addPage=function(t){return this._pages.push(t)},n.prototype.render=function(t){var e,n,i,r,o,s,a,l;for(this.$el.html(this.layout()).addClass("sidebar-view sidebar-view-paged"),n=this.$el.find(".navbar"),e=this.$el.find(".content"),l=this._pages,r=s=0,a=l.length;a>s;r=++s)o=l[r],n.append(tim(this.buttonTemplate,o)),i=o.view.render().$el,o.view.delegateEvents(),i.attr("id",o.id).addClass("page tab-pane").toggleClass("active",0===r).appendTo(e);
return n.find("> button:first").addClass("active"),"function"==typeof this.afterRender&&this.afterRender(t),this},n}(Backbone.ExtendedView)}.call(this),function(){var t,e,n,i,r,o=[].slice;i=function(){function t(){this.home=null}return t.prototype.accept=function(t,e){return e.startsWith("=")},t.prototype.before=function(t){return t.preventDefault()},t.prototype.args=function(t,e){return e.slice(1).trim()},t.prototype.click=function(t,e){return this.home=null,map.select(e,{focus:!0})},t.prototype.mouseenter=function(t,e){return this.home={scale:currentScene.scale,translation:currentScene.translation.copy()},map.reveal(e)},t.prototype.mouseleave=function(){return this.home?currentScene.transform(this.home):void 0},t}(),n=function(){function t(){}return t.prototype.accept=function(t,e){return e.startsWith("#")},t}(),e=function(){function t(){}return t.prototype.accept=function(t,e){return e.startsWith("/")||/kumu/.test(e)},t}(),t=function(){function t(){}return t.prototype.accept=function(t,e){return e.startsWith("http")},t.prototype.click=function(t){return $(t.currentTarget).attr("target","_blank")},t}(),r=function(r){var s,a;return a=[new i,new n,new e,new t],s=function(t){var e,n,i,r,s,l;for(i=$(t.currentTarget).attr("href"),r=0,s=a.length;s>r;r++)if(n=a[r],n.accept(t,i)){e=("function"==typeof n.args?n.args(t,i):void 0)||[],_.isArray(e)||(e=[e]),"function"==typeof n.before&&n.before.apply(n,[t].concat(o.call(e))),"function"==typeof n[l=t.type]&&n[l].apply(n,[t].concat(o.call(e)));break}return!0},r.$el.on("click dblclick mouseenter mouseleave","a",s)},this.SidebarLinkHandler={initialize:r}}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.className="tags-widget tags",n.prototype.initialize=function(){var t,e=this;return this.selection=this.model,this.entity=this.selection.first(),t={selection:this.selection,value:function(){return e.entity.getAttrs("tags")}},this.subview("widget",new Views.Tags.Widget({model:t}))},n.prototype.render=function(){return this.$el.html(this.widget.render().el),this},n}(Backbone.View),namespace("Views.Tags",function(e){return e.Editor=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.className="tags-widget tags",n.prototype.events={"click .tag":"onTagClicked"},n.prototype.initialize=function(){var t,e=this;return this.selection=this.model,this.values=this.getSharedTags(),t={selection:this.selection,value:function(){return e.values}},this.subview("widget",new Views.Tags.Widget({model:t})),this.listenTo(this.widget,"select",this.onSelect),this.listenTo(this.widget,"deselect",this.onDeselect)},n.prototype.render=function(){return this.$el.html(this.widget.render().el),this},n.prototype.getSharedTags=function(){var t;return t=this.selection.map(function(t){return t.getAttrs("tags")}),_.intersection.apply(_,t)},n.prototype.onSelect=function(t){return this.values.push(t)},n.prototype.onDeselect=function(t){return this.values=_.without(this.values,t)},n}(Backbone.View),namespace("Views.Tags",function(e){return e.GroupEditor=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.className="tags-widget tags",n.prototype.initialize=function(){var t;return t=this.model,this.selection=t.selection,this.value=t.value,t},n.prototype.render=function(){return this.$el.html(this.editor()),this},n.prototype.editor=function(){var t,e,n=this;return e=Attributes.findByName("tags"),t={editor:"tag",choices:function(){return e.choices()},value:this.model.value,format:function(t){return AttributesHelper.tag(t)},placeholder:"<span class='placeholder'>Add Tag</span>",separator:""},able.to("manage","entities")||(t.mode="readonly",t.placeholder=""),this.$values=$('<div class="tags" />'),this.$values.editable(t).on("select",function(t,i){var r;return r=new Commands.Attributes.Push(n.selection,e,i),execute(r).done(function(){return n.trigger("select",i)}).fail(function(){return alert("Unable to add tag **"+i+"**")})}).on("deselect",function(t,i){var r;return r=new Commands.Attributes.Pop(n.selection,e,i),execute(r).done(function(){return n.trigger("deselect",i)}).fail(function(){return alert("Unable to remove tag **"+i+"**")})})},n.prototype.remove=function(){return this.$values.editable("destroy"),n.__super__.remove.apply(this,arguments)},n}(Backbone.View),namespace("Views.Tags",function(e){return e.Widget=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.className="virtualization-index",n.prototype.template=template("main::virtualization/index"),n.prototype.events={"change select":"virtualize"},n.prototype.initialize=function(){var t;return this.map=currentMap,t=map.getSelection(),t.length?(this.selectionSummary="selected elements",this.elements=t.getElements()):(this.selectionSummary="all elements",this.elements=this.map.select("element").elements()),this.virtualizations=new AttributeVirtualizationCollection,this.listenTo(this.virtualizations,"add",this.renderOne)},n.prototype.render=function(){var t,e;return t=Virtualization.getAttributes(),e={attributes:t,selection:this.selectionSummary},this.$el.html(this.template(e)),this.$select=this.$el.find("select"),this.$list=this.$el.find(".virtualizations"),this},n.prototype.renderOne=function(t){var e;return e=this.subview(new Views.Virtualization.ListItem({model:t})),this.$list.append(e.render().el)},n.prototype.virtualize=function(){var t,e;return t=this.$select.val(),t?(t=Attributes.get(t),e=this.virtualizations.add({map:this.map,elements:this.elements,attribute:t})):void 0},n}(Backbone.View),namespace("Views.Virtualization",function(e){return e.Index=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.tagName="li",n.prototype.className="virtualization",n.prototype.template=template("main::virtualization/list_item"),n.prototype.events={"click .delete":"delete","click .save":"save"},n.prototype.initialize=function(){return this.virtualization=this.model},n.prototype.render=function(){var t;return t={label:this.virtualization.label()},this.$el.html(this.template(t)),this.$el.find("[title]").tooltip(),this.execute(),this},n.prototype.execute=function(){var t=this;return this.virtualization.execute().then(function(){var e;return e=t.virtualization.blueprint(),log.error("virtualization blueprint =",e.raw()),map.refresh()})},n.prototype["delete"]=function(){return this.virtualization.destroy(),this.remove()},n.prototype.save=function(){var t=this;return this.virtualization.save().done(function(){return t.remove()}).fail(function(){return alert("Unable to save virtualization")})},n}(Backbone.View),namespace("Views.Virtualization",function(e){return e.ListItem=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.className="disqus-view",n.prototype.template=template("main::welcome/disqus_view"),n.prototype.render=function(){var t;return currentAccount.isPublic()?(t={shortname:"kumu",identifier:""+Env.name+"/accounts/"+currentAccount.id,url:absoluteUrlFor(currentAccount.publicUrl()),title:currentAccount.get("name")},this.$el.html(this.template(t)),this):this},n}(Backbone.View),namespace("Views.Welcome",function(e){return e.DisqusView=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.className="welcome-embedded-overview context",n.prototype.template=template("main::welcome/embedded_overview"),n.prototype.events={"change .perspective-select":"onPerspective"},n.prototype.initialize=function(){return this.overview=new Views.Welcome.Overview,this.listenTo(Session,"change:perspective",this.render)},n.prototype.render=function(){return this.$el.html(this.template()),this.$el.find(".map-name").css({display:"block","text-align":"center"}),this.$el.find(".perspective-select").hide(),this.$el.find(".perspective-overview").hide(),this},n.prototype.renderPerspectives=function(){var t,e,n,i;for(this.$perspectiveSelect=this.$el.find(".perspective-select"),this.$perspectiveSelect.empty(),this.$perspectiveSelect.append('<option value="none">No Perspective</option>'),i=Perspectives.models,e=0,n=i.length;n>e;e++)t=i[e],$("<option />").html(t.get("name")).val(t.cid).appendTo(this.$perspectiveSelect);return this.$perspectiveSelect.val(("undefined"!=typeof currentPerspective&&null!==currentPerspective?currentPerspective.cid:void 0)||"none")},n.prototype.onPerspective=function(){var t,e;return e=this.$perspectiveSelect.val(),t="none"===e?null:Perspectives.get(this.$perspectiveSelect.val()),Session.set("perspective",t)},n}(Backbone.View),namespace("Views.Welcome",function(e){return e.EmbeddedOverview=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.className="welcome-index context",n.prototype.template=template("main::welcome/index"),n.prototype.events={"click .sidebar-nav [data-action]":"onAction"},n.prototype.initialize=function(t){return this.options=_.defaults({},t,{maps:!0}),this.subview("mapOverview",new Views.Welcome.MapOverview),this.listenTo(Session,"change:map",this.resetScrollTop)},n.prototype.render=function(){return this.$el.html(this.template()),this.$el.find(".sidebar-nav [title]").tooltip({placement:"bottom"}),this.$el.find(".sidebar-content").html(this.mapOverview.render().el),this.options.maps||(this.$el.find("#welcomeMapsTab").remove(),this.maps.remove()),this},n.prototype.onAction=function(t){var e;switch(e=$(t.currentTarget).attr("data-action")){case"attributes":return Workflows.manageAttributes();case"members":return Workflows.manageMembers();case"info":return sidebar.push(new Views.Accounts.Show({model:currentAccount}));case"settings":return Views.Navigation.open()}},n.prototype.onTab=function(t){return this.$el.toggleClass("context","#welcomeOverview"===$(t.target).attr("href"))},n.prototype.resetScrollTop=function(){return this.$el.find(".welcome-content").scrollTop(0)},n}(Backbone.View),namespace("Views.Welcome",function(e){return e.Index=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.className="sidebar-view loading-view",n.prototype.render=function(){return this.$el.html('<i class="icon-spinner icon-2x icon-spin"></i>').css({"text-align":"center","padding-top":"36px"}),this},n}(Backbone.View),namespace("Views.Welcome",function(e){return e.LoadingView=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.className="map-overview",n.prototype.initialize=function(){return this.listenTo(Session,"change:map",this.render)},n.prototype.render=function(){var t;return t=this.subview(new Views.Maps.Show({model:currentMap})),this.$el.html(t.render().el),this},n}(Backbone.View),namespace("Views.Welcome",function(e){return e.MapOverview=t})}.call(this),function(){}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.className="welcome-overview",n.prototype.initialize=function(){return this.mapOverview=new Views.Welcome.MapOverview,this.perspectiveOverview=new Views.Welcome.PerspectiveOverview},n.prototype.render=function(){return this.$el.append(this.mapOverview.render().el),this.$el.append(this.perspectiveOverview.render().el),this},n}(Backbone.View),namespace("Views.Welcome",function(e){return e.Overview=t})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.className="perspective-overview",n.prototype.initialize=function(){return this.listenTo(Session,"change:perspective",this.render)},n.prototype.render=function(){var t;return currentPerspective?(t=this.subview(new Views.Perspectives.Show({model:currentPerspective})),this.$el.html(t.render().el)):this.$el.empty(),this},n}(Backbone.View),namespace("Views.Welcome",function(e){return e.PerspectiveOverview=t})}.call(this),function(){var t,e,n=function(t,e){return function(){return t.apply(e,arguments)}},i={}.hasOwnProperty,r=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};t=function(t){function i(){return this.migrate=n(this.migrate,this),this.fetch=n(this.fetch,this),e=i.__super__.constructor.apply(this,arguments)}return r(i,t),i.prototype.defaults=function(){return{account:void 0,strategy:"remote",readonly:!0}},i.prototype.initialize=function(){var t=this;return Dispatch.adapter=this,Dispatch.provision=function(){return t.provision()},Dispatch.migrate=function(){return t.migrate()}},i.prototype.load=function(){var t,e,n=this;return t=function(){return n.trigger("status",""),Dispatch.trigger("load")},e=function(){return n.trigger("status","Sorry, map cannot be loaded"),Dispatch.trigger("fail")},this.init(),this.prepare().then(this.fetch).then(this.migrate).then(t,e)},i.prototype.init=function(){return this.root=""+location.protocol+"//"+location.hostname+"/couch",this.rootdb=this.connect(this.root,{skipSetup:!0}),this.origin=this.get("account").origin(),this.origindb=this.connect(this.origin,{skipSetup:!0}),this.db=function(){switch(this.get("strategy")){case"remote":return this.origindb;case"local":return this.initializeLocalDB()}}.call(this),Transaction.pouch=Backbone.sync.pouch=this.db,Dispatch.db=this.db,Dispatch.trigger("ready")},i.prototype.initializeLocalDB=function(){return this.local="a"+this.get("account").id+"_master",this.localdb=this.connect(this.local)},i.prototype.prepare=function(){var t=this;return log.info("Inspecting "+this.origin),this.inspect().then(function(e){return 0===e&&t.trigger("status","Initializing project..."),t.readonly()?$.when(!0):t.provision()})},i.prototype.inspect=function(){var t,e=this;return t=new $.Deferred,this.origindb.info(function(n,i){return n?(log.error("Unable to access "+e.origin+": "+n),t.reject(n)):t.resolve(i.doc_count)}),t.promise()},i.prototype.provision=function(){var t;return t=new $.Deferred,this.origindb.replicate.from(this.rootdb,{continuous:!1},function(e,n){return e?t.reject(e):t.resolve(n)}),t.promise()},i.prototype.fetch=function(){return ApplicationLoader.update("Downloading map..."),Settings.fetch(),$.when(Attributes.fetch(),Maps.fetch(),Perspectives.fetch()).then(function(){return Elements.fetch()}).then(function(){return Connections.fetch()}).then(function(){return Loops.fetch()}).then(function(){return Elements.associate(),Connections.associate(),Loops.associate(),$.when(!0)})},i.prototype.migrate=function(){return Bootstrap.foundation()},i.prototype.readonly=function(){return this.get("readonly")},i.prototype.readwrite=function(){return!this.get("readonly")},i.prototype.connect=function(t,e){var n,i,r,o;return null==e&&(e={}),n=$("meta[name=csrf-token]").attr("content"),o=$("meta[name=access-token]").attr("content"),r={reduce:!1,include_docs:!0,conflicts:!0,auth:o?{username:o,password:""}:null,headers:{"X-CSRF-Token":n},ajax:{timeout:6e4}},i=_.extend({},e,r),Pouch(t,i)},i.prototype.reset=function(t){var e;return"local"!==this.get("strategy")?$.when(!0):(e=new $.Deferred,Pouch.destroy(this.local,function(n,i){return n?(e.reject(n),raise("Unable to destroy pouchdb "+this.local)):(e.resolve(i),"function"==typeof t?t(i):void 0)}),e.promise())},i.prototype.pull=function(t){var e,n=this;return null==t&&(t={}),"local"!==this.get("strategy")?$.when(!0):(_.defaults(t,{target:this.origindb}),log.info("Pulling "+t.target),e=new $.Deferred,this.db.replicate.from(t.target,{continuous:!1},function(t,i){return n.trigger("pull"),t?(log.info("Pull failed.",t),e.reject(t)):(log.info("Pull complete. ("+n.changesSummary(i)+")"),e.resolve(i))}),e.promise())},i.prototype.push=function(t){var e,n=this;return null==t&&(t={}),"local"!==this.get("strategy")?$.when(!0):(_.defaults(t,{target:this.origindb}),log.info("Pushing "+t.target),e=new $.Deferred,this.db.replicate.to(t.target,{continuous:!1},function(t,i){return n.trigger("push"),t?(log.info("Push failed.",t),e.reject(t)):(log.info("Push complete. ("+n.changesSummary(i)+")"),e.resolve(i))}),e.promise())},i.prototype.sync=function(){return this.pull(),this.push()},i.prototype.changesSummary=function(t){return""+t.docs_read+"/"+t.docs_written},i}(Backbone.Model),namespace("Adapters",function(e){return e.PouchAdapter=t})}.call(this),function(){var t,e,n,i=[].slice,r={}.hasOwnProperty,o=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};e=function(){var t,e,n,r,o,s,a;if(!Env.isProduction())return o=function(t,e,n){return log.error.apply(log,["mock save"].concat(i.call(arguments))),n.success({})},e=new Map({name:"Local Name",description:"Local description"}),e.sync=o,a={name:"Updated Name",description:"Updated description"},r={name:"Old Name"},Conflicts.process(e,{theirs:a,old:r}),n="My new description.\n\n- One\n- Two\n- Three\n- Four\n\nLast paragraph the same.\n\nMerge test",s="Their updated.\n\n- One\n- Three\n- Four\n- Two\n\nDescription.\n\nLast paragraph the same.\n\nMerge test.",t=new Element({attributes:{label:"My Label",description:n,bio:"Same"}}),t.sync=o,a={attributes:{label:"Updated Label",description:s,bio:"Same"}},r={attributes:{label:"Old Label",description:"Old description.",bio:"Same"}},Conflicts.process(t,{theirs:a,old:r})},t=function(t){function e(){return n=e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.model=Conflict,e.prototype.collections=["elements","connections","loops","maps","perspectives"],e["for"]=function(){},e.prototype.initialize=function(){return this.current=null,this.visits=0,this.listenTo(this,"all",this.onEvent)},e.prototype.guidance=function(){return this.visits<1},e.prototype.comparator=function(t,e){var n,i,r;return r=function(t,e){return t===e?0:e>t?-1:1},n=_.indexOf(Conflicts.collections,t.collection()),i=_.indexOf(Conflicts.collections,e.collection()),r(n,i)||r(t.label(),e.label())},e.prototype.process=function(t,e){var n,i,r;return n=t instanceof Conflict?t:t.buildConflict(e),i=function(){return n.prepare()},r=function(){return n.automerge()},i().then(r).then(null,function(){return Conflicts.add(n)})},e.prototype.onEvent=function(){var t,e;switch(e=arguments[0],t=2<=arguments.length?i.call(arguments,1):[],e){case"add":return this.onAdd.apply(this,t);case"remove":return this.onRemove.apply(this,t);case"edit":return this.onEdit.apply(this,t);case"resolve":return this.onResolve.apply(this,t)}},e.prototype.onAdd=function(){return this.show()},e.prototype.onRemove=function(t){return t===this.current?this.next():void 0},e.prototype.onEdit=function(t){return this.current=t},e.prototype.onResolve=function(t){return this.remove(t)},e.prototype.next=function(){var t;return this.visits+=1,t=Conflicts.first(),t?this.edit(t):void 0},e.prototype.edit=function(t){return this.current=Conflicts.get(t),this.current?this.trigger("edit",this.current):void 0},e.prototype.show=function(){var t;return null==(t=this.view)&&(this.view=this.initializeView()),this.view.show()},e.prototype.hide=function(){return this.view.hide()},e.prototype.initializeView=function(){var t;return t=new Views.Conflicts.Modal,t.render()},e}(Backbone.Collection),this.Conflicts=new t}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},r=[].slice;t=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.initialize=function(){return this.listenTo(Settings,"all",this.onSettingsEvent),this.listenTo(Session,"all",this.onSessionEvent),this.listenTo(Maps,"all",this.onMapEvent)},n.prototype.onSettingsEvent=function(){var t,e;switch(e=arguments[0],t=2<=arguments.length?r.call(arguments,1):[],e){case"change:default_map_id":return this.trigger("change:defaultmap")}},n.prototype.onSessionEvent=function(){var t,e;return e=arguments[0],t=2<=arguments.length?r.call(arguments,1):[],/change:/.test(e)?this.trigger.apply(this,[e].concat(r.call(t))):void 0},n.prototype.onMapEvent=function(t,e){if(e===currentMap)switch(t){case"change:default_perspective_id":return this.trigger("change:defaultperspective")}},n}(Backbone.Model),namespace("window",function(e){return e.DispatchController=t})}.call(this),function(){this.able=new Able,able.actor=function(){return currentUser},able.roles={"default":function(t){var e;return e="undefined"!=typeof overrides&&null!==overrides?overrides.role:void 0,e?e:t.isOwner(currentAccount)?"owner":t.membership.get("role")}},able.resources=["account","settings","members","maps","perspectives","attributes","entities"],able.abilities={owner:{inherit:["manager","contributor","observer","guest"],manage:{account:!0}},manager:{inherit:["contributor","observer","guest"],manage:{members:!0},update:{account:!0}},contributor:{inherit:["observer","guest"],manage:{settings:!0,theme:!0,maps:!0,perspectives:!0,attributes:!0,entities:!0,map:!0,entity:!0}},observer:{inherit:["guest"]},guest:{},specific:{}}}.call(this),function(){Backbone.qs=require("qs").parse}.call(this),function(){var t,e,n,i,r,o,s,a;n=require("qs"),null==(o=this.Rails)&&(this.Rails={env:"production"}),i=(null!=(s=location.search)?s.slice(1):void 0)||"",r=n.parse(i),t=(null!=(a=location.hash)?a.slice(1):void 0)||"",e=n.parse(_.last(t.split("?"))),this.Env={name:this.Rails.env,isDevelopment:function(){return"development"===Env.name},isStaging:function(){return"staging"===Env.name},isProduction:function(){return"production"===Env.name},request:{search:r,hash:e,param:function(t,n){var i;return i=r[t]||e[t],null!=n?_.isEqual(i,n):i}}}}.call(this),function(){var t,e,n,i;Benchmarks.enabled=Env.request.search.benchmark||Env.request.hash.benchmark,t=new Benchmarks("Data"),i=new Benchmarks("Display").alias({update:"render:update",cull:"render:update:cull",adjust:"render:update:adjust",style:"render:update:style",dress:"render:update:dress",filter:"render:update:filter",animate:"render:update:animate",draw:"render:draw",pick:"render:pick"}),n=new Benchmarks("Layout").alias({simulation:"layout:simulation",initialization:"layout:simulation:initialization",relaxation:"layout:simulation:relaxation",behaviors:"layout:simulation:behaviors",integration:"layout:simulation:integration",post:"layout:post",assignment:"layout:post:assignment"}),e=new Benchmarks("Interaction").alias({picking:"interaction:picking"}),namespace("window",function(r){return r.DataBenchmarks=t,r.RenderBenchmarks=i,r.LayoutBenchmarks=n,r.InteractionBenchmarks=e})}.call(this),function(){this.Settings=new SettingsModel,this.Elements=new ElementCollection,this.Connections=new ConnectionCollection,this.Loops=new LoopCollection,this.Session=new SessionController,this.Dispatch=new DispatchController}.call(this),function(){Cast.alias("text","markdown")}.call(this),function(){$(document).on("submit","form",function(t){var e;return e=$(this).attr("action"),null!=e?!0:t.preventDefault()})}.call(this),Gravatar.defaults={secure:!0,placeholder:"mm",size:80},function(){$(document).on("click","a",function(t){var e;return e=$(this).attr("href"),e&&"#"!==e?void 0:t.preventDefault()})}.call(this),function(){this.initializeAccountMap=function(t){var e,n,i,r;return iframed()&&(this.overrides.role="observer"),Session.bootstrap(t),i=new MapView.Model({mode:currentUser.membership.get("role"),defaultSidebarView:new Views.Welcome.Index}),e=$('<div id="map"></div>').toggleClass("embedded",iframed()).appendTo("body"),this.map=new MapView({el:e,model:i}),this.map.on("ready",function(){var t,e,n;return _.delay(function(){return ApplicationLoader.dismiss()},1e3),"production"!==Rails.env?(e=t=n=null,e&&sidebar.push(e),t&&t.show(),n?n.open():void 0):void 0}),this.map.init(),r={account:currentAccount,readonly:currentUser.isObserver()},n=new Adapters.PouchAdapter(r),n.on("status",function(t){return ApplicationLoader.update(t)}),n.load()}}.call(this),function(){this.initializeEmbeddedMap=function(t){var e,n,i,r,o;return this.token=new Token(t.token),this.overrides.role="observer",Session.bootstrap(t),e=$("<div />").attr("id","map").addClass("map embedded").appendTo("body"),i=new MapView.Model({mode:"observer"}),this.token.includeOverview()&&i.set("defaultSidebarView",new Views.Welcome.EmbeddedOverview),this.map=new MapView({el:e,model:i}),o="1"===Env.request.param("simple"),this.map.$el.toggleClass("without-finder",o||"0"===Env.request.param("finder")),this.map.$el.toggleClass("without-footer",o||"0"===Env.request.param("footer")),this.map.$el.toggleClass("without-screenshot",o||"0"===Env.request.param("screenshot")),this.map.on("load",function(){var e,n,i,r;return e=token.map(),n=token.perspective(),i=token.selection(),r=urlFor({map:e,perspective:n,selection:i}),router.navigate(r,{trigger:!0}),_.isEmpty(t.transform)?void 0:e.transform(t.transform,{animate:!1})}),this.map.on("ready",function(){return _.delay(function(){return ApplicationLoader.dismiss()},1e3)}),this.map.init(),r={account:currentAccount,readonly:!0},n=new Adapters.PouchAdapter(r),n.on("status",function(t){return ApplicationLoader.update(t)}),n.load()}}.call(this),function(){marked.setOptions({pedantic:!1,gfm:!0,sanitize:!0,tables:!0,breaks:!0,smartLists:!0})}.call(this),function(){this.prompt=function(t,e,n){var i,r;return _.isFunction(e)&&(n=e,e=void 0),r={placeholder:t,value:e,callback:n},i=new Views.Modals.Prompt({model:r}),i.show(),i.promise}}.call(this),function(){this.raise=function(t,e){var n,i;throw t instanceof Error?n=t:(i=t,e&&(i+=": "+e),n=new Error(i)),log.error(n),n}}.call(this),function(){Raven.config("https://9cbf786683e54d9cbacc7c6d8b3781ae@app.getsentry.com/16595").install()}.call(this),function(){this.TimeAgo={update:function(){return $("time.ago").timeago()}},$(function(){return TimeAgo.update()})}.call(this),function(){$(function(){return FastClick.attach(document.body),$(document.body).hammer({prevent_mouseevents:!0}).on("swipeleft",function(t){return t.preventDefault(),"undefined"!=typeof sidebar&&null!==sidebar?sidebar.minimize():void 0}).on("swiperight",function(t){return t.preventDefault(),"undefined"!=typeof sidebar&&null!==sidebar?sidebar.maximize():void 0}).on("doubletap",function(t){var e;return e=$(t.target),e.is(".refresh-btn")||e.closest(".refresh-btn").length?location.reload(!0):void 0})})}.call(this),function(){}.call(this);